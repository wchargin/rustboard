<!doctype html><!--
@license
Copyright 2016 The TensorFlow Authors. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--><meta charset="utf-8">
<title>TensorBoard</title>
<link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMQAAADECAMAAAD3eH5ZAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAD/UExURfFlKfaELvFmKfNyK/67NvWALf68Nv69NvNxK/20NfyyNP22NfN0K/JrKvqhMv2zNf25Nf24Nf23NfeOL/yzNPyvNPJoKviWMPmeMfN1K/WBLfePL/FnKfeML/qlMvR7LPmcMfeLL/aJLvR5LPFoKfJuKvR3LP66NvywNPeNL/V/LfaILv21Nf26NfNzK/NvK/R6LPmaMfyxNPqfMvV+LfurM/iSMPmbMfJvKvmdMfumM/qiMvmZMfytNPJqKvysNPN2K/iYMPNwK/upM/JtKvJsKviVMPaHLvaGLvJpKvR8LPaKLvqkMvuqM/aFLvR4LPuoM/iTMPWDLfiRMPmYMXS0ngkAAALoSURBVHja7drnctpAFIbhFUISSKJ3MKYa0+y4xTW9937/15JkJhlTjhrSrHRmvuf/as6L0YLFCgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBJ6njenqspzgnPrsrGX9Zpi2tCrmnc6+dYNthVY5WpMmxQLWPdMsOuYVwzNj3ei2t3mQwaV43BJPDCS2NbJ5aEeuX/+9qcjQOtfFIkIkrvY2g4MVcmOBsFWbowKO/kNyj62gRpJcDaPBlxLr1B0zdG0C/8LzbJiJrshuvy1gzlA9+rD8mIkuyIJjFE3/dqnYwoSm7IUEPoD/wut8iIguSIDjlFxe/yfXL5vuSI21BTZLLhXoOILMO8Hxwa/L8bI0LfmUdhGowb2ZvT0e57pFNDgB06IlVyjmmIBl2T/nl9Rw6SD9GgSG/Q0uQkaW3XhmovKQ3eFQ4N2Uo9OQ1eFZsNerf7vP+rO4rhmY1Lg3vFVoP8+8BXg1sFnwbnCk4NThW8GuiKBDdkVVtTNFvNelVsNqTbyWnIOM2oeTRoyWvwmpJHg/ucXBrcJuXT4DwrpwZi2vy0VCx8YtXg/D2bU4OfiuQ3eFfE2KD4bfCqiLNB993gXsGlwa2CT4NzBacGIVQ6YsipQdh0xEdODUKjIxrSp88onZ8zbbFLg1DoiFO5BXvDGv2My9/JhUT8JUZTI0yDaNHLBzIbvqTDNYhUiVw/kdjQ1kM2CHFDPjKW+KzyRTF0g/ga9w9y+fANQpxvX8CU+Ny7FUWDeF3Y+g3lROIf4k0UDX9eCyvO531PyYhHga9zvPZJU5b73Y/eXj8Hv9D48n6HaF5LbcjRt8TZTtda5M1DfXnbkX1C0SHCFKzQB5Fe8op4GNGNHavvZESbVwT5r6W1xyuCPBY3Y9YgDqzknH/e3YfNzzuL30l0IebrZ5kKtuDIXt1n868ET6kf3/49tLvrCcZyF8Pu215dAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcPIbNrBhOaBXucoAAAAASUVORK5CYII=">
<link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMQAAADECAMAAAD3eH5ZAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAD/UExURfFlKfaELvFmKfNyK/67NvWALf68Nv69NvNxK/20NfyyNP22NfN0K/JrKvqhMv2zNf25Nf24Nf23NfeOL/yzNPyvNPJoKviWMPmeMfN1K/WBLfePL/FnKfeML/qlMvR7LPmcMfeLL/aJLvR5LPFoKfJuKvR3LP66NvywNPeNL/V/LfaILv21Nf26NfNzK/NvK/R6LPmaMfyxNPqfMvV+LfurM/iSMPmbMfJvKvmdMfumM/qiMvmZMfytNPJqKvysNPN2K/iYMPNwK/upM/JtKvJsKviVMPaHLvaGLvJpKvR8LPaKLvqkMvuqM/aFLvR4LPuoM/iTMPWDLfiRMPmYMXS0ngkAAALoSURBVHja7drnctpAFIbhFUISSKJ3MKYa0+y4xTW9937/15JkJhlTjhrSrHRmvuf/as6L0YLFCgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBJ6njenqspzgnPrsrGX9Zpi2tCrmnc6+dYNthVY5WpMmxQLWPdMsOuYVwzNj3ei2t3mQwaV43BJPDCS2NbJ5aEeuX/+9qcjQOtfFIkIkrvY2g4MVcmOBsFWbowKO/kNyj62gRpJcDaPBlxLr1B0zdG0C/8LzbJiJrshuvy1gzlA9+rD8mIkuyIJjFE3/dqnYwoSm7IUEPoD/wut8iIguSIDjlFxe/yfXL5vuSI21BTZLLhXoOILMO8Hxwa/L8bI0LfmUdhGowb2ZvT0e57pFNDgB06IlVyjmmIBl2T/nl9Rw6SD9GgSG/Q0uQkaW3XhmovKQ3eFQ4N2Uo9OQ1eFZsNerf7vP+rO4rhmY1Lg3vFVoP8+8BXg1sFnwbnCk4NThW8GuiKBDdkVVtTNFvNelVsNqTbyWnIOM2oeTRoyWvwmpJHg/ucXBrcJuXT4DwrpwZi2vy0VCx8YtXg/D2bU4OfiuQ3eFfE2KD4bfCqiLNB993gXsGlwa2CT4NzBacGIVQ6YsipQdh0xEdODUKjIxrSp88onZ8zbbFLg1DoiFO5BXvDGv2My9/JhUT8JUZTI0yDaNHLBzIbvqTDNYhUiVw/kdjQ1kM2CHFDPjKW+KzyRTF0g/ga9w9y+fANQpxvX8CU+Ny7FUWDeF3Y+g3lROIf4k0UDX9eCyvO531PyYhHga9zvPZJU5b73Y/eXj8Hv9D48n6HaF5LbcjRt8TZTtda5M1DfXnbkX1C0SHCFKzQB5Fe8op4GNGNHavvZESbVwT5r6W1xyuCPBY3Y9YgDqzknH/e3YfNzzuL30l0IebrZ5kKtuDIXt1n868ET6kf3/49tLvrCcZyF8Pu215dAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcPIbNrBhOaBXucoAAAAASUVORK5CYII=">
<script>/**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
// @version 0.7.24
!function(){window.WebComponents=window.WebComponents||{flags:{}};var e="webcomponents-lite.js",t=document.querySelector('script[src*="'+e+'"]'),n={};if(!n.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var t,o=e.split("=");o[0]&&(t=o[0].match(/wc-(.+)/))&&(n[t[1]]=o[1]||!0)}),t)for(var o,r=0;o=t.attributes[r];r++)"src"!==o.name&&(n[o.name]=o.value||!0);if(n.log&&n.log.split){var i=n.log.split(",");n.log={},i.forEach(function(e){n.log[e]=!0})}else n.log={}}n.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=n.register),WebComponents.flags=n}(),function(e){"use strict";function t(e){return void 0!==h[e]}function n(){s.call(this),this._isInvalid=!0}function o(e){return""==e&&n.call(this),e.toLowerCase()}function r(e){var t=e.charCodeAt(0);return t>32&&t<127&&[34,35,60,62,63,96].indexOf(t)==-1?e:encodeURIComponent(e)}function i(e){var t=e.charCodeAt(0);return t>32&&t<127&&[34,35,60,62,96].indexOf(t)==-1?e:encodeURIComponent(e)}function a(e,a,s){function c(e){g.push(e)}var d=a||"scheme start",l=0,u="",w=!1,_=!1,g=[];e:for(;(e[l-1]!=p||0==l)&&!this._isInvalid;){var b=e[l];switch(d){case"scheme start":if(!b||!m.test(b)){if(a){c("Invalid scheme.");break e}u="",d="no scheme";continue}u+=b.toLowerCase(),d="scheme";break;case"scheme":if(b&&v.test(b))u+=b.toLowerCase();else{if(":"!=b){if(a){if(p==b)break e;c("Code point not allowed in scheme: "+b);break e}u="",l=0,d="no scheme";continue}if(this._scheme=u,u="",a)break e;t(this._scheme)&&(this._isRelative=!0),d="file"==this._scheme?"relative":this._isRelative&&s&&s._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==b?(this._query="?",d="query"):"#"==b?(this._fragment="#",d="fragment"):p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._schemeData+=r(b));break;case"no scheme":if(s&&t(s._scheme)){d="relative";continue}c("Missing scheme."),n.call(this);break;case"relative or authority":if("/"!=b||"/"!=e[l+1]){c("Expected /, got: "+b),d="relative";continue}d="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=s._scheme),p==b){this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._username=s._username,this._password=s._password;break e}if("/"==b||"\\"==b)"\\"==b&&c("\\ is an invalid code point."),d="relative slash";else if("?"==b)this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query="?",this._username=s._username,this._password=s._password,d="query";else{if("#"!=b){var y=e[l+1],E=e[l+2];("file"!=this._scheme||!m.test(b)||":"!=y&&"|"!=y||p!=E&&"/"!=E&&"\\"!=E&&"?"!=E&&"#"!=E)&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password,this._path=s._path.slice(),this._path.pop()),d="relative path";continue}this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._fragment="#",this._username=s._username,this._password=s._password,d="fragment"}break;case"relative slash":if("/"!=b&&"\\"!=b){"file"!=this._scheme&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password),d="relative path";continue}"\\"==b&&c("\\ is an invalid code point."),d="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=b){c("Expected '/', got: "+b),d="authority ignore slashes";continue}d="authority second slash";break;case"authority second slash":if(d="authority ignore slashes","/"!=b){c("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!=b&&"\\"!=b){d="authority";continue}c("Expected authority, got: "+b);break;case"authority":if("@"==b){w&&(c("@ already seen."),u+="%40"),w=!0;for(var L=0;L<u.length;L++){var N=u[L];if("\t"!=N&&"\n"!=N&&"\r"!=N)if(":"!=N||null!==this._password){var M=r(N);null!==this._password?this._password+=M:this._username+=M}else this._password="";else c("Invalid whitespace in authority.")}u=""}else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){l-=u.length,u="",d="host";continue}u+=b}break;case"file host":if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){2!=u.length||!m.test(u[0])||":"!=u[1]&&"|"!=u[1]?0==u.length?d="relative path start":(this._host=o.call(this,u),u="",d="relative path start"):d="relative path";continue}"\t"==b||"\n"==b||"\r"==b?c("Invalid whitespace in file host."):u+=b;break;case"host":case"hostname":if(":"!=b||_){if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){if(this._host=o.call(this,u),u="",d="relative path start",a)break e;continue}"\t"!=b&&"\n"!=b&&"\r"!=b?("["==b?_=!0:"]"==b&&(_=!1),u+=b):c("Invalid code point in host/hostname: "+b)}else if(this._host=o.call(this,u),u="",d="port","hostname"==a)break e;break;case"port":if(/[0-9]/.test(b))u+=b;else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b||a){if(""!=u){var T=parseInt(u,10);T!=h[this._scheme]&&(this._port=T+""),u=""}if(a)break e;d="relative path start";continue}"\t"==b||"\n"==b||"\r"==b?c("Invalid code point in port: "+b):n.call(this)}break;case"relative path start":if("\\"==b&&c("'\\' not allowed in path."),d="relative path","/"!=b&&"\\"!=b)continue;break;case"relative path":if(p!=b&&"/"!=b&&"\\"!=b&&(a||"?"!=b&&"#"!=b))"\t"!=b&&"\n"!=b&&"\r"!=b&&(u+=r(b));else{"\\"==b&&c("\\ not allowed in relative path.");var O;(O=f[u.toLowerCase()])&&(u=O),".."==u?(this._path.pop(),"/"!=b&&"\\"!=b&&this._path.push("")):"."==u&&"/"!=b&&"\\"!=b?this._path.push(""):"."!=u&&("file"==this._scheme&&0==this._path.length&&2==u.length&&m.test(u[0])&&"|"==u[1]&&(u=u[0]+":"),this._path.push(u)),u="","?"==b?(this._query="?",d="query"):"#"==b&&(this._fragment="#",d="fragment")}break;case"query":a||"#"!=b?p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._query+=i(b)):(this._fragment="#",d="fragment");break;case"fragment":p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._fragment+=b)}l++}}function s(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function c(e,t){void 0===t||t instanceof c||(t=new c(String(t))),this._url=e,s.call(this);var n=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");a.call(this,n,null,t)}var d=!1;if(!e.forceJURL)try{var l=new URL("b","http://a");l.pathname="c%20d",d="http://a/c%20d"===l.href}catch(u){}if(!d){var h=Object.create(null);h.ftp=21,h.file=0,h.gopher=70,h.http=80,h.https=443,h.ws=80,h.wss=443;var f=Object.create(null);f["%2e"]=".",f[".%2e"]="..",f["%2e."]="..",f["%2e%2e"]="..";var p=void 0,m=/[a-zA-Z]/,v=/[a-zA-Z0-9\+\-\.]/;c.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return""==this._username&&null==this._password||(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){s.call(this),a.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||a.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],a.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"==e[0]&&(e=e.slice(1)),a.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"==e[0]&&(e=e.slice(1)),a.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return e=this.host,e?this._scheme+"://"+e:""}};var w=e.URL;w&&(c.createObjectURL=function(e){return w.createObjectURL.apply(w,arguments)},c.revokeObjectURL=function(e){w.revokeObjectURL(e)}),e.URL=c}}(self),"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};n.prototype={set:function(t,n){var o=t[this.name];return o&&o[0]===t?o[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];return!(!t||t[0]!==e)&&(t[0]=t[1]=void 0,!0)},has:function(e){var t=e[this.name];return!!t&&t[0]===e}},window.WeakMap=n}(),function(e){function t(e){b.push(e),g||(g=!0,m(o))}function n(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function o(){g=!1;var e=b;b=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();r(e),n.length&&(e.callback_(n,e),t=!0)}),t&&o()}function r(e){e.nodes_.forEach(function(t){var n=v.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function i(e,t){for(var n=e;n;n=n.parentNode){var o=v.get(n);if(o)for(var r=0;r<o.length;r++){var i=o[r],a=i.options;if(n===e||a.subtree){var s=t(a);s&&i.enqueue(s)}}}}function a(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++y}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function c(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function d(e,t){return E=new s(e,t)}function l(e){return L?L:(L=c(E),L.oldValue=e,L)}function u(){E=L=void 0}function h(e){return e===L||e===E}function f(e,t){return e===t?e:L&&h(e)?L:null}function p(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var m,v=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var w=[],_=String(Math.random());window.addEventListener("message",function(e){if(e.data===_){var t=w;w=[],t.forEach(function(e){e()})}}),m=function(e){w.push(e),window.postMessage(_,"*")}}var g=!1,b=[],y=0;a.prototype={observe:function(e,t){if(e=n(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var o=v.get(e);o||v.set(e,o=[]);for(var r,i=0;i<o.length;i++)if(o[i].observer===this){r=o[i],r.removeListeners(),r.options=t;break}r||(r=new p(this,e,t),o.push(r),this.nodes_.push(e)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=v.get(e),n=0;n<t.length;n++){var o=t[n];if(o.observer===this){o.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var E,L;p.prototype={enqueue:function(e){var n=this.observer.records_,o=n.length;if(n.length>0){var r=n[o-1],i=f(r,e);if(i)return void(n[o-1]=i)}else t(this.observer);n[o]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=v.get(e);t||v.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=v.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,o=e.target,r=new d("attributes",o);r.attributeName=t,r.attributeNamespace=n;var a=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;i(o,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||e.attributeFilter.indexOf(t)!==-1||e.attributeFilter.indexOf(n)!==-1))return e.attributeOldValue?l(a):r});break;case"DOMCharacterDataModified":var o=e.target,r=d("characterData",o),a=e.prevValue;i(o,function(e){if(e.characterData)return e.characterDataOldValue?l(a):r});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,c,h=e.target;"DOMNodeInserted"===e.type?(s=[h],c=[]):(s=[],c=[h]);var f=h.previousSibling,p=h.nextSibling,r=d("childList",e.target.parentNode);r.addedNodes=s,r.removedNodes=c,r.previousSibling=f,r.nextSibling=p,i(e.relatedNode,function(e){if(e.childList)return r})}u()}},e.JsMutationObserver=a,e.MutationObserver||(e.MutationObserver=a,a._isPolyfilled=!0)}}(self),function(){function e(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case"Â ":return"&nbsp;"}}function t(t){return t.replace(u,e)}var n="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&!function(){var e=document.importNode;document.importNode=function(){var t=e.apply(document,arguments);if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var n=document.createDocumentFragment();return n.appendChild(t),n}return t}}();var o=function(){if(!n){var e=document.createElement("template"),t=document.createElement("template");t.content.appendChild(document.createElement("div")),e.content.appendChild(t);var o=e.cloneNode(!0);return 0===o.content.childNodes.length||0===o.content.firstChild.content.childNodes.length}}(),r="template",i=function(){};if(n){var a=document.implementation.createHTMLDocument("template"),s=!0,c=document.createElement("style");c.textContent=r+"{display:none;}";var d=document.head;d.insertBefore(c,d.firstElementChild),i.prototype=Object.create(HTMLElement.prototype),i.decorate=function(e){if(!e.content){e.content=a.createDocumentFragment();for(var n;n=e.firstChild;)e.content.appendChild(n);if(e.cloneNode=function(e){return i.cloneNode(this,e)},s)try{Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",n=this.content.firstChild;n;n=n.nextSibling)e+=n.outerHTML||t(n.data);return e},set:function(e){for(a.body.innerHTML=e,i.bootstrap(a);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;a.body.firstChild;)this.content.appendChild(a.body.firstChild)},configurable:!0})}catch(o){s=!1}i.bootstrap(e.content)}},i.bootstrap=function(e){for(var t,n=e.querySelectorAll(r),o=0,a=n.length;o<a&&(t=n[o]);o++)i.decorate(t)},document.addEventListener("DOMContentLoaded",function(){i.bootstrap(document)});var l=document.createElement;document.createElement=function(){"use strict";var e=l.apply(document,arguments);return"template"===e.localName&&i.decorate(e),e};var u=/[&\u00A0<>]/g}if(n||o){var h=Node.prototype.cloneNode;i.cloneNode=function(e,t){var n=h.call(e,!1);return this.decorate&&this.decorate(n),t&&(n.content.appendChild(h.call(e.content,!0)),this.fixClonedDom(n.content,e.content)),n},i.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var n,o,i=t.querySelectorAll(r),a=e.querySelectorAll(r),s=0,c=a.length;s<c;s++)o=i[s],n=a[s],this.decorate&&this.decorate(o),n.parentNode.replaceChild(o.cloneNode(!0),n)};var f=document.importNode;Node.prototype.cloneNode=function(e){var t=h.call(this,e);return e&&i.fixClonedDom(t,this),t},document.importNode=function(e,t){if(e.localName===r)return i.cloneNode(e,t);var n=f.call(document,e,t);return t&&i.fixClonedDom(n,e),n},o&&(HTMLTemplateElement.prototype.cloneNode=function(e){return i.cloneNode(this,e)})}n&&(window.HTMLTemplateElement=i)}(),function(e){"use strict";if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}}());var n=function(){var e=document.createEvent("Event");return e.initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented}();if(!n){var o=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(o.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var r=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||r&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||r&&"function"!=typeof window.Event){var i=window.Event;window.Event=function(e,t){t=t||{};var n=document.createEvent("Event");return n.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),n},window.Event.prototype=i.prototype}}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){function t(e,t){t=t||p,o(function(){i(e,t)},t)}function n(e){return"complete"===e.readyState||e.readyState===w}function o(e,t){if(n(t))e&&e();else{var r=function(){"complete"!==t.readyState&&t.readyState!==w||(t.removeEventListener(_,r),o(e,t))};t.addEventListener(_,r)}}function r(e){e.target.__loaded=!0}function i(e,t){function n(){c==d&&e&&e({allImports:s,loadedImports:l,errorImports:u})}function o(e){r(e),l.push(this),c++,n()}function i(e){u.push(this),c++,n()}var s=t.querySelectorAll("link[rel=import]"),c=0,d=s.length,l=[],u=[];if(d)for(var h,f=0;f<d&&(h=s[f]);f++)a(h)?(l.push(this),c++,n()):(h.addEventListener("load",o),h.addEventListener("error",i));else n()}function a(e){return u?e.__loaded||e["import"]&&"loading"!==e["import"].readyState:e.__importParsed}function s(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)c(t)&&d(t)}function c(e){return"link"===e.localName&&"import"===e.rel}function d(e){var t=e["import"];t?r({target:e}):(e.addEventListener("load",r),e.addEventListener("error",r))}var l="import",u=Boolean(l in document.createElement("link")),h=Boolean(window.ShadowDOMPolyfill),f=function(e){return h?window.ShadowDOMPolyfill.wrapIfNeeded(e):e},p=f(document),m={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return f(e)},configurable:!0};Object.defineProperty(document,"_currentScript",m),Object.defineProperty(p,"_currentScript",m);var v=/Trident/.test(navigator.userAgent),w=v?"complete":"interactive",_="readystatechange";u&&(new MutationObserver(function(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)t.addedNodes&&s(t.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var e,t=document.querySelectorAll("link[rel=import]"),n=0,o=t.length;n<o&&(e=t[n]);n++)d(e)}()),t(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=p.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),p.dispatchEvent(t)}),e.IMPORT_LINK_TYPE=l,e.useNative=u,e.rootDocument=p,e.whenReady=t,e.isIE=v}(window.HTMLImports),function(e){var t=[],n=function(e){t.push(e)},o=function(){t.forEach(function(t){t(e)})};e.addModule=n,e.initializeModules=o}(window.HTMLImports),window.HTMLImports.addModule(function(e){var t=/(url\()([^)]*)(\))/g,n=/(@import[\s]+(?!url\())([^;]*)(;)/g,o={resolveUrlsInStyle:function(e,t){var n=e.ownerDocument,o=n.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,o),e},resolveUrlsInCssText:function(e,o,r){var i=this.replaceUrls(e,r,o,t);return i=this.replaceUrls(i,r,o,n)},replaceUrls:function(e,t,n,o){return e.replace(o,function(e,o,r,i){var a=r.replace(/["']/g,"");return n&&(a=new URL(a,n).href),t.href=a,a=t.href,o+"'"+a+"'"+i})}};e.path=o}),window.HTMLImports.addModule(function(e){var t={async:!0,ok:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status},load:function(n,o,r){var i=new XMLHttpRequest;return(e.flags.debug||e.flags.bust)&&(n+="?"+Math.random()),i.open("GET",n,t.async),i.addEventListener("readystatechange",function(e){if(4===i.readyState){var n=null;try{var a=i.getResponseHeader("Location");a&&(n="/"===a.substr(0,1)?location.origin+a:a)}catch(e){console.error(e.message)}o.call(r,!t.ok(i)&&i,i.response||i.responseText,n)}}),i.send(),i},loadDocument:function(e,t,n){this.load(e,t,n).responseType="document"}};e.xhr=t}),window.HTMLImports.addModule(function(e){var t=e.xhr,n=e.flags,o=function(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}};o.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){if(this.pending[e])return this.pending[e].push(t),!0;return this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):(this.pending[e]=[t],!1)},fetch:function(e,o){if(n.load&&console.log("fetch",e,o),e)if(e.match(/^data:/)){var r=e.split(","),i=r[0],a=r[1];a=i.indexOf(";base64")>-1?atob(a):decodeURIComponent(a),setTimeout(function(){this.receive(e,o,null,a)}.bind(this),0)}else{var s=function(t,n,r){this.receive(e,o,t,n,r)}.bind(this);t.load(e,s)}else setTimeout(function(){this.receive(e,o,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,n,o,r){this.cache[e]=o;for(var i,a=this.pending[e],s=0,c=a.length;s<c&&(i=a[s]);s++)this.onload(e,i,o,n,r),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=o}),window.HTMLImports.addModule(function(e){var t=function(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))};t.prototype={handler:function(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(e){function t(e){return"link"===e.localName&&e.rel===l}function n(e){var t=o(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(t)}function o(e){return e.textContent+r(e)}function r(e){var t=e.ownerDocument;t.__importedScripts=t.__importedScripts||0;var n=e.ownerDocument.baseURI,o=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+n+o+".js\n"}function i(e){var t=e.ownerDocument.createElement("style");return t.textContent=e.textContent,a.resolveUrlsInStyle(t),t}var a=e.path,s=e.rootDocument,c=e.flags,d=e.isIE,l=e.IMPORT_LINK_TYPE,u="link[rel="+l+"]",h={documentSelectors:u,importsSelectors:[u,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){if(this.isParsed(e))return void(c.parse&&console.log("[%s] is already parsed",e.localName));var t=this[this.map[e.localName]];t&&(this.markParsing(e),t.call(this,e))},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){c.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,c.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){var t=this.dynamicElements.indexOf(e);t>=0&&this.dynamicElements.splice(t,1)},parseImport:function(e){if(e["import"]=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e["import"]&&(e["import"].__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)t=e.__pending.shift(),t&&t({target:e});this.parseNext()},parseLink:function(e){t(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var t=e;e=i(e),t.__appliedElement=e,e.__importElement=t,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(e,t){var n=this,o=function(r){e.removeEventListener("load",o),e.removeEventListener("error",o),t&&t(r),n.markParsingComplete(e),n.parseNext()};if(e.addEventListener("load",o),e.addEventListener("error",o),d&&"style"===e.localName){var r=!1;if(e.textContent.indexOf("@import")==-1)r=!0;else if(e.sheet){r=!0;for(var i,a=e.sheet.cssRules,s=a?a.length:0,c=0;c<s&&(i=a[c]);c++)i.type===CSSRule.IMPORT_RULE&&(r=r&&Boolean(i.styleSheet))}r&&setTimeout(function(){e.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(t){var o=document.createElement("script");o.__importElement=t,o.src=t.src?t.src:n(t),e.currentScript=t,this.trackElement(o,function(t){o.parentNode&&o.parentNode.removeChild(o),e.currentScript=null}),this.addElementToDocument(o)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(s)||this.nextToParseDynamic())},nextToParseInDoc:function(e,n){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var o,r=e.querySelectorAll(this.parseSelectorsForNode(e)),i=0,a=r.length;i<a&&(o=r[i]);i++)if(!this.isParsed(o))return this.hasResource(o)?t(o)?this.nextToParseInDoc(o.__doc,o):o:void 0}return n},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===s?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return this.dynamicElements.indexOf(e)>=0},hasResource:function(e){return!t(e)||void 0!==e.__doc}};e.parser=h,e.IMPORT_SELECTOR=u}),window.HTMLImports.addModule(function(e){function t(e){return n(e,a)}function n(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}function o(e){return!!Object.getOwnPropertyDescriptor(e,"baseURI")}function r(e,t){var n=document.implementation.createHTMLDocument(a);n._URL=t;var r=n.createElement("base");r.setAttribute("href",t),n.baseURI||o(n)||Object.defineProperty(n,"baseURI",{value:t});var i=n.createElement("meta");return i.setAttribute("charset","utf-8"),n.head.appendChild(i),n.head.appendChild(r),n.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(n),n}var i=e.flags,a=e.IMPORT_LINK_TYPE,s=e.IMPORT_SELECTOR,c=e.rootDocument,d=e.Loader,l=e.Observer,u=e.parser,h={documents:{},documentPreloadSelectors:s,importsPreloadSelectors:[s].join(","),loadNode:function(e){f.addNode(e)},loadSubtree:function(e){var t=this.marshalNodes(e);f.addNodes(t)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===c?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,n,o,a,s){if(i.load&&console.log("loaded",e,n),n.__resource=o,n.__error=a,t(n)){var c=this.documents[e];void 0===c&&(c=a?null:r(o,s||e),c&&(c.__importLink=n,this.bootDocument(c)),this.documents[e]=c),n.__doc=c}u.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),u.parseNext()},loadedAll:function(){u.parseNext()}},f=new d(h.loaded.bind(h),h.loadedAll.bind(h));if(h.observer=new l,!document.baseURI){var p={get:function(){var e=document.querySelector("base");return e?e.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",p),Object.defineProperty(c,"baseURI",p)}e.importer=h,e.importLoader=f}),window.HTMLImports.addModule(function(e){var t=e.parser,n=e.importer,o={added:function(e){for(var o,r,i,a,s=0,c=e.length;s<c&&(a=e[s]);s++)o||(o=a.ownerDocument,r=t.isParsed(o)),i=this.shouldLoadNode(a),i&&n.loadNode(a),this.shouldParseNode(a)&&r&&t.parseDynamic(a,i)},shouldLoadNode:function(e){return 1===e.nodeType&&r.call(e,n.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&r.call(e,t.parseSelectorsForNode(e))}};n.observer.addCallback=o.added.bind(o);var r=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(e){function t(){window.HTMLImports.importer.bootDocument(o)}var n=e.initializeModules;e.isIE;if(!e.useNative){n();var o=e.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?t():document.addEventListener("DOMContentLoaded",t)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],o=function(e){n.push(e)},r=function(){n.forEach(function(t){t(e)})};e.addModule=o,e.initializeModules=r,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){n(e,function(e){return!!t(e)||void o(e,t)}),o(e,t)}function n(e,t,o){var r=e.firstElementChild;if(!r)for(r=e.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)t(r,o)!==!0&&n(r,t,o),r=r.nextElementSibling;return null}function o(e,n){for(var o=e.shadowRoot;o;)t(o,n),o=o.olderShadowRoot}function r(e,t){i(e,t,[])}function i(e,t,n){if(e=window.wrap(e),!(n.indexOf(e)>=0)){n.push(e);for(var o,r=e.querySelectorAll("link[rel="+a+"]"),s=0,c=r.length;s<c&&(o=r[s]);s++)o["import"]&&i(o["import"],t,n);t(e)}}var a=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=r,e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return n(e,t)||o(e,t)}function n(t,n){return!!e.upgrade(t,n)||void(n&&a(t))}function o(e,t){g(e,function(e){if(n(e,t))return!0})}function r(e){L.push(e),E||(E=!0,setTimeout(i))}function i(){E=!1;for(var e,t=L,n=0,o=t.length;n<o&&(e=t[n]);n++)e();L=[]}function a(e){y?r(function(){s(e);
}):s(e)}function s(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function c(e){d(e),g(e,function(e){d(e)})}function d(e){y?r(function(){l(e)}):l(e)}function l(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function u(e){for(var t=e,n=window.wrap(document);t;){if(t==n)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}function h(e){if(e.shadowRoot&&!e.shadowRoot.__watched){_.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)m(t),t=t.olderShadowRoot}}function f(e,n){if(_.dom){var o=n[0];if(o&&"childList"===o.type&&o.addedNodes&&o.addedNodes){for(var r=o.addedNodes[0];r&&r!==document&&!r.host;)r=r.parentNode;var i=r&&(r.URL||r._URL||r.host&&r.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,i||"")}var a=u(e);n.forEach(function(e){"childList"===e.type&&(N(e.addedNodes,function(e){e.localName&&t(e,a)}),N(e.removedNodes,function(e){e.localName&&c(e)}))}),_.dom&&console.groupEnd()}function p(e){for(e=window.wrap(e),e||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(f(e,t.takeRecords()),i())}function m(e){if(!e.__observer){var t=new MutationObserver(f.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function v(e){e=window.wrap(e),_.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());var n=e===window.wrap(document);t(e,n),m(e),_.dom&&console.groupEnd()}function w(e){b(e,v)}var _=e.flags,g=e.forSubtree,b=e.forDocumentTree,y=window.MutationObserver._isPolyfilled&&_["throttle-attached"];e.hasPolyfillMutations=y,e.hasThrottledAttached=y;var E=!1,L=[],N=Array.prototype.forEach.call.bind(Array.prototype.forEach),M=Element.prototype.createShadowRoot;M&&(Element.prototype.createShadowRoot=function(){var e=M.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=h,e.upgradeDocumentTree=w,e.upgradeDocument=v,e.upgradeSubtree=o,e.upgradeAll=t,e.attached=a,e.takeRecords=p}),window.CustomElements.addModule(function(e){function t(t,o){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var r=t.getAttribute("is"),i=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(r);if(i&&(r&&i.tag==t.localName||!r&&!i["extends"]))return n(t,i,o)}}function n(t,n,r){return a.upgrade&&console.group("upgrade:",t.localName),n.is&&t.setAttribute("is",n.is),o(t,n),t.__upgraded__=!0,i(t),r&&e.attached(t),e.upgradeSubtree(t,r),a.upgrade&&console.groupEnd(),t}function o(e,t){Object.__proto__?e.__proto__=t.prototype:(r(e,t.prototype,t["native"]),e.__proto__=t.prototype)}function r(e,t,n){for(var o={},r=t;r!==n&&r!==HTMLElement.prototype;){for(var i,a=Object.getOwnPropertyNames(r),s=0;i=a[s];s++)o[i]||(Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i)),o[i]=1);r=Object.getPrototypeOf(r)}}function i(e){e.createdCallback&&e.createdCallback()}var a=e.flags;e.upgrade=t,e.upgradeWithDefinition=n,e.implementPrototype=o}),window.CustomElements.addModule(function(e){function t(t,o){var c=o||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(r(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(d(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return c.prototype||(c.prototype=Object.create(HTMLElement.prototype)),c.__name=t.toLowerCase(),c["extends"]&&(c["extends"]=c["extends"].toLowerCase()),c.lifecycle=c.lifecycle||{},c.ancestry=i(c["extends"]),a(c),s(c),n(c.prototype),l(c.__name,c),c.ctor=u(c),c.ctor.prototype=c.prototype,c.prototype.constructor=c.ctor,e.ready&&v(document),c.ctor}function n(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,n){o.call(this,e,n,t)};var n=e.removeAttribute;e.removeAttribute=function(e){o.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}function o(e,t,n){e=e.toLowerCase();var o=this.getAttribute(e);n.apply(this,arguments);var r=this.getAttribute(e);this.attributeChangedCallback&&r!==o&&this.attributeChangedCallback(e,o,r)}function r(e){for(var t=0;t<y.length;t++)if(e===y[t])return!0}function i(e){var t=d(e);return t?i(t["extends"]).concat([t]):[]}function a(e){for(var t,n=e["extends"],o=0;t=e.ancestry[o];o++)n=t.is&&t.tag;e.tag=n||e.__name,n&&(e.is=e.__name)}function s(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var n=document.createElement(e.tag);t=Object.getPrototypeOf(n)}for(var o,r=e.prototype,i=!1;r;)r==t&&(i=!0),o=Object.getPrototypeOf(r),o&&(r.__proto__=o),r=o;i||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e["native"]=t}}function c(e){return _(N(e.tag),e)}function d(e){if(e)return E[e.toLowerCase()]}function l(e,t){E[e]=t}function u(e){return function(){return c(e)}}function h(e,t,n){return e===L?f(t,n):M(e,t)}function f(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var n=d(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}var o;return t?(o=f(e),o.setAttribute("is",t),o):(o=N(e),e.indexOf("-")>=0&&g(o,HTMLElement),o)}function p(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return w(e),e}}var m,v=(e.isIE,e.upgradeDocumentTree),w=e.upgradeAll,_=e.upgradeWithDefinition,g=e.implementPrototype,b=e.useNative,y=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],E={},L="http://www.w3.org/1999/xhtml",N=document.createElement.bind(document),M=document.createElementNS.bind(document);m=Object.__proto__||b?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},p(Node.prototype,"cloneNode"),p(document,"importNode"),document.registerElement=t,document.createElement=f,document.createElementNS=h,e.registry=E,e["instanceof"]=m,e.reservedTagList=y,e.getRegisteredDefinition=d,document.register=document.registerElement}),function(e){function t(){i(window.wrap(document)),window.CustomElements.ready=!0;var e=window.requestAnimationFrame||function(e){setTimeout(e,16)};e(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=e.useNative,o=e.initializeModules;e.isIE;if(n){var r=function(){};e.watchShadow=r,e.upgrade=r,e.upgradeAll=r,e.upgradeDocumentTree=r,e.upgradeSubtree=r,e.takeRecords=r,e["instanceof"]=function(e,t){return e instanceof t}}else o();var i=e.upgradeDocumentTree,a=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e["import"]&&a(wrap(e["import"]))}),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,t)}else t()}(window.CustomElements),function(e){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var n=document.querySelector("head");n.insertBefore(t,n.firstChild)}(window.WebComponents);</script><script>// Copyright 2014 Google Inc. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
//     You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//     See the License for the specific language governing permissions and
// limitations under the License.

!function(a,b){var c={},d={},e={},f=null;!function(a,b){function c(a){if("number"==typeof a)return a;var b={};for(var c in a)b[c]=a[c];return b}function d(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=w}function e(){return a.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function f(b,c,e){var f=new d;return c&&(f.fill="both",f.duration="auto"),"number"!=typeof b||isNaN(b)?void 0!==b&&Object.getOwnPropertyNames(b).forEach(function(c){if("auto"!=b[c]){if(("number"==typeof f[c]||"duration"==c)&&("number"!=typeof b[c]||isNaN(b[c])))return;if("fill"==c&&-1==u.indexOf(b[c]))return;if("direction"==c&&-1==v.indexOf(b[c]))return;if("playbackRate"==c&&1!==b[c]&&a.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;f[c]=b[c]}}):f.duration=b,f}function g(a){return"number"==typeof a&&(a=isNaN(a)?{duration:0}:{duration:a}),a}function h(b,c){return b=a.numericTimingToObject(b),f(b,c)}function i(a,b,c,d){return 0>a||a>1||0>c||c>1?w:function(e){function f(a,b,c){return 3*a*(1-c)*(1-c)*c+3*b*(1-c)*c*c+c*c*c}if(0==e||1==e)return e;for(var g=0,h=1;;){var i=(g+h)/2,j=f(a,c,i);if(Math.abs(e-j)<1e-4)return f(b,d,i);e>j?g=i:h=i}}}function j(a,b){return function(c){if(c>=1)return 1;var d=1/a;return c+=b*d,c-c%d}}function k(a){B||(B=document.createElement("div").style),B.animationTimingFunction="",B.animationTimingFunction=a;var b=B.animationTimingFunction;if(""==b&&e())throw new TypeError(a+" is not a valid value for easing");var c=D.exec(b);if(c)return i.apply(this,c.slice(1).map(Number));var d=E.exec(b);if(d)return j(Number(d[1]),{start:x,middle:y,end:z}[d[2]]);var f=A[b];return f?f:w}function l(a){return Math.abs(m(a)/a.playbackRate)}function m(a){return a.duration*a.iterations}function n(a,b,c){return null==b?F:b<c.delay?G:b>=c.delay+a?H:I}function o(a,b,c,d,e){switch(d){case G:return"backwards"==b||"both"==b?0:null;case I:return c-e;case H:return"forwards"==b||"both"==b?a:null;case F:return null}}function p(a,b,c,d){return(d.playbackRate<0?b-a:b)*d.playbackRate+c}function q(a,b,c,d,e){return c===1/0||c===-(1/0)||c-d==b&&e.iterations&&(e.iterations+e.iterationStart)%1==0?a:c%a}function r(a,b,c,d){return 0===c?0:b==a?d.iterationStart+d.iterations-1:Math.floor(c/a)}function s(a,b,c,d){var e=a%2>=1,f="normal"==d.direction||d.direction==(e?"alternate-reverse":"alternate"),g=f?c:b-c,h=g/b;return b*d._easingFunction(h)}function t(a,b,c){var d=n(a,b,c),e=o(a,c.fill,b,d,c.delay);if(null===e)return null;if(0===a)return d===G?0:1;var f=c.iterationStart*c.duration,g=p(a,e,f,c),h=q(c.duration,m(c),g,f,c),i=r(c.duration,h,g,c);return s(i,c.duration,h,c)/c.duration}var u="backwards|forwards|both|none".split("|"),v="reverse|alternate|alternate-reverse".split("|"),w=function(a){return a};d.prototype={_setMember:function(b,c){this["_"+b]=c,this._effect&&(this._effect._timingInput[b]=c,this._effect._timing=a.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=a.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(a){this._setMember("delay",a)},get delay(){return this._delay},set endDelay(a){this._setMember("endDelay",a)},get endDelay(){return this._endDelay},set fill(a){this._setMember("fill",a)},get fill(){return this._fill},set iterationStart(a){if((isNaN(a)||0>a)&&e())throw new TypeError("iterationStart must be a non-negative number, received: "+timing.iterationStart);this._setMember("iterationStart",a)},get iterationStart(){return this._iterationStart},set duration(a){if("auto"!=a&&(isNaN(a)||0>a)&&e())throw new TypeError("duration must be non-negative or auto, received: "+a);this._setMember("duration",a)},get duration(){return this._duration},set direction(a){this._setMember("direction",a)},get direction(){return this._direction},set easing(a){this._easingFunction=k(a),this._setMember("easing",a)},get easing(){return this._easing},set iterations(a){if((isNaN(a)||0>a)&&e())throw new TypeError("iterations must be non-negative, received: "+a);this._setMember("iterations",a)},get iterations(){return this._iterations}};var x=1,y=.5,z=0,A={ease:i(.25,.1,.25,1),"ease-in":i(.42,0,1,1),"ease-out":i(0,0,.58,1),"ease-in-out":i(.42,0,.58,1),"step-start":j(1,x),"step-middle":j(1,y),"step-end":j(1,z)},B=null,C="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",D=new RegExp("cubic-bezier\\("+C+","+C+","+C+","+C+"\\)"),E=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,F=0,G=1,H=2,I=3;a.cloneTimingInput=c,a.makeTiming=f,a.numericTimingToObject=g,a.normalizeTimingInput=h,a.calculateActiveDuration=l,a.calculateTimeFraction=t,a.calculatePhase=n,a.toTimingFunction=k}(c,f),function(a,b){function c(a,b){return a in j?j[a][b]||b:b}function d(a,b,d){var e=g[a];if(e){h.style[a]=b;for(var f in e){var i=e[f],j=h.style[i];d[i]=c(i,j)}}else d[a]=c(a,b)}function e(a){var b=[];for(var c in a)if(!(c in["easing","offset","composite"])){var d=a[c];Array.isArray(d)||(d=[d]);for(var e,f=d.length,g=0;f>g;g++)e={},"offset"in a?e.offset=a.offset:1==f?e.offset=1:e.offset=g/(f-1),"easing"in a&&(e.easing=a.easing),"composite"in a&&(e.composite=a.composite),e[c]=d[g],b.push(e)}return b.sort(function(a,b){return a.offset-b.offset}),b}function f(a){function b(){var a=c.length;null==c[a-1].offset&&(c[a-1].offset=1),a>1&&null==c[0].offset&&(c[0].offset=0);for(var b=0,d=c[0].offset,e=1;a>e;e++){var f=c[e].offset;if(null!=f){for(var g=1;e-b>g;g++)c[b+g].offset=d+(f-d)*g/(e-b);b=e,d=f}}}if(null==a)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&a[Symbol.iterator]&&(a=Array.from(a)),Array.isArray(a)||(a=e(a));for(var c=a.map(function(a){var b={};for(var c in a){var e=a[c];if("offset"==c){if(null!=e&&(e=Number(e),!isFinite(e)))throw new TypeError("keyframe offsets must be numbers.")}else{if("composite"==c)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};e=""+e}d(c,e,b)}return void 0==b.offset&&(b.offset=null),b}),f=!0,g=-(1/0),h=0;h<c.length;h++){var i=c[h].offset;if(null!=i){if(g>i)throw{code:DOMException.INVALID_MODIFICATION_ERR,name:"InvalidModificationError",message:"Keyframes are not loosely sorted by offset. Sort or specify offsets."};g=i}else f=!1}return c=c.filter(function(a){return a.offset>=0&&a.offset<=1}),f||b(),c}var g={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},h=document.createElementNS("http://www.w3.org/1999/xhtml","div"),i={thin:"1px",medium:"3px",thick:"5px"},j={borderBottomWidth:i,borderLeftWidth:i,borderRightWidth:i,borderTopWidth:i,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:i,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};a.convertToArrayForm=e,a.normalizeKeyframes=f}(c,f),function(a){var b={};a.isDeprecated=function(a,c,d,e){var f=e?"are":"is",g=new Date,h=new Date(c);return h.setMonth(h.getMonth()+3),h>g?(a in b||console.warn("Web Animations: "+a+" "+f+" deprecated and will stop working on "+h.toDateString()+". "+d),b[a]=!0,!1):!0},a.deprecated=function(b,c,d,e){var f=e?"are":"is";if(a.isDeprecated(b,c,d,e))throw new Error(b+" "+f+" no longer supported. "+d)}}(c),function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),b=!0;if(a&&(b=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(c){void 0===a[c]&&(b=!0)})),!b)return}!function(a,b,c){function d(a){for(var b={},c=0;c<a.length;c++)for(var d in a[c])if("offset"!=d&&"easing"!=d&&"composite"!=d){var e={offset:a[c].offset,easing:a[c].easing,value:a[c][d]};b[d]=b[d]||[],b[d].push(e)}for(var f in b){var g=b[f];if(0!=g[0].offset||1!=g[g.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return b}function e(c){var d=[];for(var e in c)for(var f=c[e],g=0;g<f.length-1;g++){var h=f[g].offset,i=f[g+1].offset,j=f[g].value,k=f[g+1].value,l=f[g].easing;h==i&&(1==i?j=k:k=j),d.push({startTime:h,endTime:i,easing:a.toTimingFunction(l?l:"linear"),property:e,interpolation:b.propertyInterpolation(e,j,k)})}return d.sort(function(a,b){return a.startTime-b.startTime}),d}b.convertEffectInput=function(c){var f=a.normalizeKeyframes(c),g=d(f),h=e(g);return function(a,c){if(null!=c)h.filter(function(a){return 0>=c&&0==a.startTime||c>=1&&1==a.endTime||c>=a.startTime&&c<=a.endTime}).forEach(function(d){var e=c-d.startTime,f=d.endTime-d.startTime,g=0==f?0:d.easing(e/f);b.apply(a,d.property,d.interpolation(g))});else for(var d in g)"offset"!=d&&"easing"!=d&&"composite"!=d&&b.clear(a,d)}}}(c,d,f),function(a,b,c){function d(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function e(a,b,c){h[c]=h[c]||[],h[c].push([a,b])}function f(a,b,c){for(var f=0;f<c.length;f++){var g=c[f];e(a,b,d(g))}}function g(c,e,f){var g=c;/-/.test(c)&&!a.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(g=d(c)),"initial"!=e&&"initial"!=f||("initial"==e&&(e=i[g]),"initial"==f&&(f=i[g]));for(var j=e==f?[]:h[g],k=0;j&&k<j.length;k++){var l=j[k][0](e),m=j[k][0](f);if(void 0!==l&&void 0!==m){var n=j[k][1](l,m);if(n){var o=b.Interpolation.apply(null,n);return function(a){return 0==a?e:1==a?f:o(a)}}}}return b.Interpolation(!1,!0,function(a){return a?f:e})}var h={};b.addPropertiesHandler=f;var i={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};b.propertyInterpolation=g}(c,d,f),function(a,b,c){function d(b){var c=a.calculateActiveDuration(b),d=function(d){return a.calculateTimeFraction(c,d,b)};return d._totalDuration=b.delay+c+b.endDelay,d._isCurrent=function(d){var e=a.calculatePhase(c,d,b);return e===PhaseActive||e===PhaseBefore},d}b.KeyframeEffect=function(c,e,f,g){var h,i=d(a.normalizeTimingInput(f)),j=b.convertEffectInput(e),k=function(){j(c,h)};return k._update=function(a){return h=i(a),null!==h},k._clear=function(){j(c,null)},k._hasSameTarget=function(a){return c===a},k._isCurrent=i._isCurrent,k._totalDuration=i._totalDuration,k._id=g,k},b.NullEffect=function(a){var b=function(){a&&(a(),a=null)};return b._update=function(){return null},b._totalDuration=0,b._isCurrent=function(){return!1},b._hasSameTarget=function(){return!1},b}}(c,d,f),function(a,b){a.apply=function(b,c,d){b.style[a.propertyName(c)]=d},a.clear=function(b,c){b.style[a.propertyName(c)]=""}}(d,f),function(a){window.Element.prototype.animate=function(b,c){var d="";return c&&c.id&&(d=c.id),a.timeline._play(a.KeyframeEffect(this,b,c,d))}}(d),function(a,b){function c(a,b,d){if("number"==typeof a&&"number"==typeof b)return a*(1-d)+b*d;if("boolean"==typeof a&&"boolean"==typeof b)return.5>d?a:b;if(a.length==b.length){for(var e=[],f=0;f<a.length;f++)e.push(c(a[f],b[f],d));return e}throw"Mismatched interpolation arguments "+a+":"+b}a.Interpolation=function(a,b,d){return function(e){return d(c(a,b,e))}}}(d,f),function(a,b,c){a.sequenceNumber=0;var d=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};b.Animation=function(b){this.id="",b&&b._id&&(this.id=b._id),this._sequenceNumber=a.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=b,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},b.Animation.prototype={_ensureAlive:function(){this.playbackRate<0&&0===this.currentTime?this._inEffect=this._effect._update(-1):this._inEffect=this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,b.timeline._animations.push(this))},_tickCurrentTime:function(a,b){a!=this._currentTime&&(this._currentTime=a,this._isFinished&&!b&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(a){a=+a,isNaN(a)||(b.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-a/this._playbackRate),this._currentTimePending=!1,this._currentTime!=a&&(this._tickCurrentTime(a,!0),b.invalidateEffects()))},get startTime(){return this._startTime},set startTime(a){a=+a,isNaN(a)||this._paused||this._idle||(this._startTime=a,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),b.invalidateEffects())},get playbackRate(){return this._playbackRate},set playbackRate(a){if(a!=this._playbackRate){var b=this.currentTime;this._playbackRate=a,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&this.play(),null!=b&&(this.currentTime=b)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._currentTime=this._playbackRate>0?0:this._totalDuration,this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),b.invalidateEffects()},pause:function(){this._isFinished||this._paused||this._idle||(this._currentTimePending=!0),this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,b.invalidateEffects())},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._finishedFlag=!0,this.currentTime=0,this._startTime=null,this._effect._update(null),b.invalidateEffects())},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(a,b){"function"==typeof b&&"finish"==a&&this._finishHandlers.push(b)},removeEventListener:function(a,b){if("finish"==a){var c=this._finishHandlers.indexOf(b);c>=0&&this._finishHandlers.splice(c,1)}},_fireEvents:function(a){if(this._isFinished){if(!this._finishedFlag){var b=new d(this,this._currentTime,a),c=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){c.forEach(function(a){a.call(b.target,b)})},0),this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(a,b){this._idle||this._paused||(null==this._startTime?b&&(this.startTime=a-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((a-this._startTime)*this.playbackRate)),b&&(this._currentTimePending=!1,this._fireEvents(a))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag}}}(c,d,f),function(a,b,c){function d(a){var b=j;j=[],a<p.currentTime&&(a=p.currentTime),h(a,!0),b.forEach(function(b){b[1](a)}),g(),l=void 0}function e(a,b){return a._sequenceNumber-b._sequenceNumber}function f(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function g(){o.forEach(function(a){a()}),o.length=0}function h(a,c){n=!1;var d=b.timeline;d.currentTime=a,d._animations.sort(e),m=!1;var f=d._animations;d._animations=[];var g=[],h=[];f=f.filter(function(b){b._tick(a,c),b._inEffect?h.push(b._effect):g.push(b._effect),b._needsTick&&(m=!0);var d=b._inEffect||b._needsTick;return b._inTimeline=d,d}),o.push.apply(o,g),o.push.apply(o,h),d._animations.push.apply(d._animations,f),m&&requestAnimationFrame(function(){})}var i=window.requestAnimationFrame,j=[],k=0;window.requestAnimationFrame=function(a){var b=k++;return 0==j.length&&i(d),j.push([b,a]),b},window.cancelAnimationFrame=function(a){j.forEach(function(b){b[0]==a&&(b[1]=function(){})})},f.prototype={_play:function(c){c._timing=a.normalizeTimingInput(c.timing);var d=new b.Animation(c);return d._idle=!1,d._timeline=this,this._animations.push(d),b.restart(),b.invalidateEffects(),d}};var l=void 0,m=!1,n=!1;b.restart=function(){return m||(m=!0,requestAnimationFrame(function(){}),n=!0),n},b.invalidateEffects=function(){h(b.timeline.currentTime,!1),g()};var o=[],p=new f;b.timeline=p}(c,d,f),function(a){function b(a,b){var c=a.exec(b);return c?(c=a.ignoreCase?c[0].toLowerCase():c[0],[c,b.substr(c.length)]):void 0}function c(a,b){b=b.replace(/^\s*/,"");var c=a(b);return c?[c[0],c[1].replace(/^\s*/,"")]:void 0}function d(a,d,e){a=c.bind(null,a);for(var f=[];;){var g=a(e);if(!g)return[f,e];if(f.push(g[0]),e=g[1],g=b(d,e),!g||""==g[1])return[f,e];e=g[1]}}function e(a,b){for(var c=0,d=0;d<b.length&&(!/\s|,/.test(b[d])||0!=c);d++)if("("==b[d])c++;else if(")"==b[d]&&(c--,0==c&&d++,0>=c))break;var e=a(b.substr(0,d));return void 0==e?void 0:[e,b.substr(d)]}function f(a,b){for(var c=a,d=b;c&&d;)c>d?c%=d:d%=c;return c=a*b/(c+d)}function g(a){return function(b){var c=a(b);return c&&(c[0]=void 0),c}}function h(a,b){return function(c){var d=a(c);return d?d:[b,c]}}function i(b,c){for(var d=[],e=0;e<b.length;e++){var f=a.consumeTrimmed(b[e],c);if(!f||""==f[0])return;void 0!==f[0]&&d.push(f[0]),c=f[1]}return""==c?d:void 0}function j(a,b,c,d,e){for(var g=[],h=[],i=[],j=f(d.length,e.length),k=0;j>k;k++){var l=b(d[k%d.length],e[k%e.length]);if(!l)return;g.push(l[0]),h.push(l[1]),i.push(l[2])}return[g,h,function(b){var d=b.map(function(a,b){return i[b](a)}).join(c);return a?a(d):d}]}function k(a,b,c){for(var d=[],e=[],f=[],g=0,h=0;h<c.length;h++)if("function"==typeof c[h]){var i=c[h](a[g],b[g++]);d.push(i[0]),e.push(i[1]),f.push(i[2])}else!function(a){d.push(!1),e.push(!1),f.push(function(){return c[a]})}(h);return[d,e,function(a){for(var b="",c=0;c<a.length;c++)b+=f[c](a[c]);return b}]}a.consumeToken=b,a.consumeTrimmed=c,a.consumeRepeated=d,a.consumeParenthesised=e,a.ignore=g,a.optional=h,a.consumeList=i,a.mergeNestedRepeated=j.bind(null,null),a.mergeWrappedNestedRepeated=j,a.mergeList=k}(d),function(a){function b(b){function c(b){var c=a.consumeToken(/^inset/i,b);if(c)return d.inset=!0,c;var c=a.consumeLengthOrPercent(b);if(c)return d.lengths.push(c[0]),c;var c=a.consumeColor(b);return c?(d.color=c[0],c):void 0}var d={inset:!1,lengths:[],color:null},e=a.consumeRepeated(c,/^/,b);return e&&e[0].length?[d,e[1]]:void 0}function c(c){var d=a.consumeRepeated(b,/^,/,c);return d&&""==d[1]?d[0]:void 0}function d(b,c){for(;b.lengths.length<Math.max(b.lengths.length,c.lengths.length);)b.lengths.push({px:0});for(;c.lengths.length<Math.max(b.lengths.length,c.lengths.length);)c.lengths.push({px:0});if(b.inset==c.inset&&!!b.color==!!c.color){for(var d,e=[],f=[[],0],g=[[],0],h=0;h<b.lengths.length;h++){var i=a.mergeDimensions(b.lengths[h],c.lengths[h],2==h);f[0].push(i[0]),g[0].push(i[1]),e.push(i[2])}if(b.color&&c.color){var j=a.mergeColors(b.color,c.color);f[1]=j[0],g[1]=j[1],d=j[2]}return[f,g,function(a){for(var c=b.inset?"inset ":" ",f=0;f<e.length;f++)c+=e[f](a[0][f])+" ";return d&&(c+=d(a[1])),c}]}}function e(b,c,d,e){function f(a){return{inset:a,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var g=[],h=[],i=0;i<d.length||i<e.length;i++){var j=d[i]||f(e[i].inset),k=e[i]||f(d[i].inset);g.push(j),h.push(k)}return a.mergeNestedRepeated(b,c,g,h)}var f=e.bind(null,d,", ");a.addPropertiesHandler(c,f,["box-shadow","text-shadow"])}(d),function(a,b){function c(a){return a.toFixed(3).replace(".000","")}function d(a,b,c){return Math.min(b,Math.max(a,c))}function e(a){return/^\s*[-+]?(\d*\.)?\d+\s*$/.test(a)?Number(a):void 0}function f(a,b){return[a,b,c]}function g(a,b){return 0!=a?i(0,1/0)(a,b):void 0}function h(a,b){return[a,b,function(a){return Math.round(d(1,1/0,a))}]}function i(a,b){return function(e,f){return[e,f,function(e){return c(d(a,b,e))}]}}function j(a,b){return[a,b,Math.round]}a.clamp=d,a.addPropertiesHandler(e,i(0,1/0),["border-image-width","line-height"]),a.addPropertiesHandler(e,i(0,1),["opacity","shape-image-threshold"]),a.addPropertiesHandler(e,g,["flex-grow","flex-shrink"]),a.addPropertiesHandler(e,h,["orphans","widows"]),a.addPropertiesHandler(e,j,["z-index"]),a.parseNumber=e,a.mergeNumbers=f,a.numberToString=c}(d,f),function(a,b){function c(a,b){return"visible"==a||"visible"==b?[0,1,function(c){return 0>=c?a:c>=1?b:"visible"}]:void 0}a.addPropertiesHandler(String,c,["visibility"])}(d),function(a,b){function c(a){a=a.trim(),f.fillStyle="#000",f.fillStyle=a;var b=f.fillStyle;if(f.fillStyle="#fff",f.fillStyle=a,b==f.fillStyle){f.fillRect(0,0,1,1);var c=f.getImageData(0,0,1,1).data;f.clearRect(0,0,1,1);var d=c[3]/255;return[c[0]*d,c[1]*d,c[2]*d,d]}}function d(b,c){return[b,c,function(b){function c(a){return Math.max(0,Math.min(255,a))}if(b[3])for(var d=0;3>d;d++)b[d]=Math.round(c(b[d]/b[3]));return b[3]=a.numberToString(a.clamp(0,1,b[3])),"rgba("+b.join(",")+")"}]}var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=e.height=1;var f=e.getContext("2d");a.addPropertiesHandler(c,d,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","outline-color","text-decoration-color"]),a.consumeColor=a.consumeParenthesised.bind(null,c),a.mergeColors=d}(d,f),function(a,b){function c(a,b){if(b=b.trim().toLowerCase(),"0"==b&&"px".search(a)>=0)return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\(/g,"(");var c={};b=b.replace(a,function(a){return c[a]=null,"U"+a});for(var d="U("+a.source+")",e=b.replace(/[-+]?(\d*\.)?\d+/g,"N").replace(new RegExp("N"+d,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),f=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],g=0;g<f.length;)f[g].test(e)?(e=e.replace(f[g],"$1"),g=0):g++;if("D"==e){for(var h in c){var i=eval(b.replace(new RegExp("U"+h,"g"),"").replace(new RegExp(d,"g"),"*0"));if(!isFinite(i))return;c[h]=i}return c}}}function d(a,b){return e(a,b,!0)}function e(b,c,d){var e,f=[];for(e in b)f.push(e);for(e in c)f.indexOf(e)<0&&f.push(e);return b=f.map(function(a){return b[a]||0}),c=f.map(function(a){return c[a]||0}),[b,c,function(b){var c=b.map(function(c,e){return 1==b.length&&d&&(c=Math.max(c,0)),a.numberToString(c)+f[e]}).join(" + ");return b.length>1?"calc("+c+")":c}]}var f="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",g=c.bind(null,new RegExp(f,"g")),h=c.bind(null,new RegExp(f+"|%","g")),i=c.bind(null,/deg|rad|grad|turn/g);a.parseLength=g,a.parseLengthOrPercent=h,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,h),a.parseAngle=i,a.mergeDimensions=e;var j=a.consumeParenthesised.bind(null,g),k=a.consumeRepeated.bind(void 0,j,/^/),l=a.consumeRepeated.bind(void 0,k,/^,/);a.consumeSizePairList=l;var m=function(a){var b=l(a);return b&&""==b[1]?b[0]:void 0},n=a.mergeNestedRepeated.bind(void 0,d," "),o=a.mergeNestedRepeated.bind(void 0,n,",");a.mergeNonNegativeSizePair=n,a.addPropertiesHandler(m,o,["background-size"]),a.addPropertiesHandler(h,d,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),a.addPropertiesHandler(h,e,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","text-indent","top","vertical-align","word-spacing"])}(d,f),function(a,b){function c(b){return a.consumeLengthOrPercent(b)||a.consumeToken(/^auto/,b)}function d(b){var d=a.consumeList([a.ignore(a.consumeToken.bind(null,/^rect/)),a.ignore(a.consumeToken.bind(null,/^\(/)),a.consumeRepeated.bind(null,c,/^,/),a.ignore(a.consumeToken.bind(null,/^\)/))],b);return d&&4==d[0].length?d[0]:void 0}function e(b,c){return"auto"==b||"auto"==c?[!0,!1,function(d){var e=d?b:c;if("auto"==e)return"auto";var f=a.mergeDimensions(e,e);return f[2](f[0])}]:a.mergeDimensions(b,c)}function f(a){return"rect("+a+")"}var g=a.mergeWrappedNestedRepeated.bind(null,f,e,", ");a.parseBox=d,a.mergeBoxes=g,a.addPropertiesHandler(d,g,["clip"])}(d,f),function(a,b){function c(a){return function(b){var c=0;return a.map(function(a){return a===k?b[c++]:a})}}function d(a){return a}function e(b){if(b=b.toLowerCase().trim(),"none"==b)return[];for(var c,d=/\s*(\w+)\(([^)]*)\)/g,e=[],f=0;c=d.exec(b);){if(c.index!=f)return;f=c.index+c[0].length;var g=c[1],h=n[g];if(!h)return;var i=c[2].split(","),j=h[0];if(j.length<i.length)return;for(var k=[],o=0;o<j.length;o++){var p,q=i[o],r=j[o];if(p=q?{A:function(b){return"0"==b.trim()?m:a.parseAngle(b)},N:a.parseNumber,T:a.parseLengthOrPercent,L:a.parseLength}[r.toUpperCase()](q):{a:m,n:k[0],t:l}[r],void 0===p)return;k.push(p)}if(e.push({t:g,d:k}),d.lastIndex==b.length)return e}}function f(a){return a.toFixed(6).replace(".000000","")}function g(b,c){if(b.decompositionPair!==c){b.decompositionPair=c;var d=a.makeMatrixDecomposition(b)}if(c.decompositionPair!==b){c.decompositionPair=b;var e=a.makeMatrixDecomposition(c)}return null==d[0]||null==e[0]?[[!1],[!0],function(a){return a?c[0].d:b[0].d}]:(d[0].push(0),e[0].push(1),[d,e,function(b){var c=a.quat(d[0][3],e[0][3],b[5]),g=a.composeMatrix(b[0],b[1],b[2],c,b[4]),h=g.map(f).join(",");return h}])}function h(a){return a.replace(/[xy]/,"")}function i(a){return a.replace(/(x|y|z|3d)?$/,"3d")}function j(b,c){var d=a.makeMatrixDecomposition&&!0,e=!1;if(!b.length||!c.length){b.length||(e=!0,b=c,c=[]);for(var f=0;f<b.length;f++){var j=b[f].t,k=b[f].d,l="scale"==j.substr(0,5)?1:0;c.push({t:j,d:k.map(function(a){if("number"==typeof a)return l;var b={};for(var c in a)b[c]=l;return b})})}}var m=function(a,b){return"perspective"==a&&"perspective"==b||("matrix"==a||"matrix3d"==a)&&("matrix"==b||"matrix3d"==b)},o=[],p=[],q=[];if(b.length!=c.length){if(!d)return;var r=g(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]]}else for(var f=0;f<b.length;f++){var j,s=b[f].t,t=c[f].t,u=b[f].d,v=c[f].d,w=n[s],x=n[t];if(m(s,t)){if(!d)return;var r=g([b[f]],[c[f]]);o.push(r[0]),p.push(r[1]),q.push(["matrix",[r[2]]])}else{if(s==t)j=s;else if(w[2]&&x[2]&&h(s)==h(t))j=h(s),u=w[2](u),v=x[2](v);else{if(!w[1]||!x[1]||i(s)!=i(t)){if(!d)return;var r=g(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]];break}j=i(s),u=w[1](u),v=x[1](v)}for(var y=[],z=[],A=[],B=0;B<u.length;B++){var C="number"==typeof u[B]?a.mergeNumbers:a.mergeDimensions,r=C(u[B],v[B]);y[B]=r[0],z[B]=r[1],A.push(r[2])}o.push(y),p.push(z),q.push([j,A])}}if(e){var D=o;o=p,p=D}return[o,p,function(a){return a.map(function(a,b){var c=a.map(function(a,c){return q[b][1][c](a)}).join(",");return"matrix"==q[b][0]&&16==c.split(",").length&&(q[b][0]="matrix3d"),q[b][0]+"("+c+")"}).join(" ")}]}var k=null,l={px:0},m={deg:0},n={matrix:["NNNNNN",[k,k,0,0,k,k,0,0,0,0,1,0,k,k,0,1],d],matrix3d:["NNNNNNNNNNNNNNNN",d],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",c([k,k,1]),d],scalex:["N",c([k,1,1]),c([k,1])],scaley:["N",c([1,k,1]),c([1,k])],scalez:["N",c([1,1,k])],scale3d:["NNN",d],skew:["Aa",null,d],skewx:["A",null,c([k,m])],skewy:["A",null,c([m,k])],translate:["Tt",c([k,k,l]),d],translatex:["T",c([k,l,l]),c([k,l])],translatey:["T",c([l,k,l]),c([l,k])],translatez:["L",c([l,l,k])],translate3d:["TTL",d]};a.addPropertiesHandler(e,j,["transform"])}(d,f),function(a,b){function c(a,b){b.concat([a]).forEach(function(b){b in document.documentElement.style&&(d[a]=b)})}var d={};c("transform",["webkitTransform","msTransform"]),c("transformOrigin",["webkitTransformOrigin"]),c("perspective",["webkitPerspective"]),c("perspectiveOrigin",["webkitPerspectiveOrigin"]),a.propertyName=function(a){return d[a]||a}}(d,f)}(),!function(){if(void 0===document.createElement("div").animate([]).oncancel){var a;if(window.performance&&performance.now)var a=function(){return performance.now()};else var a=function(){return Date.now()};var b=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="cancel",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},c=window.Element.prototype.animate;window.Element.prototype.animate=function(d,e){var f=c.call(this,d,e);f._cancelHandlers=[],f.oncancel=null;var g=f.cancel;f.cancel=function(){g.call(this);var c=new b(this,null,a()),d=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){d.forEach(function(a){a.call(c.target,c)})},0)};var h=f.addEventListener;f.addEventListener=function(a,b){"function"==typeof b&&"cancel"==a?this._cancelHandlers.push(b):h.call(this,a,b)};var i=f.removeEventListener;return f.removeEventListener=function(a,b){if("cancel"==a){var c=this._cancelHandlers.indexOf(b);c>=0&&this._cancelHandlers.splice(c,1)}else i.call(this,a,b)},f}}}(),function(a){var b=document.documentElement,c=null,d=!1;try{var e=getComputedStyle(b).getPropertyValue("opacity"),f="0"==e?"1":"0";c=b.animate({opacity:[f,f]},{duration:1}),c.currentTime=0,d=getComputedStyle(b).getPropertyValue("opacity")==f}catch(g){}finally{c&&c.cancel()}if(!d){var h=window.Element.prototype.animate;window.Element.prototype.animate=function(b,c){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&b[Symbol.iterator]&&(b=Array.from(b)),Array.isArray(b)||null===b||(b=a.convertToArrayForm(b)),h.call(this,b,c)}}}(c),!function(a,b,c){function d(a){var b=window.document.timeline;b.currentTime=a,b._discardAnimations(),0==b._animations.length?f=!1:requestAnimationFrame(d);
}var e=window.requestAnimationFrame;window.requestAnimationFrame=function(a){return e(function(b){window.document.timeline._updateAnimationsPromises(),a(b),window.document.timeline._updateAnimationsPromises()})},b.AnimationTimeline=function(){this._animations=[],this.currentTime=void 0},b.AnimationTimeline.prototype={getAnimations:function(){return this._discardAnimations(),this._animations.slice()},_updateAnimationsPromises:function(){b.animationsWithPromises=b.animationsWithPromises.filter(function(a){return a._updatePromises()})},_discardAnimations:function(){this._updateAnimationsPromises(),this._animations=this._animations.filter(function(a){return"finished"!=a.playState&&"idle"!=a.playState})},_play:function(a){var c=new b.Animation(a,this);return this._animations.push(c),b.restartWebAnimationsNextTick(),c._updatePromises(),c._animation.play(),c._updatePromises(),c},play:function(a){return a&&a.remove(),this._play(a)}};var f=!1;b.restartWebAnimationsNextTick=function(){f||(f=!0,requestAnimationFrame(d))};var g=new b.AnimationTimeline;b.timeline=g;try{Object.defineProperty(window.document,"timeline",{configurable:!0,get:function(){return g}})}catch(h){}try{window.document.timeline=g}catch(h){}}(c,e,f),function(a,b,c){b.animationsWithPromises=[],b.Animation=function(b,c){if(this.id="",b&&b._id&&(this.id=b._id),this.effect=b,b&&(b._animation=this),!c)throw new Error("Animation with null timeline is not supported");this._timeline=c,this._sequenceNumber=a.sequenceNumber++,this._holdTime=0,this._paused=!1,this._isGroup=!1,this._animation=null,this._childAnimations=[],this._callback=null,this._oldPlayState="idle",this._rebuildUnderlyingAnimation(),this._animation.cancel(),this._updatePromises()},b.Animation.prototype={_updatePromises:function(){var a=this._oldPlayState,b=this.playState;return this._readyPromise&&b!==a&&("idle"==b?(this._rejectReadyPromise(),this._readyPromise=void 0):"pending"==a?this._resolveReadyPromise():"pending"==b&&(this._readyPromise=void 0)),this._finishedPromise&&b!==a&&("idle"==b?(this._rejectFinishedPromise(),this._finishedPromise=void 0):"finished"==b?this._resolveFinishedPromise():"finished"==a&&(this._finishedPromise=void 0)),this._oldPlayState=this.playState,this._readyPromise||this._finishedPromise},_rebuildUnderlyingAnimation:function(){this._updatePromises();var a,c,d,e,f=!!this._animation;f&&(a=this.playbackRate,c=this._paused,d=this.startTime,e=this.currentTime,this._animation.cancel(),this._animation._wrapper=null,this._animation=null),(!this.effect||this.effect instanceof window.KeyframeEffect)&&(this._animation=b.newUnderlyingAnimationForKeyframeEffect(this.effect),b.bindAnimationForKeyframeEffect(this)),(this.effect instanceof window.SequenceEffect||this.effect instanceof window.GroupEffect)&&(this._animation=b.newUnderlyingAnimationForGroup(this.effect),b.bindAnimationForGroup(this)),this.effect&&this.effect._onsample&&b.bindAnimationForCustomEffect(this),f&&(1!=a&&(this.playbackRate=a),null!==d?this.startTime=d:null!==e?this.currentTime=e:null!==this._holdTime&&(this.currentTime=this._holdTime),c&&this.pause()),this._updatePromises()},_updateChildren:function(){if(this.effect&&"idle"!=this.playState){var a=this.effect._timing.delay;this._childAnimations.forEach(function(c){this._arrangeChildren(c,a),this.effect instanceof window.SequenceEffect&&(a+=b.groupChildDuration(c.effect))}.bind(this))}},_setExternalAnimation:function(a){if(this.effect&&this._isGroup)for(var b=0;b<this.effect.children.length;b++)this.effect.children[b]._animation=a,this._childAnimations[b]._setExternalAnimation(a)},_constructChildAnimations:function(){if(this.effect&&this._isGroup){var a=this.effect._timing.delay;this._removeChildAnimations(),this.effect.children.forEach(function(c){var d=window.document.timeline._play(c);this._childAnimations.push(d),d.playbackRate=this.playbackRate,this._paused&&d.pause(),c._animation=this.effect._animation,this._arrangeChildren(d,a),this.effect instanceof window.SequenceEffect&&(a+=b.groupChildDuration(c))}.bind(this))}},_arrangeChildren:function(a,b){null===this.startTime?a.currentTime=this.currentTime-b/this.playbackRate:a.startTime!==this.startTime+b/this.playbackRate&&(a.startTime=this.startTime+b/this.playbackRate)},get timeline(){return this._timeline},get playState(){return this._animation?this._animation.playState:"idle"},get finished(){return window.Promise?(this._finishedPromise||(-1==b.animationsWithPromises.indexOf(this)&&b.animationsWithPromises.push(this),this._finishedPromise=new Promise(function(a,b){this._resolveFinishedPromise=function(){a(this)},this._rejectFinishedPromise=function(){b({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"finished"==this.playState&&this._resolveFinishedPromise()),this._finishedPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get ready(){return window.Promise?(this._readyPromise||(-1==b.animationsWithPromises.indexOf(this)&&b.animationsWithPromises.push(this),this._readyPromise=new Promise(function(a,b){this._resolveReadyPromise=function(){a(this)},this._rejectReadyPromise=function(){b({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"pending"!==this.playState&&this._resolveReadyPromise()),this._readyPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get onfinish(){return this._animation.onfinish},set onfinish(a){"function"==typeof a?this._animation.onfinish=function(b){b.target=this,a.call(this,b)}.bind(this):this._animation.onfinish=a},get oncancel(){return this._animation.oncancel},set oncancel(a){"function"==typeof a?this._animation.oncancel=function(b){b.target=this,a.call(this,b)}.bind(this):this._animation.oncancel=a},get currentTime(){this._updatePromises();var a=this._animation.currentTime;return this._updatePromises(),a},set currentTime(a){this._updatePromises(),this._animation.currentTime=isFinite(a)?a:Math.sign(a)*Number.MAX_VALUE,this._register(),this._forEachChild(function(b,c){b.currentTime=a-c}),this._updatePromises()},get startTime(){return this._animation.startTime},set startTime(a){this._updatePromises(),this._animation.startTime=isFinite(a)?a:Math.sign(a)*Number.MAX_VALUE,this._register(),this._forEachChild(function(b,c){b.startTime=a+c}),this._updatePromises()},get playbackRate(){return this._animation.playbackRate},set playbackRate(a){this._updatePromises();var b=this.currentTime;this._animation.playbackRate=a,this._forEachChild(function(b){b.playbackRate=a}),"paused"!=this.playState&&"idle"!=this.playState&&this.play(),null!==b&&(this.currentTime=b),this._updatePromises()},play:function(){this._updatePromises(),this._paused=!1,this._animation.play(),-1==this._timeline._animations.indexOf(this)&&this._timeline._animations.push(this),this._register(),b.awaitStartTime(this),this._forEachChild(function(a){var b=a.currentTime;a.play(),a.currentTime=b}),this._updatePromises()},pause:function(){this._updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._animation.pause(),this._register(),this._forEachChild(function(a){a.pause()}),this._paused=!0,this._updatePromises()},finish:function(){this._updatePromises(),this._animation.finish(),this._register(),this._updatePromises()},cancel:function(){this._updatePromises(),this._animation.cancel(),this._register(),this._removeChildAnimations(),this._updatePromises()},reverse:function(){this._updatePromises();var a=this.currentTime;this._animation.reverse(),this._forEachChild(function(a){a.reverse()}),null!==a&&(this.currentTime=a),this._updatePromises()},addEventListener:function(a,b){var c=b;"function"==typeof b&&(c=function(a){a.target=this,b.call(this,a)}.bind(this),b._wrapper=c),this._animation.addEventListener(a,c)},removeEventListener:function(a,b){this._animation.removeEventListener(a,b&&b._wrapper||b)},_removeChildAnimations:function(){for(;this._childAnimations.length;)this._childAnimations.pop().cancel()},_forEachChild:function(b){var c=0;if(this.effect.children&&this._childAnimations.length<this.effect.children.length&&this._constructChildAnimations(),this._childAnimations.forEach(function(a){b.call(this,a,c),this.effect instanceof window.SequenceEffect&&(c+=a.effect.activeDuration)}.bind(this)),"pending"!=this.playState){var d=this.effect._timing,e=this.currentTime;null!==e&&(e=a.calculateTimeFraction(a.calculateActiveDuration(d),e,d)),(null==e||isNaN(e))&&this._removeChildAnimations()}}},window.Animation=b.Animation}(c,e,f),function(a,b,c){function d(b){this._frames=a.normalizeKeyframes(b)}function e(){for(var a=!1;i.length;){var b=i.shift();b._updateChildren(),a=!0}return a}var f=function(a){if(a._animation=void 0,a instanceof window.SequenceEffect||a instanceof window.GroupEffect)for(var b=0;b<a.children.length;b++)f(a.children[b])};b.removeMulti=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d._parent?(-1==b.indexOf(d._parent)&&b.push(d._parent),d._parent.children.splice(d._parent.children.indexOf(d),1),d._parent=null,f(d)):d._animation&&d._animation.effect==d&&(d._animation.cancel(),d._animation.effect=new KeyframeEffect(null,[]),d._animation._callback&&(d._animation._callback._animation=null),d._animation._rebuildUnderlyingAnimation(),f(d))}for(c=0;c<b.length;c++)b[c]._rebuild()},b.KeyframeEffect=function(b,c,e,f){return this.target=b,this._parent=null,e=a.numericTimingToObject(e),this._timingInput=a.cloneTimingInput(e),this._timing=a.normalizeTimingInput(e),this.timing=a.makeTiming(e,!1,this),this.timing._effect=this,"function"==typeof c?(a.deprecated("Custom KeyframeEffect","2015-06-22","Use KeyframeEffect.onsample instead."),this._normalizedKeyframes=c):this._normalizedKeyframes=new d(c),this._keyframes=c,this.activeDuration=a.calculateActiveDuration(this._timing),this._id=f,this},b.KeyframeEffect.prototype={getFrames:function(){return"function"==typeof this._normalizedKeyframes?this._normalizedKeyframes:this._normalizedKeyframes._frames},set onsample(a){if("function"==typeof this.getFrames())throw new Error("Setting onsample on custom effect KeyframeEffect is not supported.");this._onsample=a,this._animation&&this._animation._rebuildUnderlyingAnimation()},get parent(){return this._parent},clone:function(){if("function"==typeof this.getFrames())throw new Error("Cloning custom effects is not supported.");var b=new KeyframeEffect(this.target,[],a.cloneTimingInput(this._timingInput),this._id);return b._normalizedKeyframes=this._normalizedKeyframes,b._keyframes=this._keyframes,b},remove:function(){b.removeMulti([this])}};var g=Element.prototype.animate;Element.prototype.animate=function(a,c){var d="";return c&&c.id&&(d=c.id),b.timeline._play(new b.KeyframeEffect(this,a,c,d))};var h=document.createElementNS("http://www.w3.org/1999/xhtml","div");b.newUnderlyingAnimationForKeyframeEffect=function(a){if(a){var b=a.target||h,c=a._keyframes;"function"==typeof c&&(c=[]);var d=a._timingInput;d.id=a._id}else var b=h,c=[],d=0;return g.apply(b,[c,d])},b.bindAnimationForKeyframeEffect=function(a){a.effect&&"function"==typeof a.effect._normalizedKeyframes&&b.bindAnimationForCustomEffect(a)};var i=[];b.awaitStartTime=function(a){null===a.startTime&&a._isGroup&&(0==i.length&&requestAnimationFrame(e),i.push(a))};var j=window.getComputedStyle;Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){window.document.timeline._updateAnimationsPromises();var a=j.apply(this,arguments);return e()&&(a=j.apply(this,arguments)),window.document.timeline._updateAnimationsPromises(),a}}),window.KeyframeEffect=b.KeyframeEffect,window.Element.prototype.getAnimations=function(){return document.timeline.getAnimations().filter(function(a){return null!==a.effect&&a.effect.target==this}.bind(this))}}(c,e,f),function(a,b,c){function d(a){a._registered||(a._registered=!0,g.push(a),h||(h=!0,requestAnimationFrame(e)))}function e(a){var b=g;g=[],b.sort(function(a,b){return a._sequenceNumber-b._sequenceNumber}),b=b.filter(function(a){a();var b=a._animation?a._animation.playState:"idle";return"running"!=b&&"pending"!=b&&(a._registered=!1),a._registered}),g.push.apply(g,b),g.length?(h=!0,requestAnimationFrame(e)):h=!1}var f=(document.createElementNS("http://www.w3.org/1999/xhtml","div"),0);b.bindAnimationForCustomEffect=function(b){var c,e=b.effect.target,g="function"==typeof b.effect.getFrames();c=g?b.effect.getFrames():b.effect._onsample;var h=b.effect.timing,i=null;h=a.normalizeTimingInput(h);var j=function(){var d=j._animation?j._animation.currentTime:null;null!==d&&(d=a.calculateTimeFraction(a.calculateActiveDuration(h),d,h),isNaN(d)&&(d=null)),d!==i&&(g?c(d,e,b.effect):c(d,b.effect,b.effect._animation)),i=d};j._animation=b,j._registered=!1,j._sequenceNumber=f++,b._callback=j,d(j)};var g=[],h=!1;b.Animation.prototype._register=function(){this._callback&&d(this._callback)}}(c,e,f),function(a,b,c){function d(a){return a._timing.delay+a.activeDuration+a._timing.endDelay}function e(b,c,d){this._id=d,this._parent=null,this.children=b||[],this._reparent(this.children),c=a.numericTimingToObject(c),this._timingInput=a.cloneTimingInput(c),this._timing=a.normalizeTimingInput(c,!0),this.timing=a.makeTiming(c,!0,this),this.timing._effect=this,"auto"===this._timing.duration&&(this._timing.duration=this.activeDuration)}window.SequenceEffect=function(){e.apply(this,arguments)},window.GroupEffect=function(){e.apply(this,arguments)},e.prototype={_isAncestor:function(a){for(var b=this;null!==b;){if(b==a)return!0;b=b._parent}return!1},_rebuild:function(){for(var a=this;a;)"auto"===a.timing.duration&&(a._timing.duration=a.activeDuration),a=a._parent;this._animation&&this._animation._rebuildUnderlyingAnimation()},_reparent:function(a){b.removeMulti(a);for(var c=0;c<a.length;c++)a[c]._parent=this},_putChild:function(a,b){for(var c=b?"Cannot append an ancestor or self":"Cannot prepend an ancestor or self",d=0;d<a.length;d++)if(this._isAncestor(a[d]))throw{type:DOMException.HIERARCHY_REQUEST_ERR,name:"HierarchyRequestError",message:c};for(var d=0;d<a.length;d++)b?this.children.push(a[d]):this.children.unshift(a[d]);this._reparent(a),this._rebuild()},append:function(){this._putChild(arguments,!0)},prepend:function(){this._putChild(arguments,!1)},get parent(){return this._parent},get firstChild(){return this.children.length?this.children[0]:null},get lastChild(){return this.children.length?this.children[this.children.length-1]:null},clone:function(){for(var b=a.cloneTimingInput(this._timingInput),c=[],d=0;d<this.children.length;d++)c.push(this.children[d].clone());return this instanceof GroupEffect?new GroupEffect(c,b):new SequenceEffect(c,b)},remove:function(){b.removeMulti([this])}},window.SequenceEffect.prototype=Object.create(e.prototype),Object.defineProperty(window.SequenceEffect.prototype,"activeDuration",{get:function(){var a=0;return this.children.forEach(function(b){a+=d(b)}),Math.max(a,0)}}),window.GroupEffect.prototype=Object.create(e.prototype),Object.defineProperty(window.GroupEffect.prototype,"activeDuration",{get:function(){var a=0;return this.children.forEach(function(b){a=Math.max(a,d(b))}),a}}),b.newUnderlyingAnimationForGroup=function(c){var d,e=null,f=function(b){var c=d._wrapper;return c&&"pending"!=c.playState&&c.effect?null==b?void c._removeChildAnimations():0==b&&c.playbackRate<0&&(e||(e=a.normalizeTimingInput(c.effect.timing)),b=a.calculateTimeFraction(a.calculateActiveDuration(e),-1,e),isNaN(b)||null==b)?(c._forEachChild(function(a){a.currentTime=-1}),void c._removeChildAnimations()):void 0:void 0},g=new KeyframeEffect(null,[],c._timing,c._id);return g.onsample=f,d=b.timeline._play(g)},b.bindAnimationForGroup=function(a){a._animation._wrapper=a,a._isGroup=!0,b.awaitStartTime(a),a._constructChildAnimations(),a._setExternalAnimation(a)},b.groupChildDuration=d}(c,e,f),b["true"]=a}({},function(){return this}());
</script><script>// https://d3js.org v5.7.0 Copyright 2018 Mike Bostock
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";function n(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function e(t){var e;return 1===t.length&&(e=t,t=function(t,r){return n(e(t),r)}),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}var r=e(n),i=r.right,o=r.left;function a(t,n){return[t,n]}function u(t){return null===t?NaN:+t}function f(t,n){var e,r,i=t.length,o=0,a=-1,f=0,c=0;if(null==n)for(;++a<i;)isNaN(e=u(t[a]))||(c+=(r=e-f)*(e-(f+=r/++o)));else for(;++a<i;)isNaN(e=u(n(t[a],a,t)))||(c+=(r=e-f)*(e-(f+=r/++o)));if(o>1)return c/(o-1)}function c(t,n){var e=f(t,n);return e?Math.sqrt(e):e}function s(t,n){var e,r,i,o=t.length,a=-1;if(null==n){for(;++a<o;)if(null!=(e=t[a])&&e>=e)for(r=i=e;++a<o;)null!=(e=t[a])&&(r>e&&(r=e),i<e&&(i=e))}else for(;++a<o;)if(null!=(e=n(t[a],a,t))&&e>=e)for(r=i=e;++a<o;)null!=(e=n(t[a],a,t))&&(r>e&&(r=e),i<e&&(i=e));return[r,i]}var l=Array.prototype,h=l.slice,d=l.map;function p(t){return function(){return t}}function v(t){return t}function g(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}var y=Math.sqrt(50),_=Math.sqrt(10),b=Math.sqrt(2);function m(t,n,e){var r,i,o,a,u=-1;if(e=+e,(t=+t)===(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=x(t,n,e))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o}function x(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=y?10:o>=_?5:o>=b?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=y?10:o>=_?5:o>=b?2:1)}function w(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=y?i*=10:o>=_?i*=5:o>=b&&(i*=2),n<t?-i:i}function M(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function A(t,n,e){if(null==e&&(e=u),r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),a=+e(t[o],o,t);return a+(+e(t[o+1],o+1,t)-a)*(i-o)}}function T(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&e>r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e>r&&(r=e);return r}function N(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--a]=r[n];return e}function S(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&r>e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r>e&&(r=e);return r}function E(t){if(!(i=t.length))return[];for(var n=-1,e=S(t,k),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r}function k(t){return t.length}var C=Array.prototype.slice;function P(t){return t}var z=1,R=2,L=3,D=4,U=1e-6;function q(t){return"translate("+(t+.5)+",0)"}function O(t){return"translate(0,"+(t+.5)+")"}function Y(){return!this.__axis}function B(t,n){var e=[],r=null,i=null,o=6,a=6,u=3,f=t===z||t===D?-1:1,c=t===D||t===R?"x":"y",s=t===z||t===L?q:O;function l(l){var h=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,d=null==i?n.tickFormat?n.tickFormat.apply(n,e):P:i,p=Math.max(o,0)+u,v=n.range(),g=+v[0]+.5,y=+v[v.length-1]+.5,_=(n.bandwidth?function(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}:function(t){return function(n){return+t(n)}})(n.copy()),b=l.selection?l.selection():l,m=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(h,n).order(),w=x.exit(),M=x.enter().append("g").attr("class","tick"),A=x.select("line"),T=x.select("text");m=m.merge(m.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(M),A=A.merge(M.append("line").attr("stroke","currentColor").attr(c+"2",f*o)),T=T.merge(M.append("text").attr("fill","currentColor").attr(c,f*p).attr("dy",t===z?"0em":t===L?"0.71em":"0.32em")),l!==b&&(m=m.transition(l),x=x.transition(l),A=A.transition(l),T=T.transition(l),w=w.transition(l).attr("opacity",U).attr("transform",function(t){return isFinite(t=_(t))?s(t):this.getAttribute("transform")}),M.attr("opacity",U).attr("transform",function(t){var n=this.parentNode.__axis;return s(n&&isFinite(n=n(t))?n:_(t))})),w.remove(),m.attr("d",t===D||t==R?a?"M"+f*a+","+g+"H0.5V"+y+"H"+f*a:"M0.5,"+g+"V"+y:a?"M"+g+","+f*a+"V0.5H"+y+"V"+f*a:"M"+g+",0.5H"+y),x.attr("opacity",1).attr("transform",function(t){return s(_(t))}),A.attr(c+"2",f*o),T.attr(c,f*p).text(d),b.filter(Y).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===R?"start":t===D?"end":"middle"),b.each(function(){this.__axis=_})}return l.scale=function(t){return arguments.length?(n=t,l):n},l.ticks=function(){return e=C.call(arguments),l},l.tickArguments=function(t){return arguments.length?(e=null==t?[]:C.call(t),l):e.slice()},l.tickValues=function(t){return arguments.length?(r=null==t?null:C.call(t),l):r&&r.slice()},l.tickFormat=function(t){return arguments.length?(i=t,l):i},l.tickSize=function(t){return arguments.length?(o=a=+t,l):o},l.tickSizeInner=function(t){return arguments.length?(o=+t,l):o},l.tickSizeOuter=function(t){return arguments.length?(a=+t,l):a},l.tickPadding=function(t){return arguments.length?(u=+t,l):u},l}var F={value:function(){}};function I(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new H(r)}function H(t){this._=t}function j(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function X(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=F,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}H.prototype=I.prototype={constructor:H,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),a=-1,u=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<u;)if(e=(t=o[a]).type)i[e]=X(i[e],t.name,n);else if(null==n)for(e in i)i[e]=X(i[e],t.name,null);return this}for(;++a<u;)if((e=(t=o[a]).type)&&(e=j(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new H(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var G="http://www.w3.org/1999/xhtml",V={svg:"http://www.w3.org/2000/svg",xhtml:G,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),V.hasOwnProperty(n)?{space:V[n],local:t}:t}function W(t){var n=$(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===G&&n.documentElement.namespaceURI===G?n.createElement(t):n.createElementNS(e,t)}})(n)}function Z(){}function Q(t){return null==t?Z:function(){return this.querySelector(t)}}function J(){return[]}function K(t){return null==t?J:function(){return this.querySelectorAll(t)}}var tt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var nt=document.documentElement;if(!nt.matches){var et=nt.webkitMatchesSelector||nt.msMatchesSelector||nt.mozMatchesSelector||nt.oMatchesSelector;tt=function(t){return function(){return et.call(this,t)}}}}var rt=tt;function it(t){return new Array(t.length)}function ot(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}ot.prototype={constructor:ot,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var at="$";function ut(t,n,e,r,i,o){for(var a,u=0,f=n.length,c=o.length;u<c;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new ot(t,o[u]);for(;u<f;++u)(a=n[u])&&(i[u]=a)}function ft(t,n,e,r,i,o,a){var u,f,c,s={},l=n.length,h=o.length,d=new Array(l);for(u=0;u<l;++u)(f=n[u])&&(d[u]=c=at+a.call(f,f.__data__,u,n),c in s?i[u]=f:s[c]=f);for(u=0;u<h;++u)(f=s[c=at+a.call(t,o[u],u,o)])?(r[u]=f,f.__data__=o[u],s[c]=null):e[u]=new ot(t,o[u]);for(u=0;u<l;++u)(f=n[u])&&s[d[u]]===f&&(i[u]=f)}function ct(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function st(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function lt(t,n){return t.style.getPropertyValue(n)||st(t).getComputedStyle(t,null).getPropertyValue(n)}function ht(t){return t.trim().split(/^|\s+/)}function dt(t){return t.classList||new pt(t)}function pt(t){this._node=t,this._names=ht(t.getAttribute("class")||"")}function vt(t,n){for(var e=dt(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function gt(t,n){for(var e=dt(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function yt(){this.textContent=""}function _t(){this.innerHTML=""}function bt(){this.nextSibling&&this.parentNode.appendChild(this)}function mt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xt(){return null}function wt(){var t=this.parentNode;t&&t.removeChild(this)}function Mt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function At(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}pt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Tt={};(t.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(Tt={mouseenter:"mouseover",mouseleave:"mouseout"}));function Nt(t,n,e){return t=St(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function St(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function Et(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function kt(t,n,e){var r=Tt.hasOwnProperty(t.type)?Nt:St;return function(i,o,a){var u,f=this.__on,c=r(n,o,a);if(f)for(var s=0,l=f.length;s<l;++s)if((u=f[s]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=e),void(u.value=n);this.addEventListener(t.type,c,e),u={type:t.type,name:t.name,value:n,listener:c,capture:e},f?f.push(u):this.__on=[u]}}function Ct(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function Pt(t,n,e){var r=st(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}var zt=[null];function Rt(t,n){this._groups=t,this._parents=n}function Lt(){return new Rt([[document.documentElement]],zt)}function Dt(t){return"string"==typeof t?new Rt([[document.querySelector(t)]],[document.documentElement]):new Rt([[t]],zt)}Rt.prototype=Lt.prototype={constructor:Rt,select:function(t){"function"!=typeof t&&(t=Q(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],f=u.length,c=r[i]=new Array(f),s=0;s<f;++s)(o=u[s])&&(a=t.call(o,o.__data__,s,u))&&("__data__"in o&&(a.__data__=o.__data__),c[s]=a);return new Rt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=K(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],f=u.length,c=0;c<f;++c)(a=u[c])&&(r.push(t.call(a,a.__data__,c,u)),i.push(a));return new Rt(r,i)},filter:function(t){"function"!=typeof t&&(t=rt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,f=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&f.push(o);return new Rt(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),s=-1,this.each(function(t){p[++s]=t}),p;var e,r=n?ft:ut,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,u=new Array(a),f=new Array(a),c=new Array(a),s=0;s<a;++s){var l=i[s],h=o[s],d=h.length,p=t.call(l,l&&l.__data__,s,i),v=p.length,g=f[s]=new Array(v),y=u[s]=new Array(v);r(l,h,g,y,c[s]=new Array(d),p,n);for(var _,b,m=0,x=0;m<v;++m)if(_=g[m]){for(m>=x&&(x=m+1);!(b=y[x])&&++x<v;);_._next=b||null}}return(u=new Rt(u,i))._enter=f,u._exit=c,u},enter:function(){return new Rt(this._enter||this._groups.map(it),this._parents)},exit:function(){return new Rt(this._exit||this._groups.map(it),this._parents)},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var f,c=n[u],s=e[u],l=c.length,h=a[u]=new Array(l),d=0;d<l;++d)(f=c[d]||s[d])&&(h[d]=f);for(;u<r;++u)a[u]=n[u];return new Rt(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=ct);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],f=u.length,c=i[o]=new Array(f),s=0;s<f;++s)(a=u[s])&&(c[s]=a);c.sort(n)}return new Rt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=$(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):lt(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=ht(t+"");if(arguments.length<2){for(var r=dt(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?vt:gt)(this,t)}}:n?function(t){return function(){vt(this,t)}}:function(t){return function(){gt(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?yt:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?_t:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(bt)},lower:function(){return this.each(mt)},append:function(t){var n="function"==typeof t?t:W(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:W(t),r=null==n?xt:"function"==typeof n?n:Q(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(wt)},clone:function(t){return this.select(t?At:Mt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?kt:Et,null==e&&(e=!1),r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var f,c=0,s=u.length;c<s;++c)for(r=0,f=u[c];r<a;++r)if((i=o[r]).type===f.type&&i.name===f.name)return f.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return Pt(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return Pt(this,t,n)}})(t,n))}};var Ut=0;function qt(){return new Ot}function Ot(){this._="@"+(++Ut).toString(36)}function Yt(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e}function Bt(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function Ft(t){var n=Yt();return n.changedTouches&&(n=n.changedTouches[0]),Bt(t,n)}function It(t,n,e){arguments.length<3&&(e=n,n=Yt().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return Bt(t,r);return null}function Ht(){t.event.stopImmediatePropagation()}function jt(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Xt(t){var n=t.document.documentElement,e=Dt(t).on("dragstart.drag",jt,!0);"onselectstart"in n?e.on("selectstart.drag",jt,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Gt(t,n){var e=t.document.documentElement,r=Dt(t).on("dragstart.drag",null);n&&(r.on("click.drag",jt,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function Vt(t){return function(){return t}}function $t(t,n,e,r,i,o,a,u,f,c){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=f,this._=c}function Wt(){return!t.event.button}function Zt(){return this.parentNode}function Qt(n){return null==n?{x:t.event.x,y:t.event.y}:n}function Jt(){return"ontouchstart"in this}function Kt(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function tn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function nn(){}Ot.prototype=qt.prototype={constructor:Ot,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},$t.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var en="\\s*([+-]?\\d+)\\s*",rn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",on="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",an=/^#([0-9a-f]{3})$/,un=/^#([0-9a-f]{6})$/,fn=new RegExp("^rgb\\("+[en,en,en]+"\\)$"),cn=new RegExp("^rgb\\("+[on,on,on]+"\\)$"),sn=new RegExp("^rgba\\("+[en,en,en,rn]+"\\)$"),ln=new RegExp("^rgba\\("+[on,on,on,rn]+"\\)$"),hn=new RegExp("^hsl\\("+[rn,on,on]+"\\)$"),dn=new RegExp("^hsla\\("+[rn,on,on,rn]+"\\)$"),pn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vn(t){var n;return t=(t+"").trim().toLowerCase(),(n=an.exec(t))?new mn((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=un.exec(t))?gn(parseInt(n[1],16)):(n=fn.exec(t))?new mn(n[1],n[2],n[3],1):(n=cn.exec(t))?new mn(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=sn.exec(t))?yn(n[1],n[2],n[3],n[4]):(n=ln.exec(t))?yn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=hn.exec(t))?wn(n[1],n[2]/100,n[3]/100,1):(n=dn.exec(t))?wn(n[1],n[2]/100,n[3]/100,n[4]):pn.hasOwnProperty(t)?gn(pn[t]):"transparent"===t?new mn(NaN,NaN,NaN,0):null}function gn(t){return new mn(t>>16&255,t>>8&255,255&t,1)}function yn(t,n,e,r){return r<=0&&(t=n=e=NaN),new mn(t,n,e,r)}function _n(t){return t instanceof nn||(t=vn(t)),t?new mn((t=t.rgb()).r,t.g,t.b,t.opacity):new mn}function bn(t,n,e,r){return 1===arguments.length?_n(t):new mn(t,n,e,null==r?1:r)}function mn(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function xn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function wn(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new An(t,n,e,r)}function Mn(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof An)return new An(t.h,t.s,t.l,t.opacity);if(t instanceof nn||(t=vn(t)),!t)return new An;if(t instanceof An)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,f=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=f<.5?o+i:2-o-i,a*=60):u=f>0&&f<1?0:a,new An(a,u,f,t.opacity)}(t):new An(t,n,e,null==r?1:r)}function An(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Tn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Kt(nn,vn,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Kt(mn,bn,tn(nn,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new mn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new mn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+xn(this.r)+xn(this.g)+xn(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Kt(An,Mn,tn(nn,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new An(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new An(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new mn(Tn(t>=240?t-240:t+120,i,r),Tn(t,i,r),Tn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Nn=Math.PI/180,Sn=180/Math.PI,En=.96422,kn=1,Cn=.82521,Pn=4/29,zn=6/29,Rn=3*zn*zn,Ln=zn*zn*zn;function Dn(t){if(t instanceof qn)return new qn(t.l,t.a,t.b,t.opacity);if(t instanceof jn){if(isNaN(t.h))return new qn(t.l,0,0,t.opacity);var n=t.h*Nn;return new qn(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof mn||(t=_n(t));var e,r,i=Fn(t.r),o=Fn(t.g),a=Fn(t.b),u=On((.2225045*i+.7168786*o+.0606169*a)/kn);return i===o&&o===a?e=r=u:(e=On((.4360747*i+.3850649*o+.1430804*a)/En),r=On((.0139322*i+.0971045*o+.7141733*a)/Cn)),new qn(116*u-16,500*(e-u),200*(u-r),t.opacity)}function Un(t,n,e,r){return 1===arguments.length?Dn(t):new qn(t,n,e,null==r?1:r)}function qn(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function On(t){return t>Ln?Math.pow(t,1/3):t/Rn+Pn}function Yn(t){return t>zn?t*t*t:Rn*(t-Pn)}function Bn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Fn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function In(t){if(t instanceof jn)return new jn(t.h,t.c,t.l,t.opacity);if(t instanceof qn||(t=Dn(t)),0===t.a&&0===t.b)return new jn(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Sn;return new jn(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Hn(t,n,e,r){return 1===arguments.length?In(t):new jn(t,n,e,null==r?1:r)}function jn(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}Kt(qn,Un,tn(nn,{brighter:function(t){return new qn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new qn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new mn(Bn(3.1338561*(n=En*Yn(n))-1.6168667*(t=kn*Yn(t))-.4906146*(e=Cn*Yn(e))),Bn(-.9787684*n+1.9161415*t+.033454*e),Bn(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),Kt(jn,Hn,tn(nn,{brighter:function(t){return new jn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new jn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Dn(this).rgb()}}));var Xn=-.14861,Gn=1.78277,Vn=-.29227,$n=-.90649,Wn=1.97294,Zn=Wn*$n,Qn=Wn*Gn,Jn=Gn*Vn-$n*Xn;function Kn(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof te)return new te(t.h,t.s,t.l,t.opacity);t instanceof mn||(t=_n(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Jn*r+Zn*n-Qn*e)/(Jn+Zn-Qn),o=r-i,a=(Wn*(e-i)-Vn*o)/$n,u=Math.sqrt(a*a+o*o)/(Wn*i*(1-i)),f=u?Math.atan2(a,o)*Sn-120:NaN;return new te(f<0?f+360:f,u,i,t.opacity)}(t):new te(t,n,e,null==r?1:r)}function te(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function ne(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function ee(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return ne((e-r/n)*n,a,i,o,u)}}function re(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return ne((e-r/n)*n,i,o,a,u)}}function ie(t){return function(){return t}}function oe(t,n){return function(e){return t+e*n}}function ae(t,n){var e=n-t;return e?oe(t,e>180||e<-180?e-360*Math.round(e/360):e):ie(isNaN(t)?n:t)}function ue(t){return 1==(t=+t)?fe:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):ie(isNaN(n)?e:n)}}function fe(t,n){var e=n-t;return e?oe(t,e):ie(isNaN(t)?n:t)}Kt(te,Kn,tn(nn,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new te(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new te(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Nn,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new mn(255*(n+e*(Xn*r+Gn*i)),255*(n+e*(Vn*r+$n*i)),255*(n+e*(Wn*r)),this.opacity)}}));var ce=function t(n){var e=ue(n);function r(t,n){var r=e((t=bn(t)).r,(n=bn(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=fe(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function se(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=bn(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}var le=se(ee),he=se(re);function de(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=me(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function pe(t,n){var e=new Date;return n-=t=+t,function(r){return e.setTime(t+n*r),e}}function ve(t,n){return n-=t=+t,function(e){return t+n*e}}function ge(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=me(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var ye=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_e=new RegExp(ye.source,"g");function be(t,n){var e,r,i,o=ye.lastIndex=_e.lastIndex=0,a=-1,u=[],f=[];for(t+="",n+="";(e=ye.exec(t))&&(r=_e.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,f.push({i:a,x:ve(e,r)})),o=_e.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?f[0]?function(t){return function(n){return t(n)+""}}(f[0].x):function(t){return function(){return t}}(n):(n=f.length,function(t){for(var e,r=0;r<n;++r)u[(e=f[r]).i]=e.x(t);return u.join("")})}function me(t,n){var e,r=typeof n;return null==n||"boolean"===r?ie(n):("number"===r?ve:"string"===r?(e=vn(n))?(n=e,ce):be:n instanceof vn?ce:n instanceof Date?pe:Array.isArray(n)?de:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?ge:ve)(t,n)}function xe(t,n){return n-=t=+t,function(e){return Math.round(t+n*e)}}var we,Me,Ae,Te,Ne=180/Math.PI,Se={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ee(t,n,e,r,i,o){var a,u,f;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(f=t*e+n*r)&&(e-=t*f,r-=n*f),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,f/=u),t*r<n*e&&(t=-t,n=-n,f=-f,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Ne,skewX:Math.atan(f)*Ne,scaleX:a,scaleY:u}}function ke(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],f=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var f=a.push("translate(",null,n,null,e);u.push({i:f-4,x:ve(t,i)},{i:f-2,x:ve(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,f),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:ve(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,f),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:ve(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,f),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:ve(t,e)},{i:u-2,x:ve(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,f),o=a=null,function(t){for(var n,e=-1,r=f.length;++e<r;)u[(n=f[e]).i]=n.x(t);return u.join("")}}}var Ce=ke(function(t){return"none"===t?Se:(we||(we=document.createElement("DIV"),Me=document.documentElement,Ae=document.defaultView),we.style.transform=t,t=Ae.getComputedStyle(Me.appendChild(we),null).getPropertyValue("transform"),Me.removeChild(we),Ee(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Pe=ke(function(t){return null==t?Se:(Te||(Te=document.createElementNS("http://www.w3.org/2000/svg","g")),Te.setAttribute("transform",t),(t=Te.transform.baseVal.consolidate())?Ee((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Se)},", ",")",")"),ze=Math.SQRT2,Re=2,Le=4,De=1e-12;function Ue(t){return((t=Math.exp(t))+1/t)/2}function qe(t,n){var e,r,i=t[0],o=t[1],a=t[2],u=n[0],f=n[1],c=n[2],s=u-i,l=f-o,h=s*s+l*l;if(h<De)r=Math.log(c/a)/ze,e=function(t){return[i+t*s,o+t*l,a*Math.exp(ze*t*r)]};else{var d=Math.sqrt(h),p=(c*c-a*a+Le*h)/(2*a*Re*d),v=(c*c-a*a-Le*h)/(2*c*Re*d),g=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-g)/ze,e=function(t){var n,e=t*r,u=Ue(g),f=a/(Re*d)*(u*(n=ze*e+g,((n=Math.exp(2*n))-1)/(n+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+f*s,o+f*l,a*u/Ue(ze*e+g)]}}return e.duration=1e3*r,e}function Oe(t){return function(n,e){var r=t((n=Mn(n)).h,(e=Mn(e)).h),i=fe(n.s,e.s),o=fe(n.l,e.l),a=fe(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Ye=Oe(ae),Be=Oe(fe);function Fe(t){return function(n,e){var r=t((n=Hn(n)).h,(e=Hn(e)).h),i=fe(n.c,e.c),o=fe(n.l,e.l),a=fe(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Ie=Fe(ae),He=Fe(fe);function je(t){return function n(e){function r(n,r){var i=t((n=Kn(n)).h,(r=Kn(r)).h),o=fe(n.s,r.s),a=fe(n.l,r.l),u=fe(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}var Xe=je(ae),Ge=je(fe);var Ve,$e,We=0,Ze=0,Qe=0,Je=1e3,Ke=0,tr=0,nr=0,er="object"==typeof performance&&performance.now?performance:Date,rr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ir(){return tr||(rr(or),tr=er.now()+nr)}function or(){tr=0}function ar(){this._call=this._time=this._next=null}function ur(t,n,e){var r=new ar;return r.restart(t,n,e),r}function fr(){ir(),++We;for(var t,n=Ve;n;)(t=tr-n._time)>=0&&n._call.call(null,t),n=n._next;--We}function cr(){tr=(Ke=er.now())+nr,We=Ze=0;try{fr()}finally{We=0,function(){var t,n,e=Ve,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ve=n);$e=t,lr(r)}(),tr=0}}function sr(){var t=er.now(),n=t-Ke;n>Je&&(nr-=n,Ke=t)}function lr(t){We||(Ze&&(Ze=clearTimeout(Ze)),t-tr>24?(t<1/0&&(Ze=setTimeout(cr,t-er.now()-nr)),Qe&&(Qe=clearInterval(Qe))):(Qe||(Ke=er.now(),Qe=setInterval(sr,Je)),We=1,rr(cr)))}function hr(t,n,e){var r=new ar;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r}ar.prototype=ur.prototype={constructor:ar,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?ir():+e)+(null==n?0:+n),this._next||$e===this||($e?$e._next=this:Ve=this,$e=this),this._call=t,this._time=e,lr()},stop:function(){this._call&&(this._call=null,this._time=1/0,lr())}};var dr=I("start","end","interrupt"),pr=[],vr=0,gr=1,yr=2,_r=3,br=4,mr=5,xr=6;function wr(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(f){var c,s,l,h;if(e.state!==gr)return u();for(c in i)if((h=i[c]).name===e.name){if(h.state===_r)return hr(o);h.state===br?(h.state=xr,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<n&&(h.state=xr,h.timer.stop(),delete i[c])}if(hr(function(){e.state===_r&&(e.state=br,e.timer.restart(a,e.delay,e.time),a(f))}),e.state=yr,e.on.call("start",t,t.__data__,e.index,e.group),e.state===yr){for(e.state=_r,r=new Array(l=e.tween.length),c=0,s=-1;c<l;++c)(h=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(r[++s]=h);r.length=s+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=mr,1),o=-1,a=r.length;++o<a;)r[o].call(null,i);e.state===mr&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=xr,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=ur(function(t){e.state=gr,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:i,on:dr,tween:pr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:vr})}function Mr(t,n){var e=Tr(t,n);if(e.state>vr)throw new Error("too late; already scheduled");return e}function Ar(t,n){var e=Tr(t,n);if(e.state>yr)throw new Error("too late; already started");return e}function Tr(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Nr(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>yr&&e.state<mr,e.state=xr,e.timer.stop(),r&&e.on.call("interrupt",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}function Sr(t,n,e){var r=t._id;return t.each(function(){var t=Ar(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return Tr(t,r).value[n]}}function Er(t,n){var e;return("number"==typeof n?ve:n instanceof vn?ce:(e=vn(n))?(n=e,ce):be)(t,n)}var kr=Lt.prototype.constructor;var Cr=0;function Pr(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function zr(t){return Lt().transition(t)}function Rr(){return++Cr}var Lr=Lt.prototype;function Dr(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Ur(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Pr.prototype=zr.prototype={constructor:Pr,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Q(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,f,c=r[a],s=c.length,l=o[a]=new Array(s),h=0;h<s;++h)(u=c[h])&&(f=t.call(u,u.__data__,h,c))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,wr(l[h],n,e,h,l,Tr(u,e)));return new Pr(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=K(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var f,c=r[u],s=c.length,l=0;l<s;++l)if(f=c[l]){for(var h,d=t.call(f,f.__data__,l,c),p=Tr(f,e),v=0,g=d.length;v<g;++v)(h=d[v])&&wr(h,n,e,v,d,p);o.push(d),a.push(f)}return new Pr(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=rt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,f=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&f.push(o);return new Pr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var f,c=n[u],s=e[u],l=c.length,h=a[u]=new Array(l),d=0;d<l;++d)(f=c[d]||s[d])&&(h[d]=f);for(;u<r;++u)a[u]=n[u];return new Pr(a,this._parents,this._name,this._id)},selection:function(){return new kr(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Rr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],f=u.length,c=0;c<f;++c)if(a=u[c]){var s=Tr(a,n);wr(a,t,e,c,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Pr(r,this._parents,t,e)},call:Lr.call,nodes:Lr.nodes,node:Lr.node,size:Lr.size,empty:Lr.empty,each:Lr.each,on:function(t,n){var e=this._id;return arguments.length<2?Tr(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(n)?Mr:Ar;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=$(t),r="transform"===e?Pe:Er;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var a,u=e(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===u?null:a===r&&u===i?o:o=n(r=a,i=u);this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var a,u=e(this);if(null!=u)return(a=this.getAttribute(t))===u?null:a===r&&u===i?o:o=n(r=a,i=u);this.removeAttribute(t)}})(e,r,Sr(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===r?i:i=n(r=o,e)}}:function(t,n,e){var r,i;return function(){var o=this.getAttribute(t);return o===e?null:o===r?i:i=n(r=o,e)}})(e,r,n+""))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=$(t);return this.tween(e,(r.local?function(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttributeNS(t.space,t.local,r(n))}}return e._value=n,e}:function(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttribute(t,r(n))}}return e._value=n,e})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?Ce:Er;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=lt(this,t),a=(this.style.removeProperty(t),lt(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof n?function(t,n,e){var r,i,o;return function(){var a=lt(this,t),u=e(this);return null==u&&(this.style.removeProperty(t),u=lt(this,t)),a===u?null:a===r&&u===i?o:o=n(r=a,i=u)}}(t,r,Sr(this,"style."+t,n)):function(t,n,e){var r,i;return function(){var o=lt(this,t);return o===e?null:o===r?i:i=n(r=o,e)}}(t,r,n+""),e)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){function r(){var r=this,i=n.apply(r,arguments);return i&&function(n){r.style.setProperty(t,i(n),e)}}return r._value=n,r}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Sr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}));var t},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Tr(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=Ar(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Ar(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},f=0,c=i.length;f<c;++f)if(i[f].name===n){i[f]=u;break}f===c&&i.push(u)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Mr(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Mr(this,t).delay=n}})(n,t)):Tr(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Ar(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Ar(this,t).duration=n}})(n,t)):Tr(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){Ar(this,t).ease=n}}(n,t)):Tr(this.node(),n).ease}};var qr=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),Or=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),Yr=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Br=Math.PI,Fr=Br/2;function Ir(t){return(1-Math.cos(Br*t))/2}function Hr(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function jr(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Xr=4/11,Gr=6/11,Vr=8/11,$r=.75,Wr=9/11,Zr=10/11,Qr=.9375,Jr=21/22,Kr=63/64,ti=1/Xr/Xr;function ni(t){return(t=+t)<Xr?ti*t*t:t<Vr?ti*(t-=Gr)*t+$r:t<Zr?ti*(t-=Wr)*t+Qr:ti*(t-=Jr)*t+Kr}var ei=function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(1.70158),ri=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(1.70158),ii=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(1.70158),oi=2*Math.PI,ai=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=oi);function i(t){return n*Math.pow(2,10*--t)*Math.sin((r-t)/e)}return i.amplitude=function(n){return t(n,e*oi)},i.period=function(e){return t(n,e)},i}(1,.3),ui=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=oi);function i(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/e)}return i.amplitude=function(n){return t(n,e*oi)},i.period=function(e){return t(n,e)},i}(1,.3),fi=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=oi);function i(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((r-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((r+t)/e))/2}return i.amplitude=function(n){return t(n,e*oi)},i.period=function(e){return t(n,e)},i}(1,.3),ci={time:null,delay:0,duration:250,ease:Ur};function si(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return ci.time=ir(),ci;return e}Lt.prototype.interrupt=function(t){return this.each(function(){Nr(this,t)})},Lt.prototype.transition=function(t){var n,e;t instanceof Pr?(n=t._id,t=t._name):(n=Rr(),(e=ci).time=ir(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],f=u.length,c=0;c<f;++c)(a=u[c])&&wr(a,t,n,c,u,e||si(a,n));return new Pr(r,this._parents,t,n)};var li=[null];function hi(t){return function(){return t}}function di(t,n,e){this.target=t,this.type=n,this.selection=e}function pi(){t.event.stopImmediatePropagation()}function vi(){t.event.preventDefault(),t.event.stopImmediatePropagation()}var gi={name:"drag"},yi={name:"space"},_i={name:"handle"},bi={name:"center"},mi={name:"x",handles:["e","w"].map(Ei),input:function(t,n){return t&&[[t[0],n[0][1]],[t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},xi={name:"y",handles:["n","s"].map(Ei),input:function(t,n){return t&&[[n[0][0],t[0]],[n[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},wi={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Ei),input:function(t){return t},output:function(t){return t}},Mi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ai={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ti={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ni={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Si={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ei(t){return{type:t}}function ki(){return!t.event.button}function Ci(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Pi(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function zi(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ri(n){var e,r=Ci,i=ki,o=I(u,"start","brush","end"),a=6;function u(t){var e=t.property("__brush",h).selectAll(".overlay").data([Ei("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Mi.overlay).merge(e).each(function(){var t=Pi(this).extent;Dt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Ei("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Mi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(n.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Mi[t.type]}),t.each(f).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",l)}function f(){var t=Dt(this),n=Pi(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?n[1][0]-a/2:n[0][0]-a/2}).attr("y",function(t){return"s"===t.type[0]?n[1][1]-a/2:n[0][1]-a/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+a:a}).attr("height",function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+a:a})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,n){return t.__brush.emitter||new s(t,n)}function s(t,n){this.that=t,this.args=n,this.state=t.__brush,this.active=0}function l(){if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return vi()}else if(e)return;if(i.apply(this,arguments)){var r,o,a,u,s,l,h,d,p,v,g,y,_,b=this,m=t.event.target.__data__.type,x="selection"===(t.event.metaKey?m="overlay":m)?gi:t.event.altKey?bi:_i,w=n===xi?null:Ni[m],M=n===mi?null:Si[m],A=Pi(b),T=A.extent,N=A.selection,S=T[0][0],E=T[0][1],k=T[1][0],C=T[1][1],P=w&&M&&t.event.shiftKey,z=Ft(b),R=z,L=c(b,arguments).beforestart();"overlay"===m?A.selection=N=[[r=n===xi?S:z[0],a=n===mi?E:z[1]],[s=n===xi?k:r,h=n===mi?C:a]]:(r=N[0][0],a=N[0][1],s=N[1][0],h=N[1][1]),o=r,u=a,l=s,d=h;var D=Dt(b).attr("pointer-events","none"),U=D.selectAll(".overlay").attr("cursor",Mi[m]);if(t.event.touches)D.on("touchmove.brush",O,!0).on("touchend.brush touchcancel.brush",B,!0);else{var q=Dt(t.event.view).on("keydown.brush",function(){switch(t.event.keyCode){case 16:P=w&&M;break;case 18:x===_i&&(w&&(s=l-p*w,r=o+p*w),M&&(h=d-v*M,a=u+v*M),x=bi,Y());break;case 32:x!==_i&&x!==bi||(w<0?s=l-p:w>0&&(r=o-p),M<0?h=d-v:M>0&&(a=u-v),x=yi,U.attr("cursor",Mi.selection),Y());break;default:return}vi()},!0).on("keyup.brush",function(){switch(t.event.keyCode){case 16:P&&(y=_=P=!1,Y());break;case 18:x===bi&&(w<0?s=l:w>0&&(r=o),M<0?h=d:M>0&&(a=u),x=_i,Y());break;case 32:x===yi&&(t.event.altKey?(w&&(s=l-p*w,r=o+p*w),M&&(h=d-v*M,a=u+v*M),x=bi):(w<0?s=l:w>0&&(r=o),M<0?h=d:M>0&&(a=u),x=_i),U.attr("cursor",Mi[m]),Y());break;default:return}vi()},!0).on("mousemove.brush",O,!0).on("mouseup.brush",B,!0);Xt(t.event.view)}pi(),Nr(b),f.call(b),L.start()}function O(){var t=Ft(b);!P||y||_||(Math.abs(t[0]-R[0])>Math.abs(t[1]-R[1])?_=!0:y=!0),R=t,g=!0,vi(),Y()}function Y(){var t;switch(p=R[0]-z[0],v=R[1]-z[1],x){case yi:case gi:w&&(p=Math.max(S-r,Math.min(k-s,p)),o=r+p,l=s+p),M&&(v=Math.max(E-a,Math.min(C-h,v)),u=a+v,d=h+v);break;case _i:w<0?(p=Math.max(S-r,Math.min(k-r,p)),o=r+p,l=s):w>0&&(p=Math.max(S-s,Math.min(k-s,p)),o=r,l=s+p),M<0?(v=Math.max(E-a,Math.min(C-a,v)),u=a+v,d=h):M>0&&(v=Math.max(E-h,Math.min(C-h,v)),u=a,d=h+v);break;case bi:w&&(o=Math.max(S,Math.min(k,r-p*w)),l=Math.max(S,Math.min(k,s+p*w))),M&&(u=Math.max(E,Math.min(C,a-v*M)),d=Math.max(E,Math.min(C,h+v*M)))}l<o&&(w*=-1,t=r,r=s,s=t,t=o,o=l,l=t,m in Ai&&U.attr("cursor",Mi[m=Ai[m]])),d<u&&(M*=-1,t=a,a=h,h=t,t=u,u=d,d=t,m in Ti&&U.attr("cursor",Mi[m=Ti[m]])),A.selection&&(N=A.selection),y&&(o=N[0][0],l=N[1][0]),_&&(u=N[0][1],d=N[1][1]),N[0][0]===o&&N[0][1]===u&&N[1][0]===l&&N[1][1]===d||(A.selection=[[o,u],[l,d]],f.call(b),L.brush())}function B(){if(pi(),t.event.touches){if(t.event.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500),D.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Gt(t.event.view,g),q.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),U.attr("cursor",Mi.overlay),A.selection&&(N=A.selection),zi(N)&&(A.selection=null,f.call(b)),L.end()}}function h(){var t=this.__brush||{selection:null};return t.extent=r.apply(this,arguments),t.dim=n,t}return u.move=function(t,e){t.selection?t.on("start.brush",function(){c(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){c(this,arguments).end()}).tween("brush",function(){var t=this,r=t.__brush,i=c(t,arguments),o=r.selection,a=n.input("function"==typeof e?e.apply(this,arguments):e,r.extent),u=me(o,a);function s(n){r.selection=1===n&&zi(a)?null:u(n),f.call(t),i.brush()}return o&&a?s:s(1)}):t.each(function(){var t=arguments,r=this.__brush,i=n.input("function"==typeof e?e.apply(this,t):e,r.extent),o=c(this,t).beforestart();Nr(this),r.selection=null==i||zi(i)?null:i,f.call(this),o.start().brush().end()})},s.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Ct(new di(u,t,n.output(this.state.selection)),o.apply,o,[t,this.that,this.args])}},u.extent=function(t){return arguments.length?(r="function"==typeof t?t:hi([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),u):r},u.filter=function(t){return arguments.length?(i="function"==typeof t?t:hi(!!t),u):i},u.handleSize=function(t){return arguments.length?(a=+t,u):a},u.on=function(){var t=o.on.apply(o,arguments);return t===o?u:t},u}var Li=Math.cos,Di=Math.sin,Ui=Math.PI,qi=Ui/2,Oi=2*Ui,Yi=Math.max;var Bi=Array.prototype.slice;function Fi(t){return function(){return t}}var Ii=Math.PI,Hi=2*Ii,ji=Hi-1e-6;function Xi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Gi(){return new Xi}function Vi(t){return t.source}function $i(t){return t.target}function Wi(t){return t.radius}function Zi(t){return t.startAngle}function Qi(t){return t.endAngle}Xi.prototype=Gi.prototype={constructor:Xi,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,u=e-t,f=r-n,c=o-t,s=a-n,l=c*c+s*s;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>1e-6)if(Math.abs(s*u-f*c)>1e-6&&i){var h=e-o,d=r-a,p=u*u+f*f,v=h*h+d*d,g=Math.sqrt(p),y=Math.sqrt(l),_=i*Math.tan((Ii-Math.acos((p+l-v)/(2*g*y)))/2),b=_/y,m=_/g;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(n+b*s)),this._+="A"+i+","+i+",0,0,"+ +(s*h>c*d)+","+(this._x1=t+m*u)+","+(this._y1=n+m*f)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n;var a=(e=+e)*Math.cos(r),u=e*Math.sin(r),f=t+a,c=n+u,s=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+f+","+c:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+f+","+c),e&&(l<0&&(l=l%Hi+Hi),l>ji?this._+="A"+e+","+e+",0,1,"+s+","+(t-a)+","+(n-u)+"A"+e+","+e+",0,1,"+s+","+(this._x1=f)+","+(this._y1=c):l>1e-6&&(this._+="A"+e+","+e+",0,"+ +(l>=Ii)+","+s+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};function Ji(){}function Ki(t,n){var e=new Ji;if(t instanceof Ji)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}function to(){return{}}function no(t,n,e){t[n]=e}function eo(){return Ki()}function ro(t,n,e){t.set(n,e)}function io(){}Ji.prototype=Ki.prototype={constructor:Ji,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var oo=Ki.prototype;function ao(t,n){var e=new io;if(t instanceof io)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}io.prototype=ao.prototype={constructor:io,has:oo.has,add:function(t){return this["$"+(t+="")]=t,this},remove:oo.remove,clear:oo.clear,values:oo.keys,size:oo.size,empty:oo.empty,each:oo.each};var uo=Array.prototype.slice;function fo(t,n){return t-n}function co(t){return function(){return t}}function so(t,n){for(var e,r=-1,i=n.length;++r<i;)if(e=lo(t,n[r]))return e;return 0}function lo(t,n){for(var e=n[0],r=n[1],i=-1,o=0,a=t.length,u=a-1;o<a;u=o++){var f=t[o],c=f[0],s=f[1],l=t[u],h=l[0],d=l[1];if(ho(f,l,n))return 0;s>r!=d>r&&e<(h-c)*(r-s)/(d-s)+c&&(i=-i)}return i}function ho(t,n,e){var r,i,o,a;return function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])}(t,n,e)&&(i=t[r=+(t[0]===n[0])],o=e[r],a=n[r],i<=o&&o<=a||a<=o&&o<=i)}function po(){}var vo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function go(){var t=1,n=1,e=M,r=u;function i(t){var n=e(t);if(Array.isArray(n))n=n.slice().sort(fo);else{var r=s(t),i=r[0],a=r[1];n=w(i,a,n),n=g(Math.floor(i/n)*n,Math.floor(a/n)*n,n)}return n.map(function(n){return o(t,n)})}function o(e,i){var o=[],u=[];return function(e,r,i){var o,u,f,c,s,l,h=new Array,d=new Array;o=u=-1,c=e[0]>=r,vo[c<<1].forEach(p);for(;++o<t-1;)f=c,c=e[o+1]>=r,vo[f|c<<1].forEach(p);vo[c<<0].forEach(p);for(;++u<n-1;){for(o=-1,c=e[u*t+t]>=r,s=e[u*t]>=r,vo[c<<1|s<<2].forEach(p);++o<t-1;)f=c,c=e[u*t+t+o+1]>=r,l=s,s=e[u*t+o+1]>=r,vo[f|c<<1|s<<2|l<<3].forEach(p);vo[c|s<<3].forEach(p)}o=-1,s=e[u*t]>=r,vo[s<<2].forEach(p);for(;++o<t-1;)l=s,s=e[u*t+o+1]>=r,vo[s<<2|l<<3].forEach(p);function p(t){var n,e,r=[t[0][0]+o,t[0][1]+u],f=[t[1][0]+o,t[1][1]+u],c=a(r),s=a(f);(n=d[c])?(e=h[s])?(delete d[n.end],delete h[e.start],n===e?(n.ring.push(f),i(n.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[n.end],n.ring.push(f),d[n.end=s]=n):(n=h[s])?(e=d[c])?(delete h[n.start],delete d[e.end],n===e?(n.ring.push(f),i(n.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[n.start],n.ring.unshift(r),h[n.start=c]=n):h[c]=d[s]={start:c,end:s,ring:[r,f]}}vo[s<<3].forEach(p)}(e,i,function(t){r(t,e,i),function(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}(t)>0?o.push([t]):u.push(t)}),u.forEach(function(t){for(var n,e=0,r=o.length;e<r;++e)if(-1!==so((n=o[e])[0],t))return void n.push(t)}),{type:"MultiPolygon",value:i,coordinates:o}}function a(n){return 2*n[0]+n[1]*(t+1)*4}function u(e,r,i){e.forEach(function(e){var o,a=e[0],u=e[1],f=0|a,c=0|u,s=r[c*t+f];a>0&&a<t&&f===a&&(o=r[c*t+f-1],e[0]=a+(i-o)/(s-o)-.5),u>0&&u<n&&c===u&&(o=r[(c-1)*t+f],e[1]=u+(i-o)/(s-o)-.5)})}return i.contour=o,i.size=function(e){if(!arguments.length)return[t,n];var r=Math.ceil(e[0]),o=Math.ceil(e[1]);if(!(r>0&&o>0))throw new Error("invalid size");return t=r,n=o,i},i.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?co(uo.call(t)):co(t),i):e},i.smooth=function(t){return arguments.length?(r=t?u:po,i):r===u},i}function yo(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<i;++a)for(var u=0,f=0;u<r+e;++u)u<r&&(f+=t.data[u+a*r]),u>=e&&(u>=o&&(f-=t.data[u-o+a*r]),n.data[u-e+a*r]=f/Math.min(u+1,r-1+o-u,o))}function _o(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<r;++a)for(var u=0,f=0;u<i+e;++u)u<i&&(f+=t.data[a+u*r]),u>=e&&(u>=o&&(f-=t.data[a+(u-o)*r]),n.data[a+(u-e)*r]=f/Math.min(u+1,i-1+o-u,o))}function bo(t){return t[0]}function mo(t){return t[1]}function xo(){return 1}var wo={},Mo={},Ao=34,To=10,No=13;function So(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function Eo(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,u=0,f=o<=0,c=!1;function s(){if(f)return Mo;if(c)return c=!1,wo;var n,r,i=a;if(t.charCodeAt(i)===Ao){for(;a++<o&&t.charCodeAt(a)!==Ao||t.charCodeAt(++a)===Ao;);return(n=a)>=o?f=!0:(r=t.charCodeAt(a++))===To?c=!0:r===No&&(c=!0,t.charCodeAt(a)===To&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(n=a++))===To)c=!0;else if(r===No)c=!0,t.charCodeAt(a)===To&&++a;else if(r!==e)continue;return t.slice(i,n)}return f=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===To&&--o,t.charCodeAt(o-1)===No&&--o;(r=s())!==Mo;){for(var l=[];r!==wo&&r!==Mo;)l.push(r),r=s();n&&null==(l=n(l,u++))||i.push(l)}return i}function i(n){return n.map(o).join(t)}function o(t){return null==t?"":n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=So(t);return function(r,i){return n(e(r),i,t)}}(t,n):So(t)});return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=function(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}(n)),[e.map(o).join(t)].concat(n.map(function(n){return e.map(function(t){return o(n[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}}var ko=Eo(","),Co=ko.parse,Po=ko.parseRows,zo=ko.format,Ro=ko.formatRows,Lo=Eo("\t"),Do=Lo.parse,Uo=Lo.parseRows,qo=Lo.format,Oo=Lo.formatRows;function Yo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Bo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Fo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Io(t,n){return fetch(t,n).then(Fo)}function Ho(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),Io(n,e).then(function(n){return t(n,r)})}}var jo=Ho(Co),Xo=Ho(Do);function Go(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function Vo(t){return function(n,e){return Io(n,e).then(function(n){return(new DOMParser).parseFromString(n,t)})}}var $o=Vo("application/xml"),Wo=Vo("text/html"),Zo=Vo("image/svg+xml");function Qo(t){return function(){return t}}function Jo(){return 1e-6*(Math.random()-.5)}function Ko(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,f,c,s,l,h,d=t._root,p={data:r},v=t._x0,g=t._y0,y=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=n>=(o=(v+y)/2))?v=o:y=o,(s=e>=(a=(g+_)/2))?g=a:_=a,i=d,!(d=d[l=s<<1|c]))return i[l]=p,t;if(u=+t._x.call(null,d.data),f=+t._y.call(null,d.data),n===u&&e===f)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(c=n>=(o=(v+y)/2))?v=o:y=o,(s=e>=(a=(g+_)/2))?g=a:_=a}while((l=s<<1|c)==(h=(f>=a)<<1|u>=o));return i[h]=d,i[l]=p,t}function ta(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function na(t){return t[0]}function ea(t){return t[1]}function ra(t,n,e){var r=new ia(null==n?na:n,null==e?ea:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function ia(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function oa(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var aa=ra.prototype=ia.prototype;function ua(t){return t.x+t.vx}function fa(t){return t.y+t.vy}function ca(t){return t.index}function sa(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function la(t){return t.x}function ha(t){return t.y}aa.copy=function(){var t,n,e=new ia(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=oa(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=oa(n));return e},aa.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return Ko(this.cover(n,e),n,e,t)},aa.addAll=function(t){var n,e,r,i,o=t.length,a=new Array(o),u=new Array(o),f=1/0,c=1/0,s=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=r,u[e]=i,r<f&&(f=r),r>s&&(s=r),i<c&&(c=i),i>l&&(l=i));for(s<f&&(f=this._x0,s=this._x1),l<c&&(c=this._y0,l=this._y1),this.cover(f,c).cover(s,l),e=0;e<o;++e)Ko(this,a[e],u[e],t[e]);return this},aa.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var a,u,f=i-e,c=this._root;switch(u=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{(a=new Array(4))[u]=c,c=a}while(o=r+(f*=2),t>(i=e+f)||n>o);break;case 1:do{(a=new Array(4))[u]=c,c=a}while(o=r+(f*=2),(e=i-f)>t||n>o);break;case 2:do{(a=new Array(4))[u]=c,c=a}while(r=o-(f*=2),t>(i=e+f)||r>n);break;case 3:do{(a=new Array(4))[u]=c,c=a}while(r=o-(f*=2),(e=i-f)>t||r>n)}this._root&&this._root.length&&(this._root=c)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},aa.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},aa.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},aa.find=function(t,n,e){var r,i,o,a,u,f,c,s=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new ta(v,s,l,h,d)),null==e?e=1/0:(s=t-e,l=n-e,h=t+e,d=n+e,e*=e);f=p.pop();)if(!(!(v=f.node)||(i=f.x0)>h||(o=f.y0)>d||(a=f.x1)<s||(u=f.y1)<l))if(v.length){var g=(i+a)/2,y=(o+u)/2;p.push(new ta(v[3],g,y,a,u),new ta(v[2],i,y,g,u),new ta(v[1],g,o,a,y),new ta(v[0],i,o,g,y)),(c=(n>=y)<<1|t>=g)&&(f=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=f)}else{var _=t-+this._x.call(null,v.data),b=n-+this._y.call(null,v.data),m=_*_+b*b;if(m<e){var x=Math.sqrt(e=m);s=t-x,l=n-x,h=t+x,d=n+x,r=v.data}}return r},aa.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,f,c,s,l,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(u=(p+g)/2))?p=u:g=u,(s=a>=(f=(v+y)/2))?v=f:y=f,n=d,!(d=d[l=s<<1|c]))return this;if(!d.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)},aa.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},aa.root=function(){return this._root},aa.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},aa.visit=function(t){var n,e,r,i,o,a,u=[],f=this._root;for(f&&u.push(new ta(f,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(f=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&f.length){var c=(r+o)/2,s=(i+a)/2;(e=f[3])&&u.push(new ta(e,c,s,o,a)),(e=f[2])&&u.push(new ta(e,r,s,c,a)),(e=f[1])&&u.push(new ta(e,c,i,o,s)),(e=f[0])&&u.push(new ta(e,r,i,c,s))}return this},aa.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new ta(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,a=n.x0,u=n.y0,f=n.x1,c=n.y1,s=(a+f)/2,l=(u+c)/2;(o=i[0])&&e.push(new ta(o,a,u,s,l)),(o=i[1])&&e.push(new ta(o,s,u,f,l)),(o=i[2])&&e.push(new ta(o,a,l,s,c)),(o=i[3])&&e.push(new ta(o,s,l,f,c))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},aa.x=function(t){return arguments.length?(this._x=t,this):this._x},aa.y=function(t){return arguments.length?(this._y=t,this):this._y};var da=10,pa=Math.PI*(3-Math.sqrt(5));function va(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function ga(t){return(t=va(Math.abs(t)))?t[1]:NaN}var ya,_a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ba(t){return new ma(t)}function ma(t){if(!(n=_a.exec(t)))throw new Error("invalid format: "+t);var n;this.fill=n[1]||" ",this.align=n[2]||">",this.sign=n[3]||"-",this.symbol=n[4]||"",this.zero=!!n[5],this.width=n[6]&&+n[6],this.comma=!!n[7],this.precision=n[8]&&+n[8].slice(1),this.trim=!!n[9],this.type=n[10]||""}function xa(t,n){var e=va(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ba.prototype=ma.prototype,ma.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var wa={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return xa(100*t,n)},r:xa,s:function(t,n){var e=va(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(ya=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+va(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Ma(t){return t}var Aa,Ta=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Na(t){var n,e,r=t.grouping&&t.thousands?(n=t.grouping,e=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,u=n[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),o.push(t.substring(i-=u,i+u)),!((f+=u+1)>r));)u=n[a=(a+1)%n.length];return o.reverse().join(e)}):Ma,i=t.currency,o=t.decimal,a=t.numerals?function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}}(t.numerals):Ma,u=t.percent||"%";function f(t){var n=(t=ba(t)).fill,e=t.align,f=t.sign,c=t.symbol,s=t.zero,l=t.width,h=t.comma,d=t.precision,p=t.trim,v=t.type;"n"===v?(h=!0,v="g"):wa[v]||(null==d&&(d=12),p=!0,v="g"),(s||"0"===n&&"="===e)&&(s=!0,n="0",e="=");var g="$"===c?i[0]:"#"===c&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",y="$"===c?i[1]:/[%p]/.test(v)?u:"",_=wa[v],b=/[defgprs%]/.test(v);function m(t){var i,u,c,m=g,x=y;if("c"===v)x=_(t)+x,t="";else{var w=(t=+t)<0;if(t=_(Math.abs(t),d),p&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),w&&0==+t&&(w=!1),m=(w?"("===f?f:"-":"-"===f||"("===f?"":f)+m,x=("s"===v?Ta[8+ya/3]:"")+x+(w&&"("===f?")":""),b)for(i=-1,u=t.length;++i<u;)if(48>(c=t.charCodeAt(i))||c>57){x=(46===c?o+t.slice(i+1):t.slice(i))+x,t=t.slice(0,i);break}}h&&!s&&(t=r(t,1/0));var M=m.length+t.length+x.length,A=M<l?new Array(l-M+1).join(n):"";switch(h&&s&&(t=r(A+t,A.length?l-x.length:1/0),A=""),e){case"<":t=m+t+x+A;break;case"=":t=m+A+t+x;break;case"^":t=A.slice(0,M=A.length>>1)+m+t+x+A.slice(M);break;default:t=A+m+t+x}return a(t)}return d=null==d?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),m.toString=function(){return t+""},m}return{format:f,formatPrefix:function(t,n){var e=f(((t=ba(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ga(n)/3))),i=Math.pow(10,-r),o=Ta[8+r/3];return function(t){return e(i*t)+o}}}}function Sa(n){return Aa=Na(n),t.format=Aa.format,t.formatPrefix=Aa.formatPrefix,Aa}function Ea(t){return Math.max(0,-ga(Math.abs(t)))}function ka(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ga(n)/3)))-ga(Math.abs(t)))}function Ca(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,ga(n)-ga(t))+1}function Pa(){return new za}function za(){this.reset()}Sa({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),za.prototype={constructor:za,reset:function(){this.s=this.t=0},add:function(t){La(Ra,t,this.t),La(this,Ra.s,this.s),this.s?this.t+=Ra.t:this.s=Ra.t},valueOf:function(){return this.s}};var Ra=new za;function La(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var Da=1e-6,Ua=1e-12,qa=Math.PI,Oa=qa/2,Ya=qa/4,Ba=2*qa,Fa=180/qa,Ia=qa/180,Ha=Math.abs,ja=Math.atan,Xa=Math.atan2,Ga=Math.cos,Va=Math.ceil,$a=Math.exp,Wa=Math.log,Za=Math.pow,Qa=Math.sin,Ja=Math.sign||function(t){return t>0?1:t<0?-1:0},Ka=Math.sqrt,tu=Math.tan;function nu(t){return t>1?0:t<-1?qa:Math.acos(t)}function eu(t){return t>1?Oa:t<-1?-Oa:Math.asin(t)}function ru(t){return(t=Qa(t/2))*t}function iu(){}function ou(t,n){t&&uu.hasOwnProperty(t.type)&&uu[t.type](t,n)}var au={Feature:function(t,n){ou(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)ou(e[r].geometry,n)}},uu={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){fu(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)fu(e[r],n,0)},Polygon:function(t,n){cu(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)cu(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)ou(e[r],n)}};function fu(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function cu(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)fu(t[e],n,1);n.polygonEnd()}function su(t,n){t&&au.hasOwnProperty(t.type)?au[t.type](t,n):ou(t,n)}var lu,hu,du,pu,vu,gu=Pa(),yu=Pa(),_u={point:iu,lineStart:iu,lineEnd:iu,polygonStart:function(){gu.reset(),_u.lineStart=bu,_u.lineEnd=mu},polygonEnd:function(){var t=+gu;yu.add(t<0?Ba+t:t),this.lineStart=this.lineEnd=this.point=iu},sphere:function(){yu.add(Ba)}};function bu(){_u.point=xu}function mu(){wu(lu,hu)}function xu(t,n){_u.point=wu,lu=t,hu=n,du=t*=Ia,pu=Ga(n=(n*=Ia)/2+Ya),vu=Qa(n)}function wu(t,n){var e=(t*=Ia)-du,r=e>=0?1:-1,i=r*e,o=Ga(n=(n*=Ia)/2+Ya),a=Qa(n),u=vu*a,f=pu*o+u*Ga(i),c=u*r*Qa(i);gu.add(Xa(c,f)),du=t,pu=o,vu=a}function Mu(t){return[Xa(t[1],t[0]),eu(t[2])]}function Au(t){var n=t[0],e=t[1],r=Ga(e);return[r*Ga(n),r*Qa(n),Qa(e)]}function Tu(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Nu(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Su(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Eu(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function ku(t){var n=Ka(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Cu,Pu,zu,Ru,Lu,Du,Uu,qu,Ou,Yu,Bu,Fu,Iu,Hu,ju,Xu,Gu,Vu,$u,Wu,Zu,Qu,Ju,Ku,tf,nf,ef=Pa(),rf={point:of,lineStart:uf,lineEnd:ff,polygonStart:function(){rf.point=cf,rf.lineStart=sf,rf.lineEnd=lf,ef.reset(),_u.polygonStart()},polygonEnd:function(){_u.polygonEnd(),rf.point=of,rf.lineStart=uf,rf.lineEnd=ff,gu<0?(Cu=-(zu=180),Pu=-(Ru=90)):ef>Da?Ru=90:ef<-Da&&(Pu=-90),Yu[0]=Cu,Yu[1]=zu}};function of(t,n){Ou.push(Yu=[Cu=t,zu=t]),n<Pu&&(Pu=n),n>Ru&&(Ru=n)}function af(t,n){var e=Au([t*Ia,n*Ia]);if(qu){var r=Nu(qu,e),i=Nu([r[1],-r[0],0],r);ku(i),i=Mu(i);var o,a=t-Lu,u=a>0?1:-1,f=i[0]*Fa*u,c=Ha(a)>180;c^(u*Lu<f&&f<u*t)?(o=i[1]*Fa)>Ru&&(Ru=o):c^(u*Lu<(f=(f+360)%360-180)&&f<u*t)?(o=-i[1]*Fa)<Pu&&(Pu=o):(n<Pu&&(Pu=n),n>Ru&&(Ru=n)),c?t<Lu?hf(Cu,t)>hf(Cu,zu)&&(zu=t):hf(t,zu)>hf(Cu,zu)&&(Cu=t):zu>=Cu?(t<Cu&&(Cu=t),t>zu&&(zu=t)):t>Lu?hf(Cu,t)>hf(Cu,zu)&&(zu=t):hf(t,zu)>hf(Cu,zu)&&(Cu=t)}else Ou.push(Yu=[Cu=t,zu=t]);n<Pu&&(Pu=n),n>Ru&&(Ru=n),qu=e,Lu=t}function uf(){rf.point=af}function ff(){Yu[0]=Cu,Yu[1]=zu,rf.point=of,qu=null}function cf(t,n){if(qu){var e=t-Lu;ef.add(Ha(e)>180?e+(e>0?360:-360):e)}else Du=t,Uu=n;_u.point(t,n),af(t,n)}function sf(){_u.lineStart()}function lf(){cf(Du,Uu),_u.lineEnd(),Ha(ef)>Da&&(Cu=-(zu=180)),Yu[0]=Cu,Yu[1]=zu,qu=null}function hf(t,n){return(n-=t)<0?n+360:n}function df(t,n){return t[0]-n[0]}function pf(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var vf={sphere:iu,point:gf,lineStart:_f,lineEnd:xf,polygonStart:function(){vf.lineStart=wf,vf.lineEnd=Mf},polygonEnd:function(){vf.lineStart=_f,vf.lineEnd=xf}};function gf(t,n){t*=Ia;var e=Ga(n*=Ia);yf(e*Ga(t),e*Qa(t),Qa(n))}function yf(t,n,e){Iu+=(t-Iu)/++Bu,Hu+=(n-Hu)/Bu,ju+=(e-ju)/Bu}function _f(){vf.point=bf}function bf(t,n){t*=Ia;var e=Ga(n*=Ia);Ku=e*Ga(t),tf=e*Qa(t),nf=Qa(n),vf.point=mf,yf(Ku,tf,nf)}function mf(t,n){t*=Ia;var e=Ga(n*=Ia),r=e*Ga(t),i=e*Qa(t),o=Qa(n),a=Xa(Ka((a=tf*o-nf*i)*a+(a=nf*r-Ku*o)*a+(a=Ku*i-tf*r)*a),Ku*r+tf*i+nf*o);Fu+=a,Xu+=a*(Ku+(Ku=r)),Gu+=a*(tf+(tf=i)),Vu+=a*(nf+(nf=o)),yf(Ku,tf,nf)}function xf(){vf.point=gf}function wf(){vf.point=Af}function Mf(){Tf(Qu,Ju),vf.point=gf}function Af(t,n){Qu=t,Ju=n,t*=Ia,n*=Ia,vf.point=Tf;var e=Ga(n);Ku=e*Ga(t),tf=e*Qa(t),nf=Qa(n),yf(Ku,tf,nf)}function Tf(t,n){t*=Ia;var e=Ga(n*=Ia),r=e*Ga(t),i=e*Qa(t),o=Qa(n),a=tf*o-nf*i,u=nf*r-Ku*o,f=Ku*i-tf*r,c=Ka(a*a+u*u+f*f),s=eu(c),l=c&&-s/c;$u+=l*a,Wu+=l*u,Zu+=l*f,Fu+=s,Xu+=s*(Ku+(Ku=r)),Gu+=s*(tf+(tf=i)),Vu+=s*(nf+(nf=o)),yf(Ku,tf,nf)}function Nf(t){return function(){return t}}function Sf(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Ef(t,n){return[t>qa?t-Ba:t<-qa?t+Ba:t,n]}function kf(t,n,e){return(t%=Ba)?n||e?Sf(Pf(t),zf(n,e)):Pf(t):n||e?zf(n,e):Ef}function Cf(t){return function(n,e){return[(n+=t)>qa?n-Ba:n<-qa?n+Ba:n,e]}}function Pf(t){var n=Cf(t);return n.invert=Cf(-t),n}function zf(t,n){var e=Ga(t),r=Qa(t),i=Ga(n),o=Qa(n);function a(t,n){var a=Ga(n),u=Ga(t)*a,f=Qa(t)*a,c=Qa(n),s=c*e+u*r;return[Xa(f*i-s*o,u*e-c*r),eu(s*i+f*o)]}return a.invert=function(t,n){var a=Ga(n),u=Ga(t)*a,f=Qa(t)*a,c=Qa(n),s=c*i-f*o;return[Xa(f*i+c*o,u*e+s*r),eu(s*e-u*r)]},a}function Rf(t){function n(n){return(n=t(n[0]*Ia,n[1]*Ia))[0]*=Fa,n[1]*=Fa,n}return t=kf(t[0]*Ia,t[1]*Ia,t.length>2?t[2]*Ia:0),n.invert=function(n){return(n=t.invert(n[0]*Ia,n[1]*Ia))[0]*=Fa,n[1]*=Fa,n},n}function Lf(t,n,e,r,i,o){if(e){var a=Ga(n),u=Qa(n),f=r*e;null==i?(i=n+r*Ba,o=n-f/2):(i=Df(a,i),o=Df(a,o),(r>0?i<o:i>o)&&(i+=r*Ba));for(var c,s=i;r>0?s>o:s<o;s-=f)c=Mu([a,-u*Ga(s),-u*Qa(s)]),t.point(c[0],c[1])}}function Df(t,n){(n=Au(n))[0]-=t,ku(n);var e=nu(-n[1]);return((-n[2]<0?-e:e)+Ba-Da)%Ba}function Uf(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:iu,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function qf(t,n){return Ha(t[0]-n[0])<Da&&Ha(t[1]-n[1])<Da}function Of(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Yf(t,n,e,r,i){var o,a,u=[],f=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(qf(r,a)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(e=new Of(r,t,null,!0)),f.push(e.o=new Of(r,null,e,!1)),u.push(e=new Of(a,t,null,!1)),f.push(e.o=new Of(a,null,e,!0))}}),u.length){for(f.sort(n),Bf(u),Bf(f),o=0,a=f.length;o<a;++o)f[o].e=e=!e;for(var c,s,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((s=c[o])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((s=c[o])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function Bf(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}Ef.invert=Ef;var Ff=Pa();function If(t,n){var e=n[0],r=n[1],i=Qa(r),o=[Qa(e),-Ga(e),0],a=0,u=0;Ff.reset(),1===i?r=Oa+Da:-1===i&&(r=-Oa-Da);for(var f=0,c=t.length;f<c;++f)if(l=(s=t[f]).length)for(var s,l,h=s[l-1],d=h[0],p=h[1]/2+Ya,v=Qa(p),g=Ga(p),y=0;y<l;++y,d=b,v=x,g=w,h=_){var _=s[y],b=_[0],m=_[1]/2+Ya,x=Qa(m),w=Ga(m),M=b-d,A=M>=0?1:-1,T=A*M,N=T>qa,S=v*x;if(Ff.add(Xa(S*A*Qa(T),g*w+S*Ga(T))),a+=N?M+A*Ba:M,N^d>=e^b>=e){var E=Nu(Au(h),Au(_));ku(E);var k=Nu(o,E);ku(k);var C=(N^M>=0?-1:1)*eu(k[2]);(r>C||r===C&&(E[0]||E[1]))&&(u+=N^M>=0?1:-1)}}return(a<-Da||a<Da&&Ff<-Da)^1&u}function Hf(t,n,e,r){return function(i){var o,a,u,f=n(i),c=Uf(),s=n(c),l=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,a=N(a);var t=If(o,r);a.length?(l||(i.polygonStart(),l=!0),Yf(a,Xf,t,e,i)):t&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){f.point(t,n)}function v(){h.point=p,f.lineStart()}function g(){h.point=d,f.lineEnd()}function y(t,n){u.push([t,n]),s.point(t,n)}function _(){s.lineStart(),u=[]}function b(){y(u[0][0],u[0][1]),s.lineEnd();var t,n,e,r,f=s.clean(),h=c.result(),d=h.length;if(u.pop(),o.push(u),u=null,d)if(1&f){if((n=(e=h[0]).length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&f&&h.push(h.pop().concat(h.shift())),a.push(h.filter(jf))}return h}}function jf(t){return t.length>1}function Xf(t,n){return((t=t.x)[0]<0?t[1]-Oa-Da:Oa-t[1])-((n=n.x)[0]<0?n[1]-Oa-Da:Oa-n[1])}var Gf=Hf(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?qa:-qa,f=Ha(o-e);Ha(f-qa)<Da?(t.point(e,r=(r+a)/2>0?Oa:-Oa),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&f>=qa&&(Ha(e-i)<Da&&(e-=i*Da),Ha(o-u)<Da&&(o-=u*Da),r=function(t,n,e,r){var i,o,a=Qa(t-e);return Ha(a)>Da?ja((Qa(n)*(o=Ga(r))*Qa(e)-Qa(r)*(i=Ga(n))*Qa(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*Oa,r.point(-qa,i),r.point(0,i),r.point(qa,i),r.point(qa,0),r.point(qa,-i),r.point(0,-i),r.point(-qa,-i),r.point(-qa,0),r.point(-qa,i);else if(Ha(t[0]-n[0])>Da){var o=t[0]<n[0]?qa:-qa;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-qa,-Oa]);function Vf(t){var n=Ga(t),e=6*Ia,r=n>0,i=Ha(n)>Da;function o(t,e){return Ga(t)*Ga(e)>n}function a(t,e,r){var i=[1,0,0],o=Nu(Au(t),Au(e)),a=Tu(o,o),u=o[0],f=a-u*u;if(!f)return!r&&t;var c=n*a/f,s=-n*u/f,l=Nu(i,o),h=Eu(i,c);Su(h,Eu(o,s));var d=l,p=Tu(h,d),v=Tu(d,d),g=p*p-v*(Tu(h,h)-1);if(!(g<0)){var y=Ka(g),_=Eu(d,(-p-y)/v);if(Su(_,h),_=Mu(_),!r)return _;var b,m=t[0],x=e[0],w=t[1],M=e[1];x<m&&(b=m,m=x,x=b);var A=x-m,T=Ha(A-qa)<Da;if(!T&&M<w&&(b=w,w=M,M=b),T||A<Da?T?w+M>0^_[1]<(Ha(_[0]-m)<Da?w:M):w<=_[1]&&_[1]<=M:A>qa^(m<=_[0]&&_[0]<=x)){var N=Eu(d,(-p+y)/v);return Su(N,h),[_,Mu(N)]}}}function u(n,e){var i=r?t:qa-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return Hf(o,function(t){var n,e,f,c,s;return{lineStart:function(){c=f=!1,s=1},point:function(l,h){var d,p=[l,h],v=o(l,h),g=r?v?0:u(l,h):v?u(l+(l<0?qa:-qa),h):0;if(!n&&(c=f=v)&&t.lineStart(),v!==f&&(!(d=a(n,p))||qf(n,d)||qf(p,d))&&(p[0]+=Da,p[1]+=Da,v=o(p[0],p[1])),v!==f)s=0,v?(t.lineStart(),d=a(p,n),t.point(d[0],d[1])):(d=a(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(i&&n&&r^v){var y;g&e||!(y=a(p,n,!0))||(s=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||n&&qf(n,p)||t.point(p[0],p[1]),n=p,f=v,e=g},lineEnd:function(){f&&t.lineEnd(),n=null},clean:function(){return s|(c&&f)<<1}}},function(n,r,i,o){Lf(o,t,e,i,n,r)},r?[0,-t]:[-qa,t-qa])}var $f=1e9,Wf=-$f;function Zf(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,c){var s=0,l=0;if(null==i||(s=a(i,u))!==(l=a(o,u))||f(i,o)<0^u>0)do{c.point(0===s||3===s?t:e,s>1?r:n)}while((s=(s+u+4)%4)!==l);else c.point(o[0],o[1])}function a(r,i){return Ha(r[0]-t)<Da?i>0?0:3:Ha(r[0]-e)<Da?i>0?2:1:Ha(r[1]-n)<Da?i>0?1:0:i>0?3:2}function u(t,n){return f(t.x,n.x)}function f(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var f,c,s,l,h,d,p,v,g,y,_,b=a,m=Uf(),x={point:w,lineStart:function(){x.point=M,c&&c.push(s=[]);y=!0,g=!1,p=v=NaN},lineEnd:function(){f&&(M(l,h),d&&g&&m.rejoin(),f.push(m.result()));x.point=w,g&&b.lineEnd()},polygonStart:function(){b=m,f=[],c=[],_=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=c.length;e<i;++e)for(var o,a,u=c[e],f=1,s=u.length,l=u[0],h=l[0],d=l[1];f<s;++f)o=h,a=d,l=u[f],h=l[0],d=l[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++n:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--n;return n}(),e=_&&n,i=(f=N(f)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Yf(f,u,n,o,a),a.polygonEnd());b=a,f=c=s=null}};function w(t,n){i(t,n)&&b.point(t,n)}function M(o,a){var u=i(o,a);if(c&&s.push([o,a]),y)l=o,h=a,d=u,y=!1,u&&(b.lineStart(),b.point(o,a));else if(u&&g)b.point(o,a);else{var f=[p=Math.max(Wf,Math.min($f,p)),v=Math.max(Wf,Math.min($f,v))],m=[o=Math.max(Wf,Math.min($f,o)),a=Math.max(Wf,Math.min($f,a))];!function(t,n,e,r,i,o){var a,u=t[0],f=t[1],c=0,s=1,l=n[0]-u,h=n[1]-f;if(a=e-u,l||!(a>0)){if(a/=l,l<0){if(a<c)return;a<s&&(s=a)}else if(l>0){if(a>s)return;a>c&&(c=a)}if(a=i-u,l||!(a<0)){if(a/=l,l<0){if(a>s)return;a>c&&(c=a)}else if(l>0){if(a<c)return;a<s&&(s=a)}if(a=r-f,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<s&&(s=a)}else if(h>0){if(a>s)return;a>c&&(c=a)}if(a=o-f,h||!(a<0)){if(a/=h,h<0){if(a>s)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<s&&(s=a)}return c>0&&(t[0]=u+c*l,t[1]=f+c*h),s<1&&(n[0]=u+s*l,n[1]=f+s*h),!0}}}}}(f,m,t,n,e,r)?u&&(b.lineStart(),b.point(o,a),_=!1):(g||(b.lineStart(),b.point(f[0],f[1])),b.point(m[0],m[1]),u||b.lineEnd(),_=!1)}p=o,v=a,g=u}return x}}var Qf,Jf,Kf,tc=Pa(),nc={sphere:iu,point:iu,lineStart:function(){nc.point=rc,nc.lineEnd=ec},lineEnd:iu,polygonStart:iu,polygonEnd:iu};function ec(){nc.point=nc.lineEnd=iu}function rc(t,n){Qf=t*=Ia,Jf=Qa(n*=Ia),Kf=Ga(n),nc.point=ic}function ic(t,n){t*=Ia;var e=Qa(n*=Ia),r=Ga(n),i=Ha(t-Qf),o=Ga(i),a=r*Qa(i),u=Kf*e-Jf*r*o,f=Jf*e+Kf*r*o;tc.add(Xa(Ka(a*a+u*u),f)),Qf=t,Jf=e,Kf=r}function oc(t){return tc.reset(),su(t,nc),+tc}var ac=[null,null],uc={type:"LineString",coordinates:ac};function fc(t,n){return ac[0]=t,ac[1]=n,oc(uc)}var cc={Feature:function(t,n){return lc(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(lc(e[r].geometry,n))return!0;return!1}},sc={Sphere:function(){return!0},Point:function(t,n){return hc(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(hc(e[r],n))return!0;return!1},LineString:function(t,n){return dc(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(dc(e[r],n))return!0;return!1},Polygon:function(t,n){return pc(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(pc(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(lc(e[r],n))return!0;return!1}};function lc(t,n){return!(!t||!sc.hasOwnProperty(t.type))&&sc[t.type](t,n)}function hc(t,n){return 0===fc(t,n)}function dc(t,n){var e=fc(t[0],t[1]);return fc(t[0],n)+fc(n,t[1])<=e+Da}function pc(t,n){return!!If(t.map(vc),gc(n))}function vc(t){return(t=t.map(gc)).pop(),t}function gc(t){return[t[0]*Ia,t[1]*Ia]}function yc(t,n,e){var r=g(t,n-Da,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function _c(t,n,e){var r=g(t,n-Da,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function bc(){var t,n,e,r,i,o,a,u,f,c,s,l,h=10,d=h,p=90,v=360,y=2.5;function _(){return{type:"MultiLineString",coordinates:b()}}function b(){return g(Va(r/p)*p,e,p).map(s).concat(g(Va(u/v)*v,a,v).map(l)).concat(g(Va(n/h)*h,t,h).filter(function(t){return Ha(t%p)>Da}).map(f)).concat(g(Va(o/d)*d,i,d).filter(function(t){return Ha(t%v)>Da}).map(c))}return _.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[s(r).concat(l(a).slice(1),s(e).reverse().slice(1),l(u).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),u>a&&(t=u,u=a,a=t),_.precision(y)):[[r,u],[e,a]]},_.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),_.precision(y)):[[n,o],[t,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],_):[p,v]},_.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],_):[h,d]},_.precision=function(h){return arguments.length?(y=+h,f=yc(o,i,90),c=_c(n,t,y),s=yc(u,a,90),l=_c(r,e,y),_):y},_.extentMajor([[-180,-90+Da],[180,90-Da]]).extentMinor([[-180,-80-Da],[180,80+Da]])}function mc(t){return t}var xc,wc,Mc,Ac,Tc=Pa(),Nc=Pa(),Sc={point:iu,lineStart:iu,lineEnd:iu,polygonStart:function(){Sc.lineStart=Ec,Sc.lineEnd=Pc},polygonEnd:function(){Sc.lineStart=Sc.lineEnd=Sc.point=iu,Tc.add(Ha(Nc)),Nc.reset()},result:function(){var t=Tc/2;return Tc.reset(),t}};function Ec(){Sc.point=kc}function kc(t,n){Sc.point=Cc,xc=Mc=t,wc=Ac=n}function Cc(t,n){Nc.add(Ac*t-Mc*n),Mc=t,Ac=n}function Pc(){Cc(xc,wc)}var zc=1/0,Rc=zc,Lc=-zc,Dc=Lc,Uc={point:function(t,n){t<zc&&(zc=t);t>Lc&&(Lc=t);n<Rc&&(Rc=n);n>Dc&&(Dc=n)},lineStart:iu,lineEnd:iu,polygonStart:iu,polygonEnd:iu,result:function(){var t=[[zc,Rc],[Lc,Dc]];return Lc=Dc=-(Rc=zc=1/0),t}};var qc,Oc,Yc,Bc,Fc=0,Ic=0,Hc=0,jc=0,Xc=0,Gc=0,Vc=0,$c=0,Wc=0,Zc={point:Qc,lineStart:Jc,lineEnd:ns,polygonStart:function(){Zc.lineStart=es,Zc.lineEnd=rs},polygonEnd:function(){Zc.point=Qc,Zc.lineStart=Jc,Zc.lineEnd=ns},result:function(){var t=Wc?[Vc/Wc,$c/Wc]:Gc?[jc/Gc,Xc/Gc]:Hc?[Fc/Hc,Ic/Hc]:[NaN,NaN];return Fc=Ic=Hc=jc=Xc=Gc=Vc=$c=Wc=0,t}};function Qc(t,n){Fc+=t,Ic+=n,++Hc}function Jc(){Zc.point=Kc}function Kc(t,n){Zc.point=ts,Qc(Yc=t,Bc=n)}function ts(t,n){var e=t-Yc,r=n-Bc,i=Ka(e*e+r*r);jc+=i*(Yc+t)/2,Xc+=i*(Bc+n)/2,Gc+=i,Qc(Yc=t,Bc=n)}function ns(){Zc.point=Qc}function es(){Zc.point=is}function rs(){os(qc,Oc)}function is(t,n){Zc.point=os,Qc(qc=Yc=t,Oc=Bc=n)}function os(t,n){var e=t-Yc,r=n-Bc,i=Ka(e*e+r*r);jc+=i*(Yc+t)/2,Xc+=i*(Bc+n)/2,Gc+=i,Vc+=(i=Bc*t-Yc*n)*(Yc+t),$c+=i*(Bc+n),Wc+=3*i,Qc(Yc=t,Bc=n)}function as(t){this._context=t}as.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Ba)}},result:iu};var us,fs,cs,ss,ls,hs=Pa(),ds={point:iu,lineStart:function(){ds.point=ps},lineEnd:function(){us&&vs(fs,cs),ds.point=iu},polygonStart:function(){us=!0},polygonEnd:function(){us=null},result:function(){var t=+hs;return hs.reset(),t}};function ps(t,n){ds.point=vs,fs=ss=t,cs=ls=n}function vs(t,n){ss-=t,ls-=n,hs.add(Ka(ss*ss+ls*ls)),ss=t,ls=n}function gs(){this._string=[]}function ys(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function _s(t){return function(n){var e=new bs;for(var r in t)e[r]=t[r];return e.stream=n,e}}function bs(){}function ms(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),su(e,t.stream(Uc)),n(Uc.result()),null!=r&&t.clipExtent(r),t}function xs(t,n,e){return ms(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])},e)}function ws(t,n,e){return xs(t,[[0,0],n],e)}function Ms(t,n,e){return ms(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])},e)}function As(t,n,e){return ms(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])},e)}gs.prototype={_radius:4.5,_circle:ys(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=ys(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},bs.prototype={constructor:bs,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ts=16,Ns=Ga(30*Ia);function Ss(t,n){return+n?function(t,n){function e(r,i,o,a,u,f,c,s,l,h,d,p,v,g){var y=c-r,_=s-i,b=y*y+_*_;if(b>4*n&&v--){var m=a+h,x=u+d,w=f+p,M=Ka(m*m+x*x+w*w),A=eu(w/=M),T=Ha(Ha(w)-1)<Da||Ha(o-l)<Da?(o+l)/2:Xa(x,m),N=t(T,A),S=N[0],E=N[1],k=S-r,C=E-i,P=_*k-y*C;(P*P/b>n||Ha((y*k+_*C)/b-.5)>.3||a*h+u*d+f*p<Ns)&&(e(r,i,o,a,u,f,S,E,T,m/=M,x/=M,w,v,g),g.point(S,E),e(S,E,T,m,x,w,c,s,l,h,d,p,v,g))}}return function(n){var r,i,o,a,u,f,c,s,l,h,d,p,v={point:g,lineStart:y,lineEnd:b,polygonStart:function(){n.polygonStart(),v.lineStart=m},polygonEnd:function(){n.polygonEnd(),v.lineStart=y}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function y(){s=NaN,v.point=_,n.lineStart()}function _(r,i){var o=Au([r,i]),a=t(r,i);e(s,l,c,h,d,p,s=a[0],l=a[1],c=r,h=o[0],d=o[1],p=o[2],Ts,n),n.point(s,l)}function b(){v.point=g,n.lineEnd()}function m(){y(),v.point=x,v.lineEnd=w}function x(t,n){_(r=t,n),i=s,o=l,a=h,u=d,f=p,v.point=_}function w(){e(s,l,c,h,d,p,i,o,r,a,u,f,Ts,n),v.lineEnd=b,b()}return v}}(t,n):function(t){return _s({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var Es=_s({point:function(t,n){this.stream.point(t*Ia,n*Ia)}});function ks(t,n,e,r){var i=Ga(r),o=Qa(r),a=i*t,u=o*t,f=i/t,c=o/t,s=(o*e-i*n)/t,l=(o*n+i*e)/t;function h(t,r){return[a*t-u*r+n,e-u*t-a*r]}return h.invert=function(t,n){return[f*t-c*n+s,l-c*t-f*n]},h}function Cs(t){return Ps(function(){return t})()}function Ps(t){var n,e,r,i,o,a,u,f,c,s,l=150,h=480,d=250,p=0,v=0,g=0,y=0,_=0,b=0,m=null,x=Gf,w=null,M=mc,A=.5;function T(t){return f(t[0]*Ia,t[1]*Ia)}function N(t){return(t=f.invert(t[0],t[1]))&&[t[0]*Fa,t[1]*Fa]}function S(){var t=ks(l,0,0,b).apply(null,n(p,v)),r=(b?ks:function(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r})(l,h-t[0],d-t[1],b);return e=kf(g,y,_),u=Sf(n,r),f=Sf(e,u),a=Ss(u,A),E()}function E(){return c=s=null,T}return T.stream=function(t){return c&&s===t?c:c=Es(function(t){return _s({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(x(a(M(s=t)))))},T.preclip=function(t){return arguments.length?(x=t,m=void 0,E()):x},T.postclip=function(t){return arguments.length?(M=t,w=r=i=o=null,E()):M},T.clipAngle=function(t){return arguments.length?(x=+t?Vf(m=t*Ia):(m=null,Gf),E()):m*Fa},T.clipExtent=function(t){return arguments.length?(M=null==t?(w=r=i=o=null,mc):Zf(w=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),E()):null==w?null:[[w,r],[i,o]]},T.scale=function(t){return arguments.length?(l=+t,S()):l},T.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],S()):[h,d]},T.center=function(t){return arguments.length?(p=t[0]%360*Ia,v=t[1]%360*Ia,S()):[p*Fa,v*Fa]},T.rotate=function(t){return arguments.length?(g=t[0]%360*Ia,y=t[1]%360*Ia,_=t.length>2?t[2]%360*Ia:0,S()):[g*Fa,y*Fa,_*Fa]},T.angle=function(t){return arguments.length?(b=t%360*Ia,S()):b*Fa},T.precision=function(t){return arguments.length?(a=Ss(u,A=t*t),E()):Ka(A)},T.fitExtent=function(t,n){return xs(T,t,n)},T.fitSize=function(t,n){return ws(T,t,n)},T.fitWidth=function(t,n){return Ms(T,t,n)},T.fitHeight=function(t,n){return As(T,t,n)},function(){return n=t.apply(this,arguments),T.invert=n.invert&&N,S()}}function zs(t){var n=0,e=qa/3,r=Ps(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Ia,e=t[1]*Ia):[n*Fa,e*Fa]},i}function Rs(t,n){var e=Qa(t),r=(e+Qa(n))/2;if(Ha(r)<Da)return function(t){var n=Ga(t);function e(t,e){return[t*n,Qa(e)/n]}return e.invert=function(t,e){return[t/n,eu(e*n)]},e}(t);var i=1+e*(2*r-e),o=Ka(i)/r;function a(t,n){var e=Ka(i-2*r*Qa(n))/r;return[e*Qa(t*=r),o-e*Ga(t)]}return a.invert=function(t,n){var e=o-n;return[Xa(t,Ha(e))/r*Ja(e),eu((i-(t*t+e*e)*r*r)/(2*r))]},a}function Ls(){return zs(Rs).scale(155.424).center([0,33.6442])}function Ds(){return Ls().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Us(t){return function(n,e){var r=Ga(n),i=Ga(e),o=t(r*i);return[o*i*Qa(n),o*Qa(e)]}}function qs(t){return function(n,e){var r=Ka(n*n+e*e),i=t(r),o=Qa(i),a=Ga(i);return[Xa(n*o,r*a),eu(r&&e*o/r)]}}var Os=Us(function(t){return Ka(2/(1+t))});Os.invert=qs(function(t){return 2*eu(t/2)});var Ys=Us(function(t){return(t=nu(t))&&t/Qa(t)});function Bs(t,n){return[t,Wa(tu((Oa+n)/2))]}function Fs(t){var n,e,r,i=Cs(t),o=i.center,a=i.scale,u=i.translate,f=i.clipExtent,c=null;function s(){var o=qa*a(),u=i(Rf(i.rotate()).invert([0,0]));return f(null==c?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===Bs?[[Math.max(u[0]-o,c),n],[Math.min(u[0]+o,e),r]]:[[c,Math.max(u[1]-o,n)],[e,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),s()):a()},i.translate=function(t){return arguments.length?(u(t),s()):u()},i.center=function(t){return arguments.length?(o(t),s()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=n=e=r=null:(c=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),s()):null==c?null:[[c,n],[e,r]]},s()}function Is(t){return tu((Oa+t)/2)}function Hs(t,n){var e=Ga(t),r=t===n?Qa(t):Wa(e/Ga(n))/Wa(Is(n)/Is(t)),i=e*Za(Is(t),r)/r;if(!r)return Bs;function o(t,n){i>0?n<-Oa+Da&&(n=-Oa+Da):n>Oa-Da&&(n=Oa-Da);var e=i/Za(Is(n),r);return[e*Qa(r*t),i-e*Ga(r*t)]}return o.invert=function(t,n){var e=i-n,o=Ja(r)*Ka(t*t+e*e);return[Xa(t,Ha(e))/r*Ja(e),2*ja(Za(i/o,1/r))-Oa]},o}function js(t,n){return[t,n]}function Xs(t,n){var e=Ga(t),r=t===n?Qa(t):(e-Ga(n))/(n-t),i=e/r+t;if(Ha(r)<Da)return js;function o(t,n){var e=i-n,o=r*t;return[e*Qa(o),i-e*Ga(o)]}return o.invert=function(t,n){var e=i-n;return[Xa(t,Ha(e))/r*Ja(e),i-Ja(r)*Ka(t*t+e*e)]},o}Ys.invert=qs(function(t){return t}),Bs.invert=function(t,n){return[t,2*ja($a(n))-Oa]},js.invert=js;var Gs=1.340264,Vs=-.081106,$s=893e-6,Ws=.003796,Zs=Ka(3)/2;function Qs(t,n){var e=eu(Zs*Qa(n)),r=e*e,i=r*r*r;return[t*Ga(e)/(Zs*(Gs+3*Vs*r+i*(7*$s+9*Ws*r))),e*(Gs+Vs*r+i*($s+Ws*r))]}function Js(t,n){var e=Ga(n),r=Ga(t)*e;return[e*Qa(t)/r,Qa(n)/r]}function Ks(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?mc:_s({point:function(i,o){this.stream.point(i*t+e,o*n+r)}})}function tl(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function nl(t,n){return[Ga(n)*Qa(t),Qa(n)]}function el(t,n){var e=Ga(n),r=1+Ga(t)*e;return[e*Qa(t)/r,Qa(n)/r]}function rl(t,n){return[Wa(tu((Oa+n)/2)),-t]}function il(t,n){return t.parent===n.parent?1:2}function ol(t,n){return t+n.x}function al(t,n){return Math.max(t,n.y)}function ul(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function fl(t,n){var e,r,i,o,a,u=new hl(t),f=+t.value&&(u.value=t.value),c=[u];for(null==n&&(n=cl);e=c.pop();)if(f&&(e.value=+e.data.value),(i=n(e.data))&&(a=i.length))for(e.children=new Array(a),o=a-1;o>=0;--o)c.push(r=e.children[o]=new hl(i[o])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(ll)}function cl(t){return t.children}function sl(t){t.data=t.data.data}function ll(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function hl(t){this.data=t,this.depth=this.height=0,this.parent=null}Qs.invert=function(t,n){for(var e,r=n,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=e=(r*(Gs+Vs*i+o*($s+Ws*i))-n)/(Gs+3*Vs*i+o*(7*$s+9*Ws*i)))*r)*i*i,!(Ha(e)<Ua));++a);return[Zs*t*(Gs+3*Vs*i+o*(7*$s+9*Ws*i))/Ga(r),eu(Qa(r)/Zs)]},Js.invert=qs(ja),tl.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,a=o*o;r-=e=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-n)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Ha(e)>Da&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},nl.invert=qs(eu),el.invert=qs(function(t){return 2*ja(t)}),rl.invert=function(t,n){return[-n,2*ja($a(t))-Oa]},hl.prototype=fl.prototype={constructor:hl,count:function(){return this.eachAfter(ul)},each:function(t){var n,e,r,i,o=this,a=[o];do{for(n=a.reverse(),a=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)a.push(e[r])}while(a.length);return this},eachAfter:function(t){for(var n,e,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this},sum:function(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})},sort:function(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){var t=[];return this.each(function(n){t.push(n)}),t},leaves:function(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t},links:function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n},copy:function(){return fl(this).eachBefore(sl)}};var dl=Array.prototype.slice;function pl(t){for(var n,e,r=0,i=(t=function(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}(dl.call(t))).length,o=[];r<i;)n=t[r],e&&yl(e,n)?++r:(e=bl(o=vl(o,n)),r=0);return e}function vl(t,n){var e,r;if(_l(n,t))return[n];for(e=0;e<t.length;++e)if(gl(n,t[e])&&_l(ml(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(gl(ml(t[e],t[r]),n)&&gl(ml(t[e],n),t[r])&&gl(ml(t[r],n),t[e])&&_l(xl(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function gl(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function yl(t,n){var e=t.r-n.r+1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function _l(t,n){for(var e=0;e<n.length;++e)if(!yl(t,n[e]))return!1;return!0}function bl(t){switch(t.length){case 1:return{x:(n=t[0]).x,y:n.y,r:n.r};case 2:return ml(t[0],t[1]);case 3:return xl(t[0],t[1],t[2])}var n}function ml(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,a=n.y,u=n.r,f=o-e,c=a-r,s=u-i,l=Math.sqrt(f*f+c*c);return{x:(e+o+f/l*s)/2,y:(r+a+c/l*s)/2,r:(l+i+u)/2}}function xl(t,n,e){var r=t.x,i=t.y,o=t.r,a=n.x,u=n.y,f=n.r,c=e.x,s=e.y,l=e.r,h=r-a,d=r-c,p=i-u,v=i-s,g=f-o,y=l-o,_=r*r+i*i-o*o,b=_-a*a-u*u+f*f,m=_-c*c-s*s+l*l,x=d*p-h*v,w=(p*m-v*b)/(2*x)-r,M=(v*g-p*y)/x,A=(d*b-h*m)/(2*x)-i,T=(h*y-d*g)/x,N=M*M+T*T-1,S=2*(o+w*M+A*T),E=w*w+A*A-o*o,k=-(N?(S+Math.sqrt(S*S-4*N*E))/(2*N):E/S);return{x:r+w+M*k,y:i+A+T*k,r:k}}function wl(t,n,e){var r,i,o,a,u=t.x-n.x,f=t.y-n.y,c=u*u+f*f;c?(i=n.r+e.r,i*=i,a=t.r+e.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),e.x=t.x-r*u-o*f,e.y=t.y-r*f+o*u):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),e.x=n.x+r*u-o*f,e.y=n.y+r*f+o*u)):(e.x=n.x+e.r,e.y=n.y)}function Ml(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Al(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function Tl(t){this._=t,this.next=null,this.previous=null}function Nl(t){if(!(i=t.length))return 0;var n,e,r,i,o,a,u,f,c,s,l;if((n=t[0]).x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;wl(e,n,r=t[2]),n=new Tl(n),e=new Tl(e),r=new Tl(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(u=3;u<i;++u){wl(n._,e._,r=t[u]),r=new Tl(r),f=e.next,c=n.previous,s=e._.r,l=n._.r;do{if(s<=l){if(Ml(f._,r._)){e=f,n.next=e,e.previous=n,--u;continue t}s+=f._.r,f=f.next}else{if(Ml(c._,r._)){(n=c).next=e,e.previous=n,--u;continue t}l+=c._.r,c=c.previous}}while(f!==c.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,o=Al(n);(r=r.next)!==e;)(a=Al(r))<o&&(n=r,o=a);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=pl(n),u=0;u<i;++u)(n=t[u]).x-=r.x,n.y-=r.y;return r.r}function Sl(t){if("function"!=typeof t)throw new Error;return t}function El(){return 0}function kl(t){return function(){return t}}function Cl(t){return Math.sqrt(t.value)}function Pl(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function zl(t,n){return function(e){if(r=e.children){var r,i,o,a=r.length,u=t(e)*n||0;if(u)for(i=0;i<a;++i)r[i].r+=u;if(o=Nl(r),u)for(i=0;i<a;++i)r[i].r-=u;e.r=o+u}}}function Rl(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function Ll(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Dl(t,n,e,r,i){for(var o,a=t.children,u=-1,f=a.length,c=t.value&&(r-n)/t.value;++u<f;)(o=a[u]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*c}var Ul="$",ql={depth:-1},Ol={};function Yl(t){return t.id}function Bl(t){return t.parentId}function Fl(t,n){return t.parent===n.parent?1:2}function Il(t){var n=t.children;return n?n[0]:t.t}function Hl(t){var n=t.children;return n?n[n.length-1]:t.t}function jl(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Xl(t,n,e){return t.a.parent===n.parent?t.a:e}function Gl(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function Vl(t,n,e,r,i){for(var o,a=t.children,u=-1,f=a.length,c=t.value&&(i-e)/t.value;++u<f;)(o=a[u]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*c}Gl.prototype=Object.create(hl.prototype);var $l=(1+Math.sqrt(5))/2;function Wl(t,n,e,r,i,o){for(var a,u,f,c,s,l,h,d,p,v,g,y=[],_=n.children,b=0,m=0,x=_.length,w=n.value;b<x;){f=i-e,c=o-r;do{s=_[m++].value}while(!s&&m<x);for(l=h=s,g=s*s*(v=Math.max(c/f,f/c)/(w*t)),p=Math.max(h/g,g/l);m<x;++m){if(s+=u=_[m].value,u<l&&(l=u),u>h&&(h=u),g=s*s*v,(d=Math.max(h/g,g/l))>p){s-=u;break}p=d}y.push(a={value:s,dice:f<c,children:_.slice(b,m)}),a.dice?Dl(a,e,r,i,w?r+=c*s/w:o):Vl(a,e,r,w?e+=f*s/w:i,o),w-=s,b=m}return y}var Zl=function t(n){function e(t,e,r,i,o){Wl(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}($l);var Ql=function t(n){function e(t,e,r,i,o){if((a=t._squarify)&&a.ratio===n)for(var a,u,f,c,s,l=-1,h=a.length,d=t.value;++l<h;){for(f=(u=a[l]).children,c=u.value=0,s=f.length;c<s;++c)u.value+=f[c].value;u.dice?Dl(u,e,r,i,r+=(o-r)*u.value/d):Vl(u,e,r,e+=(i-e)*u.value/d,o),d-=u.value}else t._squarify=a=Wl(n,t,e,r,i,o),a.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}($l);function Jl(t,n){return t[0]-n[0]||t[1]-n[1]}function Kl(t){for(var n,e,r,i=t.length,o=[0,1],a=2,u=2;u<i;++u){for(;a>1&&(n=t[o[a-2]],e=t[o[a-1]],r=t[u],(e[0]-n[0])*(r[1]-n[1])-(e[1]-n[1])*(r[0]-n[0])<=0);)--a;o[a++]=u}return o.slice(0,a)}function th(){return Math.random()}var nh=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(th),eh=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(th),rh=function t(n){function e(){var t=eh.source(n).apply(this,arguments);return function(){return Math.exp(t())}}return e.source=t,e}(th),ih=function t(n){function e(t){return function(){for(var e=0,r=0;r<t;++r)e+=n();return e}}return e.source=t,e}(th),oh=function t(n){function e(t){var e=ih.source(n)(t);return function(){return e()/t}}return e.source=t,e}(th),ah=function t(n){function e(t){return function(){return-Math.log(1-n())/t}}return e.source=t,e}(th),uh=Array.prototype,fh=uh.map,ch=uh.slice,sh={name:"implicit"};function lh(t){var n=Ki(),e=[],r=sh;function i(i){var o=i+"",a=n.get(o);if(!a){if(r!==sh)return r;n.set(o,a=e.push(i))}return t[(a-1)%t.length]}return t=null==t?[]:ch.call(t),i.domain=function(t){if(!arguments.length)return e.slice();e=[],n=Ki();for(var r,o,a=-1,u=t.length;++a<u;)n.has(o=(r=t[a])+"")||n.set(o,e.push(r));return i},i.range=function(n){return arguments.length?(t=ch.call(n),i):t.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return lh().domain(e).range(t).unknown(r)},i}function hh(){var t,n,e=lh().unknown(void 0),r=e.domain,i=e.range,o=[0,1],a=!1,u=0,f=0,c=.5;function s(){var e=r().length,s=o[1]<o[0],l=o[s-0],h=o[1-s];t=(h-l)/Math.max(1,e-u+2*f),a&&(t=Math.floor(t)),l+=(h-l-t*(e-u))*c,n=t*(1-u),a&&(l=Math.round(l),n=Math.round(n));var d=g(e).map(function(n){return l+t*n});return i(s?d.reverse():d)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),s()):r()},e.range=function(t){return arguments.length?(o=[+t[0],+t[1]],s()):o.slice()},e.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,s()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(a=!!t,s()):a},e.padding=function(t){return arguments.length?(u=f=Math.max(0,Math.min(1,t)),s()):u},e.paddingInner=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s()):u},e.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s()):f},e.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),s()):c},e.copy=function(){return hh().domain(r()).range(o).round(a).paddingInner(u).paddingOuter(f).align(c)},s()}function dh(t){return function(){return t}}function ph(t){return+t}var vh=[0,1];function gh(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:dh(n)}function yh(t,n,e,r){var i=t[0],o=t[1],a=n[0],u=n[1];return o<i?(i=e(o,i),a=r(u,a)):(i=e(i,o),a=r(a,u)),function(t){return a(i(t))}}function _h(t,n,e,r){var o=Math.min(t.length,n.length)-1,a=new Array(o),u=new Array(o),f=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++f<o;)a[f]=e(t[f],t[f+1]),u[f]=r(n[f],n[f+1]);return function(n){var e=i(t,n,1,o)-1;return u[e](a[e](n))}}function bh(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function mh(t,n){var e,r,i,o=vh,a=vh,u=me,f=!1;function c(){return e=Math.min(o.length,a.length)>2?_h:yh,r=i=null,s}function s(n){return(r||(r=e(o,a,f?function(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=n?0:t>=e?1:r(t)}}}(t):t,u)))(+n)}return s.invert=function(t){return(i||(i=e(a,o,gh,f?function(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=0?n:t>=1?e:r(t)}}}(n):n)))(+t)},s.domain=function(t){return arguments.length?(o=fh.call(t,ph),c()):o.slice()},s.range=function(t){return arguments.length?(a=ch.call(t),c()):a.slice()},s.rangeRound=function(t){return a=ch.call(t),u=xe,c()},s.clamp=function(t){return arguments.length?(f=!!t,c()):f},s.interpolate=function(t){return arguments.length?(u=t,c()):u},c()}function xh(n){var e=n.domain;return n.ticks=function(t){var n=e();return m(n[0],n[n.length-1],null==t?10:t)},n.tickFormat=function(n,r){return function(n,e,r){var i,o=n[0],a=n[n.length-1],u=w(o,a,null==e?10:e);switch((r=ba(null==r?",f":r)).type){case"s":var f=Math.max(Math.abs(o),Math.abs(a));return null!=r.precision||isNaN(i=ka(u,f))||(r.precision=i),t.formatPrefix(r,f);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Ca(u,Math.max(Math.abs(o),Math.abs(a))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Ea(u))||(r.precision=i-2*("%"===r.type))}return t.format(r)}(e(),n,r)},n.nice=function(t){null==t&&(t=10);var r,i=e(),o=0,a=i.length-1,u=i[o],f=i[a];return f<u&&(r=u,u=f,f=r,r=o,o=a,a=r),(r=x(u,f,t))>0?r=x(u=Math.floor(u/r)*r,f=Math.ceil(f/r)*r,t):r<0&&(r=x(u=Math.ceil(u*r)/r,f=Math.floor(f*r)/r,t)),r>0?(i[o]=Math.floor(u/r)*r,i[a]=Math.ceil(f/r)*r,e(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[a]=Math.floor(f*r)/r,e(i)),n},n}function wh(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Mh(t,n){return(n=Math.log(n/t))?function(e){return Math.log(e/t)/n}:dh(n)}function Ah(t,n){return t<0?function(e){return-Math.pow(-n,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(n,e)*Math.pow(t,1-e)}}function Th(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Nh(t){return 10===t?Th:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}function Sh(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}function Eh(t){return function(n){return-t(-n)}}function kh(t,n){return t<0?-Math.pow(-t,n):Math.pow(t,n)}function Ch(){var t=1,n=mh(function(n,e){return(e=kh(e,t)-(n=kh(n,t)))?function(r){return(kh(r,t)-n)/e}:dh(e)},function(n,e){return e=kh(e,t)-(n=kh(n,t)),function(r){return kh(n+e*r,1/t)}}),e=n.domain;return n.exponent=function(n){return arguments.length?(t=+n,e(e())):t},n.copy=function(){return bh(n,Ch().exponent(t))},xh(n)}var Ph=new Date,zh=new Date;function Rh(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<r);return u},i.filter=function(e){return Rh(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return Ph.setTime(+n),zh.setTime(+r),t(Ph),t(zh),Math.floor(e(Ph,zh))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}var Lh=Rh(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});Lh.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Rh(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):Lh:null};var Dh=Lh.range,Uh=6e4,qh=6048e5,Oh=Rh(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),Yh=Oh.range,Bh=Rh(function(t){t.setTime(Math.floor(t/Uh)*Uh)},function(t,n){t.setTime(+t+n*Uh)},function(t,n){return(n-t)/Uh},function(t){return t.getMinutes()}),Fh=Bh.range,Ih=Rh(function(t){var n=t.getTimezoneOffset()*Uh%36e5;n<0&&(n+=36e5),t.setTime(36e5*Math.floor((+t-n)/36e5)+n)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),Hh=Ih.range,jh=Rh(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Uh)/864e5},function(t){return t.getDate()-1}),Xh=jh.range;function Gh(t){return Rh(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Uh)/qh})}var Vh=Gh(0),$h=Gh(1),Wh=Gh(2),Zh=Gh(3),Qh=Gh(4),Jh=Gh(5),Kh=Gh(6),td=Vh.range,nd=$h.range,ed=Wh.range,rd=Zh.range,id=Qh.range,od=Jh.range,ad=Kh.range,ud=Rh(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),fd=ud.range,cd=Rh(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});cd.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rh(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};var sd=cd.range,ld=Rh(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*Uh)},function(t,n){return(n-t)/Uh},function(t){return t.getUTCMinutes()}),hd=ld.range,dd=Rh(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()}),pd=dd.range,vd=Rh(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1}),gd=vd.range;function yd(t){return Rh(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/qh})}var _d=yd(0),bd=yd(1),md=yd(2),xd=yd(3),wd=yd(4),Md=yd(5),Ad=yd(6),Td=_d.range,Nd=bd.range,Sd=md.range,Ed=xd.range,kd=wd.range,Cd=Md.range,Pd=Ad.range,zd=Rh(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Rd=zd.range,Ld=Rh(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Ld.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rh(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var Dd=Ld.range;function Ud(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function qd(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Od(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Yd(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,f=t.shortMonths,c=Vd(i),s=$d(i),l=Vd(o),h=$d(o),d=Vd(a),p=$d(a),v=Vd(u),g=$d(u),y=Vd(f),_=$d(f),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return f[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:pp,e:pp,f:bp,H:vp,I:gp,j:yp,L:_p,m:mp,M:xp,p:function(t){return i[+(t.getHours()>=12)]},Q:Wp,s:Zp,S:wp,u:Mp,U:Ap,V:Tp,w:Np,W:Sp,x:null,X:null,y:Ep,Y:kp,Z:Cp,"%":$p},m={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return f[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Pp,e:Pp,f:Up,H:zp,I:Rp,j:Lp,L:Dp,m:qp,M:Op,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:Wp,s:Zp,S:Yp,u:Bp,U:Fp,V:Ip,w:Hp,W:jp,x:null,X:null,y:Xp,Y:Gp,Z:Vp,"%":$p},x={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.w=h[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=y.exec(n.slice(e));return r?(t.m=_[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=g[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,e,r){return A(t,n,e,r)},d:ip,e:ip,f:sp,H:ap,I:ap,j:op,L:cp,m:rp,M:up,p:function(t,n,e){var r=c.exec(n.slice(e));return r?(t.p=s[r[0].toLowerCase()],e+r[0].length):-1},Q:hp,s:dp,S:fp,u:Zd,U:Qd,V:Jd,w:Wd,W:Kd,x:function(t,n,r){return A(t,e,n,r)},X:function(t,n,e){return A(t,r,n,e)},y:np,Y:tp,Z:ep,"%":lp};function w(t,n){return function(e){var r,i,o,a=[],u=-1,f=0,c=t.length;for(e instanceof Date||(e=new Date(+e));++u<c;)37===t.charCodeAt(u)&&(a.push(t.slice(f,u)),null!=(i=Fd[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),f=u+1);return a.push(t.slice(f,u)),a.join("")}}function M(t,n){return function(e){var r,i,o=Od(1900);if(A(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=qd(Od(o.y))).getUTCDay(),r=i>4||0===i?bd.ceil(r):bd(r),r=vd.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=n(Od(o.y))).getDay(),r=i>4||0===i?$h.ceil(r):$h(r),r=jh.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?qd(Od(o.y)).getUTCDay():n(Od(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,qd(o)):n(o)}}function A(t,n,e,r){for(var i,o,a=0,u=n.length,f=e.length;a<u;){if(r>=f)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=x[i in Fd?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return b.x=w(e,b),b.X=w(r,b),b.c=w(n,b),m.x=w(e,m),m.X=w(r,m),m.c=w(n,m),{format:function(t){var n=w(t+="",b);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",Ud);return n.toString=function(){return t},n},utcFormat:function(t){var n=w(t+="",m);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t,qd);return n.toString=function(){return t},n}}}var Bd,Fd={"-":"",_:" ",0:"0"},Id=/^\s*\d+/,Hd=/^%/,jd=/[\\^$*+?|[\]().{}]/g;function Xd(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Gd(t){return t.replace(jd,"\\$&")}function Vd(t){return new RegExp("^(?:"+t.map(Gd).join("|")+")","i")}function $d(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function Wd(t,n,e){var r=Id.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Zd(t,n,e){var r=Id.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Qd(t,n,e){var r=Id.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Jd(t,n,e){var r=Id.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Kd(t,n,e){var r=Id.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function tp(t,n,e){var r=Id.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function np(t,n,e){var r=Id.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function ep(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function rp(t,n,e){var r=Id.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function ip(t,n,e){var r=Id.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function op(t,n,e){var r=Id.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function ap(t,n,e){var r=Id.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function up(t,n,e){var r=Id.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function fp(t,n,e){var r=Id.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function cp(t,n,e){var r=Id.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function sp(t,n,e){var r=Id.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function lp(t,n,e){var r=Hd.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function hp(t,n,e){var r=Id.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function dp(t,n,e){var r=Id.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function pp(t,n){return Xd(t.getDate(),n,2)}function vp(t,n){return Xd(t.getHours(),n,2)}function gp(t,n){return Xd(t.getHours()%12||12,n,2)}function yp(t,n){return Xd(1+jh.count(cd(t),t),n,3)}function _p(t,n){return Xd(t.getMilliseconds(),n,3)}function bp(t,n){return _p(t,n)+"000"}function mp(t,n){return Xd(t.getMonth()+1,n,2)}function xp(t,n){return Xd(t.getMinutes(),n,2)}function wp(t,n){return Xd(t.getSeconds(),n,2)}function Mp(t){var n=t.getDay();return 0===n?7:n}function Ap(t,n){return Xd(Vh.count(cd(t),t),n,2)}function Tp(t,n){var e=t.getDay();return t=e>=4||0===e?Qh(t):Qh.ceil(t),Xd(Qh.count(cd(t),t)+(4===cd(t).getDay()),n,2)}function Np(t){return t.getDay()}function Sp(t,n){return Xd($h.count(cd(t),t),n,2)}function Ep(t,n){return Xd(t.getFullYear()%100,n,2)}function kp(t,n){return Xd(t.getFullYear()%1e4,n,4)}function Cp(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Xd(n/60|0,"0",2)+Xd(n%60,"0",2)}function Pp(t,n){return Xd(t.getUTCDate(),n,2)}function zp(t,n){return Xd(t.getUTCHours(),n,2)}function Rp(t,n){return Xd(t.getUTCHours()%12||12,n,2)}function Lp(t,n){return Xd(1+vd.count(Ld(t),t),n,3)}function Dp(t,n){return Xd(t.getUTCMilliseconds(),n,3)}function Up(t,n){return Dp(t,n)+"000"}function qp(t,n){return Xd(t.getUTCMonth()+1,n,2)}function Op(t,n){return Xd(t.getUTCMinutes(),n,2)}function Yp(t,n){return Xd(t.getUTCSeconds(),n,2)}function Bp(t){var n=t.getUTCDay();return 0===n?7:n}function Fp(t,n){return Xd(_d.count(Ld(t),t),n,2)}function Ip(t,n){var e=t.getUTCDay();return t=e>=4||0===e?wd(t):wd.ceil(t),Xd(wd.count(Ld(t),t)+(4===Ld(t).getUTCDay()),n,2)}function Hp(t){return t.getUTCDay()}function jp(t,n){return Xd(bd.count(Ld(t),t),n,2)}function Xp(t,n){return Xd(t.getUTCFullYear()%100,n,2)}function Gp(t,n){return Xd(t.getUTCFullYear()%1e4,n,4)}function Vp(){return"+0000"}function $p(){return"%"}function Wp(t){return+t}function Zp(t){return Math.floor(+t/1e3)}function Qp(n){return Bd=Yd(n),t.timeFormat=Bd.format,t.timeParse=Bd.parse,t.utcFormat=Bd.utcFormat,t.utcParse=Bd.utcParse,Bd}Qp({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Jp=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ");var Kp=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),tv=1e3,nv=60*tv,ev=60*nv,rv=24*ev,iv=7*rv,ov=30*rv,av=365*rv;function uv(t){return new Date(t)}function fv(t){return t instanceof Date?+t:+new Date(+t)}function cv(t,n,r,i,o,a,u,f,c){var s=mh(gh,ve),l=s.invert,h=s.domain,d=c(".%L"),p=c(":%S"),v=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),_=c("%b %d"),b=c("%B"),m=c("%Y"),x=[[u,1,tv],[u,5,5*tv],[u,15,15*tv],[u,30,30*tv],[a,1,nv],[a,5,5*nv],[a,15,15*nv],[a,30,30*nv],[o,1,ev],[o,3,3*ev],[o,6,6*ev],[o,12,12*ev],[i,1,rv],[i,2,2*rv],[r,1,iv],[n,1,ov],[n,3,3*ov],[t,1,av]];function M(e){return(u(e)<e?d:a(e)<e?p:o(e)<e?v:i(e)<e?g:n(e)<e?r(e)<e?y:_:t(e)<e?b:m)(e)}function A(n,r,i,o){if(null==n&&(n=10),"number"==typeof n){var a=Math.abs(i-r)/n,u=e(function(t){return t[2]}).right(x,a);u===x.length?(o=w(r/av,i/av,n),n=t):u?(o=(u=x[a/x[u-1][2]<x[u][2]/a?u-1:u])[1],n=u[0]):(o=Math.max(w(r,i,n),1),n=f)}return null==o?n:n.every(o)}return s.invert=function(t){return new Date(l(t))},s.domain=function(t){return arguments.length?h(fh.call(t,fv)):h().map(uv)},s.ticks=function(t,n){var e,r=h(),i=r[0],o=r[r.length-1],a=o<i;return a&&(e=i,i=o,o=e),e=(e=A(t,i,o,n))?e.range(i,o+1):[],a?e.reverse():e},s.tickFormat=function(t,n){return null==n?M:c(n)},s.nice=function(t,n){var e=h();return(t=A(t,e[0],e[e.length-1],n))?h(wh(e,t)):s},s.copy=function(){return bh(s,cv(t,n,r,i,o,a,u,f,c))},s}function sv(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}var lv=sv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),hv=sv("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),dv=sv("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),pv=sv("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),vv=sv("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),gv=sv("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),yv=sv("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),_v=sv("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),bv=sv("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function mv(t){return le(t[t.length-1])}var xv=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(sv),wv=mv(xv),Mv=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(sv),Av=mv(Mv),Tv=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(sv),Nv=mv(Tv),Sv=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(sv),Ev=mv(Sv),kv=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(sv),Cv=mv(kv),Pv=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(sv),zv=mv(Pv),Rv=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(sv),Lv=mv(Rv),Dv=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(sv),Uv=mv(Dv),qv=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(sv),Ov=mv(qv),Yv=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(sv),Bv=mv(Yv),Fv=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(sv),Iv=mv(Fv),Hv=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(sv),jv=mv(Hv),Xv=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(sv),Gv=mv(Xv),Vv=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(sv),$v=mv(Vv),Wv=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(sv),Zv=mv(Wv),Qv=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(sv),Jv=mv(Qv),Kv=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(sv),tg=mv(Kv),ng=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(sv),eg=mv(ng),rg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(sv),ig=mv(rg),og=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(sv),ag=mv(og),ug=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(sv),fg=mv(ug),cg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(sv),sg=mv(cg),lg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(sv),hg=mv(lg),dg=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(sv),pg=mv(dg),vg=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(sv),gg=mv(vg),yg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(sv),_g=mv(yg),bg=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(sv),mg=mv(bg),xg=Ge(Kn(300,.5,0),Kn(-240,.5,1)),wg=Ge(Kn(-100,.75,.35),Kn(80,1.5,.8)),Mg=Ge(Kn(260,.75,.35),Kn(80,1.5,.8)),Ag=Kn();var Tg=bn(),Ng=Math.PI/3,Sg=2*Math.PI/3;function Eg(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var kg=Eg(sv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Cg=Eg(sv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Pg=Eg(sv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),zg=Eg(sv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Rg(t){return function(){return t}}var Lg=Math.abs,Dg=Math.atan2,Ug=Math.cos,qg=Math.max,Og=Math.min,Yg=Math.sin,Bg=Math.sqrt,Fg=1e-12,Ig=Math.PI,Hg=Ig/2,jg=2*Ig;function Xg(t){return t>=1?Hg:t<=-1?-Hg:Math.asin(t)}function Gg(t){return t.innerRadius}function Vg(t){return t.outerRadius}function $g(t){return t.startAngle}function Wg(t){return t.endAngle}function Zg(t){return t&&t.padAngle}function Qg(t,n,e,r,i,o,a){var u=t-e,f=n-r,c=(a?o:-o)/Bg(u*u+f*f),s=c*f,l=-c*u,h=t+s,d=n+l,p=e+s,v=r+l,g=(h+p)/2,y=(d+v)/2,_=p-h,b=v-d,m=_*_+b*b,x=i-o,w=h*v-p*d,M=(b<0?-1:1)*Bg(qg(0,x*x*m-w*w)),A=(w*b-_*M)/m,T=(-w*_-b*M)/m,N=(w*b+_*M)/m,S=(-w*_+b*M)/m,E=A-g,k=T-y,C=N-g,P=S-y;return E*E+k*k>C*C+P*P&&(A=N,T=S),{cx:A,cy:T,x01:-s,y01:-l,x11:A*(i/x-1),y11:T*(i/x-1)}}function Jg(t){this._context=t}function Kg(t){return new Jg(t)}function ty(t){return t[0]}function ny(t){return t[1]}function ey(){var t=ty,n=ny,e=Rg(!0),r=null,i=Kg,o=null;function a(a){var u,f,c,s=a.length,l=!1;for(null==r&&(o=i(c=Gi())),u=0;u<=s;++u)!(u<s&&e(f=a[u],u,a))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(f,u,a),+n(f,u,a));if(c)return o=null,c+""||null}return a.x=function(n){return arguments.length?(t="function"==typeof n?n:Rg(+n),a):t},a.y=function(t){return arguments.length?(n="function"==typeof t?t:Rg(+t),a):n},a.defined=function(t){return arguments.length?(e="function"==typeof t?t:Rg(!!t),a):e},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function ry(){var t=ty,n=null,e=Rg(0),r=ny,i=Rg(!0),o=null,a=Kg,u=null;function f(f){var c,s,l,h,d,p=f.length,v=!1,g=new Array(p),y=new Array(p);for(null==o&&(u=a(d=Gi())),c=0;c<=p;++c){if(!(c<p&&i(h=f[c],c,f))===v)if(v=!v)s=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),l=c-1;l>=s;--l)u.point(g[l],y[l]);u.lineEnd(),u.areaEnd()}v&&(g[c]=+t(h,c,f),y[c]=+e(h,c,f),u.point(n?+n(h,c,f):g[c],r?+r(h,c,f):y[c]))}if(d)return u=null,d+""||null}function c(){return ey().defined(i).curve(a).context(o)}return f.x=function(e){return arguments.length?(t="function"==typeof e?e:Rg(+e),n=null,f):t},f.x0=function(n){return arguments.length?(t="function"==typeof n?n:Rg(+n),f):t},f.x1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Rg(+t),f):n},f.y=function(t){return arguments.length?(e="function"==typeof t?t:Rg(+t),r=null,f):e},f.y0=function(t){return arguments.length?(e="function"==typeof t?t:Rg(+t),f):e},f.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Rg(+t),f):r},f.lineX0=f.lineY0=function(){return c().x(t).y(e)},f.lineY1=function(){return c().x(t).y(r)},f.lineX1=function(){return c().x(n).y(e)},f.defined=function(t){return arguments.length?(i="function"==typeof t?t:Rg(!!t),f):i},f.curve=function(t){return arguments.length?(a=t,null!=o&&(u=a(o)),f):a},f.context=function(t){return arguments.length?(null==t?o=u=null:u=a(o=t),f):o},f}function iy(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function oy(t){return t}Jg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var ay=fy(Kg);function uy(t){this._curve=t}function fy(t){function n(n){return new uy(t(n))}return n._curve=t,n}function cy(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(fy(t)):n()._curve},t}function sy(){return cy(ey().curve(ay))}function ly(){var t=ry().curve(ay),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return cy(e())},delete t.lineX0,t.lineEndAngle=function(){return cy(r())},delete t.lineX1,t.lineInnerRadius=function(){return cy(i())},delete t.lineY0,t.lineOuterRadius=function(){return cy(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(fy(t)):n()._curve},t}function hy(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}uy.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var dy=Array.prototype.slice;function py(t){return t.source}function vy(t){return t.target}function gy(t){var n=py,e=vy,r=ty,i=ny,o=null;function a(){var a,u=dy.call(arguments),f=n.apply(this,u),c=e.apply(this,u);if(o||(o=a=Gi()),t(o,+r.apply(this,(u[0]=f,u)),+i.apply(this,u),+r.apply(this,(u[0]=c,u)),+i.apply(this,u)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(n=t,a):n},a.target=function(t){return arguments.length?(e=t,a):e},a.x=function(t){return arguments.length?(r="function"==typeof t?t:Rg(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:Rg(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function yy(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function _y(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n,e=(e+i)/2,r,e,r,i)}function by(t,n,e,r,i){var o=hy(n,e),a=hy(n,e=(e+i)/2),u=hy(r,e),f=hy(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],u[0],u[1],f[0],f[1])}var my={draw:function(t,n){var e=Math.sqrt(n/Ig);t.moveTo(e,0),t.arc(0,0,e,0,jg)}},xy={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},wy=Math.sqrt(1/3),My=2*wy,Ay={draw:function(t,n){var e=Math.sqrt(n/My),r=e*wy;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},Ty=Math.sin(Ig/10)/Math.sin(7*Ig/10),Ny=Math.sin(jg/10)*Ty,Sy=-Math.cos(jg/10)*Ty,Ey={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),r=Ny*e,i=Sy*e;t.moveTo(0,-e),t.lineTo(r,i);for(var o=1;o<5;++o){var a=jg*o/5,u=Math.cos(a),f=Math.sin(a);t.lineTo(f*e,-u*e),t.lineTo(u*r-f*i,f*r+u*i)}t.closePath()}},ky={draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},Cy=Math.sqrt(3),Py={draw:function(t,n){var e=-Math.sqrt(n/(3*Cy));t.moveTo(0,2*e),t.lineTo(-Cy*e,-e),t.lineTo(Cy*e,-e),t.closePath()}},zy=Math.sqrt(3)/2,Ry=1/Math.sqrt(12),Ly=3*(Ry/2+1),Dy={draw:function(t,n){var e=Math.sqrt(n/Ly),r=e/2,i=e*Ry,o=r,a=e*Ry+e,u=-o,f=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,f),t.lineTo(-.5*r-zy*i,zy*r+-.5*i),t.lineTo(-.5*o-zy*a,zy*o+-.5*a),t.lineTo(-.5*u-zy*f,zy*u+-.5*f),t.lineTo(-.5*r+zy*i,-.5*i-zy*r),t.lineTo(-.5*o+zy*a,-.5*a-zy*o),t.lineTo(-.5*u+zy*f,-.5*f-zy*u),t.closePath()}},Uy=[my,xy,Ay,ky,Ey,Py,Dy];function qy(){}function Oy(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Yy(t){this._context=t}function By(t){this._context=t}function Fy(t){this._context=t}function Iy(t,n){this._basis=new Yy(t),this._beta=n}Yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Oy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Oy(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},By.prototype={areaStart:qy,areaEnd:qy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Oy(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Oy(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Iy.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],a=t[e]-i,u=n[e]-o,f=-1;++f<=e;)r=f/e,this._basis.point(this._beta*t[f]+(1-this._beta)*(i+r*a),this._beta*n[f]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var Hy=function t(n){function e(t){return 1===n?new Yy(t):new Iy(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function jy(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Xy(t,n){this._context=t,this._k=(1-n)/6}Xy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:jy(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:jy(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Gy=function t(n){function e(t){return new Xy(t,n)}return e.tension=function(n){return t(+n)},e}(0);function Vy(t,n){this._context=t,this._k=(1-n)/6}Vy.prototype={areaStart:qy,areaEnd:qy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:jy(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var $y=function t(n){function e(t){return new Vy(t,n)}return e.tension=function(n){return t(+n)},e}(0);function Wy(t,n){this._context=t,this._k=(1-n)/6}Wy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jy(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Zy=function t(n){function e(t){return new Wy(t,n)}return e.tension=function(n){return t(+n)},e}(0);function Qy(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Fg){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>Fg){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,s=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-n*t._l12_2a)/s,a=(a*c+t._y1*t._l23_2a-e*t._l12_2a)/s}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Jy(t,n){this._context=t,this._alpha=n}Jy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Qy(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Ky=function t(n){function e(t){return n?new Jy(t,n):new Xy(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function t_(t,n){this._context=t,this._alpha=n}t_.prototype={areaStart:qy,areaEnd:qy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Qy(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var n_=function t(n){function e(t){return n?new t_(t,n):new Vy(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function e_(t,n){this._context=t,this._alpha=n}e_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qy(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var r_=function t(n){function e(t){return n?new e_(t,n):new Wy(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function i_(t){this._context=t}function o_(t){return t<0?-1:1}function a_(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(o_(o)+o_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function u_(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function f_(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*n,o-u,a-u*e,o,a)}function c_(t){this._context=t}function s_(t){this._context=new l_(t)}function l_(t){this._context=t}function h_(t){this._context=t}function d_(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(i[r-1]=a[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function p_(t,n){this._context=t,this._t=n}function v_(t,n){if((i=t.length)>1)for(var e,r,i,o=1,a=t[n[0]],u=a.length;o<i;++o)for(r=a,a=t[n[o]],e=0;e<u;++e)a[e][1]+=a[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}function g_(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function y_(t,n){return t[n]}function __(t){var n=t.map(b_);return g_(t).sort(function(t,e){return n[t]-n[e]})}function b_(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}function m_(t){return function(){return t}}function x_(t){return t[0]}function w_(t){return t[1]}function M_(){this._=null}function A_(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function T_(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function N_(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function S_(t){for(;t.L;)t=t.L;return t}function E_(t,n,e,r){var i=[null,null],o=J_.push(i)-1;return i.left=t,i.right=n,e&&C_(i,t,n,e),r&&C_(i,n,t,r),Z_[t.index].halfedges.push(o),Z_[n.index].halfedges.push(o),i}function k_(t,n,e){var r=[n,e];return r.left=t,r}function C_(t,n,e,r){t[0]||t[1]?t.left===e?t[1]=r:t[0]=r:(t[0]=r,t.left=n,t.right=e)}function P_(t,n,e,r,i){var o,a=t[0],u=t[1],f=a[0],c=a[1],s=0,l=1,h=u[0]-f,d=u[1]-c;if(o=n-f,h||!(o>0)){if(o/=h,h<0){if(o<s)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>s&&(s=o)}if(o=r-f,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>s&&(s=o)}else if(h>0){if(o<s)return;o<l&&(l=o)}if(o=e-c,d||!(o>0)){if(o/=d,d<0){if(o<s)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>s&&(s=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>s&&(s=o)}else if(d>0){if(o<s)return;o<l&&(l=o)}return!(s>0||l<1)||(s>0&&(t[0]=[f+s*h,c+s*d]),l<1&&(t[1]=[f+l*h,c+l*d]),!0)}}}}}function z_(t,n,e,r,i){var o=t[1];if(o)return!0;var a,u,f=t[0],c=t.left,s=t.right,l=c[0],h=c[1],d=s[0],p=s[1],v=(l+d)/2,g=(h+p)/2;if(p===h){if(v<n||v>=r)return;if(l>d){if(f){if(f[1]>=i)return}else f=[v,e];o=[v,i]}else{if(f){if(f[1]<e)return}else f=[v,i];o=[v,e]}}else if(u=g-(a=(l-d)/(p-h))*v,a<-1||a>1)if(l>d){if(f){if(f[1]>=i)return}else f=[(e-u)/a,e];o=[(i-u)/a,i]}else{if(f){if(f[1]<e)return}else f=[(i-u)/a,i];o=[(e-u)/a,e]}else if(h<p){if(f){if(f[0]>=r)return}else f=[n,a*n+u];o=[r,a*r+u]}else{if(f){if(f[0]<n)return}else f=[r,a*r+u];o=[n,a*n+u]}return t[0]=f,t[1]=o,!0}function R_(t,n){var e=t.site,r=n.left,i=n.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=n[1],i=n[0]):(r=n[0],i=n[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function L_(t,n){return n[+(n.left!==t.site)]}function D_(t,n){return n[+(n.left===t.site)]}i_.prototype={areaStart:qy,areaEnd:qy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},c_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:f_(this,this._t0,u_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,f_(this,u_(this,e=a_(this,t,n)),e);break;default:f_(this,this._t0,e=a_(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(s_.prototype=Object.create(c_.prototype)).point=function(t,n){c_.prototype.point.call(this,n,t)},l_.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},h_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=d_(t),i=d_(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],n[a]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},p_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}},M_.prototype={constructor:M_,insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=S_(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(i=r.R)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(T_(this,e),e=(t=e).U),e.C=!1,r.C=!0,N_(this,r)):(i=r.L)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(N_(this,e),e=(t=e).U),e.C=!1,r.C=!0,T_(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?S_(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=a,a.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((n=i.R).C&&(n.C=!1,i.C=!0,T_(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,N_(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,T_(this,i),t=this._;break}}else if((n=i.L).C&&(n.C=!1,i.C=!0,N_(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,T_(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,N_(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var U_,q_=[];function O_(){A_(this),this.x=this.y=this.arc=this.site=this.cy=null}function Y_(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i[0],u=i[1],f=r[0]-a,c=r[1]-u,s=o[0]-a,l=o[1]-u,h=2*(f*l-c*s);if(!(h>=-tb)){var d=f*f+c*c,p=s*s+l*l,v=(l*d-c*p)/h,g=(f*p-s*d)/h,y=q_.pop()||new O_;y.arc=t,y.site=i,y.x=v+a,y.y=(y.cy=g+u)+Math.sqrt(v*v+g*g),t.circle=y;for(var _=null,b=Q_._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){_=b.P;break}b=b.L}else{if(!b.R){_=b;break}b=b.R}Q_.insert(_,y),_||(U_=y)}}}}function B_(t){var n=t.circle;n&&(n.P||(U_=n.N),Q_.remove(n),q_.push(n),A_(n),t.circle=null)}var F_=[];function I_(){A_(this),this.edge=this.site=this.circle=null}function H_(t){var n=F_.pop()||new I_;return n.site=t,n}function j_(t){B_(t),W_.remove(t),F_.push(t),A_(t)}function X_(t){var n=t.circle,e=n.x,r=n.cy,i=[e,r],o=t.P,a=t.N,u=[t];j_(t);for(var f=o;f.circle&&Math.abs(e-f.circle.x)<K_&&Math.abs(r-f.circle.cy)<K_;)o=f.P,u.unshift(f),j_(f),f=o;u.unshift(f),B_(f);for(var c=a;c.circle&&Math.abs(e-c.circle.x)<K_&&Math.abs(r-c.circle.cy)<K_;)a=c.N,u.push(c),j_(c),c=a;u.push(c),B_(c);var s,l=u.length;for(s=1;s<l;++s)c=u[s],f=u[s-1],C_(c.edge,f.site,c.site,i);f=u[0],(c=u[l-1]).edge=E_(f.site,c.site,null,i),Y_(f),Y_(c)}function G_(t){for(var n,e,r,i,o=t[0],a=t[1],u=W_._;u;)if((r=V_(u,a)-o)>K_)u=u.L;else{if(!((i=o-$_(u,a))>K_)){r>-K_?(n=u.P,e=u):i>-K_?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}!function(t){Z_[t.index]={site:t,halfedges:[]}}(t);var f=H_(t);if(W_.insert(n,f),n||e){if(n===e)return B_(n),e=H_(n.site),W_.insert(f,e),f.edge=e.edge=E_(n.site,f.site),Y_(n),void Y_(e);if(e){B_(n),B_(e);var c=n.site,s=c[0],l=c[1],h=t[0]-s,d=t[1]-l,p=e.site,v=p[0]-s,g=p[1]-l,y=2*(h*g-d*v),_=h*h+d*d,b=v*v+g*g,m=[(g*_-d*b)/y+s,(h*b-v*_)/y+l];C_(e.edge,c,p,m),f.edge=E_(c,t,null,m),e.edge=E_(t,p,null,m),Y_(n),Y_(e)}else f.edge=E_(n.site,f.site)}}function V_(t,n){var e=t.site,r=e[0],i=e[1],o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(e=a.site)[0],f=e[1],c=f-n;if(!c)return u;var s=u-r,l=1/o-1/c,h=s/c;return l?(-h+Math.sqrt(h*h-2*l*(s*s/(-2*c)-f+c/2+i-o/2)))/l+r:(r+u)/2}function $_(t,n){var e=t.N;if(e)return V_(e,n);var r=t.site;return r[1]===n?r[0]:1/0}var W_,Z_,Q_,J_,K_=1e-6,tb=1e-12;function nb(t,n){return n[1]-t[1]||n[0]-t[0]}function eb(t,n){var e,r,i,o=t.sort(nb).pop();for(J_=[],Z_=new Array(t.length),W_=new M_,Q_=new M_;;)if(i=U_,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===e&&o[1]===r||(G_(o),e=o[0],r=o[1]),o=t.pop();else{if(!i)break;X_(i.arc)}if(function(){for(var t,n,e,r,i=0,o=Z_.length;i<o;++i)if((t=Z_[i])&&(r=(n=t.halfedges).length)){var a=new Array(r),u=new Array(r);for(e=0;e<r;++e)a[e]=e,u[e]=R_(t,J_[n[e]]);for(a.sort(function(t,n){return u[n]-u[t]}),e=0;e<r;++e)u[e]=n[a[e]];for(e=0;e<r;++e)n[e]=u[e]}}(),n){var a=+n[0][0],u=+n[0][1],f=+n[1][0],c=+n[1][1];!function(t,n,e,r){for(var i,o=J_.length;o--;)z_(i=J_[o],t,n,e,r)&&P_(i,t,n,e,r)&&(Math.abs(i[0][0]-i[1][0])>K_||Math.abs(i[0][1]-i[1][1])>K_)||delete J_[o]}(a,u,f,c),function(t,n,e,r){var i,o,a,u,f,c,s,l,h,d,p,v,g=Z_.length,y=!0;for(i=0;i<g;++i)if(o=Z_[i]){for(a=o.site,u=(f=o.halfedges).length;u--;)J_[f[u]]||f.splice(u,1);for(u=0,c=f.length;u<c;)p=(d=D_(o,J_[f[u]]))[0],v=d[1],l=(s=L_(o,J_[f[++u%c]]))[0],h=s[1],(Math.abs(p-l)>K_||Math.abs(v-h)>K_)&&(f.splice(u,0,J_.push(k_(a,d,Math.abs(p-t)<K_&&r-v>K_?[t,Math.abs(l-t)<K_?h:r]:Math.abs(v-r)<K_&&e-p>K_?[Math.abs(h-r)<K_?l:e,r]:Math.abs(p-e)<K_&&v-n>K_?[e,Math.abs(l-e)<K_?h:n]:Math.abs(v-n)<K_&&p-t>K_?[Math.abs(h-n)<K_?l:t,n]:null))-1),++c);c&&(y=!1)}if(y){var _,b,m,x=1/0;for(i=0,y=null;i<g;++i)(o=Z_[i])&&(m=(_=(a=o.site)[0]-t)*_+(b=a[1]-n)*b)<x&&(x=m,y=o);if(y){var w=[t,n],M=[t,r],A=[e,r],T=[e,n];y.halfedges.push(J_.push(k_(a=y.site,w,M))-1,J_.push(k_(a,M,A))-1,J_.push(k_(a,A,T))-1,J_.push(k_(a,T,w))-1)}}for(i=0;i<g;++i)(o=Z_[i])&&(o.halfedges.length||delete Z_[i])}(a,u,f,c)}this.edges=J_,this.cells=Z_,W_=Q_=J_=Z_=null}function rb(t){return function(){return t}}function ib(t,n,e){this.target=t,this.type=n,this.transform=e}function ob(t,n,e){this.k=t,this.x=n,this.y=e}eb.prototype={constructor:eb,polygons:function(){var t=this.edges;return this.cells.map(function(n){var e=n.halfedges.map(function(e){return L_(n,t[e])});return e.data=n.site.data,e})},triangles:function(){var t=[],n=this.edges;return this.cells.forEach(function(e,r){if(o=(i=e.halfedges).length)for(var i,o,a,u,f,c,s=e.site,l=-1,h=n[i[o-1]],d=h.left===s?h.right:h.left;++l<o;)a=d,d=(h=n[i[l]]).left===s?h.right:h.left,a&&d&&r<a.index&&r<d.index&&(f=a,c=d,((u=s)[0]-c[0])*(f[1]-u[1])-(u[0]-f[0])*(c[1]-u[1])<0)&&t.push([s.data,a.data,d.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,n,e){for(var r,i,o=this,a=o._found||0,u=o.cells.length;!(i=o.cells[a]);)if(++a>=u)return null;var f=t-i.site[0],c=n-i.site[1],s=f*f+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(e){var r=o.edges[e],u=r.left;if(u!==i.site&&u||(u=r.right)){var f=t-u[0],c=n-u[1],l=f*f+c*c;l<s&&(s=l,a=u.index)}})}while(null!==a);return o._found=r,null==e||s<=e*e?i.site:null}},ob.prototype={constructor:ob,scale:function(t){return 1===t?this:new ob(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new ob(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ab=new ob(1,0,0);function ub(t){return t.__zoom||ab}function fb(){t.event.stopImmediatePropagation()}function cb(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function sb(){return!t.event.button}function lb(){var t,n,e=this;return e instanceof SVGElement?(t=(e=e.ownerSVGElement||e).width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function hb(){return this.__zoom||ab}function db(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function pb(){return"ontouchstart"in this}function vb(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}ub.prototype=ob.prototype,t.version="5.7.0",t.bisect=i,t.bisectRight=i,t.bisectLeft=o,t.ascending=n,t.bisector=e,t.cross=function(t,n,e){var r,i,o,u,f=t.length,c=n.length,s=new Array(f*c);for(null==e&&(e=a),r=o=0;r<f;++r)for(u=t[r],i=0;i<c;++i,++o)s[o]=e(u,n[i]);return s},t.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=c,t.extent=s,t.histogram=function(){var t=v,n=s,e=M;function r(r){var o,a,u=r.length,f=new Array(u);for(o=0;o<u;++o)f[o]=t(r[o],o,r);var c=n(f),s=c[0],l=c[1],h=e(f,s,l);Array.isArray(h)||(h=w(s,l,h),h=g(Math.ceil(s/h)*h,l,h));for(var d=h.length;h[0]<=s;)h.shift(),--d;for(;h[d-1]>l;)h.pop(),--d;var p,v=new Array(d+1);for(o=0;o<=d;++o)(p=v[o]=[]).x0=o>0?h[o-1]:s,p.x1=o<d?h[o]:l;for(o=0;o<u;++o)s<=(a=f[o])&&a<=l&&v[i(h,a,0,d)].push(r[o]);return v}return r.value=function(n){return arguments.length?(t="function"==typeof n?n:p(n),r):t},r.domain=function(t){return arguments.length?(n="function"==typeof t?t:p([t[0],t[1]]),r):n},r.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?p(h.call(t)):p(t),r):e},r},t.thresholdFreedmanDiaconis=function(t,e,r){return t=d.call(t,u).sort(n),Math.ceil((r-e)/(2*(A(t,.75)-A(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,n,e){return Math.ceil((e-n)/(3.5*c(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=M,t.max=T,t.mean=function(t,n){var e,r=t.length,i=r,o=-1,a=0;if(null==n)for(;++o<r;)isNaN(e=u(t[o]))?--i:a+=e;else for(;++o<r;)isNaN(e=u(n(t[o],o,t)))?--i:a+=e;if(i)return a/i},t.median=function(t,e){var r,i=t.length,o=-1,a=[];if(null==e)for(;++o<i;)isNaN(r=u(t[o]))||a.push(r);else for(;++o<i;)isNaN(r=u(e(t[o],o,t)))||a.push(r);return A(a.sort(n),.5)},t.merge=N,t.min=S,t.pairs=function(t,n){null==n&&(n=a);for(var e=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);e<r;)o[e]=n(i,i=t[++e]);return o},t.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},t.quantile=A,t.range=g,t.scan=function(t,e){if(r=t.length){var r,i,o=0,a=0,u=t[a];for(null==e&&(e=n);++o<r;)(e(i=t[o],u)<0||0!==e(u,u))&&(u=i,a=o);return 0===e(u,u)?a:void 0}},t.shuffle=function(t,n,e){for(var r,i,o=(null==e?t.length:e)-(n=null==n?0:+n);o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},t.sum=function(t,n){var e,r=t.length,i=-1,o=0;if(null==n)for(;++i<r;)(e=+t[i])&&(o+=e);else for(;++i<r;)(e=+n(t[i],i,t))&&(o+=e);return o},t.ticks=m,t.tickIncrement=x,t.tickStep=w,t.transpose=E,t.variance=f,t.zip=function(){return E(arguments)},t.axisTop=function(t){return B(z,t)},t.axisRight=function(t){return B(R,t)},t.axisBottom=function(t){return B(L,t)},t.axisLeft=function(t){return B(D,t)},t.brush=function(){return Ri(wi)},t.brushX=function(){return Ri(mi)},t.brushY=function(){return Ri(xi)},t.brushSelection=function(t){var n=t.__brush;return n?n.dim.output(n.selection):null},t.chord=function(){var t=0,n=null,e=null,r=null;function i(i){var o,a,u,f,c,s,l=i.length,h=[],d=g(l),p=[],v=[],y=v.groups=new Array(l),_=new Array(l*l);for(o=0,c=-1;++c<l;){for(a=0,s=-1;++s<l;)a+=i[c][s];h.push(a),p.push(g(l)),o+=a}for(n&&d.sort(function(t,e){return n(h[t],h[e])}),e&&p.forEach(function(t,n){t.sort(function(t,r){return e(i[n][t],i[n][r])})}),f=(o=Yi(0,Oi-t*l)/o)?t:Oi/l,a=0,c=-1;++c<l;){for(u=a,s=-1;++s<l;){var b=d[c],m=p[b][s],x=i[b][m],w=a,M=a+=x*o;_[m*l+b]={index:b,subindex:m,startAngle:w,endAngle:M,value:x}}y[b]={index:b,startAngle:u,endAngle:a,value:h[b]},a+=f}for(c=-1;++c<l;)for(s=c-1;++s<l;){var A=_[s*l+c],T=_[c*l+s];(A.value||T.value)&&v.push(A.value<T.value?{source:T,target:A}:{source:A,target:T})}return r?v.sort(r):v}return i.padAngle=function(n){return arguments.length?(t=Yi(0,n),i):t},i.sortGroups=function(t){return arguments.length?(n=t,i):n},i.sortSubgroups=function(t){return arguments.length?(e=t,i):e},i.sortChords=function(t){return arguments.length?(null==t?r=null:(n=t,r=function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)})._=t,i):r&&r._;var n},i},t.ribbon=function(){var t=Vi,n=$i,e=Wi,r=Zi,i=Qi,o=null;function a(){var a,u=Bi.call(arguments),f=t.apply(this,u),c=n.apply(this,u),s=+e.apply(this,(u[0]=f,u)),l=r.apply(this,u)-qi,h=i.apply(this,u)-qi,d=s*Li(l),p=s*Di(l),v=+e.apply(this,(u[0]=c,u)),g=r.apply(this,u)-qi,y=i.apply(this,u)-qi;if(o||(o=a=Gi()),o.moveTo(d,p),o.arc(0,0,s,l,h),l===g&&h===y||(o.quadraticCurveTo(0,0,v*Li(g),v*Di(g)),o.arc(0,0,v,g,y)),o.quadraticCurveTo(0,0,d,p),o.closePath(),a)return o=null,a+""||null}return a.radius=function(t){return arguments.length?(e="function"==typeof t?t:Fi(+t),a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Fi(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Fi(+t),a):i},a.source=function(n){return arguments.length?(t=n,a):t},a.target=function(t){return arguments.length?(n=t,a):n},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a},t.nest=function(){var t,n,e,r=[],i=[];function o(e,i,a,u){if(i>=r.length)return null!=t&&e.sort(t),null!=n?n(e):e;for(var f,c,s,l=-1,h=e.length,d=r[i++],p=Ki(),v=a();++l<h;)(s=p.get(f=d(c=e[l])+""))?s.push(c):p.set(f,[c]);return p.each(function(t,n){u(v,n,o(t,i,a,u))}),v}return e={object:function(t){return o(t,0,to,no)},map:function(t){return o(t,0,eo,ro)},entries:function(t){return function t(e,o){if(++o>r.length)return e;var a,u=i[o-1];return null!=n&&o>=r.length?a=e.entries():(a=[],e.each(function(n,e){a.push({key:e,values:t(n,o)})})),null!=u?a.sort(function(t,n){return u(t.key,n.key)}):a}(o(t,0,eo,ro),0)},key:function(t){return r.push(t),e},sortKeys:function(t){return i[r.length-1]=t,e},sortValues:function(n){return t=n,e},rollup:function(t){return n=t,e}}},t.set=ao,t.map=Ki,t.keys=function(t){var n=[];for(var e in t)n.push(e);return n},t.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},t.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},t.color=vn,t.rgb=bn,t.hsl=Mn,t.lab=Un,t.hcl=Hn,t.lch=function(t,n,e,r){return 1===arguments.length?In(t):new jn(e,n,t,null==r?1:r)},t.gray=function(t,n){return new qn(t,0,0,null==n?1:n)},t.cubehelix=Kn,t.contours=go,t.contourDensity=function(){var t=bo,n=mo,e=xo,r=960,i=500,o=20,a=2,u=3*o,f=r+2*u>>a,c=i+2*u>>a,s=co(20);function l(r){var i=new Float32Array(f*c),l=new Float32Array(f*c);r.forEach(function(r,o,s){var l=+t(r,o,s)+u>>a,h=+n(r,o,s)+u>>a,d=+e(r,o,s);l>=0&&l<f&&h>=0&&h<c&&(i[l+h*f]+=d)}),yo({width:f,height:c,data:i},{width:f,height:c,data:l},o>>a),_o({width:f,height:c,data:l},{width:f,height:c,data:i},o>>a),yo({width:f,height:c,data:i},{width:f,height:c,data:l},o>>a),_o({width:f,height:c,data:l},{width:f,height:c,data:i},o>>a),yo({width:f,height:c,data:i},{width:f,height:c,data:l},o>>a),_o({width:f,height:c,data:l},{width:f,height:c,data:i},o>>a);var d=s(i);if(!Array.isArray(d)){var p=T(i);d=w(0,p,d),(d=g(0,Math.floor(p/d)*d,d)).shift()}return go().thresholds(d).size([f,c])(i).map(h)}function h(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,a)-u,t[1]=t[1]*Math.pow(2,a)-u}function y(){return f=r+2*(u=3*o)>>a,c=i+2*u>>a,l}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:co(+n),l):t},l.y=function(t){return arguments.length?(n="function"==typeof t?t:co(+t),l):n},l.weight=function(t){return arguments.length?(e="function"==typeof t?t:co(+t),l):e},l.size=function(t){if(!arguments.length)return[r,i];var n=Math.ceil(t[0]),e=Math.ceil(t[1]);if(!(n>=0||n>=0))throw new Error("invalid size");return r=n,i=e,y()},l.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),y()},l.thresholds=function(t){return arguments.length?(s="function"==typeof t?t:Array.isArray(t)?co(uo.call(t)):co(t),l):s},l.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),y()},l},t.dispatch=I,t.drag=function(){var n,e,r,i,o=Wt,a=Zt,u=Qt,f=Jt,c={},s=I("start","drag","end"),l=0,h=0;function d(t){t.on("mousedown.drag",p).filter(f).on("touchstart.drag",y).on("touchmove.drag",_).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!i&&o.apply(this,arguments)){var u=m("mouse",a.apply(this,arguments),Ft,this,arguments);u&&(Dt(t.event.view).on("mousemove.drag",v,!0).on("mouseup.drag",g,!0),Xt(t.event.view),Ht(),r=!1,n=t.event.clientX,e=t.event.clientY,u("start"))}}function v(){if(jt(),!r){var i=t.event.clientX-n,o=t.event.clientY-e;r=i*i+o*o>h}c.mouse("drag")}function g(){Dt(t.event.view).on("mousemove.drag mouseup.drag",null),Gt(t.event.view,r),jt(),c.mouse("end")}function y(){if(o.apply(this,arguments)){var n,e,r=t.event.changedTouches,i=a.apply(this,arguments),u=r.length;for(n=0;n<u;++n)(e=m(r[n].identifier,i,It,this,arguments))&&(Ht(),e("start"))}}function _(){var n,e,r=t.event.changedTouches,i=r.length;for(n=0;n<i;++n)(e=c[r[n].identifier])&&(jt(),e("drag"))}function b(){var n,e,r=t.event.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),n=0;n<o;++n)(e=c[r[n].identifier])&&(Ht(),e("end"))}function m(n,e,r,i,o){var a,f,h,p=r(e,n),v=s.copy();if(Ct(new $t(d,"beforestart",a,n,l,p[0],p[1],0,0,v),function(){return null!=(t.event.subject=a=u.apply(i,o))&&(f=a.x-p[0]||0,h=a.y-p[1]||0,!0)}))return function t(u){var s,g=p;switch(u){case"start":c[n]=t,s=l++;break;case"end":delete c[n],--l;case"drag":p=r(e,n),s=l}Ct(new $t(d,u,a,n,s,p[0]+f,p[1]+h,p[0]-g[0],p[1]-g[1],v),v.apply,v,[u,i,o])}}return d.filter=function(t){return arguments.length?(o="function"==typeof t?t:Vt(!!t),d):o},d.container=function(t){return arguments.length?(a="function"==typeof t?t:Vt(t),d):a},d.subject=function(t){return arguments.length?(u="function"==typeof t?t:Vt(t),d):u},d.touchable=function(t){return arguments.length?(f="function"==typeof t?t:Vt(!!t),d):f},d.on=function(){var t=s.on.apply(s,arguments);return t===s?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d},t.dragDisable=Xt,t.dragEnable=Gt,t.dsvFormat=Eo,t.csvParse=Co,t.csvParseRows=Po,t.csvFormat=zo,t.csvFormatRows=Ro,t.tsvParse=Do,t.tsvParseRows=Uo,t.tsvFormat=qo,t.tsvFormatRows=Oo,t.easeLinear=function(t){return+t},t.easeQuad=Dr,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=Dr,t.easeCubic=Ur,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=Ur,t.easePoly=Yr,t.easePolyIn=qr,t.easePolyOut=Or,t.easePolyInOut=Yr,t.easeSin=Ir,t.easeSinIn=function(t){return 1-Math.cos(t*Fr)},t.easeSinOut=function(t){return Math.sin(t*Fr)},t.easeSinInOut=Ir,t.easeExp=Hr,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=Hr,t.easeCircle=jr,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=jr,t.easeBounce=ni,t.easeBounceIn=function(t){return 1-ni(1-t)},t.easeBounceOut=ni,t.easeBounceInOut=function(t){return((t*=2)<=1?1-ni(1-t):ni(t-1)+1)/2},t.easeBack=ii,t.easeBackIn=ei,t.easeBackOut=ri,t.easeBackInOut=ii,t.easeElastic=ui,t.easeElasticIn=ai,t.easeElasticOut=ui,t.easeElasticInOut=fi,t.blob=function(t,n){return fetch(t,n).then(Yo)},t.buffer=function(t,n){return fetch(t,n).then(Bo)},t.dsv=function(t,n,e,r){3===arguments.length&&"function"==typeof e&&(r=e,e=void 0);var i=Eo(t);return Io(n,e).then(function(t){return i.parse(t,r)})},t.csv=jo,t.tsv=Xo,t.image=function(t,n){return new Promise(function(e,r){var i=new Image;for(var o in n)i[o]=n[o];i.onerror=r,i.onload=function(){e(i)},i.src=t})},t.json=function(t,n){return fetch(t,n).then(Go)},t.text=Io,t.xml=$o,t.html=Wo,t.svg=Zo,t.forceCenter=function(t,n){var e;function r(){var r,i,o=e.length,a=0,u=0;for(r=0;r<o;++r)a+=(i=e[r]).x,u+=i.y;for(a=a/o-t,u=u/o-n,r=0;r<o;++r)(i=e[r]).x-=a,i.y-=u}return null==t&&(t=0),null==n&&(n=0),r.initialize=function(t){e=t},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(t){return arguments.length?(n=+t,r):n},r},t.forceCollide=function(t){var n,e,r=1,i=1;function o(){for(var t,o,u,f,c,s,l,h=n.length,d=0;d<i;++d)for(o=ra(n,ua,fa).visitAfter(a),t=0;t<h;++t)u=n[t],s=e[u.index],l=s*s,f=u.x+u.vx,c=u.y+u.vy,o.visit(p);function p(t,n,e,i,o){var a=t.data,h=t.r,d=s+h;if(!a)return n>f+d||i<f-d||e>c+d||o<c-d;if(a.index>u.index){var p=f-a.x-a.vx,v=c-a.y-a.vy,g=p*p+v*v;g<d*d&&(0===p&&(g+=(p=Jo())*p),0===v&&(g+=(v=Jo())*v),g=(d-(g=Math.sqrt(g)))/g*r,u.vx+=(p*=g)*(d=(h*=h)/(l+h)),u.vy+=(v*=g)*d,a.vx-=p*(d=1-d),a.vy-=v*d)}}}function a(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function u(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=Qo(null==t?1:+t)),o.initialize=function(t){n=t,u()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(n){return arguments.length?(t="function"==typeof n?n:Qo(+n),u(),o):t},o},t.forceLink=function(t){var n,e,r,i,o,a=ca,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},f=Qo(30),c=1;function s(r){for(var i=0,a=t.length;i<c;++i)for(var u,f,s,l,h,d,p,v=0;v<a;++v)f=(u=t[v]).source,l=(s=u.target).x+s.vx-f.x-f.vx||Jo(),h=s.y+s.vy-f.y-f.vy||Jo(),l*=d=((d=Math.sqrt(l*l+h*h))-e[v])/d*r*n[v],h*=d,s.vx-=l*(p=o[v]),s.vy-=h*p,f.vx+=l*(p=1-p),f.vy+=h*p}function l(){if(r){var u,f,c=r.length,s=t.length,l=Ki(r,a);for(u=0,i=new Array(c);u<s;++u)(f=t[u]).index=u,"object"!=typeof f.source&&(f.source=sa(l,f.source)),"object"!=typeof f.target&&(f.target=sa(l,f.target)),i[f.source.index]=(i[f.source.index]||0)+1,i[f.target.index]=(i[f.target.index]||0)+1;for(u=0,o=new Array(s);u<s;++u)f=t[u],o[u]=i[f.source.index]/(i[f.source.index]+i[f.target.index]);n=new Array(s),h(),e=new Array(s),d()}}function h(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+f(t[n],n,t)}return null==t&&(t=[]),s.initialize=function(t){r=t,l()},s.links=function(n){return arguments.length?(t=n,l(),s):t},s.id=function(t){return arguments.length?(a=t,s):a},s.iterations=function(t){return arguments.length?(c=+t,s):c},s.strength=function(t){return arguments.length?(u="function"==typeof t?t:Qo(+t),h(),s):u},s.distance=function(t){return arguments.length?(f="function"==typeof t?t:Qo(+t),d(),s):f},s},t.forceManyBody=function(){var t,n,e,r,i=Qo(-30),o=1,a=1/0,u=.81;function f(r){var i,o=t.length,a=ra(t,la,ha).visitAfter(s);for(e=r,i=0;i<o;++i)n=t[i],a.visit(l)}function c(){if(t){var n,e,o=t.length;for(r=new Array(o),n=0;n<o;++n)e=t[n],r[e.index]=+i(e,n,t)}}function s(t){var n,e,i,o,a,u=0,f=0;if(t.length){for(i=o=a=0;a<4;++a)(n=t[a])&&(e=Math.abs(n.value))&&(u+=n.value,f+=e,i+=e*n.x,o+=e*n.y);t.x=i/f,t.y=o/f}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=r[n.data.index]}while(n=n.next)}t.value=u}function l(t,i,f,c){if(!t.value)return!0;var s=t.x-n.x,l=t.y-n.y,h=c-i,d=s*s+l*l;if(h*h/u<d)return d<a&&(0===s&&(d+=(s=Jo())*s),0===l&&(d+=(l=Jo())*l),d<o&&(d=Math.sqrt(o*d)),n.vx+=s*t.value*e/d,n.vy+=l*t.value*e/d),!0;if(!(t.length||d>=a)){(t.data!==n||t.next)&&(0===s&&(d+=(s=Jo())*s),0===l&&(d+=(l=Jo())*l),d<o&&(d=Math.sqrt(o*d)));do{t.data!==n&&(h=r[t.data.index]*e/d,n.vx+=s*h,n.vy+=l*h)}while(t=t.next)}}return f.initialize=function(n){t=n,c()},f.strength=function(t){return arguments.length?(i="function"==typeof t?t:Qo(+t),c(),f):i},f.distanceMin=function(t){return arguments.length?(o=t*t,f):Math.sqrt(o)},f.distanceMax=function(t){return arguments.length?(a=t*t,f):Math.sqrt(a)},f.theta=function(t){return arguments.length?(u=t*t,f):Math.sqrt(u)},f},t.forceRadial=function(t,n,e){var r,i,o,a=Qo(.1);function u(t){for(var a=0,u=r.length;a<u;++a){var f=r[a],c=f.x-n||1e-6,s=f.y-e||1e-6,l=Math.sqrt(c*c+s*s),h=(o[a]-l)*i[a]*t/l;f.vx+=c*h,f.vy+=s*h}}function f(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)o[n]=+t(r[n],n,r),i[n]=isNaN(o[n])?0:+a(r[n],n,r)}}return"function"!=typeof t&&(t=Qo(+t)),null==n&&(n=0),null==e&&(e=0),u.initialize=function(t){r=t,f()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:Qo(+t),f(),u):a},u.radius=function(n){return arguments.length?(t="function"==typeof n?n:Qo(+n),f(),u):t},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(t){return arguments.length?(e=+t,u):e},u},t.forceSimulation=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=Ki(),f=ur(s),c=I("tick","end");function s(){l(),c.call("tick",n),e<r&&(f.stop(),c.call("end",n))}function l(){var n,r,f=t.length;for(e+=(o-e)*i,u.each(function(t){t(e)}),n=0;n<f;++n)null==(r=t[n]).fx?r.x+=r.vx*=a:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=a:(r.y=r.fy,r.vy=0)}function h(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,isNaN(n.x)||isNaN(n.y)){var i=da*Math.sqrt(e),o=e*pa;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function d(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),h(),n={tick:l,restart:function(){return f.restart(s),n},stop:function(){return f.stop(),n},nodes:function(e){return arguments.length?(t=e,h(),u.each(d),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},force:function(t,e){return arguments.length>1?(null==e?u.remove(t):u.set(t,d(e)),n):u.get(t)},find:function(n,e,r){var i,o,a,u,f,c=0,s=t.length;for(null==r?r=1/0:r*=r,c=0;c<s;++c)(a=(i=n-(u=t[c]).x)*i+(o=e-u.y)*o)<r&&(f=u,r=a);return f},on:function(t,e){return arguments.length>1?(c.on(t,e),n):c.on(t)}}},t.forceX=function(t){var n,e,r,i=Qo(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vx+=(r[o]-i.x)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=Qo(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Qo(+t),a(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:Qo(+n),a(),o):t},o},t.forceY=function(t){var n,e,r,i=Qo(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vy+=(r[o]-i.y)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=Qo(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Qo(+t),a(),o):i},o.y=function(n){return arguments.length?(t="function"==typeof n?n:Qo(+n),a(),o):t},o},t.formatDefaultLocale=Sa,t.formatLocale=Na,t.formatSpecifier=ba,t.precisionFixed=Ea,t.precisionPrefix=ka,t.precisionRound=Ca,t.geoArea=function(t){return yu.reset(),su(t,_u),2*yu},t.geoBounds=function(t){var n,e,r,i,o,a,u;if(Ru=zu=-(Cu=Pu=1/0),Ou=[],su(t,rf),e=Ou.length){for(Ou.sort(df),n=1,o=[r=Ou[0]];n<e;++n)pf(r,(i=Ou[n])[0])||pf(r,i[1])?(hf(r[0],i[1])>hf(r[0],r[1])&&(r[1]=i[1]),hf(i[0],r[1])>hf(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(u=hf(r[1],i[0]))>a&&(a=u,Cu=i[0],zu=r[1])}return Ou=Yu=null,Cu===1/0||Pu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Cu,Pu],[zu,Ru]]},t.geoCentroid=function(t){Bu=Fu=Iu=Hu=ju=Xu=Gu=Vu=$u=Wu=Zu=0,su(t,vf);var n=$u,e=Wu,r=Zu,i=n*n+e*e+r*r;return i<Ua&&(n=Xu,e=Gu,r=Vu,Fu<Da&&(n=Iu,e=Hu,r=ju),(i=n*n+e*e+r*r)<Ua)?[NaN,NaN]:[Xa(e,n)*Fa,eu(r/Ka(i))*Fa]},t.geoCircle=function(){var t,n,e=Nf([0,0]),r=Nf(90),i=Nf(6),o={point:function(e,r){t.push(e=n(e,r)),e[0]*=Fa,e[1]*=Fa}};function a(){var a=e.apply(this,arguments),u=r.apply(this,arguments)*Ia,f=i.apply(this,arguments)*Ia;return t=[],n=kf(-a[0]*Ia,-a[1]*Ia,0).invert,Lf(o,u,f,1),a={type:"Polygon",coordinates:[t]},t=n=null,a}return a.center=function(t){return arguments.length?(e="function"==typeof t?t:Nf([+t[0],+t[1]]),a):e},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:Nf(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:Nf(+t),a):i},a},t.geoClipAntimeridian=Gf,t.geoClipCircle=Vf,t.geoClipExtent=function(){var t,n,e,r=0,i=0,o=960,a=500;return e={stream:function(e){return t&&n===e?t:t=Zf(r,i,o,a)(n=e)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=n=null,e):[[r,i],[o,a]]}}},t.geoClipRectangle=Zf,t.geoContains=function(t,n){return(t&&cc.hasOwnProperty(t.type)?cc[t.type]:lc)(t,n)},t.geoDistance=fc,t.geoGraticule=bc,t.geoGraticule10=function(){return bc()()},t.geoInterpolate=function(t,n){var e=t[0]*Ia,r=t[1]*Ia,i=n[0]*Ia,o=n[1]*Ia,a=Ga(r),u=Qa(r),f=Ga(o),c=Qa(o),s=a*Ga(e),l=a*Qa(e),h=f*Ga(i),d=f*Qa(i),p=2*eu(Ka(ru(o-r)+a*f*ru(i-e))),v=Qa(p),g=p?function(t){var n=Qa(t*=p)/v,e=Qa(p-t)/v,r=e*s+n*h,i=e*l+n*d,o=e*u+n*c;return[Xa(i,r)*Fa,Xa(o,Ka(r*r+i*i))*Fa]}:function(){return[e*Fa,r*Fa]};return g.distance=p,g},t.geoLength=oc,t.geoPath=function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),su(t,e(r))),r.result()}return o.area=function(t){return su(t,e(Sc)),Sc.result()},o.measure=function(t){return su(t,e(ds)),ds.result()},o.bounds=function(t){return su(t,e(Uc)),Uc.result()},o.centroid=function(t){return su(t,e(Zc)),Zc.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,mc):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new gs):new as(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)},t.geoAlbers=Ds,t.geoAlbersUsa=function(){var t,n,e,r,i,o,a=Ds(),u=Ls().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f=Ls().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,n){o=[t,n]}};function s(t){var n=t[0],a=t[1];return o=null,e.point(n,a),o||(r.point(n,a),o)||(i.point(n,a),o)}function l(){return t=n=null,s}return s.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?f:a).invert(t)},s.stream=function(e){return t&&n===e?t:(r=[a.stream(n=e),u.stream(e),f.stream(e)],i=r.length,t={point:function(t,n){for(var e=-1;++e<i;)r[e].point(t,n)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},s.precision=function(t){return arguments.length?(a.precision(t),u.precision(t),f.precision(t),l()):a.precision()},s.scale=function(t){return arguments.length?(a.scale(t),u.scale(.35*t),f.scale(t),s.translate(a.translate())):a.scale()},s.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),o=+t[0],s=+t[1];return e=a.translate(t).clipExtent([[o-.455*n,s-.238*n],[o+.455*n,s+.238*n]]).stream(c),r=u.translate([o-.307*n,s+.201*n]).clipExtent([[o-.425*n+Da,s+.12*n+Da],[o-.214*n-Da,s+.234*n-Da]]).stream(c),i=f.translate([o-.205*n,s+.212*n]).clipExtent([[o-.214*n+Da,s+.166*n+Da],[o-.115*n-Da,s+.234*n-Da]]).stream(c),l()},s.fitExtent=function(t,n){return xs(s,t,n)},s.fitSize=function(t,n){return ws(s,t,n)},s.fitWidth=function(t,n){return Ms(s,t,n)},s.fitHeight=function(t,n){return As(s,t,n)},s.scale(1070)},t.geoAzimuthalEqualArea=function(){return Cs(Os).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Os,t.geoAzimuthalEquidistant=function(){return Cs(Ys).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Ys,t.geoConicConformal=function(){return zs(Hs).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Hs,t.geoConicEqualArea=Ls,t.geoConicEqualAreaRaw=Rs,t.geoConicEquidistant=function(){return zs(Xs).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Xs,t.geoEqualEarth=function(){return Cs(Qs).scale(177.158)},t.geoEqualEarthRaw=Qs,t.geoEquirectangular=function(){return Cs(js).scale(152.63)},t.geoEquirectangularRaw=js,t.geoGnomonic=function(){return Cs(Js).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Js,t.geoIdentity=function(){var t,n,e,r,i,o,a=1,u=0,f=0,c=1,s=1,l=mc,h=null,d=mc;function p(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=l(d(i=t))},postclip:function(r){return arguments.length?(d=r,h=t=n=e=null,p()):d},clipExtent:function(r){return arguments.length?(d=null==r?(h=t=n=e=null,mc):Zf(h=+r[0][0],t=+r[0][1],n=+r[1][0],e=+r[1][1]),p()):null==h?null:[[h,t],[n,e]]},scale:function(t){return arguments.length?(l=Ks((a=+t)*c,a*s,u,f),p()):a},translate:function(t){return arguments.length?(l=Ks(a*c,a*s,u=+t[0],f=+t[1]),p()):[u,f]},reflectX:function(t){return arguments.length?(l=Ks(a*(c=t?-1:1),a*s,u,f),p()):c<0},reflectY:function(t){return arguments.length?(l=Ks(a*c,a*(s=t?-1:1),u,f),p()):s<0},fitExtent:function(t,n){return xs(o,t,n)},fitSize:function(t,n){return ws(o,t,n)},fitWidth:function(t,n){return Ms(o,t,n)},fitHeight:function(t,n){return As(o,t,n)}}},t.geoProjection=Cs,t.geoProjectionMutator=Ps,t.geoMercator=function(){return Fs(Bs).scale(961/Ba)},t.geoMercatorRaw=Bs,t.geoNaturalEarth1=function(){return Cs(tl).scale(175.295)},t.geoNaturalEarth1Raw=tl,t.geoOrthographic=function(){return Cs(nl).scale(249.5).clipAngle(90+Da)},t.geoOrthographicRaw=nl,t.geoStereographic=function(){return Cs(el).scale(250).clipAngle(142)},t.geoStereographicRaw=el,t.geoTransverseMercator=function(){var t=Fs(rl),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=rl,t.geoRotation=Rf,t.geoStream=su,t.geoTransform=function(t){return{stream:_s(t)}},t.cluster=function(){var t=il,n=1,e=1,r=!1;function i(i){var o,a=0;i.eachAfter(function(n){var e=n.children;e?(n.x=function(t){return t.reduce(ol,0)/t.length}(e),n.y=function(t){return 1+t.reduce(al,0)}(e)):(n.x=o?a+=t(n,o):0,n.y=0,o=n)});var u=function(t){for(var n;n=t.children;)t=n[0];return t}(i),f=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(i),c=u.x-t(u,f)/2,s=f.x+t(f,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*n,t.y=(i.y-t.y)*e}:function(t){t.x=(t.x-c)/(s-c)*n,t.y=(1-(i.y?t.y/i.y:1))*e})}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.hierarchy=fl,t.pack=function(){var t=null,n=1,e=1,r=El;function i(i){return i.x=n/2,i.y=e/2,t?i.eachBefore(Pl(t)).eachAfter(zl(r,.5)).eachBefore(Rl(1)):i.eachBefore(Pl(Cl)).eachAfter(zl(El,1)).eachAfter(zl(r,i.r/Math.min(n,e))).eachBefore(Rl(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=null==(e=n)?null:Sl(e),i):t;var e},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:kl(+t),i):r},i},t.packSiblings=function(t){return Nl(t),t},t.packEnclose=pl,t.partition=function(){var t=1,n=1,e=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=e,i.x1=t,i.y1=n/o,i.eachBefore(function(t,n){return function(r){r.children&&Dl(r,r.x0,t*(r.depth+1)/n,r.x1,t*(r.depth+2)/n);var i=r.x0,o=r.y0,a=r.x1-e,u=r.y1-e;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=u}}(n,o)),r&&i.eachBefore(Ll),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(t){return arguments.length?(e=+t,i):e},i},t.stratify=function(){var t=Yl,n=Bl;function e(e){var r,i,o,a,u,f,c,s=e.length,l=new Array(s),h={};for(i=0;i<s;++i)r=e[i],u=l[i]=new hl(r),null!=(f=t(r,i,e))&&(f+="")&&(h[c=Ul+(u.id=f)]=c in h?Ol:u);for(i=0;i<s;++i)if(u=l[i],null!=(f=n(e[i],i,e))&&(f+="")){if(!(a=h[Ul+f]))throw new Error("missing: "+f);if(a===Ol)throw new Error("ambiguous: "+f);a.children?a.children.push(u):a.children=[u],u.parent=a}else{if(o)throw new Error("multiple roots");o=u}if(!o)throw new Error("no root");if(o.parent=ql,o.eachBefore(function(t){t.depth=t.parent.depth+1,--s}).eachBefore(ll),o.parent=null,s>0)throw new Error("cycle");return o}return e.id=function(n){return arguments.length?(t=Sl(n),e):t},e.parentId=function(t){return arguments.length?(n=Sl(t),e):n},e},t.tree=function(){var t=Fl,n=1,e=1,r=null;function i(i){var f=function(t){for(var n,e,r,i,o,a=new Gl(t,0),u=[a];n=u.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(e=n.children[i]=new Gl(r[i],i)),e.parent=n;return(a.parent=new Gl(null,0)).children=[a],a}(i);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(a),r)i.eachBefore(u);else{var c=i,s=i,l=i;i.eachBefore(function(t){t.x<c.x&&(c=t),t.x>s.x&&(s=t),t.depth>l.depth&&(l=t)});var h=c===s?1:t(c,s)/2,d=h-c.x,p=n/(s.x+h+d),v=e/(l.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*v})}return i}function o(n){var e=n.children,r=n.parent.children,i=n.i?r[n.i-1]:null;if(e){!function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(n);var o=(e[0].z+e[e.length-1].z)/2;i?(n.z=i.z+t(n._,i._),n.m=n.z-o):n.z=o}else i&&(n.z=i.z+t(n._,i._));n.parent.A=function(n,e,r){if(e){for(var i,o=n,a=n,u=e,f=o.parent.children[0],c=o.m,s=a.m,l=u.m,h=f.m;u=Hl(u),o=Il(o),u&&o;)f=Il(f),(a=Hl(a)).a=n,(i=u.z+l-o.z-c+t(u._,o._))>0&&(jl(Xl(u,n,r),n,i),c+=i,s+=i),l+=u.m,c+=o.m,h+=f.m,s+=a.m;u&&!Hl(a)&&(a.t=u,a.m+=l-s),o&&!Il(f)&&(f.t=o,f.m+=c-h,r=n)}return r}(n,i,n.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=n,t.y=t.depth*e}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.treemap=function(){var t=Zl,n=!1,e=1,r=1,i=[0],o=El,a=El,u=El,f=El,c=El;function s(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(l),i=[0],n&&t.eachBefore(Ll),t}function l(n){var e=i[n.depth],r=n.x0+e,s=n.y0+e,l=n.x1-e,h=n.y1-e;l<r&&(r=l=(r+l)/2),h<s&&(s=h=(s+h)/2),n.x0=r,n.y0=s,n.x1=l,n.y1=h,n.children&&(e=i[n.depth+1]=o(n)/2,r+=c(n)-e,s+=a(n)-e,(l-=u(n)-e)<r&&(r=l=(r+l)/2),(h-=f(n)-e)<s&&(s=h=(s+h)/2),t(n,r,s,l,h))}return s.round=function(t){return arguments.length?(n=!!t,s):n},s.size=function(t){return arguments.length?(e=+t[0],r=+t[1],s):[e,r]},s.tile=function(n){return arguments.length?(t=Sl(n),s):t},s.padding=function(t){return arguments.length?s.paddingInner(t).paddingOuter(t):s.paddingInner()},s.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:kl(+t),s):o},s.paddingOuter=function(t){return arguments.length?s.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):s.paddingTop()},s.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:kl(+t),s):a},s.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:kl(+t),s):u},s.paddingBottom=function(t){return arguments.length?(f="function"==typeof t?t:kl(+t),s):f},s.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:kl(+t),s):c},s},t.treemapBinary=function(t,n,e,r,i){var o,a,u=t.children,f=u.length,c=new Array(f+1);for(c[0]=a=o=0;o<f;++o)c[o+1]=a+=u[o].value;!function t(n,e,r,i,o,a,f){if(n>=e-1){var s=u[n];return s.x0=i,s.y0=o,s.x1=a,void(s.y1=f)}for(var l=c[n],h=r/2+l,d=n+1,p=e-1;d<p;){var v=d+p>>>1;c[v]<h?d=v+1:p=v}h-c[d-1]<c[d]-h&&n+1<d&&--d;var g=c[d]-l,y=r-g;if(a-i>f-o){var _=(i*y+a*g)/r;t(n,d,g,i,o,_,f),t(d,e,y,_,o,a,f)}else{var b=(o*y+f*g)/r;t(n,d,g,i,o,a,b),t(d,e,y,i,b,a,f)}}(0,f,t.value,n,e,r,i)},t.treemapDice=Dl,t.treemapSlice=Vl,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?Vl:Dl)(t,n,e,r,i)},t.treemapSquarify=Zl,t.treemapResquarify=Ql,t.interpolate=me,t.interpolateArray=de,t.interpolateBasis=ee,t.interpolateBasisClosed=re,t.interpolateDate=pe,t.interpolateDiscrete=function(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}},t.interpolateHue=function(t,n){var e=ae(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}},t.interpolateNumber=ve,t.interpolateObject=ge,t.interpolateRound=xe,t.interpolateString=be,t.interpolateTransformCss=Ce,t.interpolateTransformSvg=Pe,t.interpolateZoom=qe,t.interpolateRgb=ce,t.interpolateRgbBasis=le,t.interpolateRgbBasisClosed=he,t.interpolateHsl=Ye,t.interpolateHslLong=Be,t.interpolateLab=function(t,n){var e=fe((t=Un(t)).l,(n=Un(n)).l),r=fe(t.a,n.a),i=fe(t.b,n.b),o=fe(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}},t.interpolateHcl=Ie,t.interpolateHclLong=He,t.interpolateCubehelix=Xe,t.interpolateCubehelixLong=Ge,t.piecewise=function(t,n){for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[n](t-n)}},t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},t.path=Gi,t.polygonArea=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var n,e,r=-1,i=t.length,o=0,a=0,u=t[i-1],f=0;++r<i;)n=u,u=t[r],f+=e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o/(f*=3),a/f]},t.polygonHull=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(Jl),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=Kl(r),a=Kl(i),u=a[0]===o[0],f=a[a.length-1]===o[o.length-1],c=[];for(n=o.length-1;n>=0;--n)c.push(t[r[o[n]][2]]);for(n=+u;n<a.length-f;++n)c.push(t[r[a[n]][2]]);return c},t.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],a=n[0],u=n[1],f=o[0],c=o[1],s=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>u!=c>u&&a<(f-e)*(u-r)/(c-r)+e&&(s=!s),f=e,c=r;return s},t.polygonLength=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],f=0;++r<i;)n=a,e=u,n-=a=(o=t[r])[0],e-=u=o[1],f+=Math.sqrt(n*n+e*e);return f},t.quadtree=ra,t.randomUniform=nh,t.randomNormal=eh,t.randomLogNormal=rh,t.randomBates=oh,t.randomIrwinHall=ih,t.randomExponential=ah,t.scaleBand=hh,t.scalePoint=function(){return function t(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return t(e())},n}(hh().paddingInner(1))},t.scaleIdentity=function t(){var n=[0,1];function e(t){return+t}return e.invert=e,e.domain=e.range=function(t){return arguments.length?(n=fh.call(t,ph),e):n.slice()},e.copy=function(){return t().domain(n)},xh(e)},t.scaleLinear=function t(){var n=mh(gh,ve);return n.copy=function(){return bh(n,t())},xh(n)},t.scaleLog=function n(){var e=mh(Mh,Ah).domain([1,10]),r=e.domain,i=10,o=Sh(10),a=Nh(10);function u(){return o=Sh(i),a=Nh(i),r()[0]<0&&(o=Eh(o),a=Eh(a)),e}return e.base=function(t){return arguments.length?(i=+t,u()):i},e.domain=function(t){return arguments.length?(r(t),u()):r()},e.ticks=function(t){var n,e=r(),u=e[0],f=e[e.length-1];(n=f<u)&&(h=u,u=f,f=h);var c,s,l,h=o(u),d=o(f),p=null==t?10:+t,v=[];if(!(i%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,u>0){for(;h<d;++h)for(s=1,c=a(h);s<i;++s)if(!((l=c*s)<u)){if(l>f)break;v.push(l)}}else for(;h<d;++h)for(s=i-1,c=a(h);s>=1;--s)if(!((l=c*s)<u)){if(l>f)break;v.push(l)}}else v=m(h,d,Math.min(d-h,p)).map(a);return n?v.reverse():v},e.tickFormat=function(n,r){if(null==r&&(r=10===i?".0e":","),"function"!=typeof r&&(r=t.format(r)),n===1/0)return r;null==n&&(n=10);var u=Math.max(1,i*n/e.ticks().length);return function(t){var n=t/a(Math.round(o(t)));return n*i<i-.5&&(n*=i),n<=u?r(t):""}},e.nice=function(){return r(wh(r(),{floor:function(t){return a(Math.floor(o(t)))},ceil:function(t){return a(Math.ceil(o(t)))}}))},e.copy=function(){return bh(e,n().base(i))},e},t.scaleOrdinal=lh,t.scaleImplicit=sh,t.scalePow=Ch,t.scaleSqrt=function(){return Ch().exponent(.5)},t.scaleQuantile=function t(){var e=[],r=[],o=[];function a(){var t=0,n=Math.max(1,r.length);for(o=new Array(n-1);++t<n;)o[t-1]=A(e,t/n);return u}function u(t){if(!isNaN(t=+t))return r[i(o,t)]}return u.invertExtent=function(t){var n=r.indexOf(t);return n<0?[NaN,NaN]:[n>0?o[n-1]:e[0],n<o.length?o[n]:e[e.length-1]]},u.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r,i=0,o=t.length;i<o;++i)null==(r=t[i])||isNaN(r=+r)||e.push(r);return e.sort(n),a()},u.range=function(t){return arguments.length?(r=ch.call(t),a()):r.slice()},u.quantiles=function(){return o.slice()},u.copy=function(){return t().domain(e).range(r)},u},t.scaleQuantize=function t(){var n=0,e=1,r=1,o=[.5],a=[0,1];function u(t){if(t<=t)return a[i(o,t,0,r)]}function f(){var t=-1;for(o=new Array(r);++t<r;)o[t]=((t+1)*e-(t-r)*n)/(r+1);return u}return u.domain=function(t){return arguments.length?(n=+t[0],e=+t[1],f()):[n,e]},u.range=function(t){return arguments.length?(r=(a=ch.call(t)).length-1,f()):a.slice()},u.invertExtent=function(t){var i=a.indexOf(t);return i<0?[NaN,NaN]:i<1?[n,o[0]]:i>=r?[o[r-1],e]:[o[i-1],o[i]]},u.copy=function(){return t().domain([n,e]).range(a)},xh(u)},t.scaleThreshold=function t(){var n=[.5],e=[0,1],r=1;function o(t){if(t<=t)return e[i(n,t,0,r)]}return o.domain=function(t){return arguments.length?(n=ch.call(t),r=Math.min(n.length,e.length-1),o):n.slice()},o.range=function(t){return arguments.length?(e=ch.call(t),r=Math.min(n.length,e.length-1),o):e.slice()},o.invertExtent=function(t){var r=e.indexOf(t);return[n[r-1],n[r]]},o.copy=function(){return t().domain(n).range(e)},o},t.scaleTime=function(){return cv(cd,ud,Vh,jh,Ih,Bh,Oh,Lh,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return cv(Ld,zd,_d,vd,dd,ld,Oh,Lh,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.scaleSequential=function t(n){var e=0,r=1,i=1,o=!1;function a(t){var r=(t-e)*i;return n(o?Math.max(0,Math.min(1,r)):r)}return a.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],i=e===r?0:1/(r-e),a):[e,r]},a.clamp=function(t){return arguments.length?(o=!!t,a):o},a.interpolator=function(t){return arguments.length?(n=t,a):n},a.copy=function(){return t(n).domain([e,r]).clamp(o)},xh(a)},t.scaleDiverging=function t(n){var e=0,r=.5,i=1,o=1,a=1,u=!1;function f(t){var e=.5+((t=+t)-r)*(t<r?o:a);return n(u?Math.max(0,Math.min(1,e)):e)}return f.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],i=+t[2],o=e===r?0:.5/(r-e),a=r===i?0:.5/(i-r),f):[e,r,i]},f.clamp=function(t){return arguments.length?(u=!!t,f):u},f.interpolator=function(t){return arguments.length?(n=t,f):n},f.copy=function(){return t(n).domain([e,r,i]).clamp(u)},xh(f)},t.schemeCategory10=lv,t.schemeAccent=hv,t.schemeDark2=dv,t.schemePaired=pv,t.schemePastel1=vv,t.schemePastel2=gv,t.schemeSet1=yv,t.schemeSet2=_v,t.schemeSet3=bv,t.interpolateBrBG=wv,t.schemeBrBG=xv,t.interpolatePRGn=Av,t.schemePRGn=Mv,t.interpolatePiYG=Nv,t.schemePiYG=Tv,t.interpolatePuOr=Ev,t.schemePuOr=Sv,t.interpolateRdBu=Cv,t.schemeRdBu=kv,t.interpolateRdGy=zv,t.schemeRdGy=Pv,t.interpolateRdYlBu=Lv,t.schemeRdYlBu=Rv,t.interpolateRdYlGn=Uv,t.schemeRdYlGn=Dv,t.interpolateSpectral=Ov,t.schemeSpectral=qv,t.interpolateBuGn=Bv,t.schemeBuGn=Yv,t.interpolateBuPu=Iv,t.schemeBuPu=Fv,t.interpolateGnBu=jv,t.schemeGnBu=Hv,t.interpolateOrRd=Gv,t.schemeOrRd=Xv,t.interpolatePuBuGn=$v,t.schemePuBuGn=Vv,t.interpolatePuBu=Zv,t.schemePuBu=Wv,t.interpolatePuRd=Jv,t.schemePuRd=Qv,t.interpolateRdPu=tg,t.schemeRdPu=Kv,t.interpolateYlGnBu=eg,t.schemeYlGnBu=ng,t.interpolateYlGn=ig,t.schemeYlGn=rg,t.interpolateYlOrBr=ag,t.schemeYlOrBr=og,t.interpolateYlOrRd=fg,t.schemeYlOrRd=ug,t.interpolateBlues=sg,t.schemeBlues=cg,t.interpolateGreens=hg,t.schemeGreens=lg,t.interpolateGreys=pg,t.schemeGreys=dg,t.interpolatePurples=gg,t.schemePurples=vg,t.interpolateReds=_g,t.schemeReds=yg,t.interpolateOranges=mg,t.schemeOranges=bg,t.interpolateCubehelixDefault=xg,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Ag.h=360*t-100,Ag.s=1.5-1.5*n,Ag.l=.8-.9*n,Ag+""},t.interpolateWarm=wg,t.interpolateCool=Mg,t.interpolateSinebow=function(t){var n;return t=(.5-t)*Math.PI,Tg.r=255*(n=Math.sin(t))*n,Tg.g=255*(n=Math.sin(t+Ng))*n,Tg.b=255*(n=Math.sin(t+Sg))*n,Tg+""},t.interpolateViridis=kg,t.interpolateMagma=Cg,t.interpolateInferno=Pg,t.interpolatePlasma=zg,t.create=function(t){return Dt(W(t).call(document.documentElement))},t.creator=W,t.local=qt,t.matcher=rt,t.mouse=Ft,t.namespace=$,t.namespaces=V,t.clientPoint=Bt,t.select=Dt,t.selectAll=function(t){return"string"==typeof t?new Rt([document.querySelectorAll(t)],[document.documentElement]):new Rt([null==t?[]:t],zt)},t.selection=Lt,t.selector=Q,t.selectorAll=K,t.style=lt,t.touch=It,t.touches=function(t,n){null==n&&(n=Yt().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=Bt(t,n[e]);return i},t.window=st,t.customEvent=Ct,t.arc=function(){var t=Gg,n=Vg,e=Rg(0),r=null,i=$g,o=Wg,a=Zg,u=null;function f(){var f,c,s,l=+t.apply(this,arguments),h=+n.apply(this,arguments),d=i.apply(this,arguments)-Hg,p=o.apply(this,arguments)-Hg,v=Lg(p-d),g=p>d;if(u||(u=f=Gi()),h<l&&(c=h,h=l,l=c),h>Fg)if(v>jg-Fg)u.moveTo(h*Ug(d),h*Yg(d)),u.arc(0,0,h,d,p,!g),l>Fg&&(u.moveTo(l*Ug(p),l*Yg(p)),u.arc(0,0,l,p,d,g));else{var y,_,b=d,m=p,x=d,w=p,M=v,A=v,T=a.apply(this,arguments)/2,N=T>Fg&&(r?+r.apply(this,arguments):Bg(l*l+h*h)),S=Og(Lg(h-l)/2,+e.apply(this,arguments)),E=S,k=S;if(N>Fg){var C=Xg(N/l*Yg(T)),P=Xg(N/h*Yg(T));(M-=2*C)>Fg?(x+=C*=g?1:-1,w-=C):(M=0,x=w=(d+p)/2),(A-=2*P)>Fg?(b+=P*=g?1:-1,m-=P):(A=0,b=m=(d+p)/2)}var z=h*Ug(b),R=h*Yg(b),L=l*Ug(w),D=l*Yg(w);if(S>Fg){var U=h*Ug(m),q=h*Yg(m),O=l*Ug(x),Y=l*Yg(x);if(v<Ig){var B=M>Fg?function(t,n,e,r,i,o,a,u){var f=e-t,c=r-n,s=a-i,l=u-o,h=(s*(n-o)-l*(t-i))/(l*f-s*c);return[t+h*f,n+h*c]}(z,R,O,Y,U,q,L,D):[L,D],F=z-B[0],I=R-B[1],H=U-B[0],j=q-B[1],X=1/Yg(((s=(F*H+I*j)/(Bg(F*F+I*I)*Bg(H*H+j*j)))>1?0:s<-1?Ig:Math.acos(s))/2),G=Bg(B[0]*B[0]+B[1]*B[1]);E=Og(S,(l-G)/(X-1)),k=Og(S,(h-G)/(X+1))}}A>Fg?k>Fg?(y=Qg(O,Y,z,R,h,k,g),_=Qg(U,q,L,D,h,k,g),u.moveTo(y.cx+y.x01,y.cy+y.y01),k<S?u.arc(y.cx,y.cy,k,Dg(y.y01,y.x01),Dg(_.y01,_.x01),!g):(u.arc(y.cx,y.cy,k,Dg(y.y01,y.x01),Dg(y.y11,y.x11),!g),u.arc(0,0,h,Dg(y.cy+y.y11,y.cx+y.x11),Dg(_.cy+_.y11,_.cx+_.x11),!g),u.arc(_.cx,_.cy,k,Dg(_.y11,_.x11),Dg(_.y01,_.x01),!g))):(u.moveTo(z,R),u.arc(0,0,h,b,m,!g)):u.moveTo(z,R),l>Fg&&M>Fg?E>Fg?(y=Qg(L,D,U,q,l,-E,g),_=Qg(z,R,O,Y,l,-E,g),u.lineTo(y.cx+y.x01,y.cy+y.y01),E<S?u.arc(y.cx,y.cy,E,Dg(y.y01,y.x01),Dg(_.y01,_.x01),!g):(u.arc(y.cx,y.cy,E,Dg(y.y01,y.x01),Dg(y.y11,y.x11),!g),u.arc(0,0,l,Dg(y.cy+y.y11,y.cx+y.x11),Dg(_.cy+_.y11,_.cx+_.x11),g),u.arc(_.cx,_.cy,E,Dg(_.y11,_.x11),Dg(_.y01,_.x01),!g))):u.arc(0,0,l,w,x,g):u.lineTo(L,D)}else u.moveTo(0,0);if(u.closePath(),f)return u=null,f+""||null}return f.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Ig/2;return[Ug(r)*e,Yg(r)*e]},f.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Rg(+n),f):t},f.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Rg(+t),f):n},f.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Rg(+t),f):e},f.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Rg(+t),f):r},f.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Rg(+t),f):i},f.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Rg(+t),f):o},f.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Rg(+t),f):a},f.context=function(t){return arguments.length?(u=null==t?null:t,f):u},f},t.area=ry,t.line=ey,t.pie=function(){var t=oy,n=iy,e=null,r=Rg(0),i=Rg(jg),o=Rg(0);function a(a){var u,f,c,s,l,h=a.length,d=0,p=new Array(h),v=new Array(h),g=+r.apply(this,arguments),y=Math.min(jg,Math.max(-jg,i.apply(this,arguments)-g)),_=Math.min(Math.abs(y)/h,o.apply(this,arguments)),b=_*(y<0?-1:1);for(u=0;u<h;++u)(l=v[p[u]=u]=+t(a[u],u,a))>0&&(d+=l);for(null!=n?p.sort(function(t,e){return n(v[t],v[e])}):null!=e&&p.sort(function(t,n){return e(a[t],a[n])}),u=0,c=d?(y-h*b)/d:0;u<h;++u,g=s)f=p[u],s=g+((l=v[f])>0?l*c:0)+b,v[f]={data:a[f],index:u,value:l,startAngle:g,endAngle:s,padAngle:_};return v}return a.value=function(n){return arguments.length?(t="function"==typeof n?n:Rg(+n),a):t},a.sortValues=function(t){return arguments.length?(n=t,e=null,a):n},a.sort=function(t){return arguments.length?(e=t,n=null,a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Rg(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Rg(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Rg(+t),a):o},a},t.areaRadial=ly,t.radialArea=ly,t.lineRadial=sy,t.radialLine=sy,t.pointRadial=hy,t.linkHorizontal=function(){return gy(yy)},t.linkVertical=function(){return gy(_y)},t.linkRadial=function(){var t=gy(by);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){var t=Rg(my),n=Rg(64),e=null;function r(){var r;if(e||(e=r=Gi()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),r)return e=null,r+""||null}return r.type=function(n){return arguments.length?(t="function"==typeof n?n:Rg(n),r):t},r.size=function(t){return arguments.length?(n="function"==typeof t?t:Rg(+t),r):n},r.context=function(t){return arguments.length?(e=null==t?null:t,r):e},r},t.symbols=Uy,t.symbolCircle=my,t.symbolCross=xy,t.symbolDiamond=Ay,t.symbolSquare=ky,t.symbolStar=Ey,t.symbolTriangle=Py,t.symbolWye=Dy,t.curveBasisClosed=function(t){return new By(t)},t.curveBasisOpen=function(t){return new Fy(t)},t.curveBasis=function(t){return new Yy(t)},t.curveBundle=Hy,t.curveCardinalClosed=$y,t.curveCardinalOpen=Zy,t.curveCardinal=Gy,t.curveCatmullRomClosed=n_,t.curveCatmullRomOpen=r_,t.curveCatmullRom=Ky,t.curveLinearClosed=function(t){return new i_(t)},t.curveLinear=Kg,t.curveMonotoneX=function(t){return new c_(t)},t.curveMonotoneY=function(t){return new s_(t)},t.curveNatural=function(t){return new h_(t)},t.curveStep=function(t){return new p_(t,.5)},t.curveStepAfter=function(t){return new p_(t,1)},t.curveStepBefore=function(t){return new p_(t,0)},t.stack=function(){var t=Rg([]),n=g_,e=v_,r=y_;function i(i){var o,a,u=t.apply(this,arguments),f=i.length,c=u.length,s=new Array(c);for(o=0;o<c;++o){for(var l,h=u[o],d=s[o]=new Array(f),p=0;p<f;++p)d[p]=l=[0,+r(i[p],h,p,i)],l.data=i[p];d.key=h}for(o=0,a=n(s);o<c;++o)s[a[o]].index=o;return e(s,a),s}return i.keys=function(n){return arguments.length?(t="function"==typeof n?n:Rg(dy.call(n)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:Rg(+t),i):r},i.order=function(t){return arguments.length?(n=null==t?g_:"function"==typeof t?t:Rg(dy.call(t)),i):n},i.offset=function(t){return arguments.length?(e=null==t?v_:t,i):e},i},t.stackOffsetExpand=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,a=t[0].length;o<a;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}v_(t,n)}},t.stackOffsetDiverging=function(t,n){if((u=t.length)>1)for(var e,r,i,o,a,u,f=0,c=t[n[0]].length;f<c;++f)for(o=a=0,e=0;e<u;++e)(i=(r=t[n[e]][f])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},t.stackOffsetNone=v_,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<e;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}v_(t,n)}},t.stackOffsetWiggle=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,a=1;a<r;++a){for(var u=0,f=0,c=0;u<i;++u){for(var s=t[n[u]],l=s[a][1]||0,h=(l-(s[a-1][1]||0))/2,d=0;d<u;++d){var p=t[n[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}f+=l,c+=h*l}e[a-1][1]+=e[a-1][0]=o,f&&(o-=c/f)}e[a-1][1]+=e[a-1][0]=o,v_(t,n)}},t.stackOrderAscending=__,t.stackOrderDescending=function(t){return __(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,r=t.length,i=t.map(b_),o=g_(t).sort(function(t,n){return i[n]-i[t]}),a=0,u=0,f=[],c=[];for(n=0;n<r;++n)e=o[n],a<u?(a+=i[e],f.push(e)):(u+=i[e],c.push(e));return c.reverse().concat(f)},t.stackOrderNone=g_,t.stackOrderReverse=function(t){return g_(t).reverse()},t.timeInterval=Rh,t.timeMillisecond=Lh,t.timeMilliseconds=Dh,t.utcMillisecond=Lh,t.utcMilliseconds=Dh,t.timeSecond=Oh,t.timeSeconds=Yh,t.utcSecond=Oh,t.utcSeconds=Yh,t.timeMinute=Bh,t.timeMinutes=Fh,t.timeHour=Ih,t.timeHours=Hh,t.timeDay=jh,t.timeDays=Xh,t.timeWeek=Vh,t.timeWeeks=td,t.timeSunday=Vh,t.timeSundays=td,t.timeMonday=$h,t.timeMondays=nd,t.timeTuesday=Wh,t.timeTuesdays=ed,t.timeWednesday=Zh,t.timeWednesdays=rd,t.timeThursday=Qh,t.timeThursdays=id,t.timeFriday=Jh,t.timeFridays=od,t.timeSaturday=Kh,t.timeSaturdays=ad,t.timeMonth=ud,t.timeMonths=fd,t.timeYear=cd,t.timeYears=sd,t.utcMinute=ld,t.utcMinutes=hd,t.utcHour=dd,t.utcHours=pd,t.utcDay=vd,t.utcDays=gd,t.utcWeek=_d,t.utcWeeks=Td,t.utcSunday=_d,t.utcSundays=Td,t.utcMonday=bd,t.utcMondays=Nd,t.utcTuesday=md,t.utcTuesdays=Sd,t.utcWednesday=xd,t.utcWednesdays=Ed,t.utcThursday=wd,t.utcThursdays=kd,t.utcFriday=Md,t.utcFridays=Cd,t.utcSaturday=Ad,t.utcSaturdays=Pd,t.utcMonth=zd,t.utcMonths=Rd,t.utcYear=Ld,t.utcYears=Dd,t.timeFormatDefaultLocale=Qp,t.timeFormatLocale=Yd,t.isoFormat=Jp,t.isoParse=Kp,t.now=ir,t.timer=ur,t.timerFlush=fr,t.timeout=hr,t.interval=function(t,n,e){var r=new ar,i=n;return null==n?(r.restart(t,n,e),r):(n=+n,e=null==e?ir():+e,r.restart(function o(a){a+=i,r.restart(o,i+=n,e),t(a)},n,e),r)},t.transition=zr,t.active=function(t,n){var e,r,i=t.__transition;if(i)for(r in n=null==n?null:n+"",i)if((e=i[r]).state>gr&&e.name===n)return new Pr([[t]],li,n,+r);return null},t.interrupt=Nr,t.voronoi=function(){var t=x_,n=w_,e=null;function r(r){return new eb(r.map(function(e,i){var o=[Math.round(t(e,i,r)/K_)*K_,Math.round(n(e,i,r)/K_)*K_];return o.index=i,o.data=e,o}),e)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(n){return arguments.length?(t="function"==typeof n?n:m_(+n),r):t},r.y=function(t){return arguments.length?(n="function"==typeof t?t:m_(+t),r):n},r.extent=function(t){return arguments.length?(e=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):e&&[[e[0][0],e[0][1]],[e[1][0],e[1][1]]]},r.size=function(t){return arguments.length?(e=null==t?null:[[0,0],[+t[0],+t[1]]],r):e&&[e[1][0]-e[0][0],e[1][1]-e[0][1]]},r},t.zoom=function(){var n,e,r=sb,i=lb,o=vb,a=db,u=pb,f=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],s=250,l=qe,h=[],d=I("start","zoom","end"),p=500,v=150,g=0;function y(t){t.property("__zoom",hb).on("wheel.zoom",A).on("mousedown.zoom",T).on("dblclick.zoom",N).filter(u).on("touchstart.zoom",S).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(t,n){return(n=Math.max(f[0],Math.min(f[1],n)))===t.k?t:new ob(n,t.x,t.y)}function b(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new ob(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,n,e){t.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=w(this,t),o=i.apply(this,t),a=e||m(o),u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),f=this.__zoom,c="function"==typeof n?n.apply(this,t):n,s=l(f.invert(a).concat(u/f.k),c.invert(a).concat(u/c.k));return function(t){if(1===t)t=c;else{var n=s(t),e=u/n[2];t=new ob(e,a[0]-n[0]*e,a[1]-n[1]*e)}r.zoom(null,t)}})}function w(t,n){for(var e,r=0,i=h.length;r<i;++r)if((e=h[r]).that===t)return e;return new M(t,n)}function M(t,n){this.that=t,this.args=n,this.index=-1,this.active=0,this.extent=i.apply(t,n)}function A(){if(r.apply(this,arguments)){var t=w(this,arguments),n=this.__zoom,e=Math.max(f[0],Math.min(f[1],n.k*Math.pow(2,a.apply(this,arguments)))),i=Ft(this);if(t.wheel)t.mouse[0][0]===i[0]&&t.mouse[0][1]===i[1]||(t.mouse[1]=n.invert(t.mouse[0]=i)),clearTimeout(t.wheel);else{if(n.k===e)return;t.mouse=[i,n.invert(i)],Nr(this),t.start()}cb(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},v),t.zoom("mouse",o(b(_(n,e),t.mouse[0],t.mouse[1]),t.extent,c))}}function T(){if(!e&&r.apply(this,arguments)){var n=w(this,arguments),i=Dt(t.event.view).on("mousemove.zoom",function(){if(cb(),!n.moved){var e=t.event.clientX-u,r=t.event.clientY-f;n.moved=e*e+r*r>g}n.zoom("mouse",o(b(n.that.__zoom,n.mouse[0]=Ft(n.that),n.mouse[1]),n.extent,c))},!0).on("mouseup.zoom",function(){i.on("mousemove.zoom mouseup.zoom",null),Gt(t.event.view,n.moved),cb(),n.end()},!0),a=Ft(this),u=t.event.clientX,f=t.event.clientY;Xt(t.event.view),fb(),n.mouse=[a,this.__zoom.invert(a)],Nr(this),n.start()}}function N(){if(r.apply(this,arguments)){var n=this.__zoom,e=Ft(this),a=n.invert(e),u=n.k*(t.event.shiftKey?.5:2),f=o(b(_(n,u),e,a),i.apply(this,arguments),c);cb(),s>0?Dt(this).transition().duration(s).call(x,f,e):Dt(this).call(y.transform,f)}}function S(){if(r.apply(this,arguments)){var e,i,o,a,u=w(this,arguments),f=t.event.changedTouches,c=f.length;for(fb(),i=0;i<c;++i)a=[a=It(this,f,(o=f[i]).identifier),this.__zoom.invert(a),o.identifier],u.touch0?u.touch1||(u.touch1=a):(u.touch0=a,e=!0);if(n&&(n=clearTimeout(n),!u.touch1))return u.end(),void((a=Dt(this).on("dblclick.zoom"))&&a.apply(this,arguments));e&&(n=setTimeout(function(){n=null},p),Nr(this),u.start())}}function E(){var e,r,i,a,u=w(this,arguments),f=t.event.changedTouches,s=f.length;for(cb(),n&&(n=clearTimeout(n)),e=0;e<s;++e)i=It(this,f,(r=f[e]).identifier),u.touch0&&u.touch0[2]===r.identifier?u.touch0[0]=i:u.touch1&&u.touch1[2]===r.identifier&&(u.touch1[0]=i);if(r=u.that.__zoom,u.touch1){var l=u.touch0[0],h=u.touch0[1],d=u.touch1[0],p=u.touch1[1],v=(v=d[0]-l[0])*v+(v=d[1]-l[1])*v,g=(g=p[0]-h[0])*g+(g=p[1]-h[1])*g;r=_(r,Math.sqrt(v/g)),i=[(l[0]+d[0])/2,(l[1]+d[1])/2],a=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!u.touch0)return;i=u.touch0[0],a=u.touch0[1]}u.zoom("touch",o(b(r,i,a),u.extent,c))}function k(){var n,r,i=w(this,arguments),o=t.event.changedTouches,a=o.length;for(fb(),e&&clearTimeout(e),e=setTimeout(function(){e=null},p),n=0;n<a;++n)r=o[n],i.touch0&&i.touch0[2]===r.identifier?delete i.touch0:i.touch1&&i.touch1[2]===r.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}return y.transform=function(t,n){var e=t.selection?t.selection():t;e.property("__zoom",hb),t!==e?x(t,n):e.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},y.scaleBy=function(t,n){y.scaleTo(t,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},y.scaleTo=function(t,n){y.transform(t,function(){var t=i.apply(this,arguments),e=this.__zoom,r=m(t),a=e.invert(r),u="function"==typeof n?n.apply(this,arguments):n;return o(b(_(e,u),r,a),t,c)})},y.translateBy=function(t,n,e){y.transform(t,function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),i.apply(this,arguments),c)})},y.translateTo=function(t,n,e){y.transform(t,function(){var t=i.apply(this,arguments),r=this.__zoom,a=m(t);return o(ab.translate(a[0],a[1]).scale(r.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,c)})},M.prototype={start:function(){return 1==++this.active&&(this.index=h.push(this)-1,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(h.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Ct(new ib(y,t,this.that.__zoom),d.apply,d,[t,this.that,this.args])}},y.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:rb(+t),y):a},y.filter=function(t){return arguments.length?(r="function"==typeof t?t:rb(!!t),y):r},y.touchable=function(t){return arguments.length?(u="function"==typeof t?t:rb(!!t),y):u},y.extent=function(t){return arguments.length?(i="function"==typeof t?t:rb([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):i},y.scaleExtent=function(t){return arguments.length?(f[0]=+t[0],f[1]=+t[1],y):[f[0],f[1]]},y.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],y):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},y.constrain=function(t){return arguments.length?(o=t,y):o},y.duration=function(t){return arguments.length?(s=+t,y):s},y.interpolate=function(t){return arguments.length?(l=t,y):l},y.on=function(){var t=d.on.apply(d,arguments);return t===d?y:t},y.clickDistance=function(t){return arguments.length?(g=(t=+t)*t,y):Math.sqrt(g)},y},t.zoomTransform=ub,t.zoomIdentity=ab,Object.defineProperty(t,"__esModule",{value:!0})});
</script><script>/*

 Lodash <https://lodash.com/>
 Copyright JS Foundation and other contributors <https://js.foundation/>
 Released under MIT license <https://lodash.com/license>
 Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/
(function(){var undefined;var VERSION="4.17.5";var LARGE_ARRAY_SIZE=200;var CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q\x3dponyfill.",FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var MAX_MEMOIZE_SIZE=500;var PLACEHOLDER="__lodash_placeholder__";var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=
8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=800,HOT_SPAN=16;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157E308,NAN=0/0;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var wrapFlags=[["ary",
WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]];var argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",
mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",
int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=
RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);var reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/;var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var reNoMatch=/($^)/;var reUnescapedString=
/['\n\r\u2028\u2029\\]/g;var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange;var rsApos="['\u2019]",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral=
"[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d";var rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+
")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?\x3d\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?\x3d\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")";var reApos=RegExp(rsApos,"g");var reComboMark=RegExp(rsCombo,"g");var reUnicode=RegExp(rsFitz+"(?\x3d"+rsFitz+")|"+rsSymbol+rsSeq,"g");var reUnicodeWord=RegExp([rsUpper+"?"+
rsLower+"+"+rsOptContrLower+"(?\x3d"+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?\x3d"+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");var reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var contextProps=["Array","Buffer","DataView",
"Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=
typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=
cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;
cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var deburredLetters={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i",
"\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o","\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C",
"\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i",
"\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S",
"\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe",
"\u0153":"oe","\u0149":"'n","\u017f":"s"};var htmlEscapes={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;"};var htmlUnescapes={"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"',"\x26#39;":"'"};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeParseFloat=parseFloat,freeParseInt=parseInt;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&
self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsArrayBuffer=nodeUtil&&
nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,
setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length)if(iteratee(array[index],index,array)===false)break;return array}function arrayEachRight(array,iteratee){var length=array==null?0:array.length;while(length--)if(iteratee(array[length],length,array)===false)break;
return array}function arrayEvery(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length)if(!predicate(array[index],index,array))return false;return true}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array))result[resIndex++]=value}return result}function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,
value,0)>-1}function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length)if(comparator(value,array[index]))return true;return false}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length)array[offset+index]=
values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length)accumulator=array[++index];while(++index<length)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array==null?0:array.length;if(initAccum&&length)accumulator=array[--length];while(length--)accumulator=iteratee(accumulator,array[length],length,array);
return accumulator}function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length)if(predicate(array[index],index,array))return true;return false}var asciiSize=baseProperty("length");function asciiToArray(string){return string.split("")}function asciiWords(string){return string.match(reAsciiWord)||[]}function baseFindKey(collection,predicate,eachFunc){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=key;
return false}});return result}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){var index=fromIndex-1,length=array.length;while(++index<
length)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){var length=array==null?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyOf(object){return function(key){return object==null?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,
function(value,index,collection){accumulator=initAccum?(initAccum=false,value):iteratee(accumulator,value,index,collection)});return accumulator}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--)array[length]=array[length].value;return array}function baseSum(array,iteratee){var result,index=-1,length=array.length;while(++index<length){var current=iteratee(array[index]);if(current!==undefined)result=result===undefined?current:result+current}return result}
function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n)result[index]=iteratee(index);return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;
while(++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1);return index}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1);return index}function countHolders(array,placeholder){var length=array.length,result=0;while(length--)if(array[length]===placeholder)++result;return result}var deburrLetter=basePropertyOf(deburredLetters);var escapeHtmlChar=basePropertyOf(htmlEscapes);function escapeStringChar(chr){return"\\"+
stringEscapes[chr]}function getValue(object,key){return object==null?undefined:object[key]}function hasUnicode(string){return reHasUnicode.test(string)}function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function iteratorToArray(iterator){var data,result=[];while(!(data=iterator.next()).done)result.push(data.value);return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function overArg(func,
transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value===placeholder||value===PLACEHOLDER){array[index]=PLACEHOLDER;result[resIndex++]=index}}return result}function safeGet(object,key){return key=="__proto__"?undefined:object[key]}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});
return result}function setToPairs(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=[value,value]});return result}function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length)if(array[index]===value)return index;return-1}function strictLastIndexOf(array,value,fromIndex){var index=fromIndex+1;while(index--)if(array[index]===value)return index;return index}function stringSize(string){return hasUnicode(string)?unicodeSize(string):
asciiSize(string)}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}var unescapeHtmlChar=basePropertyOf(htmlUnescapes);function unicodeSize(string){var result=reUnicode.lastIndex=0;while(reUnicode.test(string))++result;return result}function unicodeToArray(string){return string.match(reUnicode)||[]}function unicodeWords(string){return string.match(reUnicodeWord)||[]}var runInContext=function runInContext(context){context=context==null?root:_.defaults(root.Object(),
context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=context["__core-js_shared__"];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var maskSrcKey=function(){var uid=
/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var nativeObjectToString=objectProto.toString;var objectCtorString=funcToString.call(Object);var oldDash=root._;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=
Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined;var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var ctxClearTimeout=context.clearTimeout!==
root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout;var nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=
Math.random,nativeReverse=arrayProto.reverse;var DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create");var metaMap=WeakMap&&new WeakMap;var realNames={};var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?
Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);
object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value;this.__actions__=[];this.__chain__=!!chainAll;this.__index__=0;this.__values__=undefined}lodash.templateSettings={"escape":reEscape,"evaluate":reEvaluate,"interpolate":reInterpolate,"variable":"","imports":{"_":lodash}};lodash.prototype=baseLodash.prototype;lodash.prototype.constructor=lodash;LodashWrapper.prototype=baseCreate(baseLodash.prototype);
LodashWrapper.prototype.constructor=LodashWrapper;function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=MAX_ARRAY_LENGTH;this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=copyArray(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=copyArray(this.__iteratees__);result.__takeCount__=this.__takeCount__;
result.__views__=copyArray(this.__views__);return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,
iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG)value=computed;else if(!computed)if(type==LAZY_FILTER_FLAG)continue outer;
else break outer}result[resIndex++]=value}return result}LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;
return result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;
Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[];this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return false;var lastIndex=data.length-1;if(index==lastIndex)data.pop();
else splice.call(data,index,1);--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else data[index][1]=value;return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=
listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0;this.__data__={"hash":new Hash,"map":new (Map||ListCache),"string":new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,
key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;
while(++index<length)this.add(values[index])}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}function setCacheHas(value){return this.__data__.has(value)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);
this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;
Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key==
"offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length))))result.push(key);return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||
value===undefined&&!(key in object))baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object))baseAssignValue(object,key,value)}function assocIndexOf(array,key){var length=array.length;while(length--)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,
value,iteratee(value),collection)});return accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty)defineProperty(object,key,{"configurable":true,"enumerable":true,"value":value,"writable":true});else object[key]=value}function baseAt(object,paths){var index=-1,length=paths.length,result=
Array(length),skip=object==null;while(++index<length)result[index]=skip?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){if(number===number){if(upper!==undefined)number=number<=upper?number:upper;if(lower!==undefined)number=number>=lower?number:lower}return number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer)result=object?
customizer(value,key,object,stack):customizer(value);if(result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result,
value)):copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result);if(isSet(value)){value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))});return result}if(isMap(value)){value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,
stack))});return result}var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))});return result}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}function baseConformsTo(object,source,props){var length=props.length;
if(object==null)return!length;object=Object(object);while(length--){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value))return false}return true}function baseDelay(func,wait,args){if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,
result=[],valuesLength=values.length;if(!length)return result;if(iteratee)values=arrayMap(values,baseUnary(iteratee));if(comparator){includes=arrayIncludesWith;isCommon=false}else if(values.length>=LARGE_ARRAY_SIZE){includes=cacheHas;isCommon=false;values=new SetCache(values)}outer:while(++index<length){var value=array[index],computed=iteratee==null?value:iteratee(value);value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var valuesIndex=valuesLength;while(valuesIndex--)if(values[valuesIndex]===
computed)continue outer;result.push(value)}else if(!includes(values,computed,comparator))result.push(value)}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index<length){var value=
array[index],current=iteratee(value);if(current!=null&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed)))var computed=current,result=value}return result}function baseFill(array,value,start,end){var length=array.length;start=toInteger(start);if(start<0)start=-start>length?0:length+start;end=end===undefined||end>length?length:toInteger(end);if(end<0)end+=length;end=start>end?0:toLength(end);while(start<end)array[start++]=value;return array}function baseFilter(collection,
predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection))result.push(value)});return result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value))if(depth>1)baseFlatten(value,depth-1,predicate,isStrict,result);else arrayPush(result,value);else if(!isStrict)result[result.length]=
value}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length)object=object[toKey(path[index++])];
return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){if(value==null)return value===undefined?undefinedTag:nullTag;return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return object!=null&&hasOwnProperty.call(object,
key)}function baseHasIn(object,key){return object!=null&&key in Object(object)}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=Infinity,result=[];while(othIndex--){var array=arrays[othIndex];if(othIndex&&iteratee)array=arrayMap(array,
baseUnary(iteratee));maxLength=nativeMin(array.length,maxLength);caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:while(++index<length&&result.length<maxLength){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){othIndex=othLength;while(--othIndex){var cache=caches[othIndex];
if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer}if(seen)seen.push(computed);result.push(value)}}return result}function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)});return accumulator}function baseInvoke(object,path,args){path=castPath(path,object);object=parent(object,path);var func=object==null?object:object[toKey(last(path))];return func==null?undefined:
apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other)return true;if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other))return value!==value&&other!==other;return baseIsEqualDeep(value,
other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return false;objIsArr=true;objIsObj=
false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():
other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag)return false;stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null)return!length;object=Object(object);while(index--){var data=matchData[index];
if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return false}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return false}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result))return false}}return true}
function baseIsNative(value){if(!isObject(value)||isMasked(value))return false;var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseIteratee(value){if(typeof value=="function")return value;
if(value==null)return identity;if(typeof value=="object")return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);return property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))if(hasOwnProperty.call(object,key)&&key!="constructor")result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)if(!(key==
"constructor"&&(isProto||!hasOwnProperty.call(object,key))))result.push(key);return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2])return matchesStrictComparable(matchData[0][0],
matchData[0][1]);return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue))return matchesStrictComparable(toKey(path),srcValue);return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){if(object===
source)return;baseFor(source,function(srcValue,key){if(isObject(srcValue)){stack||(stack=new Stack);baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack)}else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined;if(newValue===undefined)newValue=srcValue;assignMergeValue(object,key,newValue)}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,
key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped)if(isArray(objValue))newValue=objValue;else if(isArrayLikeObject(objValue))newValue=copyArray(objValue);else if(isBuff){isCommon=
false;newValue=cloneBuffer(srcValue,true)}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true)}else newValue=[];else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue))newValue=toPlainObject(objValue);else if(!isObject(objValue)||srcIndex&&isFunction(objValue))newValue=initCloneObject(srcValue)}else isCommon=false}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack["delete"](srcValue)}assignMergeValue(object,
key,newValue)}function baseNth(array,n){var length=array.length;if(!length)return;n+=n<0?length:0;return isIndex(n,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee()));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{"criteria":criteria,"index":++index,"value":value}});return baseSortBy(result,
function(object,other){return compareMultiple(object,other,orders)})}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path))baseSet(result,castPath(path,object),value)}return result}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}
function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;if(array===values)values=copyArray(values);if(iteratee)seen=arrayMap(array,baseUnary(iteratee));while(++index<length){var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1){if(seen!==array)splice.call(seen,fromIndex,1);splice.call(array,fromIndex,1)}}return array}function basePullAt(array,
indexes){var length=array?indexes.length:0,lastIndex=length-1;while(length--){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;if(isIndex(index))splice.call(array,index,1);else baseUnset(array,index)}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?
length:++index]=start;start+=step}return result}function baseRepeat(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER)return result;do{if(n%2)result+=string;n=nativeFloor(n/2);if(n)string+=string}while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}
function baseSet(object,path,value,customizer){if(!isObject(object))return object;path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined)newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}assignValue(nested,key,newValue);nested=nested[key]}return object}
var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{"configurable":true,"enumerable":false,"value":constant(string),"writable":true})};function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0)start=-start>length?0:length+start;end=end>length?length:end;if(end<0)end+=
length;length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=array==null?low:array.length;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=
low+high>>>1,computed=array[mid];if(computed!==null&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value))low=mid+1;else high=mid}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array==null?0:array.length,valIsNaN=value!==value,valIsNull=value===null,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=
iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=computed===null,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN)var setLow=retHighest||othIsReflexive;else if(valIsUndefined)setLow=othIsReflexive&&(retHighest||othIsDefined);else if(valIsNull)setLow=othIsReflexive&&othIsDefined&&(retHighest||!othIsNull);else if(valIsSymbol)setLow=othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol);else if(othIsNull||othIsSymbol)setLow=false;else setLow=
retHighest?computed<=value:computed<value;if(setLow)low=mid+1;else high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=value===0?0:value}}return result}function baseToNumber(value){if(typeof value=="number")return value;if(isSymbol(value))return NAN;return+value}
function baseToString(value){if(typeof value=="string")return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith}else if(length>=LARGE_ARRAY_SIZE){var set=
iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=false;includes=cacheHas;seen=new SetCache}else seen=iteratee?[]:result;outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--)if(seen[seenIndex]===computed)continue outer;if(iteratee)seen.push(computed);result.push(value)}else if(!includes(seen,computed,comparator)){if(seen!==result)seen.push(computed);
result.push(value)}}return result}function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array));return isDrop?baseSlice(array,
fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper)result=result.value();return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2)return length?baseUniq(arrays[0]):[];var index=-1,result=Array(length);
while(++index<length){var array=arrays[index],othIndex=-1;while(++othIndex<length)if(othIndex!=index)result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator)}return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){var index=-1,length=props.length,valsLength=values.length,result={};while(++index<length){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?
value:[]}function castFunction(value){return typeof value=="function"?value:identity}function castPath(value,object){if(isArray(value))return value;return isKey(value,object)?[value]:stringToPath(toString(value))}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;end=end===undefined?length:end;return!start&&end>=length?array:baseSlice(array,start,end)}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();
var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);(new Uint8Array(result)).set(new Uint8Array(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneRegExp(regexp){var result=
new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===
null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&
!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength)return result;var order=orders[index];return result*(order=="desc"?-1:1)}}return object.index-
other.index}function composeArgs(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;while(++leftIndex<leftLength)result[leftIndex]=partials[leftIndex];while(++argsIndex<holdersLength)if(isUncurried||argsIndex<argsLength)result[holders[argsIndex]]=args[argsIndex];while(rangeLength--)result[leftIndex++]=
args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;while(++argsIndex<rangeLength)result[argsIndex]=args[argsIndex];var offset=argsIndex;while(++rightIndex<rightLength)result[offset+rightIndex]=partials[rightIndex];while(++holdersIndex<
holdersLength)if(isUncurried||argsIndex<argsLength)result[offset+holders[holdersIndex]]=args[argsIndex++];return result}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],
key,object,source):undefined;if(newValue===undefined)newValue=source[key];if(isNew)baseAssignValue(object,key,newValue);else assignValue(object,key,newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=
initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);
while(++index<length){var source=sources[index];if(source)assigner(object,source,index,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length)if(iteratee(iterable[index],index,iterable)===false)break;return collection}}function createBaseFor(fromRight){return function(object,
iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false)break}return object}}function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}return wrapper}function createCaseFirst(methodName){return function(string){string=
toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined;var chr=strSymbols?strSymbols[0]:string.charAt(0);var trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);
case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,
bitmask,arity){var Ctor=createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);while(index--)args[index]=arguments[index];var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);length-=holders.length;if(length<arity)return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length);var fn=this&&this!==root&&this instanceof
wrapper?Ctor:func;return apply(fn,this,args)}return wrapper}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=
funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight)funcs.reverse();while(index--){var func=funcs[index];if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);if(prereq&&!wrapper&&getFuncName(func)=="wrapper")var wrapper=new LodashWrapper([],true)}index=wrapper?index:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|
WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1)wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3]);else wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value))return wrapper.plant(value).value();var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length)result=funcs[index].call(this,result);return result}})}function createHybrid(func,bitmask,thisArg,
partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length;while(index--)args[index]=arguments[index];if(isCurried)var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);
if(partials)args=composeArgs(args,partials,holders,isCurried);if(partialsRight)args=composeArgsRight(args,partialsRight,holdersRight,isCurried);length-=holdersCount;if(isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;length=args.length;if(argPos)args=reorder(args,argPos);else if(isFlip&&length>
1)args.reverse();if(isAry&&ary<length)args.length=ary;if(this&&this!==root&&this instanceof wrapper)fn=Ctor||createCtor(fn);return fn.apply(thisBinding,args)}return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;if(value!==undefined)result=value;if(other!==
undefined){if(result===undefined)return other;if(typeof value=="string"||typeof other=="string"){value=baseToString(value);other=baseToString(other)}else{value=baseToNumber(value);other=baseToNumber(other)}result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){iteratees=arrayMap(iteratees,baseUnary(getIteratee()));return baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}
function createPadding(length,chars){chars=chars===undefined?" ":baseToString(chars);var charsLength=chars.length;if(charsLength<2)return charsLength?baseRepeat(chars,length):chars;var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var argsIndex=-1,argsLength=
arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;while(++leftIndex<leftLength)args[leftIndex]=partials[leftIndex];while(argsLength--)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}return wrapper}function createRange(fromRight){return function(start,end,step){if(step&&typeof step!="number"&&isIterateeCall(start,end,step))end=step=undefined;start=toFinite(start);if(end===
undefined){end=start;start=0}else end=toFinite(end);step=step===undefined?start<end?1:-1:toFinite(step);return baseRange(start,end,step,fromRight)}}function createRelationalOperation(operator){return function(value,other){if(!(typeof value=="string"&&typeof other=="string")){value=toNumber(value);other=toNumber(other)}return operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?
holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG);if(!(bitmask&WRAP_CURRY_BOUND_FLAG))bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG);var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity];var result=wrapFunc.apply(undefined,newData);if(isLaziable(func))setData(result,
newData);result.placeholder=placeholder;return setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){number=toNumber(number);precision=precision==null?0:nativeMin(toInteger(precision),292);if(precision){var pair=(toString(number)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));pair=(toString(value)+"e").split("e");return+(pair[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=!(Set&&1/setToArray(new Set([,
-0]))[1]==INFINITY)?noop:function(values){return new Set(values)};function createToPairs(keysFunc){return function(object){var tag=getTag(object);if(tag==mapTag)return mapToArray(object);if(tag==setTag)return setToPairs(object);return baseToPairs(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:
0;if(!length){bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG);partials=holders=undefined}ary=ary===undefined?ary:nativeMax(toInteger(ary),0);arity=arity===undefined?arity:toInteger(arity);length-=holders?holders.length:0;if(bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func);var newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data)mergeData(newData,
data);func=newData[0];bitmask=newData[1];thisArg=newData[2];partials=newData[3];holders=newData[4];arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0);if(!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG))bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG);if(!bitmask||bitmask==WRAP_BIND_FLAG)var result=createBind(func,bitmask,thisArg);else if(bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG)result=createCurry(func,bitmask,arity);else if((bitmask==
WRAP_PARTIAL_FLAG||bitmask==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!holders.length)result=createPartial(func,bitmask,thisArg,partials);else result=createHybrid.apply(undefined,newData);var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){if(objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key))return srcValue;return objValue}function customDefaultsMerge(objValue,srcValue,
key,object,source,stack){if(isObject(objValue)&&isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack);stack["delete"](srcValue)}return objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return false;
var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(compared!==undefined){if(compared)continue;result=false;break}if(seen){if(!arraySome(other,
function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=
other.byteOffset)return false;object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)))return false;return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||
(convert=setToArray);if(object.size!=other.size&&!isPartial)return false;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return false}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=
bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return false;var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return false}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=
objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in
other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor))result=false}stack["delete"](object);stack["delete"](other);return result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=!metaMap?noop:function(func){return metaMap.get(func)};
function getFuncName(func){var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func)return data.name}return result}function getHolder(func){var object=hasOwnProperty.call(lodash,"placeholder")?lodash:func;return object.placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;result=result===iteratee?baseIteratee:result;return arguments.length?
result(arguments[0],arguments[1]):result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=
hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked)if(isOwn)value[symToStringTag]=tag;else delete value[symToStringTag];return result}var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null)return[];object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};var getSymbolsIn=
!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object)}return result};var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=
Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result};function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case "drop":start+=size;break;case "dropRight":end-=size;break;case "take":end=nativeMin(end,
start+size);break;case "takeRight":start=nativeMax(start,end-size);break}}return{"start":start,"end":end}}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key)))break;object=object[key]}if(result||++index!=length)return result;length=
object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}function initCloneByTag(object,
tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);
case setTag:return new Ctor;case symbolTag:return cloneSymbol(object)}}function insertWrapDetails(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;details[lastIndex]=(length>1?"\x26 ":"")+details[lastIndex];details=details.join(length>2?", ":" ");return source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,
length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function isIterateeCall(value,index,object){if(!isObject(object))return false;var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object)return eq(object[index],value);return false}function isKey(value,object){if(isArray(value))return false;var type=typeof value;
if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value))return true;return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other!="function"||!(funcName in LazyWrapper.prototype))return false;
if(func===other)return true;var data=getData(other);return!!data&&func===data[0]}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){if(object==null)return false;
return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE)cache.clear();return key});var cache=result.cache;return result}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG);var isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&
bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!(isCommon||isCombo))return data;if(srcBitmask&WRAP_BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value;data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}value=source[5];if(value){partials=
data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):value;data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]}value=source[7];if(value)data[7]=value;if(srcBitmask&WRAP_ARY_FLAG)data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8]);if(data[9]==null)data[9]=source[9];data[0]=source[0];data[1]=newBitmask;return data}function nativeKeysIn(object){var result=[];if(object!=null)for(var key in Object(object))result.push(key);return result}function objectToString(value){return nativeObjectToString.call(value)}
function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length)array[index]=args[start+index];index=-1;var otherArgs=Array(start+1);while(++index<start)otherArgs[index]=args[index];otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}
function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=shortOut(baseSetData);var setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)};var setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,
insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;size=size===undefined?length:size;while(++index<size){var rand=baseRandom(index,lastIndex),
value=array[rand];array[rand]=array[index];array[index]=value}array.length=size;return array}var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46)result.push("");string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if(typeof value=="string"||isSymbol(value))return value;var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}
function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e$0){}}return""}function updateWrapDetails(details,bitmask){arrayEach(wrapFlags,function(pair){var value="_."+pair[0];if(bitmask&pair[1]&&!arrayIncludes(details,value))details.push(value)});return details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);result.__actions__=copyArray(wrapper.__actions__);
result.__index__=wrapper.__index__;result.__values__=wrapper.__values__;return result}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size===undefined)size=1;else size=nativeMax(toInteger(size),0);var length=array==null?0:array.length;if(!length||size<1)return[];var index=0,resIndex=0,result=Array(nativeCeil(length/size));while(index<length)result[resIndex++]=baseSlice(array,index,index+=size);return result}function compact(array){var index=-1,length=array==null?0:array.length,
resIndex=0,result=[];while(++index<length){var value=array[index];if(value)result[resIndex++]=value}return result}function concat(){var length=arguments.length;if(!length)return[];var args=Array(length-1),array=arguments[0],index=length;while(index--)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true)):
[]});var differenceBy=baseRest(function(array,values){var iteratee=last(values);if(isArrayLikeObject(iteratee))iteratee=undefined;return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),getIteratee(iteratee,2)):[]});var differenceWith=baseRest(function(array,values){var comparator=last(values);if(isArrayLikeObject(comparator))comparator=undefined;return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),undefined,comparator):
[]});function drop(array,n,guard){var length=array==null?0:array.length;if(!length)return[];n=guard||n===undefined?1:toInteger(n);return baseSlice(array,n<0?0:n,length)}function dropRight(array,n,guard){var length=array==null?0:array.length;if(!length)return[];n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true,true):[]}function dropWhile(array,predicate){return array&&
array.length?baseWhile(array,getIteratee(predicate,3),true):[]}function fill(array,value,start,end){var length=array==null?0:array.length;if(!length)return[];if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length)return-1;var index=fromIndex==null?0:toInteger(fromIndex);if(index<0)index=nativeMax(length+index,0);return baseFindIndex(array,
getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length)return-1;var index=length-1;if(fromIndex!==undefined){index=toInteger(fromIndex);index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)}return baseFindIndex(array,getIteratee(predicate,3),index,true)}function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}function flattenDeep(array){var length=array==null?0:array.length;
return length?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){var length=array==null?0:array.length;if(!length)return[];depth=depth===undefined?1:toInteger(depth);return baseFlatten(array,depth)}function fromPairs(pairs){var index=-1,length=pairs==null?0:pairs.length,result={};while(++index<length){var pair=pairs[index];result[pair[0]]=pair[1]}return result}function head(array){return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){var length=array==
null?0:array.length;if(!length)return-1;var index=fromIndex==null?0:toInteger(fromIndex);if(index<0)index=nativeMax(length+index,0);return baseIndexOf(array,value,index)}function initial(array){var length=array==null?0:array.length;return length?baseSlice(array,0,-1):[]}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]});var intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),
mapped=arrayMap(arrays,castArrayLikeObject);if(iteratee===last(mapped))iteratee=undefined;else mapped.pop();return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]});var intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);comparator=typeof comparator=="function"?comparator:undefined;if(comparator)mapped.pop();return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):
[]});function join(array,separator){return array==null?"":nativeJoin.call(array,separator)}function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length)return-1;var index=length;if(fromIndex!==undefined){index=toInteger(fromIndex);index=index<0?nativeMax(length+index,0):nativeMin(index,length-1)}return value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,
baseIsNaN,index,true)}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,
values,undefined,comparator):array}var pullAt=flatRest(function(array,indexes){var length=array==null?0:array.length,result=baseAt(array,indexes);basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending));return result});function remove(array,predicate){var result=[];if(!(array&&array.length))return result;var index=-1,indexes=[],length=array.length;predicate=getIteratee(predicate,3);while(++index<length){var value=array[index];if(predicate(value,
index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function reverse(array){return array==null?array:nativeReverse.call(array)}function slice(array,start,end){var length=array==null?0:array.length;if(!length)return[];if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}else{start=start==null?0:toInteger(start);end=end===undefined?length:toInteger(end)}return baseSlice(array,start,end)}function sortedIndex(array,value){return baseSortedIndex(array,
value)}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))}function sortedIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index}return-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,true)}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),true)}function sortedLastIndexOf(array,
value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value,true)-1;if(eq(array[index],value))return index}return-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]}function tail(array){var length=array==null?0:array.length;return length?baseSlice(array,1,length):[]}function take(array,n,guard){if(!(array&&array.length))return[];
n=guard||n===undefined?1:toInteger(n);return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array==null?0:array.length;if(!length)return[];n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,n<0?0:n,length)}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),false,true):[]}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,
1,isArrayLikeObject,true))});var unionBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee))iteratee=undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),getIteratee(iteratee,2))});var unionWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),undefined,comparator)});function uniq(array){return array&&array.length?baseUniq(array):
[]}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]}function uniqWith(array,comparator){comparator=typeof comparator=="function"?comparator:undefined;return array&&array.length?baseUniq(array,undefined,comparator):[]}function unzip(array){if(!(array&&array.length))return[];var length=0;array=arrayFilter(array,function(group){if(isArrayLikeObject(group)){length=nativeMax(group.length,length);return true}});return baseTimes(length,function(index){return arrayMap(array,
baseProperty(index))})}function unzipWith(array,iteratee){if(!(array&&array.length))return[];var result=unzip(array);if(iteratee==null)return result;return arrayMap(result,function(group){return apply(iteratee,undefined,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]});var xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))});var xorBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee))iteratee=
undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))});var xorWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)});var zip=baseRest(unzip);function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet)}var zipWith=
baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;iteratee=typeof iteratee=="function"?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee)});function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor){interceptor(value);return value}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=
this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};if(length>1||this.__actions__.length||!(value instanceof LazyWrapper)||!isIndex(start))return this.thru(interceptor);value=value.slice(start,+start+(length?1:0));value.__actions__.push({"func":thru,"args":[interceptor],"thisArg":undefined});return(new LodashWrapper(value,this.__chain__)).thru(function(array){if(length&&!array.length)array.push(undefined);return array})});function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),
this.__chain__)}function wrapperNext(){if(this.__values__===undefined)this.__values__=toArray(this.value());var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return{"done":done,"value":value}}function wrapperToIterator(){return this}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);clone.__index__=0;clone.__values__=undefined;if(result)previous.__wrapped__=clone;else result=clone;
var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length)wrapped=new LazyWrapper(this);wrapped=wrapped.reverse();wrapped.__actions__.push({"func":thru,"args":[reverse],"thisArg":undefined});return new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}
var countBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key))++result[key];else baseAssignValue(result,key,1)});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;if(guard&&isIterateeCall(collection,predicate,guard))predicate=undefined;return func(collection,getIteratee(predicate,3))}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3))}var find=
createFind(findIndex);var findLast=createFind(findLastIndex);function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1)}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)}function flatMapDepth(collection,iteratee,depth){depth=depth===undefined?1:toInteger(depth);return baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,
3))}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key))result[key].push(value);else baseAssignValue(result,key,[value])});function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;
if(fromIndex<0)fromIndex=nativeMax(length+fromIndex,0);return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc=typeof path=="function",result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)});return result});var keyBy=createAggregator(function(result,
value,key){baseAssignValue(result,key,value)});function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){if(collection==null)return[];if(!isArray(iteratees))iteratees=iteratees==null?[]:[iteratees];orders=guard?undefined:orders;if(!isArray(orders))orders=orders==null?[]:[orders];return baseOrderBy(collection,iteratees,orders)}var partition=createAggregator(function(result,value,
key){result[key?0:1].push(value)},function(){return[[],[]]});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)}function reject(collection,
predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)))}function sample(collection){var func=isArray(collection)?arraySample:baseSample;return func(collection)}function sampleSize(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n===undefined)n=1;else n=toInteger(n);var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n)}function shuffle(collection){var func=isArray(collection)?arrayShuffle:
baseShuffle;return func(collection)}function size(collection){if(collection==null)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);if(tag==mapTag||tag==setTag)return collection.size;return baseKeys(collection).length}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard&&isIterateeCall(collection,predicate,guard))predicate=undefined;return func(collection,getIteratee(predicate,
3))}var sortBy=baseRest(function(collection,iteratees){if(collection==null)return[];var length=iteratees.length;if(length>1&&isIterateeCall(collection,iteratees[0],iteratees[1]))iteratees=[];else if(length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2]))iteratees=[iteratees[0]];return baseOrderBy(collection,baseFlatten(iteratees,1),[])});var now=ctxNow||function(){return root.Date.now()};function after(n,func){if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);n=toInteger(n);
return function(){if(--n<1)return func.apply(this,arguments)}}function ary(func,n,guard){n=guard?undefined:n;n=func&&n==null?func.length:n;return createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);n=toInteger(n);return function(){if(--n>0)result=func.apply(this,arguments);if(n<=1)func=undefined;return result}}var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;
if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)});var bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)});function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,
WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curry.placeholder;return result}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryRight.placeholder;return result}function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;
if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,
wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=
now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs)return invokeFunc(time);lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined)clearTimeout(timerId);lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);
lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined)return leadingEdge(lastCallTime);if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined)timerId=setTimeout(timerExpired,wait);return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)});var delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});
function flip(func){return createWrap(func,WRAP_FLIP_FLAG)}function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function")throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new (memoize.Cache||MapCache);return memoized}
memoize.Cache=MapCache;function negate(predicate){if(typeof predicate!="function")throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}function once(func){return before(2,func)}var overArgs=castRest(function(func,transforms){transforms=transforms.length==
1&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){var index=-1,length=nativeMin(args.length,funcsLength);while(++index<length)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})});var partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,
undefined,partials,holders)});var partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders)});var rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes)});function rest(func,start){if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);start=start===undefined?start:toInteger(start);return baseRest(func,start)}
function spread(func,start){if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);start=start==null?0:nativeMax(toInteger(start),0);return baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);if(array)arrayPush(otherArgs,array);return apply(func,this,otherArgs)})}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);if(isObject(options)){leading="leading"in options?!!options.leading:
leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{"leading":leading,"maxWait":wait,"trailing":trailing})}function unary(func){return ary(func,1)}function wrap(value,wrapper){return partial(castFunction(wrapper),value)}function castArray(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG)}function cloneWith(value,customizer){customizer=typeof customizer==
"function"?customizer:undefined;return baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function cloneDeepWith(value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer)}function conformsTo(object,source){return source==null||baseConformsTo(object,source,keys(source))}function eq(value,other){return value===other||value!==value&&
other!==other}var gt=createRelationalOperation(baseGt);var gte=createRelationalOperation(function(value,other){return value>=other});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var isArray=Array.isArray;var isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;function isArrayLike(value){return value!=null&&isLength(value.length)&&
!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isBoolean(value){return value===true||value===false||isObjectLike(value)&&baseGetTag(value)==boolTag}var isBuffer=nativeIsBuffer||stubFalse;var isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject(value)}function isEmpty(value){if(value==null)return true;if(isArrayLike(value)&&(isArray(value)||typeof value==
"string"||typeof value.splice=="function"||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return false;return true}function isEqual(value,other){return baseIsEqual(value,other)}function isEqualWith(value,other,customizer){customizer=typeof customizer=="function"?customizer:undefined;var result=
customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result}function isError(value){if(!isObjectLike(value))return false;var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||typeof value.message=="string"&&typeof value.name=="string"&&!isPlainObject(value)}function isFinite(value){return typeof value=="number"&&nativeIsFinite(value)}function isFunction(value){if(!isObject(value))return false;var tag=baseGetTag(value);return tag==
funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isInteger(value){return typeof value=="number"&&value==toInteger(value)}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function isObjectLike(value){return value!=null&&typeof value=="object"}var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;function isMatch(object,source){return object===
source||baseIsMatch(object,source,getMatchData(source))}function isMatchWith(object,source,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(isMaskable(value))throw new Error(CORE_ERROR_TEXT);return baseIsNative(value)}function isNull(value){return value===null}function isNil(value){return value==null}function isNumber(value){return typeof value==
"number"||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return false;var proto=getPrototype(value);if(proto===null)return true;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;function isSafeInteger(value){return isInteger(value)&&value>=
-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER}var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function isUndefined(value){return value===undefined}function isWeakMap(value){return isObjectLike(value)&&
getTag(value)==weakMapTag}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag}var lt=createRelationalOperation(baseLt);var lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value)return[];if(isArrayLike(value))return isString(value)?stringToArray(value):copyArray(value);if(symIterator&&value[symIterator])return iteratorToArray(value[symIterator]());var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:
values;return func(value)}function toFinite(value){if(!value)return value===0?value:0;value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){if(typeof value=="number")return value;
if(isSymbol(value))return NAN;if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string")return value===0?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toSafeInteger(value){return value?
baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):value===0?value:0}function toString(value){return value==null?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source)if(hasOwnProperty.call(source,key))assignValue(object,key,source[key])});var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)});var assignInWith=createAssigner(function(object,
source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)});var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)});var at=flatRest(baseAt);function create(prototype,properties){var result=baseCreate(prototype);return properties==null?result:baseAssign(result,properties)}var defaults=baseRest(function(object,sources){object=Object(object);var index=-1;var length=sources.length;var guard=length>2?sources[2]:
undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard))length=1;while(++index<length){var source=sources[index];var props=keysIn(source);var propsIndex=-1;var propsLength=props.length;while(++propsIndex<propsLength){var key=props[propsIndex];var value=object[key];if(value===undefined||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key))object[key]=source[key]}}return object});var defaultsDeep=baseRest(function(args){args.push(undefined,customDefaultsMerge);return apply(mergeWith,
undefined,args)});function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}function forIn(object,iteratee){return object==null?object:baseFor(object,getIteratee(iteratee,3),keysIn)}function forInRight(object,iteratee){return object==null?object:baseForRight(object,getIteratee(iteratee,3),keysIn)}function forOwn(object,iteratee){return object&&baseForOwn(object,
getIteratee(iteratee,3))}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))}function functions(object){return object==null?[]:baseFunctions(object,keys(object))}function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function has(object,path){return object!=null&&hasPath(object,
path,baseHas)}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!="function")value=nativeObjectToString.call(value);result[value]=key},constant(identity));var invertBy=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!="function")value=nativeObjectToString.call(value);if(hasOwnProperty.call(result,value))result[value].push(key);else result[value]=[key]},
getIteratee);var invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}function mapKeys(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)});return result}function mapValues(object,iteratee){var result={};iteratee=getIteratee(iteratee,
3);baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))});return result}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)});var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)});var omit=flatRest(function(object,paths){var result={};if(object==null)return result;var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||
(isDeep=path.length>1);return path});copyObject(object,getAllKeysIn(object),result);if(isDeep)result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone);var length=paths.length;while(length--)baseUnset(result,paths[length]);return result});function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});function pickBy(object,predicate){if(object==null)return{};
var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});predicate=getIteratee(predicate);return basePickBy(object,props,function(value,path){return predicate(value,path[0])})}function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;if(!length){length=1;object=undefined}while(++index<length){var value=object==null?undefined:object[toKey(path[index])];if(value===undefined){index=length;value=defaultValue}object=isFunction(value)?value.call(object):
value}return object}function set(object,path,value){return object==null?object:baseSet(object,path,value)}function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}var toPairs=createToPairs(keys);var toPairsIn=createToPairs(keysIn);function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);iteratee=getIteratee(iteratee,
4);if(accumulator==null){var Ctor=object&&object.constructor;if(isArrLike)accumulator=isArr?new Ctor:[];else if(isObject(object))accumulator=isFunction(Ctor)?baseCreate(getPrototype(object)):{};else accumulator={}}(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function unset(object,path){return object==null?true:baseUnset(object,path)}function update(object,path,updater){return object==null?object:baseUpdate(object,
path,castFunction(updater))}function updateWith(object,path,updater,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseUpdate(object,path,castFunction(updater),customizer)}function values(object){return object==null?[]:baseValues(object,keys(object))}function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object))}function clamp(number,lower,upper){if(upper===undefined){upper=lower;lower=undefined}if(upper!==undefined){upper=
toNumber(upper);upper=upper===upper?upper:0}if(lower!==undefined){lower=toNumber(lower);lower=lower===lower?lower:0}return baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){start=toFinite(start);if(end===undefined){end=start;start=0}else end=toFinite(end);number=toNumber(number);return baseInRange(number,start,end)}function random(lower,upper,floating){if(floating&&typeof floating!="boolean"&&isIterateeCall(lower,upper,floating))upper=floating=undefined;if(floating===undefined)if(typeof upper==
"boolean"){floating=upper;upper=undefined}else if(typeof lower=="boolean"){floating=lower;lower=undefined}if(lower===undefined&&upper===undefined){lower=0;upper=1}else{lower=toFinite(lower);if(upper===undefined){upper=lower;lower=0}else upper=toFinite(upper)}if(lower>upper){var temp=lower;lower=upper;upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)}var camelCase=
createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){string=toString(string);return string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=toString(string);target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),
0,length);var end=position;position-=target.length;return position>=0&&string.slice(position,end)==target}function escape(string){string=toString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=toString(string);return string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$\x26"):string}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});
var lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()});var lowerFirst=createCaseFirst("toLowerCase");function pad(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length)return string;var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)}function padEnd(string,length,chars){string=toString(string);
length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string}function padStart(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}function parseInt(string,radix,guard){if(guard||radix==null)radix=0;else if(radix)radix=+radix;return nativeParseInt(toString(string).replace(reTrimStart,
""),radix||0)}function repeat(string,n,guard){if(guard?isIterateeCall(string,n,guard):n===undefined)n=1;else n=toInteger(n);return baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});function split(string,separator,limit){if(limit&&typeof limit!="number"&&isIterateeCall(string,separator,limit))separator=
limit=undefined;limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0;if(!limit)return[];string=toString(string);if(string&&(typeof separator=="string"||separator!=null&&!isRegExp(separator))){separator=baseToString(separator);if(!separator&&hasUnicode(string))return castSlice(stringToArray(string),0,limit)}return string.split(separator,limit)}var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});function startsWith(string,target,position){string=
toString(string);position=position==null?0:baseClamp(toInteger(position),0,string.length);target=baseToString(target);return string.slice(position,position+target.length)==target}function template(string,options,guard){var settings=lodash.templateSettings;if(guard&&isIterateeCall(string,options,guard))options=undefined;string=toString(string);options=assignInWith({},options,settings,customDefaultsAssignIn);var imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=
keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p +\x3d '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL\x3d"+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,
function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p +\x3d '"}if(interpolateValue)source+="' +\n((__t \x3d ("+interpolateValue+")) \x3d\x3d null ? '' : __t) +\n'";index=offset+match.length;return match});
source+="';\n";var variable=options.variable;if(!variable)source="with (obj) {\n"+source+"\n}\n";source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj \x3d {});\n")+"var __t, __p \x3d ''"+(isEscaping?", __e \x3d _.escape":"")+(isEvaluating?", __j \x3d Array.prototype.join;\n"+"function print() { __p +\x3d __j.call(arguments, '') }\n":";\n")+source+
"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});result.source=source;if(isError(result))throw result;return result}function toLower(value){return toString(value).toLowerCase()}function toUpper(value){return toString(value).toUpperCase()}function trim(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined))return string.replace(reTrim,"");if(!string||!(chars=baseToString(chars)))return string;
var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}function trimEnd(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined))return string.replace(reTrimEnd,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,
0,end).join("")}function trimStart(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined))return string.replace(reTrimStart,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join("")}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator"in options?
options.separator:separator;length="length"in options?toInteger(options.length):length;omission="omission"in options?baseToString(options.omission):omission}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength)return string;var end=length-stringSize(omission);if(end<1)return omission;var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined)return result+
omission;if(strSymbols)end+=result.length-end;if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;if(!separator.global)separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g");separator.lastIndex=0;while(match=separator.exec(substring))var newEnd=match.index;result=result.slice(0,newEnd===undefined?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);if(index>-1)result=result.slice(0,index)}return result+
omission}function unescape(string){string=toString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()});var upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){string=toString(string);pattern=guard?undefined:pattern;if(pattern===undefined)return hasUnicodeWord(string)?unicodeWords(string):asciiWords(string);return string.match(pattern)||
[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}});var bindAll=flatRest(function(object,methodNames){arrayEach(methodNames,function(key){key=toKey(key);baseAssignValue(object,key,bind(object[key],object))});return object});function cond(pairs){var length=pairs==null?0:pairs.length,toIteratee=getIteratee();pairs=!length?[]:arrayMap(pairs,function(pair){if(typeof pair[1]!="function")throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),
pair[1]]});return baseRest(function(args){var index=-1;while(++index<length){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}})}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG))}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){return value==null||value!==value?defaultValue:value}var flow=createFlow();var flowRight=createFlow(true);function identity(value){return value}function iteratee(func){return baseIteratee(typeof func==
"function"?func:baseClone(func,CLONE_DEEP_FLAG))}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}});var methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),
methodNames=baseFunctions(source,props);if(options==null&&!(isObject(source)&&(methodNames.length||!props.length))){options=source;source=object;object=this;methodNames=baseFunctions(source,keys(source))}var chain=!(isObject(options)&&"chain"in options)||!!options.chain,isFunc=isFunction(object);arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func;if(isFunc)object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=
object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);actions.push({"func":func,"args":arguments,"thisArg":object});result.__chain__=chainAll;return result}return func.apply(object,arrayPush([this.value()],arguments))}});return object}function noConflict(){if(root._===this)root._=oldDash;return this}function noop(){}function nthArg(n){n=toInteger(n);return baseRest(function(args){return baseNth(args,n)})}var over=createOver(arrayMap);var overEvery=createOver(arrayEvery);
var overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function propertyOf(object){return function(path){return object==null?undefined:baseGet(object,path)}}var range=createRange();var rangeRight=createRange(true);function stubArray(){return[]}function stubFalse(){return false}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return true}function times(n,iteratee){n=toInteger(n);if(n<1||n>MAX_SAFE_INTEGER)return[];
var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee);n-=MAX_ARRAY_LENGTH;var result=baseTimes(length,iteratee);while(++index<n)iteratee(index);return result}function toPath(value){if(isArray(value))return arrayMap(value,toKey);return isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}var add=createMathOperation(function(augend,addend){return augend+addend},0);var ceil=createRound("ceil");
var divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1);var floor=createRound("floor");function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2))}function min(array){return array&&array.length?
baseExtremum(array,identity,baseLt):undefined}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined}var multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1);var round=createRound("round");var subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);function sum(array){return array&&array.length?baseSum(array,identity):0}function sumBy(array,iteratee){return array&&
array.length?baseSum(array,getIteratee(iteratee,2)):0}lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.assignIn=assignIn;lodash.assignInWith=assignInWith;lodash.assignWith=assignWith;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.castArray=castArray;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.concat=concat;lodash.cond=cond;lodash.conforms=conforms;lodash.constant=constant;lodash.countBy=countBy;lodash.create=
create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.differenceBy=differenceBy;lodash.differenceWith=differenceWith;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatMap=flatMap;lodash.flatMapDeep=flatMapDeep;lodash.flatMapDepth=flatMapDepth;
lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flattenDepth=flattenDepth;lodash.flip=flip;lodash.flow=flow;lodash.flowRight=flowRight;lodash.fromPairs=fromPairs;lodash.functions=functions;lodash.functionsIn=functionsIn;lodash.groupBy=groupBy;lodash.initial=initial;lodash.intersection=intersection;lodash.intersectionBy=intersectionBy;lodash.intersectionWith=intersectionWith;lodash.invert=invert;lodash.invertBy=invertBy;lodash.invokeMap=invokeMap;lodash.iteratee=iteratee;lodash.keyBy=
keyBy;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.mergeWith=mergeWith;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.negate=negate;lodash.nthArg=nthArg;lodash.omit=omit;lodash.omitBy=omitBy;lodash.once=once;lodash.orderBy=orderBy;lodash.over=over;lodash.overArgs=overArgs;lodash.overEvery=overEvery;lodash.overSome=
overSome;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pickBy=pickBy;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAll=pullAll;lodash.pullAllBy=pullAllBy;lodash.pullAllWith=pullAllWith;lodash.pullAt=pullAt;lodash.range=range;lodash.rangeRight=rangeRight;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.reverse=reverse;lodash.sampleSize=sampleSize;lodash.set=set;lodash.setWith=
setWith;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortedUniq=sortedUniq;lodash.sortedUniqBy=sortedUniqBy;lodash.split=split;lodash.spread=spread;lodash.tail=tail;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.toArray=toArray;lodash.toPairs=toPairs;lodash.toPairsIn=toPairsIn;lodash.toPath=toPath;lodash.toPlainObject=toPlainObject;lodash.transform=
transform;lodash.unary=unary;lodash.union=union;lodash.unionBy=unionBy;lodash.unionWith=unionWith;lodash.uniq=uniq;lodash.uniqBy=uniqBy;lodash.uniqWith=uniqWith;lodash.unset=unset;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.update=update;lodash.updateWith=updateWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.without=without;lodash.words=words;lodash.wrap=wrap;lodash.xor=xor;lodash.xorBy=xorBy;lodash.xorWith=xorWith;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipObjectDeep=
zipObjectDeep;lodash.zipWith=zipWith;lodash.entries=toPairs;lodash.entriesIn=toPairsIn;lodash.extend=assignIn;lodash.extendWith=assignInWith;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clamp=clamp;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.cloneDeepWith=cloneDeepWith;lodash.cloneWith=cloneWith;lodash.conformsTo=conformsTo;lodash.deburr=deburr;lodash.defaultTo=defaultTo;lodash.divide=divide;lodash.endsWith=
endsWith;lodash.eq=eq;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.floor=floor;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.hasIn=hasIn;
lodash.head=head;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.invoke=invoke;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isArrayBuffer=isArrayBuffer;lodash.isArrayLike=isArrayLike;lodash.isArrayLikeObject=isArrayLikeObject;lodash.isBoolean=isBoolean;lodash.isBuffer=isBuffer;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isEqualWith=isEqualWith;lodash.isError=isError;lodash.isFinite=
isFinite;lodash.isFunction=isFunction;lodash.isInteger=isInteger;lodash.isLength=isLength;lodash.isMap=isMap;lodash.isMatch=isMatch;lodash.isMatchWith=isMatchWith;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNil=isNil;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isObjectLike=isObjectLike;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isSafeInteger=isSafeInteger;lodash.isSet=isSet;lodash.isString=isString;lodash.isSymbol=isSymbol;lodash.isTypedArray=
isTypedArray;lodash.isUndefined=isUndefined;lodash.isWeakMap=isWeakMap;lodash.isWeakSet=isWeakSet;lodash.join=join;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lowerCase=lowerCase;lodash.lowerFirst=lowerFirst;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.maxBy=maxBy;lodash.mean=mean;lodash.meanBy=meanBy;lodash.min=min;lodash.minBy=minBy;lodash.stubArray=stubArray;lodash.stubFalse=stubFalse;lodash.stubObject=stubObject;lodash.stubString=stubString;lodash.stubTrue=
stubTrue;lodash.multiply=multiply;lodash.nth=nth;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padEnd=padEnd;lodash.padStart=padStart;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.replace=replace;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.sample=sample;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedIndexBy=
sortedIndexBy;lodash.sortedIndexOf=sortedIndexOf;lodash.sortedLastIndex=sortedLastIndex;lodash.sortedLastIndexBy=sortedLastIndexBy;lodash.sortedLastIndexOf=sortedLastIndexOf;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.subtract=subtract;lodash.sum=sum;lodash.sumBy=sumBy;lodash.template=template;lodash.times=times;lodash.toFinite=toFinite;lodash.toInteger=toInteger;lodash.toLength=toLength;lodash.toLower=toLower;lodash.toNumber=toNumber;lodash.toSafeInteger=toSafeInteger;lodash.toString=
toString;lodash.toUpper=toUpper;lodash.trim=trim;lodash.trimEnd=trimEnd;lodash.trimStart=trimStart;lodash.truncate=truncate;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.upperCase=upperCase;lodash.upperFirst=upperFirst;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.first=head;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!hasOwnProperty.call(lodash.prototype,methodName))source[methodName]=func});return source}(),{"chain":false});lodash.VERSION=
VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();if(result.__filtered__)result.__takeCount__=nativeMin(n,result.__takeCount__);else result.__views__.push({"size":nativeMin(n,MAX_ARRAY_LENGTH),
"type":methodName+(result.__dir__<0?"Right":"")});return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}});arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();result.__iteratees__.push({"iteratee":getIteratee(iteratee,3),"type":type});result.__filtered__=result.__filtered__||
isFilter;return result}});arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.find=
function(predicate){return this.filter(predicate).head()};LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)};LazyWrapper.prototype.invokeMap=baseRest(function(path,args){if(typeof path=="function")return new LazyWrapper(this);return this.map(function(value){return baseInvoke(value,path,args)})});LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))};LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);
var result=this;if(result.__filtered__&&(start>0||end<0))return new LazyWrapper(result);if(start<0)result=result.takeRight(-start);else if(start)result=result.drop(start);if(end!==undefined){end=toInteger(end);result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()};LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)};baseForOwn(LazyWrapper.prototype,
function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+(methodName=="last"?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);if(!lodashFunc)return;lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);var interceptor=function(value){var result=
lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1)isLazy=useLazy=false;var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push({"func":thru,"args":[interceptor],"thisArg":undefined});return new LodashWrapper(result,
chainAll)}if(isUnwrapped&&onlyLazy)return func.apply(this,args);result=this.thru(interceptor);return isUnwrapped?isTaker?result.value()[0]:result.value():result}});arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();
return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"",names=realNames[key]||(realNames[key]=[]);names.push({"name":methodName,"func":lodashFunc})}});realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{"name":"wrapper","func":undefined}];LazyWrapper.prototype.clone=lazyClone;
LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.at=wrapperAt;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.next=wrapperNext;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.first=lodash.prototype.head;if(symIterator)lodash.prototype[symIterator]=wrapperToIterator;return lodash};
var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeModule){(freeModule.exports=_)._=_;freeExports._=_}else root._=_}).call(this);</script><script>(function(f){if(typeof exports==="object"&&typeof module!=="undefined")module.exports=f();else if(typeof define==="function"&&define.amd)define([],f);else{var g;if(typeof window!=="undefined")g=window;else if(typeof global!=="undefined")g=global;else if(typeof self!=="undefined")g=self;else g=this;g.graphlib=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);
var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var lib=require("./lib");module.exports={Graph:lib.Graph,json:require("./lib/json"),alg:require("./lib/alg"),version:lib.version}},{"./lib":17,"./lib/alg":8,"./lib/json":18}],
2:[function(require,module,exports){var _=require("../lodash");module.exports=components;function components(g){var visited={},cmpts=[],cmpt;function dfs(v){if(_.has(visited,v))return;visited[v]=true;cmpt.push(v);_.each(g.successors(v),dfs);_.each(g.predecessors(v),dfs)}_.each(g.nodes(),function(v){cmpt=[];dfs(v);if(cmpt.length)cmpts.push(cmpt)});return cmpts}},{"../lodash":19}],3:[function(require,module,exports){var _=require("../lodash");module.exports=dfs;function dfs(g,vs,order){if(!_.isArray(vs))vs=
[vs];var navigation=(g.isDirected()?g.successors:g.neighbors).bind(g);var acc=[],visited={};_.each(vs,function(v){if(!g.hasNode(v))throw new Error("Graph does not have node: "+v);doDfs(g,v,order==="post",visited,navigation,acc)});return acc}function doDfs(g,v,postorder,visited,navigation,acc){if(!_.has(visited,v)){visited[v]=true;if(!postorder)acc.push(v);_.each(navigation(v),function(w){doDfs(g,w,postorder,visited,navigation,acc)});if(postorder)acc.push(v)}}},{"../lodash":19}],4:[function(require,
module,exports){var dijkstra=require("./dijkstra"),_=require("../lodash");module.exports=dijkstraAll;function dijkstraAll(g,weightFunc,edgeFunc){return _.transform(g.nodes(),function(acc,v){acc[v]=dijkstra(g,v,weightFunc,edgeFunc)},{})}},{"../lodash":19,"./dijkstra":5}],5:[function(require,module,exports){var _=require("../lodash"),PriorityQueue=require("../data/priority-queue");module.exports=dijkstra;var DEFAULT_WEIGHT_FUNC=_.constant(1);function dijkstra(g,source,weightFn,edgeFn){return runDijkstra(g,
String(source),weightFn||DEFAULT_WEIGHT_FUNC,edgeFn||function(v){return g.outEdges(v)})}function runDijkstra(g,source,weightFn,edgeFn){var results={},pq=new PriorityQueue,v,vEntry;var updateNeighbors=function(edge){var w=edge.v!==v?edge.v:edge.w,wEntry=results[w],weight=weightFn(edge),distance=vEntry.distance+weight;if(weight<0)throw new Error("dijkstra does not allow negative edge weights. "+"Bad edge: "+edge+" Weight: "+weight);if(distance<wEntry.distance){wEntry.distance=distance;wEntry.predecessor=
v;pq.decrease(w,distance)}};g.nodes().forEach(function(v){var distance=v===source?0:Number.POSITIVE_INFINITY;results[v]={distance:distance};pq.add(v,distance)});while(pq.size()>0){v=pq.removeMin();vEntry=results[v];if(vEntry.distance===Number.POSITIVE_INFINITY)break;edgeFn(v).forEach(updateNeighbors)}return results}},{"../data/priority-queue":15,"../lodash":19}],6:[function(require,module,exports){var _=require("../lodash"),tarjan=require("./tarjan");module.exports=findCycles;function findCycles(g){return _.filter(tarjan(g),
function(cmpt){return cmpt.length>1||cmpt.length===1&&g.hasEdge(cmpt[0],cmpt[0])})}},{"../lodash":19,"./tarjan":13}],7:[function(require,module,exports){var _=require("../lodash");module.exports=floydWarshall;var DEFAULT_WEIGHT_FUNC=_.constant(1);function floydWarshall(g,weightFn,edgeFn){return runFloydWarshall(g,weightFn||DEFAULT_WEIGHT_FUNC,edgeFn||function(v){return g.outEdges(v)})}function runFloydWarshall(g,weightFn,edgeFn){var results={},nodes=g.nodes();nodes.forEach(function(v){results[v]=
{};results[v][v]={distance:0};nodes.forEach(function(w){if(v!==w)results[v][w]={distance:Number.POSITIVE_INFINITY}});edgeFn(v).forEach(function(edge){var w=edge.v===v?edge.w:edge.v,d=weightFn(edge);results[v][w]={distance:d,predecessor:v}})});nodes.forEach(function(k){var rowK=results[k];nodes.forEach(function(i){var rowI=results[i];nodes.forEach(function(j){var ik=rowI[k];var kj=rowK[j];var ij=rowI[j];var altDistance=ik.distance+kj.distance;if(altDistance<ij.distance){ij.distance=altDistance;ij.predecessor=
kj.predecessor}})})});return results}},{"../lodash":19}],8:[function(require,module,exports){module.exports={components:require("./components"),dijkstra:require("./dijkstra"),dijkstraAll:require("./dijkstra-all"),findCycles:require("./find-cycles"),floydWarshall:require("./floyd-warshall"),isAcyclic:require("./is-acyclic"),postorder:require("./postorder"),preorder:require("./preorder"),prim:require("./prim"),tarjan:require("./tarjan"),topsort:require("./topsort")}},{"./components":2,"./dijkstra":5,
"./dijkstra-all":4,"./find-cycles":6,"./floyd-warshall":7,"./is-acyclic":9,"./postorder":10,"./preorder":11,"./prim":12,"./tarjan":13,"./topsort":14}],9:[function(require,module,exports){var topsort=require("./topsort");module.exports=isAcyclic;function isAcyclic(g){try{topsort(g)}catch(e){if(e instanceof topsort.CycleException)return false;throw e;}return true}},{"./topsort":14}],10:[function(require,module,exports){var dfs=require("./dfs");module.exports=postorder;function postorder(g,vs){return dfs(g,
vs,"post")}},{"./dfs":3}],11:[function(require,module,exports){var dfs=require("./dfs");module.exports=preorder;function preorder(g,vs){return dfs(g,vs,"pre")}},{"./dfs":3}],12:[function(require,module,exports){var _=require("../lodash"),Graph=require("../graph"),PriorityQueue=require("../data/priority-queue");module.exports=prim;function prim(g,weightFunc){var result=new Graph,parents={},pq=new PriorityQueue,v;function updateNeighbors(edge){var w=edge.v===v?edge.w:edge.v,pri=pq.priority(w);if(pri!==
undefined){var edgeWeight=weightFunc(edge);if(edgeWeight<pri){parents[w]=v;pq.decrease(w,edgeWeight)}}}if(g.nodeCount()===0)return result;_.each(g.nodes(),function(v){pq.add(v,Number.POSITIVE_INFINITY);result.setNode(v)});pq.decrease(g.nodes()[0],0);var init=false;while(pq.size()>0){v=pq.removeMin();if(_.has(parents,v))result.setEdge(v,parents[v]);else if(init)throw new Error("Input graph is not connected: "+g);else init=true;g.nodeEdges(v).forEach(updateNeighbors)}return result}},{"../data/priority-queue":15,
"../graph":16,"../lodash":19}],13:[function(require,module,exports){var _=require("../lodash");module.exports=tarjan;function tarjan(g){var index=0,stack=[],visited={},results=[];function dfs(v){var entry=visited[v]={onStack:true,lowlink:index,index:index++};stack.push(v);g.successors(v).forEach(function(w){if(!_.has(visited,w)){dfs(w);entry.lowlink=Math.min(entry.lowlink,visited[w].lowlink)}else if(visited[w].onStack)entry.lowlink=Math.min(entry.lowlink,visited[w].index)});if(entry.lowlink===entry.index){var cmpt=
[],w;do{w=stack.pop();visited[w].onStack=false;cmpt.push(w)}while(v!==w);results.push(cmpt)}}g.nodes().forEach(function(v){if(!_.has(visited,v))dfs(v)});return results}},{"../lodash":19}],14:[function(require,module,exports){var _=require("../lodash");module.exports=topsort;topsort.CycleException=CycleException;function topsort(g){var visited={},stack={},results=[];function visit(node){if(_.has(stack,node))throw new CycleException;if(!_.has(visited,node)){stack[node]=true;visited[node]=true;_.each(g.predecessors(node),
visit);delete stack[node];results.push(node)}}_.each(g.sinks(),visit);if(_.size(visited)!==g.nodeCount())throw new CycleException;return results}function CycleException(){}},{"../lodash":19}],15:[function(require,module,exports){var _=require("../lodash");module.exports=PriorityQueue;function PriorityQueue(){this._arr=[];this._keyIndices={}}PriorityQueue.prototype.size=function(){return this._arr.length};PriorityQueue.prototype.keys=function(){return this._arr.map(function(x){return x.key})};PriorityQueue.prototype.has=
function(key){return _.has(this._keyIndices,key)};PriorityQueue.prototype.priority=function(key){var index=this._keyIndices[key];if(index!==undefined)return this._arr[index].priority};PriorityQueue.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};PriorityQueue.prototype.add=function(key,priority){var keyIndices=this._keyIndices;key=String(key);if(!_.has(keyIndices,key)){var arr=this._arr;var index=arr.length;keyIndices[key]=index;arr.push({key:key,
priority:priority});this._decrease(index);return true}return false};PriorityQueue.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var min=this._arr.pop();delete this._keyIndices[min.key];this._heapify(0);return min.key};PriorityQueue.prototype.decrease=function(key,priority){var index=this._keyIndices[key];if(priority>this._arr[index].priority)throw new Error("New priority is greater than current priority. "+"Key: "+key+" Old: "+this._arr[index].priority+" New: "+priority);this._arr[index].priority=
priority;this._decrease(index)};PriorityQueue.prototype._heapify=function(i){var arr=this._arr;var l=2*i,r=l+1,largest=i;if(l<arr.length){largest=arr[l].priority<arr[largest].priority?l:largest;if(r<arr.length)largest=arr[r].priority<arr[largest].priority?r:largest;if(largest!==i){this._swap(i,largest);this._heapify(largest)}}};PriorityQueue.prototype._decrease=function(index){var arr=this._arr;var priority=arr[index].priority;var parent;while(index!==0){parent=index>>1;if(arr[parent].priority<priority)break;
this._swap(index,parent);index=parent}};PriorityQueue.prototype._swap=function(i,j){var arr=this._arr;var keyIndices=this._keyIndices;var origArrI=arr[i];var origArrJ=arr[j];arr[i]=origArrJ;arr[j]=origArrI;keyIndices[origArrJ.key]=i;keyIndices[origArrI.key]=j}},{"../lodash":19}],16:[function(require,module,exports){var _=require("./lodash");module.exports=Graph;var DEFAULT_EDGE_NAME="\x00",GRAPH_NODE="\x00",EDGE_KEY_DELIM="\u0001";function Graph(opts){this._isDirected=_.has(opts,"directed")?opts.directed:
true;this._isMultigraph=_.has(opts,"multigraph")?opts.multigraph:false;this._isCompound=_.has(opts,"compound")?opts.compound:false;this._label=undefined;this._defaultNodeLabelFn=_.constant(undefined);this._defaultEdgeLabelFn=_.constant(undefined);this._nodes={};if(this._isCompound){this._parent={};this._children={};this._children[GRAPH_NODE]={}}this._in={};this._preds={};this._out={};this._sucs={};this._edgeObjs={};this._edgeLabels={}}Graph.prototype._nodeCount=0;Graph.prototype._edgeCount=0;Graph.prototype.isDirected=
function(){return this._isDirected};Graph.prototype.isMultigraph=function(){return this._isMultigraph};Graph.prototype.isCompound=function(){return this._isCompound};Graph.prototype.setGraph=function(label){this._label=label;return this};Graph.prototype.graph=function(){return this._label};Graph.prototype.setDefaultNodeLabel=function(newDefault){if(!_.isFunction(newDefault))newDefault=_.constant(newDefault);this._defaultNodeLabelFn=newDefault;return this};Graph.prototype.nodeCount=function(){return this._nodeCount};
Graph.prototype.nodes=function(){return _.keys(this._nodes)};Graph.prototype.sources=function(){var self=this;return _.filter(this.nodes(),function(v){return _.isEmpty(self._in[v])})};Graph.prototype.sinks=function(){var self=this;return _.filter(this.nodes(),function(v){return _.isEmpty(self._out[v])})};Graph.prototype.setNodes=function(vs,value){var args=arguments;var self=this;_.each(vs,function(v){if(args.length>1)self.setNode(v,value);else self.setNode(v)});return this};Graph.prototype.setNode=
function(v,value){if(_.has(this._nodes,v)){if(arguments.length>1)this._nodes[v]=value;return this}this._nodes[v]=arguments.length>1?value:this._defaultNodeLabelFn(v);if(this._isCompound){this._parent[v]=GRAPH_NODE;this._children[v]={};this._children[GRAPH_NODE][v]=true}this._in[v]={};this._preds[v]={};this._out[v]={};this._sucs[v]={};++this._nodeCount;return this};Graph.prototype.node=function(v){return this._nodes[v]};Graph.prototype.hasNode=function(v){return _.has(this._nodes,v)};Graph.prototype.removeNode=
function(v){var self=this;if(_.has(this._nodes,v)){var removeEdge=function(e){self.removeEdge(self._edgeObjs[e])};delete this._nodes[v];if(this._isCompound){this._removeFromParentsChildList(v);delete this._parent[v];_.each(this.children(v),function(child){self.setParent(child)});delete this._children[v]}_.each(_.keys(this._in[v]),removeEdge);delete this._in[v];delete this._preds[v];_.each(_.keys(this._out[v]),removeEdge);delete this._out[v];delete this._sucs[v];--this._nodeCount}return this};Graph.prototype.setParent=
function(v,parent){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(_.isUndefined(parent))parent=GRAPH_NODE;else{parent+="";for(var ancestor=parent;!_.isUndefined(ancestor);ancestor=this.parent(ancestor))if(ancestor===v)throw new Error("Setting "+parent+" as parent of "+v+" would create a cycle");this.setNode(parent)}this.setNode(v);this._removeFromParentsChildList(v);this._parent[v]=parent;this._children[parent][v]=true;return this};Graph.prototype._removeFromParentsChildList=
function(v){delete this._children[this._parent[v]][v]};Graph.prototype.parent=function(v){if(this._isCompound){var parent=this._parent[v];if(parent!==GRAPH_NODE)return parent}};Graph.prototype.children=function(v){if(_.isUndefined(v))v=GRAPH_NODE;if(this._isCompound){var children=this._children[v];if(children)return _.keys(children)}else if(v===GRAPH_NODE)return this.nodes();else if(this.hasNode(v))return[]};Graph.prototype.predecessors=function(v){var predsV=this._preds[v];if(predsV)return _.keys(predsV)};
Graph.prototype.successors=function(v){var sucsV=this._sucs[v];if(sucsV)return _.keys(sucsV)};Graph.prototype.neighbors=function(v){var preds=this.predecessors(v);if(preds)return _.union(preds,this.successors(v))};Graph.prototype.isLeaf=function(v){var neighbors;if(this.isDirected())neighbors=this.successors(v);else neighbors=this.neighbors(v);return neighbors.length===0};Graph.prototype.filterNodes=function(filter){var copy=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,
compound:this._isCompound});copy.setGraph(this.graph());var self=this;_.each(this._nodes,function(value,v){if(filter(v))copy.setNode(v,value)});_.each(this._edgeObjs,function(e){if(copy.hasNode(e.v)&&copy.hasNode(e.w))copy.setEdge(e,self.edge(e))});var parents={};function findParent(v){var parent=self.parent(v);if(parent===undefined||copy.hasNode(parent)){parents[v]=parent;return parent}else if(parent in parents)return parents[parent];else return findParent(parent)}if(this._isCompound)_.each(copy.nodes(),
function(v){copy.setParent(v,findParent(v))});return copy};Graph.prototype.setDefaultEdgeLabel=function(newDefault){if(!_.isFunction(newDefault))newDefault=_.constant(newDefault);this._defaultEdgeLabelFn=newDefault;return this};Graph.prototype.edgeCount=function(){return this._edgeCount};Graph.prototype.edges=function(){return _.values(this._edgeObjs)};Graph.prototype.setPath=function(vs,value){var self=this,args=arguments;_.reduce(vs,function(v,w){if(args.length>1)self.setEdge(v,w,value);else self.setEdge(v,
w);return w});return this};Graph.prototype.setEdge=function(){var v,w,name,value,valueSpecified=false,arg0=arguments[0];if(typeof arg0==="object"&&arg0!==null&&"v"in arg0){v=arg0.v;w=arg0.w;name=arg0.name;if(arguments.length===2){value=arguments[1];valueSpecified=true}}else{v=arg0;w=arguments[1];name=arguments[3];if(arguments.length>2){value=arguments[2];valueSpecified=true}}v=""+v;w=""+w;if(!_.isUndefined(name))name=""+name;var e=edgeArgsToId(this._isDirected,v,w,name);if(_.has(this._edgeLabels,
e)){if(valueSpecified)this._edgeLabels[e]=value;return this}if(!_.isUndefined(name)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph \x3d false");this.setNode(v);this.setNode(w);this._edgeLabels[e]=valueSpecified?value:this._defaultEdgeLabelFn(v,w,name);var edgeObj=edgeArgsToObj(this._isDirected,v,w,name);v=edgeObj.v;w=edgeObj.w;Object.freeze(edgeObj);this._edgeObjs[e]=edgeObj;incrementOrInitEntry(this._preds[w],v);incrementOrInitEntry(this._sucs[v],w);this._in[w][e]=
edgeObj;this._out[v][e]=edgeObj;this._edgeCount++;return this};Graph.prototype.edge=function(v,w,name){var e=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,name);return this._edgeLabels[e]};Graph.prototype.hasEdge=function(v,w,name){var e=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,name);return _.has(this._edgeLabels,e)};Graph.prototype.removeEdge=function(v,w,name){var e=arguments.length===1?
edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,name),edge=this._edgeObjs[e];if(edge){v=edge.v;w=edge.w;delete this._edgeLabels[e];delete this._edgeObjs[e];decrementOrRemoveEntry(this._preds[w],v);decrementOrRemoveEntry(this._sucs[v],w);delete this._in[w][e];delete this._out[v][e];this._edgeCount--}return this};Graph.prototype.inEdges=function(v,u){var inV=this._in[v];if(inV){var edges=_.values(inV);if(!u)return edges;return _.filter(edges,function(edge){return edge.v===
u})}};Graph.prototype.outEdges=function(v,w){var outV=this._out[v];if(outV){var edges=_.values(outV);if(!w)return edges;return _.filter(edges,function(edge){return edge.w===w})}};Graph.prototype.nodeEdges=function(v,w){var inEdges=this.inEdges(v,w);if(inEdges)return inEdges.concat(this.outEdges(v,w))};function incrementOrInitEntry(map,k){if(map[k])map[k]++;else map[k]=1}function decrementOrRemoveEntry(map,k){if(!--map[k])delete map[k]}function edgeArgsToId(isDirected,v_,w_,name){var v=""+v_;var w=
""+w_;if(!isDirected&&v>w){var tmp=v;v=w;w=tmp}return v+EDGE_KEY_DELIM+w+EDGE_KEY_DELIM+(_.isUndefined(name)?DEFAULT_EDGE_NAME:name)}function edgeArgsToObj(isDirected,v_,w_,name){var v=""+v_;var w=""+w_;if(!isDirected&&v>w){var tmp=v;v=w;w=tmp}var edgeObj={v:v,w:w};if(name)edgeObj.name=name;return edgeObj}function edgeObjToId(isDirected,edgeObj){return edgeArgsToId(isDirected,edgeObj.v,edgeObj.w,edgeObj.name)}},{"./lodash":19}],17:[function(require,module,exports){module.exports={Graph:require("./graph"),
version:require("./version")}},{"./graph":16,"./version":20}],18:[function(require,module,exports){var _=require("./lodash"),Graph=require("./graph");module.exports={write:write,read:read};function write(g){var json={options:{directed:g.isDirected(),multigraph:g.isMultigraph(),compound:g.isCompound()},nodes:writeNodes(g),edges:writeEdges(g)};if(!_.isUndefined(g.graph()))json.value=_.clone(g.graph());return json}function writeNodes(g){return _.map(g.nodes(),function(v){var nodeValue=g.node(v),parent=
g.parent(v),node={v:v};if(!_.isUndefined(nodeValue))node.value=nodeValue;if(!_.isUndefined(parent))node.parent=parent;return node})}function writeEdges(g){return _.map(g.edges(),function(e){var edgeValue=g.edge(e),edge={v:e.v,w:e.w};if(!_.isUndefined(e.name))edge.name=e.name;if(!_.isUndefined(edgeValue))edge.value=edgeValue;return edge})}function read(json){var g=(new Graph(json.options)).setGraph(json.value);_.each(json.nodes,function(entry){g.setNode(entry.v,entry.value);if(entry.parent)g.setParent(entry.v,
entry.parent)});_.each(json.edges,function(entry){g.setEdge({v:entry.v,w:entry.w,name:entry.name},entry.value)});return g}},{"./graph":16,"./lodash":19}],19:[function(require,module,exports){var lodash;if(typeof require==="function")try{lodash=require("lodash")}catch(e){}if(!lodash)lodash=window._;module.exports=lodash},{"lodash":undefined}],20:[function(require,module,exports){module.exports="2.1.5"},{}]},{},[1])(1)});</script><script>(function(f){if(typeof exports==="object"&&typeof module!=="undefined")module.exports=f();else if(typeof define==="function"&&define.amd)define([],f);else{var g;if(typeof window!=="undefined")g=window;else if(typeof global!=="undefined")g=global;else if(typeof self!=="undefined")g=self;else g=this;g.dagre=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=
new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){module.exports={graphlib:require("./lib/graphlib"),layout:require("./lib/layout"),debug:require("./lib/debug"),util:{time:require("./lib/util").time,notime:require("./lib/util").notime},
version:require("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(require,module,exports){var _=require("./lodash"),greedyFAS=require("./greedy-fas");module.exports={run:run,undo:undo};function run(g){var fas=g.graph().acyclicer==="greedy"?greedyFAS(g,weightFn(g)):dfsFAS(g);_.forEach(fas,function(e){var label=g.edge(e);g.removeEdge(e);label.forwardName=e.name;label.reversed=true;g.setEdge(e.w,e.v,label,_.uniqueId("rev"))});function weightFn(g){return function(e){return g.edge(e).weight}}
}function dfsFAS(g){var fas=[],stack={},visited={};function dfs(v){if(_.has(visited,v))return;visited[v]=true;stack[v]=true;_.forEach(g.outEdges(v),function(e){if(_.has(stack,e.w))fas.push(e);else dfs(e.w)});delete stack[v]}_.forEach(g.nodes(),dfs);return fas}function undo(g){_.forEach(g.edges(),function(e){var label=g.edge(e);if(label.reversed){g.removeEdge(e);var forwardName=label.forwardName;delete label.reversed;delete label.forwardName;g.setEdge(e.w,e.v,label,forwardName)}})}},{"./greedy-fas":8,
"./lodash":10}],3:[function(require,module,exports){var _=require("./lodash"),util=require("./util");module.exports=addBorderSegments;function addBorderSegments(g){function dfs(v){var children=g.children(v),node=g.node(v);if(children.length)_.forEach(children,dfs);if(_.has(node,"minRank")){node.borderLeft=[];node.borderRight=[];for(var rank=node.minRank,maxRank=node.maxRank+1;rank<maxRank;++rank){addBorderNode(g,"borderLeft","_bl",v,node,rank);addBorderNode(g,"borderRight","_br",v,node,rank)}}}_.forEach(g.children(),
dfs)}function addBorderNode(g,prop,prefix,sg,sgNode,rank){var label={width:0,height:0,rank:rank,borderType:prop},prev=sgNode[prop][rank-1],curr=util.addDummyNode(g,"border",label,prefix);sgNode[prop][rank]=curr;g.setParent(curr,sg);if(prev)g.setEdge(prev,curr,{weight:1})}},{"./lodash":10,"./util":29}],4:[function(require,module,exports){var _=require("./lodash");module.exports={adjust:adjust,undo:undo};function adjust(g){var rankDir=g.graph().rankdir.toLowerCase();if(rankDir==="lr"||rankDir==="rl")swapWidthHeight(g)}
function undo(g){var rankDir=g.graph().rankdir.toLowerCase();if(rankDir==="bt"||rankDir==="rl")reverseY(g);if(rankDir==="lr"||rankDir==="rl"){swapXY(g);swapWidthHeight(g)}}function swapWidthHeight(g){_.forEach(g.nodes(),function(v){swapWidthHeightOne(g.node(v))});_.forEach(g.edges(),function(e){swapWidthHeightOne(g.edge(e))})}function swapWidthHeightOne(attrs){var w=attrs.width;attrs.width=attrs.height;attrs.height=w}function reverseY(g){_.forEach(g.nodes(),function(v){reverseYOne(g.node(v))});_.forEach(g.edges(),
function(e){var edge=g.edge(e);_.forEach(edge.points,reverseYOne);if(_.has(edge,"y"))reverseYOne(edge)})}function reverseYOne(attrs){attrs.y=-attrs.y}function swapXY(g){_.forEach(g.nodes(),function(v){swapXYOne(g.node(v))});_.forEach(g.edges(),function(e){var edge=g.edge(e);_.forEach(edge.points,swapXYOne);if(_.has(edge,"x"))swapXYOne(edge)})}function swapXYOne(attrs){var x=attrs.x;attrs.x=attrs.y;attrs.y=x}},{"./lodash":10}],5:[function(require,module,exports){module.exports=List;function List(){var sentinel=
{};sentinel._next=sentinel._prev=sentinel;this._sentinel=sentinel}List.prototype.dequeue=function(){var sentinel=this._sentinel,entry=sentinel._prev;if(entry!==sentinel){unlink(entry);return entry}};List.prototype.enqueue=function(entry){var sentinel=this._sentinel;if(entry._prev&&entry._next)unlink(entry);entry._next=sentinel._next;sentinel._next._prev=entry;sentinel._next=entry;entry._prev=sentinel};List.prototype.toString=function(){var strs=[],sentinel=this._sentinel,curr=sentinel._prev;while(curr!==
sentinel){strs.push(JSON.stringify(curr,filterOutLinks));curr=curr._prev}return"["+strs.join(", ")+"]"};function unlink(entry){entry._prev._next=entry._next;entry._next._prev=entry._prev;delete entry._next;delete entry._prev}function filterOutLinks(k,v){if(k!=="_next"&&k!=="_prev")return v}},{}],6:[function(require,module,exports){var _=require("./lodash"),util=require("./util"),Graph=require("./graphlib").Graph;module.exports={debugOrdering:debugOrdering};function debugOrdering(g){var layerMatrix=
util.buildLayerMatrix(g);var h=(new Graph({compound:true,multigraph:true})).setGraph({});_.forEach(g.nodes(),function(v){h.setNode(v,{label:v});h.setParent(v,"layer"+g.node(v).rank)});_.forEach(g.edges(),function(e){h.setEdge(e.v,e.w,{},e.name)});_.forEach(layerMatrix,function(layer,i){var layerV="layer"+i;h.setNode(layerV,{rank:"same"});_.reduce(layer,function(u,v){h.setEdge(u,v,{style:"invis"});return v})});return h}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(require,module,exports){var graphlib;
if(typeof require==="function")try{graphlib=require("graphlib")}catch(e){}if(!graphlib)graphlib=window.graphlib;module.exports=graphlib},{"graphlib":undefined}],8:[function(require,module,exports){var _=require("./lodash"),Graph=require("./graphlib").Graph,List=require("./data/list");module.exports=greedyFAS;var DEFAULT_WEIGHT_FN=_.constant(1);function greedyFAS(g,weightFn){if(g.nodeCount()<=1)return[];var state=buildState(g,weightFn||DEFAULT_WEIGHT_FN);var results=doGreedyFAS(state.graph,state.buckets,
state.zeroIdx);return _.flatten(_.map(results,function(e){return g.outEdges(e.v,e.w)}),true)}function doGreedyFAS(g,buckets,zeroIdx){var results=[],sources=buckets[buckets.length-1],sinks=buckets[0];var entry;while(g.nodeCount()){while(entry=sinks.dequeue())removeNode(g,buckets,zeroIdx,entry);while(entry=sources.dequeue())removeNode(g,buckets,zeroIdx,entry);if(g.nodeCount())for(var i=buckets.length-2;i>0;--i){entry=buckets[i].dequeue();if(entry){results=results.concat(removeNode(g,buckets,zeroIdx,
entry,true));break}}}return results}function removeNode(g,buckets,zeroIdx,entry,collectPredecessors){var results=collectPredecessors?[]:undefined;_.forEach(g.inEdges(entry.v),function(edge){var weight=g.edge(edge),uEntry=g.node(edge.v);if(collectPredecessors)results.push({v:edge.v,w:edge.w});uEntry.out-=weight;assignBucket(buckets,zeroIdx,uEntry)});_.forEach(g.outEdges(entry.v),function(edge){var weight=g.edge(edge),w=edge.w,wEntry=g.node(w);wEntry["in"]-=weight;assignBucket(buckets,zeroIdx,wEntry)});
g.removeNode(entry.v);return results}function buildState(g,weightFn){var fasGraph=new Graph,maxIn=0,maxOut=0;_.forEach(g.nodes(),function(v){fasGraph.setNode(v,{v:v,"in":0,out:0})});_.forEach(g.edges(),function(e){var prevWeight=fasGraph.edge(e.v,e.w)||0,weight=weightFn(e),edgeWeight=prevWeight+weight;fasGraph.setEdge(e.v,e.w,edgeWeight);maxOut=Math.max(maxOut,fasGraph.node(e.v).out+=weight);maxIn=Math.max(maxIn,fasGraph.node(e.w)["in"]+=weight)});var buckets=_.range(maxOut+maxIn+3).map(function(){return new List});
var zeroIdx=maxIn+1;_.forEach(fasGraph.nodes(),function(v){assignBucket(buckets,zeroIdx,fasGraph.node(v))});return{graph:fasGraph,buckets:buckets,zeroIdx:zeroIdx}}function assignBucket(buckets,zeroIdx,entry){if(!entry.out)buckets[0].enqueue(entry);else if(!entry["in"])buckets[buckets.length-1].enqueue(entry);else buckets[entry.out-entry["in"]+zeroIdx].enqueue(entry)}},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(require,module,exports){var _=require("./lodash"),acyclic=require("./acyclic"),
normalize=require("./normalize"),rank=require("./rank"),normalizeRanks=require("./util").normalizeRanks,parentDummyChains=require("./parent-dummy-chains"),removeEmptyRanks=require("./util").removeEmptyRanks,nestingGraph=require("./nesting-graph"),addBorderSegments=require("./add-border-segments"),coordinateSystem=require("./coordinate-system"),order=require("./order"),position=require("./position"),util=require("./util"),Graph=require("./graphlib").Graph;module.exports=layout;function layout(g,opts){var time=
opts&&opts.debugTiming?util.time:util.notime;time("layout",function(){var layoutGraph=time("  buildLayoutGraph",function(){return buildLayoutGraph(g)});time("  runLayout",function(){runLayout(layoutGraph,time)});time("  updateInputGraph",function(){updateInputGraph(g,layoutGraph)})})}function runLayout(g,time){time("    makeSpaceForEdgeLabels",function(){makeSpaceForEdgeLabels(g)});time("    removeSelfEdges",function(){removeSelfEdges(g)});time("    acyclic",function(){acyclic.run(g)});time("    nestingGraph.run",
function(){nestingGraph.run(g)});time("    rank",function(){rank(util.asNonCompoundGraph(g))});time("    injectEdgeLabelProxies",function(){injectEdgeLabelProxies(g)});time("    removeEmptyRanks",function(){removeEmptyRanks(g)});time("    nestingGraph.cleanup",function(){nestingGraph.cleanup(g)});time("    normalizeRanks",function(){normalizeRanks(g)});time("    assignRankMinMax",function(){assignRankMinMax(g)});time("    removeEdgeLabelProxies",function(){removeEdgeLabelProxies(g)});time("    normalize.run",
function(){normalize.run(g)});time("    parentDummyChains",function(){parentDummyChains(g)});time("    addBorderSegments",function(){addBorderSegments(g)});time("    order",function(){order(g)});time("    insertSelfEdges",function(){insertSelfEdges(g)});time("    adjustCoordinateSystem",function(){coordinateSystem.adjust(g)});time("    position",function(){position(g)});time("    positionSelfEdges",function(){positionSelfEdges(g)});time("    removeBorderNodes",function(){removeBorderNodes(g)});time("    normalize.undo",
function(){normalize.undo(g)});time("    fixupEdgeLabelCoords",function(){fixupEdgeLabelCoords(g)});time("    undoCoordinateSystem",function(){coordinateSystem.undo(g)});time("    translateGraph",function(){translateGraph(g)});time("    assignNodeIntersects",function(){assignNodeIntersects(g)});time("    reversePoints",function(){reversePointsForReversedEdges(g)});time("    acyclic.undo",function(){acyclic.undo(g)})}function updateInputGraph(inputGraph,layoutGraph){_.forEach(inputGraph.nodes(),function(v){var inputLabel=
inputGraph.node(v),layoutLabel=layoutGraph.node(v);if(inputLabel){inputLabel.x=layoutLabel.x;inputLabel.y=layoutLabel.y;if(layoutGraph.children(v).length){inputLabel.width=layoutLabel.width;inputLabel.height=layoutLabel.height}}});_.forEach(inputGraph.edges(),function(e){var inputLabel=inputGraph.edge(e),layoutLabel=layoutGraph.edge(e);inputLabel.points=layoutLabel.points;if(_.has(layoutLabel,"x")){inputLabel.x=layoutLabel.x;inputLabel.y=layoutLabel.y}});inputGraph.graph().width=layoutGraph.graph().width;
inputGraph.graph().height=layoutGraph.graph().height}var graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"];function buildLayoutGraph(inputGraph){var g=
new Graph({multigraph:true,compound:true}),graph=canonicalize(inputGraph.graph());g.setGraph(_.merge({},graphDefaults,selectNumberAttrs(graph,graphNumAttrs),_.pick(graph,graphAttrs)));_.forEach(inputGraph.nodes(),function(v){var node=canonicalize(inputGraph.node(v));g.setNode(v,_.defaults(selectNumberAttrs(node,nodeNumAttrs),nodeDefaults));g.setParent(v,inputGraph.parent(v))});_.forEach(inputGraph.edges(),function(e){var edge=canonicalize(inputGraph.edge(e));g.setEdge(e,_.merge({},edgeDefaults,selectNumberAttrs(edge,
edgeNumAttrs),_.pick(edge,edgeAttrs)))});return g}function makeSpaceForEdgeLabels(g){var graph=g.graph();graph.ranksep/=2;_.forEach(g.edges(),function(e){var edge=g.edge(e);edge.minlen*=2;if(edge.labelpos.toLowerCase()!=="c")if(graph.rankdir==="TB"||graph.rankdir==="BT")edge.width+=edge.labeloffset;else edge.height+=edge.labeloffset})}function injectEdgeLabelProxies(g){_.forEach(g.edges(),function(e){var edge=g.edge(e);if(edge.width&&edge.height){var v=g.node(e.v),w=g.node(e.w),label={rank:(w.rank-
v.rank)/2+v.rank,e:e};util.addDummyNode(g,"edge-proxy",label,"_ep")}})}function assignRankMinMax(g){var maxRank=0;_.forEach(g.nodes(),function(v){var node=g.node(v);if(node.borderTop){node.minRank=g.node(node.borderTop).rank;node.maxRank=g.node(node.borderBottom).rank;maxRank=_.max(maxRank,node.maxRank)}});g.graph().maxRank=maxRank}function removeEdgeLabelProxies(g){_.forEach(g.nodes(),function(v){var node=g.node(v);if(node.dummy==="edge-proxy"){g.edge(node.e).labelRank=node.rank;g.removeNode(v)}})}
function translateGraph(g){var minX=Number.POSITIVE_INFINITY,maxX=0,minY=Number.POSITIVE_INFINITY,maxY=0,graphLabel=g.graph(),marginX=graphLabel.marginx||0,marginY=graphLabel.marginy||0;function getExtremes(attrs){var x=attrs.x,y=attrs.y,w=attrs.width,h=attrs.height;minX=Math.min(minX,x-w/2);maxX=Math.max(maxX,x+w/2);minY=Math.min(minY,y-h/2);maxY=Math.max(maxY,y+h/2)}_.forEach(g.nodes(),function(v){getExtremes(g.node(v))});_.forEach(g.edges(),function(e){var edge=g.edge(e);if(_.has(edge,"x"))getExtremes(edge)});
minX-=marginX;minY-=marginY;_.forEach(g.nodes(),function(v){var node=g.node(v);node.x-=minX;node.y-=minY});_.forEach(g.edges(),function(e){var edge=g.edge(e);_.forEach(edge.points,function(p){p.x-=minX;p.y-=minY});if(_.has(edge,"x"))edge.x-=minX;if(_.has(edge,"y"))edge.y-=minY});graphLabel.width=maxX-minX+marginX;graphLabel.height=maxY-minY+marginY}function assignNodeIntersects(g){_.forEach(g.edges(),function(e){var edge=g.edge(e),nodeV=g.node(e.v),nodeW=g.node(e.w),p1,p2;if(!edge.points){edge.points=
[];p1=nodeW;p2=nodeV}else{p1=edge.points[0];p2=edge.points[edge.points.length-1]}edge.points.unshift(util.intersectRect(nodeV,p1));edge.points.push(util.intersectRect(nodeW,p2))})}function fixupEdgeLabelCoords(g){_.forEach(g.edges(),function(e){var edge=g.edge(e);if(_.has(edge,"x")){if(edge.labelpos==="l"||edge.labelpos==="r")edge.width-=edge.labeloffset;switch(edge.labelpos){case "l":edge.x-=edge.width/2+edge.labeloffset;break;case "r":edge.x+=edge.width/2+edge.labeloffset;break}}})}function reversePointsForReversedEdges(g){_.forEach(g.edges(),
function(e){var edge=g.edge(e);if(edge.reversed)edge.points.reverse()})}function removeBorderNodes(g){_.forEach(g.nodes(),function(v){if(g.children(v).length){var node=g.node(v),t=g.node(node.borderTop),b=g.node(node.borderBottom),l=g.node(_.last(node.borderLeft)),r=g.node(_.last(node.borderRight));node.width=Math.abs(r.x-l.x);node.height=Math.abs(b.y-t.y);node.x=l.x+node.width/2;node.y=t.y+node.height/2}});_.forEach(g.nodes(),function(v){if(g.node(v).dummy==="border")g.removeNode(v)})}function removeSelfEdges(g){_.forEach(g.edges(),
function(e){if(e.v===e.w){var node=g.node(e.v);if(!node.selfEdges)node.selfEdges=[];node.selfEdges.push({e:e,label:g.edge(e)});g.removeEdge(e)}})}function insertSelfEdges(g){var layers=util.buildLayerMatrix(g);_.forEach(layers,function(layer){var orderShift=0;_.forEach(layer,function(v,i){var node=g.node(v);node.order=i+orderShift;_.forEach(node.selfEdges,function(selfEdge){util.addDummyNode(g,"selfedge",{width:selfEdge.label.width,height:selfEdge.label.height,rank:node.rank,order:i+ ++orderShift,
e:selfEdge.e,label:selfEdge.label},"_se")});delete node.selfEdges})})}function positionSelfEdges(g){_.forEach(g.nodes(),function(v){var node=g.node(v);if(node.dummy==="selfedge"){var selfNode=g.node(node.e.v),x=selfNode.x+selfNode.width/2,y=selfNode.y,dx=node.x-x,dy=selfNode.height/2;g.setEdge(node.e,node.label);g.removeNode(v);node.label.points=[{x:x+2*dx/3,y:y-dy},{x:x+5*dx/6,y:y-dy},{x:x+dx,y:y},{x:x+5*dx/6,y:y+dy},{x:x+2*dx/3,y:y+dy}];node.label.x=node.x;node.label.y=node.y}})}function selectNumberAttrs(obj,
attrs){return _.mapValues(_.pick(obj,attrs),Number)}function canonicalize(attrs){var newAttrs={};_.forEach(attrs,function(v,k){newAttrs[k.toLowerCase()]=v});return newAttrs}},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(require,module,exports){var lodash;if(typeof require==="function")try{lodash=require("lodash")}catch(e){}if(!lodash)lodash=
window._;module.exports=lodash},{"lodash":undefined}],11:[function(require,module,exports){var _=require("./lodash"),util=require("./util");module.exports={run:run,cleanup:cleanup};function run(g){var root=util.addDummyNode(g,"root",{},"_root");var depths=treeDepths(g);var height=_.max(_.values(depths))-1;var nodeSep=2*height+1;g.graph().nestingRoot=root;_.forEach(g.edges(),function(e){g.edge(e).minlen*=nodeSep});var weight=sumWeights(g)+1;_.forEach(g.children(),function(child){dfs(g,root,nodeSep,
weight,height,depths,child)});g.graph().nodeRankFactor=nodeSep}function dfs(g,root,nodeSep,weight,height,depths,v){var children=g.children(v);if(!children.length){if(v!==root)g.setEdge(root,v,{weight:0,minlen:nodeSep});return}var top=util.addBorderNode(g,"_bt"),bottom=util.addBorderNode(g,"_bb"),label=g.node(v);g.setParent(top,v);label.borderTop=top;g.setParent(bottom,v);label.borderBottom=bottom;_.forEach(children,function(child){dfs(g,root,nodeSep,weight,height,depths,child);var childNode=g.node(child),
childTop=childNode.borderTop?childNode.borderTop:child,childBottom=childNode.borderBottom?childNode.borderBottom:child,thisWeight=childNode.borderTop?weight:2*weight,minlen=childTop!==childBottom?1:height-depths[v]+1;g.setEdge(top,childTop,{weight:thisWeight,minlen:minlen,nestingEdge:true});g.setEdge(childBottom,bottom,{weight:thisWeight,minlen:minlen,nestingEdge:true})});if(!g.parent(v))g.setEdge(root,top,{weight:0,minlen:height+depths[v]})}function treeDepths(g){var depths={};function dfs(v,depth){var children=
g.children(v);if(children&&children.length)_.forEach(children,function(child){dfs(child,depth+1)});depths[v]=depth}_.forEach(g.children(),function(v){dfs(v,1)});return depths}function sumWeights(g){return _.reduce(g.edges(),function(acc,e){return acc+g.edge(e).weight},0)}function cleanup(g){var graphLabel=g.graph();g.removeNode(graphLabel.nestingRoot);delete graphLabel.nestingRoot;_.forEach(g.edges(),function(e){var edge=g.edge(e);if(edge.nestingEdge)g.removeEdge(e)})}},{"./lodash":10,"./util":29}],
12:[function(require,module,exports){var _=require("./lodash"),util=require("./util");module.exports={run:run,undo:undo};function run(g){g.graph().dummyChains=[];_.forEach(g.edges(),function(edge){normalizeEdge(g,edge)})}function normalizeEdge(g,e){var v=e.v,vRank=g.node(v).rank,w=e.w,wRank=g.node(w).rank,name=e.name,edgeLabel=g.edge(e),labelRank=edgeLabel.labelRank;if(wRank===vRank+1)return;g.removeEdge(e);var dummy,attrs,i;for(i=0,++vRank;vRank<wRank;++i,++vRank){edgeLabel.points=[];attrs={width:0,
height:0,edgeLabel:edgeLabel,edgeObj:e,rank:vRank};dummy=util.addDummyNode(g,"edge",attrs,"_d");if(vRank===labelRank){attrs.width=edgeLabel.width;attrs.height=edgeLabel.height;attrs.dummy="edge-label";attrs.labelpos=edgeLabel.labelpos}g.setEdge(v,dummy,{weight:edgeLabel.weight},name);if(i===0)g.graph().dummyChains.push(dummy);v=dummy}g.setEdge(v,w,{weight:edgeLabel.weight},name)}function undo(g){_.forEach(g.graph().dummyChains,function(v){var node=g.node(v),origLabel=node.edgeLabel,w;g.setEdge(node.edgeObj,
origLabel);while(node.dummy){w=g.successors(v)[0];g.removeNode(v);origLabel.points.push({x:node.x,y:node.y});if(node.dummy==="edge-label"){origLabel.x=node.x;origLabel.y=node.y;origLabel.width=node.width;origLabel.height=node.height}v=w;node=g.node(v)}})}},{"./lodash":10,"./util":29}],13:[function(require,module,exports){var _=require("../lodash");module.exports=addSubgraphConstraints;function addSubgraphConstraints(g,cg,vs){var prev={},rootPrev;_.forEach(vs,function(v){var child=g.parent(v),parent,
prevChild;while(child){parent=g.parent(child);if(parent){prevChild=prev[parent];prev[parent]=child}else{prevChild=rootPrev;rootPrev=child}if(prevChild&&prevChild!==child){cg.setEdge(prevChild,child);return}child=parent}})}},{"../lodash":10}],14:[function(require,module,exports){var _=require("../lodash");module.exports=barycenter;function barycenter(g,movable){return _.map(movable,function(v){var inV=g.inEdges(v);if(!inV.length)return{v:v};else{var result=_.reduce(inV,function(acc,e){var edge=g.edge(e),
nodeU=g.node(e.v);return{sum:acc.sum+edge.weight*nodeU.order,weight:acc.weight+edge.weight}},{sum:0,weight:0});return{v:v,barycenter:result.sum/result.weight,weight:result.weight}}})}},{"../lodash":10}],15:[function(require,module,exports){var _=require("../lodash"),Graph=require("../graphlib").Graph;module.exports=buildLayerGraph;function buildLayerGraph(g,rank,relationship){var root=createRootNode(g),result=(new Graph({compound:true})).setGraph({root:root}).setDefaultNodeLabel(function(v){return g.node(v)});
_.forEach(g.nodes(),function(v){var node=g.node(v),parent=g.parent(v);if(node.rank===rank||node.minRank<=rank&&rank<=node.maxRank){result.setNode(v);result.setParent(v,parent||root);_.forEach(g[relationship](v),function(e){var u=e.v===v?e.w:e.v,edge=result.edge(u,v),weight=!_.isUndefined(edge)?edge.weight:0;result.setEdge(u,v,{weight:g.edge(e).weight+weight})});if(_.has(node,"minRank"))result.setNode(v,{borderLeft:node.borderLeft[rank],borderRight:node.borderRight[rank]})}});return result}function createRootNode(g){var v;
while(g.hasNode(v=_.uniqueId("_root")));return v}},{"../graphlib":7,"../lodash":10}],16:[function(require,module,exports){var _=require("../lodash");module.exports=crossCount;function crossCount(g,layering){var cc=0;for(var i=1;i<layering.length;++i)cc+=twoLayerCrossCount(g,layering[i-1],layering[i]);return cc}function twoLayerCrossCount(g,northLayer,southLayer){var southPos=_.zipObject(southLayer,_.map(southLayer,function(v,i){return i}));var southEntries=_.flatten(_.map(northLayer,function(v){return _.chain(g.outEdges(v)).map(function(e){return{pos:southPos[e.w],
weight:g.edge(e).weight}}).sortBy("pos").value()}),true);var firstIndex=1;while(firstIndex<southLayer.length)firstIndex<<=1;var treeSize=2*firstIndex-1;firstIndex-=1;var tree=_.map(new Array(treeSize),function(){return 0});var cc=0;_.forEach(southEntries.forEach(function(entry){var index=entry.pos+firstIndex;tree[index]+=entry.weight;var weightSum=0;while(index>0){if(index%2)weightSum+=tree[index+1];index=index-1>>1;tree[index]+=entry.weight}cc+=entry.weight*weightSum}));return cc}},{"../lodash":10}],
17:[function(require,module,exports){var _=require("../lodash"),initOrder=require("./init-order"),crossCount=require("./cross-count"),sortSubgraph=require("./sort-subgraph"),buildLayerGraph=require("./build-layer-graph"),addSubgraphConstraints=require("./add-subgraph-constraints"),Graph=require("../graphlib").Graph,util=require("../util");module.exports=order;function order(g){var maxRank=util.maxRank(g),downLayerGraphs=buildLayerGraphs(g,_.range(1,maxRank+1),"inEdges"),upLayerGraphs=buildLayerGraphs(g,
_.range(maxRank-1,-1,-1),"outEdges");var layering=initOrder(g);assignOrder(g,layering);var bestCC=Number.POSITIVE_INFINITY,best;for(var i=0,lastBest=0;lastBest<4;++i,++lastBest){sweepLayerGraphs(i%2?downLayerGraphs:upLayerGraphs,i%4>=2);layering=util.buildLayerMatrix(g);var cc=crossCount(g,layering);if(cc<bestCC){lastBest=0;best=_.cloneDeep(layering);bestCC=cc}}assignOrder(g,best)}function buildLayerGraphs(g,ranks,relationship){return _.map(ranks,function(rank){return buildLayerGraph(g,rank,relationship)})}
function sweepLayerGraphs(layerGraphs,biasRight){var cg=new Graph;_.forEach(layerGraphs,function(lg){var root=lg.graph().root;var sorted=sortSubgraph(lg,root,cg,biasRight);_.forEach(sorted.vs,function(v,i){lg.node(v).order=i});addSubgraphConstraints(lg,cg,sorted.vs)})}function assignOrder(g,layering){_.forEach(layering,function(layer){_.forEach(layer,function(v,i){g.node(v).order=i})})}},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,
"./init-order":18,"./sort-subgraph":20}],18:[function(require,module,exports){var _=require("../lodash");module.exports=initOrder;function initOrder(g){var visited={},simpleNodes=_.filter(g.nodes(),function(v){return!g.children(v).length}),maxRank=_.max(_.map(simpleNodes,function(v){return g.node(v).rank})),layers=_.map(_.range(maxRank+1),function(){return[]});function dfs(v){if(_.has(visited,v))return;visited[v]=true;var node=g.node(v);layers[node.rank].push(v);_.forEach(g.successors(v),dfs)}var orderedVs=
_.sortBy(simpleNodes,function(v){return g.node(v).rank});_.forEach(orderedVs,dfs);return layers}},{"../lodash":10}],19:[function(require,module,exports){var _=require("../lodash");module.exports=resolveConflicts;function resolveConflicts(entries,cg){var mappedEntries={};_.forEach(entries,function(entry,i){var tmp=mappedEntries[entry.v]={indegree:0,"in":[],out:[],vs:[entry.v],i:i};if(!_.isUndefined(entry.barycenter)){tmp.barycenter=entry.barycenter;tmp.weight=entry.weight}});_.forEach(cg.edges(),function(e){var entryV=
mappedEntries[e.v],entryW=mappedEntries[e.w];if(!_.isUndefined(entryV)&&!_.isUndefined(entryW)){entryW.indegree++;entryV.out.push(mappedEntries[e.w])}});var sourceSet=_.filter(mappedEntries,function(entry){return!entry.indegree});return doResolveConflicts(sourceSet)}function doResolveConflicts(sourceSet){var entries=[];function handleIn(vEntry){return function(uEntry){if(uEntry.merged)return;if(_.isUndefined(uEntry.barycenter)||_.isUndefined(vEntry.barycenter)||uEntry.barycenter>=vEntry.barycenter)mergeEntries(vEntry,
uEntry)}}function handleOut(vEntry){return function(wEntry){wEntry["in"].push(vEntry);if(--wEntry.indegree===0)sourceSet.push(wEntry)}}while(sourceSet.length){var entry=sourceSet.pop();entries.push(entry);_.forEach(entry["in"].reverse(),handleIn(entry));_.forEach(entry.out,handleOut(entry))}return _.chain(entries).filter(function(entry){return!entry.merged}).map(function(entry){return _.pick(entry,["vs","i","barycenter","weight"])}).value()}function mergeEntries(target,source){var sum=0,weight=0;
if(target.weight){sum+=target.barycenter*target.weight;weight+=target.weight}if(source.weight){sum+=source.barycenter*source.weight;weight+=source.weight}target.vs=source.vs.concat(target.vs);target.barycenter=sum/weight;target.weight=weight;target.i=Math.min(source.i,target.i);source.merged=true}},{"../lodash":10}],20:[function(require,module,exports){var _=require("../lodash"),barycenter=require("./barycenter"),resolveConflicts=require("./resolve-conflicts"),sort=require("./sort");module.exports=
sortSubgraph;function sortSubgraph(g,v,cg,biasRight){var movable=g.children(v),node=g.node(v),bl=node?node.borderLeft:undefined,br=node?node.borderRight:undefined,subgraphs={};if(bl)movable=_.filter(movable,function(w){return w!==bl&&w!==br});var barycenters=barycenter(g,movable);_.forEach(barycenters,function(entry){if(g.children(entry.v).length){var subgraphResult=sortSubgraph(g,entry.v,cg,biasRight);subgraphs[entry.v]=subgraphResult;if(_.has(subgraphResult,"barycenter"))mergeBarycenters(entry,
subgraphResult)}});var entries=resolveConflicts(barycenters,cg);expandSubgraphs(entries,subgraphs);var result=sort(entries,biasRight);if(bl){result.vs=_.flatten([bl,result.vs,br],true);if(g.predecessors(bl).length){var blPred=g.node(g.predecessors(bl)[0]),brPred=g.node(g.predecessors(br)[0]);if(!_.has(result,"barycenter")){result.barycenter=0;result.weight=0}result.barycenter=(result.barycenter*result.weight+blPred.order+brPred.order)/(result.weight+2);result.weight+=2}}return result}function expandSubgraphs(entries,
subgraphs){_.forEach(entries,function(entry){entry.vs=_.flatten(entry.vs.map(function(v){if(subgraphs[v])return subgraphs[v].vs;return v}),true)})}function mergeBarycenters(target,other){if(!_.isUndefined(target.barycenter)){target.barycenter=(target.barycenter*target.weight+other.barycenter*other.weight)/(target.weight+other.weight);target.weight+=other.weight}else{target.barycenter=other.barycenter;target.weight=other.weight}}},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],
21:[function(require,module,exports){var _=require("../lodash"),util=require("../util");module.exports=sort;function sort(entries,biasRight){var parts=util.partition(entries,function(entry){return _.has(entry,"barycenter")});var sortable=parts.lhs,unsortable=_.sortBy(parts.rhs,function(entry){return-entry.i}),vs=[],sum=0,weight=0,vsIndex=0;sortable.sort(compareWithBias(!!biasRight));vsIndex=consumeUnsortable(vs,unsortable,vsIndex);_.forEach(sortable,function(entry){vsIndex+=entry.vs.length;vs.push(entry.vs);
sum+=entry.barycenter*entry.weight;weight+=entry.weight;vsIndex=consumeUnsortable(vs,unsortable,vsIndex)});var result={vs:_.flatten(vs,true)};if(weight){result.barycenter=sum/weight;result.weight=weight}return result}function consumeUnsortable(vs,unsortable,index){var last;while(unsortable.length&&(last=_.last(unsortable)).i<=index){unsortable.pop();vs.push(last.vs);index++}return index}function compareWithBias(bias){return function(entryV,entryW){if(entryV.barycenter<entryW.barycenter)return-1;else if(entryV.barycenter>
entryW.barycenter)return 1;return!bias?entryV.i-entryW.i:entryW.i-entryV.i}}},{"../lodash":10,"../util":29}],22:[function(require,module,exports){var _=require("./lodash");module.exports=parentDummyChains;function parentDummyChains(g){var postorderNums=postorder(g);_.forEach(g.graph().dummyChains,function(v){var node=g.node(v),edgeObj=node.edgeObj,pathData=findPath(g,postorderNums,edgeObj.v,edgeObj.w),path=pathData.path,lca=pathData.lca,pathIdx=0,pathV=path[pathIdx],ascending=true;while(v!==edgeObj.w){node=
g.node(v);if(ascending){while((pathV=path[pathIdx])!==lca&&g.node(pathV).maxRank<node.rank)pathIdx++;if(pathV===lca)ascending=false}if(!ascending){while(pathIdx<path.length-1&&g.node(pathV=path[pathIdx+1]).minRank<=node.rank)pathIdx++;pathV=path[pathIdx]}g.setParent(v,pathV);v=g.successors(v)[0]}})}function findPath(g,postorderNums,v,w){var vPath=[],wPath=[],low=Math.min(postorderNums[v].low,postorderNums[w].low),lim=Math.max(postorderNums[v].lim,postorderNums[w].lim),parent,lca;parent=v;do{parent=
g.parent(parent);vPath.push(parent)}while(parent&&(postorderNums[parent].low>low||lim>postorderNums[parent].lim));lca=parent;parent=w;while((parent=g.parent(parent))!==lca)wPath.push(parent);return{path:vPath.concat(wPath.reverse()),lca:lca}}function postorder(g){var result={},lim=0;function dfs(v){var low=lim;_.forEach(g.children(v),dfs);result[v]={low:low,lim:lim++}}_.forEach(g.children(),dfs);return result}},{"./lodash":10}],23:[function(require,module,exports){var _=require("../lodash"),Graph=
require("../graphlib").Graph,util=require("../util");module.exports={positionX:positionX,findType1Conflicts:findType1Conflicts,findType2Conflicts:findType2Conflicts,addConflict:addConflict,hasConflict:hasConflict,verticalAlignment:verticalAlignment,horizontalCompaction:horizontalCompaction,alignCoordinates:alignCoordinates,findSmallestWidthAlignment:findSmallestWidthAlignment,balance:balance};function findType1Conflicts(g,layering){var conflicts={};function visitLayer(prevLayer,layer){var k0=0,scanPos=
0,prevLayerLength=prevLayer.length,lastNode=_.last(layer);_.forEach(layer,function(v,i){var w=findOtherInnerSegmentNode(g,v),k1=w?g.node(w).order:prevLayerLength;if(w||v===lastNode){_.forEach(layer.slice(scanPos,i+1),function(scanNode){_.forEach(g.predecessors(scanNode),function(u){var uLabel=g.node(u),uPos=uLabel.order;if((uPos<k0||k1<uPos)&&!(uLabel.dummy&&g.node(scanNode).dummy))addConflict(conflicts,u,scanNode)})});scanPos=i+1;k0=k1}});return layer}_.reduce(layering,visitLayer);return conflicts}
function findType2Conflicts(g,layering){var conflicts={};function scan(south,southPos,southEnd,prevNorthBorder,nextNorthBorder){var v;_.forEach(_.range(southPos,southEnd),function(i){v=south[i];if(g.node(v).dummy)_.forEach(g.predecessors(v),function(u){var uNode=g.node(u);if(uNode.dummy&&(uNode.order<prevNorthBorder||uNode.order>nextNorthBorder))addConflict(conflicts,u,v)})})}function visitLayer(north,south){var prevNorthPos=-1,nextNorthPos,southPos=0;_.forEach(south,function(v,southLookahead){if(g.node(v).dummy===
"border"){var predecessors=g.predecessors(v);if(predecessors.length){nextNorthPos=g.node(predecessors[0]).order;scan(south,southPos,southLookahead,prevNorthPos,nextNorthPos);southPos=southLookahead;prevNorthPos=nextNorthPos}}scan(south,southPos,south.length,nextNorthPos,north.length)});return south}_.reduce(layering,visitLayer);return conflicts}function findOtherInnerSegmentNode(g,v){if(g.node(v).dummy)return _.find(g.predecessors(v),function(u){return g.node(u).dummy})}function addConflict(conflicts,
v,w){if(v>w){var tmp=v;v=w;w=tmp}var conflictsV=conflicts[v];if(!conflictsV)conflicts[v]=conflictsV={};conflictsV[w]=true}function hasConflict(conflicts,v,w){if(v>w){var tmp=v;v=w;w=tmp}return _.has(conflicts[v],w)}function verticalAlignment(g,layering,conflicts,neighborFn){var root={},align={},pos={};_.forEach(layering,function(layer){_.forEach(layer,function(v,order){root[v]=v;align[v]=v;pos[v]=order})});_.forEach(layering,function(layer){var prevIdx=-1;_.forEach(layer,function(v){var ws=neighborFn(v);
if(ws.length){ws=_.sortBy(ws,function(w){return pos[w]});var mp=(ws.length-1)/2;for(var i=Math.floor(mp),il=Math.ceil(mp);i<=il;++i){var w=ws[i];if(align[v]===v&&prevIdx<pos[w]&&!hasConflict(conflicts,v,w)){align[w]=v;align[v]=root[v]=root[w];prevIdx=pos[w]}}}})});return{root:root,align:align}}function horizontalCompaction(g,layering,root,align,reverseSep){var xs={},blockG=buildBlockGraph(g,layering,root,reverseSep),borderType=reverseSep?"borderLeft":"borderRight";function iterate(setXsFunc,nextNodesFunc){var stack=
blockG.nodes();var elem=stack.pop();var visited={};while(elem){if(visited[elem])setXsFunc(elem);else{visited[elem]=true;stack.push(elem);stack=stack.concat(nextNodesFunc(elem))}elem=stack.pop()}}function pass1(elem){xs[elem]=blockG.inEdges(elem).reduce(function(acc,e){return Math.max(acc,xs[e.v]+blockG.edge(e))},0)}function pass2(elem){var min=blockG.outEdges(elem).reduce(function(acc,e){return Math.min(acc,xs[e.w]-blockG.edge(e))},Number.POSITIVE_INFINITY);var node=g.node(elem);if(min!==Number.POSITIVE_INFINITY&&
node.borderType!==borderType)xs[elem]=Math.max(xs[elem],min)}iterate(pass1,_.bind(blockG.predecessors,blockG));iterate(pass2,_.bind(blockG.successors,blockG));_.forEach(align,function(v){xs[v]=xs[root[v]]});return xs}function buildBlockGraph(g,layering,root,reverseSep){var blockGraph=new Graph,graphLabel=g.graph(),sepFn=sep(graphLabel.nodesep,graphLabel.edgesep,reverseSep);_.forEach(layering,function(layer){var u;_.forEach(layer,function(v){var vRoot=root[v];blockGraph.setNode(vRoot);if(u){var uRoot=
root[u],prevMax=blockGraph.edge(uRoot,vRoot);blockGraph.setEdge(uRoot,vRoot,Math.max(sepFn(g,v,u),prevMax||0))}u=v})});return blockGraph}function findSmallestWidthAlignment(g,xss){return _.minBy(_.values(xss),function(xs){var max=Number.NEGATIVE_INFINITY;var min=Number.POSITIVE_INFINITY;_.forIn(xs,function(x,v){var halfWidth=width(g,v)/2;max=Math.max(x+halfWidth,max);min=Math.min(x-halfWidth,min)});return max-min})}function alignCoordinates(xss,alignTo){var alignToVals=_.values(alignTo),alignToMin=
_.min(alignToVals),alignToMax=_.max(alignToVals);_.forEach(["u","d"],function(vert){_.forEach(["l","r"],function(horiz){var alignment=vert+horiz,xs=xss[alignment],delta;if(xs===alignTo)return;var xsVals=_.values(xs);delta=horiz==="l"?alignToMin-_.min(xsVals):alignToMax-_.max(xsVals);if(delta)xss[alignment]=_.mapValues(xs,function(x){return x+delta})})})}function balance(xss,align){return _.mapValues(xss.ul,function(ignore,v){if(align)return xss[align.toLowerCase()][v];else{var xs=_.sortBy(_.map(xss,
v));return(xs[1]+xs[2])/2}})}function positionX(g){var layering=util.buildLayerMatrix(g),conflicts=_.merge(findType1Conflicts(g,layering),findType2Conflicts(g,layering));var xss={},adjustedLayering;_.forEach(["u","d"],function(vert){adjustedLayering=vert==="u"?layering:_.values(layering).reverse();_.forEach(["l","r"],function(horiz){if(horiz==="r")adjustedLayering=_.map(adjustedLayering,function(inner){return _.values(inner).reverse()});var neighborFn=_.bind(vert==="u"?g.predecessors:g.successors,
g);var align=verticalAlignment(g,adjustedLayering,conflicts,neighborFn);var xs=horizontalCompaction(g,adjustedLayering,align.root,align.align,horiz==="r");if(horiz==="r")xs=_.mapValues(xs,function(x){return-x});xss[vert+horiz]=xs})});var smallestWidth=findSmallestWidthAlignment(g,xss);alignCoordinates(xss,smallestWidth);return balance(xss,g.graph().align)}function sep(nodeSep,edgeSep,reverseSep){return function(g,v,w){var vLabel=g.node(v),wLabel=g.node(w),sum=0,delta;sum+=vLabel.width/2;if(_.has(vLabel,
"labelpos"))switch(vLabel.labelpos.toLowerCase()){case "l":delta=-vLabel.width/2;break;case "r":delta=vLabel.width/2;break}if(delta)sum+=reverseSep?delta:-delta;delta=0;sum+=(vLabel.dummy?edgeSep:nodeSep)/2;sum+=(wLabel.dummy?edgeSep:nodeSep)/2;sum+=wLabel.width/2;if(_.has(wLabel,"labelpos"))switch(wLabel.labelpos.toLowerCase()){case "l":delta=wLabel.width/2;break;case "r":delta=-wLabel.width/2;break}if(delta)sum+=reverseSep?delta:-delta;delta=0;return sum}}function width(g,v){return g.node(v).width}
},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(require,module,exports){var _=require("../lodash"),util=require("../util"),positionX=require("./bk").positionX;module.exports=position;function position(g){g=util.asNonCompoundGraph(g);positionY(g);_.forEach(positionX(g),function(x,v){g.node(v).x=x})}function positionY(g){var layering=util.buildLayerMatrix(g),rankSep=g.graph().ranksep,prevY=0;_.forEach(layering,function(layer){var maxHeight=_.max(_.map(layer,function(v){return g.node(v).height}));
_.forEach(layer,function(v){g.node(v).y=prevY+maxHeight/2});prevY+=maxHeight+rankSep})}},{"../lodash":10,"../util":29,"./bk":23}],25:[function(require,module,exports){var _=require("../lodash"),Graph=require("../graphlib").Graph,slack=require("./util").slack;module.exports=feasibleTree;function feasibleTree(g){var t=new Graph({directed:false});var start=g.nodes()[0],size=g.nodeCount();t.setNode(start,{});var edge,delta;while(tightTree(t,g)<size){edge=findMinSlackEdge(t,g);delta=t.hasNode(edge.v)?
slack(g,edge):-slack(g,edge);shiftRanks(t,g,delta)}return t}function tightTree(t,g){function dfs(v){_.forEach(g.nodeEdges(v),function(e){var edgeV=e.v,w=v===edgeV?e.w:edgeV;if(!t.hasNode(w)&&!slack(g,e)){t.setNode(w,{});t.setEdge(v,w,{});dfs(w)}})}_.forEach(t.nodes(),dfs);return t.nodeCount()}function findMinSlackEdge(t,g){return _.minBy(g.edges(),function(e){if(t.hasNode(e.v)!==t.hasNode(e.w))return slack(g,e)})}function shiftRanks(t,g,delta){_.forEach(t.nodes(),function(v){g.node(v).rank+=delta})}
},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(require,module,exports){var rankUtil=require("./util"),longestPath=rankUtil.longestPath,feasibleTree=require("./feasible-tree"),networkSimplex=require("./network-simplex");module.exports=rank;function rank(g){switch(g.graph().ranker){case "network-simplex":networkSimplexRanker(g);break;case "tight-tree":tightTreeRanker(g);break;case "longest-path":longestPathRanker(g);break;default:networkSimplexRanker(g)}}var longestPathRanker=longestPath;
function tightTreeRanker(g){longestPath(g);feasibleTree(g)}function networkSimplexRanker(g){networkSimplex(g)}},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(require,module,exports){var _=require("../lodash"),feasibleTree=require("./feasible-tree"),slack=require("./util").slack,initRank=require("./util").longestPath,preorder=require("../graphlib").alg.preorder,postorder=require("../graphlib").alg.postorder,simplify=require("../util").simplify;module.exports=networkSimplex;
networkSimplex.initLowLimValues=initLowLimValues;networkSimplex.initCutValues=initCutValues;networkSimplex.calcCutValue=calcCutValue;networkSimplex.leaveEdge=leaveEdge;networkSimplex.enterEdge=enterEdge;networkSimplex.exchangeEdges=exchangeEdges;function networkSimplex(g){g=simplify(g);initRank(g);var t=feasibleTree(g);initLowLimValues(t);initCutValues(t,g);var e,f;while(e=leaveEdge(t)){f=enterEdge(t,g,e);exchangeEdges(t,g,e,f)}}function initCutValues(t,g){var vs=postorder(t,t.nodes());vs=vs.slice(0,
vs.length-1);_.forEach(vs,function(v){assignCutValue(t,g,v)})}function assignCutValue(t,g,child){var childLab=t.node(child),parent=childLab.parent;t.edge(child,parent).cutvalue=calcCutValue(t,g,child)}function calcCutValue(t,g,child){var childLab=t.node(child),parent=childLab.parent,childIsTail=true,graphEdge=g.edge(child,parent),cutValue=0;if(!graphEdge){childIsTail=false;graphEdge=g.edge(parent,child)}cutValue=graphEdge.weight;_.forEach(g.nodeEdges(child),function(e){var isOutEdge=e.v===child,other=
isOutEdge?e.w:e.v;if(other!==parent){var pointsToHead=isOutEdge===childIsTail,otherWeight=g.edge(e).weight;cutValue+=pointsToHead?otherWeight:-otherWeight;if(isTreeEdge(t,child,other)){var otherCutValue=t.edge(child,other).cutvalue;cutValue+=pointsToHead?-otherCutValue:otherCutValue}}});return cutValue}function initLowLimValues(tree,root){if(arguments.length<2)root=tree.nodes()[0];dfsAssignLowLim(tree,{},1,root)}function dfsAssignLowLim(tree,visited,nextLim,v,parent){var low=nextLim,label=tree.node(v);
visited[v]=true;_.forEach(tree.neighbors(v),function(w){if(!_.has(visited,w))nextLim=dfsAssignLowLim(tree,visited,nextLim,w,v)});label.low=low;label.lim=nextLim++;if(parent)label.parent=parent;else delete label.parent;return nextLim}function leaveEdge(tree){return _.find(tree.edges(),function(e){return tree.edge(e).cutvalue<0})}function enterEdge(t,g,edge){var v=edge.v,w=edge.w;if(!g.hasEdge(v,w)){v=edge.w;w=edge.v}var vLabel=t.node(v),wLabel=t.node(w),tailLabel=vLabel,flip=false;if(vLabel.lim>wLabel.lim){tailLabel=
wLabel;flip=true}var candidates=_.filter(g.edges(),function(edge){return flip===isDescendant(t,t.node(edge.v),tailLabel)&&flip!==isDescendant(t,t.node(edge.w),tailLabel)});return _.minBy(candidates,function(edge){return slack(g,edge)})}function exchangeEdges(t,g,e,f){var v=e.v,w=e.w;t.removeEdge(v,w);t.setEdge(f.v,f.w,{});initLowLimValues(t);initCutValues(t,g);updateRanks(t,g)}function updateRanks(t,g){var root=_.find(t.nodes(),function(v){return!g.node(v).parent}),vs=preorder(t,root);vs=vs.slice(1);
_.forEach(vs,function(v){var parent=t.node(v).parent,edge=g.edge(v,parent),flipped=false;if(!edge){edge=g.edge(parent,v);flipped=true}g.node(v).rank=g.node(parent).rank+(flipped?edge.minlen:-edge.minlen)})}function isTreeEdge(tree,u,v){return tree.hasEdge(u,v)}function isDescendant(tree,vLabel,rootLabel){return rootLabel.low<=vLabel.lim&&vLabel.lim<=rootLabel.lim}},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(require,module,exports){var _=require("../lodash");
module.exports={longestPath:longestPath,slack:slack};function longestPath(g){var visited={};function dfs(v){var label=g.node(v);if(_.has(visited,v))return label.rank;visited[v]=true;var rank=_.minBy(_.map(g.outEdges(v),function(e){return dfs(e.w)-g.edge(e).minlen}));if(rank===Number.POSITIVE_INFINITY||rank===undefined||rank===null)rank=0;return label.rank=rank}_.forEach(g.sources(),dfs)}function slack(g,e){return g.node(e.w).rank-g.node(e.v).rank-g.edge(e).minlen}},{"../lodash":10}],29:[function(require,
module,exports){var _=require("./lodash"),Graph=require("./graphlib").Graph;module.exports={addDummyNode:addDummyNode,simplify:simplify,asNonCompoundGraph:asNonCompoundGraph,successorWeights:successorWeights,predecessorWeights:predecessorWeights,intersectRect:intersectRect,buildLayerMatrix:buildLayerMatrix,normalizeRanks:normalizeRanks,removeEmptyRanks:removeEmptyRanks,addBorderNode:addBorderNode,maxRank:maxRank,partition:partition,time:time,notime:notime};function addDummyNode(g,type,attrs,name){var v;
do v=_.uniqueId(name);while(g.hasNode(v));attrs.dummy=type;g.setNode(v,attrs);return v}function simplify(g){var simplified=(new Graph).setGraph(g.graph());_.forEach(g.nodes(),function(v){simplified.setNode(v,g.node(v))});_.forEach(g.edges(),function(e){var simpleLabel=simplified.edge(e.v,e.w)||{weight:0,minlen:1},label=g.edge(e);simplified.setEdge(e.v,e.w,{weight:simpleLabel.weight+label.weight,minlen:Math.max(simpleLabel.minlen,label.minlen)})});return simplified}function asNonCompoundGraph(g){var simplified=
(new Graph({multigraph:g.isMultigraph()})).setGraph(g.graph());_.forEach(g.nodes(),function(v){if(!g.children(v).length)simplified.setNode(v,g.node(v))});_.forEach(g.edges(),function(e){simplified.setEdge(e,g.edge(e))});return simplified}function successorWeights(g){var weightMap=_.map(g.nodes(),function(v){var sucs={};_.forEach(g.outEdges(v),function(e){sucs[e.w]=(sucs[e.w]||0)+g.edge(e).weight});return sucs});return _.zipObject(g.nodes(),weightMap)}function predecessorWeights(g){var weightMap=_.map(g.nodes(),
function(v){var preds={};_.forEach(g.inEdges(v),function(e){preds[e.v]=(preds[e.v]||0)+g.edge(e).weight});return preds});return _.zipObject(g.nodes(),weightMap)}function intersectRect(rect,point){var x=rect.x;var y=rect.y;var dx=point.x-x;var dy=point.y-y;var w=rect.width/2;var h=rect.height/2;if(!dx&&!dy)throw new Error("Not possible to find intersection inside of the rectangle");var sx,sy;if(Math.abs(dy)*w>Math.abs(dx)*h){if(dy<0)h=-h;sx=h*dx/dy;sy=h}else{if(dx<0)w=-w;sx=w;sy=w*dy/dx}return{x:x+
sx,y:y+sy}}function buildLayerMatrix(g){var layering=_.map(_.range(maxRank(g)+1),function(){return[]});_.forEach(g.nodes(),function(v){var node=g.node(v),rank=node.rank;if(!_.isUndefined(rank))layering[rank][node.order]=v});return layering}function normalizeRanks(g){var min=_.minBy(_.map(g.nodes(),function(v){return g.node(v).rank}));_.forEach(g.nodes(),function(v){var node=g.node(v);if(_.has(node,"rank"))node.rank-=min})}function removeEmptyRanks(g){var offset=_.minBy(_.map(g.nodes(),function(v){return g.node(v).rank}));
var layers=[];_.forEach(g.nodes(),function(v){var rank=g.node(v).rank-offset;if(!layers[rank])layers[rank]=[];layers[rank].push(v)});var delta=0,nodeRankFactor=g.graph().nodeRankFactor;_.forEach(layers,function(vs,i){if(_.isUndefined(vs)&&i%nodeRankFactor!==0)--delta;else if(delta)_.forEach(vs,function(v){g.node(v).rank+=delta})})}function addBorderNode(g,prefix,rank,order){var node={width:0,height:0};if(arguments.length>=4){node.rank=rank;node.order=order}return addDummyNode(g,"border",node,prefix)}
function maxRank(g){return _.max(_.map(g.nodes(),function(v){var rank=g.node(v).rank;if(!_.isUndefined(rank))return rank}))}function partition(collection,fn){var result={lhs:[],rhs:[]};_.forEach(collection,function(value){if(fn(value))result.lhs.push(value);else result.rhs.push(value)});return result}function time(name,fn){var start=_.now();try{return fn()}finally{console.log(name+" time: "+(_.now()-start)+"ms")}}function notime(name,fn){return fn()}},{"./graphlib":7,"./lodash":10}],30:[function(require,
module,exports){module.exports="0.8.2"},{}]},{},[1])(1)});</script><script>var numeric=typeof exports==="undefined"?function numeric(){}:exports;if(typeof global!=="undefined")global.numeric=numeric;numeric.version="1.2.6";numeric.bench=function bench(f,interval){var t1,t2,n,i;if(typeof interval==="undefined")interval=15;n=.5;t1=new Date;while(1){n*=2;for(i=n;i>3;i-=4){f();f();f();f()}while(i>0){f();i--}t2=new Date;if(t2-t1>interval)break}for(i=n;i>3;i-=4){f();f();f();f()}while(i>0){f();i--}t2=new Date;return 1E3*(3*n-1)/(t2-t1)};
numeric._myIndexOf=function _myIndexOf(w){var n=this.length,k;for(k=0;k<n;++k)if(this[k]===w)return k;return-1};numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf;numeric.Function=Function;numeric.precision=4;numeric.largeArray=50;
numeric.prettyPrint=function prettyPrint(x){function fmtnum(x){if(x===0)return"0";if(isNaN(x))return"NaN";if(x<0)return"-"+fmtnum(-x);if(isFinite(x)){var scale=Math.floor(Math.log(x)/Math.log(10));var normalized=x/Math.pow(10,scale);var basic=normalized.toPrecision(numeric.precision);if(parseFloat(basic)===10){scale++;normalized=1;basic=normalized.toPrecision(numeric.precision)}return parseFloat(basic).toString()+"e"+scale.toString()}return"Infinity"}var ret=[];function foo(x){var k;if(typeof x===
"undefined"){ret.push(Array(numeric.precision+8).join(" "));return false}if(typeof x==="string"){ret.push('"'+x+'"');return false}if(typeof x==="boolean"){ret.push(x.toString());return false}if(typeof x==="number"){var a=fmtnum(x);var b=x.toPrecision(numeric.precision);var c=parseFloat(x.toString()).toString();var d=[a,b,c,parseFloat(b).toString(),parseFloat(c).toString()];for(k=1;k<d.length;k++)if(d[k].length<a.length)a=d[k];ret.push(Array(numeric.precision+8-a.length).join(" ")+a);return false}if(x===
null){ret.push("null");return false}if(typeof x==="function"){ret.push(x.toString());var flag=false;for(k in x)if(x.hasOwnProperty(k)){if(flag)ret.push(",\n");else ret.push("\n{");flag=true;ret.push(k);ret.push(": \n");foo(x[k])}if(flag)ret.push("}\n");return true}if(x instanceof Array){if(x.length>numeric.largeArray){ret.push("...Large Array...");return true}var flag=false;ret.push("[");for(k=0;k<x.length;k++){if(k>0){ret.push(",");if(flag)ret.push("\n ")}flag=foo(x[k])}ret.push("]");return true}ret.push("{");
var flag=false;for(k in x)if(x.hasOwnProperty(k)){if(flag)ret.push(",\n");flag=true;ret.push(k);ret.push(": \n");foo(x[k])}ret.push("}");return true}foo(x);return ret.join("")};numeric.parseDate=function parseDate(d){function foo(d){if(typeof d==="string")return Date.parse(d.replace(/-/g,"/"));if(!(d instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var ret=[],k;for(k=0;k<d.length;k++)ret[k]=foo(d[k]);return ret}return foo(d)};
numeric.parseFloat=function parseFloat_(d){function foo(d){if(typeof d==="string")return parseFloat(d);if(!(d instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var ret=[],k;for(k=0;k<d.length;k++)ret[k]=foo(d[k]);return ret}return foo(d)};
numeric.parseCSV=function parseCSV(t){var foo=t.split("\n");var j,k;var ret=[];var pat=/(([^'",]*)|('[^']*')|("[^"]*")),/g;var patnum=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/;var stripper=function(n){return n.substr(0,n.length-1)};var count=0;for(k=0;k<foo.length;k++){var bar=(foo[k]+",").match(pat),baz;if(bar.length>0){ret[count]=[];for(j=0;j<bar.length;j++){baz=stripper(bar[j]);if(patnum.test(baz))ret[count][j]=parseFloat(baz);else ret[count][j]=
baz}count++}}return ret};numeric.toCSV=function toCSV(A){var s=numeric.dim(A);var i,j,m,n,row,ret;m=s[0];n=s[1];ret=[];for(i=0;i<m;i++){row=[];for(j=0;j<m;j++)row[j]=A[i][j].toString();ret[i]=row.join(", ")}return ret.join("\n")+"\n"};numeric.getURL=function getURL(url){var client=new XMLHttpRequest;client.open("GET",url,false);client.send();return client};
numeric.imageURL=function imageURL(img){function base64(A){var n=A.length,i,x,y,z,p,q,r,s;var key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d";var ret="";for(i=0;i<n;i+=3){x=A[i];y=A[i+1];z=A[i+2];p=x>>2;q=((x&3)<<4)+(y>>4);r=((y&15)<<2)+(z>>6);s=z&63;if(i+1>=n)r=s=64;else if(i+2>=n)s=64;ret+=key.charAt(p)+key.charAt(q)+key.charAt(r)+key.charAt(s)}return ret}function crc32Array(a,from,to){if(typeof from==="undefined")from=0;if(typeof to==="undefined")to=a.length;var table=
[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,
651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,
4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,
167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,
3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,
2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var crc=-1,y=0,n=a.length,i;for(i=from;i<to;i++){y=(crc^a[i])&255;crc=crc>>>8^table[y]}return crc^-1}var h=img[0].length,w=img[0][0].length,s1,s2,next,k,length,a,b,i,j,adler32,crc32;var stream=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,w>>24&255,w>>16&255,w>>8&255,w&255,h>>24&255,
h>>16&255,h>>8&255,h&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];crc32=crc32Array(stream,12,29);stream[29]=crc32>>24&255;stream[30]=crc32>>16&255;stream[31]=crc32>>8&255;stream[32]=crc32&255;s1=1;s2=0;for(i=0;i<h;i++){if(i<h-1)stream.push(0);else stream.push(1);a=3*w+1+(i===0)&255;b=3*w+1+(i===0)>>8&255;stream.push(a);stream.push(b);stream.push(~a&255);stream.push(~b&255);if(i===0)stream.push(0);for(j=0;j<w;j++)for(k=0;k<3;k++){a=img[k][i][j];if(a>255)a=255;else if(a<0)a=0;else a=Math.round(a);
s1=(s1+a)%65521;s2=(s2+s1)%65521;stream.push(a)}stream.push(0)}adler32=(s2<<16)+s1;stream.push(adler32>>24&255);stream.push(adler32>>16&255);stream.push(adler32>>8&255);stream.push(adler32&255);length=stream.length-41;stream[33]=length>>24&255;stream[34]=length>>16&255;stream[35]=length>>8&255;stream[36]=length&255;crc32=crc32Array(stream,37);stream.push(crc32>>24&255);stream.push(crc32>>16&255);stream.push(crc32>>8&255);stream.push(crc32&255);stream.push(0);stream.push(0);stream.push(0);stream.push(0);
stream.push(73);stream.push(69);stream.push(78);stream.push(68);stream.push(174);stream.push(66);stream.push(96);stream.push(130);return"data:image/png;base64,"+base64(stream)};numeric._dim=function _dim(x){var ret=[];while(typeof x==="object"){ret.push(x.length);x=x[0]}return ret};numeric.dim=function dim(x){var y,z;if(typeof x==="object"){y=x[0];if(typeof y==="object"){z=y[0];if(typeof z==="object")return numeric._dim(x);return[x.length,y.length]}return[x.length]}return[]};
numeric.mapreduce=function mapreduce(body,init){return Function("x","accum","_s","_k",'if(typeof accum \x3d\x3d\x3d "undefined") accum \x3d '+init+";\n"+'if(typeof x \x3d\x3d\x3d "number") { var xi \x3d x; '+body+"; return accum; }\n"+'if(typeof _s \x3d\x3d\x3d "undefined") _s \x3d numeric.dim(x);\n'+'if(typeof _k \x3d\x3d\x3d "undefined") _k \x3d 0;\n'+"var _n \x3d _s[_k];\n"+"var i,xi;\n"+"if(_k \x3c _s.length-1) {\n"+"    for(i\x3d_n-1;i\x3e\x3d0;i--) {\n"+"        accum \x3d arguments.callee(x[i],accum,_s,_k+1);\n"+
"    }"+"    return accum;\n"+"}\n"+"for(i\x3d_n-1;i\x3e\x3d1;i-\x3d2) { \n"+"    xi \x3d x[i];\n"+"    "+body+";\n"+"    xi \x3d x[i-1];\n"+"    "+body+";\n"+"}\n"+"if(i \x3d\x3d\x3d 0) {\n"+"    xi \x3d x[i];\n"+"    "+body+"\n"+"}\n"+"return accum;")};numeric.mapreduce2=function mapreduce2(body,setup){return Function("x","var n \x3d x.length;\n"+"var i,xi;\n"+setup+";\n"+"for(i\x3dn-1;i!\x3d\x3d-1;--i) { \n"+"    xi \x3d x[i];\n"+"    "+body+";\n"+"}\n"+"return accum;")};
numeric.same=function same(x,y){var i,n;if(!(x instanceof Array)||!(y instanceof Array))return false;n=x.length;if(n!==y.length)return false;for(i=0;i<n;i++){if(x[i]===y[i])continue;if(typeof x[i]==="object"){if(!same(x[i],y[i]))return false}else return false}return true};numeric.rep=function rep(s,v,k){if(typeof k==="undefined")k=0;var n=s[k],ret=Array(n),i;if(k===s.length-1){for(i=n-2;i>=0;i-=2){ret[i+1]=v;ret[i]=v}if(i===-1)ret[0]=v;return ret}for(i=n-1;i>=0;i--)ret[i]=numeric.rep(s,v,k+1);return ret};
numeric.dotMMsmall=function dotMMsmall(x,y){var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0;p=x.length;q=y.length;r=y[0].length;ret=Array(p);for(i=p-1;i>=0;i--){foo=Array(r);bar=x[i];for(k=r-1;k>=0;k--){woo=bar[q-1]*y[q-1][k];for(j=q-2;j>=1;j-=2){i0=j-1;woo+=bar[j]*y[j][k]+bar[i0]*y[i0][k]}if(j===0)woo+=bar[0]*y[0][k];foo[k]=woo}ret[i]=foo}return ret};numeric._getCol=function _getCol(A,j,x){var n=A.length,i;for(i=n-1;i>0;--i){x[i]=A[i][j];--i;x[i]=A[i][j]}if(i===0)x[0]=A[0][j]};
numeric.dotMMbig=function dotMMbig(x,y){var gc=numeric._getCol,p=y.length,v=Array(p);var m=x.length,n=y[0].length,A=new Array(m),xj;var VV=numeric.dotVV;var i,j,k,z;--p;--m;for(i=m;i!==-1;--i)A[i]=Array(n);--n;for(i=n;i!==-1;--i){gc(y,i,v);for(j=m;j!==-1;--j){z=0;xj=x[j];A[j][i]=VV(xj,v)}}return A};numeric.dotMV=function dotMV(x,y){var p=x.length,q=y.length,i;var ret=Array(p),dotVV=numeric.dotVV;for(i=p-1;i>=0;i--)ret[i]=dotVV(x[i],y);return ret};
numeric.dotVM=function dotVM(x,y){var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0,s1,s2,s3,baz,accum;p=x.length;q=y[0].length;ret=Array(q);for(k=q-1;k>=0;k--){woo=x[p-1]*y[p-1][k];for(j=p-2;j>=1;j-=2){i0=j-1;woo+=x[j]*y[j][k]+x[i0]*y[i0][k]}if(j===0)woo+=x[0]*y[0][k];ret[k]=woo}return ret};numeric.dotVV=function dotVV(x,y){var i,n=x.length,i1,ret=x[n-1]*y[n-1];for(i=n-2;i>=1;i-=2){i1=i-1;ret+=x[i]*y[i]+x[i1]*y[i1]}if(i===0)ret+=x[0]*y[0];return ret};
numeric.dot=function dot(x,y){var d=numeric.dim;switch(d(x).length*1E3+d(y).length){case 2002:if(y.length<10)return numeric.dotMMsmall(x,y);else return numeric.dotMMbig(x,y);case 2001:return numeric.dotMV(x,y);case 1002:return numeric.dotVM(x,y);case 1001:return numeric.dotVV(x,y);case 1E3:return numeric.mulVS(x,y);case 1:return numeric.mulSV(x,y);case 0:return x*y;default:throw new Error("numeric.dot only works on vectors and matrices");}};
numeric.diag=function diag(d){var i,i1,j,n=d.length,A=Array(n),Ai;for(i=n-1;i>=0;i--){Ai=Array(n);i1=i+2;for(j=n-1;j>=i1;j-=2){Ai[j]=0;Ai[j-1]=0}if(j>i)Ai[j]=0;Ai[i]=d[i];for(j=i-1;j>=1;j-=2){Ai[j]=0;Ai[j-1]=0}if(j===0)Ai[0]=0;A[i]=Ai}return A};numeric.getDiag=function(A){var n=Math.min(A.length,A[0].length),i,ret=Array(n);for(i=n-1;i>=1;--i){ret[i]=A[i][i];--i;ret[i]=A[i][i]}if(i===0)ret[0]=A[0][0];return ret};numeric.identity=function identity(n){return numeric.diag(numeric.rep([n],1))};
numeric.pointwise=function pointwise(params,body,setup){if(typeof setup==="undefined")setup="";var fun=[];var k;var avec=/\[i\]$/,p,thevec="";var haveret=false;for(k=0;k<params.length;k++){if(avec.test(params[k])){p=params[k].substring(0,params[k].length-3);thevec=p}else p=params[k];if(p==="ret")haveret=true;fun.push(p)}fun[params.length]="_s";fun[params.length+1]="_k";fun[params.length+2]='if(typeof _s \x3d\x3d\x3d "undefined") _s \x3d numeric.dim('+thevec+");\n"+'if(typeof _k \x3d\x3d\x3d "undefined") _k \x3d 0;\n'+
"var _n \x3d _s[_k];\n"+"var i"+(haveret?"":", ret \x3d Array(_n)")+";\n"+"if(_k \x3c _s.length-1) {\n"+"    for(i\x3d_n-1;i\x3e\x3d0;i--) ret[i] \x3d arguments.callee("+params.join(",")+",_s,_k+1);\n"+"    return ret;\n"+"}\n"+setup+"\n"+"for(i\x3d_n-1;i!\x3d\x3d-1;--i) {\n"+"    "+body+"\n"+"}\n"+"return ret;";return Function.apply(null,fun)};
numeric.pointwise2=function pointwise2(params,body,setup){if(typeof setup==="undefined")setup="";var fun=[];var k;var avec=/\[i\]$/,p,thevec="";var haveret=false;for(k=0;k<params.length;k++){if(avec.test(params[k])){p=params[k].substring(0,params[k].length-3);thevec=p}else p=params[k];if(p==="ret")haveret=true;fun.push(p)}fun[params.length]="var _n \x3d "+thevec+".length;\n"+"var i"+(haveret?"":", ret \x3d Array(_n)")+";\n"+setup+"\n"+"for(i\x3d_n-1;i!\x3d\x3d-1;--i) {\n"+body+"\n"+"}\n"+"return ret;";
return Function.apply(null,fun)};numeric._biforeach=function _biforeach(x,y,s,k,f){if(k===s.length-1){f(x,y);return}var i,n=s[k];for(i=n-1;i>=0;i--)_biforeach(typeof x==="object"?x[i]:x,typeof y==="object"?y[i]:y,s,k+1,f)};numeric._biforeach2=function _biforeach2(x,y,s,k,f){if(k===s.length-1)return f(x,y);var i,n=s[k],ret=Array(n);for(i=n-1;i>=0;--i)ret[i]=_biforeach2(typeof x==="object"?x[i]:x,typeof y==="object"?y[i]:y,s,k+1,f);return ret};
numeric._foreach=function _foreach(x,s,k,f){if(k===s.length-1){f(x);return}var i,n=s[k];for(i=n-1;i>=0;i--)_foreach(x[i],s,k+1,f)};numeric._foreach2=function _foreach2(x,s,k,f){if(k===s.length-1)return f(x);var i,n=s[k],ret=Array(n);for(i=n-1;i>=0;i--)ret[i]=_foreach2(x[i],s,k+1,f);return ret};
numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};numeric.opseq={addeq:"+\x3d",subeq:"-\x3d",muleq:"*\x3d",diveq:"/\x3d",modeq:"%\x3d",lshifteq:"\x3c\x3c\x3d",rshifteq:"\x3e\x3e\x3d",rrshifteq:"\x3e\x3e\x3e\x3d",bandeq:"\x26\x3d",boreq:"|\x3d",bxoreq:"^\x3d"};
numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"];numeric.mathfuns2=["atan2","pow","max","min"];numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""};
numeric.mapreducers={any:["if(xi) return true;","var accum \x3d false;"],all:["if(!xi) return false;","var accum \x3d true;"],sum:["accum +\x3d xi;","var accum \x3d 0;"],prod:["accum *\x3d xi;","var accum \x3d 1;"],norm2Squared:["accum +\x3d xi*xi;","var accum \x3d 0;"],norminf:["accum \x3d max(accum,abs(xi));","var accum \x3d 0, max \x3d Math.max, abs \x3d Math.abs;"],norm1:["accum +\x3d abs(xi)","var accum \x3d 0, abs \x3d Math.abs;"],sup:["accum \x3d max(accum,xi);","var accum \x3d -Infinity, max \x3d Math.max;"],
inf:["accum \x3d min(accum,xi);","var accum \x3d Infinity, min \x3d Math.min;"]};
(function(){var i,o;for(i=0;i<numeric.mathfuns2.length;++i){o=numeric.mathfuns2[i];numeric.ops2[o]=o}for(i in numeric.ops2)if(numeric.ops2.hasOwnProperty(i)){o=numeric.ops2[i];var code,codeeq,setup="";if(numeric.myIndexOf.call(numeric.mathfuns2,i)!==-1){setup="var "+o+" \x3d Math."+o+";\n";code=function(r,x,y){return r+" \x3d "+o+"("+x+","+y+")"};codeeq=function(x,y){return x+" \x3d "+o+"("+x+","+y+")"}}else{code=function(r,x,y){return r+" \x3d "+x+" "+o+" "+y};if(numeric.opseq.hasOwnProperty(i+"eq"))codeeq=
function(x,y){return x+" "+o+"\x3d "+y};else codeeq=function(x,y){return x+" \x3d "+x+" "+o+" "+y}}numeric[i+"VV"]=numeric.pointwise2(["x[i]","y[i]"],code("ret[i]","x[i]","y[i]"),setup);numeric[i+"SV"]=numeric.pointwise2(["x","y[i]"],code("ret[i]","x","y[i]"),setup);numeric[i+"VS"]=numeric.pointwise2(["x[i]","y"],code("ret[i]","x[i]","y"),setup);numeric[i]=Function("var n \x3d arguments.length, i, x \x3d arguments[0], y;\n"+"var VV \x3d numeric."+i+"VV, VS \x3d numeric."+i+"VS, SV \x3d numeric."+
i+"SV;\n"+"var dim \x3d numeric.dim;\n"+"for(i\x3d1;i!\x3d\x3dn;++i) { \n"+"  y \x3d arguments[i];\n"+'  if(typeof x \x3d\x3d\x3d "object") {\n'+'      if(typeof y \x3d\x3d\x3d "object") x \x3d numeric._biforeach2(x,y,dim(x),0,VV);\n'+"      else x \x3d numeric._biforeach2(x,y,dim(x),0,VS);\n"+'  } else if(typeof y \x3d\x3d\x3d "object") x \x3d numeric._biforeach2(x,y,dim(y),0,SV);\n'+"  else "+codeeq("x","y")+"\n"+"}\nreturn x;\n");numeric[o]=numeric[i];numeric[i+"eqV"]=numeric.pointwise2(["ret[i]",
"x[i]"],codeeq("ret[i]","x[i]"),setup);numeric[i+"eqS"]=numeric.pointwise2(["ret[i]","x"],codeeq("ret[i]","x"),setup);numeric[i+"eq"]=Function("var n \x3d arguments.length, i, x \x3d arguments[0], y;\n"+"var V \x3d numeric."+i+"eqV, S \x3d numeric."+i+"eqS\n"+"var s \x3d numeric.dim(x);\n"+"for(i\x3d1;i!\x3d\x3dn;++i) { \n"+"  y \x3d arguments[i];\n"+'  if(typeof y \x3d\x3d\x3d "object") numeric._biforeach(x,y,s,0,V);\n'+"  else numeric._biforeach(x,y,s,0,S);\n"+"}\nreturn x;\n")}for(i=0;i<numeric.mathfuns2.length;++i){o=
numeric.mathfuns2[i];delete numeric.ops2[o]}for(i=0;i<numeric.mathfuns.length;++i){o=numeric.mathfuns[i];numeric.ops1[o]=o}for(i in numeric.ops1)if(numeric.ops1.hasOwnProperty(i)){setup="";o=numeric.ops1[i];if(numeric.myIndexOf.call(numeric.mathfuns,i)!==-1)if(Math.hasOwnProperty(o))setup="var "+o+" \x3d Math."+o+";\n";numeric[i+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] \x3d "+o+"(ret[i]);",setup);numeric[i+"eq"]=Function("x",'if(typeof x !\x3d\x3d "object") return '+o+"x\n"+"var i;\n"+"var V \x3d numeric."+
i+"eqV;\n"+"var s \x3d numeric.dim(x);\n"+"numeric._foreach(x,s,0,V);\n"+"return x;\n");numeric[i+"V"]=numeric.pointwise2(["x[i]"],"ret[i] \x3d "+o+"(x[i]);",setup);numeric[i]=Function("x",'if(typeof x !\x3d\x3d "object") return '+o+"(x)\n"+"var i;\n"+"var V \x3d numeric."+i+"V;\n"+"var s \x3d numeric.dim(x);\n"+"return numeric._foreach2(x,s,0,V);\n")}for(i=0;i<numeric.mathfuns.length;++i){o=numeric.mathfuns[i];delete numeric.ops1[o]}for(i in numeric.mapreducers)if(numeric.mapreducers.hasOwnProperty(i)){o=
numeric.mapreducers[i];numeric[i+"V"]=numeric.mapreduce2(o[0],o[1]);numeric[i]=Function("x","s","k",o[1]+'if(typeof x !\x3d\x3d "object") {'+"    xi \x3d x;\n"+o[0]+";\n"+"    return accum;\n"+"}"+'if(typeof s \x3d\x3d\x3d "undefined") s \x3d numeric.dim(x);\n'+'if(typeof k \x3d\x3d\x3d "undefined") k \x3d 0;\n'+"if(k \x3d\x3d\x3d s.length-1) return numeric."+i+"V(x);\n"+"var xi;\n"+"var n \x3d x.length, i;\n"+"for(i\x3dn-1;i!\x3d\x3d-1;--i) {\n"+"   xi \x3d arguments.callee(x[i]);\n"+o[0]+";\n"+
"}\n"+"return accum;\n")}})();numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] \x3d round(x[i]/y[i])*y[i];","var round \x3d Math.round;");numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] \x3d round(x[i]/y)*y;","var round \x3d Math.round;");numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] \x3d round(x/y[i])*y[i];","var round \x3d Math.round;");
numeric.trunc=function trunc(x,y){if(typeof x==="object"){if(typeof y==="object")return numeric.truncVV(x,y);return numeric.truncVS(x,y)}if(typeof y==="object")return numeric.truncSV(x,y);return Math.round(x/y)*y};
numeric.inv=function inv(x){var s=numeric.dim(x),abs=Math.abs,m=s[0],n=s[1];var A=numeric.clone(x),Ai,Aj;var I=numeric.identity(m),Ii,Ij;var i,j,k,x;for(j=0;j<n;++j){var i0=-1;var v0=-1;for(i=j;i!==m;++i){k=abs(A[i][j]);if(k>v0){i0=i;v0=k}}Aj=A[i0];A[i0]=A[j];A[j]=Aj;Ij=I[i0];I[i0]=I[j];I[j]=Ij;x=Aj[j];for(k=j;k!==n;++k)Aj[k]/=x;for(k=n-1;k!==-1;--k)Ij[k]/=x;for(i=m-1;i!==-1;--i)if(i!==j){Ai=A[i];Ii=I[i];x=Ai[j];for(k=j+1;k!==n;++k)Ai[k]-=Aj[k]*x;for(k=n-1;k>0;--k){Ii[k]-=Ij[k]*x;--k;Ii[k]-=Ij[k]*
x}if(k===0)Ii[0]-=Ij[0]*x}}return I};
numeric.det=function det(x){var s=numeric.dim(x);if(s.length!==2||s[0]!==s[1])throw new Error("numeric: det() only works on square matrices");var n=s[0],ret=1,i,j,k,A=numeric.clone(x),Aj,Ai,alpha,temp,k1,k2,k3;for(j=0;j<n-1;j++){k=j;for(i=j+1;i<n;i++)if(Math.abs(A[i][j])>Math.abs(A[k][j]))k=i;if(k!==j){temp=A[k];A[k]=A[j];A[j]=temp;ret*=-1}Aj=A[j];for(i=j+1;i<n;i++){Ai=A[i];alpha=Ai[j]/Aj[j];for(k=j+1;k<n-1;k+=2){k1=k+1;Ai[k]-=Aj[k]*alpha;Ai[k1]-=Aj[k1]*alpha}if(k!==n)Ai[k]-=Aj[k]*alpha}if(Aj[j]===
0)return 0;ret*=Aj[j]}return ret*A[j][j]};numeric.transpose=function transpose(x){var i,j,m=x.length,n=x[0].length,ret=Array(n),A0,A1,Bj;for(j=0;j<n;j++)ret[j]=Array(m);for(i=m-1;i>=1;i-=2){A1=x[i];A0=x[i-1];for(j=n-1;j>=1;--j){Bj=ret[j];Bj[i]=A1[j];Bj[i-1]=A0[j];--j;Bj=ret[j];Bj[i]=A1[j];Bj[i-1]=A0[j]}if(j===0){Bj=ret[0];Bj[i]=A1[0];Bj[i-1]=A0[0]}}if(i===0){A0=x[0];for(j=n-1;j>=1;--j){ret[j][0]=A0[j];--j;ret[j][0]=A0[j]}if(j===0)ret[0][0]=A0[0]}return ret};
numeric.negtranspose=function negtranspose(x){var i,j,m=x.length,n=x[0].length,ret=Array(n),A0,A1,Bj;for(j=0;j<n;j++)ret[j]=Array(m);for(i=m-1;i>=1;i-=2){A1=x[i];A0=x[i-1];for(j=n-1;j>=1;--j){Bj=ret[j];Bj[i]=-A1[j];Bj[i-1]=-A0[j];--j;Bj=ret[j];Bj[i]=-A1[j];Bj[i-1]=-A0[j]}if(j===0){Bj=ret[0];Bj[i]=-A1[0];Bj[i-1]=-A0[0]}}if(i===0){A0=x[0];for(j=n-1;j>=1;--j){ret[j][0]=-A0[j];--j;ret[j][0]=-A0[j]}if(j===0)ret[0][0]=-A0[0]}return ret};
numeric._random=function _random(s,k){var i,n=s[k],ret=Array(n),rnd;if(k===s.length-1){rnd=Math.random;for(i=n-1;i>=1;i-=2){ret[i]=rnd();ret[i-1]=rnd()}if(i===0)ret[0]=rnd();return ret}for(i=n-1;i>=0;i--)ret[i]=_random(s,k+1);return ret};numeric.random=function random(s){return numeric._random(s,0)};numeric.norm2=function norm2(x){return Math.sqrt(numeric.norm2Squared(x))};
numeric.linspace=function linspace(a,b,n){if(typeof n==="undefined")n=Math.max(Math.round(b-a)+1,1);if(n<2)return n===1?[a]:[];var i,ret=Array(n);n--;for(i=n;i>=0;i--)ret[i]=(i*b+(n-i)*a)/n;return ret};numeric.getBlock=function getBlock(x,from,to){var s=numeric.dim(x);function foo(x,k){var i,a=from[k],n=to[k]-a,ret=Array(n);if(k===s.length-1){for(i=n;i>=0;i--)ret[i]=x[i+a];return ret}for(i=n;i>=0;i--)ret[i]=foo(x[i+a],k+1);return ret}return foo(x,0)};
numeric.setBlock=function setBlock(x,from,to,B){var s=numeric.dim(x);function foo(x,y,k){var i,a=from[k],n=to[k]-a;if(k===s.length-1)for(i=n;i>=0;i--)x[i+a]=y[i];for(i=n;i>=0;i--)foo(x[i+a],y[i],k+1)}foo(x,B,0);return x};numeric.getRange=function getRange(A,I,J){var m=I.length,n=J.length;var i,j;var B=Array(m),Bi,AI;for(i=m-1;i!==-1;--i){B[i]=Array(n);Bi=B[i];AI=A[I[i]];for(j=n-1;j!==-1;--j)Bi[j]=AI[J[j]]}return B};
numeric.blockMatrix=function blockMatrix(X){var s=numeric.dim(X);if(s.length<4)return numeric.blockMatrix([X]);var m=s[0],n=s[1],M,N,i,j,Xij;M=0;N=0;for(i=0;i<m;++i)M+=X[i][0].length;for(j=0;j<n;++j)N+=X[0][j][0].length;var Z=Array(M);for(i=0;i<M;++i)Z[i]=Array(N);var I=0,J,ZI,k,l,Xijk;for(i=0;i<m;++i){J=N;for(j=n-1;j!==-1;--j){Xij=X[i][j];J-=Xij[0].length;for(k=Xij.length-1;k!==-1;--k){Xijk=Xij[k];ZI=Z[I+k];for(l=Xijk.length-1;l!==-1;--l)ZI[J+l]=Xijk[l]}}I+=X[i][0].length}return Z};
numeric.tensor=function tensor(x,y){if(typeof x==="number"||typeof y==="number")return numeric.mul(x,y);var s1=numeric.dim(x),s2=numeric.dim(y);if(s1.length!==1||s2.length!==1)throw new Error("numeric: tensor product is only defined for vectors");var m=s1[0],n=s2[0],A=Array(m),Ai,i,j,xi;for(i=m-1;i>=0;i--){Ai=Array(n);xi=x[i];for(j=n-1;j>=3;--j){Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j]}while(j>=0){Ai[j]=xi*y[j];--j}A[i]=Ai}return A};
numeric.T=function T(x,y){this.x=x;this.y=y};numeric.t=function t(x,y){return new numeric.T(x,y)};
numeric.Tbinop=function Tbinop(rr,rc,cr,cc,setup){var io=numeric.indexOf;if(typeof setup!=="string"){var k;setup="";for(k in numeric)if(numeric.hasOwnProperty(k)&&(rr.indexOf(k)>=0||rc.indexOf(k)>=0||cr.indexOf(k)>=0||cc.indexOf(k)>=0)&&k.length>1)setup+="var "+k+" \x3d numeric."+k+";\n"}return Function(["y"],"var x \x3d this;\n"+"if(!(y instanceof numeric.T)) { y \x3d new numeric.T(y); }\n"+setup+"\n"+"if(x.y) {"+"  if(y.y) {"+"    return new numeric.T("+cc+");\n"+"  }\n"+"  return new numeric.T("+
cr+");\n"+"}\n"+"if(y.y) {\n"+"  return new numeric.T("+rc+");\n"+"}\n"+"return new numeric.T("+rr+");\n")};numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");
numeric.T.prototype.reciprocal=function reciprocal(){var mul=numeric.mul,div=numeric.div;if(this.y){var d=numeric.add(mul(this.x,this.x),mul(this.y,this.y));return new numeric.T(div(this.x,d),div(numeric.neg(this.y),d))}return new T(div(1,this.x))};numeric.T.prototype.div=function div(y){if(!(y instanceof numeric.T))y=new numeric.T(y);if(y.y)return this.mul(y.reciprocal());var div=numeric.div;if(this.y)return new numeric.T(div(this.x,y.x),div(this.y,y.x));return new numeric.T(div(this.x,y.x))};
numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");numeric.T.prototype.transpose=function transpose(){var t=numeric.transpose,x=this.x,y=this.y;if(y)return new numeric.T(t(x),t(y));return new numeric.T(t(x))};numeric.T.prototype.transjugate=function transjugate(){var t=numeric.transpose,x=this.x,y=this.y;if(y)return new numeric.T(t(x),numeric.negtranspose(y));return new numeric.T(t(x))};
numeric.Tunop=function Tunop(r,c,s){if(typeof s!=="string")s="";return Function("var x \x3d this;\n"+s+"\n"+"if(x.y) {"+"  "+c+";\n"+"}\n"+r+";\n")};numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex \x3d numeric.exp(x.x), cos \x3d numeric.cos, sin \x3d numeric.sin, mul \x3d numeric.mul;");numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");
numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg \x3d numeric.neg;");numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");
numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul \x3d numeric.mul;");numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta \x3d new numeric.T(numeric.atan2(x.y,x.x)), r \x3d x.abs();\n"+"return new numeric.T(numeric.log(r.x),theta.x);");numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f \x3d numeric.norm2Squared;\n"+"return Math.sqrt(f(x.x)+f(x.y));");
numeric.T.prototype.inv=function inv(){var A=this;if(typeof A.y==="undefined")return new numeric.T(numeric.inv(A.x));var n=A.x.length,i,j,k;var Rx=numeric.identity(n),Ry=numeric.rep([n,n],0);var Ax=numeric.clone(A.x),Ay=numeric.clone(A.y);var Aix,Aiy,Ajx,Ajy,Rix,Riy,Rjx,Rjy;var i,j,k,d,d1,ax,ay,bx,by,temp;for(i=0;i<n;i++){ax=Ax[i][i];ay=Ay[i][i];d=ax*ax+ay*ay;k=i;for(j=i+1;j<n;j++){ax=Ax[j][i];ay=Ay[j][i];d1=ax*ax+ay*ay;if(d1>d){k=j;d=d1}}if(k!==i){temp=Ax[i];Ax[i]=Ax[k];Ax[k]=temp;temp=Ay[i];Ay[i]=
Ay[k];Ay[k]=temp;temp=Rx[i];Rx[i]=Rx[k];Rx[k]=temp;temp=Ry[i];Ry[i]=Ry[k];Ry[k]=temp}Aix=Ax[i];Aiy=Ay[i];Rix=Rx[i];Riy=Ry[i];ax=Aix[i];ay=Aiy[i];for(j=i+1;j<n;j++){bx=Aix[j];by=Aiy[j];Aix[j]=(bx*ax+by*ay)/d;Aiy[j]=(by*ax-bx*ay)/d}for(j=0;j<n;j++){bx=Rix[j];by=Riy[j];Rix[j]=(bx*ax+by*ay)/d;Riy[j]=(by*ax-bx*ay)/d}for(j=i+1;j<n;j++){Ajx=Ax[j];Ajy=Ay[j];Rjx=Rx[j];Rjy=Ry[j];ax=Ajx[i];ay=Ajy[i];for(k=i+1;k<n;k++){bx=Aix[k];by=Aiy[k];Ajx[k]-=bx*ax-by*ay;Ajy[k]-=by*ax+bx*ay}for(k=0;k<n;k++){bx=Rix[k];by=
Riy[k];Rjx[k]-=bx*ax-by*ay;Rjy[k]-=by*ax+bx*ay}}}for(i=n-1;i>0;i--){Rix=Rx[i];Riy=Ry[i];for(j=i-1;j>=0;j--){Rjx=Rx[j];Rjy=Ry[j];ax=Ax[j][i];ay=Ay[j][i];for(k=n-1;k>=0;k--){bx=Rix[k];by=Riy[k];Rjx[k]-=ax*bx-ay*by;Rjy[k]-=ax*by+ay*bx}}}return new numeric.T(Rx,Ry)};numeric.T.prototype.get=function get(i){var x=this.x,y=this.y,k=0,ik,n=i.length;if(y){while(k<n){ik=i[k];x=x[ik];y=y[ik];k++}return new numeric.T(x,y)}while(k<n){ik=i[k];x=x[ik];k++}return new numeric.T(x)};
numeric.T.prototype.set=function set(i,v){var x=this.x,y=this.y,k=0,ik,n=i.length,vx=v.x,vy=v.y;if(n===0){if(vy)this.y=vy;else if(y)this.y=undefined;this.x=x;return this}if(vy){if(y);else{y=numeric.rep(numeric.dim(x),0);this.y=y}while(k<n-1){ik=i[k];x=x[ik];y=y[ik];k++}ik=i[k];x[ik]=vx;y[ik]=vy;return this}if(y){while(k<n-1){ik=i[k];x=x[ik];y=y[ik];k++}ik=i[k];x[ik]=vx;if(vx instanceof Array)y[ik]=numeric.rep(numeric.dim(vx),0);else y[ik]=0;return this}while(k<n-1){ik=i[k];x=x[ik];k++}ik=i[k];x[ik]=
vx;return this};numeric.T.prototype.getRows=function getRows(i0,i1){var n=i1-i0+1,j;var rx=Array(n),ry,x=this.x,y=this.y;for(j=i0;j<=i1;j++)rx[j-i0]=x[j];if(y){ry=Array(n);for(j=i0;j<=i1;j++)ry[j-i0]=y[j];return new numeric.T(rx,ry)}return new numeric.T(rx)};
numeric.T.prototype.setRows=function setRows(i0,i1,A){var j;var rx=this.x,ry=this.y,x=A.x,y=A.y;for(j=i0;j<=i1;j++)rx[j]=x[j-i0];if(y){if(!ry){ry=numeric.rep(numeric.dim(rx),0);this.y=ry}for(j=i0;j<=i1;j++)ry[j]=y[j-i0]}else if(ry)for(j=i0;j<=i1;j++)ry[j]=numeric.rep([x[j-i0].length],0);return this};numeric.T.prototype.getRow=function getRow(k){var x=this.x,y=this.y;if(y)return new numeric.T(x[k],y[k]);return new numeric.T(x[k])};
numeric.T.prototype.setRow=function setRow(i,v){var rx=this.x,ry=this.y,x=v.x,y=v.y;rx[i]=x;if(y){if(!ry){ry=numeric.rep(numeric.dim(rx),0);this.y=ry}ry[i]=y}else if(ry)ry=numeric.rep([x.length],0);return this};numeric.T.prototype.getBlock=function getBlock(from,to){var x=this.x,y=this.y,b=numeric.getBlock;if(y)return new numeric.T(b(x,from,to),b(y,from,to));return new numeric.T(b(x,from,to))};
numeric.T.prototype.setBlock=function setBlock(from,to,A){if(!(A instanceof numeric.T))A=new numeric.T(A);var x=this.x,y=this.y,b=numeric.setBlock,Ax=A.x,Ay=A.y;if(Ay){if(!y){this.y=numeric.rep(numeric.dim(this),0);y=this.y}b(x,from,to,Ax);b(y,from,to,Ay);return this}b(x,from,to,Ax);if(y)b(y,from,to,numeric.rep(numeric.dim(Ax),0))};numeric.T.rep=function rep(s,v){var T=numeric.T;if(!(v instanceof T))v=new T(v);var x=v.x,y=v.y,r=numeric.rep;if(y)return new T(r(s,x),r(s,y));return new T(r(s,x))};
numeric.T.diag=function diag(d){if(!(d instanceof numeric.T))d=new numeric.T(d);var x=d.x,y=d.y,diag=numeric.diag;if(y)return new numeric.T(diag(x),diag(y));return new numeric.T(diag(x))};numeric.T.eig=function eig(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)};numeric.T.identity=function identity(n){return new numeric.T(numeric.identity(n))};
numeric.T.prototype.getDiag=function getDiag(){var n=numeric;var x=this.x,y=this.y;if(y)return new n.T(n.getDiag(x),n.getDiag(y));return new n.T(n.getDiag(x))};numeric.house=function house(x){var v=numeric.clone(x);var s=x[0]>=0?1:-1;var alpha=s*numeric.norm2(x);v[0]+=alpha;var foo=numeric.norm2(v);if(foo===0)throw new Error("eig: internal error");return numeric.div(v,foo)};
numeric.toUpperHessenberg=function toUpperHessenberg(me){var s=numeric.dim(me);if(s.length!==2||s[0]!==s[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var m=s[0],i,j,k,x,v,A=numeric.clone(me),B,C,Ai,Ci,Q=numeric.identity(m),Qi;for(j=0;j<m-2;j++){x=Array(m-j-1);for(i=j+1;i<m;i++)x[i-j-1]=A[i][j];if(numeric.norm2(x)>0){v=numeric.house(x);B=numeric.getBlock(A,[j+1,j],[m-1,m-1]);C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<m;i++){Ai=A[i];Ci=C[i-j-1];for(k=j;k<m;k++)Ai[k]-=
2*Ci[k-j]}B=numeric.getBlock(A,[0,j+1],[m-1,m-1]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Ai=A[i];Ci=C[i];for(k=j+1;k<m;k++)Ai[k]-=2*Ci[k-j-1]}B=Array(m-j-1);for(i=j+1;i<m;i++)B[i-j-1]=Q[i];C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<m;i++){Qi=Q[i];Ci=C[i-j-1];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}}}return{H:A,Q:Q}};numeric.epsilon=2.220446049250313E-16;
numeric.QRFrancis=function(H,maxiter){if(typeof maxiter==="undefined")maxiter=1E4;H=numeric.clone(H);var H0=numeric.clone(H);var s=numeric.dim(H),m=s[0],x,v,a,b,c,d,det,tr,Hloc,Q=numeric.identity(m),Qi,Hi,B,C,Ci,i,j,k,iter;if(m<3)return{Q:Q,B:[[0,m-1]]};var epsilon=numeric.epsilon;for(iter=0;iter<maxiter;iter++){for(j=0;j<m-1;j++)if(Math.abs(H[j+1][j])<epsilon*(Math.abs(H[j][j])+Math.abs(H[j+1][j+1]))){var QH1=numeric.QRFrancis(numeric.getBlock(H,[0,0],[j,j]),maxiter);var QH2=numeric.QRFrancis(numeric.getBlock(H,
[j+1,j+1],[m-1,m-1]),maxiter);B=Array(j+1);for(i=0;i<=j;i++)B[i]=Q[i];C=numeric.dot(QH1.Q,B);for(i=0;i<=j;i++)Q[i]=C[i];B=Array(m-j-1);for(i=j+1;i<m;i++)B[i-j-1]=Q[i];C=numeric.dot(QH2.Q,B);for(i=j+1;i<m;i++)Q[i]=C[i-j-1];return{Q:Q,B:QH1.B.concat(numeric.add(QH2.B,j+1))}}a=H[m-2][m-2];b=H[m-2][m-1];c=H[m-1][m-2];d=H[m-1][m-1];tr=a+d;det=a*d-b*c;Hloc=numeric.getBlock(H,[0,0],[2,2]);if(tr*tr>=4*det){var s1,s2;s1=.5*(tr+Math.sqrt(tr*tr-4*det));s2=.5*(tr-Math.sqrt(tr*tr-4*det));Hloc=numeric.add(numeric.sub(numeric.dot(Hloc,
Hloc),numeric.mul(Hloc,s1+s2)),numeric.diag(numeric.rep([3],s1*s2)))}else Hloc=numeric.add(numeric.sub(numeric.dot(Hloc,Hloc),numeric.mul(Hloc,tr)),numeric.diag(numeric.rep([3],det)));x=[Hloc[0][0],Hloc[1][0],Hloc[2][0]];v=numeric.house(x);B=[H[0],H[1],H[2]];C=numeric.tensor(v,numeric.dot(v,B));for(i=0;i<3;i++){Hi=H[i];Ci=C[i];for(k=0;k<m;k++)Hi[k]-=2*Ci[k]}B=numeric.getBlock(H,[0,0],[m-1,2]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Hi=H[i];Ci=C[i];for(k=0;k<3;k++)Hi[k]-=2*Ci[k]}B=[Q[0],
Q[1],Q[2]];C=numeric.tensor(v,numeric.dot(v,B));for(i=0;i<3;i++){Qi=Q[i];Ci=C[i];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}var J;for(j=0;j<m-2;j++){for(k=j;k<=j+1;k++)if(Math.abs(H[k+1][k])<epsilon*(Math.abs(H[k][k])+Math.abs(H[k+1][k+1]))){var QH1=numeric.QRFrancis(numeric.getBlock(H,[0,0],[k,k]),maxiter);var QH2=numeric.QRFrancis(numeric.getBlock(H,[k+1,k+1],[m-1,m-1]),maxiter);B=Array(k+1);for(i=0;i<=k;i++)B[i]=Q[i];C=numeric.dot(QH1.Q,B);for(i=0;i<=k;i++)Q[i]=C[i];B=Array(m-k-1);for(i=k+1;i<m;i++)B[i-k-
1]=Q[i];C=numeric.dot(QH2.Q,B);for(i=k+1;i<m;i++)Q[i]=C[i-k-1];return{Q:Q,B:QH1.B.concat(numeric.add(QH2.B,k+1))}}J=Math.min(m-1,j+3);x=Array(J-j);for(i=j+1;i<=J;i++)x[i-j-1]=H[i][j];v=numeric.house(x);B=numeric.getBlock(H,[j+1,j],[J,m-1]);C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<=J;i++){Hi=H[i];Ci=C[i-j-1];for(k=j;k<m;k++)Hi[k]-=2*Ci[k-j]}B=numeric.getBlock(H,[0,j+1],[m-1,J]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Hi=H[i];Ci=C[i];for(k=j+1;k<=J;k++)Hi[k]-=2*Ci[k-j-1]}B=Array(J-
j);for(i=j+1;i<=J;i++)B[i-j-1]=Q[i];C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<=J;i++){Qi=Q[i];Ci=C[i-j-1];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");};
numeric.eig=function eig(A,maxiter){var QH=numeric.toUpperHessenberg(A);var QB=numeric.QRFrancis(QH.H,maxiter);var T=numeric.T;var n=A.length,i,k,flag=false,B=QB.B,H=numeric.dot(QB.Q,numeric.dot(QH.H,numeric.transpose(QB.Q)));var Q=new T(numeric.dot(QB.Q,QH.Q)),Q0;var m=B.length,j;var a,b,c,d,p1,p2,disc,x,y,p,q,n1,n2;var sqrt=Math.sqrt;for(k=0;k<m;k++){i=B[k][0];if(i===B[k][1]);else{j=i+1;a=H[i][i];b=H[i][j];c=H[j][i];d=H[j][j];if(b===0&&c===0)continue;p1=-a-d;p2=a*d-b*c;disc=p1*p1-4*p2;if(disc>=
0){if(p1<0)x=-.5*(p1-sqrt(disc));else x=-.5*(p1+sqrt(disc));n1=(a-x)*(a-x)+b*b;n2=c*c+(d-x)*(d-x);if(n1>n2){n1=sqrt(n1);p=(a-x)/n1;q=b/n1}else{n2=sqrt(n2);p=c/n2;q=(d-x)/n2}Q0=new T([[q,-p],[p,q]]);Q.setRows(i,j,Q0.dot(Q.getRows(i,j)))}else{x=-.5*p1;y=.5*sqrt(-disc);n1=(a-x)*(a-x)+b*b;n2=c*c+(d-x)*(d-x);if(n1>n2){n1=sqrt(n1+y*y);p=(a-x)/n1;q=b/n1;x=0;y/=n1}else{n2=sqrt(n2+y*y);p=c/n2;q=(d-x)/n2;x=y/n2;y=0}Q0=new T([[q,-p],[p,q]],[[x,y],[y,-x]]);Q.setRows(i,j,Q0.dot(Q.getRows(i,j)))}}}var R=Q.dot(A).dot(Q.transjugate()),
n=A.length,E=numeric.T.identity(n);for(j=0;j<n;j++)if(j>0)for(k=j-1;k>=0;k--){var Rk=R.get([k,k]),Rj=R.get([j,j]);if(numeric.neq(Rk.x,Rj.x)||numeric.neq(Rk.y,Rj.y)){x=R.getRow(k).getBlock([k],[j-1]);y=E.getRow(j).getBlock([k],[j-1]);E.set([j,k],R.get([k,j]).neg().sub(x.dot(y)).div(Rk.sub(Rj)))}else{E.setRow(j,E.getRow(k));continue}}for(j=0;j<n;j++){x=E.getRow(j);E.setRow(j,x.div(x.norm2()))}E=E.transpose();E=Q.transjugate().dot(E);return{lambda:R.getDiag(),E:E}};
numeric.ccsSparse=function ccsSparse(A){var m=A.length,n,foo,i,j,counts=[];for(i=m-1;i!==-1;--i){foo=A[i];for(j in foo){j=parseInt(j);while(j>=counts.length)counts[counts.length]=0;if(foo[j]!==0)counts[j]++}}var n=counts.length;var Ai=Array(n+1);Ai[0]=0;for(i=0;i<n;++i)Ai[i+1]=Ai[i]+counts[i];var Aj=Array(Ai[n]),Av=Array(Ai[n]);for(i=m-1;i!==-1;--i){foo=A[i];for(j in foo)if(foo[j]!==0){counts[j]--;Aj[Ai[j]+counts[j]]=i;Av[Ai[j]+counts[j]]=foo[j]}}return[Ai,Aj,Av]};
numeric.ccsFull=function ccsFull(A){var Ai=A[0],Aj=A[1],Av=A[2],s=numeric.ccsDim(A),m=s[0],n=s[1],i,j,j0,j1,k;var B=numeric.rep([m,n],0);for(i=0;i<n;i++){j0=Ai[i];j1=Ai[i+1];for(j=j0;j<j1;++j)B[Aj[j]][i]=Av[j]}return B};
numeric.ccsTSolve=function ccsTSolve(A,b,x,bj,xj){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,max=Math.max,n=0;if(typeof bj==="undefined")x=numeric.rep([m],0);if(typeof bj==="undefined")bj=numeric.linspace(0,x.length-1);if(typeof xj==="undefined")xj=[];function dfs(j){var k;if(x[j]!==0)return;x[j]=1;for(k=Ai[j];k<Ai[j+1];++k)dfs(Aj[k]);xj[n]=j;++n}var i,j,j0,j1,k,l,l0,l1,a;for(i=bj.length-1;i!==-1;--i)dfs(bj[i]);xj.length=n;for(i=xj.length-1;i!==-1;--i)x[xj[i]]=0;for(i=bj.length-1;i!==-1;--i){j=bj[i];
x[j]=b[j]}for(i=xj.length-1;i!==-1;--i){j=xj[i];j0=Ai[j];j1=max(Ai[j+1],j0);for(k=j0;k!==j1;++k)if(Aj[k]===j){x[j]/=Av[k];break}a=x[j];for(k=j0;k!==j1;++k){l=Aj[k];if(l!==j)x[l]-=a*Av[k]}}return x};numeric.ccsDFS=function ccsDFS(n){this.k=Array(n);this.k1=Array(n);this.j=Array(n)};
numeric.ccsDFS.prototype.dfs=function dfs(J,Ai,Aj,x,xj,Pinv){var m=0,foo,n=xj.length;var k=this.k,k1=this.k1,j=this.j,km,k11;if(x[J]!==0)return;x[J]=1;j[0]=J;k[0]=km=Ai[J];k1[0]=k11=Ai[J+1];while(1)if(km>=k11){xj[n]=j[m];if(m===0)return;++n;--m;km=k[m];k11=k1[m]}else{foo=Pinv[Aj[km]];if(x[foo]===0){x[foo]=1;k[m]=km;++m;j[m]=foo;km=Ai[foo];k1[m]=k11=Ai[foo+1]}else++km}};
numeric.ccsLPSolve=function ccsLPSolve(A,B,x,xj,I,Pinv,dfs){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,n=0;var Bi=B[0],Bj=B[1],Bv=B[2];var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;i0=Bi[I];i1=Bi[I+1];xj.length=0;for(i=i0;i<i1;++i)dfs.dfs(Pinv[Bj[i]],Ai,Aj,x,xj,Pinv);for(i=xj.length-1;i!==-1;--i)x[xj[i]]=0;for(i=i0;i!==i1;++i){j=Pinv[Bj[i]];x[j]=Bv[i]}for(i=xj.length-1;i!==-1;--i){j=xj[i];j0=Ai[j];j1=Ai[j+1];for(k=j0;k<j1;++k)if(Pinv[Aj[k]]===j){x[j]/=Av[k];break}a=x[j];for(k=j0;k<j1;++k){l=Pinv[Aj[k]];if(l!==
j)x[l]-=a*Av[k]}}return x};
numeric.ccsLUP1=function ccsLUP1(A,threshold){var m=A[0].length-1;var L=[numeric.rep([m+1],0),[],[]],U=[numeric.rep([m+1],0),[],[]];var Li=L[0],Lj=L[1],Lv=L[2],Ui=U[0],Uj=U[1],Uv=U[2];var x=numeric.rep([m],0),xj=numeric.rep([m],0);var i,j,k,j0,j1,a,e,c,d,K;var sol=numeric.ccsLPSolve,max=Math.max,abs=Math.abs;var P=numeric.linspace(0,m-1),Pinv=numeric.linspace(0,m-1);var dfs=new numeric.ccsDFS(m);if(typeof threshold==="undefined")threshold=1;for(i=0;i<m;++i){sol(L,A,x,xj,i,Pinv,dfs);a=-1;e=-1;for(j=
xj.length-1;j!==-1;--j){k=xj[j];if(k<=i)continue;c=abs(x[k]);if(c>a){e=k;a=c}}if(abs(x[i])<threshold*a){j=P[i];a=P[e];P[i]=a;Pinv[a]=i;P[e]=j;Pinv[j]=e;a=x[i];x[i]=x[e];x[e]=a}a=Li[i];e=Ui[i];d=x[i];Lj[a]=P[i];Lv[a]=1;++a;for(j=xj.length-1;j!==-1;--j){k=xj[j];c=x[k];xj[j]=0;x[k]=0;if(k<=i){Uj[e]=k;Uv[e]=c;++e}else{Lj[a]=P[k];Lv[a]=c/d;++a}}Li[i+1]=a;Ui[i+1]=e}for(j=Lj.length-1;j!==-1;--j)Lj[j]=Pinv[Lj[j]];return{L:L,U:U,P:P,Pinv:Pinv}};
numeric.ccsDFS0=function ccsDFS0(n){this.k=Array(n);this.k1=Array(n);this.j=Array(n)};
numeric.ccsDFS0.prototype.dfs=function dfs(J,Ai,Aj,x,xj,Pinv,P){var m=0,foo,n=xj.length;var k=this.k,k1=this.k1,j=this.j,km,k11;if(x[J]!==0)return;x[J]=1;j[0]=J;k[0]=km=Ai[Pinv[J]];k1[0]=k11=Ai[Pinv[J]+1];while(1){if(isNaN(km))throw new Error("Ow!");if(km>=k11){xj[n]=Pinv[j[m]];if(m===0)return;++n;--m;km=k[m];k11=k1[m]}else{foo=Aj[km];if(x[foo]===0){x[foo]=1;k[m]=km;++m;j[m]=foo;foo=Pinv[foo];km=Ai[foo];k1[m]=k11=Ai[foo+1]}else++km}}};
numeric.ccsLPSolve0=function ccsLPSolve0(A,B,y,xj,I,Pinv,P,dfs){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,n=0;var Bi=B[0],Bj=B[1],Bv=B[2];var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;i0=Bi[I];i1=Bi[I+1];xj.length=0;for(i=i0;i<i1;++i)dfs.dfs(Bj[i],Ai,Aj,y,xj,Pinv,P);for(i=xj.length-1;i!==-1;--i){j=xj[i];y[P[j]]=0}for(i=i0;i!==i1;++i){j=Bj[i];y[j]=Bv[i]}for(i=xj.length-1;i!==-1;--i){j=xj[i];l=P[j];j0=Ai[j];j1=Ai[j+1];for(k=j0;k<j1;++k)if(Aj[k]===l){y[l]/=Av[k];break}a=y[l];for(k=j0;k<j1;++k)y[Aj[k]]-=a*Av[k];
y[l]=a}};
numeric.ccsLUP0=function ccsLUP0(A,threshold){var m=A[0].length-1;var L=[numeric.rep([m+1],0),[],[]],U=[numeric.rep([m+1],0),[],[]];var Li=L[0],Lj=L[1],Lv=L[2],Ui=U[0],Uj=U[1],Uv=U[2];var y=numeric.rep([m],0),xj=numeric.rep([m],0);var i,j,k,j0,j1,a,e,c,d,K;var sol=numeric.ccsLPSolve0,max=Math.max,abs=Math.abs;var P=numeric.linspace(0,m-1),Pinv=numeric.linspace(0,m-1);var dfs=new numeric.ccsDFS0(m);if(typeof threshold==="undefined")threshold=1;for(i=0;i<m;++i){sol(L,A,y,xj,i,Pinv,P,dfs);a=-1;e=-1;
for(j=xj.length-1;j!==-1;--j){k=xj[j];if(k<=i)continue;c=abs(y[P[k]]);if(c>a){e=k;a=c}}if(abs(y[P[i]])<threshold*a){j=P[i];a=P[e];P[i]=a;Pinv[a]=i;P[e]=j;Pinv[j]=e}a=Li[i];e=Ui[i];d=y[P[i]];Lj[a]=P[i];Lv[a]=1;++a;for(j=xj.length-1;j!==-1;--j){k=xj[j];c=y[P[k]];xj[j]=0;y[P[k]]=0;if(k<=i){Uj[e]=k;Uv[e]=c;++e}else{Lj[a]=P[k];Lv[a]=c/d;++a}}Li[i+1]=a;Ui[i+1]=e}for(j=Lj.length-1;j!==-1;--j)Lj[j]=Pinv[Lj[j]];return{L:L,U:U,P:P,Pinv:Pinv}};numeric.ccsLUP=numeric.ccsLUP0;
numeric.ccsDim=function ccsDim(A){return[numeric.sup(A[1])+1,A[0].length-1]};
numeric.ccsGetBlock=function ccsGetBlock(A,i,j){var s=numeric.ccsDim(A),m=s[0],n=s[1];if(typeof i==="undefined")i=numeric.linspace(0,m-1);else if(typeof i==="number")i=[i];if(typeof j==="undefined")j=numeric.linspace(0,n-1);else if(typeof j==="number")j=[j];var p,p0,p1,P=i.length,q,Q=j.length,r,jq,ip;var Bi=numeric.rep([n],0),Bj=[],Bv=[],B=[Bi,Bj,Bv];var Ai=A[0],Aj=A[1],Av=A[2];var x=numeric.rep([m],0),count=0,flags=numeric.rep([m],0);for(q=0;q<Q;++q){jq=j[q];var q0=Ai[jq];var q1=Ai[jq+1];for(p=q0;p<
q1;++p){r=Aj[p];flags[r]=1;x[r]=Av[p]}for(p=0;p<P;++p){ip=i[p];if(flags[ip]){Bj[count]=p;Bv[count]=x[i[p]];++count}}for(p=q0;p<q1;++p){r=Aj[p];flags[r]=0}Bi[q+1]=count}return B};
numeric.ccsDot=function ccsDot(A,B){var Ai=A[0],Aj=A[1],Av=A[2];var Bi=B[0],Bj=B[1],Bv=B[2];var sA=numeric.ccsDim(A),sB=numeric.ccsDim(B);var m=sA[0],n=sA[1],o=sB[1];var x=numeric.rep([m],0),flags=numeric.rep([m],0),xj=Array(m);var Ci=numeric.rep([o],0),Cj=[],Cv=[],C=[Ci,Cj,Cv];var i,j,k,j0,j1,i0,i1,l,p,a,b;for(k=0;k!==o;++k){j0=Bi[k];j1=Bi[k+1];p=0;for(j=j0;j<j1;++j){a=Bj[j];b=Bv[j];i0=Ai[a];i1=Ai[a+1];for(i=i0;i<i1;++i){l=Aj[i];if(flags[l]===0){xj[p]=l;flags[l]=1;p=p+1}x[l]=x[l]+Av[i]*b}}j0=Ci[k];
j1=j0+p;Ci[k+1]=j1;for(j=p-1;j!==-1;--j){b=j0+j;i=xj[j];Cj[b]=i;Cv[b]=x[i];flags[i]=0;x[i]=0}Ci[k+1]=Ci[k]+p}return C};
numeric.ccsLUPSolve=function ccsLUPSolve(LUP,B){var L=LUP.L,U=LUP.U,P=LUP.P;var Bi=B[0];var flag=false;if(typeof Bi!=="object"){B=[[0,B.length],numeric.linspace(0,B.length-1),B];Bi=B[0];flag=true}var Bj=B[1],Bv=B[2];var n=L[0].length-1,m=Bi.length-1;var x=numeric.rep([n],0),xj=Array(n);var b=numeric.rep([n],0),bj=Array(n);var Xi=numeric.rep([m+1],0),Xj=[],Xv=[];var sol=numeric.ccsTSolve;var i,j,j0,j1,k,J,N=0;for(i=0;i<m;++i){k=0;j0=Bi[i];j1=Bi[i+1];for(j=j0;j<j1;++j){J=LUP.Pinv[Bj[j]];bj[k]=J;b[J]=
Bv[j];++k}bj.length=k;sol(L,b,x,bj,xj);for(j=bj.length-1;j!==-1;--j)b[bj[j]]=0;sol(U,x,b,xj,bj);if(flag)return b;for(j=xj.length-1;j!==-1;--j)x[xj[j]]=0;for(j=bj.length-1;j!==-1;--j){J=bj[j];Xj[N]=J;Xv[N]=b[J];b[J]=0;++N}Xi[i+1]=N}return[Xi,Xj,Xv]};
numeric.ccsbinop=function ccsbinop(body,setup){if(typeof setup==="undefined")setup="";return Function("X","Y","var Xi \x3d X[0], Xj \x3d X[1], Xv \x3d X[2];\n"+"var Yi \x3d Y[0], Yj \x3d Y[1], Yv \x3d Y[2];\n"+"var n \x3d Xi.length-1,m \x3d Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\n"+"var Zi \x3d numeric.rep([n+1],0), Zj \x3d [], Zv \x3d [];\n"+"var x \x3d numeric.rep([m],0),y \x3d numeric.rep([m],0);\n"+"var xk,yk,zk;\n"+"var i,j,j0,j1,k,p\x3d0;\n"+setup+"for(i\x3d0;i\x3cn;++i) {\n"+"  j0 \x3d Xi[i]; j1 \x3d Xi[i+1];\n"+
"  for(j\x3dj0;j!\x3d\x3dj1;++j) {\n"+"    k \x3d Xj[j];\n"+"    x[k] \x3d 1;\n"+"    Zj[p] \x3d k;\n"+"    ++p;\n"+"  }\n"+"  j0 \x3d Yi[i]; j1 \x3d Yi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) {\n"+"    k \x3d Yj[j];\n"+"    y[k] \x3d Yv[j];\n"+"    if(x[k] \x3d\x3d\x3d 0) {\n"+"      Zj[p] \x3d k;\n"+"      ++p;\n"+"    }\n"+"  }\n"+"  Zi[i+1] \x3d p;\n"+"  j0 \x3d Xi[i]; j1 \x3d Xi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) x[Xj[j]] \x3d Xv[j];\n"+"  j0 \x3d Zi[i]; j1 \x3d Zi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) {\n"+
"    k \x3d Zj[j];\n"+"    xk \x3d x[k];\n"+"    yk \x3d y[k];\n"+body+"\n"+"    Zv[j] \x3d zk;\n"+"  }\n"+"  j0 \x3d Xi[i]; j1 \x3d Xi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) x[Xj[j]] \x3d 0;\n"+"  j0 \x3d Yi[i]; j1 \x3d Yi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) y[Yj[j]] \x3d 0;\n"+"}\n"+"return [Zi,Zj,Zv];")};
(function(){var k,A,B,C;for(k in numeric.ops2){if(isFinite(eval("1"+numeric.ops2[k]+"0")))A="[Y[0],Y[1],numeric."+k+"(X,Y[2])]";else A="NaN";if(isFinite(eval("0"+numeric.ops2[k]+"1")))B="[X[0],X[1],numeric."+k+"(X[2],Y)]";else B="NaN";if(isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1")))C="numeric.ccs"+k+"MM(X,Y)";else C="NaN";numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk \x3d xk "+numeric.ops2[k]+"yk;");numeric["ccs"+k]=Function("X","Y",'if(typeof X \x3d\x3d\x3d "number") return '+
A+";\n"+'if(typeof Y \x3d\x3d\x3d "number") return '+B+";\n"+"return "+C+";\n")}})();numeric.ccsScatter=function ccsScatter(A){var Ai=A[0],Aj=A[1],Av=A[2];var n=numeric.sup(Aj)+1,m=Ai.length;var Ri=numeric.rep([n],0),Rj=Array(m),Rv=Array(m);var counts=numeric.rep([n],0),i;for(i=0;i<m;++i)counts[Aj[i]]++;for(i=0;i<n;++i)Ri[i+1]=Ri[i]+counts[i];var ptr=Ri.slice(0),k,Aii;for(i=0;i<m;++i){Aii=Aj[i];k=ptr[Aii];Rj[k]=Ai[i];Rv[k]=Av[i];ptr[Aii]=ptr[Aii]+1}return[Ri,Rj,Rv]};
numeric.ccsGather=function ccsGather(A){var Ai=A[0],Aj=A[1],Av=A[2];var n=Ai.length-1,m=Aj.length;var Ri=Array(m),Rj=Array(m),Rv=Array(m);var i,j,j0,j1,p;p=0;for(i=0;i<n;++i){j0=Ai[i];j1=Ai[i+1];for(j=j0;j!==j1;++j){Rj[p]=i;Ri[p]=Aj[j];Rv[p]=Av[j];++p}}return[Ri,Rj,Rv]};
numeric.sdim=function dim(A,ret,k){if(typeof ret==="undefined")ret=[];if(typeof A!=="object")return ret;if(typeof k==="undefined")k=0;if(!(k in ret))ret[k]=0;if(A.length>ret[k])ret[k]=A.length;var i;for(i in A)if(A.hasOwnProperty(i))dim(A[i],ret,k+1);return ret};
numeric.sclone=function clone(A,k,n){if(typeof k==="undefined")k=0;if(typeof n==="undefined")n=numeric.sdim(A).length;var i,ret=Array(A.length);if(k===n-1){for(i in A)if(A.hasOwnProperty(i))ret[i]=A[i];return ret}for(i in A)if(A.hasOwnProperty(i))ret[i]=clone(A[i],k+1,n);return ret};numeric.sdiag=function diag(d){var n=d.length,i,ret=Array(n),i1,i2,i3;for(i=n-1;i>=1;i-=2){i1=i-1;ret[i]=[];ret[i][i]=d[i];ret[i1]=[];ret[i1][i1]=d[i1]}if(i===0){ret[0]=[];ret[0][0]=d[i]}return ret};
numeric.sidentity=function identity(n){return numeric.sdiag(numeric.rep([n],1))};numeric.stranspose=function transpose(A){var ret=[],n=A.length,i,j,Ai;for(i in A){if(!A.hasOwnProperty(i))continue;Ai=A[i];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(typeof ret[j]!=="object")ret[j]=[];ret[j][i]=Ai[j]}}return ret};numeric.sLUP=function LUP(A,tol){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");};
numeric.sdotMM=function dotMM(A,B){var p=A.length,q=B.length,BT=numeric.stranspose(B),r=BT.length,Ai,BTk;var i,j,k,accum;var ret=Array(p),reti;for(i=p-1;i>=0;i--){reti=[];Ai=A[i];for(k=r-1;k>=0;k--){accum=0;BTk=BT[k];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(j in BTk)accum+=Ai[j]*BTk[j]}if(accum)reti[k]=accum}ret[i]=reti}return ret};
numeric.sdotMV=function dotMV(A,x){var p=A.length,Ai,i,j;var ret=Array(p),accum;for(i=p-1;i>=0;i--){Ai=A[i];accum=0;for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(x[j])accum+=Ai[j]*x[j]}if(accum)ret[i]=accum}return ret};numeric.sdotVM=function dotMV(x,A){var i,j,Ai,alpha;var ret=[],accum;for(i in x){if(!x.hasOwnProperty(i))continue;Ai=A[i];alpha=x[i];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(!ret[j])ret[j]=0;ret[j]+=alpha*Ai[j]}}return ret};
numeric.sdotVV=function dotVV(x,y){var i,ret=0;for(i in x)if(x[i]&&y[i])ret+=x[i]*y[i];return ret};numeric.sdot=function dot(A,B){var m=numeric.sdim(A).length,n=numeric.sdim(B).length;var k=m*1E3+n;switch(k){case 0:return A*B;case 1001:return numeric.sdotVV(A,B);case 2001:return numeric.sdotMV(A,B);case 1002:return numeric.sdotVM(A,B);case 2002:return numeric.sdotMM(A,B);default:throw new Error("numeric.sdot not implemented for tensors of order "+m+" and "+n);}};
numeric.sscatter=function scatter(V){var n=V[0].length,Vij,i,j,m=V.length,A=[],Aj;for(i=n-1;i>=0;--i){if(!V[m-1][i])continue;Aj=A;for(j=0;j<m-2;j++){Vij=V[j][i];if(!Aj[Vij])Aj[Vij]=[];Aj=Aj[Vij]}Aj[V[j][i]]=V[j+1][i]}return A};
numeric.sgather=function gather(A,ret,k){if(typeof ret==="undefined")ret=[];if(typeof k==="undefined")k=[];var n,i,Ai;n=k.length;for(i in A)if(A.hasOwnProperty(i)){k[n]=parseInt(i);Ai=A[i];if(typeof Ai==="number"){if(Ai){if(ret.length===0)for(i=n+1;i>=0;--i)ret[i]=[];for(i=n;i>=0;--i)ret[i].push(k[i]);ret[n+1].push(Ai)}}else gather(Ai,ret,k)}if(k.length>n)k.pop();return ret};
numeric.cLU=function LU(A){var I=A[0],J=A[1],V=A[2];var p=I.length,m=0,i,j,k,a,b,c;for(i=0;i<p;i++)if(I[i]>m)m=I[i];m++;var L=Array(m),U=Array(m),left=numeric.rep([m],Infinity),right=numeric.rep([m],-Infinity);var Ui,Uj,alpha;for(k=0;k<p;k++){i=I[k];j=J[k];if(j<left[i])left[i]=j;if(j>right[i])right[i]=j}for(i=0;i<m-1;i++)if(right[i]>right[i+1])right[i+1]=right[i];for(i=m-1;i>=1;i--)if(left[i]<left[i-1])left[i-1]=left[i];var countL=0,countU=0;for(i=0;i<m;i++){U[i]=numeric.rep([right[i]-left[i]+1],
0);L[i]=numeric.rep([i-left[i]],0);countL+=i-left[i]+1;countU+=right[i]-i+1}for(k=0;k<p;k++){i=I[k];U[i][J[k]-left[i]]=V[k]}for(i=0;i<m-1;i++){a=i-left[i];Ui=U[i];for(j=i+1;left[j]<=i&&j<m;j++){b=i-left[j];c=right[i]-i;Uj=U[j];alpha=Uj[b]/Ui[a];if(alpha){for(k=1;k<=c;k++)Uj[k+b]-=alpha*Ui[k+a];L[j][i-left[j]]=alpha}}}var Ui=[],Uj=[],Uv=[],Li=[],Lj=[],Lv=[];var p,q,foo;p=0;q=0;for(i=0;i<m;i++){a=left[i];b=right[i];foo=U[i];for(j=i;j<=b;j++)if(foo[j-a]){Ui[p]=i;Uj[p]=j;Uv[p]=foo[j-a];p++}foo=L[i];for(j=
a;j<i;j++)if(foo[j-a]){Li[q]=i;Lj[q]=j;Lv[q]=foo[j-a];q++}Li[q]=i;Lj[q]=i;Lv[q]=1;q++}return{U:[Ui,Uj,Uv],L:[Li,Lj,Lv]}};numeric.cLUsolve=function LUsolve(lu,b){var L=lu.L,U=lu.U,ret=numeric.clone(b);var Li=L[0],Lj=L[1],Lv=L[2];var Ui=U[0],Uj=U[1],Uv=U[2];var p=Ui.length,q=Li.length;var m=ret.length,i,j,k;k=0;for(i=0;i<m;i++){while(Lj[k]<i){ret[i]-=Lv[k]*ret[Lj[k]];k++}k++}k=p-1;for(i=m-1;i>=0;i--){while(Uj[k]>i){ret[i]-=Uv[k]*ret[Uj[k]];k--}ret[i]/=Uv[k];k--}return ret};
numeric.cgrid=function grid(n,shape){if(typeof n==="number")n=[n,n];var ret=numeric.rep(n,-1);var i,j,count;if(typeof shape!=="function")switch(shape){case "L":shape=function(i,j){return i>=n[0]/2||j<n[1]/2};break;default:shape=function(i,j){return true};break}count=0;for(i=1;i<n[0]-1;i++)for(j=1;j<n[1]-1;j++)if(shape(i,j)){ret[i][j]=count;count++}return ret};
numeric.cdelsq=function delsq(g){var dir=[[-1,0],[0,-1],[0,1],[1,0]];var s=numeric.dim(g),m=s[0],n=s[1],i,j,k,p,q;var Li=[],Lj=[],Lv=[];for(i=1;i<m-1;i++)for(j=1;j<n-1;j++){if(g[i][j]<0)continue;for(k=0;k<4;k++){p=i+dir[k][0];q=j+dir[k][1];if(g[p][q]<0)continue;Li.push(g[i][j]);Lj.push(g[p][q]);Lv.push(-1)}Li.push(g[i][j]);Lj.push(g[i][j]);Lv.push(4)}return[Li,Lj,Lv]};
numeric.cdotMV=function dotMV(A,x){var ret,Ai=A[0],Aj=A[1],Av=A[2],k,p=Ai.length,N;N=0;for(k=0;k<p;k++)if(Ai[k]>N)N=Ai[k];N++;ret=numeric.rep([N],0);for(k=0;k<p;k++)ret[Ai[k]]+=Av[k]*x[Aj[k]];return ret};numeric.Spline=function Spline(x,yl,yr,kl,kr){this.x=x;this.yl=yl;this.yr=yr;this.kl=kl;this.kr=kr};
numeric.Spline.prototype._at=function _at(x1,p){var x=this.x;var yl=this.yl;var yr=this.yr;var kl=this.kl;var kr=this.kr;var x1,a,b,t;var add=numeric.add,sub=numeric.sub,mul=numeric.mul;a=sub(mul(kl[p],x[p+1]-x[p]),sub(yr[p+1],yl[p]));b=add(mul(kr[p+1],x[p]-x[p+1]),sub(yr[p+1],yl[p]));t=(x1-x[p])/(x[p+1]-x[p]);var s=t*(1-t);return add(add(add(mul(1-t,yl[p]),mul(t,yr[p+1])),mul(a,s*(1-t))),mul(b,s*t))};
numeric.Spline.prototype.at=function at(x0){if(typeof x0==="number"){var x=this.x;var n=x.length;var p,q,mid,floor=Math.floor,a,b,t;p=0;q=n-1;while(q-p>1){mid=floor((p+q)/2);if(x[mid]<=x0)p=mid;else q=mid}return this._at(x0,p)}var n=x0.length,i,ret=Array(n);for(i=n-1;i!==-1;--i)ret[i]=this.at(x0[i]);return ret};
numeric.Spline.prototype.diff=function diff(){var x=this.x;var yl=this.yl;var yr=this.yr;var kl=this.kl;var kr=this.kr;var n=yl.length;var i,dx,dy;var zl=kl,zr=kr,pl=Array(n),pr=Array(n);var add=numeric.add,mul=numeric.mul,div=numeric.div,sub=numeric.sub;for(i=n-1;i!==-1;--i){dx=x[i+1]-x[i];dy=sub(yr[i+1],yl[i]);pl[i]=div(add(mul(dy,6),mul(kl[i],-4*dx),mul(kr[i+1],-2*dx)),dx*dx);pr[i+1]=div(add(mul(dy,-6),mul(kl[i],2*dx),mul(kr[i+1],4*dx)),dx*dx)}return new numeric.Spline(x,zl,zr,pl,pr)};
numeric.Spline.prototype.roots=function roots(){function sqr(x){return x*x}function heval(y0,y1,k0,k1,x){var A=k0*2-(y1-y0);var B=-k1*2+(y1-y0);var t=(x+1)*.5;var s=t*(1-t);return(1-t)*y0+t*y1+A*s*(1-t)+B*s*t}var ret=[];var x=this.x,yl=this.yl,yr=this.yr,kl=this.kl,kr=this.kr;if(typeof yl[0]==="number"){yl=[yl];yr=[yr];kl=[kl];kr=[kr]}var m=yl.length,n=x.length-1,i,j,k,y,s,t;var ai,bi,ci,di,ret=Array(m),ri,k0,k1,y0,y1,A,B,D,dx,cx,stops,z0,z1,zm,t0,t1,tm;var sqrt=Math.sqrt;for(i=0;i!==m;++i){ai=yl[i];
bi=yr[i];ci=kl[i];di=kr[i];ri=[];for(j=0;j!==n;j++){if(j>0&&bi[j]*ai[j]<0)ri.push(x[j]);dx=x[j+1]-x[j];cx=x[j];y0=ai[j];y1=bi[j+1];k0=ci[j]/dx;k1=di[j+1]/dx;D=sqr(k0-k1+3*(y0-y1))+12*k1*y0;A=k1+3*y0+2*k0-3*y1;B=3*(k1+k0+2*(y0-y1));if(D<=0){z0=A/B;if(z0>x[j]&&z0<x[j+1])stops=[x[j],z0,x[j+1]];else stops=[x[j],x[j+1]]}else{z0=(A-sqrt(D))/B;z1=(A+sqrt(D))/B;stops=[x[j]];if(z0>x[j]&&z0<x[j+1])stops.push(z0);if(z1>x[j]&&z1<x[j+1])stops.push(z1);stops.push(x[j+1])}t0=stops[0];z0=this._at(t0,j);for(k=0;k<
stops.length-1;k++){t1=stops[k+1];z1=this._at(t1,j);if(z0===0){ri.push(t0);t0=t1;z0=z1;continue}if(z1===0||z0*z1>0){t0=t1;z0=z1;continue}var side=0;while(1){tm=(z0*t1-z1*t0)/(z0-z1);if(tm<=t0||tm>=t1)break;zm=this._at(tm,j);if(zm*z1>0){t1=tm;z1=zm;if(side===-1)z0*=.5;side=-1}else if(zm*z0>0){t0=tm;z0=zm;if(side===1)z1*=.5;side=1}else break}ri.push(tm);t0=stops[k+1];z0=this._at(t0,j)}if(z1===0)ri.push(t1)}ret[i]=ri}if(typeof this.yl[0]==="number")return ret[0];return ret};
numeric.spline=function spline(x,y,k1,kn){var n=x.length,b=[],dx=[],dy=[];var i;var sub=numeric.sub,mul=numeric.mul,add=numeric.add;for(i=n-2;i>=0;i--){dx[i]=x[i+1]-x[i];dy[i]=sub(y[i+1],y[i])}if(typeof k1==="string"||typeof kn==="string")k1=kn="periodic";var T=[[],[],[]];switch(typeof k1){case "undefined":b[0]=mul(3/(dx[0]*dx[0]),dy[0]);T[0].push(0,0);T[1].push(0,1);T[2].push(2/dx[0],1/dx[0]);break;case "string":b[0]=add(mul(3/(dx[n-2]*dx[n-2]),dy[n-2]),mul(3/(dx[0]*dx[0]),dy[0]));T[0].push(0,0,
0);T[1].push(n-2,0,1);T[2].push(1/dx[n-2],2/dx[n-2]+2/dx[0],1/dx[0]);break;default:b[0]=k1;T[0].push(0);T[1].push(0);T[2].push(1);break}for(i=1;i<n-1;i++){b[i]=add(mul(3/(dx[i-1]*dx[i-1]),dy[i-1]),mul(3/(dx[i]*dx[i]),dy[i]));T[0].push(i,i,i);T[1].push(i-1,i,i+1);T[2].push(1/dx[i-1],2/dx[i-1]+2/dx[i],1/dx[i])}switch(typeof kn){case "undefined":b[n-1]=mul(3/(dx[n-2]*dx[n-2]),dy[n-2]);T[0].push(n-1,n-1);T[1].push(n-2,n-1);T[2].push(1/dx[n-2],2/dx[n-2]);break;case "string":T[1][T[1].length-1]=0;break;
default:b[n-1]=kn;T[0].push(n-1);T[1].push(n-1);T[2].push(1);break}if(typeof b[0]!=="number")b=numeric.transpose(b);else b=[b];var k=Array(b.length);if(typeof k1==="string")for(i=k.length-1;i!==-1;--i){k[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(T)),b[i]);k[i][n-1]=k[i][0]}else for(i=k.length-1;i!==-1;--i)k[i]=numeric.cLUsolve(numeric.cLU(T),b[i]);if(typeof y[0]==="number")k=k[0];else k=numeric.transpose(k);return new numeric.Spline(x,y,y,k,k)};
numeric.fftpow2=function fftpow2(x,y){var n=x.length;if(n===1)return;var cos=Math.cos,sin=Math.sin,i,j;var xe=Array(n/2),ye=Array(n/2),xo=Array(n/2),yo=Array(n/2);j=n/2;for(i=n-1;i!==-1;--i){--j;xo[j]=x[i];yo[j]=y[i];--i;xe[j]=x[i];ye[j]=y[i]}fftpow2(xe,ye);fftpow2(xo,yo);j=n/2;var t,k=-6.283185307179586/n,ci,si;for(i=n-1;i!==-1;--i){--j;if(j===-1)j=n/2-1;t=k*i;ci=cos(t);si=sin(t);x[i]=xe[j]+ci*xo[j]-si*yo[j];y[i]=ye[j]+ci*yo[j]+si*xo[j]}};
numeric._ifftpow2=function _ifftpow2(x,y){var n=x.length;if(n===1)return;var cos=Math.cos,sin=Math.sin,i,j;var xe=Array(n/2),ye=Array(n/2),xo=Array(n/2),yo=Array(n/2);j=n/2;for(i=n-1;i!==-1;--i){--j;xo[j]=x[i];yo[j]=y[i];--i;xe[j]=x[i];ye[j]=y[i]}_ifftpow2(xe,ye);_ifftpow2(xo,yo);j=n/2;var t,k=6.283185307179586/n,ci,si;for(i=n-1;i!==-1;--i){--j;if(j===-1)j=n/2-1;t=k*i;ci=cos(t);si=sin(t);x[i]=xe[j]+ci*xo[j]-si*yo[j];y[i]=ye[j]+ci*yo[j]+si*xo[j]}};
numeric.ifftpow2=function ifftpow2(x,y){numeric._ifftpow2(x,y);numeric.diveq(x,x.length);numeric.diveq(y,y.length)};numeric.convpow2=function convpow2(ax,ay,bx,by){numeric.fftpow2(ax,ay);numeric.fftpow2(bx,by);var i,n=ax.length,axi,bxi,ayi,byi;for(i=n-1;i!==-1;--i){axi=ax[i];ayi=ay[i];bxi=bx[i];byi=by[i];ax[i]=axi*bxi-ayi*byi;ay[i]=axi*byi+ayi*bxi}numeric.ifftpow2(ax,ay)};
numeric.T.prototype.fft=function fft(){var x=this.x,y=this.y;var n=x.length,log=Math.log,log2=log(2),p=Math.ceil(log(2*n-1)/log2),m=Math.pow(2,p);var cx=numeric.rep([m],0),cy=numeric.rep([m],0),cos=Math.cos,sin=Math.sin;var k,c=-3.141592653589793/n,t;var a=numeric.rep([m],0),b=numeric.rep([m],0),nhalf=Math.floor(n/2);for(k=0;k<n;k++)a[k]=x[k];if(typeof y!=="undefined")for(k=0;k<n;k++)b[k]=y[k];cx[0]=1;for(k=1;k<=m/2;k++){t=c*k*k;cx[k]=cos(t);cy[k]=sin(t);cx[m-k]=cos(t);cy[m-k]=sin(t)}var X=new numeric.T(a,
b),Y=new numeric.T(cx,cy);X=X.mul(Y);numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));X=X.mul(Y);X.x.length=n;X.y.length=n;return X};
numeric.T.prototype.ifft=function ifft(){var x=this.x,y=this.y;var n=x.length,log=Math.log,log2=log(2),p=Math.ceil(log(2*n-1)/log2),m=Math.pow(2,p);var cx=numeric.rep([m],0),cy=numeric.rep([m],0),cos=Math.cos,sin=Math.sin;var k,c=3.141592653589793/n,t;var a=numeric.rep([m],0),b=numeric.rep([m],0),nhalf=Math.floor(n/2);for(k=0;k<n;k++)a[k]=x[k];if(typeof y!=="undefined")for(k=0;k<n;k++)b[k]=y[k];cx[0]=1;for(k=1;k<=m/2;k++){t=c*k*k;cx[k]=cos(t);cy[k]=sin(t);cx[m-k]=cos(t);cy[m-k]=sin(t)}var X=new numeric.T(a,
b),Y=new numeric.T(cx,cy);X=X.mul(Y);numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));X=X.mul(Y);X.x.length=n;X.y.length=n;return X.div(n)};
numeric.gradient=function gradient(f,x){var n=x.length;var f0=f(x);if(isNaN(f0))throw new Error("gradient: f(x) is a NaN!");var max=Math.max;var i,x0=numeric.clone(x),f1,f2,J=Array(n);var div=numeric.div,sub=numeric.sub,errest,roundoff,max=Math.max,eps=.001,abs=Math.abs,min=Math.min;var t0,t1,t2,it=0,d1,d2,N;for(i=0;i<n;i++){var h=max(1E-6*f0,1E-8);while(1){++it;if(it>20)throw new Error("Numerical gradient fails");x0[i]=x[i]+h;f1=f(x0);x0[i]=x[i]-h;f2=f(x0);x0[i]=x[i];if(isNaN(f1)||isNaN(f2)){h/=
16;continue}J[i]=(f1-f2)/(2*h);t0=x[i]-h;t1=x[i];t2=x[i]+h;d1=(f1-f0)/h;d2=(f0-f2)/h;N=max(abs(J[i]),abs(f0),abs(f1),abs(f2),abs(t0),abs(t1),abs(t2),1E-8);errest=min(max(abs(d1-J[i]),abs(d2-J[i]),abs(d1-d2))/N,h/N);if(errest>eps)h/=16;else break}}return J};
numeric.uncmin=function uncmin(f,x0,tol,gradient,maxit,callback,options){var grad=numeric.gradient;if(typeof options==="undefined")options={};if(typeof tol==="undefined")tol=1E-8;if(typeof gradient==="undefined")gradient=function(x){return grad(f,x)};if(typeof maxit==="undefined")maxit=1E3;x0=numeric.clone(x0);var n=x0.length;var f0=f(x0),f1,df0;if(isNaN(f0))throw new Error("uncmin: f(x0) is a NaN!");var max=Math.max,norm2=numeric.norm2;tol=max(tol,numeric.epsilon);var step,g0,g1,H1=options.Hinv||
numeric.identity(n);var dot=numeric.dot,inv=numeric.inv,sub=numeric.sub,add=numeric.add,ten=numeric.tensor,div=numeric.div,mul=numeric.mul;var all=numeric.all,isfinite=numeric.isFinite,neg=numeric.neg;var it=0,i,s,x1,y,Hy,Hs,ys,i0,t,nstep,t1,t2;var msg="";g0=gradient(x0);while(it<maxit){if(typeof callback==="function")if(callback(it,x0,f0,g0,H1)){msg="Callback returned true";break}if(!all(isfinite(g0))){msg="Gradient has Infinity or NaN";break}step=neg(dot(H1,g0));if(!all(isfinite(step))){msg="Search direction has Infinity or NaN";
break}nstep=norm2(step);if(nstep<tol){msg="Newton step smaller than tol";break}t=1;df0=dot(g0,step);x1=x0;while(it<maxit){if(t*nstep<tol)break;s=mul(step,t);x1=add(x0,s);f1=f(x1);if(f1-f0>=.1*t*df0||isNaN(f1)){t*=.5;++it;continue}break}if(t*nstep<tol){msg="Line search step size smaller than tol";break}if(it===maxit){msg="maxit reached during line search";break}g1=gradient(x1);y=sub(g1,g0);ys=dot(y,s);Hy=dot(H1,y);H1=sub(add(H1,mul((ys+dot(y,Hy))/(ys*ys),ten(s,s))),div(add(ten(Hy,s),ten(s,Hy)),ys));
x0=x1;f0=f1;g0=g1;++it}return{solution:x0,f:f0,gradient:g0,invHessian:H1,iterations:it,message:msg}};numeric.Dopri=function Dopri(x,y,f,ymid,iterations,msg,events){this.x=x;this.y=y;this.f=f;this.ymid=ymid;this.iterations=iterations;this.events=events;this.message=msg};
numeric.Dopri.prototype._at=function _at(xi,j){function sqr(x){return x*x}var sol=this;var xs=sol.x;var ys=sol.y;var k1=sol.f;var ymid=sol.ymid;var n=xs.length;var x0,x1,xh,y0,y1,yh,xi;var floor=Math.floor,h;var c=.5;var add=numeric.add,mul=numeric.mul,sub=numeric.sub,p,q,w;x0=xs[j];x1=xs[j+1];y0=ys[j];y1=ys[j+1];h=x1-x0;xh=x0+c*h;yh=ymid[j];p=sub(k1[j],mul(y0,1/(x0-xh)+2/(x0-x1)));q=sub(k1[j+1],mul(y1,1/(x1-xh)+2/(x1-x0)));w=[sqr(xi-x1)*(xi-xh)/sqr(x0-x1)/(x0-xh),sqr(xi-x0)*sqr(xi-x1)/sqr(x0-xh)/
sqr(x1-xh),sqr(xi-x0)*(xi-xh)/sqr(x1-x0)/(x1-xh),(xi-x0)*sqr(xi-x1)*(xi-xh)/sqr(x0-x1)/(x0-xh),(xi-x1)*sqr(xi-x0)*(xi-xh)/sqr(x0-x1)/(x1-xh)];return add(add(add(add(mul(y0,w[0]),mul(yh,w[1])),mul(y1,w[2])),mul(p,w[3])),mul(q,w[4]))};
numeric.Dopri.prototype.at=function at(x){var i,j,k,floor=Math.floor;if(typeof x!=="number"){var n=x.length,ret=Array(n);for(i=n-1;i!==-1;--i)ret[i]=this.at(x[i]);return ret}var x0=this.x;i=0;j=x0.length-1;while(j-i>1){k=floor(.5*(i+j));if(x0[k]<=x)i=k;else j=k}return this._at(x,i)};
numeric.dopri=function dopri(x0,x1,y0,f,tol,maxit,event){if(typeof tol==="undefined")tol=1E-6;if(typeof maxit==="undefined")maxit=1E3;var xs=[x0],ys=[y0],k1=[f(x0,y0)],k2,k3,k4,k5,k6,k7,ymid=[];var A2=1/5;var A3=[3/40,9/40];var A4=[44/45,-56/15,32/9];var A5=[19372/6561,-25360/2187,64448/6561,-212/729];var A6=[9017/3168,-355/33,46732/5247,49/176,-5103/18656];var b=[35/384,0,500/1113,125/192,-2187/6784,11/84];var bm=[.5*6025192743/30085553152,0,.5*51252292925/65400821598,.5*-2691868925/45128329728,
.5*187940372067/1594534317056,.5*-1776094331/19743644256,.5*11237099/235043384];var c=[1/5,3/10,4/5,8/9,1,1];var e=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40];var i=0,er,j;var h=(x1-x0)/10;var it=0;var add=numeric.add,mul=numeric.mul,y1,erinf;var max=Math.max,min=Math.min,abs=Math.abs,norminf=numeric.norminf,pow=Math.pow;var any=numeric.any,lt=numeric.lt,and=numeric.and,sub=numeric.sub;var e0,e1,ev;var ret=new numeric.Dopri(xs,ys,k1,ymid,-1,"");if(typeof event==="function")e0=event(x0,
y0);while(x0<x1&&it<maxit){++it;if(x0+h>x1)h=x1-x0;k2=f(x0+c[0]*h,add(y0,mul(A2*h,k1[i])));k3=f(x0+c[1]*h,add(add(y0,mul(A3[0]*h,k1[i])),mul(A3[1]*h,k2)));k4=f(x0+c[2]*h,add(add(add(y0,mul(A4[0]*h,k1[i])),mul(A4[1]*h,k2)),mul(A4[2]*h,k3)));k5=f(x0+c[3]*h,add(add(add(add(y0,mul(A5[0]*h,k1[i])),mul(A5[1]*h,k2)),mul(A5[2]*h,k3)),mul(A5[3]*h,k4)));k6=f(x0+c[4]*h,add(add(add(add(add(y0,mul(A6[0]*h,k1[i])),mul(A6[1]*h,k2)),mul(A6[2]*h,k3)),mul(A6[3]*h,k4)),mul(A6[4]*h,k5)));y1=add(add(add(add(add(y0,mul(k1[i],
h*b[0])),mul(k3,h*b[2])),mul(k4,h*b[3])),mul(k5,h*b[4])),mul(k6,h*b[5]));k7=f(x0+h,y1);er=add(add(add(add(add(mul(k1[i],h*e[0]),mul(k3,h*e[2])),mul(k4,h*e[3])),mul(k5,h*e[4])),mul(k6,h*e[5])),mul(k7,h*e[6]));if(typeof er==="number")erinf=abs(er);else erinf=norminf(er);if(erinf>tol){h=.2*h*pow(tol/erinf,.25);if(x0+h===x0){ret.msg="Step size became too small";break}continue}ymid[i]=add(add(add(add(add(add(y0,mul(k1[i],h*bm[0])),mul(k3,h*bm[2])),mul(k4,h*bm[3])),mul(k5,h*bm[4])),mul(k6,h*bm[5])),mul(k7,
h*bm[6]));++i;xs[i]=x0+h;ys[i]=y1;k1[i]=k7;if(typeof event==="function"){var yi,xl=x0,xr=x0+.5*h,xi;e1=event(xr,ymid[i-1]);ev=and(lt(e0,0),lt(0,e1));if(!any(ev)){xl=xr;xr=x0+h;e0=e1;e1=event(xr,y1);ev=and(lt(e0,0),lt(0,e1))}if(any(ev)){var xc,yc,en,ei;var side=0,sl=1,sr=1;while(1){if(typeof e0==="number")xi=(sr*e1*xl-sl*e0*xr)/(sr*e1-sl*e0);else{xi=xr;for(j=e0.length-1;j!==-1;--j)if(e0[j]<0&&e1[j]>0)xi=min(xi,(sr*e1[j]*xl-sl*e0[j]*xr)/(sr*e1[j]-sl*e0[j]))}if(xi<=xl||xi>=xr)break;yi=ret._at(xi,i-1);
ei=event(xi,yi);en=and(lt(e0,0),lt(0,ei));if(any(en)){xr=xi;e1=ei;ev=en;sr=1;if(side===-1)sl*=.5;else sl=1;side=-1}else{xl=xi;e0=ei;sl=1;if(side===1)sr*=.5;else sr=1;side=1}}y1=ret._at(.5*(x0+xi),i-1);ret.f[i]=f(xi,yi);ret.x[i]=xi;ret.y[i]=yi;ret.ymid[i-1]=y1;ret.events=ev;ret.iterations=it;return ret}}x0+=h;y0=y1;e0=e1;h=min(.8*h*pow(tol/erinf,.25),4*h)}ret.iterations=it;return ret};
numeric.LU=function(A,fast){fast=fast||false;var abs=Math.abs;var i,j,k,absAjk,Akk,Ak,Pk,Ai;var max;var n=A.length,n1=n-1;var P=new Array(n);if(!fast)A=numeric.clone(A);for(k=0;k<n;++k){Pk=k;Ak=A[k];max=abs(Ak[k]);for(j=k+1;j<n;++j){absAjk=abs(A[j][k]);if(max<absAjk){max=absAjk;Pk=j}}P[k]=Pk;if(Pk!=k){A[k]=A[Pk];A[Pk]=Ak;Ak=A[k]}Akk=Ak[k];for(i=k+1;i<n;++i)A[i][k]/=Akk;for(i=k+1;i<n;++i){Ai=A[i];for(j=k+1;j<n1;++j){Ai[j]-=Ai[k]*Ak[j];++j;Ai[j]-=Ai[k]*Ak[j]}if(j===n1)Ai[j]-=Ai[k]*Ak[j]}}return{LU:A,
P:P}};numeric.LUsolve=function LUsolve(LUP,b){var i,j;var LU=LUP.LU;var n=LU.length;var x=numeric.clone(b);var P=LUP.P;var Pi,LUi,LUii,tmp;for(i=n-1;i!==-1;--i)x[i]=b[i];for(i=0;i<n;++i){Pi=P[i];if(P[i]!==i){tmp=x[i];x[i]=x[Pi];x[Pi]=tmp}LUi=LU[i];for(j=0;j<i;++j)x[i]-=x[j]*LUi[j]}for(i=n-1;i>=0;--i){LUi=LU[i];for(j=i+1;j<n;++j)x[i]-=x[j]*LUi[j];x[i]/=LUi[i]}return x};numeric.solve=function solve(A,b,fast){return numeric.LUsolve(numeric.LU(A,fast),b)};
numeric.echelonize=function echelonize(A){var s=numeric.dim(A),m=s[0],n=s[1];var I=numeric.identity(m);var P=Array(m);var i,j,k,l,Ai,Ii,Z,a;var abs=Math.abs;var diveq=numeric.diveq;A=numeric.clone(A);for(i=0;i<m;++i){k=0;Ai=A[i];Ii=I[i];for(j=1;j<n;++j)if(abs(Ai[k])<abs(Ai[j]))k=j;P[i]=k;diveq(Ii,Ai[k]);diveq(Ai,Ai[k]);for(j=0;j<m;++j)if(j!==i){Z=A[j];a=Z[k];for(l=n-1;l!==-1;--l)Z[l]-=Ai[l]*a;Z=I[j];for(l=m-1;l!==-1;--l)Z[l]-=Ii[l]*a}}return{I:I,A:A,P:P}};
numeric.__solveLP=function __solveLP(c,A,b,tol,maxit,x,flag){var sum=numeric.sum,log=numeric.log,mul=numeric.mul,sub=numeric.sub,dot=numeric.dot,div=numeric.div,add=numeric.add;var m=c.length,n=b.length,y;var unbounded=false,cb,i0=0;var alpha=1;var f0,df0,AT=numeric.transpose(A),svd=numeric.svd,transpose=numeric.transpose,leq=numeric.leq,sqrt=Math.sqrt,abs=Math.abs;var muleq=numeric.muleq;var norm=numeric.norminf,any=numeric.any,min=Math.min;var all=numeric.all,gt=numeric.gt;var p=Array(m),A0=Array(n),
e=numeric.rep([n],1),H;var solve=numeric.solve,z=sub(b,dot(A,x)),count;var dotcc=dot(c,c);var g;for(count=i0;count<maxit;++count){var i,j,d;for(i=n-1;i!==-1;--i)A0[i]=div(A[i],z[i]);var A1=transpose(A0);for(i=m-1;i!==-1;--i)p[i]=sum(A1[i]);alpha=.25*abs(dotcc/dot(c,p));var a1=100*sqrt(dotcc/dot(p,p));if(!isFinite(alpha)||alpha>a1)alpha=a1;g=add(c,mul(alpha,p));H=dot(A1,A0);for(i=m-1;i!==-1;--i)H[i][i]+=1;d=solve(H,div(g,alpha),true);var t0=div(z,dot(A,d));var t=1;for(i=n-1;i!==-1;--i)if(t0[i]<0)t=
min(t,-.999*t0[i]);y=sub(x,mul(d,t));z=sub(b,dot(A,y));if(!all(gt(z,0)))return{solution:x,message:"",iterations:count};x=y;if(alpha<tol)return{solution:y,message:"",iterations:count};if(flag){var s=dot(c,g),Ag=dot(A,g);unbounded=true;for(i=n-1;i!==-1;--i)if(s*Ag[i]<0){unbounded=false;break}}else if(x[m-1]>=0)unbounded=false;else unbounded=true;if(unbounded)return{solution:y,message:"Unbounded",iterations:count}}return{solution:x,message:"maximum iteration count exceeded",iterations:count}};
numeric._solveLP=function _solveLP(c,A,b,tol,maxit){var m=c.length,n=b.length,y;var sum=numeric.sum,log=numeric.log,mul=numeric.mul,sub=numeric.sub,dot=numeric.dot,div=numeric.div,add=numeric.add;var c0=numeric.rep([m],0).concat([1]);var J=numeric.rep([n,1],-1);var A0=numeric.blockMatrix([[A,J]]);var b0=b;var y=numeric.rep([m],0).concat(Math.max(0,numeric.sup(numeric.neg(b)))+1);var x0=numeric.__solveLP(c0,A0,b0,tol,maxit,y,false);var x=numeric.clone(x0.solution);x.length=m;var foo=numeric.inf(sub(b,
dot(A,x)));if(foo<0)return{solution:NaN,message:"Infeasible",iterations:x0.iterations};var ret=numeric.__solveLP(c,A,b,tol,maxit-x0.iterations,x,true);ret.iterations+=x0.iterations;return ret};
numeric.solveLP=function solveLP(c,A,b,Aeq,beq,tol,maxit){if(typeof maxit==="undefined")maxit=1E3;if(typeof tol==="undefined")tol=numeric.epsilon;if(typeof Aeq==="undefined")return numeric._solveLP(c,A,b,tol,maxit);var m=Aeq.length,n=Aeq[0].length,o=A.length;var B=numeric.echelonize(Aeq);var flags=numeric.rep([n],0);var P=B.P;var Q=[];var i;for(i=P.length-1;i!==-1;--i)flags[P[i]]=1;for(i=n-1;i!==-1;--i)if(flags[i]===0)Q.push(i);var g=numeric.getRange;var I=numeric.linspace(0,m-1),J=numeric.linspace(0,
o-1);var Aeq2=g(Aeq,I,Q),A1=g(A,J,P),A2=g(A,J,Q),dot=numeric.dot,sub=numeric.sub;var A3=dot(A1,B.I);var A4=sub(A2,dot(A3,Aeq2)),b4=sub(b,dot(A3,beq));var c1=Array(P.length),c2=Array(Q.length);for(i=P.length-1;i!==-1;--i)c1[i]=c[P[i]];for(i=Q.length-1;i!==-1;--i)c2[i]=c[Q[i]];var c4=sub(c2,dot(c1,dot(B.I,Aeq2)));var S=numeric._solveLP(c4,A4,b4,tol,maxit);var x2=S.solution;if(x2!==x2)return S;var x1=dot(B.I,sub(beq,dot(Aeq2,x2)));var x=Array(c.length);for(i=P.length-1;i!==-1;--i)x[P[i]]=x1[i];for(i=
Q.length-1;i!==-1;--i)x[Q[i]]=x2[i];return{solution:x,message:S.message,iterations:S.iterations}};
numeric.MPStoLP=function MPStoLP(MPS){if(MPS instanceof String)MPS.split("\n");var state=0;var states=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"];var n=MPS.length;var i,j,z,N=0,rows={},sign=[],rl=0,vars={},nv=0;var name;var c=[],A=[],b=[];function err(e){throw new Error("MPStoLP: "+e+"\nLine "+i+": "+MPS[i]+"\nCurrent state: "+states[state]+"\n");}for(i=0;i<n;++i){z=MPS[i];var w0=z.match(/\S*/g);var w=[];for(j=0;j<w0.length;++j)if(w0[j]!=="")w.push(w0[j]);if(w.length===0)continue;
for(j=0;j<states.length;++j)if(z.substr(0,states[j].length)===states[j])break;if(j<states.length){state=j;if(j===1)name=w[1];if(j===6)return{name:name,c:c,A:numeric.transpose(A),b:b,rows:rows,vars:vars};continue}switch(state){case 0:case 1:err("Unexpected line");case 2:switch(w[0]){case "N":if(N===0)N=w[1];else err("Two or more N rows");break;case "L":rows[w[1]]=rl;sign[rl]=1;b[rl]=0;++rl;break;case "G":rows[w[1]]=rl;sign[rl]=-1;b[rl]=0;++rl;break;case "E":rows[w[1]]=rl;sign[rl]=0;b[rl]=0;++rl;break;
default:err("Parse error "+numeric.prettyPrint(w))}break;case 3:if(!vars.hasOwnProperty(w[0])){vars[w[0]]=nv;c[nv]=0;A[nv]=numeric.rep([rl],0);++nv}var p=vars[w[0]];for(j=1;j<w.length;j+=2){if(w[j]===N){c[p]=parseFloat(w[j+1]);continue}var q=rows[w[j]];A[p][q]=(sign[q]<0?-1:1)*parseFloat(w[j+1])}break;case 4:for(j=1;j<w.length;j+=2)b[rows[w[j]]]=(sign[rows[w[j]]]<0?-1:1)*parseFloat(w[j+1]);break;case 5:break;case 6:err("Internal error")}}err("Reached end of file without ENDATA")};
numeric.seedrandom={pow:Math.pow,random:Math.random};
(function(pool,math,width,chunks,significance,overflow,startdenom){math["seedrandom"]=function seedrandom(seed,use_entropy){var key=[];var arc4;seed=mixkey(flatten(use_entropy?[seed,pool]:arguments.length?seed:[(new Date).getTime(),pool,window],3),key);arc4=new ARC4(key);mixkey(arc4.S,pool);math["random"]=function random(){var n=arc4.g(chunks);var d=startdenom;var x=0;while(n<significance){n=(n+x)*width;d*=width;x=arc4.g(1)}while(n>=overflow){n/=2;d/=2;x>>>=1}return(n+x)/d};return seed};function ARC4(key){var t,
u,me=this,keylen=key.length;var i=0,j=me.i=me.j=me.m=0;me.S=[];me.c=[];if(!keylen)key=[keylen++];while(i<width)me.S[i]=i++;for(i=0;i<width;i++){t=me.S[i];j=lowbits(j+t+key[i%keylen]);u=me.S[j];me.S[i]=u;me.S[j]=t}me.g=function getnext(count){var s=me.S;var i=lowbits(me.i+1);var t=s[i];var j=lowbits(me.j+t);var u=s[j];s[i]=u;s[j]=t;var r=s[lowbits(t+u)];while(--count){i=lowbits(i+1);t=s[i];j=lowbits(j+t);u=s[j];s[i]=u;s[j]=t;r=r*width+s[lowbits(t+u)]}me.i=i;me.j=j;return r};me.g(width)}function flatten(obj,
depth,result,prop,typ){result=[];typ=typeof obj;if(depth&&typ=="object")for(prop in obj)if(prop.indexOf("S")<5)try{result.push(flatten(obj[prop],depth-1))}catch(e){}return result.length?result:obj+(typ!="string"?"\x00":"")}function mixkey(seed,key,smear,j){seed+="";smear=0;for(j=0;j<seed.length;j++)key[lowbits(j)]=lowbits((smear^=key[lowbits(j)]*19)+seed.charCodeAt(j));seed="";for(j in key)seed+=String.fromCharCode(key[j]);return seed}function lowbits(n){return n&width-1}startdenom=math.pow(width,
chunks);significance=math.pow(2,significance);overflow=significance*2;mixkey(math.random(),pool)})([],numeric.seedrandom,256,6,52);
(function(exports){function base0to1(A){if(typeof A!=="object")return A;var ret=[],i,n=A.length;for(i=0;i<n;i++)ret[i+1]=base0to1(A[i]);return ret}function base1to0(A){if(typeof A!=="object")return A;var ret=[],i,n=A.length;for(i=1;i<n;i++)ret[i-1]=base1to0(A[i]);return ret}function dpori(a,lda,n){var i,j,k,kp1,t;for(k=1;k<=n;k=k+1){a[k][k]=1/a[k][k];t=-a[k][k];for(i=1;i<k;i=i+1)a[i][k]=t*a[i][k];kp1=k+1;if(n<kp1)break;for(j=kp1;j<=n;j=j+1){t=a[k][j];a[k][j]=0;for(i=1;i<=k;i=i+1)a[i][j]=a[i][j]+t*
a[i][k]}}}function dposl(a,lda,n,b){var i,k,kb,t;for(k=1;k<=n;k=k+1){t=0;for(i=1;i<k;i=i+1)t=t+a[i][k]*b[i];b[k]=(b[k]-t)/a[k][k]}for(kb=1;kb<=n;kb=kb+1){k=n+1-kb;b[k]=b[k]/a[k][k];t=-b[k];for(i=1;i<k;i=i+1)b[i]=b[i]+t*a[i][k]}}function dpofa(a,lda,n,info){var i,j,jm1,k,t,s;for(j=1;j<=n;j=j+1){info[1]=j;s=0;jm1=j-1;if(jm1<1){s=a[j][j]-s;if(s<=0)break;a[j][j]=Math.sqrt(s)}else{for(k=1;k<=jm1;k=k+1){t=a[k][j];for(i=1;i<k;i=i+1)t=t-a[i][j]*a[i][k];t=t/a[k][k];a[k][j]=t;s=s+t*t}s=a[j][j]-s;if(s<=0)break;
a[j][j]=Math.sqrt(s)}info[1]=0}}function qpgen2(dmat,dvec,fddmat,n,sol,crval,amat,bvec,fdamat,q,meq,iact,nact,iter,work,ierr){var i,j,l,l1,info,it1,iwzv,iwrv,iwrm,iwsv,iwuv,nvl,r,iwnbv,temp,sum,t1,tt,gc,gs,nu,t1inf,t2min,vsmall,tmpa,tmpb,go;r=Math.min(n,q);l=2*n+r*(r+5)/2+2*q+1;vsmall=1E-60;do{vsmall=vsmall+vsmall;tmpa=1+.1*vsmall;tmpb=1+.2*vsmall}while(tmpa<=1||tmpb<=1);for(i=1;i<=n;i=i+1)work[i]=dvec[i];for(i=n+1;i<=l;i=i+1)work[i]=0;for(i=1;i<=q;i=i+1)iact[i]=0;info=[];if(ierr[1]===0){dpofa(dmat,
fddmat,n,info);if(info[1]!==0){ierr[1]=2;return}dposl(dmat,fddmat,n,dvec);dpori(dmat,fddmat,n)}else{for(j=1;j<=n;j=j+1){sol[j]=0;for(i=1;i<=j;i=i+1)sol[j]=sol[j]+dmat[i][j]*dvec[i]}for(j=1;j<=n;j=j+1){dvec[j]=0;for(i=j;i<=n;i=i+1)dvec[j]=dvec[j]+dmat[j][i]*sol[i]}}crval[1]=0;for(j=1;j<=n;j=j+1){sol[j]=dvec[j];crval[1]=crval[1]+work[j]*sol[j];work[j]=0;for(i=j+1;i<=n;i=i+1)dmat[i][j]=0}crval[1]=-crval[1]/2;ierr[1]=0;iwzv=n;iwrv=iwzv+n;iwuv=iwrv+r;iwrm=iwuv+r+1;iwsv=iwrm+r*(r+1)/2;iwnbv=iwsv+q;for(i=
1;i<=q;i=i+1){sum=0;for(j=1;j<=n;j=j+1)sum=sum+amat[j][i]*amat[j][i];work[iwnbv+i]=Math.sqrt(sum)}nact=0;iter[1]=0;iter[2]=0;function fn_goto_50(){iter[1]=iter[1]+1;l=iwsv;for(i=1;i<=q;i=i+1){l=l+1;sum=-bvec[i];for(j=1;j<=n;j=j+1)sum=sum+amat[j][i]*sol[j];if(Math.abs(sum)<vsmall)sum=0;if(i>meq)work[l]=sum;else{work[l]=-Math.abs(sum);if(sum>0){for(j=1;j<=n;j=j+1)amat[j][i]=-amat[j][i];bvec[i]=-bvec[i]}}}for(i=1;i<=nact;i=i+1)work[iwsv+iact[i]]=0;nvl=0;temp=0;for(i=1;i<=q;i=i+1)if(work[iwsv+i]<temp*
work[iwnbv+i]){nvl=i;temp=work[iwsv+i]/work[iwnbv+i]}if(nvl===0)return 999;return 0}function fn_goto_55(){for(i=1;i<=n;i=i+1){sum=0;for(j=1;j<=n;j=j+1)sum=sum+dmat[j][i]*amat[j][nvl];work[i]=sum}l1=iwzv;for(i=1;i<=n;i=i+1)work[l1+i]=0;for(j=nact+1;j<=n;j=j+1)for(i=1;i<=n;i=i+1)work[l1+i]=work[l1+i]+dmat[i][j]*work[j];t1inf=true;for(i=nact;i>=1;i=i-1){sum=work[i];l=iwrm+i*(i+3)/2;l1=l-i;for(j=i+1;j<=nact;j=j+1){sum=sum-work[l]*work[iwrv+j];l=l+j}sum=sum/work[l1];work[iwrv+i]=sum;if(iact[i]<meq)break;
if(sum<0)break;t1inf=false;it1=i}if(!t1inf){t1=work[iwuv+it1]/work[iwrv+it1];for(i=1;i<=nact;i=i+1){if(iact[i]<meq)break;if(work[iwrv+i]<0)break;temp=work[iwuv+i]/work[iwrv+i];if(temp<t1){t1=temp;it1=i}}}sum=0;for(i=iwzv+1;i<=iwzv+n;i=i+1)sum=sum+work[i]*work[i];if(Math.abs(sum)<=vsmall)if(t1inf){ierr[1]=1;return 999}else{for(i=1;i<=nact;i=i+1)work[iwuv+i]=work[iwuv+i]-t1*work[iwrv+i];work[iwuv+nact+1]=work[iwuv+nact+1]+t1;return 700}else{sum=0;for(i=1;i<=n;i=i+1)sum=sum+work[iwzv+i]*amat[i][nvl];
tt=-work[iwsv+nvl]/sum;t2min=true;if(!t1inf)if(t1<tt){tt=t1;t2min=false}for(i=1;i<=n;i=i+1){sol[i]=sol[i]+tt*work[iwzv+i];if(Math.abs(sol[i])<vsmall)sol[i]=0}crval[1]=crval[1]+tt*sum*(tt/2+work[iwuv+nact+1]);for(i=1;i<=nact;i=i+1)work[iwuv+i]=work[iwuv+i]-tt*work[iwrv+i];work[iwuv+nact+1]=work[iwuv+nact+1]+tt;if(t2min){nact=nact+1;iact[nact]=nvl;l=iwrm+(nact-1)*nact/2+1;for(i=1;i<=nact-1;i=i+1){work[l]=work[i];l=l+1}if(nact===n)work[l]=work[n];else{for(i=n;i>=nact+1;i=i-1){if(work[i]===0)break;gc=
Math.max(Math.abs(work[i-1]),Math.abs(work[i]));gs=Math.min(Math.abs(work[i-1]),Math.abs(work[i]));if(work[i-1]>=0)temp=Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)));else temp=-Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)));gc=work[i-1]/temp;gs=work[i]/temp;if(gc===1)break;if(gc===0){work[i-1]=gs*temp;for(j=1;j<=n;j=j+1){temp=dmat[j][i-1];dmat[j][i-1]=dmat[j][i];dmat[j][i]=temp}}else{work[i-1]=temp;nu=gs/(1+gc);for(j=1;j<=n;j=j+1){temp=gc*dmat[j][i-1]+gs*dmat[j][i];dmat[j][i]=nu*(dmat[j][i-1]+temp)-dmat[j][i];
dmat[j][i-1]=temp}}}work[l]=work[nact]}}else{sum=-bvec[nvl];for(j=1;j<=n;j=j+1)sum=sum+sol[j]*amat[j][nvl];if(nvl>meq)work[iwsv+nvl]=sum;else{work[iwsv+nvl]=-Math.abs(sum);if(sum>0){for(j=1;j<=n;j=j+1)amat[j][nvl]=-amat[j][nvl];bvec[nvl]=-bvec[nvl]}}return 700}}return 0}function fn_goto_797(){l=iwrm+it1*(it1+1)/2+1;l1=l+it1;if(work[l1]===0)return 798;gc=Math.max(Math.abs(work[l1-1]),Math.abs(work[l1]));gs=Math.min(Math.abs(work[l1-1]),Math.abs(work[l1]));if(work[l1-1]>=0)temp=Math.abs(gc*Math.sqrt(1+
gs*gs/(gc*gc)));else temp=-Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)));gc=work[l1-1]/temp;gs=work[l1]/temp;if(gc===1)return 798;if(gc===0){for(i=it1+1;i<=nact;i=i+1){temp=work[l1-1];work[l1-1]=work[l1];work[l1]=temp;l1=l1+i}for(i=1;i<=n;i=i+1){temp=dmat[i][it1];dmat[i][it1]=dmat[i][it1+1];dmat[i][it1+1]=temp}}else{nu=gs/(1+gc);for(i=it1+1;i<=nact;i=i+1){temp=gc*work[l1-1]+gs*work[l1];work[l1]=nu*(work[l1-1]+temp)-work[l1];work[l1-1]=temp;l1=l1+i}for(i=1;i<=n;i=i+1){temp=gc*dmat[i][it1]+gs*dmat[i][it1+
1];dmat[i][it1+1]=nu*(dmat[i][it1]+temp)-dmat[i][it1+1];dmat[i][it1]=temp}}return 0}function fn_goto_798(){l1=l-it1;for(i=1;i<=it1;i=i+1){work[l1]=work[l];l=l+1;l1=l1+1}work[iwuv+it1]=work[iwuv+it1+1];iact[it1]=iact[it1+1];it1=it1+1;if(it1<nact)return 797;return 0}function fn_goto_799(){work[iwuv+nact]=work[iwuv+nact+1];work[iwuv+nact+1]=0;iact[nact]=0;nact=nact-1;iter[2]=iter[2]+1;return 0}go=0;while(true){go=fn_goto_50();if(go===999)return;while(true){go=fn_goto_55();if(go===0)break;if(go===999)return;
if(go===700)if(it1===nact)fn_goto_799();else{while(true){fn_goto_797();go=fn_goto_798();if(go!==797)break}fn_goto_799()}}}}function solveQP(Dmat,dvec,Amat,bvec,meq,factorized){Dmat=base0to1(Dmat);dvec=base0to1(dvec);Amat=base0to1(Amat);var i,n,q,nact,r,crval=[],iact=[],sol=[],work=[],iter=[],message;meq=meq||0;factorized=factorized?base0to1(factorized):[undefined,0];bvec=bvec?base0to1(bvec):[];n=Dmat.length-1;q=Amat[1].length-1;if(!bvec)for(i=1;i<=q;i=i+1)bvec[i]=0;for(i=1;i<=q;i=i+1)iact[i]=0;nact=
0;r=Math.min(n,q);for(i=1;i<=n;i=i+1)sol[i]=0;crval[1]=0;for(i=1;i<=2*n+r*(r+5)/2+2*q+1;i=i+1)work[i]=0;for(i=1;i<=2;i=i+1)iter[i]=0;qpgen2(Dmat,dvec,n,n,sol,crval,Amat,bvec,n,q,meq,iact,nact,iter,work,factorized);message="";if(factorized[1]===1)message="constraints are inconsistent, no solution!";if(factorized[1]===2)message="matrix D in quadratic function is not positive definite!";return{solution:base1to0(sol),value:base1to0(crval),unconstrained_solution:base1to0(dvec),iterations:base1to0(iter),
iact:base1to0(iact),message:message}}exports.solveQP=solveQP})(numeric);
numeric.svd=function svd(A){var temp;var prec=numeric.epsilon;var tolerance=1E-64/prec;var itmax=50;var c=0;var i=0;var j=0;var k=0;var l=0;var u=numeric.clone(A);var m=u.length;var n=u[0].length;if(m<n)throw"Need more rows than columns";var e=new Array(n);var q=new Array(n);for(i=0;i<n;i++)e[i]=q[i]=0;var v=numeric.rep([n,n],0);function pythag(a,b){a=Math.abs(a);b=Math.abs(b);if(a>b)return a*Math.sqrt(1+b*b/a/a);else if(b==0)return a;return b*Math.sqrt(1+a*a/b/b)}var f=0;var g=0;var h=0;var x=0;
var y=0;var z=0;var s=0;for(i=0;i<n;i++){e[i]=g;s=0;l=i+1;for(j=i;j<m;j++)s+=u[j][i]*u[j][i];if(s<=tolerance)g=0;else{f=u[i][i];g=Math.sqrt(s);if(f>=0)g=-g;h=f*g-s;u[i][i]=f-g;for(j=l;j<n;j++){s=0;for(k=i;k<m;k++)s+=u[k][i]*u[k][j];f=s/h;for(k=i;k<m;k++)u[k][j]+=f*u[k][i]}}q[i]=g;s=0;for(j=l;j<n;j++)s=s+u[i][j]*u[i][j];if(s<=tolerance)g=0;else{f=u[i][i+1];g=Math.sqrt(s);if(f>=0)g=-g;h=f*g-s;u[i][i+1]=f-g;for(j=l;j<n;j++)e[j]=u[i][j]/h;for(j=l;j<m;j++){s=0;for(k=l;k<n;k++)s+=u[j][k]*u[i][k];for(k=
l;k<n;k++)u[j][k]+=s*e[k]}}y=Math.abs(q[i])+Math.abs(e[i]);if(y>x)x=y}for(i=n-1;i!=-1;i+=-1){if(g!=0){h=g*u[i][i+1];for(j=l;j<n;j++)v[j][i]=u[i][j]/h;for(j=l;j<n;j++){s=0;for(k=l;k<n;k++)s+=u[i][k]*v[k][j];for(k=l;k<n;k++)v[k][j]+=s*v[k][i]}}for(j=l;j<n;j++){v[i][j]=0;v[j][i]=0}v[i][i]=1;g=e[i];l=i}for(i=n-1;i!=-1;i+=-1){l=i+1;g=q[i];for(j=l;j<n;j++)u[i][j]=0;if(g!=0){h=u[i][i]*g;for(j=l;j<n;j++){s=0;for(k=l;k<m;k++)s+=u[k][i]*u[k][j];f=s/h;for(k=i;k<m;k++)u[k][j]+=f*u[k][i]}for(j=i;j<m;j++)u[j][i]=
u[j][i]/g}else for(j=i;j<m;j++)u[j][i]=0;u[i][i]+=1}prec=prec*x;for(k=n-1;k!=-1;k+=-1)for(var iteration=0;iteration<itmax;iteration++){var test_convergence=false;for(l=k;l!=-1;l+=-1){if(Math.abs(e[l])<=prec){test_convergence=true;break}if(Math.abs(q[l-1])<=prec)break}if(!test_convergence){c=0;s=1;var l1=l-1;for(i=l;i<k+1;i++){f=s*e[i];e[i]=c*e[i];if(Math.abs(f)<=prec)break;g=q[i];h=pythag(f,g);q[i]=h;c=g/h;s=-f/h;for(j=0;j<m;j++){y=u[j][l1];z=u[j][i];u[j][l1]=y*c+z*s;u[j][i]=-y*s+z*c}}}z=q[k];if(l==
k){if(z<0){q[k]=-z;for(j=0;j<n;j++)v[j][k]=-v[j][k]}break}if(iteration>=itmax-1)throw"Error: no convergence.";x=q[l];y=q[k-1];g=e[k-1];h=e[k];f=((y-z)*(y+z)+(g-h)*(g+h))/(2*h*y);g=pythag(f,1);if(f<0)f=((x-z)*(x+z)+h*(y/(f-g)-h))/x;else f=((x-z)*(x+z)+h*(y/(f+g)-h))/x;c=1;s=1;for(i=l+1;i<k+1;i++){g=e[i];y=q[i];h=s*g;g=c*g;z=pythag(f,h);e[i-1]=z;c=f/z;s=h/z;f=x*c+g*s;g=-x*s+g*c;h=y*s;y=y*c;for(j=0;j<n;j++){x=v[j][i-1];z=v[j][i];v[j][i-1]=x*c+z*s;v[j][i]=-x*s+z*c}z=pythag(f,h);q[i-1]=z;c=f/z;s=h/z;f=
c*g+s*y;x=-s*g+c*y;for(j=0;j<m;j++){y=u[j][i-1];z=u[j][i];u[j][i-1]=y*c+z*s;u[j][i]=-y*s+z*c}}e[l]=0;e[k]=f;q[k]=x}for(i=0;i<q.length;i++)if(q[i]<prec)q[i]=0;for(i=0;i<n;i++)for(j=i-1;j>=0;j--)if(q[j]<q[i]){c=q[j];q[j]=q[i];q[i]=c;for(k=0;k<u.length;k++){temp=u[k][i];u[k][i]=u[k][j];u[k][j]=temp}for(k=0;k<v.length;k++){temp=v[k][i];v[k][i]=v[k][j];v[k][j]=temp}i=j}return{U:u,S:q,V:v}};</script><script>!function(t){var r={};function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(r){return t[r]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=2)}([function(t,r,e){"use strict";const n=Object.prototype.toString;t.exports=function(t){return n.call(t).endsWith("Array]")}},function(t,r,e){"use strict";var n=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};function i(t){return void 0===t&&(t=Math.random),t()}function o(t){for(var r=[],e=0;e<t;e++)r.push(void 0);return r}function s(t,r){return o(t).map(function(){return r})}function a(t){return t.reduce(function(t,r){return t+r})}Object.defineProperty(r,"__esModule",{value:!0}),r.randomNormal2d=function(t,r,e,n){return void 0===t&&(t=0),void 0===r&&(r=1),void 0===e&&(e=[1,1]),void 0===n&&(n=Math.random),Array(e[0]).fill(0).map(function(){return Array(e[1]).fill(0).map(function(){return function(t,r,e){void 0===e&&(e=Math.random);var n=i(e),o=i(e);return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*o)*r+t}(t,r,n)})})},r.tauRandInt=function(t,r){return void 0===r&&(r=Math.random),Math.floor(r()*t)},r.tauRand=i,r.norm=function(t){var r,e,i=0;try{for(var o=n(t),s=o.next();!s.done;s=o.next()){var a=s.value;i+=Math.pow(a,2)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return Math.sqrt(i)},r.empty=o,r.range=function(t){return o(t).map(function(t,r){return r})},r.filled=s,r.zeros=function(t){return s(t,0)},r.ones=function(t){return s(t,1)},r.linear=function(t,r,e){return o(e).map(function(n,i){return t+i*((r-t)/(e-1))})},r.sum=a,r.mean=function(t){return a(t)/t.length},r.max=function(t){for(var r=0,e=0;e<t.length;e++)r=t[e]>r?t[e]:r;return r},r.max2d=function(t){for(var r=0,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)r=t[e][n]>r?t[e][n]:r;return r}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(3);window.UMAP=n.UMAP},function(t,r,e){"use strict";var n=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))(function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){t.done?i(t.value):new e(function(r){r(t.value)}).then(s,a)}h((n=n.apply(t,r||[])).next())})},i=this&&this.__generator||function(t,r){var e,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=r.call(t,s)}catch(t){o=[6,t],n=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(o(arguments[r]));return t};Object.defineProperty(r,"__esModule",{value:!0});var a=e(4),h=e(5),u=e(7),l=e(1),f=e(8),c=function(){function t(t){void 0===t&&(t={}),this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.random=Math.random,this.spread=1,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=m,this.isInitialized=!1,this.embedding=[],this.optimizationState=new g,this.minDist=t.minDist||this.minDist,this.nComponents=t.nComponents||this.nComponents,this.nEpochs=t.nEpochs||this.nEpochs,this.nNeighbors=t.nNeighbors||this.nNeighbors,this.random=t.random||this.random,this.spread=t.spread||this.spread}return t.prototype.fit=function(t){return this.initializeFit(t),this.optimizeLayout(),this.embedding},t.prototype.fitAsync=function(t,r){return void 0===r&&(r=function(){return!0}),n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.initializeFit(t),[4,this.optimizeLayout(r)];case 1:return e.sent(),[2,this.embedding]}})})},t.prototype.setSupervisedProjection=function(t,r){void 0===r&&(r={}),this.Y=t,this.targetMetric=r.targetMetric||this.targetMetric,this.targetWeight=r.targetWeight||this.targetWeight,this.targetNNeighbors=r.targetNNeighbors||this.targetNNeighbors},t.prototype.setPrecomputedKNN=function(t,r){this.knnIndices=t,this.knnDistances=r},t.prototype.initializeFit=function(t){if(this.X===t&&this.isInitialized)return this.getNEpochs();if(this.X=t,!this.knnIndices&&!this.knnDistances){var r=this.nearestNeighbors(t);this.knnIndices=r.knnIndices,this.knnDistances=r.knnDistances}this.graph=this.fuzzySimplicialSet(t,this.nNeighbors),this.processGraphForSupervisedProjection();var e=this.initializeSimplicialSetEmbedding(),n=e.head,i=e.tail,o=e.epochsPerSample;return this.optimizationState.head=n,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=o,this.isInitialized=!0,this.getNEpochs()},t.prototype.processGraphForSupervisedProjection=function(){var t=this.Y,r=this.X;if(t){if(t.length!==r.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var e=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,t,e)}}},t.prototype.step=function(){var t=this.optimizationState,r=t.currentEpoch;return t.isInitialized||this.initializeOptimization(),r<this.getNEpochs()&&this.optimizeLayoutStep(r),this.optimizationState.currentEpoch},t.prototype.getEmbedding=function(){return this.embedding},t.prototype.nearestNeighbors=function(t){var r,e=this.distanceFn,n=this.nNeighbors,i=h.makeNNDescent(e,this.random),o=5+Math.floor(.5===(r=Math.pow(t.length,.5)/20)?0:Math.round(r)),s=Math.max(5,Math.floor(Math.round(function(t){return Math.log(t)/Math.log(2)}(t.length)))),a=u.makeForest(t,n,o,this.random),l=i(t,u.makeLeafArray(a),n,s);return{knnIndices:l.indices,knnDistances:l.weights}},t.prototype.fuzzySimplicialSet=function(t,r,e,n){void 0===e&&(e=1),void 0===n&&(n=1);var i=this.knnIndices,o=void 0===i?[]:i,s=this.knnDistances,h=void 0===s?[]:s,u=this.smoothKNNDistance(h,r,e),l=u.sigmas,f=u.rhos,c=this.computeMembershipStrengths(o,h,l,f),m=c.rows,g=c.cols,v=c.vals,p=[t.length,t.length],w=new a.SparseMatrix(m,g,v,p),d=a.transpose(w),y=a.pairwiseMultiply(w,d),b=a.subtract(a.add(w,d),y),M=a.multiplyScalar(b,n),x=a.multiplyScalar(y,1-n);return a.add(M,x)},t.prototype.categoricalSimplicialSetIntersection=function(t,r,e,n){void 0===n&&(n=1);var i=d(t,r,n,e);return y(i=a.eliminateZeros(i))},t.prototype.smoothKNNDistance=function(t,r,e,n,i){void 0===e&&(e=1),void 0===n&&(n=64),void 0===i&&(i=1);for(var o=Math.log(r)/Math.log(2)*i,s=l.zeros(t.length),a=l.zeros(t.length),h=0;h<t.length;h++){var u=0,f=1/0,c=1,m=t[h],g=m.filter(function(t){return t>0});if(g.length>=e){var v=Math.floor(e),p=e-v;v>0?(s[h]=g[v-1],p>1e-5&&(s[h]+=p*(g[v]-g[v-1]))):s[h]=p*g[0]}else g.length>0&&(s[h]=l.max(g));for(var w=0;w<n;w++){for(var d=0,y=1;y<t[h].length;y++){var b=t[h][y]-s[h];d+=b>0?Math.exp(-b/c):1}if(Math.abs(d-o)<1e-5)break;d>o?c=(u+(f=c))/2:(u=c,f===1/0?c*=2:c=(u+f)/2)}if(a[h]=c,s[h]>0){var M=l.mean(m);a[h]<.001*M&&(a[h]=.001*M)}else{var x=l.mean(t.map(l.mean));a[h]<.001*x&&(a[h]=.001*x)}}return{sigmas:a,rhos:s}},t.prototype.computeMembershipStrengths=function(t,r,e,n){for(var i=t.length,o=t[0].length,s=l.zeros(i*o),a=l.zeros(i*o),h=l.zeros(i*o),u=0;u<i;u++)for(var f=0;f<o;f++){var c=0;-1!==t[u][f]&&(c=t[u][f]===u?0:r[u][f]-n[u]<=0?1:Math.exp(-(r[u][f]-n[u])/e[u]),s[u*o+f]=u,a[u*o+f]=t[u][f],h[u*o+f]=c)}return{rows:s,cols:a,vals:h}},t.prototype.initializeSimplicialSetEmbedding=function(){for(var t=this,r=this.getNEpochs(),e=this.nComponents,n=this.graph.getValues(),i=0,o=0;o<n.length;o++){var s=n[o];i<n[o]&&(i=s)}var a=this.graph.map(function(t){return t<i/r?0:t});this.embedding=l.zeros(a.nRows).map(function(){return l.zeros(e).map(function(){return 20*l.tauRand(t.random)-10})});var h=[],u=[],f=[];for(o=0;o<a.nRows;o++)for(var c=0;c<a.nCols;c++){(s=a.get(o,c))&&(h.push(s),f.push(o),u.push(c))}return{head:u,tail:f,epochsPerSample:this.makeEpochsPerSample(h,r)}},t.prototype.makeEpochsPerSample=function(t,r){var e=l.filled(t.length,-1),n=l.max(t),i=t.map(function(t){return t/n*r});return i.forEach(function(t,n){t>0&&(e[n]=r/i[n])}),e},t.prototype.initializeOptimization=function(){var t=this.embedding,r=this.embedding,e=this.optimizationState,n=e.head,i=e.tail,o=e.epochsPerSample,a=this.getNEpochs(),h=this.graph.nCols,u=w(this.spread,this.minDist),l=u.a,f=u.b,c=t[0].length,m=t.length===r.length,g=o.map(function(t){return t/5}),v=s(g),p=s(o);Object.assign(this.optimizationState,{isInitialized:!0,headEmbedding:t,tailEmbedding:r,head:n,tail:i,epochsPerSample:o,epochOfNextSample:p,epochOfNextNegativeSample:v,epochsPerNegativeSample:g,moveOther:m,initialAlpha:1,alpha:1,gamma:1,a:l,b:f,dim:c,nEpochs:a,nVertices:h})},t.prototype.optimizeLayoutStep=function(t){for(var r=this.optimizationState,e=r.head,n=r.tail,i=r.headEmbedding,o=r.tailEmbedding,s=r.epochsPerSample,a=r.epochOfNextSample,h=r.epochOfNextNegativeSample,u=r.epochsPerNegativeSample,f=r.moveOther,c=r.initialAlpha,m=r.alpha,g=r.gamma,w=r.a,d=r.b,y=r.dim,b=r.nEpochs,M=r.nVertices,x=0;x<s.length;x++)if(!(a[x]>t)){var S=e[x],E=n[x],R=i[S],k=o[E],A=p(R,k),N=0;A>0&&(N=-2*w*d*Math.pow(A,d-1),N/=w*Math.pow(A,d)+1);for(var V=0;V<y;V++){var z=v(N*(R[V]-k[V]),4);R[V]+=z*m,f&&(k[V]+=-z*m)}a[x]+=s[x];for(var C=Math.floor((t-h[x])/u[x]),I=0;I<C;I++){var j=l.tauRandInt(M,this.random),P=o[j],D=p(R,P),_=0;if(D>0)_=2*g*d,_/=(.001+D)*(w*Math.pow(D,d)+1);else if(S===j)continue;for(V=0;V<y;V++){z=4;_>0&&(z=v(_*(R[V]-P[V]),4)),R[V]+=z*m}}h[x]+=C*u[x]}return r.alpha=c*(1-t/b),r.currentEpoch+=1,this.embedding=i,r.currentEpoch},t.prototype.optimizeLayout=function(t){var r=this;return void 0===t&&(t=function(){return!0}),this.optimizationState.isInitialized||this.initializeOptimization(),new Promise(function(e,o){var s=function(){return n(r,void 0,void 0,function(){var r,n,a,h,u,l;return i(this,function(i){try{if(r=this.optimizationState,n=r.nEpochs,a=r.currentEpoch,h=this.optimizeLayoutStep(a),u=!1===t(h),l=h===n,u||l)return[2,e(l)];s()}catch(t){o(t)}return[2]})})};s()})},t.prototype.getNEpochs=function(){var t=this.graph;if(this.nEpochs>0)return this.nEpochs;var r=t.nRows;return r<=2500?500:r<=5e3?400:r<=7500?300:200},t}();function m(t,r){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return Math.sqrt(e)}r.UMAP=c,r.euclidean=m,r.cosine=function(t,r){for(var e=0,n=0,i=0,o=0;o<t.length;o++)e+=t[o]*r[o],n+=Math.pow(t[o],2),i+=Math.pow(r[o],2);return 0===n&&0===i?0:0===n||0===i?1:1-e/Math.sqrt(n*i)};var g=function(){return function(){this.currentEpoch=0,this.isInitialized=!1,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0}}();function v(t,r){return t>r?r:t<-r?-r:t}function p(t,r){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return e}function w(t,r){var e=l.linear(0,3*t,300).map(function(t){return t<r?1:t}),n=l.zeros(e.length).map(function(n,i){return e[i]>=r?Math.exp(-(e[i]-r)/t):n}),i=f({x:e,y:n},function(t){var r=o(t,2),e=r[0],n=r[1];return function(t){return 1/(1+e*Math.pow(t,2*n))}},{damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01}).parameterValues,s=o(i,2);return{a:s[0],b:s[1]}}function d(t,r,e,n){return void 0===e&&(e=1),void 0===n&&(n=5),t.map(function(t,i,o){return-1===r[i]||-1===r[o]?t*Math.exp(-e):r[i]!==r[o]?t*Math.exp(-n):t})}function y(t){t=a.normalize(t,"max");var r=a.transpose(t),e=a.pairwiseMultiply(r,t);return t=a.add(t,a.subtract(r,e)),a.eliminateZeros(t)}r.findABParams=w,r.fastIntersection=d,r.resetLocalConnectivity=y},function(t,r,e){"use strict";var n,i=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(i(arguments[r]));return t},s=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};Object.defineProperty(r,"__esModule",{value:!0});var a=e(1),h=function(){function t(t,r,e,n){this.entries=new Map,this.nRows=0,this.nCols=0,this.rows=o(t),this.cols=o(r),this.values=o(e);for(var i=0;i<e.length;i++){var s=this.makeKey(this.rows[i],this.cols[i]);this.entries.set(s,i)}this.nRows=n[0],this.nCols=n[0]}return t.prototype.makeKey=function(t,r){return t+":"+r},t.prototype.checkDims=function(t,r){if(!(t<this.nRows&&r<this.nCols))throw new Error("array index out of bounds")},t.prototype.set=function(t,r,e){this.checkDims(t,r);var n=this.makeKey(t,r);if(this.entries.has(n)){var i=this.entries.get(n);this.values[i]=e}else this.rows.push(t),this.cols.push(r),this.values.push(e),this.entries.set(n,this.values.length-1)},t.prototype.get=function(t,r,e){void 0===e&&(e=0),this.checkDims(t,r);var n=this.makeKey(t,r);if(this.entries.has(n)){var i=this.entries.get(n);return this.values[i]}return e},t.prototype.getDims=function(){return[this.nRows,this.nCols]},t.prototype.getRows=function(){return o(this.rows)},t.prototype.getCols=function(){return o(this.cols)},t.prototype.getValues=function(){return o(this.values)},t.prototype.forEach=function(t){for(var r=0;r<this.values.length;r++)t(this.values[r],this.rows[r],this.cols[r])},t.prototype.map=function(r){for(var e=[],n=0;n<this.values.length;n++)e.push(r(this.values[n],this.rows[n],this.cols[n]));var i=[this.nRows,this.nCols];return new t(this.rows,this.cols,e,i)},t.prototype.toArray=function(){for(var t=this,r=a.empty(this.nRows).map(function(){return a.zeros(t.nCols)}),e=0;e<this.values.length;e++)r[this.rows[e]][this.cols[e]]=this.values[e];return r},t}();r.SparseMatrix=h,r.transpose=function(t){var r=[],e=[],n=[];t.forEach(function(t,i,o){r.push(i),e.push(o),n.push(t)});var i=[t.nCols,t.nRows];return new h(e,r,n,i)},r.identity=function(t){for(var r=i(t,1)[0],e=new h([],[],[],t),n=0;n<r;n++)e.set(n,n,1);return e},r.pairwiseMultiply=function(t,r){return l(t,r,function(t,r){return t*r})},r.add=function(t,r){return l(t,r,function(t,r){return t+r})},r.subtract=function(t,r){return l(t,r,function(t,r){return t-r})},r.multiplyScalar=function(t,r){return t.map(function(t){return t*r})},r.eliminateZeros=function(t){for(var r=new Set,e=t.getValues(),n=t.getRows(),i=t.getCols(),o=0;o<e.length;o++)0===e[o]&&r.add(o);var s=function(t,e){return!r.has(e)},a=e.filter(s),u=n.filter(s),l=i.filter(s);return new h(u,l,a,t.getDims())},r.normalize=function(t,r){var e,n;void 0===r&&(r="l2");var i=u[r],o=new Map;t.forEach(function(t,r,e){var n=o.get(r)||[];n.push(e),o.set(r,n)});var a=new h([],[],[],t.getDims()),l=function(r){for(var e=o.get(r).sort(),n=e.map(function(e){return t.get(r,e)}),s=i(n),h=0;h<s.length;h++)a.set(r,e[h],s[h])};try{for(var f=s(o.keys()),c=f.next();!c.done;c=f.next())l(c.value)}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return a};var u=((n={}).max=function(t){for(var r=-1/0,e=0;e<t.length;e++)r=t[e]>r?t[e]:r;return t.map(function(t){return t/r})},n.l1=function(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return t.map(function(t){return t/r})},n.l2=function(t){for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return t.map(function(t){return Math.sqrt(Math.pow(t,2)/r)})},n);function l(t,r,e){for(var n=new Set,i=[],o=[],s=[],a=function(n,a){i.push(n),o.push(a);var h=e(t.get(n,a),r.get(n,a));s.push(h)},u=t.getValues(),l=t.getRows(),f=t.getCols(),c=0;c<u.length;c++){var m=(w=l[c])+":"+(d=f[c]);n.add(m),a(w,d)}var g=r.getValues(),v=r.getRows(),p=r.getCols();for(c=0;c<g.length;c++){var w,d;m=(w=v[c])+":"+(d=p[c]);n.has(m)||a(w,d)}var y=[t.nRows,t.nCols];return new h(i,o,s,y)}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(6),i=e(1);r.makeNNDescent=function(t,r){return function(e,o,s,a,h,u,l,f){void 0===a&&(a=10),void 0===h&&(h=50),void 0===u&&(u=.001),void 0===l&&(l=.5),void 0===f&&(f=!0);for(var c=e.length,m=n.makeHeap(e.length,s),g=0;g<e.length;g++)for(var v=n.rejectionSample(s,e.length,r),p=0;p<v.length;p++){var w=t(e[g],e[v[p]]);n.heapPush(m,g,w,v[p],1),n.heapPush(m,v[p],w,g,1)}if(f)for(var d=0;d<o.length;d++)for(g=0;g<o[d].length&&!(o[d][g]<0);g++)for(p=g+1;p<o[d].length&&!(o[d][p]<0);p++)w=t(e[o[d][g]],e[o[d][p]]),n.heapPush(m,o[d][g],w,o[d][p],1),n.heapPush(m,o[d][p],w,o[d][g],1);for(d=0;d<a;d++){var y=n.buildCandidates(m,c,s,h,r),b=0;for(g=0;g<c;g++)for(p=0;p<h;p++){var M=Math.floor(y[0][g][p]);if(!(M<0||i.tauRand(r)<l))for(var x=0;x<h;x++){var S=Math.floor(y[0][g][x]),E=y[2][g][p],R=y[2][g][x];S<0||!E&&!R||(w=t(e[M],e[S]),b+=n.heapPush(m,M,w,S,1),b+=n.heapPush(m,S,w,M,1))}}if(b<=u*s*e.length)break}return n.deheapSort(m)}}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(1);function i(t,r){var e=function(e){return n.empty(t).map(function(){return n.filled(r,e)})},i=[];return i.push(e(-1)),i.push(e(1/0)),i.push(e(0)),i}function o(t,r,e,n,i){r=Math.floor(r);var o=t[0][r],s=t[1][r],a=t[2][r];if(e>=s[0])return 0;for(var h=0;h<o.length;h++)if(n===o[h])return 0;s[0]=e,o[0]=n,a[0]=i;for(var u=0,l=0;;){var f=2*u+1,c=f+1,m=t[0][0].length;if(f>=m)break;if(c>=m){if(!(s[f]>e))break;l=f}else if(s[f]>=s[c]){if(!(e<s[f]))break;l=f}else{if(!(e<s[c]))break;l=c}s[u]=s[l],o[u]=o[l],a[u]=a[l],u=l}return s[u]=e,o[u]=n,a[u]=i,1}function s(t,r,e,n){for(;2*n+1<e;){var i=2*n+1,o=i+1,s=n;if(t[s]<t[i]&&(s=i),o<e&&t[s]<t[o]&&(s=o),s===n)break;var a=t[n];t[n]=t[s],t[s]=a;var h=r[n];r[n]=r[s],r[s]=h,n=s}}r.makeHeap=i,r.rejectionSample=function(t,r,e){for(var i=n.zeros(t),o=0;o<t;o++){for(var s=!0,a=0;s;){a=n.tauRandInt(r,e);for(var h=!1,u=0;u<o;u++)if(a===i[u]){h=!0;break}h||(s=!1)}i[o]=a}return i},r.heapPush=o,r.buildCandidates=function(t,r,e,s,a){for(var h=i(r,s),u=0;u<r;u++)for(var l=0;l<e;l++)if(!(t[0][u][l]<0)){var f=t[0][u][l],c=t[2][u][l],m=n.tauRand(a);o(h,u,m,f,c),o(h,f,m,u,c),t[2][u][l]=0}return h},r.deheapSort=function(t){for(var r=t[0],e=t[1],n=0;n<r.length;n++)for(var i=r[n],o=e[n],a=0;a<i.length-1;a++){var h=i.length-a-1,u=o.length-a-1,l=i[0];i[0]=i[h],i[h]=l;var f=o[0];o[0]=o[u],o[u]=f,s(o,i,u,0)}return{indices:r,weights:e}}},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};Object.defineProperty(r,"__esModule",{value:!0});var s=e(1),a=function(){return function(t,r,e,n){this.hyperplanes=t,this.offsets=r,this.children=e,this.indices=n}}();r.FlatTree=a,r.makeForest=function(t,r,e,n){var o=Math.max(10,r);return s.range(e).map(function(r,e){return function(t,r,e,n){void 0===r&&(r=30);var i=s.range(t.length);return function t(r,e,n,i,o){if(void 0===n&&(n=30),e.length>n){var a=function(t,r,e){var n=t[0].length,i=s.tauRandInt(r.length,e),o=s.tauRandInt(r.length,e);o=(o+=i===o?1:0)%r.length;for(var a=r[i],h=r[o],u=0,l=s.zeros(n),f=0;f<l.length;f++)l[f]=t[a][f]-t[h][f],u-=l[f]*(t[a][f]+t[h][f])/2;for(var c=0,m=0,g=s.zeros(r.length),f=0;f<r.length;f++){for(var v=u,p=0;p<n;p++)v+=l[p]*t[r[f]][p];0===v?(g[f]=s.tauRandInt(2,e),0===g[f]?c+=1:m+=1):v>0?(g[f]=0,c+=1):(g[f]=1,m+=1)}var w=s.zeros(c),d=s.zeros(m);for(var f in c=0,m=0,s.range(g.length))0===g[f]?(w[c]=r[f],c+=1):(d[m]=r[f],m+=1);return{indicesLeft:w,indicesRight:d,hyperplane:l,offset:u}}(r,e,o),h=a.indicesLeft,u=a.indicesRight,l=a.hyperplane,f=a.offset,c=t(r,h,n,i+1,o),m=t(r,u,n,i+1,o),g={leftChild:c,rightChild:m,isLeaf:!1,hyperplane:l,offset:f};return g}var g={indices:e,isLeaf:!0};return g}(t,i,r,e,n)}(t,o,e,n)}).map(function(t){return function(t,r){var e=function t(r){return r.isLeaf?1:1+t(r.leftChild)+t(r.rightChild)}(t),n=function t(r){return r.isLeaf?1:t(r.leftChild)+t(r.rightChild)}(t),o=s.range(e).map(function(){return s.zeros(t.hyperplane.length)}),h=s.zeros(e),u=s.range(e).map(function(){return[-1,-1]}),l=s.range(n).map(function(){return s.range(r).map(function(){return-1})});return function t(r,e,n,o,s,a,h){var u;if(r.isLeaf)return o[a][0]=-h,(u=s[h]).splice.apply(u,i([0,r.indices.length],r.indices)),{nodeNum:a,leafNum:h+=1};e[a]=r.hyperplane,n[a]=r.offset,o[a][0]=a+1;var l=a,f=t(r.leftChild,e,n,o,s,a+1,h);return a=f.nodeNum,h=f.leafNum,o[l][1]=a+1,{nodeNum:(f=t(r.rightChild,e,n,o,s,a+1,h)).nodeNum,leafNum:f.leafNum}}(t,o,h,u,l,0,0),new a(o,h,u,l)}(t,o)})},r.makeLeafArray=function(t){var r,e;if(t.length>0){var n=[];try{for(var s=o(t),a=s.next();!a.done;a=s.next()){var h=a.value;n.push.apply(n,i(h.indices))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(r)throw r.error}}return n}return[[-1]]}},function(t,r,e){"use strict";var n=e(9);function i(t,r,e){var n=0;const i=e(r);for(var o=0;o<t.x.length;o++)n+=Math.abs(t.y[o]-i(t.x[o]));return n}function o(t,r,e,i,o){var s=n.Matrix.eye(r.length).mul(e*i*i),a=t.x.length,h=new Array(a);const u=o(r);for(var l=0;l<a;l++)h[l]=u(t.x[l]);var f=function(t,r,e,i,o){const s=e.length,a=t.x.length;for(var h=new Array(s),u=0;u<s;u++){h[u]=new Array(a);var l=e.concat();l[u]+=i;for(var f=o(l),c=0;c<a;c++)h[u][c]=r[c]-f(t.x[c])}return new n.Matrix(h)}(t,h,r,i,o),c=function(t,r){const e=t.x.length;for(var i=new Array(e),o=0;o<e;o++)i[o]=t.y[o]-r[o];return new n.Matrix([i])}(t,h).transposeView(),m=n.inverse(s.add(f.mmul(f.transposeView())));return(r=(r=new n.Matrix([r])).sub(m.mmul(f).mmul(c).mul(i).transposeView())).to1DArray()}t.exports=function(t,r,e={}){let{maxIterations:n=100,gradientDifference:s=.1,damping:a=0,errorTolerance:h=.01,initialValues:u}=e;if(a<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!Array.isArray(t.x)||t.x.length<2||!Array.isArray(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");var l=u||new Array(r.length).fill(1);if(!Array.isArray(l))throw new Error("initialValues must be an array");for(var f=i(t,l,r),c=f<=h,m=0;m<n&&!c;m++)c=(f=i(t,l=o(t,l,a,s,r),r))<=h;return{parameterValues:l,parameterError:f,iterations:m}}},function(t,r,e){"use strict";e.r(r);var n=e(0),i=e.n(n);var o=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r};var s=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r};var a=function(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==e.output){if(!i()(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(t.length);var n=s(t),a=o(t);if(n===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var h=e.min,u=void 0===h?e.autoMinMax?n:0:h,l=e.max,f=void 0===l?e.autoMinMax?a:1:l;if(u>=f)throw new RangeError("min option must be smaller than max option");for(var c=(f-u)/(a-n),m=0;m<t.length;m++)r[m]=(t[m]-n)*c+u;return r};class h{constructor(t){var r,e,n,i,o,s,a,h,u,l=(t=P.checkMatrix(t)).clone(),f=l.rows,c=l.columns,m=new Array(f),g=1;for(r=0;r<f;r++)m[r]=r;for(h=new Array(f),e=0;e<c;e++){for(r=0;r<f;r++)h[r]=l.get(r,e);for(r=0;r<f;r++){for(u=Math.min(r,e),o=0,n=0;n<u;n++)o+=l.get(r,n)*h[n];h[r]-=o,l.set(r,e,h[r])}for(i=e,r=e+1;r<f;r++)Math.abs(h[r])>Math.abs(h[i])&&(i=r);if(i!==e){for(n=0;n<c;n++)s=l.get(i,n),l.set(i,n,l.get(e,n)),l.set(e,n,s);a=m[i],m[i]=m[e],m[e]=a,g=-g}if(e<f&&0!==l.get(e,e))for(r=e+1;r<f;r++)l.set(r,e,l.get(r,e)/l.get(e,e))}this.LU=l,this.pivotVector=m,this.pivotSign=g}isSingular(){for(var t=this.LU,r=t.columns,e=0;e<r;e++)if(0===t[e][e])return!0;return!1}solve(t){t=I.checkMatrix(t);var r=this.LU;if(r.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var e,n,i,o=t.columns,s=t.subMatrixRow(this.pivotVector,0,o-1),a=r.columns;for(i=0;i<a;i++)for(e=i+1;e<a;e++)for(n=0;n<o;n++)s[e][n]-=s[i][n]*r[e][i];for(i=a-1;i>=0;i--){for(n=0;n<o;n++)s[i][n]/=r[i][i];for(e=0;e<i;e++)for(n=0;n<o;n++)s[e][n]-=s[i][n]*r[e][i]}return s}get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var r=this.pivotSign,e=t.columns,n=0;n<e;n++)r*=t[n][n];return r}get lowerTriangularMatrix(){for(var t=this.LU,r=t.rows,e=t.columns,n=new I(r,e),i=0;i<r;i++)for(var o=0;o<e;o++)n[i][o]=i>o?t[i][o]:i===o?1:0;return n}get upperTriangularMatrix(){for(var t=this.LU,r=t.rows,e=t.columns,n=new I(r,e),i=0;i<r;i++)for(var o=0;o<e;o++)n[i][o]=i<=o?t[i][o]:0;return n}get pivotPermutationVector(){return this.pivotVector.slice()}}function u(t,r){var e=0;return Math.abs(t)>Math.abs(r)?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0!==r?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):0}function l(t,r,e){for(var n=new Array(t),i=0;i<t;i++){n[i]=new Array(r);for(var o=0;o<r;o++)n[i][o]=e}return n}class f{constructor(t,r={}){var e=(t=P.checkMatrix(t)).rows,n=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=r;var a,h=Boolean(i),f=Boolean(o),c=!1;if(e<n)if(s){e=(a=t.transpose()).rows,n=a.columns,c=!0;var m=h;h=f,f=m}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();var g=Math.min(e,n),v=Math.min(e+1,n),p=new Array(v),w=l(e,g,0),d=l(n,n,0),y=new Array(n),b=new Array(e),M=new Array(v);for(let t=0;t<v;t++)M[t]=t;var x=Math.min(e-1,n),S=Math.max(0,Math.min(n-2,e)),E=Math.max(x,S);for(let t=0;t<E;t++){if(t<x){p[t]=0;for(let r=t;r<e;r++)p[t]=u(p[t],a[r][t]);if(0!==p[t]){a[t][t]<0&&(p[t]=-p[t]);for(let r=t;r<e;r++)a[r][t]/=p[t];a[t][t]+=1}p[t]=-p[t]}for(let r=t+1;r<n;r++){if(t<x&&0!==p[t]){let n=0;for(let i=t;i<e;i++)n+=a[i][t]*a[i][r];n=-n/a[t][t];for(let i=t;i<e;i++)a[i][r]+=n*a[i][t]}y[r]=a[t][r]}if(h&&t<x)for(let r=t;r<e;r++)w[r][t]=a[r][t];if(t<S){y[t]=0;for(let r=t+1;r<n;r++)y[t]=u(y[t],y[r]);if(0!==y[t]){y[t+1]<0&&(y[t]=0-y[t]);for(let r=t+1;r<n;r++)y[r]/=y[t];y[t+1]+=1}if(y[t]=-y[t],t+1<e&&0!==y[t]){for(let r=t+1;r<e;r++)b[r]=0;for(let r=t+1;r<e;r++)for(let e=t+1;e<n;e++)b[r]+=y[e]*a[r][e];for(let r=t+1;r<n;r++){let n=-y[r]/y[t+1];for(let i=t+1;i<e;i++)a[i][r]+=n*b[i]}}if(f)for(let r=t+1;r<n;r++)d[r][t]=y[r]}}let R=Math.min(n,e+1);if(x<n&&(p[x]=a[x][x]),e<R&&(p[R-1]=0),S+1<R&&(y[S]=a[S][R-1]),y[R-1]=0,h){for(let t=x;t<g;t++){for(let r=0;r<e;r++)w[r][t]=0;w[t][t]=1}for(let t=x-1;t>=0;t--)if(0!==p[t]){for(let r=t+1;r<g;r++){let n=0;for(let i=t;i<e;i++)n+=w[i][t]*w[i][r];n=-n/w[t][t];for(let i=t;i<e;i++)w[i][r]+=n*w[i][t]}for(let r=t;r<e;r++)w[r][t]=-w[r][t];w[t][t]=1+w[t][t];for(let r=0;r<t-1;r++)w[r][t]=0}else{for(let r=0;r<e;r++)w[r][t]=0;w[t][t]=1}}if(f)for(let t=n-1;t>=0;t--){if(t<S&&0!==y[t])for(let r=t+1;r<n;r++){let e=0;for(let i=t+1;i<n;i++)e+=d[i][t]*d[i][r];e=-e/d[t+1][t];for(let i=t+1;i<n;i++)d[i][r]+=e*d[i][t]}for(let r=0;r<n;r++)d[r][t]=0;d[t][t]=1}for(var k=R-1,A=Number.EPSILON;R>0;){let t,r;for(t=R-2;t>=-1&&-1!==t;t--){const r=Number.MIN_VALUE+A*Math.abs(p[t]+Math.abs(p[t+1]));if(Math.abs(y[t])<=r||Number.isNaN(y[t])){y[t]=0;break}}if(t===R-2)r=4;else{let e;for(e=R-1;e>=t&&e!==t;e--){let r=(e!==R?Math.abs(y[e]):0)+(e!==t+1?Math.abs(y[e-1]):0);if(Math.abs(p[e])<=A*r){p[e]=0;break}}e===t?r=3:e===R-1?r=1:(r=2,t=e)}switch(t++,r){case 1:{let r=y[R-2];y[R-2]=0;for(let e=R-2;e>=t;e--){let i=u(p[e],r),o=p[e]/i,s=r/i;if(p[e]=i,e!==t&&(r=-s*y[e-1],y[e-1]=o*y[e-1]),f)for(let t=0;t<n;t++)i=o*d[t][e]+s*d[t][R-1],d[t][R-1]=-s*d[t][e]+o*d[t][R-1],d[t][e]=i}break}case 2:{let r=y[t-1];y[t-1]=0;for(let n=t;n<R;n++){let i=u(p[n],r),o=p[n]/i,s=r/i;if(p[n]=i,r=-s*y[n],y[n]=o*y[n],h)for(let r=0;r<e;r++)i=o*w[r][n]+s*w[r][t-1],w[r][t-1]=-s*w[r][n]+o*w[r][t-1],w[r][n]=i}break}case 3:{const r=Math.max(Math.abs(p[R-1]),Math.abs(p[R-2]),Math.abs(y[R-2]),Math.abs(p[t]),Math.abs(y[t])),i=p[R-1]/r,o=p[R-2]/r,s=y[R-2]/r,a=p[t]/r,l=y[t]/r,c=((o+i)*(o-i)+s*s)/2,m=i*s*(i*s);let g=0;0===c&&0===m||(g=m/(c+(g=c<0?0-Math.sqrt(c*c+m):Math.sqrt(c*c+m))));let v=(a+i)*(a-i)+g,b=a*l;for(let r=t;r<R-1;r++){let i=u(v,b);0===i&&(i=Number.MIN_VALUE);let o=v/i,s=b/i;if(r!==t&&(y[r-1]=i),v=o*p[r]+s*y[r],y[r]=o*y[r]-s*p[r],b=s*p[r+1],p[r+1]=o*p[r+1],f)for(let t=0;t<n;t++)i=o*d[t][r]+s*d[t][r+1],d[t][r+1]=-s*d[t][r]+o*d[t][r+1],d[t][r]=i;if(0===(i=u(v,b))&&(i=Number.MIN_VALUE),o=v/i,s=b/i,p[r]=i,v=o*y[r]+s*p[r+1],p[r+1]=-s*y[r]+o*p[r+1],b=s*y[r+1],y[r+1]=o*y[r+1],h&&r<e-1)for(let t=0;t<e;t++)i=o*w[t][r]+s*w[t][r+1],w[t][r+1]=-s*w[t][r]+o*w[t][r+1],w[t][r]=i}y[R-2]=v,1;break}case 4:if(p[t]<=0&&(p[t]=p[t]<0?-p[t]:0,f))for(let r=0;r<=k;r++)d[r][t]=-d[r][t];for(;t<k&&!(p[t]>=p[t+1]);){let r=p[t];if(p[t]=p[t+1],p[t+1]=r,f&&t<n-1)for(let e=0;e<n;e++)r=d[e][t+1],d[e][t+1]=d[e][t],d[e][t]=r;if(h&&t<e-1)for(let n=0;n<e;n++)r=w[n][t+1],w[n][t+1]=w[n][t],w[n][t]=r;t++}0,R--}}if(c){var N=d;d=w,w=N}this.m=e,this.n=n,this.s=p,this.U=w,this.V=d}solve(t){var r=t,e=this.threshold,n=this.s.length,i=I.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=e?i[t][t]=0:i[t][t]=1/this.s[t];var o=this.U,s=this.rightSingularVectors,a=s.mmul(i),h=s.rows,u=o.length,l=I.zeros(h,u);for(let t=0;t<h;t++)for(let r=0;r<u;r++){let e=0;for(let i=0;i<n;i++)e+=a[t][i]*o[r][i];l[t][r]=e}return l.mmul(r)}solveForDiagonal(t){return this.solve(I.diag(t))}inverse(){var t=this.V,r=this.threshold,e=t.length,n=t[0].length,i=new I(e,this.s.length);for(let o=0;o<e;o++)for(let e=0;e<n;e++)Math.abs(this.s[e])>r?i[o][e]=t[o][e]/this.s[e]:i[o][e]=0;var o=this.U,s=o.length,a=o[0].length,h=new I(e,s);for(let t=0;t<e;t++)for(let r=0;r<s;r++){let e=0;for(let n=0;n<a;n++)e+=i[t][n]*o[r][n];h[t][r]=e}return h}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,e=this.s,n=0,i=e.length;n<i;n++)e[n]>t&&r++;return r}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return I.isMatrix(this.U)||(this.U=new I(this.U)),this.U}get rightSingularVectors(){return I.isMatrix(this.V)||(this.V=new I(this.V)),this.V}get diagonalMatrix(){return I.diag(this.s)}}function c(t,r,e){var n=e?t.rows:t.rows-1;if(r<0||r>n)throw new RangeError("Row index out of range")}function m(t,r,e){var n=e?t.columns:t.columns-1;if(r<0||r>n)throw new RangeError("Column index out of range")}function g(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function v(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function p(t,r,e){return{row:w(t,r),column:d(t,e)}}function w(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for row indices");if(r.some(r=>r<0||r>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function d(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for column indices");if(r.some(r=>r<0||r>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function y(t,r,e,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(b("startRow",r),b("endRow",e),b("startColumn",n),b("endColumn",i),r>e||n>i||r<0||r>=t.rows||e<0||e>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function b(t,r){if("number"!=typeof r)throw new TypeError(`${t} must be a number`)}class M extends(C()){constructor(t,r,e){super(),this.matrix=t,this.rows=r,this.columns=e}static get[Symbol.species](){return I}}class x extends M{constructor(t){super(t,t.columns,t.rows)}set(t,r,e){return this.matrix.set(r,t,e),this}get(t,r){return this.matrix.get(r,t)}}class S extends M{constructor(t,r){super(t,1,t.columns),this.row=r}set(t,r,e){return this.matrix.set(this.row,r,e),this}get(t,r){return this.matrix.get(this.row,r)}}class E extends M{constructor(t,r,e,n,i){y(t,r,e,n,i),super(t,e-r+1,i-n+1),this.startRow=r,this.startColumn=n}set(t,r,e){return this.matrix.set(this.startRow+t,this.startColumn+r,e),this}get(t,r){return this.matrix.get(this.startRow+t,this.startColumn+r)}}class R extends M{constructor(t,r,e){var n=p(t,r,e);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,r,e){return this.matrix.set(this.rowIndices[t],this.columnIndices[r],e),this}get(t,r){return this.matrix.get(this.rowIndices[t],this.columnIndices[r])}}class k extends M{constructor(t,r){super(t,(r=w(t,r)).length,t.columns),this.rowIndices=r}set(t,r,e){return this.matrix.set(this.rowIndices[t],r,e),this}get(t,r){return this.matrix.get(this.rowIndices[t],r)}}class A extends M{constructor(t,r){r=d(t,r),super(t,t.rows,r.length),this.columnIndices=r}set(t,r,e){return this.matrix.set(t,this.columnIndices[r],e),this}get(t,r){return this.matrix.get(t,this.columnIndices[r])}}class N extends M{constructor(t,r){super(t,t.rows,1),this.column=r}set(t,r,e){return this.matrix.set(t,this.column,e),this}get(t){return this.matrix.get(t,this.column)}}class V extends M{constructor(t){super(t,t.rows,t.columns)}set(t,r,e){return this.matrix.set(this.rows-t-1,r,e),this}get(t,r){return this.matrix.get(this.rows-t-1,r)}}class z extends M{constructor(t){super(t,t.rows,t.columns)}set(t,r,e){return this.matrix.set(t,this.columns-r-1,e),this}get(t,r){return this.matrix.get(t,this.columns-r-1)}}function C(t){void 0===t&&(t=Object);class r extends t{static get[Symbol.species](){return this}static from1DArray(t,r,e){if(t*r!==e.length)throw new RangeError("Data length does not match given dimensions");for(var n=new this(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)n.set(i,o,e[i*r+o]);return n}static rowVector(t){for(var r=new this(1,t.length),e=0;e<t.length;e++)r.set(0,e,t[e]);return r}static columnVector(t){for(var r=new this(t.length,1),e=0;e<t.length;e++)r.set(e,0,t[e]);return r}static empty(t,r){return new this(t,r)}static zeros(t,r){return this.empty(t,r).fill(0)}static ones(t,r){return this.empty(t,r).fill(1)}static rand(t,r,e){void 0===e&&(e=Math.random);for(var n=this.empty(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)n.set(i,o,e());return n}static randInt(t,r,e,n){void 0===e&&(e=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,r),o=0;o<t;o++)for(var s=0;s<r;s++){var a=Math.floor(n()*e);i.set(o,s,a)}return i}static eye(t,r,e){void 0===r&&(r=t),void 0===e&&(e=1);for(var n=Math.min(t,r),i=this.zeros(t,r),o=0;o<n;o++)i.set(o,o,e);return i}static diag(t,r,e){var n=t.length;void 0===r&&(r=n),void 0===e&&(e=r);for(var i=Math.min(n,r,e),o=this.zeros(r,e),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,n=t.columns,i=new this(e,n),o=0;o<e;o++)for(var s=0;s<n;s++)i.set(o,s,Math.min(t.get(o,s),r.get(o,s)));return i}static max(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,n=t.columns,i=new this(e,n),o=0;o<e;o++)for(var s=0;s<n;s++)i.set(o,s,Math.max(t.get(o,s),r.get(o,s)));return i}static checkMatrix(t){return r.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=this.rows,e=this.columns,n=0;n<r;n++)for(var i=0;i<e;i++)t.call(this,n,i);return this}to1DArray(){for(var t=new Array(this.size),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t[r*this.columns+e]=this.get(r,e);return t}to2DArray(){for(var t=new Array(this.rows),r=0;r<this.rows;r++){t[r]=new Array(this.columns);for(var e=0;e<this.columns;e++)t[r][e]=this.get(r,e)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}set(t,r,e){throw new Error("set method is unimplemented")}get(t,r){throw new Error("get method is unimplemented")}repeat(t,r){t=t||1,r=r||1;for(var e=new this.constructor[Symbol.species](this.rows*t,this.columns*r),n=0;n<t;n++)for(var i=0;i<r;i++)e.setSubMatrix(this,this.rows*n,this.columns*i);return e}fill(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,t);return this}neg(){return this.mulS(-1)}getRow(t){c(this,t);for(var r=new Array(this.columns),e=0;e<this.columns;e++)r[e]=this.get(t,e);return r}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,r){c(this,t),r=g(this,r);for(var e=0;e<this.columns;e++)this.set(t,e,r[e]);return this}swapRows(t,r){c(this,t),c(this,r);for(var e=0;e<this.columns;e++){var n=this.get(t,e);this.set(t,e,this.get(r,e)),this.set(r,e,n)}return this}getColumn(t){m(this,t);for(var r=new Array(this.rows),e=0;e<this.rows;e++)r[e]=this.get(e,t);return r}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,r){m(this,t),r=v(this,r);for(var e=0;e<this.rows;e++)this.set(e,t,r[e]);return this}swapColumns(t,r){m(this,t),m(this,r);for(var e=0;e<this.rows;e++){var n=this.get(e,t);this.set(e,t,this.get(e,r)),this.set(e,r,n)}return this}addRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[e]);return this}subRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[e]);return this}mulRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[e]);return this}divRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[e]);return this}addColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[r]);return this}subColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[r]);return this}mulColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[r]);return this}divColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[r]);return this}mulRow(t,r){c(this,t);for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)*r);return this}mulColumn(t,r){m(this,t);for(var e=0;e<this.rows;e++)this.set(e,t,this.get(e,t)*r);return this}max(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.get(r,e)>t&&(t=this.get(r,e));return t}maxIndex(){for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n),r[0]=e,r[1]=n);return r}min(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.get(r,e)<t&&(t=this.get(r,e));return t}minIndex(){for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n),r[0]=e,r[1]=n);return r}maxRow(t){c(this,t);for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)>r&&(r=this.get(t,e));return r}maxRowIndex(t){c(this,t);for(var r=this.get(t,0),e=[t,0],n=1;n<this.columns;n++)this.get(t,n)>r&&(r=this.get(t,n),e[1]=n);return e}minRow(t){c(this,t);for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)<r&&(r=this.get(t,e));return r}minRowIndex(t){c(this,t);for(var r=this.get(t,0),e=[t,0],n=1;n<this.columns;n++)this.get(t,n)<r&&(r=this.get(t,n),e[1]=n);return e}maxColumn(t){m(this,t);for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)>r&&(r=this.get(e,t));return r}maxColumnIndex(t){m(this,t);for(var r=this.get(0,t),e=[0,t],n=1;n<this.rows;n++)this.get(n,t)>r&&(r=this.get(n,t),e[0]=n);return e}minColumn(t){m(this,t);for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)<r&&(r=this.get(e,t));return r}minColumnIndex(t){m(this,t);for(var r=this.get(0,t),e=[0,t],n=1;n<this.rows;n++)this.get(n,t)<r&&(r=this.get(n,t),e[0]=n);return e}diag(){for(var t=Math.min(this.rows,this.columns),r=new Array(t),e=0;e<t;e++)r[e]=this.get(e,e);return r}sum(t){switch(t){case"row":return function(t){for(var r=I.zeros(t.rows,1),e=0;e<t.rows;++e)for(var n=0;n<t.columns;++n)r.set(e,0,r.get(e,0)+t.get(e,n));return r}(this);case"column":return function(t){for(var r=I.zeros(1,t.columns),e=0;e<t.rows;++e)for(var n=0;n<t.columns;++n)r.set(0,n,r.get(0,n)+t.get(e,n));return r}(this);default:return function(t){for(var r=0,e=0;e<t.rows;e++)for(var n=0;n<t.columns;n++)r+=t.get(e,n);return r}(this)}}mean(){return this.sum()/this.size}prod(){for(var t=1,r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t*=this.get(r,e);return t}norm(t="frobenius"){var r=0;if("max"===t)return this.max();if("frobenius"===t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)r+=this.get(e,n)*this.get(e,n);return Math.sqrt(r)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){for(var t=0,r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t+=this.get(r,e),this.set(r,e,t);return this}dot(t){r.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var r=this.rows,e=this.columns,n=t.columns,i=new this.constructor[Symbol.species](r,n),o=new Array(e),s=0;s<n;s++){for(var a=0;a<e;a++)o[a]=t.get(a,s);for(var h=0;h<r;h++){var u=0;for(a=0;a<e;a++)u+=this.get(h,a)*o[a];i.set(h,s,u)}}return i}strassen2x2(t){var r=new this.constructor[Symbol.species](2,2);const e=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),h=this.get(1,1),u=t.get(1,1),l=(e+h)*(n+u),f=(s+h)*n,c=e*(o-u),m=h*(a-n),g=(e+i)*u,v=l+m-g+(i-h)*(a+u),p=c+g,w=f+m,d=l-f+c+(s-e)*(n+o);return r.set(0,0,v),r.set(0,1,p),r.set(1,0,w),r.set(1,1,d),r}strassen3x3(t){var r=new this.constructor[Symbol.species](3,3);const e=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),h=this.get(2,0),u=this.get(2,1),l=this.get(2,2),f=t.get(0,0),c=t.get(0,1),m=t.get(0,2),g=t.get(1,0),v=t.get(1,1),p=t.get(1,2),w=t.get(2,0),d=t.get(2,1),y=t.get(2,2),b=(e-o)*(-c+v),M=(-e+o+s)*(f-c+v),x=(o+s)*(-f+c),S=e*f,E=(-e+h+u)*(f-m+p),R=(-e+h)*(m-p),k=(h+u)*(-f+m),A=(-i+u+l)*(v+w-d),N=(i-l)*(v-d),V=i*w,z=(u+l)*(-w+d),C=(-i+s+a)*(p+w-y),I=(i-a)*(p-y),j=(s+a)*(-w+y),P=S+V+n*g,D=(e+n+i-o-s-u-l)*v+M+x+S+A+V+z,_=S+E+k+(e+n+i-s-a-h-u)*p+V+C+j,L=b+s*(-f+c+g-v-p-w+y)+M+S+V+C+I,O=b+M+x+S+a*d,q=V+C+I+j+o*m,T=S+E+R+u*(-f+m+g-v-p-w+d)+A+N+V,U=A+N+V+z+h*c,$=S+E+R+k+l*y;return r.set(0,0,P),r.set(0,1,D),r.set(0,2,_),r.set(1,0,L),r.set(1,1,O),r.set(1,2,q),r.set(2,0,T),r.set(2,1,U),r.set(2,2,$),r}mmulStrassen(t){var e=this.clone(),n=e.rows,i=e.columns,o=t.rows,s=t.columns;function a(t,e,n){var i=t.rows,o=t.columns;if(i===e&&o===n)return t;var s=r.zeros(e,n);return s=s.setSubMatrix(t,0,0)}i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var h=Math.max(n,o),u=Math.max(i,s);return function t(e,n,i,o){if(i<=512||o<=512)return e.mmul(n);i%2==1&&o%2==1?(e=a(e,i+1,o+1),n=a(n,i+1,o+1)):i%2==1?(e=a(e,i+1,o),n=a(n,i+1,o)):o%2==1&&(e=a(e,i,o+1),n=a(n,i,o+1));var s=parseInt(e.rows/2,10),h=parseInt(e.columns/2,10),u=e.subMatrix(0,s-1,0,h-1),l=n.subMatrix(0,s-1,0,h-1),f=e.subMatrix(0,s-1,h,e.columns-1),c=n.subMatrix(0,s-1,h,n.columns-1),m=e.subMatrix(s,e.rows-1,0,h-1),g=n.subMatrix(s,n.rows-1,0,h-1),v=e.subMatrix(s,e.rows-1,h,e.columns-1),p=n.subMatrix(s,n.rows-1,h,n.columns-1),w=t(r.add(u,v),r.add(l,p),s,h),d=t(r.add(m,v),l,s,h),y=t(u,r.sub(c,p),s,h),b=t(v,r.sub(g,l),s,h),M=t(r.add(u,f),p,s,h),x=t(r.sub(m,u),r.add(l,c),s,h),S=t(r.sub(f,v),r.add(g,p),s,h),E=r.add(w,b);E.sub(M),E.add(S);var R=r.add(y,M),k=r.add(d,b),A=r.sub(w,d);A.add(y),A.add(x);var N=r.zeros(2*E.rows,2*E.columns);return(N=(N=(N=(N=N.setSubMatrix(E,0,0)).setSubMatrix(R,E.rows,0)).setSubMatrix(k,0,E.columns)).setSubMatrix(A,E.rows,E.columns)).subMatrix(0,i-1,0,o-1)}(e=a(e,h,u),t=a(t,h,u),h,u)}scaleRows(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),n=0;n<this.rows;n++){var i=a(this.getRow(n),{min:t,max:r});e.setRow(n,i)}return e}scaleColumns(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),n=0;n<this.columns;n++){var i=a(this.getColumn(n),{min:t,max:r});e.setColumn(n,i)}return e}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var r=this.rows,e=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](r*n,e*i),s=0;s<r;s++)for(var a=0;a<e;a++)for(var h=0;h<n;h++)for(var u=0;u<i;u++)o[n*s+h][i*a+u]=this.get(s,a)*t.get(h,u);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(e,r,this.get(r,e));return t}sortRows(t){void 0===t&&(t=e);for(var r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}sortColumns(t){void 0===t&&(t=e);for(var r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}subMatrix(t,r,e,n){y(this,t,r,e,n);for(var i=new this.constructor[Symbol.species](r-t+1,n-e+1),o=t;o<=r;o++)for(var s=e;s<=n;s++)i[o-t][s-e]=this.get(o,s);return i}subMatrixRow(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.columns-1),r>e||r<0||r>=this.columns||e<0||e>=this.columns)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](t.length,e-r+1),i=0;i<t.length;i++)for(var o=r;o<=e;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);n.set(i,o-r,this.get(t[i],o))}return n}subMatrixColumn(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.rows-1),r>e||r<0||r>=this.rows||e<0||e>=this.rows)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](e-r+1,t.length),i=0;i<t.length;i++)for(var o=r;o<=e;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);n.set(o-r,i,this.get(o,t[i]))}return n}setSubMatrix(t,r,e){y(this,r,r+(t=this.constructor.checkMatrix(t)).rows-1,e,e+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[r+n][e+i]=t.get(n,i);return this}selection(t,r){for(var e=p(this,t,r),n=new this.constructor[Symbol.species](t.length,r.length),i=0;i<e.row.length;i++)for(var o=e.row[i],s=0;s<e.column.length;s++){var a=e.column[s];n[i][s]=this.get(o,a)}return n}trace(){for(var t=Math.min(this.rows,this.columns),r=0,e=0;e<t;e++)r+=this.get(e,e);return r}transposeView(){return new x(this)}rowView(t){return c(this,t),new S(this,t)}columnView(t){return m(this,t),new N(this,t)}flipRowView(){return new V(this)}flipColumnView(){return new z(this)}subMatrixView(t,r,e,n){return new E(this,t,r,e,n)}selectionView(t,r){return new R(this,t,r)}rowSelectionView(t){return new k(this,t)}columnSelectionView(t){return new A(this,t)}det(){var t,r,e,n,i,o;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),r=this.get(0,1),e=this.get(1,0),t*this.get(1,1)-r*e):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),o=this.selectionView([1,2],[0,1]),t=this.get(0,0),r=this.get(0,1),e=this.get(0,2),t*n.det()-r*i.det()+e*o.det()):new h(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=Number.EPSILON);for(var r=new f(this,{autoTranspose:!0}),e=r.leftSingularVectors,n=r.rightSingularVectors,i=r.diagonal,o=0;o<i.length;o++)Math.abs(i[o])>t?i[o]=1/i[o]:i[o]=0;return i=this.constructor[Symbol.species].diag(i),n.mmul(i.mmul(e.transposeView()))}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(r,e,this.get(r,e));return t}}function e(t,r){return t-r}r.prototype.klass="Matrix",r.random=r.rand,r.diagonal=r.diag,r.prototype.diagonal=r.prototype.diag,r.identity=r.eye,r.prototype.negate=r.prototype.neg,r.prototype.tensorProduct=r.prototype.kroneckerProduct,r.prototype.determinant=r.prototype.det;var n,i="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",o=eval;for(var s of[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]]){var u=o(F("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",{name:s[1],op:s[0]})),l=o(F("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",{name:`${s[1]}S`,op:s[0]})),w=o(F("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",{name:`${s[1]}M`,op:s[0]})),d=o(F("\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",{name:s[1]}));for(n=1;n<s.length;n++)r.prototype[s[n]]=u,r.prototype[`${s[n]}S`]=l,r.prototype[`${s[n]}M`]=w,r[s[n]]=d}var b=[["~","not"]];for(var M of(["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){b.push([`Math.${t}`,t])}),b)){var C=o(F("\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",{name:M[1],method:M[0]})),j=o(F("\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",{name:M[1]}));for(n=1;n<M.length;n++)r.prototype[M[n]]=C,r[M[n]]=j}for(var P of[["Math.pow",1,"pow"]]){var D="arg0";for(n=1;n<P[1];n++)D+=`, arg${n}`;if(1!==P[1]){var _=o(F("\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",{name:P[2],method:P[0],args:D})),L=o(F(i,{name:P[2],args:D}));for(n=2;n<P.length;n++)r.prototype[P[n]]=_,r[P[n]]=L}else{var O={name:P[2],args:D,method:P[0]},q=o(F("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",O)),T=o(F("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",O)),U=o(F("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",O)),$=o(F("\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",O));for(n=2;n<P.length;n++)r.prototype[P[n]]=q,r.prototype[`${P[n]}M`]=U,r.prototype[`${P[n]}S`]=T,r[P[n]]=$}}function F(t,r){for(var e in r)t=t.replace(new RegExp(`%${e}%`,"g"),r[e]);return t}return r}class I extends(C(Array)){constructor(t,r){var e;if(1===arguments.length&&"number"==typeof t)return new Array(t);if(I.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>0){if(super(t),!(Number.isInteger(r)&&r>0))throw new TypeError("nColumns must be a positive integer");for(e=0;e<t;e++)this[e]=new Array(r)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,"number"!=typeof(r=n[0].length)||0===r)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),e=0;e<t;e++){if(n[e].length!==r)throw new RangeError("Inconsistent array dimensions");this[e]=[].concat(n[e])}}}return this.rows=t,this.columns=r,this}set(t,r,e){return this[t][r]=e,this}get(t,r){return this[t][r]}removeRow(t){if(c(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,r){return void 0===r&&(r=t,t=this.rows),c(this,t,!0),r=g(this,r),this.splice(t,0,r),this.rows+=1,this}removeColumn(t){if(m(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var r=0;r<this.rows;r++)this[r].splice(t,1);return this.columns-=1,this}addColumn(t,r){void 0===r&&(r=t,t=this.columns),m(this,t,!0),r=v(this,r);for(var e=0;e<this.rows;e++)this[e].splice(t,0,r[e]);return this.columns+=1,this}}class j extends(C()){constructor(t,r={}){const{rows:e=1}=r;if(t.length%e!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=e,this.columns=t.length/e,this.data=t}set(t,r,e){var n=this._calculateIndex(t,r);return this.data[n]=e,this}get(t,r){var e=this._calculateIndex(t,r);return this.data[e]}_calculateIndex(t,r){return t*this.columns+r}static get[Symbol.species](){return I}}class P extends(C()){constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,r,e){return this.data[t][r]=e,this}get(t,r){return this.data[t][r]}static get[Symbol.species](){return I}}function D(t,r){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new P(t):new j(t,r);throw new Error("the argument is not an array")}class _{constructor(t){var r,e,n,i,o=(t=P.checkMatrix(t)).clone(),s=t.rows,a=t.columns,h=new Array(a);for(n=0;n<a;n++){var l=0;for(r=n;r<s;r++)l=u(l,o.get(r,n));if(0!==l){for(o.get(n,n)<0&&(l=-l),r=n;r<s;r++)o.set(r,n,o.get(r,n)/l);for(o.set(n,n,o.get(n,n)+1),e=n+1;e<a;e++){for(i=0,r=n;r<s;r++)i+=o.get(r,n)*o.get(r,e);for(i=-i/o.get(n,n),r=n;r<s;r++)o.set(r,e,o.get(r,e)+i*o.get(r,n))}}h[n]=-l}this.QR=o,this.Rdiag=h}solve(t){t=I.checkMatrix(t);var r=this.QR,e=r.rows;if(t.rows!==e)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var n,i,o,s,a=t.columns,h=t.clone(),u=r.columns;for(o=0;o<u;o++)for(i=0;i<a;i++){for(s=0,n=o;n<e;n++)s+=r[n][o]*h[n][i];for(s=-s/r[o][o],n=o;n<e;n++)h[n][i]+=s*r[n][o]}for(o=u-1;o>=0;o--){for(i=0;i<a;i++)h[o][i]/=this.Rdiag[o];for(n=0;n<o;n++)for(i=0;i<a;i++)h[n][i]-=h[o][i]*r[n][o]}return h.subMatrix(0,u-1,0,a-1)}isFullRank(){for(var t=this.QR.columns,r=0;r<t;r++)if(0===this.Rdiag[r])return!1;return!0}get upperTriangularMatrix(){var t,r,e=this.QR,n=e.columns,i=new I(n,n);for(t=0;t<n;t++)for(r=0;r<n;r++)i[t][r]=t<r?e[t][r]:t===r?this.Rdiag[t]:0;return i}get orthogonalMatrix(){var t,r,e,n,i=this.QR,o=i.rows,s=i.columns,a=new I(o,s);for(e=s-1;e>=0;e--){for(t=0;t<o;t++)a[t][e]=0;for(a[e][e]=1,r=e;r<s;r++)if(0!==i[e][e]){for(n=0,t=e;t<o;t++)n+=i[t][e]*a[t][r];for(n=-n/i[e][e],t=e;t<o;t++)a[t][r]+=n*i[t][e]}}return a}}function L(t,r=!1){return t=P.checkMatrix(t),r?new f(t).inverse():O(t,I.eye(t.rows))}function O(t,r,e=!1){return t=P.checkMatrix(t),r=P.checkMatrix(r),e?new f(t).solve(r):t.isSquare()?new h(t).solve(r):new _(t).solve(r)}function q(t,r){for(var e=[],n=0;n<t;n++)n!==r&&e.push(n);return e}function T(t,r,e,n=1e-9,i=1e-9){if(t>i)return new Array(r.rows+1).fill(0);for(var o=r.addRow(e,[0]),s=0;s<o.rows;s++)Math.abs(o.get(s,0))<n&&o.set(s,0,0);return o.to1DArray()}function U(t,r={}){const{thresholdValue:e=1e-9,thresholdError:n=1e-9}=r;for(var i=t.rows,s=new I(i,i),a=0;a<i;a++){var h=I.columnVector(t.getRow(a)),u=t.subMatrixRow(q(i,a)).transposeView(),l=new f(u).solve(h),c=o(I.sub(h,u.mmul(l)).abs().to1DArray());s.setRow(a,T(c,l,a,e,n))}return s}class ${constructor(t,r={}){const{assumeSymmetric:e=!1}=r;if(!(t=P.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,i,o=t.columns,s=l(o,o,0),a=new Array(o),h=new Array(o),f=t;if(!!e||t.isSymmetric()){for(n=0;n<o;n++)for(i=0;i<o;i++)s[n][i]=f.get(n,i);!function(t,r,e,n){var i,o,s,a,h,u,l,f;for(h=0;h<t;h++)e[h]=n[t-1][h];for(a=t-1;a>0;a--){for(f=0,s=0,u=0;u<a;u++)f+=Math.abs(e[u]);if(0===f)for(r[a]=e[a-1],h=0;h<a;h++)e[h]=n[a-1][h],n[a][h]=0,n[h][a]=0;else{for(u=0;u<a;u++)e[u]/=f,s+=e[u]*e[u];for(i=e[a-1],o=Math.sqrt(s),i>0&&(o=-o),r[a]=f*o,s-=i*o,e[a-1]=i-o,h=0;h<a;h++)r[h]=0;for(h=0;h<a;h++){for(i=e[h],n[h][a]=i,o=r[h]+n[h][h]*i,u=h+1;u<=a-1;u++)o+=n[u][h]*e[u],r[u]+=n[u][h]*i;r[h]=o}for(i=0,h=0;h<a;h++)r[h]/=s,i+=r[h]*e[h];for(l=i/(s+s),h=0;h<a;h++)r[h]-=l*e[h];for(h=0;h<a;h++){for(i=e[h],o=r[h],u=h;u<=a-1;u++)n[u][h]-=i*r[u]+o*e[u];e[h]=n[a-1][h],n[a][h]=0}}e[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=e[a+1])){for(u=0;u<=a;u++)e[u]=n[u][a+1]/s;for(h=0;h<=a;h++){for(o=0,u=0;u<=a;u++)o+=n[u][a+1]*n[u][h];for(u=0;u<=a;u++)n[u][h]-=o*e[u]}}for(u=0;u<=a;u++)n[u][a+1]=0}for(h=0;h<t;h++)e[h]=n[t-1][h],n[t-1][h]=0;n[t-1][t-1]=1,r[0]=0}(o,h,a,s),function(t,r,e,n){var i,o,s,a,h,l,f,c,m,g,v,p,w,d,y,b;for(s=1;s<t;s++)r[s-1]=r[s];r[t-1]=0;var M=0,x=0,S=Number.EPSILON;for(l=0;l<t;l++){for(x=Math.max(x,Math.abs(e[l])+Math.abs(r[l])),f=l;f<t&&!(Math.abs(r[f])<=S*x);)f++;if(f>l){0;do{for(1,i=e[l],c=(e[l+1]-i)/(2*r[l]),m=u(c,1),c<0&&(m=-m),e[l]=r[l]/(c+m),e[l+1]=r[l]*(c+m),g=e[l+1],o=i-e[l],s=l+2;s<t;s++)e[s]-=o;for(M+=o,c=e[f],p=v=1,w=v,d=r[l+1],y=0,b=0,s=f-1;s>=l;s--)for(w=p,p=v,b=y,i=v*r[s],o=v*c,m=u(c,r[s]),r[s+1]=y*m,y=r[s]/m,c=(v=c/m)*e[s]-y*i,e[s+1]=o+y*(v*i+y*e[s]),h=0;h<t;h++)o=n[h][s+1],n[h][s+1]=y*n[h][s]+v*o,n[h][s]=v*n[h][s]-y*o;c=-y*b*w*d*r[l]/g,r[l]=y*c,e[l]=v*c}while(Math.abs(r[l])>S*x)}e[l]=e[l]+M,r[l]=0}for(s=0;s<t-1;s++){for(h=s,c=e[s],a=s+1;a<t;a++)e[a]<c&&(h=a,c=e[a]);if(h!==s)for(e[h]=e[s],e[s]=c,a=0;a<t;a++)c=n[a][s],n[a][s]=n[a][h],n[a][h]=c}}(o,h,a,s)}else{var c=l(o,o,0),m=new Array(o);for(i=0;i<o;i++)for(n=0;n<o;n++)c[n][i]=f.get(n,i);!function(t,r,e,n){var i,o,s,a,h,u,l,f=t-1;for(u=1;u<=f-1;u++){for(l=0,a=u;a<=f;a++)l+=Math.abs(r[a][u-1]);if(0!==l){for(s=0,a=f;a>=u;a--)e[a]=r[a][u-1]/l,s+=e[a]*e[a];for(o=Math.sqrt(s),e[u]>0&&(o=-o),s-=e[u]*o,e[u]=e[u]-o,h=u;h<t;h++){for(i=0,a=f;a>=u;a--)i+=e[a]*r[a][h];for(i/=s,a=u;a<=f;a++)r[a][h]-=i*e[a]}for(a=0;a<=f;a++){for(i=0,h=f;h>=u;h--)i+=e[h]*r[a][h];for(i/=s,h=u;h<=f;h++)r[a][h]-=i*e[h]}e[u]=l*e[u],r[u][u-1]=l*o}}for(a=0;a<t;a++)for(h=0;h<t;h++)n[a][h]=a===h?1:0;for(u=f-1;u>=1;u--)if(0!==r[u][u-1]){for(a=u+1;a<=f;a++)e[a]=r[a][u-1];for(h=u;h<=f;h++){for(o=0,a=u;a<=f;a++)o+=e[a]*n[a][h];for(o=o/e[u]/r[u][u-1],a=u;a<=f;a++)n[a][h]+=o*e[a]}}}(o,c,m,s),function(t,r,e,n,i){var o,s,a,h,u,l,f,c,m,g,v,p,w,d,y,b=t-1,M=t-1,x=Number.EPSILON,S=0,E=0,R=0,k=0,A=0,N=0,V=0,z=0;for(o=0;o<t;o++)for((o<0||o>M)&&(e[o]=i[o][o],r[o]=0),s=Math.max(o-1,0);s<t;s++)E+=Math.abs(i[o][s]);for(;b>=0;){for(h=b;h>0&&(0===(N=Math.abs(i[h-1][h-1])+Math.abs(i[h][h]))&&(N=E),!(Math.abs(i[h][h-1])<x*N));)h--;if(h===b)i[b][b]=i[b][b]+S,e[b]=i[b][b],r[b]=0,b--,z=0;else if(h===b-1){if(f=i[b][b-1]*i[b-1][b],R=(i[b-1][b-1]-i[b][b])/2,k=R*R+f,V=Math.sqrt(Math.abs(k)),i[b][b]=i[b][b]+S,i[b-1][b-1]=i[b-1][b-1]+S,c=i[b][b],k>=0){for(V=R>=0?R+V:R-V,e[b-1]=c+V,e[b]=e[b-1],0!==V&&(e[b]=c-f/V),r[b-1]=0,r[b]=0,c=i[b][b-1],N=Math.abs(c)+Math.abs(V),R=c/N,k=V/N,A=Math.sqrt(R*R+k*k),R/=A,k/=A,s=b-1;s<t;s++)V=i[b-1][s],i[b-1][s]=k*V+R*i[b][s],i[b][s]=k*i[b][s]-R*V;for(o=0;o<=b;o++)V=i[o][b-1],i[o][b-1]=k*V+R*i[o][b],i[o][b]=k*i[o][b]-R*V;for(o=0;o<=M;o++)V=n[o][b-1],n[o][b-1]=k*V+R*n[o][b],n[o][b]=k*n[o][b]-R*V}else e[b-1]=c+R,e[b]=c+R,r[b-1]=V,r[b]=-V;b-=2,z=0}else{if(c=i[b][b],m=0,f=0,h<b&&(m=i[b-1][b-1],f=i[b][b-1]*i[b-1][b]),10===z){for(S+=c,o=0;o<=b;o++)i[o][o]-=c;N=Math.abs(i[b][b-1])+Math.abs(i[b-1][b-2]),c=m=.75*N,f=-.4375*N*N}if(30===z&&(N=(N=(m-c)/2)*N+f)>0){for(N=Math.sqrt(N),m<c&&(N=-N),N=c-f/((m-c)/2+N),o=0;o<=b;o++)i[o][o]-=N;S+=N,c=m=f=.964}for(z+=1,u=b-2;u>=h&&(V=i[u][u],R=((A=c-V)*(N=m-V)-f)/i[u+1][u]+i[u][u+1],k=i[u+1][u+1]-V-A-N,A=i[u+2][u+1],N=Math.abs(R)+Math.abs(k)+Math.abs(A),R/=N,k/=N,A/=N,u!==h)&&!(Math.abs(i[u][u-1])*(Math.abs(k)+Math.abs(A))<x*(Math.abs(R)*(Math.abs(i[u-1][u-1])+Math.abs(V)+Math.abs(i[u+1][u+1]))));)u--;for(o=u+2;o<=b;o++)i[o][o-2]=0,o>u+2&&(i[o][o-3]=0);for(a=u;a<=b-1&&(d=a!==b-1,a!==u&&(R=i[a][a-1],k=i[a+1][a-1],A=d?i[a+2][a-1]:0,0!==(c=Math.abs(R)+Math.abs(k)+Math.abs(A))&&(R/=c,k/=c,A/=c)),0!==c);a++)if(N=Math.sqrt(R*R+k*k+A*A),R<0&&(N=-N),0!==N){for(a!==u?i[a][a-1]=-N*c:h!==u&&(i[a][a-1]=-i[a][a-1]),c=(R+=N)/N,m=k/N,V=A/N,k/=R,A/=R,s=a;s<t;s++)R=i[a][s]+k*i[a+1][s],d&&(R+=A*i[a+2][s],i[a+2][s]=i[a+2][s]-R*V),i[a][s]=i[a][s]-R*c,i[a+1][s]=i[a+1][s]-R*m;for(o=0;o<=Math.min(b,a+3);o++)R=c*i[o][a]+m*i[o][a+1],d&&(R+=V*i[o][a+2],i[o][a+2]=i[o][a+2]-R*A),i[o][a]=i[o][a]-R,i[o][a+1]=i[o][a+1]-R*k;for(o=0;o<=M;o++)R=c*n[o][a]+m*n[o][a+1],d&&(R+=V*n[o][a+2],n[o][a+2]=n[o][a+2]-R*A),n[o][a]=n[o][a]-R,n[o][a+1]=n[o][a+1]-R*k}}}if(0===E)return;for(b=t-1;b>=0;b--)if(R=e[b],0===(k=r[b]))for(h=b,i[b][b]=1,o=b-1;o>=0;o--){for(f=i[o][o]-R,A=0,s=h;s<=b;s++)A+=i[o][s]*i[s][b];if(r[o]<0)V=f,N=A;else if(h=o,0===r[o]?i[o][b]=0!==f?-A/f:-A/(x*E):(c=i[o][o+1],m=i[o+1][o],k=(e[o]-R)*(e[o]-R)+r[o]*r[o],l=(c*N-V*A)/k,i[o][b]=l,i[o+1][b]=Math.abs(c)>Math.abs(V)?(-A-f*l)/c:(-N-m*l)/V),l=Math.abs(i[o][b]),x*l*l>1)for(s=o;s<=b;s++)i[s][b]=i[s][b]/l}else if(k<0)for(h=b-1,Math.abs(i[b][b-1])>Math.abs(i[b-1][b])?(i[b-1][b-1]=k/i[b][b-1],i[b-1][b]=-(i[b][b]-R)/i[b][b-1]):(y=F(0,-i[b-1][b],i[b-1][b-1]-R,k),i[b-1][b-1]=y[0],i[b-1][b]=y[1]),i[b][b-1]=0,i[b][b]=1,o=b-2;o>=0;o--){for(g=0,v=0,s=h;s<=b;s++)g+=i[o][s]*i[s][b-1],v+=i[o][s]*i[s][b];if(f=i[o][o]-R,r[o]<0)V=f,A=g,N=v;else if(h=o,0===r[o]?(y=F(-g,-v,f,k),i[o][b-1]=y[0],i[o][b]=y[1]):(c=i[o][o+1],m=i[o+1][o],p=(e[o]-R)*(e[o]-R)+r[o]*r[o]-k*k,w=2*(e[o]-R)*k,0===p&&0===w&&(p=x*E*(Math.abs(f)+Math.abs(k)+Math.abs(c)+Math.abs(m)+Math.abs(V))),y=F(c*A-V*g+k*v,c*N-V*v-k*g,p,w),i[o][b-1]=y[0],i[o][b]=y[1],Math.abs(c)>Math.abs(V)+Math.abs(k)?(i[o+1][b-1]=(-g-f*i[o][b-1]+k*i[o][b])/c,i[o+1][b]=(-v-f*i[o][b]-k*i[o][b-1])/c):(y=F(-A-m*i[o][b-1],-N-m*i[o][b],V,k),i[o+1][b-1]=y[0],i[o+1][b]=y[1])),l=Math.max(Math.abs(i[o][b-1]),Math.abs(i[o][b])),x*l*l>1)for(s=o;s<=b;s++)i[s][b-1]=i[s][b-1]/l,i[s][b]=i[s][b]/l}for(o=0;o<t;o++)if(o<0||o>M)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=M;o++){for(V=0,a=0;a<=Math.min(s,M);a++)V+=n[o][a]*i[a][s];n[o][s]=V}}(o,h,a,s,c)}this.n=o,this.e=h,this.d=a,this.V=s}get realEigenvalues(){return this.d}get imaginaryEigenvalues(){return this.e}get eigenvectorMatrix(){return I.isMatrix(this.V)||(this.V=new I(this.V)),this.V}get diagonalMatrix(){var t,r,e=this.n,n=this.e,i=this.d,o=new I(e,e);for(t=0;t<e;t++){for(r=0;r<e;r++)o[t][r]=0;o[t][t]=i[t],n[t]>0?o[t][t+1]=n[t]:n[t]<0&&(o[t][t-1]=n[t])}return o}}function F(t,r,e,n){var i,o;return Math.abs(e)>Math.abs(n)?[(t+(i=n/e)*r)/(o=e+i*n),(r-i*t)/o]:[((i=e/n)*t+r)/(o=n+i*e),(i*r-t)/o]}class W{constructor(t){if(!(t=P.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var r,e,n,i=t,o=i.rows,s=new I(o,o),a=!0;for(e=0;e<o;e++){var h=s[e],u=0;for(n=0;n<e;n++){var l=s[n],f=0;for(r=0;r<n;r++)f+=l[r]*h[r];h[n]=f=(i.get(e,n)-f)/s[n][n],u+=f*f}for(a&=(u=i.get(e,e)-u)>0,s[e][e]=Math.sqrt(Math.max(u,0)),n=e+1;n<o;n++)s[e][n]=0}if(!a)throw new Error("Matrix is not positive definite");this.L=s}solve(t){t=P.checkMatrix(t);var r=this.L,e=r.rows;if(t.rows!==e)throw new Error("Matrix dimensions do not match");var n,i,o,s=t.columns,a=t.clone();for(o=0;o<e;o++)for(i=0;i<s;i++){for(n=0;n<o;n++)a[o][i]-=a[n][i]*r[o][n];a[o][i]/=r[o][o]}for(o=e-1;o>=0;o--)for(i=0;i<s;i++){for(n=o+1;n<e;n++)a[o][i]-=a[n][i]*r[n][o];a[o][i]/=r[o][o]}return a}get lowerTriangularMatrix(){return this.L}}e.d(r,"default",function(){return I}),e.d(r,"Matrix",function(){return I}),e.d(r,"abstractMatrix",function(){return C}),e.d(r,"wrap",function(){return D}),e.d(r,"WrapperMatrix2D",function(){return P}),e.d(r,"WrapperMatrix1D",function(){return j}),e.d(r,"solve",function(){return O}),e.d(r,"inverse",function(){return L}),e.d(r,"linearDependencies",function(){return U}),e.d(r,"SingularValueDecomposition",function(){return f}),e.d(r,"SVD",function(){return f}),e.d(r,"EigenvalueDecomposition",function(){return $}),e.d(r,"EVD",function(){return $}),e.d(r,"CholeskyDecomposition",function(){return W}),e.d(r,"CHO",function(){return W}),e.d(r,"LuDecomposition",function(){return h}),e.d(r,"LU",function(){return h}),e.d(r,"QrDecomposition",function(){return _}),e.d(r,"QR",function(){return _})}]);</script><script>(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.weblas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function sgemm(e,t,l,a,r,c,u,n){if(null!=n&&n.length!=t)throw new Error("Only vector C with length matching rows in A is currently supported.");var o,s=r,i=n;o=transpose(l,t,c);var g=gl.createDataTexture(e,l,s),p=gl.createDataTexture(t,l,o),x=null;null!=i&&(x=gl.createDataTexture(1,t,i));var d=gl.createOutputTexture(e,t);return sgemmcalculator.calculate(e,t,l,a,g,p,u,x,d),rawBuffer=gl.readData(e,t),gl.context.deleteTexture(g),gl.context.deleteTexture(p),null!=x&&gl.context.deleteTexture(x),gl.context.deleteTexture(d),new Float32Array(rawBuffer)}function saxpy(e,t,l,a){var r,c,u=l;isFloat32Array(a)?c=a:(c=new Float32Array(e),c.fill(a));var n=gl.createDataTexture(1,e,u),o=gl.createDataTexture(1,e,c),s=gl.createOutputTexture(1,e);return saxpycalculator.calculate(e,t,n,o,s),r=gl.readData(1,e),gl.context.deleteTexture(n),gl.context.deleteTexture(o),gl.context.deleteTexture(s),new Float32Array(r)}function isFloat32Array(e){return"[object Float32Array]"===Object.prototype.toString.call(e)}function sscal(e,t,l,a,r){var c,u=r,n=gl.createDataTexture(e,t,u),o=gl.createOutputTexture(e,t);return sscalcalculator.calculate(e,t,l,a,n,o),c=gl.readData(e,t),gl.context.deleteTexture(n),gl.context.deleteTexture(o),new Float32Array(c)}function sstd(e,t,l,a,r){var c,u=r,n=gl.createDataTexture(e,t,u),o=gl.createOutputTexture(e,t);return sscalcalculator.calculate(e,t,1/a,-1*l/a,n,o),c=gl.readData(e,t),gl.context.deleteTexture(n),gl.context.deleteTexture(o),new Float32Array(c)}function sdwns(e,t,l,a,r,c){var u=gl.createDataTexture(e,t*l,c),n=Math.floor((t-a)/r)+1,o=Math.floor((e-a)/r)+1,s=gl.createOutputTexture(o,n*l);return sdwnscalculator.calculate(e,t,l,a,r,u,s),rawBuffer=gl.readData(o,n*l),gl.context.deleteTexture(u),gl.context.deleteTexture(s),new Float32Array(rawBuffer)}function sclmp(e,t,l,a,r){l=null!=l?l:Number.MIN_VALUE,a=null!=a?a:Number.MAX_VALUE;var c,u=r,n=gl.createDataTexture(e,t,u),o=gl.createOutputTexture(e,t);return sclmpcalculator.calculate(e,t,l,a,n,o),c=gl.readData(e,t),gl.context.deleteTexture(n),gl.context.deleteTexture(o),new Float32Array(c)}function isNumeric(e){return e-parseFloat(e)+1>=0}function fromArray(e,t,l){var a,r,c=[];l?(c[1]=e.length,c[0]=e[0].length):(c[0]=e.length,c[1]=e[0].length),r=c[1],t=t||Float32Array,a=new t(c[0]*c[1]);for(var u=0;u<c[0];++u)for(var n=0;n<c[1];++n)l?a[u*r+n]=e[n][u]:a[u*r+n]=e[u][n];return a}function transpose(e,t,l){for(var a=new l.constructor(e*t),r=0;e>r;r++)for(var c=0;t>c;c++)a[c*e+r]=l[r*t+c];return a}var globals=require("./lib/globals"),pipeline=require("./lib/pipeline"),SGEMMCalculator=require("./lib/sgemmcalculator"),SAXPYCalculator=require("./lib/saxpycalculator"),SSCALCalculator=require("./lib/sscalcalculator"),SDWNSCalculator=require("./lib/sdwnscalculator"),SCLMPCalculator=require("./lib/sclmpcalculator"),test=require("./lib/test"),gl=globals.gl,sgemmcalculator=new SGEMMCalculator(gl),saxpycalculator=new SAXPYCalculator(gl),sscalcalculator=new SSCALCalculator(gl),sdwnscalculator=new SDWNSCalculator(gl),sclmpcalculator=new SCLMPCalculator(gl);module.exports={saxpy:saxpy,sscal:sscal,sgemm:sgemm,sstd:sstd,sdwns:sdwns,sclmp:sclmp,pipeline:pipeline,gpu:{gl:gl,sgemm:pipeline.sgemmcalculator.calculate.bind(pipeline.sgemmcalculator),sscal:pipeline.sscalcalculator.calculate.bind(pipeline.sscalcalculator),sclmp:pipeline.sclmpcalculator.calculate.bind(pipeline.sclmpcalculator),sdwns:pipeline.sdwnscalculator.calculate.bind(pipeline.sdwnscalculator),encode:gl.encode.bind(gl)},util:{fromArray:fromArray,transpose:transpose},test:test},String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,l){return"undefined"!=typeof e[l]?e[l]:t})});
},{"./lib/globals":2,"./lib/pipeline":3,"./lib/saxpycalculator":4,"./lib/sclmpcalculator":5,"./lib/sdwnscalculator":6,"./lib/sgemmcalculator":7,"./lib/sscalcalculator":8,"./lib/test":10}],2:[function(require,module,exports){
var WebGL=require("./webgl"),gl=new WebGL;module.exports={gl:gl};
},{"./webgl":11}],3:[function(require,module,exports){
function sscal(l,a,e){var r=e.shape[0],s=e.shape[1],c=new Tensor([r,s],null);return sscalcalculator.calculate(r,s,l,a,e.texture,c.texture),c}function sgemm(l,a,e,r,s){if(e.shape[1]!==a.shape[1])throw new Error("Second dimension must be of same size for input Tensors (second Tensor is transposed).");var c,t=a.shape[0],u=e.shape[0],o=a.shape[1];c=s?s.texture:null;var n=new Tensor([t,u],null);return sgemmcalculator.calculate(t,u,o,l,a.texture,e.texture,r,c,n.texture),n}function sdwns(l,a,e,r){if(r.shape[1]%l!==0)throw new Error("Second dimension of tensor must be a multiple of channels");var s=r.shape[0],c=r.shape[1]/l,t=Math.floor((s-a)/e)+1,u=Math.floor((c-a)/e)+1,o=new Tensor([t,u*l],null);return sdwnscalculator.calculate(s,c,l,a,e,r.texture,o.texture),o}function sclmp(l,a,e){l=null!=l?l:Number.MIN_VALUE,a=null!=a?a:Number.MAX_VALUE;var r=e.shape[0],s=e.shape[1],c=new Tensor([r,s],null);return sclmpcalculator.calculate(r,s,l,a,e.texture,c.texture),c}var globals=require("./globals"),SGEMMCalculator=require("./sgemmcalculator"),SAXPYCalculator=require("./saxpycalculator"),SSCALCalculator=require("./sscalcalculator"),SDWNSCalculator=require("./sdwnscalculator"),SCLMPCalculator=require("./sclmpcalculator"),Tensor=require("./tensor"),gl=globals.gl,sgemmcalculator=new SGEMMCalculator(gl,!1),saxpycalculator=new SAXPYCalculator(gl,!1),sscalcalculator=new SSCALCalculator(gl,!1),sdwnscalculator=new SDWNSCalculator(gl,!1),sclmpcalculator=new SCLMPCalculator(gl,!1);module.exports={Tensor:Tensor,sscal:sscal,sgemm:sgemm,sdwns:sdwns,sclmp:sclmp,sgemmcalculator:sgemmcalculator,saxpycalculator:saxpycalculator,sscalcalculator:sscalcalculator,sdwnscalculator:sdwnscalculator,sclmpcalculator:sclmpcalculator};
},{"./globals":2,"./saxpycalculator":4,"./sclmpcalculator":5,"./sdwnscalculator":6,"./sgemmcalculator":7,"./sscalcalculator":8,"./tensor":9}],4:[function(require,module,exports){
function SAXPYCalculator(t,n){this.webgl=t,this.standalone=n||!0;var e="#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D X;		// texture with data from padded A\nuniform sampler2D Y;		// texture with data from padded transpose of B\nuniform int       N;\nuniform float     a; 		// coefficient to multiplication\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n	// TODO: correctly handle denormal numbers\n	// http://www.2ality.com/2012/04/number-encoding.html\n	float a = abs(val);                           // encode absolute value + sign\n	float exp = floor(log2(a));                 // number of powers of 2\n	float mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n	float mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n	float mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n	float mant3 = mod(mant,256.);               // third 8 bits\n\n	highp float sign = 128.-128.*(a/val);			// sign bit is 256 or 0\n	highp float e = (sign+exp+127.)/510.;		// exponent and sign\n	highp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n	highp float m2 = (mant2)/255.;				// middle part\n	highp float m3 = (mant3+.5)/255.;			// scale to 0 - 255\n\n	return vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n	float val;\n	if (index == 0) {\n		val = v.r;\n	} else if(index == 1) {\n		val = v.g;\n	} else if(index == 2) {\n		val = v.b;\n	} else if(index == 3){\n		val = v.a;\n	} else {\n		// should never be here\n		val = 0.0;\n	}\n\n	return val;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n 	float row = outTex.y;\n	float col = outTex.x;\n\n	// direct usage of col requires output be padded exactly like input\n	vec4 x = texture2D( X, vec2(col, row));\n	vec4 y = texture2D( Y, vec2(col, row));\n	vec4 sum_v = (a * x) + y;\n	int channel = int(mod(col * float(N), 4.0 ));\n	float sum = select_index_1604150559(sum_v, channel);\n\n	if (sum == 0.) {\n		gl_FragColor = vec4(0.,0.,0.,0.);\n		return;\n	}\n\n 	// output vec4 with bytes for an IEEE754 32-bit floating point number\n	gl_FragColor = encode_float_1540259130(sum);\n}\n";this.standalone?this.program=this.webgl.createProgram(e):this.program=this.webgl.createProgram(p)}var WebGL=require("./webgl");module.exports=SAXPYCalculator,SAXPYCalculator.TEXTURE_UNIFORM_NAME_0="X",SAXPYCalculator.TEXTURE_UNIFORM_NAME_1="Y",SAXPYCalculator.LENGTH_UNIFORM_NAME="N",SAXPYCalculator.COEFFICIENT_UNIFORM_NAME="a",SAXPYCalculator.prototype.calculate=function(t,n,e,o,a){var l=this.webgl.context;this.webgl.selectProgram(this.program),this.bindInputTexture(e,l.TEXTURE0,SAXPYCalculator.TEXTURE_UNIFORM_NAME_0),this.bindInputTexture(o,l.TEXTURE1,SAXPYCalculator.TEXTURE_UNIFORM_NAME_1);var i=this.webgl.getPad(t);this.bindUniforms(t+i,n),this.webgl.bindOutputTexture(1,t+i,a),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0),this.webgl.unbindInputTexture(l.TEXTURE0),this.webgl.unbindInputTexture(l.TEXTURE1)},SAXPYCalculator.prototype.bindInputTexture=function(t,n,e){var o=this.webgl.context,a=this.program;o.activeTexture(n),o.bindTexture(o.TEXTURE_2D,t);var l=o.getUniformLocation(a,e);o.uniform1i(l,n-o.TEXTURE0)},SAXPYCalculator.prototype.bindUniforms=function(t,n){var e=this.webgl.context,o=e.getUniformLocation(this.program,SAXPYCalculator.LENGTH_UNIFORM_NAME),a=e.getUniformLocation(this.program,SAXPYCalculator.COEFFICIENT_UNIFORM_NAME);e.uniform1i(o,t),e.uniform1f(a,n)};
},{"./webgl":11}],5:[function(require,module,exports){
function SCLMPCalculator(n,t){this.webgl=n,this.standalone=null!=t?t:!0;var e="#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D X;		// texture with data from padded A\nuniform int       N;		// number of columns\nuniform int       pad;		// additional columns to nearest multiple of four\nuniform float     a; 		// lower bound\nuniform float     b; 		// upper bound\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n	// TODO: correctly handle denormal numbers\n	// http://www.2ality.com/2012/04/number-encoding.html\n	float a = abs(val);                           // encode absolute value + sign\n	float exp = floor(log2(a));                 // number of powers of 2\n	float mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n	float mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n	float mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n	float mant3 = mod(mant,256.);               // third 8 bits\n\n	highp float sign = 128.-128.*(a/val);			// sign bit is 256 or 0\n	highp float e = (sign+exp+127.)/510.;		// exponent and sign\n	highp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n	highp float m2 = (mant2)/255.;				// middle part\n	highp float m3 = (mant3+.5)/255.;			// scale to 0 - 255\n\n	return vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n	float val;\n	if (index == 0) {\n		val = v.r;\n	} else if(index == 1) {\n		val = v.g;\n	} else if(index == 2) {\n		val = v.b;\n	} else if(index == 3){\n		val = v.a;\n	} else {\n		// should never be here\n		val = 0.0;\n	}\n\n	return val;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row = outTex.y;\n	float col = outTex.x;\n\n	// return 0.0 if in padded region of output texture\n	if(col * float(N + pad) > float(N) ) {\n		gl_FragColor = vec4(0.,0.,0.,0.);\n		return;\n	}\n\n	// direct usage of col requires output be padded exactly like input\n	vec4 x = texture2D( X, vec2(col, row));\n	vec4 val = clamp(x, a, b);\n\n	// select and output channel (standalone version only)\n	int channel = int(mod(col * float(N + pad), 4.0));\n	float sum = select_index_1604150559(val, channel);\n\n	if (sum == 0.) {\n		gl_FragColor = vec4(0.,0.,0.,0.);\n		return;\n	}\n\n	// output vec4 with bytes for an IEEE754 32-bit floating point number\n	gl_FragColor = encode_float_1540259130(sum);\n}\n",o="#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D X;		// texture with data from padded A\nuniform int       N;		// number of columns\nuniform int       pad;		// additional columns to nearest multiple of four\nuniform float     a; 		// lower bound\nuniform float     b; 		// upper bound\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n	v.a = 0.0;\n	if(pad == 2){\n		v.b = 0.0;\n	} else if(pad == 3){\n		v.b = 0.0;\n		v.g = 0.0;\n	}\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row_t = outTex.y;\n	float col_t = outTex.x;\n	float col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\n	// direct usage of col requires output be padded exactly like input\n	vec4 x = texture2D( X, vec2(col_t, row_t));\n	vec4 val_v = clamp(x, a, b);\n\n	// is last element in pixel past row length?\n	if(pad > 0 && (col + 4.0) > float(N) ) {\n		// fix elements in padded region\n		fix_pad_1540259130(val_v, pad);\n	}\n\n	gl_FragColor = val_v;\n}\n";this.standalone?this.program=this.webgl.createProgram(e):this.program=this.webgl.createProgram(o)}var WebGL=require("./webgl");module.exports=SCLMPCalculator,SCLMPCalculator.TEXTURE_UNIFORM_NAME_0="X",SCLMPCalculator.LENGTH_UNIFORM_NAME="N",SCLMPCalculator.LOWER_UNIFORM_NAME="a",SCLMPCalculator.UPPER_UNIFORM_NAME="b",SCLMPCalculator.prototype.calculate=function(n,t,e,o,a,l){e=null!=e?e:Number.MIN_VALUE,o=null!=o?o:Number.MAX_VALUE;var i=this.webgl.context;this.webgl.selectProgram(this.program),this.bindInputTexture(a,i.TEXTURE0,SCLMPCalculator.TEXTURE_UNIFORM_NAME_0);var r=this.webgl.getPad(t);this.bindUniforms(t,r,e,o),this.standalone?this.webgl.bindOutputTexture(n,t+r,l):this.webgl.bindOutputTexture(n,(t+r)/4,l),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),this.webgl.unbindInputTexture(i.TEXTURE0)},SCLMPCalculator.prototype.bindInputTexture=function(n,t,e){var o=this.webgl.context,a=this.program;o.activeTexture(t),o.bindTexture(o.TEXTURE_2D,n);var l=o.getUniformLocation(a,e);o.uniform1i(l,t-o.TEXTURE0)},SCLMPCalculator.prototype.bindUniforms=function(n,t,e,o){var a=this.webgl.context,l=a.getUniformLocation(this.program,SCLMPCalculator.LENGTH_UNIFORM_NAME),i=a.getUniformLocation(this.program,SCLMPCalculator.UPPER_UNIFORM_NAME),r=a.getUniformLocation(this.program,SCLMPCalculator.LOWER_UNIFORM_NAME),u=a.getUniformLocation(this.program,"pad");a.uniform1i(l,n),a.uniform1i(u,t),a.uniform1f(r,e),a.uniform1f(i,o)};
},{"./webgl":11}],6:[function(require,module,exports){
function DownsampleCalculator(n,o){this.webgl=n,this.standalone=null!=o?o:!0;var t="#define GLSLIFY 1\n// TODO: unroll loop for stride == factor and small values (2, 3)\nprecision highp float;\n\nvarying vec2      outTex;  // texture coords of row/column to calculate\nuniform sampler2D X;       // texture with data from padded A\nuniform int       factor;  // width of image patch\nuniform float     stride;  // width between image patches\nuniform float     C;       // number of channels\nuniform float     M;\nuniform float     N;\nuniform float     N_out;\nuniform float     M_out;\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n	// TODO: correctly handle denormal numbers\n	// http://www.2ality.com/2012/04/number-encoding.html\n	float a = abs(val);                           // encode absolute value + sign\n	float exp = floor(log2(a));                 // number of powers of 2\n	float mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n	float mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n	float mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n	float mant3 = mod(mant,256.);               // third 8 bits\n\n	highp float sign = 128.-128.*(a/val);			// sign bit is 256 or 0\n	highp float e = (sign+exp+127.)/510.;		// exponent and sign\n	highp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n	highp float m2 = (mant2)/255.;				// middle part\n	highp float m3 = (mant3+.5)/255.;			// scale to 0 - 255\n\n	return vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n	float val;\n	if (index == 0) {\n		val = v.r;\n	} else if(index == 1) {\n		val = v.g;\n	} else if(index == 2) {\n		val = v.b;\n	} else if(index == 3){\n		val = v.a;\n	} else {\n		// should never be here\n		val = 0.0;\n	}\n\n	return val;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate and translate to output pixel space.\n	float row = floor(outTex.y * M_out);   // row on output texture (matrix space)\n	float col = floor(outTex.x * N_out); // column on output texture (matrix space)\n	float vcol = floor(col / C);   // virtual column on output texture (matrix space)\n	float vchannel = floor(mod(col, C)); // virtual channel on output texture\n\n	const float min = -1.0e+08;\n	vec4 currentMax = vec4(min, min, min, min);\n\n	float deltaY = 1.0/M;\n	float deltaX = 1.0/N;\n	float y = ((row * stride) + 0.5)*deltaY; // texture position of input row\n	float x;\n	float z = vchannel * deltaX;\n	for (int i = 0; i < 100; i += 1) {\n		if (i >= factor) {\n			break;\n		}\n		x = ((vcol * stride * C) + 0.5) * deltaX; // texture position of input column\n\n		for (int j = 0; j < 100; j += 1) {\n			if (j >= factor) {\n				break;\n			}\n\n			vec2 coords = vec2(x + z, y);\n			vec4 x_v = texture2D(X, coords);\n			currentMax = max(currentMax, x_v);\n\n			x += (deltaX * C);\n		}\n		y += deltaY;\n	}\n	int chan = int(mod(outTex.x * N_out, 4.0 ));\n	float val = select_index_1604150559(currentMax, int(chan));\n	if (val == 0.) {\n		gl_FragColor = vec4(0.,0.,0.,0.);\n		return;\n	}\n\n	gl_FragColor = encode_float_1540259130(val);\n}\n";p="#define GLSLIFY 1\n// TODO: unroll loop for stride == factor and small values (2, 3)\nprecision highp float;\n\nvarying vec2      outTex;  // texture coords of row/column to calculate\nuniform sampler2D X;       // texture with data from padded A\nuniform int       factor;  // width of image patch\nuniform float     stride;  // width between image patches\nuniform float     C;       // number of channels\nuniform float     M;\nuniform float     N;\nuniform float     N_out;\nuniform float     M_out;\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate and translate to output pixel space.\n	float row = floor(outTex.y * M_out);   // row on output texture (pixel space)\n	float col = floor(outTex.x * N_out); // column on output texture (matrix space)\n	float vcol = floor(col / C);   // virtual column on output texture (matrix space)\n	float vchannel = floor(mod(col, C)); // virtual channel on output texture\n\n	const float min = -1.0e+08;\n	vec4 currentMax = vec4(min, min, min, min);\n\n	float deltaY = 1.0/M;\n	float deltaX = 1.0/N;\n	float y = ((row * stride) + 0.5)*deltaY; // texture position of input row\n	float x;\n	float z = vchannel * deltaX;\n	for (int i = 0; i < 100; i += 1) {\n		if (i >= factor) {\n			break;\n		}\n		x = ((vcol * stride * C) + 0.5) * deltaX; // texture position of input column\n\n		for (int j = 0; j < 100; j += 1) {\n			if (j >= factor) {\n				break;\n			}\n\n			vec2 coords = vec2(x + z, y);\n			vec4 x_v = texture2D(X, coords);\n			currentMax = max(currentMax, x_v);\n\n			x += (deltaX * C);\n		}\n		y += deltaY;\n	}\n\n	gl_FragColor = currentMax;\n}\n",this.standalone?this.program=this.webgl.createProgram(t):this.program=this.webgl.createProgram(p)}var WebGL=require("./webgl");module.exports=DownsampleCalculator,DownsampleCalculator.TEXTURE_UNIFORM_NAME_0="X",DownsampleCalculator.INPUT_ROW_COUNT_UNIFORM_NAME="M",DownsampleCalculator.INPUT_COLUMN_COUNT_UNIFORM_NAME="N",DownsampleCalculator.OUTPUT_ROW_COUNT_UNIFORM_NAME="M_out",DownsampleCalculator.OUTPUT_COLUMN_COUNT_UNIFORM_NAME="N_out",DownsampleCalculator.FACTOR_UNIFORM_NAME="factor",DownsampleCalculator.STRIDE_UNIFORM_NAME="stride",DownsampleCalculator.CHANNEL_COUNT_UNIFORM_NAME="C",DownsampleCalculator.prototype.calculate=function(n,o,t,a,e,l,r){if(t%WebGL.COMPONENTS_PER_TEXEL!=0)throw new Error("Channel count must be a multiple of "+WebGL.COMPONENTS_PER_TEXEL);var i=this.webgl.context,u=(Math.floor((o-a)/e)+1)*t,f=Math.floor((n-a)/e)+1;this.webgl.selectProgram(this.program),this.bindInputTexture(l,i.TEXTURE0,DownsampleCalculator.TEXTURE_UNIFORM_NAME_0),this.bindUniforms(n,o*t,f,u,a,e,t),this.standalone?this.webgl.bindOutputTexture(f,u,r):this.webgl.bindOutputTexture(f,u/WebGL.COMPONENTS_PER_TEXEL,r),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),this.webgl.unbindInputTexture(i.TEXTURE0)},DownsampleCalculator.prototype.bindInputTexture=function(n,o,t){var a=this.webgl.context,e=this.program;a.activeTexture(o),a.bindTexture(a.TEXTURE_2D,n);var l=a.getUniformLocation(e,t);a.uniform1i(l,o-a.TEXTURE0)},DownsampleCalculator.prototype.bindUniforms=function(n,o,t,a,e,l,r){var i=this.webgl.context,u=i.getUniformLocation(this.program,DownsampleCalculator.INPUT_ROW_COUNT_UNIFORM_NAME),f=i.getUniformLocation(this.program,DownsampleCalculator.INPUT_COLUMN_COUNT_UNIFORM_NAME),m=i.getUniformLocation(this.program,DownsampleCalculator.OUTPUT_ROW_COUNT_UNIFORM_NAME),c=i.getUniformLocation(this.program,DownsampleCalculator.OUTPUT_COLUMN_COUNT_UNIFORM_NAME),s=i.getUniformLocation(this.program,DownsampleCalculator.FACTOR_UNIFORM_NAME),p=i.getUniformLocation(this.program,DownsampleCalculator.STRIDE_UNIFORM_NAME),d=i.getUniformLocation(this.program,DownsampleCalculator.CHANNEL_COUNT_UNIFORM_NAME);i.uniform1f(u,n),i.uniform1f(f,o),i.uniform1f(m,t),i.uniform1f(c,a),i.uniform1i(s,e),i.uniform1f(p,l),i.uniform1f(d,r)};
},{"./webgl":11}],7:[function(require,module,exports){
function SGEMMCalculator(t,e){this.webgl=t,this.standalone=null!=e?e:!0;var n="#define GLSLIFY 1\n// fragment shader that calculates the matrix product and renders each\n// element to the bytes representing a 32-bit IEEE754 floating point in\n// the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D A;		// texture with data from padded A\nuniform sampler2D B_t;		// texture with data from padded transpose of B\nuniform int       K;		// number of elements in shared dimension\nuniform int       N;		// number of columns in output\nuniform int       pad;		//\nuniform float     alpha; 	// coefficient to multiplication\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n	float delta_t = 1./float(K);// space (on texture) between elements\n	float sum = 0.;			// sum for this row/column pair\n	float z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n	for (int l=0 ; l<4096 ; ++l) {\n		if(l >= K / 4) break;    // stop when we finish the row/column\n		// l is in pixel space, so we divide by four\n\n		// retrieve next four elements from each texture\n		vec4 a_ik = texture2D(  A, vec2(z, y));\n		vec4 b_kj = texture2D(B_t, vec2(z, x));\n\n	// use `dot` to process four elements at a time\n		sum +=  dot(a_ik, b_kj);\n		z += (4.0 * delta_t);      // (z + 0.5)*delta\n	}\n	return sum;\n}\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1604150559(float val) {\n\n	// TODO: correctly handle denormal numbers\n	// http://www.2ality.com/2012/04/number-encoding.html\n	float a = abs(val);                           // encode absolute value + sign\n	float exp = floor(log2(a));                 // number of powers of 2\n	float mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n	float mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n	float mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n	float mant3 = mod(mant,256.);               // third 8 bits\n\n	highp float sign = 128.-128.*(a/val);			// sign bit is 256 or 0\n	highp float e = (sign+exp+127.)/510.;		// exponent and sign\n	highp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n	highp float m2 = (mant2)/255.;				// middle part\n	highp float m3 = (mant3+.5)/255.;			// scale to 0 - 255\n\n	return vec4(m3,m2,m1,e);\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row_t = outTex.y;\n	float col_t = outTex.x;\n\n	// sum row x col for the passed pixel\n	float sum = alpha * dot_rowcol_1540259130(row_t, col_t * float(N + pad)/float(N), A, B_t, K);\n\n	if (sum == 0.) {\n		gl_FragColor = vec4(0.,0.,0.,0.);\n		return;\n	}\n\n	// output vec4 with bytes for an IEEE754 32-bit floating point number\n	gl_FragColor = encode_float_1604150559(sum);\n}\n",o="#define GLSLIFY 1\n// fragment shader that calculates the matrix product (with additive 'C' term)\n// and renders each element to the bytes representing a 32-bit IEEE754 floating\n// point in the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D A;		// texture with data from padded A\nuniform sampler2D B_t;		// texture with data from padded transpose of B\nuniform sampler2D C;		// texture with data from C\nuniform int       K;		// number of elements in shared dimension\nuniform int       N;		// number of columns in output\nuniform int       pad;		//\nuniform float     alpha; 	// coefficient to multiplication\nuniform float     beta; 	// coefficient to additive term\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n	float delta_t = 1./float(K);// space (on texture) between elements\n	float sum = 0.;			// sum for this row/column pair\n	float z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n	for (int l=0 ; l<4096 ; ++l) {\n		if(l >= K / 4) break;    // stop when we finish the row/column\n		// l is in pixel space, so we divide by four\n\n		// retrieve next four elements from each texture\n		vec4 a_ik = texture2D(  A, vec2(z, y));\n		vec4 b_kj = texture2D(B_t, vec2(z, x));\n\n	// use `dot` to process four elements at a time\n		sum +=  dot(a_ik, b_kj);\n		z += (4.0 * delta_t);      // (z + 0.5)*delta\n	}\n	return sum;\n}\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1604150559(float val) {\n\n	// TODO: correctly handle denormal numbers\n	// http://www.2ality.com/2012/04/number-encoding.html\n	float a = abs(val);                           // encode absolute value + sign\n	float exp = floor(log2(a));                 // number of powers of 2\n	float mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n	float mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n	float mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n	float mant3 = mod(mant,256.);               // third 8 bits\n\n	highp float sign = 128.-128.*(a/val);			// sign bit is 256 or 0\n	highp float e = (sign+exp+127.)/510.;		// exponent and sign\n	highp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n	highp float m2 = (mant2)/255.;				// middle part\n	highp float m3 = (mant3+.5)/255.;			// scale to 0 - 255\n\n	return vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1117569599(vec4 v, int index){\n	float val;\n	if (index == 0) {\n		val = v.r;\n	} else if(index == 1) {\n		val = v.g;\n	} else if(index == 2) {\n		val = v.b;\n	} else if(index == 3){\n		val = v.a;\n	} else {\n		// should never be here\n		val = 0.0;\n	}\n\n	return val;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row_t = outTex.y;\n	float col_t = outTex.x;\n	vec4 c_vec = texture2D(C, vec2(col_t, 0.5));\n\n	// should be -0.5, but that subtly breaks at zero\n	float col = col_t * float(N + pad); // index of first element in pixel (matrix space)\n	int channel = int(mod(col, 4.0 ));\n	float c = select_index_1117569599(c_vec, channel);\n\n	// sum row x col for the passed pixel\n	float sum = alpha * dot_rowcol_1540259130(row_t, col_t * float(N + pad)/float(N), A, B_t, K);\n	sum += beta * c;\n\n	if (sum == 0.) {\n		gl_FragColor = vec4(0.,0.,0.,0.);\n		return;\n	}\n\n	// output vec4 with bytes for an IEEE754 32-bit floating point number\n	gl_FragColor = encode_float_1604150559(sum);\n}\n",a="#define GLSLIFY 1\n// fragment shader that calculates the matrix product and writes each\n// element to a pixel component in a floating point texture.\n// the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D A;		// texture with data from padded A\nuniform sampler2D B_t;		// texture with data from padded transpose of B\nuniform int       K;		// number of elements in shared dimension\nuniform int       N;		// number of columns in output\nuniform int       pad;		//\nuniform float     alpha; 	// coefficient to multiplication\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n	float delta_t = 1./float(K);// space (on texture) between elements\n	float sum = 0.;			// sum for this row/column pair\n	float z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n	for (int l=0 ; l<4096 ; ++l) {\n		if(l >= K / 4) break;    // stop when we finish the row/column\n		// l is in pixel space, so we divide by four\n\n		// retrieve next four elements from each texture\n		vec4 a_ik = texture2D(  A, vec2(z, y));\n		vec4 b_kj = texture2D(B_t, vec2(z, x));\n\n	// use `dot` to process four elements at a time\n		sum +=  dot(a_ik, b_kj);\n		z += (4.0 * delta_t);      // (z + 0.5)*delta\n	}\n	return sum;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row_t = outTex.y;\n	float col_t = outTex.x;\n\n	vec4 sum_v = vec4(0.0, 0.0, 0.0, 0.0);\n	float col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n	sum_v.r = alpha * dot_rowcol_1540259130(row_t, (col + 0.5)/float(N), A, B_t, K);\n	// is last element in pixel past row length?\n	if(pad > 0 && (col + 4.0) > float(N) ) {\n		// compute elements in padded region\n		if(pad < 3){\n			sum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n		}\n		if(pad < 2){\n			sum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n		}\n	} else {\n		sum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n		sum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n		sum_v.a = alpha * dot_rowcol_1540259130(row_t, (col + 3.5)/float(N), A, B_t, K);\n	}\n\n	gl_FragColor = sum_v;\n}\n",r="#define GLSLIFY 1\n// fragment shader that calculates the matrix product and writes each\n// element to a pixel component in a floating point texture.\n// the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D A;		// texture with data from padded A\nuniform sampler2D B_t;		// texture with data from padded transpose of B\nuniform sampler2D C;		// texture with data from C\nuniform int       K;		// number of elements in shared dimension\nuniform int       N;		// number of columns in output\nuniform int       pad;		//\nuniform float     alpha; 	// coefficient to multiplication\nuniform float     beta; 	// coefficient to addition\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n	float delta_t = 1./float(K);// space (on texture) between elements\n	float sum = 0.;			// sum for this row/column pair\n	float z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n	for (int l=0 ; l<4096 ; ++l) {\n		if(l >= K / 4) break;    // stop when we finish the row/column\n		// l is in pixel space, so we divide by four\n\n		// retrieve next four elements from each texture\n		vec4 a_ik = texture2D(  A, vec2(z, y));\n		vec4 b_kj = texture2D(B_t, vec2(z, x));\n\n	// use `dot` to process four elements at a time\n		sum +=  dot(a_ik, b_kj);\n		z += (4.0 * delta_t);      // (z + 0.5)*delta\n	}\n	return sum;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row_t = outTex.y;\n	float col_t = outTex.x;\n	vec4 c_v = texture2D(C, vec2(col_t, 0.5));\n\n	vec4 sum_v = vec4(0.0, 0.0, 0.0, 0.0);\n	float col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n	sum_v.r = alpha * dot_rowcol_1540259130(row_t, (col + 0.5)/float(N), A, B_t, K);\n	// in the padding region?\n	if(pad > 0 && (col + 4.0) > float(N) ) {\n		// pad\n		if(pad < 3){\n			sum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n		}\n		if(pad < 2){\n			sum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n		}\n	} else {\n		sum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n		sum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n		sum_v.a = alpha * dot_rowcol_1540259130(row_t, (col + 3.5)/float(N), A, B_t, K);\n	}\n\n	gl_FragColor = sum_v + beta*c_v;\n}\n";this.standalone?(this.program_=this.webgl.createProgram(n),this.program_c=this.webgl.createProgram(o)):(this.program_=this.webgl.createProgram(a),this.program_c=this.webgl.createProgram(r))}var WebGL=require("./webgl");module.exports=SGEMMCalculator,SGEMMCalculator.TEXTURE_UNIFORM_NAME_0="A",SGEMMCalculator.TEXTURE_UNIFORM_NAME_1="B_t",SGEMMCalculator.TEXTURE_UNIFORM_NAME_2="C",SGEMMCalculator.SHARED_LENGTH_UNIFORM_NAME="K",SGEMMCalculator.COLUMN_COUNT_UNIFORM_NAME="N",SGEMMCalculator.PAD_UNIFORM_NAME="pad",SGEMMCalculator.ALPHA_UNIFORM_NAME="alpha",SGEMMCalculator.BETA_UNIFORM_NAME="beta",SGEMMCalculator.prototype.calculate=function(t,e,n,o,a,r,i,l,s){var u=this.webgl.context;null!=l?this.program=this.program_c:(i=null,this.program=this.program_),this.webgl.selectProgram(this.program),this.bindInputTexture(a,u.TEXTURE0,SGEMMCalculator.TEXTURE_UNIFORM_NAME_0),this.bindInputTexture(r,u.TEXTURE1,SGEMMCalculator.TEXTURE_UNIFORM_NAME_1),null!=l&&this.bindInputTexture(l,u.TEXTURE2,SGEMMCalculator.TEXTURE_UNIFORM_NAME_2);var m=this.webgl.getPad(n),d=this.webgl.getPad(e);this.bindUniforms(e,n+m,d,o,i),this.standalone?this.webgl.bindOutputTexture(t,e+d,s):this.webgl.bindOutputTexture(t,(e+d)/4,s),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0),this.webgl.unbindInputTexture(u.TEXTURE0),this.webgl.unbindInputTexture(u.TEXTURE1),this.webgl.unbindInputTexture(u.TEXTURE2)},SGEMMCalculator.prototype.bindInputTexture=function(t,e,n){var o=this.webgl.context,a=this.program;o.activeTexture(e),o.bindTexture(o.TEXTURE_2D,t);var r=o.getUniformLocation(a,n);o.uniform1i(r,e-o.TEXTURE0)},SGEMMCalculator.prototype.bindUniforms=function(t,e,n,o,a){var r=this.webgl.context,i=r.getUniformLocation(this.program,SGEMMCalculator.SHARED_LENGTH_UNIFORM_NAME),l=r.getUniformLocation(this.program,SGEMMCalculator.ALPHA_UNIFORM_NAME),s=r.getUniformLocation(this.program,SGEMMCalculator.BETA_UNIFORM_NAME),u=r.getUniformLocation(this.program,SGEMMCalculator.COLUMN_COUNT_UNIFORM_NAME),m=m=r.getUniformLocation(this.program,SGEMMCalculator.PAD_UNIFORM_NAME);r.uniform1f(s,a),r.uniform1i(u,t),r.uniform1i(m,n),r.uniform1i(i,e),r.uniform1f(l,o)};
},{"./webgl":11}],8:[function(require,module,exports){
function SSCALCalculator(n,t){this.webgl=n,this.standalone=null!=t?t:!0;var e="#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D X;		// texture with data from padded X\nuniform int       N;		// number of columns\nuniform int       pad;		// additional columns to nearest multiple of four\nuniform float     b; 		// additive term\nuniform float     a; 		// multiplicative term\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n	// TODO: correctly handle denormal numbers\n	// http://www.2ality.com/2012/04/number-encoding.html\n	float a = abs(val);                           // encode absolute value + sign\n	float exp = floor(log2(a));                 // number of powers of 2\n	float mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n	float mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n	float mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n	float mant3 = mod(mant,256.);               // third 8 bits\n\n	highp float sign = 128.-128.*(a/val);			// sign bit is 256 or 0\n	highp float e = (sign+exp+127.)/510.;		// exponent and sign\n	highp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n	highp float m2 = (mant2)/255.;				// middle part\n	highp float m3 = (mant3+.5)/255.;			// scale to 0 - 255\n\n	return vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n	float val;\n	if (index == 0) {\n		val = v.r;\n	} else if(index == 1) {\n		val = v.g;\n	} else if(index == 2) {\n		val = v.b;\n	} else if(index == 3){\n		val = v.a;\n	} else {\n		// should never be here\n		val = 0.0;\n	}\n\n	return val;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n 	float row = outTex.y;\n	float col = outTex.x;\n\n	// direct usage of col requires output be padded exactly like input\n	vec4 x = texture2D( X, vec2(col, row));\n	vec4 sum_v = (a * x) + b;\n	int channel = int(mod(col * float(N + pad), 4.0 ));\n	float sum = select_index_1604150559(sum_v, channel);\n\n	if (sum == 0.) {\n		gl_FragColor = vec4(0.,0.,0.,0.);\n		return;\n	}\n\n 	// output vec4 with bytes for an IEEE754 32-bit floating point number\n	gl_FragColor = encode_float_1540259130(sum);\n}\n",o="#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D X;		// texture with data from padded X\nuniform int       N;		// number of columns\nuniform int       pad;		// additional columns to nearest multiple of four\nuniform float     b; 		// additive term\nuniform float     a; 		// multiplicative term\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n	v.a = 0.0;\n	if(pad == 2){\n		v.b = 0.0;\n	} else if(pad == 3){\n		v.b = 0.0;\n		v.g = 0.0;\n	}\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row_t = outTex.y;\n	float col_t = outTex.x;\n	float col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\n	// direct usage of col requires output be padded exactly like input\n	vec4 x = texture2D( X, vec2(col_t, row_t));\n	vec4 sum_v = (a * x) + b;\n\n	// fix padded region\n	if(pad > 0 && col + 4.0 > float(N) ) {\n		fix_pad_1540259130(sum_v, pad);\n	}\n\n	gl_FragColor = sum_v;\n}\n";this.standalone?this.program=this.webgl.createProgram(e):this.program=this.webgl.createProgram(o)}var WebGL=require("./webgl");module.exports=SSCALCalculator,SSCALCalculator.TEXTURE_UNIFORM_NAME_0="X",SSCALCalculator.LENGTH_UNIFORM_NAME="N",SSCALCalculator.ADD_UNIFORM_NAME="b",SSCALCalculator.MUL_UNIFORM_NAME="a",SSCALCalculator.prototype.calculate=function(n,t,e,o,a,i){var l=this.webgl.context,r=t%WebGL.COMPONENTS_PER_TEXEL,u=0==r?0:WebGL.COMPONENTS_PER_TEXEL-r;this.webgl.selectProgram(this.program),this.bindInputTexture(a,l.TEXTURE0,SSCALCalculator.TEXTURE_UNIFORM_NAME_0),this.bindUniforms(t,u,e,o),this.standalone?this.webgl.bindOutputTexture(n,t+u,i):this.webgl.bindOutputTexture(n,(t+u)/4,i),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0),this.webgl.unbindInputTexture(l.TEXTURE0)},SSCALCalculator.prototype.bindInputTexture=function(n,t,e){var o=this.webgl.context,a=this.program;o.activeTexture(t),o.bindTexture(o.TEXTURE_2D,n);var i=o.getUniformLocation(a,e);o.uniform1i(i,t-o.TEXTURE0)},SSCALCalculator.prototype.bindUniforms=function(n,t,e,o){var a=this.webgl.context,i=a.getUniformLocation(this.program,SSCALCalculator.LENGTH_UNIFORM_NAME),l=a.getUniformLocation(this.program,SSCALCalculator.ADD_UNIFORM_NAME),r=a.getUniformLocation(this.program,SSCALCalculator.MUL_UNIFORM_NAME),u=a.getUniformLocation(this.program,"pad");a.uniform1i(i,n),a.uniform1i(u,t),a.uniform1f(r,e),a.uniform1f(l,o)};
},{"./webgl":11}],9:[function(require,module,exports){
function Tensor(e,t){if(2!=e.length)throw new Error("Only Tensor of order two (matrix) is supported right now.");var r=e[0],s=e[1];this.texture=gl.createDataTexture(r,s,t),this.shape=[r,s]}var globals=require("./globals"),gl=globals.gl;module.exports=Tensor,Tensor.prototype["delete"]=function(){gl.context.deleteTexture(this.texture),this.texture=null,this.shape=null},Tensor.prototype.transfer=function(e){var t,r,s=this.shape[0],o=this.shape[1];return t=gl.createOutputTexture(s,o),gl.encode(s,o,this.texture,t),r=new Float32Array(gl.readData(s,o)),gl.context.deleteTexture(t),e||this["delete"](),r},Tensor.prototype.reshape=function(e,t){var r=this.shape[0],s=this.shape[1],o=e[0],n=e[1],l=new Tensor(e,null);return gl.reshape(r,s,o,n,this.texture,l.texture),t||this["delete"](),l},Tensor.prototype.transpose=function(e){var t=this.shape[0],r=this.shape[1],s=new Tensor([r,t],null);return gl.transpose(t,r,this.texture,s.texture),e||this["delete"](),s};
},{"./globals":2}],10:[function(require,module,exports){
var async=require("async"),loader=require("floader");test={},test.allclose=function(e,t,r,a){if(r=r||1e-5,a=a||1e-8,e.length!=t.length)return console.log("lengths not equal: "+e.length+", "+t.length),{result:!1,index:null};for(var n,l=0;l<e.length;l++)if(n=Math.abs(e[l]-t[l])<=a+r*Math.abs(t[l]),!n)return{result:!1,index:l};return{result:!0,index:l}},test.randomArray=function(e,t){for(var r=[],a=0;e>a;a++){for(var n=[],l=0;t>l;l++)n[l]=Math.random()/Math.sqrt(e);r.push(n)}return r},test.padData=function(e,t,r,a){for(var n=new Float32Array(e*(t+r)),l=0;e>l;l++)n.set(a.subarray(l*t,(l+1)*t),l*(t+r));return n},test.load=function(e,t,r){var a=t.map(function(t){return e+t});async.map(a,loader.load,function(e,t){if(e)return r(e);var a=t.map(JSON.parse);r(e,a)})},test.assert={},test.assert.allclose=function(e,t,r,a,n,l){var s=test.allclose(t,r,n,l),o="[",u="[";if(!s.result){s.index>1&&(o+="..., ",u+="..., "),s.index>0&&(o+=t[s.index-1]+", ",u+=r[s.index-1]+", "),o+="-->",u+="-->";for(var i=s.index;i<s.index+4&&i<t.length;i++)o+=t[i]+", ",u+=r[i]+", ";i<t.length?(o+="...]",u+="...]"):(o+="]",u+="]"),a=a||"should be allclose at "+s.index}e._assert(s.result,{message:a||"should be allclose",operator:"allclose",actual:o,expected:u,extra:null})},module.exports=test;
},{"async":12,"floader":13}],11:[function(require,module,exports){
function WebGL(e){var t,n;if(e=e||{},"undefined"==typeof e.canvas?this.canvas=document.createElement("canvas"):this.canvas=e.canvas,t={premultipliedAlpha:!1,preserveDrawingBuffer:!1},this.context=this.canvas.getContext("experimental-webgl",t),"undefined"==typeof this.context)throw new Error("No support for Webgl.");try{n=this.context.getExtension("OES_texture_float")}catch(o){}n?this.hasFloat=!0:(console.log("No support for OES_texture_float extension."),this.hasFloat=!1);var r=this.context.getShaderPrecisionFormat(this.context.FRAGMENT_SHADER,this.context.HIGH_FLOAT);this.hasHighPrecision=0!=r.precision,this.hasHighPrecision&&(this.highp=r);var i="#define GLSLIFY 1\n// vertex shader for a single quad\n// work is performed in the operation specific texture shader\n\nprecision highp float;\n\nattribute vec3 pos;\nattribute vec2 tex;\nvarying vec2   outTex;\nvoid main(void)\n{\n	// just pass the position and texture coords\n	gl_Position = vec4(pos, 1.0);\n	outTex = tex;\n}\n";this.vertexShader=this.context.createShader(this.context.VERTEX_SHADER),this.context.shaderSource(this.vertexShader,i),this.context.compileShader(this.vertexShader);var a="#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D A;		// texture with data from padded A\nuniform int       N;		// number of columns in output\nuniform int       pad;		//\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n	// TODO: correctly handle denormal numbers\n	// http://www.2ality.com/2012/04/number-encoding.html\n	float a = abs(val);                           // encode absolute value + sign\n	float exp = floor(log2(a));                 // number of powers of 2\n	float mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n	float mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n	float mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n	float mant3 = mod(mant,256.);               // third 8 bits\n\n	highp float sign = 128.-128.*(a/val);			// sign bit is 256 or 0\n	highp float e = (sign+exp+127.)/510.;		// exponent and sign\n	highp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n	highp float m2 = (mant2)/255.;				// middle part\n	highp float m3 = (mant3+.5)/255.;			// scale to 0 - 255\n\n	return vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n	float val;\n	if (index == 0) {\n		val = v.r;\n	} else if(index == 1) {\n		val = v.g;\n	} else if(index == 2) {\n		val = v.b;\n	} else if(index == 3){\n		val = v.a;\n	} else {\n		// should never be here\n		val = 0.0;\n	}\n\n	return val;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row_t = outTex.y;\n	float col_t = outTex.x;\n\n	vec4 val_v = texture2D(A, vec2(col_t * float(N)/float(N + pad), row_t));\n	int channel = int(mod(col_t * float(N), 4.0 ));\n	float val = select_index_1604150559(val_v, channel);\n\n	if (val == 0.) {\n		gl_FragColor = vec4(0.,0.,0.,0.);\n		return;\n	}\n\n 	// output vec4 with bytes for an IEEE754 32-bit floating point number\n	gl_FragColor = encode_float_1540259130(val);\n}\n",l="#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D A;		// texture with data from padded A\nuniform int       M;		// number of rows in output\nuniform int       N;		// number of columns in output\nuniform int       mpad;		//\nuniform int       npad;		//\n\n// select an element from a vector based on index\nfloat select_index_1540259130(vec4 v, int index){\n	float val;\n	if (index == 0) {\n		val = v.r;\n	} else if(index == 1) {\n		val = v.g;\n	} else if(index == 2) {\n		val = v.b;\n	} else if(index == 3){\n		val = v.a;\n	} else {\n		// should never be here\n		val = 0.0;\n	}\n\n	return val;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row_t = outTex.y;\n	float col_t = outTex.x;\n	float col = (col_t * float(N + npad) - 2.0); // index of first element in pixel (matrix space)\n\n	// get rows in the input, each containing one element in the output\n	vec4 row_1 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 0.5)/float(N)));\n	vec4 row_2 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 1.5)/float(N)));\n	vec4 row_3 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 2.5)/float(N)));\n	vec4 row_4 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 3.5)/float(N)));\n\n	// package into output vector\n	int channel = int(mod(row_t * float(M), 4.0 ));\n\n	vec4 col_v = vec4(0.0, 0.0, 0.0, 0.0); // vec4 representing four elements in a column in the input\n\n	// extract relevent element from each input row\n	col_v.r = select_index_1540259130(row_1, channel);\n	if(npad > 0 && (col + 4.0) > float(N) ) {\n		// compute elements in padded region\n		if(npad < 3){\n			col_v.g = select_index_1540259130(row_2, channel);\n		}\n		if(npad < 2){\n			col_v.b = select_index_1540259130(row_3, channel);\n		}\n	} else {\n		col_v.g = select_index_1540259130(row_2, channel);\n		col_v.b = select_index_1540259130(row_3, channel);\n		col_v.a = select_index_1540259130(row_4, channel);\n	}\n\n	gl_FragColor = col_v;\n}\n",s="#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2      outTex;	// texture coords of row/column to calculate\nuniform sampler2D A;		// texture with data from padded A\nuniform float     M;		// number of rows in output\nuniform float     N;		// number of columns in output\nuniform float     pad;		// column padding in output\nuniform float     M_in;		// number of rows in input\nuniform float     N_in;		// number of columns in input\nuniform float     pad_in;	// column padding in input\n\n/* number of input pixels\n   origin index (channel) for each\n   termination index (channel) for each\n   destination origin index (channel) for each\n */\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n	float val;\n	if (index == 0) {\n		val = v.r;\n	} else if(index == 1) {\n		val = v.g;\n	} else if(index == 2) {\n		val = v.b;\n	} else if(index == 3){\n		val = v.a;\n	} else {\n		// should never be here\n		val = 0.0;\n	}\n\n	return val;\n}\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n	v.a = 0.0;\n	if(pad == 2){\n		v.b = 0.0;\n	} else if(pad == 3){\n		v.b = 0.0;\n		v.g = 0.0;\n	}\n}\n\n// translate a linear index into x, y coordinates for a matrix\nvec2 linear_index_coords(float linear_index, float row_length){\n	vec2 coords;\n\n	coords.x = floor(mod(linear_index + 0.5, row_length)); // column\n	coords.y = floor((linear_index + 0.5) / row_length); // row\n\n	return coords;\n}\n\nvoid main(void) {\n\n	// get the implied row and column from .y and .x of passed (output)\n	// texture coordinate. These map directly to input texture space when\n	// the relevant dimensions are the same.\n	float row_t = outTex.y;\n	float col_t = outTex.x;\n\n	float row = floor(row_t * M);\n	float col_0 = (col_t * (N + pad) - 2.0); // index of first element in pixel (matrix space)\n	//float col_0 = floor(col_t * (N + pad)/4.0)*4.0; // index of first element in pixel (matrix space)\n	float lin_index_0 = row * N + col_0; // linearized index of first element in pixel in output\n\n	vec4 pixel_in = vec4(0.0, 0.0, 0.0, 0.0);\n	vec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n	vec2 coords = linear_index_coords(lin_index_0, N_in);\n	vec2 ncoords;\n	int current_pixel_index = int(mod(coords.x, 4.0));\n\n	pixel_in = texture2D(A, vec2((coords.x + 0.5)/(N_in + pad_in), (coords.y + 0.5)/M_in));\n\n	// go through channels for current output pixel\n	for(int i = 0; i < 4; i++){\n\n		// are we on a new input pixel?\n		ncoords = linear_index_coords(lin_index_0 + float(i), N_in);\n		if(floor(coords.x/4.0) != floor(ncoords.x/4.0) || coords.y != ncoords.y){\n			coords = ncoords;\n			pixel_in = texture2D(A, vec2((coords.x + 0.5)/(N_in + pad_in), (coords.y + 0.5)/M_in));\n			current_pixel_index = 0;\n		}\n\n		if(i == 0){\n			result.r = select_index_1604150559(pixel_in, current_pixel_index);\n		} else if(i == 1){\n			result.g = select_index_1604150559(pixel_in, current_pixel_index);\n		} else if(i == 2){\n			result.b = select_index_1604150559(pixel_in, current_pixel_index);\n		} else {\n			result.a = select_index_1604150559(pixel_in, current_pixel_index);\n		}\n\n		current_pixel_index++;\n	}\n\n	// are we in the padded (output) region?\n	if(pad > 0.0 && col_0 + 3.5 > N ) {\n		fix_pad_1540259130(result, int(pad));\n	}\n\n	gl_FragColor = result;\n}\n";this.encode_program=this.createProgram(a),this.transpose_program=this.createProgram(l),this.reshape_program=this.createProgram(s)}module.exports=WebGL,WebGL.COMPONENTS_PER_TEXEL=4,WebGL.POSITION_UNIFORM_NAME="pos",WebGL.TEXTURE_UNIFORM_NAME="tex",WebGL.prototype.encode=function(e,t,n,o){this.program=this.encode_program,this.selectProgram(this.program);var r=this.getPad(t),i=this.context.getUniformLocation(this.program,"N"),a=this.context.getUniformLocation(this.program,"pad");this.context.uniform1i(i,t),this.context.uniform1i(a,r),this.bindInputTexture(n,this.context.TEXTURE0,"A"),this.bindOutputTexture(e,t,o),this.context.drawElements(this.context.TRIANGLES,6,this.context.UNSIGNED_SHORT,0),this.unbindInputTexture(this.context.TEXTURE0)},WebGL.prototype.transpose=function(e,t,n,o){this.program=this.transpose_program,this.selectProgram(this.program);var r=this.getPad(t),i=this.getPad(e),a=this.context.getUniformLocation(this.program,"N"),l=this.context.getUniformLocation(this.program,"npad"),s=this.context.getUniformLocation(this.program,"M"),c=this.context.getUniformLocation(this.program,"mpad");this.context.uniform1i(a,e),this.context.uniform1i(l,i),this.context.uniform1i(s,t),this.context.uniform1i(c,r),this.bindInputTexture(n,this.context.TEXTURE0,"A"),this.bindOutputTexture(t,(e+i)/4,o),this.context.drawElements(this.context.TRIANGLES,6,this.context.UNSIGNED_SHORT,0),this.unbindInputTexture(this.context.TEXTURE0)},WebGL.prototype.reshape=function(e,t,n,o,r,i){this.program=this.reshape_program,this.selectProgram(this.program);var a=this.getPad(t),l=this.getPad(o),s=this.context.getUniformLocation(this.program,"M"),c=this.context.getUniformLocation(this.program,"N"),f=this.context.getUniformLocation(this.program,"pad"),u=this.context.getUniformLocation(this.program,"M_in"),d=this.context.getUniformLocation(this.program,"N_in"),x=this.context.getUniformLocation(this.program,"pad_in");this.context.uniform1f(s,n),this.context.uniform1f(c,o),this.context.uniform1f(f,l),this.context.uniform1f(u,e),this.context.uniform1f(d,t),this.context.uniform1f(x,a),this.bindInputTexture(r,this.context.TEXTURE0,"A"),this.bindOutputTexture(n,(o+l)/4,i),this.context.drawElements(this.context.TRIANGLES,6,this.context.UNSIGNED_SHORT,0),this.unbindInputTexture(this.context.TEXTURE0)},WebGL.prototype.bindInputTexture=function(e,t,n){var o=this.context,r=this.program;o.activeTexture(t),o.bindTexture(o.TEXTURE_2D,e);var i=o.getUniformLocation(r,n);o.uniform1i(i,t-o.TEXTURE0)},WebGL.prototype.createProgram=function(e){var t,n=this.context;if(t=n.createShader(n.FRAGMENT_SHADER),n.shaderSource(t,e),n.compileShader(t),0==n.getShaderParameter(t,n.COMPILE_STATUS))throw new Error(n.getShaderInfoLog(t));var o=n.createProgram();return n.attachShader(o,this.vertexShader),n.attachShader(o,t),n.linkProgram(o),o},WebGL.prototype.selectProgram=function(e){var t=this.context;t.useProgram(e),this.bindVertices(e)},WebGL.prototype.bindVertices=function(e){var t=this.context,n=e,o=t.getAttribLocation(n,WebGL.POSITION_UNIFORM_NAME),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r);var i=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.vertexAttribPointer(o,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o);var a=t.getAttribLocation(n,WebGL.TEXTURE_UNIFORM_NAME),l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l);var s=[0,0,1,0,1,1,0,1];t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a);var c=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c);var f=[0,1,2,0,2,3];t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),t.STATIC_DRAW)},WebGL.prototype.createDataTexture=function(e,t,n){var o=this.context,r=[0,0,0,0],i=t%WebGL.COMPONENTS_PER_TEXEL,a=0==i?0:WebGL.COMPONENTS_PER_TEXEL-i,l=o.createTexture();if(o.bindTexture(o.TEXTURE_2D,l),0==a||null==n||"undefined"==typeof n)o.texImage2D(o.TEXTURE_2D,0,o.RGBA,(t+a)/WebGL.COMPONENTS_PER_TEXEL,e,0,o.RGBA,o.FLOAT,n);else{o.texImage2D(o.TEXTURE_2D,0,o.RGBA,(t+a)/WebGL.COMPONENTS_PER_TEXEL,e,0,o.RGBA,o.FLOAT,null);for(var s,c,f=t-i,u=f/WebGL.COMPONENTS_PER_TEXEL,d=0,x=new Float32Array(r),_=0;e>_;_++)d=_*t,full_texel_row_end=d+f,s=new Float32Array(n.buffer,d*n.BYTES_PER_ELEMENT,f),f>0&&o.texSubImage2D(o.TEXTURE_2D,0,0,_,u,1,o.RGBA,o.FLOAT,s),c=new Float32Array(n.buffer,full_texel_row_end*n.BYTES_PER_ELEMENT,i),x.set(c),o.texSubImage2D(o.TEXTURE_2D,0,u,_,1,1,o.RGBA,o.FLOAT,x)}return o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.bindTexture(o.TEXTURE_2D,null),l},WebGL.prototype.createOutputTexture=function(e,t){var n=this.context,o=this.getPad(t),r=n.createTexture();return n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t+o,e,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.bindTexture(n.TEXTURE_2D,null),r},WebGL.prototype.bindOutputTexture=function(e,t,n){var o=this.context;if(this.canvas.height=e,this.canvas.width=t,o.viewport(0,0,t,e),this.framebuffer=this.framebuffer||o.createFramebuffer(),o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,n,0),o.checkFramebufferStatus(o.FRAMEBUFFER)!=o.FRAMEBUFFER_COMPLETE)throw new Error("Bound framebuffer is not complete.");return this.framebuffer},WebGL.prototype.unbindInputTexture=function(e){var t=this.context;t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null)},WebGL.prototype.readData=function(e,t){var n=this.context;return rawbuffer=new ArrayBuffer(e*t*Float32Array.BYTES_PER_ELEMENT),prod=new Uint8Array(rawbuffer),n.readPixels(0,0,t,e,n.RGBA,n.UNSIGNED_BYTE,prod),rawbuffer},WebGL.prototype.getPad=function(e){var t=e%WebGL.COMPONENTS_PER_TEXEL,n=0==t?0:WebGL.COMPONENTS_PER_TEXEL-t;return n};
},{}],12:[function(require,module,exports){
(function (process,global){
!function(){function n(){}function t(n){return n}function e(n){return!!n}function r(n){return!n}function u(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments),n=null}}function i(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}function o(n){return M(n)||"number"==typeof n.length&&n.length>=0&&n.length%1===0}function c(n,t){for(var e=-1,r=n.length;++e<r;)t(n[e],e,n)}function a(n,t){for(var e=-1,r=n.length,u=Array(r);++e<r;)u[e]=t(n[e],e,n);return u}function f(n){return a(Array(n),function(n,t){return t})}function l(n,t,e){return c(n,function(n,r,u){e=t(e,n,r,u)}),e}function s(n,t){c(W(n),function(e){t(n[e],e)})}function p(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function h(n){var t,e,r=-1;return o(n)?(t=n.length,function(){return r++,t>r?r:null}):(e=W(n),t=e.length,function(){return r++,t>r?e[r]:null})}function m(n,t){return t=null==t?n.length-1:+t,function(){for(var e=Math.max(arguments.length-t,0),r=Array(e),u=0;e>u;u++)r[u]=arguments[u+t];switch(t){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r)}}}function y(n){return function(t,e,r){return n(t,r)}}function v(t){return function(e,r,o){o=i(o||n),e=e||[];var c=h(e);if(0>=t)return o(null);var a=!1,f=0,l=!1;!function s(){if(a&&0>=f)return o(null);for(;t>f&&!l;){var n=c();if(null===n)return a=!0,void(0>=f&&o(null));f+=1,r(e[n],n,u(function(n){f-=1,n?(o(n),l=!0):s()}))}}()}}function d(n){return function(t,e,r){return n(C.eachOf,t,e,r)}}function g(n){return function(t,e,r,u){return n(v(e),t,r,u)}}function k(n){return function(t,e,r){return n(C.eachOfSeries,t,e,r)}}function b(t,e,r,u){u=i(u||n),e=e||[];var c=o(e)?[]:{};t(e,function(n,t,e){r(n,function(n,r){c[t]=r,e(n)})},function(n){u(n,c)})}function w(n,t,e,r){var u=[];n(t,function(n,t,r){e(n,function(e){e&&u.push({index:t,value:n}),r()})},function(){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function O(n,t,e,r){w(n,t,function(n,t){e(n,function(n){t(!n)})},r)}function S(n,t,e){return function(r,u,i,o){function c(){o&&o(e(!1,void 0))}function a(n,r,u){return o?void i(n,function(r){o&&t(r)&&(o(e(!0,n)),o=i=!1),u()}):u()}arguments.length>3?n(r,u,a,c):(o=i,i=u,n(r,a,c))}}function E(n,t){return t}function L(t,e,r){r=r||n;var u=o(e)?[]:{};t(e,function(n,t,e){n(m(function(n,r){r.length<=1&&(r=r[0]),u[t]=r,e(n)}))},function(n){r(n,u)})}function I(n,t,e,r){var u=[];n(t,function(n,t,r){e(n,function(n,t){u=u.concat(t||[]),r(n)})},function(n){r(n,u)})}function x(t,e,r){function i(t,e,r,u){if(null!=u&&"function"!=typeof u)throw new Error("task callback must be a function");return t.started=!0,M(e)||(e=[e]),0===e.length&&t.idle()?C.setImmediate(function(){t.drain()}):(c(e,function(e){var i={data:e,callback:u||n};r?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),void C.setImmediate(t.process))}function o(n,t){return function(){f-=1;var e=!1,r=arguments;c(t,function(n){c(l,function(t,r){t!==n||e||(l.splice(r,1),e=!0)}),n.callback.apply(n,r)}),n.tasks.length+f===0&&n.drain(),n.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var f=0,l=[],s={tasks:[],concurrency:e,payload:r,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(n,t){i(s,n,!1,t)},kill:function(){s.drain=n,s.tasks=[]},unshift:function(n,t){i(s,n,!0,t)},process:function(){if(!s.paused&&f<s.concurrency&&s.tasks.length)for(;f<s.concurrency&&s.tasks.length;){var n=s.payload?s.tasks.splice(0,s.payload):s.tasks.splice(0,s.tasks.length),e=a(n,function(n){return n.data});0===s.tasks.length&&s.empty(),f+=1,l.push(n[0]);var r=u(o(s,n));t(e,r)}},length:function(){return s.tasks.length},running:function(){return f},workersList:function(){return l},idle:function(){return s.tasks.length+f===0},pause:function(){s.paused=!0},resume:function(){if(s.paused!==!1){s.paused=!1;for(var n=Math.min(s.concurrency,s.tasks.length),t=1;n>=t;t++)C.setImmediate(s.process)}}};return s}function j(n){return m(function(t,e){t.apply(null,e.concat([m(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&c(e,function(t){console[n](t)}))})]))})}function A(n){return function(t,e,r){n(f(t),e,r)}}function T(n){return m(function(t,e){var r=m(function(e){var r=this,u=e.pop();return n(t,function(n,t,u){n.apply(r,e.concat([u]))},u)});return e.length?r.apply(this,e):r})}function z(n){return m(function(t){var e=t.pop();t.push(function(){var n=arguments;r?C.setImmediate(function(){e.apply(null,n)}):e.apply(null,n)});var r=!0;n.apply(this,t),r=!1})}var q,C={},P="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=P&&(q=P.async),C.noConflict=function(){return P.async=q,C};var H=Object.prototype.toString,M=Array.isArray||function(n){return"[object Array]"===H.call(n)},U=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},W=Object.keys||function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t},B="function"==typeof setImmediate&&setImmediate,D=B?function(n){B(n)}:function(n){setTimeout(n,0)};"object"==typeof process&&"function"==typeof process.nextTick?C.nextTick=process.nextTick:C.nextTick=D,C.setImmediate=B?D:C.nextTick,C.forEach=C.each=function(n,t,e){return C.eachOf(n,y(t),e)},C.forEachSeries=C.eachSeries=function(n,t,e){return C.eachOfSeries(n,y(t),e)},C.forEachLimit=C.eachLimit=function(n,t,e,r){return v(t)(n,y(e),r)},C.forEachOf=C.eachOf=function(t,e,r){function o(n){f--,n?r(n):null===c&&0>=f&&r(null)}r=i(r||n),t=t||[];for(var c,a=h(t),f=0;null!=(c=a());)f+=1,e(t[c],c,u(o));0===f&&r(null)},C.forEachOfSeries=C.eachOfSeries=function(t,e,r){function o(){var n=!0;return null===a?r(null):(e(t[a],a,u(function(t){if(t)r(t);else{if(a=c(),null===a)return r(null);n?C.setImmediate(o):o()}})),void(n=!1))}r=i(r||n),t=t||[];var c=h(t),a=c();o()},C.forEachOfLimit=C.eachOfLimit=function(n,t,e,r){v(t)(n,e,r)},C.map=d(b),C.mapSeries=k(b),C.mapLimit=g(b),C.inject=C.foldl=C.reduce=function(n,t,e,r){C.eachOfSeries(n,function(n,r,u){e(t,n,function(n,e){t=e,u(n)})},function(n){r(n,t)})},C.foldr=C.reduceRight=function(n,e,r,u){var i=a(n,t).reverse();C.reduce(i,e,r,u)},C.transform=function(n,t,e,r){3===arguments.length&&(r=e,e=t,t=M(n)?[]:{}),C.eachOf(n,function(n,r,u){e(t,n,r,u)},function(n){r(n,t)})},C.select=C.filter=d(w),C.selectLimit=C.filterLimit=g(w),C.selectSeries=C.filterSeries=k(w),C.reject=d(O),C.rejectLimit=g(O),C.rejectSeries=k(O),C.any=C.some=S(C.eachOf,e,t),C.someLimit=S(C.eachOfLimit,e,t),C.all=C.every=S(C.eachOf,r,r),C.everyLimit=S(C.eachOfLimit,r,r),C.detect=S(C.eachOf,t,E),C.detectSeries=S(C.eachOfSeries,t,E),C.detectLimit=S(C.eachOfLimit,t,E),C.sortBy=function(n,t,e){function r(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0}C.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){return n?e(n):void e(null,a(t.sort(r),function(n){return n.value}))})},C.auto=function(t,e,r){function u(n){d.unshift(n)}function o(n){var t=p(d,n);t>=0&&d.splice(t,1)}function a(){h--,c(d.slice(0),function(n){n()})}r||(r=e,e=null),r=i(r||n);var f=W(t),h=f.length;if(!h)return r(null);e||(e=h);var y={},v=0,d=[];u(function(){h||r(null,y)}),c(f,function(n){function i(){return e>v&&l(g,function(n,t){return n&&y.hasOwnProperty(t)},!0)&&!y.hasOwnProperty(n)}function c(){i()&&(v++,o(c),h[h.length-1](d,y))}for(var f,h=M(t[n])?t[n]:[t[n]],d=m(function(t,e){if(v--,e.length<=1&&(e=e[0]),t){var u={};s(y,function(n,t){u[t]=n}),u[n]=e,r(t,u)}else y[n]=e,C.setImmediate(a)}),g=h.slice(0,h.length-1),k=g.length;k--;){if(!(f=t[g[k]]))throw new Error("Has inexistant dependency");if(M(f)&&p(f,n)>=0)throw new Error("Has cyclic dependencies")}i()?(v++,h[h.length-1](d,y)):u(c)})},C.retry=function(n,t,e){function r(n,t){if("number"==typeof t)n.times=parseInt(t,10)||i;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);n.times=parseInt(t.times,10)||i,n.interval=parseInt(t.interval,10)||o}}function u(n,t){function e(n,e){return function(r){n(function(n,t){r(!n||e,{err:n,result:t})},t)}}function r(n){return function(t){setTimeout(function(){t(null)},n)}}for(;a.times;){var u=!(a.times-=1);c.push(e(a.task,u)),!u&&a.interval>0&&c.push(r(a.interval))}C.series(c,function(t,e){e=e[e.length-1],(n||a.callback)(e.err,e.result)})}var i=5,o=0,c=[],a={times:i,interval:o},f=arguments.length;if(1>f||f>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=f&&"function"==typeof n&&(e=t,t=n),"function"!=typeof n&&r(a,n),a.callback=e,a.task=t,a.callback?u():u},C.waterfall=function(t,e){function r(n){return m(function(t,u){if(t)e.apply(null,[t].concat(u));else{var i=n.next();i?u.push(r(i)):u.push(e),z(n).apply(null,u)}})}if(e=i(e||n),!M(t)){var u=new Error("First argument to waterfall must be an array of functions");return e(u)}return t.length?void r(C.iterator(t))():e()},C.parallel=function(n,t){L(C.eachOf,n,t)},C.parallelLimit=function(n,t,e){L(v(t),n,e)},C.series=function(n,t){L(C.eachOfSeries,n,t)},C.iterator=function(n){function t(e){function r(){return n.length&&n[e].apply(null,arguments),r.next()}return r.next=function(){return e<n.length-1?t(e+1):null},r}return t(0)},C.apply=m(function(n,t){return m(function(e){return n.apply(null,t.concat(e))})}),C.concat=d(I),C.concatSeries=k(I),C.whilst=function(t,e,r){if(r=r||n,t()){var u=m(function(n,i){n?r(n):t.apply(this,i)?e(u):r(null)});e(u)}else r(null)},C.doWhilst=function(n,t,e){var r=0;return C.whilst(function(){return++r<=1||t.apply(this,arguments)},n,e)},C.until=function(n,t,e){return C.whilst(function(){return!n.apply(this,arguments)},t,e)},C.doUntil=function(n,t,e){return C.doWhilst(n,function(){return!t.apply(this,arguments)},e)},C.during=function(t,e,r){r=r||n;var u=m(function(n,e){n?r(n):(e.push(i),t.apply(this,e))}),i=function(n,t){n?r(n):t?e(u):r(null)};t(i)},C.doDuring=function(n,t,e){var r=0;C.during(function(n){r++<1?n(null,!0):t.apply(this,arguments)},n,e)},C.queue=function(n,t){var e=x(function(t,e){n(t[0],e)},t,1);return e},C.priorityQueue=function(t,e){function r(n,t){return n.priority-t.priority}function u(n,t,e){for(var r=-1,u=n.length-1;u>r;){var i=r+(u-r+1>>>1);e(t,n[i])>=0?r=i:u=i-1}return r}function i(t,e,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,M(e)||(e=[e]),0===e.length?C.setImmediate(function(){t.drain()}):void c(e,function(e){var c={data:e,priority:i,callback:"function"==typeof o?o:n};t.tasks.splice(u(t.tasks,c,r)+1,0,c),t.tasks.length===t.concurrency&&t.saturated(),C.setImmediate(t.process)})}var o=C.queue(t,e);return o.push=function(n,t,e){i(o,n,t,e)},delete o.unshift,o},C.cargo=function(n,t){return x(n,1,t)},C.log=j("log"),C.dir=j("dir"),C.memoize=function(n,e){var r={},u={};e=e||t;var i=m(function(t){var i=t.pop(),o=e.apply(null,t);o in r?C.setImmediate(function(){i.apply(null,r[o])}):o in u?u[o].push(i):(u[o]=[i],n.apply(null,t.concat([m(function(n){r[o]=n;var t=u[o];delete u[o];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,n)})])))});return i.memo=r,i.unmemoized=n,i},C.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},C.times=A(C.map),C.timesSeries=A(C.mapSeries),C.timesLimit=function(n,t,e,r){return C.mapLimit(f(n),t,e,r)},C.seq=function(){var t=arguments;return m(function(e){var r=this,u=e[e.length-1];"function"==typeof u?e.pop():u=n,C.reduce(t,e,function(n,t,e){t.apply(r,n.concat([m(function(n,t){e(n,t)})]))},function(n,t){u.apply(r,[n].concat(t))})})},C.compose=function(){return C.seq.apply(null,Array.prototype.reverse.call(arguments))},C.applyEach=T(C.eachOf),C.applyEachSeries=T(C.eachOfSeries),C.forever=function(t,e){function r(n){return n?i(n):void o(r)}var i=u(e||n),o=z(t);r()},C.ensureAsync=z,C.constant=m(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),C.wrapSync=C.asyncify=function(n){return m(function(t){var e,r=t.pop();try{e=n.apply(this,t)}catch(u){return r(u)}U(e)&&"function"==typeof e.then?e.then(function(n){r(null,n)})["catch"](function(n){r(n.message?n:new Error(n))}):r(null,e)})},"object"==typeof module&&module.exports?module.exports=C:"function"==typeof define&&define.amd?define([],function(){return C}):P.async=C}();
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":14}],13:[function(require,module,exports){
exports.load=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(n.status>=200&&n.status<300)t(null,n.responseText);else{var r=new Error("failed to request file '"+e+"'");r.errno=34,t(r)}};try{n.open("GET",e,!0),n.send(null)}catch(r){t(r)}};
},{}],14:[function(require,module,exports){
function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var e=setTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,clearTimeout(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];queue.push(new Item(e,n)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}]},{},[1])(1)
});


</script><script>//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/base.js
var T;function wa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function za(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:wa(a)}}function Ra(a){if(!(a instanceof Array)){a=za(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ab="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},db;
if("function"==typeof Object.setPrototypeOf)db=Object.setPrototypeOf;else{var fb;a:{var lb={a:!0},pb={};try{pb.__proto__=lb;fb=pb.a;break a}catch(a){}fb=!1}db=fb?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ub=db;
function Ab(a,b){a.prototype=ab(b.prototype);a.prototype.constructor=a;if(ub)ub(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c];a.superClass_=b.prototype}function Cb(a){return"string"==typeof a}
function Fb(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function Gb(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(e,f,g){for(var h=Array(arguments.length-2),l=2;l<arguments.length;l++)h[l-2]=arguments[l];return b.prototype[f].apply(e,h)}};
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/transitionalforwarddeclarations.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/debug/error.js
function Hb(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Hb);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a));this.reportErrorToServer=!0}Gb(Hb,Error);Hb.prototype.name="CustomError";
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/dom/nodetype.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/asserts/asserts.js
function Ib(a,b){Hb.call(this,Jb(a,b));this.messagePattern=a}Gb(Ib,Hb);Ib.prototype.name="AssertionError";function Jb(a,b){a=a.split("%s");for(var c="",e=a.length-1,f=0;f<e;f++)c+=a[f]+(f<b.length?b[f]:"%s");return c+a[e]}function Kb(a,b){throw new Ib("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/array/array.js
var Lb=Array.prototype.forEach?function(a,b){Array.prototype.forEach.call(a,b,void 0)}:function(a,b){for(var c=a.length,e=Cb(a)?a.split(""):a,f=0;f<c;f++)f in e&&b.call(void 0,e[f],f,a)},Mb=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=a.length,e=Array(c),f=Cb(a)?a.split(""):a,g=0;g<c;g++)g in f&&(e[g]=b.call(void 0,f[g],g,a));return e};
function Ob(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)};
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/crypt/crypt.js
function Pb(a){if(8192>=a.length)return String.fromCharCode.apply(null,a);for(var b="",c=0;c<a.length;c+=8192)b+=String.fromCharCode.apply(null,Ob(a,c,c+8192));return b};
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/string/internal.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/string/string.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/labs/useragent/util.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/object/object.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/labs/useragent/browser.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/labs/useragent/engine.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/labs/useragent/platform.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/reflect/reflect.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/useragent/useragent.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/useragent/product.js
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/crypt/base64.js
var Qb=null,Rb=null,Tb=null;function Ub(a,b){Vb();b=b?Tb:Qb;for(var c=[],e=0;e<a.length;e+=3){var f=a[e],g=e+1<a.length,h=g?a[e+1]:0,l=e+2<a.length,n=l?a[e+2]:0,m=f>>2;f=(f&3)<<4|h>>4;h=(h&15)<<2|n>>6;n&=63;l||(n=64,g||(h=64));c.push(b[m],b[f],b[h],b[n])}return c.join("")}function Xb(a){var b=a.length,c=0;"\x3d"===a[b-2]?c=2:"\x3d"===a[b-1]&&(c=1);var e=new Uint8Array(Math.ceil(3*b/4)-c),f=0;Zb(a,function(g){e[f++]=g});return e.subarray(0,f)}
function Zb(a,b){function c(n){for(;e<a.length;){var m=a.charAt(e++),q=Rb[m];if(null!=q)return q;if(!/^[\s\xa0]*$/.test(m))throw Error("Unknown base64 encoding at char: "+m);}return n}Vb();for(var e=0;;){var f=c(-1),g=c(0),h=c(64),l=c(64);if(64===l&&-1===f)break;b(f<<2|g>>4);64!=h&&(b(g<<4&240|h>>2),64!=l&&b(h<<6&192|l))}}
function Vb(){if(!Qb){Qb={};Rb={};Tb={};for(var a=0;65>a;a++)Qb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(a),Rb[Qb[a]]=a,Tb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),62<=a&&(Rb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}};
//~~WEBPATH~~external/com_google_protobuf_js/binary/arith.js
function $b(a,b){this.lo=a;this.hi=b}T=$b.prototype;T.cmp=function(a){return this.hi<a.hi||this.hi==a.hi&&this.lo<a.lo?-1:this.hi==a.hi&&this.lo==a.lo?0:1};function bc(a){return new $b((a.lo>>>1|(a.hi&1)<<31)>>>0,a.hi>>>1>>>0)}function cc(a){return new $b(a.lo<<1>>>0,(a.hi<<1|a.lo>>>31)>>>0)}T.lsb=function(){return!!(this.lo&1)};T.zero=function(){return 0==this.lo&&0==this.hi};
T.add=function(a){return new $b((this.lo+a.lo&4294967295)>>>0>>>0,((this.hi+a.hi&4294967295)>>>0)+(4294967296<=this.lo+a.lo?1:0)>>>0)};T.sub=function(a){return new $b((this.lo-a.lo&4294967295)>>>0>>>0,((this.hi-a.hi&4294967295)>>>0)-(0>this.lo-a.lo?1:0)>>>0)};function dc(a){var b=a&65535,c=a>>>16;a=10*b+65536*(0*b&65535)+65536*(10*c&65535);for(b=0*c+(0*b>>>16)+(10*c>>>16);4294967296<=a;)a-=4294967296,b+=1;return new $b(a>>>0,b>>>0)}
T.toString=function(){for(var a="",b=this;!b.zero();){var c=new $b(0,0);b=new $b(b.lo,b.hi);for(var e=new $b(10,0),f=new $b(1,0);!(e.hi&2147483648);)e=cc(e),f=cc(f);for(;!f.zero();)0>=e.cmp(b)&&(c=c.add(f),b=b.sub(e)),e=bc(e),f=bc(f);c=[c,b];b=c[0];a=c[1].lo+a}""==a&&(a="0");return a};function ec(a){for(var b=new $b(0,0),c=new $b(0,0),e=0;e<a.length;e++){if("0">a[e]||"9"<a[e])return null;c.lo=parseInt(a[e],10);var f=dc(b.lo);b=dc(b.hi);b.hi=b.lo;b.lo=0;b=f.add(b).add(c)}return b}
T.clone=function(){return new $b(this.lo,this.hi)};function fc(a,b){this.lo=a;this.hi=b}fc.prototype.add=function(a){return new fc((this.lo+a.lo&4294967295)>>>0>>>0,((this.hi+a.hi&4294967295)>>>0)+(4294967296<=this.lo+a.lo?1:0)>>>0)};fc.prototype.sub=function(a){return new fc((this.lo-a.lo&4294967295)>>>0>>>0,((this.hi-a.hi&4294967295)>>>0)-(0>this.lo-a.lo?1:0)>>>0)};fc.prototype.clone=function(){return new fc(this.lo,this.hi)};
fc.prototype.toString=function(){var a=0!=(this.hi&2147483648),b=new $b(this.lo,this.hi);a&&(b=(new $b(0,0)).sub(b));return(a?"-":"")+b.toString()};function ic(a){var b=0<a.length&&"-"==a[0];b&&(a=a.substring(1));a=ec(a);if(null===a)return null;b&&(a=(new $b(0,0)).sub(a));return new fc(a.lo,a.hi)};
//~~WEBPATH~~external/com_google_protobuf_js/binary/constants.js
function mc(a){switch(a){case 5:case 3:case 13:case 4:case 17:case 18:case 8:case 14:case 31:return 0;case 1:case 6:case 16:case 30:return 1;case 9:case 11:case 12:return 2;case 2:case 7:case 15:return 5;default:return-1}};
//~~WEBPATH~~external/com_google_protobuf_js/binary/utils.js
var oc=0,pc=0;function rc(a){var b=a>>>0;a=Math.floor((a-b)/4294967296)>>>0;oc=b;pc=a}function sc(a){var b=0>a;a=Math.abs(a);var c=a>>>0;a=Math.floor((a-c)/4294967296);a>>>=0;b&&(a=~a>>>0,c=(~c>>>0)+1,4294967295<c&&(c=0,a++,4294967295<a&&(a=0)));oc=c;pc=a}function tc(a){var b=a.charCodeAt(4),c=a.charCodeAt(5),e=a.charCodeAt(6),f=a.charCodeAt(7);oc=a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)>>>0;pc=b+(c<<8)+(e<<16)+(f<<24)>>>0}
function uc(a,b){var c=b&2147483648;c&&(a=~a+1>>>0,b=~b>>>0,0==a&&(b=b+1>>>0));a=4294967296*b+a;return c?-a:a}var zc="0123456789abcdef".split("");
function Ac(a,b){function c(l){for(var n=1E7,m=0;7>m;m++){n/=10;var q=l/n%10>>>0;if(0!=q||g)g=!0,h+=f[q]}}if(2097151>=b)return""+(4294967296*b+a);var e=(a>>>24|b<<8)>>>0&16777215;b=b>>16&65535;a=(a&16777215)+6777216*e+6710656*b;e+=8147497*b;b*=2;1E7<=a&&(e+=Math.floor(a/1E7),a%=1E7);1E7<=e&&(b+=Math.floor(e/1E7),e%=1E7);var f=zc,g=!1,h="";(b||g)&&c(b);(e||g)&&c(e);(a||g)&&c(a);return h}function Ec(a,b){var c=b&2147483648;c&&(a=~a+1>>>0,b=~b+(0==a?1:0)>>>0);a=Ac(a,b);return c?"-"+a:a}
function Fc(a){function b(h,l){for(var n=0;8>n&&(1!==h||0<l);n++)l=h*f[n]+l,f[n]=l&255,l>>>=8}function c(){for(var h=0;8>h;h++)f[h]=~f[h]&255}var e=!1;"-"===a[0]&&(e=!0,a=a.slice(1));for(var f=[0,0,0,0,0,0,0,0],g=0;g<a.length;g++)b(10,zc.indexOf(a[g]));e&&(c(),b(1,1));return Pb(f)}
function Gc(a){if(a.constructor===Uint8Array)return a;if(a.constructor===ArrayBuffer)return new Uint8Array(a);if(a.constructor===Buffer)return new Uint8Array(a);if(a.constructor===Array)return new Uint8Array(a);if(a.constructor===String)return Xb(a);Kb("Type not convertible to Uint8Array.");return new Uint8Array(0)};
//~~WEBPATH~~external/com_google_protobuf_js/binary/decoder.js
function Jc(a,b,c){this.bytes_=null;this.tempHigh_=this.tempLow_=this.cursor_=this.end_=this.start_=0;this.error_=!1;a&&this.setBlock(a,b,c)}var Kc=[];function Rc(a,b,c){if(Kc.length){var e=Kc.pop();a&&e.setBlock(a,b,c);return e}return new Jc(a,b,c)}T=Jc.prototype;T.free=function(){this.clear();100>Kc.length&&Kc.push(this)};T.clone=function(){return Rc(this.bytes_,this.start_,this.end_-this.start_)};T.clear=function(){this.bytes_=null;this.cursor_=this.end_=this.start_=0;this.error_=!1};
T.getBuffer=function(){return this.bytes_};T.setBlock=function(a,b,c){this.bytes_=Gc(a);this.start_=void 0!==b?b:0;this.end_=void 0!==c?this.start_+c:this.bytes_.length;this.cursor_=this.start_};T.setEnd=function(a){this.end_=a};T.reset=function(){this.cursor_=this.start_};T.getCursor=function(){return this.cursor_};T.advance=function(a){this.cursor_+=a};function Sc(a){return a.cursor_==a.end_}T.pastEnd=function(){return this.cursor_>this.end_};
T.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_};function Tc(a){for(var b,c=0,e,f=0;4>f;f++)if(b=a.bytes_[a.cursor_++],c|=(b&127)<<7*f,128>b){a.tempLow_=c>>>0;a.tempHigh_=0;return}b=a.bytes_[a.cursor_++];c|=(b&127)<<28;e=0|(b&127)>>4;if(128>b)a.tempLow_=c>>>0,a.tempHigh_=e>>>0;else{for(f=0;5>f;f++)if(b=a.bytes_[a.cursor_++],e|=(b&127)<<7*f+3,128>b){a.tempLow_=c>>>0;a.tempHigh_=e>>>0;return}Kb("Failed to read varint, encoding is invalid.");a.error_=!0}}
function Uc(a,b){for(;128<b;)a.cursor_--,b>>>=7;a.cursor_--}
T.readUnsignedVarint32=function(){var a=this.bytes_;var b=a[this.cursor_+0];var c=b&127;if(128>b)return this.cursor_+=1,c;b=a[this.cursor_+1];c|=(b&127)<<7;if(128>b)return this.cursor_+=2,c;b=a[this.cursor_+2];c|=(b&127)<<14;if(128>b)return this.cursor_+=3,c;b=a[this.cursor_+3];c|=(b&127)<<21;if(128>b)return this.cursor_+=4,c;b=a[this.cursor_+4];c|=(b&15)<<28;if(128>b)return this.cursor_+=5,c>>>0;this.cursor_+=5;128<=a[this.cursor_++]&&128<=a[this.cursor_++]&&128<=a[this.cursor_++]&&128<=a[this.cursor_++]&&
this.cursor_++;return c};T.readSignedVarint32=Jc.prototype.readUnsignedVarint32;T.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()};T.readSignedVarint32String=function(){return this.readSignedVarint32().toString()};T.readZigzagVarint32=function(){var a=this.readUnsignedVarint32();return a>>>1^-(a&1)};T.readUnsignedVarint64=function(){Tc(this);return 4294967296*this.tempHigh_+this.tempLow_};
T.readUnsignedVarint64String=function(){Tc(this);return Ac(this.tempLow_,this.tempHigh_)};T.readSignedVarint64=function(){Tc(this);return uc(this.tempLow_,this.tempHigh_)};T.readSignedVarint64String=function(){Tc(this);return Ec(this.tempLow_,this.tempHigh_)};T.readZigzagVarint64=function(){Tc(this);var a=this.tempLow_,b=this.tempHigh_,c=a&1;a=(a>>>1|b<<31)>>>0;b>>>=1;c&&(a=a+1>>>0,0==a&&(b=b+1>>>0));a=4294967296*b+a;return c?-a:a};T.readZigzagVarint64String=function(){return this.readZigzagVarint64().toString()};
T.readUint8=function(){var a=this.bytes_[this.cursor_+0];this.cursor_+=1;return a};T.readUint16=function(){var a=this.bytes_[this.cursor_+0],b=this.bytes_[this.cursor_+1];this.cursor_+=2;return a<<0|b<<8};T.readUint32=function(){var a=this.bytes_[this.cursor_+0],b=this.bytes_[this.cursor_+1],c=this.bytes_[this.cursor_+2],e=this.bytes_[this.cursor_+3];this.cursor_+=4;return(a<<0|b<<8|c<<16|e<<24)>>>0};T.readUint64=function(){var a=this.readUint32();return 4294967296*this.readUint32()+a};
T.readUint64String=function(){var a=this.readUint32(),b=this.readUint32();return Ac(a,b)};T.readInt8=function(){var a=this.bytes_[this.cursor_+0];this.cursor_+=1;return a<<24>>24};T.readInt16=function(){var a=this.bytes_[this.cursor_+0],b=this.bytes_[this.cursor_+1];this.cursor_+=2;return(a<<0|b<<8)<<16>>16};T.readInt32=function(){var a=this.bytes_[this.cursor_+0],b=this.bytes_[this.cursor_+1],c=this.bytes_[this.cursor_+2],e=this.bytes_[this.cursor_+3];this.cursor_+=4;return a<<0|b<<8|c<<16|e<<24};
T.readInt64=function(){var a=this.readUint32(),b=this.readUint32();return uc(a,b)};T.readInt64String=function(){var a=this.readUint32(),b=this.readUint32();return Ec(a,b)};T.readFloat=function(){var a=this.readUint32(),b=2*(a>>31)+1,c=a>>>23&255;a&=8388607;return 255==c?a?NaN:Infinity*b:0==c?b*Math.pow(2,-149)*a:b*Math.pow(2,c-150)*(a+Math.pow(2,23))};
T.readDouble=function(){var a=this.readUint32(),b=this.readUint32(),c=2*(b>>31)+1,e=b>>>20&2047;a=4294967296*(b&1048575)+a;return 2047==e?a?NaN:Infinity*c:0==e?c*Math.pow(2,-1074)*a:c*Math.pow(2,e-1075)*(a+4503599627370496)};T.readBool=function(){return!!this.bytes_[this.cursor_++]};T.readEnum=function(){return this.readSignedVarint32()};
T.readString=function(a){var b=this.bytes_,c=this.cursor_;a=c+a;for(var e=[],f="";c<a;){var g=b[c++];if(128>g)e.push(g);else if(192>g)continue;else if(224>g){var h=b[c++];e.push((g&31)<<6|h&63)}else if(240>g){h=b[c++];var l=b[c++];e.push((g&15)<<12|(h&63)<<6|l&63)}else if(248>g){h=b[c++];l=b[c++];var n=b[c++];g=(g&7)<<18|(h&63)<<12|(l&63)<<6|n&63;g-=65536;e.push((g>>10&1023)+55296,(g&1023)+56320)}8192<=e.length&&(f+=String.fromCharCode.apply(null,e),e.length=0)}f+=Pb(e);this.cursor_=c;return f};
T.readStringWithLength=function(){var a=this.readUnsignedVarint32();return this.readString(a)};T.readBytes=function(a){if(0>a||this.cursor_+a>this.bytes_.length)return this.error_=!0,Kb("Invalid byte length!"),new Uint8Array(0);var b=this.bytes_.subarray(this.cursor_,this.cursor_+a);this.cursor_+=a;return b};T.readVarintHash64=function(){Tc(this);var a=this.tempLow_,b=this.tempHigh_;return String.fromCharCode(a>>>0&255,a>>>8&255,a>>>16&255,a>>>24&255,b>>>0&255,b>>>8&255,b>>>16&255,b>>>24&255)};
T.readFixedHash64=function(){var a=this.bytes_,b=this.cursor_,c=a[b+0],e=a[b+1],f=a[b+2],g=a[b+3],h=a[b+4],l=a[b+5],n=a[b+6];a=a[b+7];this.cursor_+=8;return String.fromCharCode(c,e,f,g,h,l,n,a)};
//~~WEBPATH~~external/com_google_protobuf_js/binary/encoder.js
function Vc(){this.buffer_=[]}T=Vc.prototype;T.length=function(){return this.buffer_.length};T.end=function(){var a=this.buffer_;this.buffer_=[];return a};function Wc(a,b,c){for(;0<c||127<b;)a.buffer_.push(b&127|128),b=(b>>>7|c<<25)>>>0,c>>>=7;a.buffer_.push(b)}function Yc(a,b){for(;127<b;)a.buffer_.push(b&127|128),b>>>=7;a.buffer_.push(b)}function Zc(a,b){if(0<=b)Yc(a,b);else{for(var c=0;9>c;c++)a.buffer_.push(b&127|128),b>>=7;a.buffer_.push(1)}}function $c(a,b){Yc(a,(b<<1^b>>31)>>>0)}
function ad(a,b){var c=b;b=0>c;c=2*Math.abs(c);rc(c);c=oc;var e=pc;b&&(0==c?0==e?e=c=4294967295:(e--,c=4294967295):c--);oc=c;pc=e;Wc(a,oc,pc)}T.writeUint8=function(a){this.buffer_.push(a>>>0&255)};T.writeUint16=function(a){this.buffer_.push(a>>>0&255);this.buffer_.push(a>>>8&255)};T.writeUint32=function(a){this.buffer_.push(a>>>0&255);this.buffer_.push(a>>>8&255);this.buffer_.push(a>>>16&255);this.buffer_.push(a>>>24&255)};T.writeUint64=function(a){rc(a);this.writeUint32(oc);this.writeUint32(pc)};
T.writeInt8=function(a){this.buffer_.push(a>>>0&255)};T.writeInt16=function(a){this.buffer_.push(a>>>0&255);this.buffer_.push(a>>>8&255)};T.writeInt32=function(a){this.buffer_.push(a>>>0&255);this.buffer_.push(a>>>8&255);this.buffer_.push(a>>>16&255);this.buffer_.push(a>>>24&255)};T.writeInt64=function(a){sc(a);a=pc;this.writeUint32(oc);this.writeUint32(a)};T.writeInt64String=function(a){tc(Fc(a));a=pc;this.writeUint32(oc);this.writeUint32(a)};
T.writeFloat=function(a){var b=a;b=(a=0>b?1:0)?-b:b;if(0===b)0<1/b?oc=pc=0:(pc=0,oc=2147483648);else if(isNaN(b))pc=0,oc=2147483647;else if(3.4028234663852886E38<b)pc=0,oc=(a<<31|2139095040)>>>0;else if(1.1754943508222875E-38>b)b=Math.round(b/Math.pow(2,-149)),pc=0,oc=(a<<31|b)>>>0;else{var c=Math.floor(Math.log(b)/Math.LN2);b*=Math.pow(2,-c);b=Math.round(8388608*b)&8388607;pc=0;oc=(a<<31|c+127<<23|b)>>>0}this.writeUint32(oc)};
T.writeDouble=function(a){var b=a;b=(a=0>b?1:0)?-b:b;if(0===b)pc=0<1/b?0:2147483648,oc=0;else if(isNaN(b))pc=2147483647,oc=4294967295;else if(1.7976931348623157E308<b)pc=(a<<31|2146435072)>>>0,oc=0;else if(2.2250738585072014E-308>b)b/=Math.pow(2,-1074),pc=(a<<31|b/4294967296)>>>0,oc=b>>>0;else{var c=Math.floor(Math.log(b)/Math.LN2);1024==c&&(c=1023);b*=Math.pow(2,-c);pc=(a<<31|c+1023<<20|1048576*b&1048575)>>>0;oc=4503599627370496*b>>>0}this.writeUint32(oc);this.writeUint32(pc)};
T.writeBool=function(a){this.buffer_.push(a?1:0)};T.writeEnum=function(a){Zc(this,a)};T.writeBytes=function(a){this.buffer_.push.apply(this.buffer_,a)};T.writeVarintHash64=function(a){tc(a);Wc(this,oc,pc)};T.writeFixedHash64=function(a){tc(a);this.writeUint32(oc);this.writeUint32(pc)};
T.writeString=function(a){for(var b=this.buffer_.length,c=0;c<a.length;c++){var e=a.charCodeAt(c);if(128>e)this.buffer_.push(e);else if(2048>e)this.buffer_.push(e>>6|192),this.buffer_.push(e&63|128);else if(65536>e)if(55296<=e&&56319>=e&&c+1<a.length){var f=a.charCodeAt(c+1);56320<=f&&57343>=f&&(e=1024*(e-55296)+f-56320+65536,this.buffer_.push(e>>18|240),this.buffer_.push(e>>12&63|128),this.buffer_.push(e>>6&63|128),this.buffer_.push(e&63|128),c++)}else this.buffer_.push(e>>12|224),this.buffer_.push(e>>
6&63|128),this.buffer_.push(e&63|128)}return this.buffer_.length-b};
//~~WEBPATH~~external/com_google_protobuf_js/binary/reader.js
function bd(a,b,c){this.decoder_=Rc(a,b,c);this.fieldCursor_=this.decoder_.getCursor();this.nextWireType_=this.nextField_=-1;this.error_=!1;this.readCallbacks_=null}var cd=[];T=bd.prototype;T.alloc=function(a,b,c){if(cd.length){var e=cd.pop();a&&e.decoder_.setBlock(a,b,c);return e}return new bd(a,b,c)};T.free=function(){this.decoder_.clear();this.nextWireType_=this.nextField_=-1;this.error_=!1;this.readCallbacks_=null;100>cd.length&&cd.push(this)};T.getFieldCursor=function(){return this.fieldCursor_};
T.getCursor=function(){return this.decoder_.getCursor()};T.getBuffer=function(){return this.decoder_.getBuffer()};T.getWireType=function(){return this.nextWireType_};function dd(a){return 4==a.nextWireType_}T.getError=function(){return this.error_||this.decoder_.getError()};T.setBlock=function(a,b,c){this.decoder_.setBlock(a,b,c);this.nextWireType_=this.nextField_=-1};T.reset=function(){this.decoder_.reset();this.nextWireType_=this.nextField_=-1};T.advance=function(a){this.decoder_.advance(a)};
function ed(a){if(Sc(a.decoder_))return!1;if(a.getError())return Kb("Decoder hit an error"),!1;a.fieldCursor_=a.decoder_.getCursor();var b=a.decoder_.readUnsignedVarint32(),c=b>>>3;b&=7;if(0!=b&&5!=b&&1!=b&&2!=b&&3!=b&&4!=b)return Kb("Invalid wire type"),a.error_=!0,!1;a.nextField_=c;a.nextWireType_=b;return!0}
T.skipMatchingFields=function(){var a=this.nextField_;for(Uc(this.decoder_,this.nextField_<<3|this.nextWireType_);ed(this)&&this.nextField_==a;)fd(this);Sc(this.decoder_)||Uc(this.decoder_,this.nextField_<<3|this.nextWireType_)};
function fd(a){switch(a.nextWireType_){case 0:if(0!=a.nextWireType_)Kb("Invalid wire type for skipVarintField"),fd(a);else{for(a=a.decoder_;a.bytes_[a.cursor_]&128;)a.cursor_++;a.cursor_++}break;case 1:1!=a.nextWireType_?(Kb("Invalid wire type for skipFixed64Field"),fd(a)):a.decoder_.advance(8);break;case 2:if(2!=a.nextWireType_)Kb("Invalid wire type for skipDelimitedField"),fd(a);else{var b=a.decoder_.readUnsignedVarint32();a.decoder_.advance(b)}break;case 5:5!=a.nextWireType_?(Kb("Invalid wire type for skipFixed32Field"),
fd(a)):a.decoder_.advance(4);break;case 3:b=[a.nextField_];do{if(!ed(a)){Kb("Unmatched start-group tag: stream EOF");a.error_=!0;break}if(3==a.nextWireType_)b.push(a.nextField_);else if(4==a.nextWireType_&&a.nextField_!=b.pop()){Kb("Unmatched end-group tag");a.error_=!0;break}}while(0<b.length);break;default:Kb("Invalid wire encoding for field.")}}T.registerReadCallback=function(a,b){null===this.readCallbacks_&&(this.readCallbacks_={});this.readCallbacks_[a]=b};T.runReadCallback=function(a){return(0,this.readCallbacks_[a])(this)};
T.readAny=function(a){this.nextWireType_=mc(a);switch(a){case 1:return this.readDouble();case 2:return this.readFloat();case 3:return this.readInt64();case 4:return this.readUint64();case 5:return this.readInt32();case 6:return this.decoder_.readUint64();case 7:return this.decoder_.readUint32();case 8:return this.readBool();case 9:return this.readString();case 10:Kb("Group field type not supported in readAny()");case 11:Kb("Message field type not supported in readAny()");case 12:return this.readBytes();
case 13:return this.readUint32();case 14:return this.readEnum();case 15:return this.decoder_.readInt32();case 16:return this.decoder_.readInt64();case 17:return this.decoder_.readZigzagVarint32();case 18:return this.decoder_.readZigzagVarint64();case 30:return this.readFixedHash64();case 31:return this.readVarintHash64();default:Kb("Invalid field type in readAny()")}return 0};
T.readMessage=function(a,b){var c=this.decoder_.end_,e=this.decoder_.readUnsignedVarint32();e=this.decoder_.getCursor()+e;this.decoder_.setEnd(e);b(a,this);this.decoder_.cursor_=e;this.decoder_.setEnd(c)};T.readGroup=function(a,b,c){c(b,this);this.error_||4==this.nextWireType_||(Kb("Group submessage did not end with an END_GROUP tag"),this.error_=!0)};
T.getFieldDecoder=function(){var a=this.decoder_.readUnsignedVarint32(),b=this.decoder_.getCursor(),c=b+a;a=Rc(this.decoder_.getBuffer(),b,a);this.decoder_.cursor_=c;return a};T.readInt32=function(){return this.decoder_.readSignedVarint32()};T.readInt32String=function(){return this.decoder_.readSignedVarint32String()};T.readInt64=function(){return this.decoder_.readSignedVarint64()};T.readInt64String=function(){return this.decoder_.readSignedVarint64String()};T.readUint32=function(){return this.decoder_.readUnsignedVarint32()};
T.readUint32String=function(){return this.decoder_.readUnsignedVarint32String()};T.readUint64=function(){return this.decoder_.readUnsignedVarint64()};T.readUint64String=function(){return this.decoder_.readUnsignedVarint64String()};T.readSint64String=function(){return this.decoder_.readZigzagVarint64String()};T.readFixed64String=function(){return this.decoder_.readUint64String()};T.readSfixed32String=function(){return this.decoder_.readInt32().toString()};T.readSfixed64String=function(){return this.decoder_.readInt64String()};
T.readFloat=function(){return this.decoder_.readFloat()};T.readDouble=function(){return this.decoder_.readDouble()};T.readBool=function(){return!!this.decoder_.readUnsignedVarint32()};T.readEnum=function(){return this.decoder_.readSignedVarint64()};T.readString=function(){var a=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(a)};T.readBytes=function(){var a=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(a)};T.readVarintHash64=function(){return this.decoder_.readVarintHash64()};
T.readFixedHash64=function(){return this.decoder_.readFixedHash64()};function gd(a,b){var c=a.decoder_.readUnsignedVarint32();c=a.decoder_.getCursor()+c;for(var e=[];a.decoder_.getCursor()<c;)e.push(b.call(a.decoder_));return e}T.readPackedInt32=function(){return gd(this,this.decoder_.readSignedVarint32)};T.readPackedInt32String=function(){return gd(this,this.decoder_.readSignedVarint32String)};T.readPackedInt64String=function(){return gd(this,this.decoder_.readSignedVarint64String)};
T.readPackedUint32=function(){return gd(this,this.decoder_.readUnsignedVarint32)};T.readPackedUint32String=function(){return gd(this,this.decoder_.readUnsignedVarint32String)};T.readPackedUint64=function(){return gd(this,this.decoder_.readUnsignedVarint64)};T.readPackedUint64String=function(){return gd(this,this.decoder_.readUnsignedVarint64String)};T.readPackedSint32=function(){return gd(this,this.decoder_.readZigzagVarint32)};T.readPackedSint64=function(){return gd(this,this.decoder_.readZigzagVarint64)};
T.readPackedSint64String=function(){return gd(this,this.decoder_.readZigzagVarint64String)};T.readPackedFixed32=function(){return gd(this,this.decoder_.readUint32)};T.readPackedFixed64=function(){return gd(this,this.decoder_.readUint64)};T.readPackedFixed64String=function(){return gd(this,this.decoder_.readUint64String)};T.readPackedSfixed32=function(){return gd(this,this.decoder_.readInt32)};T.readPackedSfixed64=function(){return gd(this,this.decoder_.readInt64)};
T.readPackedSfixed64String=function(){return gd(this,this.decoder_.readInt64String)};T.readPackedDouble=function(){return gd(this,this.decoder_.readDouble)};T.readPackedBool=function(){return gd(this,this.decoder_.readBool)};T.readPackedEnum=function(){return gd(this,this.decoder_.readEnum)};T.readPackedVarintHash64=function(){return gd(this,this.decoder_.readVarintHash64)};T.readPackedFixedHash64=function(){return gd(this,this.decoder_.readFixedHash64)};
//~~WEBPATH~~external/com_google_protobuf_js/binary/writer.js
function hd(){this.blocks_=[];this.totalLength_=0;this.encoder_=new Vc;this.bookmarks_=[]}function td(a,b){var c=a.encoder_.end();a.blocks_.push(c);a.blocks_.push(b);a.totalLength_+=c.length+b.length}function ud(a,b){vd(a,b,2);b=a.encoder_.end();a.blocks_.push(b);a.totalLength_+=b.length;b.push(a.totalLength_);return b}function wd(a,b){var c=b.pop();for(c=a.totalLength_+a.encoder_.length()-c;127<c;)b.push(c&127|128),c>>>=7,a.totalLength_++;b.push(c);a.totalLength_++}T=hd.prototype;
T.maybeWriteSerializedMessage=function(a,b,c){null!=a&&null!=b&&null!=c&&td(this,a.subarray(b,c))};T.reset=function(){this.blocks_=[];this.encoder_.end();this.totalLength_=0;this.bookmarks_=[]};function xd(a){for(var b=new Uint8Array(a.totalLength_+a.encoder_.length()),c=a.blocks_,e=c.length,f=0,g=0;g<e;g++){var h=c[g];b.set(h,f);f+=h.length}c=a.encoder_.end();b.set(c,f);a.blocks_=[b];return b}T.getResultBase64String=function(a){return Ub(xd(this),a)};function vd(a,b,c){Yc(a.encoder_,8*b+c)}
T.writeAny=function(a,b,c){switch(a){case 1:this.writeDouble(b,c);break;case 2:this.writeFloat(b,c);break;case 3:this.writeInt64(b,c);break;case 4:this.writeUint64(b,c);break;case 5:this.writeInt32(b,c);break;case 6:null!=c&&(vd(this,b,1),this.encoder_.writeUint64(c));break;case 7:null!=c&&(vd(this,b,5),this.encoder_.writeUint32(c));break;case 8:this.writeBool(b,c);break;case 9:this.writeString(b,c);break;case 10:Kb("Group field type not supported in writeAny()");break;case 11:Kb("Message field type not supported in writeAny()");
break;case 12:this.writeBytes(b,c);break;case 13:this.writeUint32(b,c);break;case 14:this.writeEnum(b,c);break;case 15:null!=c&&(vd(this,b,5),this.encoder_.writeInt32(c));break;case 16:null!=c&&(vd(this,b,1),this.encoder_.writeInt64(c));break;case 17:null!=c&&null!=c&&(vd(this,b,0),$c(this.encoder_,c));break;case 18:null!=c&&null!=c&&(vd(this,b,0),ad(this.encoder_,c));break;case 30:this.writeFixedHash64(b,c);break;case 31:this.writeVarintHash64(b,c);break;default:Kb("Invalid field type in writeAny()")}};
function Hd(a,b,c){null!=c&&(vd(a,b,0),Yc(a.encoder_,c))}function Id(a,b,c){null!=c&&(vd(a,b,0),Zc(a.encoder_,c))}T.writeInt32=function(a,b){null!=b&&Id(this,a,b)};T.writeInt64=function(a,b){null!=b&&null!=b&&(vd(this,a,0),a=this.encoder_,sc(b),Wc(a,oc,pc))};T.writeInt64String=function(a,b){null!=b&&(b=ic(b),vd(this,a,0),Wc(this.encoder_,b.lo,b.hi))};T.writeUint32=function(a,b){null!=b&&Hd(this,a,b)};T.writeUint64=function(a,b){null!=b&&null!=b&&(vd(this,a,0),a=this.encoder_,sc(b),Wc(a,oc,pc))};
T.writeSint64String=function(a,b){null!=b&&null!=b&&(vd(this,a,0),ad(this.encoder_,parseInt(b,10)))};T.writeFloat=function(a,b){null!=b&&(vd(this,a,5),this.encoder_.writeFloat(b))};T.writeDouble=function(a,b){null!=b&&(vd(this,a,1),this.encoder_.writeDouble(b))};T.writeBool=function(a,b){null!=b&&(vd(this,a,0),this.encoder_.writeBool(b))};T.writeEnum=function(a,b){null!=b&&(vd(this,a,0),Zc(this.encoder_,b))};T.writeString=function(a,b){null!=b&&(a=ud(this,a),this.encoder_.writeString(b),wd(this,a))};
T.writeBytes=function(a,b){null!=b&&(b=Gc(b),vd(this,a,2),Yc(this.encoder_,b.length),td(this,b))};T.writeMessage=function(a,b,c){null!=b&&(a=ud(this,a),c(b,this),wd(this,a))};T.writeGroup=function(a,b,c){null!=b&&(vd(this,a,3),c(b,this),vd(this,a,4))};T.writeFixedHash64=function(a,b){null!=b&&(vd(this,a,1),this.encoder_.writeFixedHash64(b))};T.writeVarintHash64=function(a,b){null!=b&&(vd(this,a,0),this.encoder_.writeVarintHash64(b))};
T.writeRepeatedInt32=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)Id(this,a,b[c])};T.writeRepeatedInt32String=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];null!=e&&Id(this,a,parseInt(e,10))}};T.writeRepeatedInt64=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];if(null!=e){vd(this,a,0);var f=this.encoder_;sc(e);Wc(f,oc,pc)}}};T.writeRepeatedInt64String=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)this.writeInt64String(a,b[c])};
T.writeRepeatedUint32=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)Hd(this,a,b[c])};T.writeRepeatedUint32String=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];null!=e&&Hd(this,a,parseInt(e,10))}};T.writeRepeatedUint64=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];if(null!=e){vd(this,a,0);var f=this.encoder_;sc(e);Wc(f,oc,pc)}}};
T.writeRepeatedUint64String=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=a,f=b[c];null!=f&&(f=ec(f),vd(this,e,0),Wc(this.encoder_,f.lo,f.hi))}};T.writeRepeatedSint32=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];null!=e&&(vd(this,a,0),$c(this.encoder_,e))}};T.writeRepeatedSint64=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];null!=e&&(vd(this,a,0),ad(this.encoder_,e))}};
T.writeRepeatedSint64String=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];null!=e&&(vd(this,a,0),ad(this.encoder_,parseInt(e,10)))}};T.writeRepeatedFixed32=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];null!=e&&(vd(this,a,5),this.encoder_.writeUint32(e))}};T.writeRepeatedFixed64=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];null!=e&&(vd(this,a,1),this.encoder_.writeUint64(e))}};
T.writeRepeatedFixed64String=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=a,f=b[c];if(null!=f){f=ec(f);vd(this,e,1);e=this.encoder_;var g=f.hi;e.writeUint32(f.lo);e.writeUint32(g)}}};T.writeRepeatedSfixed32=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];null!=e&&(vd(this,a,5),this.encoder_.writeInt32(e))}};T.writeRepeatedSfixed64=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=b[c];null!=e&&(vd(this,a,1),this.encoder_.writeInt64(e))}};
T.writeRepeatedSfixed64String=function(a,b){if(null!=b)for(var c=0;c<b.length;c++){var e=a,f=b[c];if(null!=f){f=ic(f);vd(this,e,1);e=this.encoder_;var g=f.hi;e.writeUint32(f.lo);e.writeUint32(g)}}};T.writeRepeatedFloat=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)this.writeFloat(a,b[c])};T.writeRepeatedDouble=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)this.writeDouble(a,b[c])};T.writeRepeatedBool=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)this.writeBool(a,b[c])};
T.writeRepeatedEnum=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)this.writeEnum(a,b[c])};T.writeRepeatedString=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)this.writeString(a,b[c])};function Jd(a,b,c,e){if(null!=c)for(var f=0;f<c.length;f++){var g=ud(a,b);e(c[f],a);wd(a,g)}}T.writeRepeatedGroup=function(a,b,c){if(null!=b)for(var e=0;e<b.length;e++)vd(this,a,3),c(b[e],this),vd(this,a,4)};
T.writeRepeatedFixedHash64=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)this.writeFixedHash64(a,b[c])};T.writeRepeatedVarintHash64=function(a,b){if(null!=b)for(var c=0;c<b.length;c++)this.writeVarintHash64(a,b[c])};T.writePackedInt32=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++)Zc(this.encoder_,b[c]);wd(this,a)}};T.writePackedInt32String=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++)Zc(this.encoder_,parseInt(b[c],10));wd(this,a)}};
T.writePackedInt64String=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++){var e=ic(b[c]);Wc(this.encoder_,e.lo,e.hi)}wd(this,a)}};T.writePackedUint32=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++)Yc(this.encoder_,b[c]);wd(this,a)}};T.writePackedUint32String=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++)Yc(this.encoder_,parseInt(b[c],10));wd(this,a)}};
T.writePackedUint64=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++){var e=this.encoder_;sc(b[c]);Wc(e,oc,pc)}wd(this,a)}};T.writePackedUint64String=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++){var e=ec(b[c]);Wc(this.encoder_,e.lo,e.hi)}wd(this,a)}};T.writePackedSint32=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++)$c(this.encoder_,b[c]);wd(this,a)}};
T.writePackedSint64=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++)ad(this.encoder_,b[c]);wd(this,a)}};T.writePackedSint64String=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++)ad(this.encoder_,parseInt(b[c],10));wd(this,a)}};T.writePackedFixed32=function(a,b){if(null!=b&&b.length)for(vd(this,a,2),Yc(this.encoder_,4*b.length),a=0;a<b.length;a++)this.encoder_.writeUint32(b[a])};
T.writePackedFixed64=function(a,b){if(null!=b&&b.length)for(vd(this,a,2),Yc(this.encoder_,8*b.length),a=0;a<b.length;a++)this.encoder_.writeUint64(b[a])};T.writePackedFixed64String=function(a,b){if(null!=b&&b.length)for(vd(this,a,2),Yc(this.encoder_,8*b.length),a=0;a<b.length;a++){var c=ec(b[a]),e=this.encoder_,f=c.hi;e.writeUint32(c.lo);e.writeUint32(f)}};T.writePackedSfixed32=function(a,b){if(null!=b&&b.length)for(vd(this,a,2),Yc(this.encoder_,4*b.length),a=0;a<b.length;a++)this.encoder_.writeInt32(b[a])};
T.writePackedSfixed64=function(a,b){if(null!=b&&b.length)for(vd(this,a,2),Yc(this.encoder_,8*b.length),a=0;a<b.length;a++)this.encoder_.writeInt64(b[a])};T.writePackedSfixed64String=function(a,b){if(null!=b&&b.length)for(vd(this,a,2),Yc(this.encoder_,8*b.length),a=0;a<b.length;a++)this.encoder_.writeInt64String(b[a])};T.writePackedDouble=function(a,b){if(null!=b&&b.length)for(vd(this,a,2),Yc(this.encoder_,8*b.length),a=0;a<b.length;a++)this.encoder_.writeDouble(b[a])};
T.writePackedBool=function(a,b){if(null!=b&&b.length)for(vd(this,a,2),Yc(this.encoder_,b.length),a=0;a<b.length;a++)this.encoder_.writeBool(b[a])};T.writePackedEnum=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++)this.encoder_.writeEnum(b[c]);wd(this,a)}};T.writePackedFixedHash64=function(a,b){if(null!=b&&b.length)for(vd(this,a,2),Yc(this.encoder_,8*b.length),a=0;a<b.length;a++)this.encoder_.writeFixedHash64(b[a])};
T.writePackedVarintHash64=function(a,b){if(null!=b&&b.length){a=ud(this,a);for(var c=0;c<b.length;c++)this.encoder_.writeVarintHash64(b[c]);wd(this,a)}};
//~~WEBPATH~~external/com_google_protobuf_js/map.js
function Kd(a,b){this.arr_=a;this.valueCtor_=b;this.map_={};this.arrClean=!0;if(0<this.arr_.length){for(a=0;a<this.arr_.length;a++){b=this.arr_[a];var c=b[0];this.map_[c.toString()]=new Ld(c,b[1])}this.arrClean=!0}}
Kd.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var a=this.map_,b;for(b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var c=a[b].valueWrapper;c&&c.toArray()}}}else{this.arr_.length=0;a=Md(this);a.sort();for(b=0;b<a.length;b++){var e=this.map_[a[b]];(c=e.valueWrapper)&&c.toArray();this.arr_.push([e.key,e.value])}this.arrClean=!0}return this.arr_};
Kd.prototype.toObject=function(a,b){for(var c=this.toArray(),e=[],f=0;f<c.length;f++){var g=this.map_[c[f][0].toString()];Nd(this,g);var h=g.valueWrapper;h?e.push([g.key,b(a,h)]):e.push([g.key,g.value])}return e};function Od(a){this.idx_=0;this.arr_=a}Od.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}};"undefined"!=typeof Symbol&&(Od.prototype[Symbol.iterator]=function(){return this});T=Kd.prototype;T.getLength=function(){return Md(this).length};
T.clear=function(){this.map_={};this.arrClean=!1};T.del=function(a){a=a.toString();var b=this.map_.hasOwnProperty(a);delete this.map_[a];this.arrClean=!1;return b};T.getEntryList=function(){var a=[],b=Md(this);b.sort();for(var c=0;c<b.length;c++){var e=this.map_[b[c]];a.push([e.key,e.value])}return a};T.entries=function(){var a=[],b=Md(this);b.sort();for(var c=0;c<b.length;c++){var e=this.map_[b[c]];a.push([e.key,Nd(this,e)])}return new Od(a)};
T.keys=function(){var a=[],b=Md(this);b.sort();for(var c=0;c<b.length;c++)a.push(this.map_[b[c]].key);return new Od(a)};T.values=function(){var a=[],b=Md(this);b.sort();for(var c=0;c<b.length;c++)a.push(Nd(this,this.map_[b[c]]));return new Od(a)};T.forEach=function(a,b){var c=Md(this);c.sort();for(var e=0;e<c.length;e++){var f=this.map_[c[e]];a.call(b,Nd(this,f),f.key,this)}};
T.set=function(a,b){var c=new Ld(a);this.valueCtor_?(c.valueWrapper=b,c.value=b.toArray()):c.value=b;this.map_[a.toString()]=c;this.arrClean=!1;return this};function Nd(a,b){return a.valueCtor_?(b.valueWrapper||(b.valueWrapper=new a.valueCtor_(b.value)),b.valueWrapper):b.value}T.get=function(a){if(a=this.map_[a.toString()])return Nd(this,a)};T.has=function(a){return a.toString()in this.map_};
T.serializeBinary=function(a,b,c,e,f){var g=Md(this);g.sort();for(var h=0;h<g.length;h++){var l=this.map_[g[h]];b.bookmarks_.push(ud(b,a));c.call(b,1,l.key);this.valueCtor_?e.call(b,2,Nd(this,l),f):e.call(b,2,l.value);wd(b,b.bookmarks_.pop())}};function Xd(a,b,c){for(var e=bd.prototype.readString,f=bd.prototype.readMessage,g="",h=void 0;ed(b)&&!dd(b);){var l=b.nextField_;1==l?g=e.call(b):2==l&&(a.valueCtor_?(h=new a.valueCtor_,f.call(b,h,c)):h=f.call(b))}a.set(g,h)}
function Md(a){a=a.map_;var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}function Ld(a,b){this.key=a;this.value=b;this.valueWrapper=void 0};
//~~WEBPATH~~external/com_google_protobuf_js/message.js
function Yd(){}var Zd="function"==typeof Uint8Array;Yd.prototype.getJsPbMessageId=function(){return this.messageId_};
function $d(a,b,c,e){a.wrappers_=null;b||(b=[]);a.messageId_=void 0;a.arrayIndexOffset_=-1;a.array=b;a:{if(a.array.length){b=a.array.length-1;var f=a.array[b];if(f&&"object"==typeof f&&"array"!=Fb(f)&&!(Zd&&f instanceof Uint8Array)){a.pivot_=b-a.arrayIndexOffset_;a.extensionObject_=f;break a}}a.pivot_=Number.MAX_VALUE}a.convertedFloatingPointFields_={};if(c)for(b=0;b<c.length;b++)f=c[b],f<a.pivot_?(f+=a.arrayIndexOffset_,a.array[f]=a.array[f]||ae):(be(a),a.extensionObject_[f]=a.extensionObject_[f]||
ae);if(e&&e.length)for(b=0;b<e.length;b++)ce(a,e[b])}var ae=Object.freeze?Object.freeze([]):[];function be(a){var b=a.pivot_+a.arrayIndexOffset_;a.array[b]||(a.extensionObject_=a.array[b]={})}function de(a,b,c){for(var e=[],f=0;f<a.length;f++)e[f]=b.call(a[f],c,a[f]);return e}function ee(a,b){if(b<a.pivot_){b+=a.arrayIndexOffset_;var c=a.array[b];return c===ae?a.array[b]=[]:c}if(a.extensionObject_)return c=a.extensionObject_[b],c===ae?a.extensionObject_[b]=[]:c}
function fe(a,b){if(b<a.pivot_){b+=a.arrayIndexOffset_;var c=a.array[b];return c===ae?a.array[b]=[]:c}c=a.extensionObject_[b];return c===ae?a.extensionObject_[b]=[]:c}function oe(a){var b=fe(a,1);a.convertedFloatingPointFields_||(a.convertedFloatingPointFields_={});if(!a.convertedFloatingPointFields_[1]){for(var c=0;c<b.length;c++)b[c]=+b[c];a.convertedFloatingPointFields_[1]=!0}return b}
function pe(a){if(null==a||Cb(a))return a;if(Zd&&a instanceof Uint8Array)return Ub(a);Kb("Cannot coerce to b64 string: "+Fb(a));return null}function qe(a){if(null==a||a instanceof Uint8Array)return a;if(Cb(a))return Xb(a);Kb("Cannot coerce to Uint8Array: "+Fb(a));return null}function re(a){se(a);return!a.length||a[0]instanceof Uint8Array?a:Mb(a,qe)}
function se(a){if(a&&1<a.length){var b=Fb(a[0]);Lb(a,function(c){Fb(c)!=b&&Kb("Inconsistent type in JSPB repeated field array. Got "+Fb(c)+" expected "+b)})}}function te(a,b,c){a=ee(a,b);return null==a?c:a}function ue(a,b,c){a.wrappers_||(a.wrappers_={});if(1 in a.wrappers_)return a.wrappers_[1];if(!b)return b=ee(a,1),b||(b=[],ve(a,1,b)),a.wrappers_[1]=new Kd(b,c)}function ve(a,b,c){b<a.pivot_?a.array[b+a.arrayIndexOffset_]=c:(be(a),a.extensionObject_[b]=c)}function we(a,b,c){xe(a,b,c,0)}
function ye(a,b,c){xe(a,b,c,0)}function xe(a,b,c,e){c!=e?ve(a,b,c):a.array[b+a.arrayIndexOffset_]=null}function ze(a,b,c){a=fe(a,1);void 0!=c?a.splice(c,0,b):a.push(b)}function Ae(a,b,c,e){(c=ce(a,c))&&c!==b&&void 0!==e&&(a.wrappers_&&c in a.wrappers_&&(a.wrappers_[c]=void 0),ve(a,c,void 0));ve(a,b,e)}function ce(a,b){for(var c,e,f=0;f<b.length;f++){var g=b[f],h=ee(a,g);null!=h&&(c=g,e=h,ve(a,g,void 0))}return c?(ve(a,c,e),c):0}
function Be(a,b,c){a.wrappers_||(a.wrappers_={});if(!a.wrappers_[c]){var e=ee(a,c);e&&(a.wrappers_[c]=new b(e))}return a.wrappers_[c]}function Xe(a,b,c){Ye(a,b,c);b=a.wrappers_[c];b==ae&&(b=a.wrappers_[c]=[]);return b}function Ye(a,b,c){a.wrappers_||(a.wrappers_={});if(!a.wrappers_[c]){for(var e=fe(a,c),f=[],g=0;g<e.length;g++)f[g]=new b(e[g]);a.wrappers_[c]=f}}function Ze(a,b,c){a.wrappers_||(a.wrappers_={});var e=c?c.toArray():c;a.wrappers_[b]=c;ve(a,b,e)}
function $e(a,b,c,e){a.wrappers_||(a.wrappers_={});var f=e?e.toArray():e;a.wrappers_[b]=e;Ae(a,b,c,f)}function af(a,b,c){a.wrappers_||(a.wrappers_={});c=c||[];for(var e=[],f=0;f<c.length;f++)e[f]=c[f].toArray();a.wrappers_[b]=c;ve(a,b,e)}function bf(a,b,c,e,f){Ye(a,e,b);var g=a.wrappers_[b];g||(g=a.wrappers_[b]=[]);c=c?c:new e;a=fe(a,b);void 0!=f?(g.splice(f,0,c),a.splice(f,0,c.toArray())):(g.push(c),a.push(c.toArray()));return c}
function cf(a){if(a.wrappers_)for(var b in a.wrappers_){var c=a.wrappers_[b];if("array"==Fb(c))for(var e=0;e<c.length;e++)c[e]&&c[e].toArray();else c&&c.toArray()}}T=Yd.prototype;T.toArray=function(){cf(this);return this.array};T.toString=function(){cf(this);return this.array.toString()};
T.getExtension=function(a){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var b=a.fieldIndex;if(a.isRepeated){if(a.isMessageType())return this.wrappers_[b]||(this.wrappers_[b]=Mb(this.extensionObject_[b]||[],function(c){return new a.ctor(c)})),this.wrappers_[b]}else if(a.isMessageType())return!this.wrappers_[b]&&this.extensionObject_[b]&&(this.wrappers_[b]=new a.ctor(this.extensionObject_[b])),this.wrappers_[b];return this.extensionObject_[b]}};
T.setExtension=function(a,b){this.wrappers_||(this.wrappers_={});be(this);var c=a.fieldIndex;a.isRepeated?(b=b||[],a.isMessageType()?(this.wrappers_[c]=b,this.extensionObject_[c]=Mb(b,function(e){return e.toArray()})):this.extensionObject_[c]=b):a.isMessageType()?(this.wrappers_[c]=b,this.extensionObject_[c]=b?b.toArray():b):this.extensionObject_[c]=b;return this};T.clone=function(){return new this.constructor(df(this.toArray()))};
function df(a){if("array"==Fb(a)){for(var b=Array(a.length),c=0;c<a.length;c++){var e=a[c];null!=e&&(b[c]="object"==typeof e?df(e):e)}return b}if(Zd&&a instanceof Uint8Array)return new Uint8Array(a);b={};for(c in a)e=a[c],null!=e&&(b[c]="object"==typeof e?df(e):e);return b};
//~~WEBPATH~~external/com_google_protobuf_js/debug.js
//~~WEBPATH~~bazel-out/k8-fastbuild/bin/external/org_tensorflow/tensorflow/core/example_protos.js
function ef(a){$d(this,a,ff,null)}Gb(ef,Yd);var ff=[1];T=ef.prototype;T.toObject=function(a){return gf(a,this)};function gf(a,b){var c=b.getValueList();se(c);c={valueList:!c.length||Cb(c[0])?c:Mb(c,pe)};a&&(c.$jspbMessageInstance=b);return c}function hf(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readBytes();a.addValue(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;jf(this,a);return xd(a)};
function jf(a,b){a=re(a.getValueList());if(0<a.length&&null!=a)for(var c=0;c<a.length;c++)b.writeBytes(1,a[c])}T.getValueList=function(){return fe(this,1)};T.setValueList=function(a){ve(this,1,a||[])};T.addValue=function(a,b){ze(this,a,b)};T.clearValueList=function(){this.setValueList([])};function kf(a){$d(this,a,lf,null)}Gb(kf,Yd);var lf=[1];T=kf.prototype;T.toObject=function(a){return mf(a,this)};function mf(a,b){var c={valueList:oe(b)};a&&(c.$jspbMessageInstance=b);return c}
function Zf(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=gd(b,b.decoder_.readFloat);a.setValueList(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;$f(this,a);return xd(a)};function $f(a,b){a=a.getValueList();if(0<a.length&&null!=a&&a.length){vd(b,1,2);Yc(b.encoder_,4*a.length);for(var c=0;c<a.length;c++)b.encoder_.writeFloat(a[c])}}T.getValueList=function(){return oe(this)};T.setValueList=function(a){ve(this,1,a||[])};T.addValue=function(a,b){ze(this,a,b)};
T.clearValueList=function(){this.setValueList([])};function ag(a){$d(this,a,bg,null)}Gb(ag,Yd);var bg=[1];T=ag.prototype;T.toObject=function(a){return cg(a,this)};function cg(a,b){var c={valueList:fe(b,1)};a&&(c.$jspbMessageInstance=b);return c}function dg(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=gd(b,b.decoder_.readSignedVarint64);a.setValueList(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;eg(this,a);return xd(a)};
function eg(a,b){a=a.getValueList();if(0<a.length&&null!=a&&a.length){for(var c=ud(b,1),e=0;e<a.length;e++){var f=b.encoder_;sc(a[e]);Wc(f,oc,pc)}wd(b,c)}}T.getValueList=function(){return fe(this,1)};T.setValueList=function(a){ve(this,1,a||[])};T.addValue=function(a,b){ze(this,a,b)};T.clearValueList=function(){this.setValueList([])};function fg(a){$d(this,a,null,gg)}Gb(fg,Yd);var gg=[[1,2,3]];T=fg.prototype;T.getKindCase=function(){return ce(this,gg[0])};T.toObject=function(a){return hg(a,this)};
function hg(a,b){var c,e={bytesList:(c=ig(b))&&gf(a,c),floatList:(c=Be(b,kf,2))&&mf(a,c),int64List:(c=jg(b))&&cg(a,c)};a&&(e.$jspbMessageInstance=b);return e}function kg(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=new ef;b.readMessage(c,hf);$e(a,1,gg[0],c);break;case 2:c=new kf;b.readMessage(c,Zf);$e(a,2,gg[0],c);break;case 3:c=new ag;b.readMessage(c,dg);$e(a,3,gg[0],c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;lg(this,a);return xd(a)};
function lg(a,b){var c=ig(a);null!=c&&b.writeMessage(1,c,jf);c=Be(a,kf,2);null!=c&&b.writeMessage(2,c,$f);c=jg(a);null!=c&&b.writeMessage(3,c,eg)}function ig(a){return Be(a,ef,1)}T.clearBytesList=function(){$e(this,1,gg[0],void 0)};T.clearFloatList=function(){$e(this,2,gg[0],void 0)};T.hasFloatList=function(){return null!=ee(this,2)};function jg(a){return Be(a,ag,3)}T.clearInt64List=function(){$e(this,3,gg[0],void 0)};T.hasInt64List=function(){return null!=ee(this,3)};
function mg(a){$d(this,a,null,null)}Gb(mg,Yd);mg.prototype.toObject=function(a){return ng(a,this)};function ng(a,b){var c,e={featureMap:(c=og(b))?c.toObject(a,hg):[]};a&&(e.$jspbMessageInstance=b);return e}function pg(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=og(a);b.readMessage(c,function(e,f){Xd(e,f,kg)});break;default:fd(b)}return a}mg.prototype.serializeBinary=function(){var a=new hd;qg(this,a);return xd(a)};
function qg(a,b){(a=og(a,!0))&&0<a.getLength()&&a.serializeBinary(1,b,hd.prototype.writeString,hd.prototype.writeMessage,lg)}function og(a,b){return ue(a,b,fg)}mg.prototype.clearFeatureMap=function(){og(this).clear()};function rg(a){$d(this,a,sg,null)}Gb(rg,Yd);var sg=[1];rg.prototype.toObject=function(a){return tg(a,this)};function tg(a,b){var c={featureList:de(Xe(b,fg,1),hg,a)};a&&(c.$jspbMessageInstance=b);return c}
function ug(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=new fg;b.readMessage(c,kg);a.addFeature(c);break;default:fd(b)}return a}rg.prototype.serializeBinary=function(){var a=new hd;vg(this,a);return xd(a)};function vg(a,b){a=Xe(a,fg,1);0<a.length&&Jd(b,1,a,lg)}rg.prototype.addFeature=function(a,b){return bf(this,1,a,fg,b)};rg.prototype.clearFeatureList=function(){af(this,1,[])};function wg(a){$d(this,a,null,null)}Gb(wg,Yd);wg.prototype.toObject=function(a){return nh(a,this)};
function nh(a,b){var c,e={featureListMap:(c=ue(b,void 0,rg))?c.toObject(a,tg):[]};a&&(e.$jspbMessageInstance=b);return e}function oh(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=ue(a,void 0,rg);b.readMessage(c,function(e,f){Xd(e,f,ug)});break;default:fd(b)}return a}wg.prototype.serializeBinary=function(){var a=new hd;ph(this,a);return xd(a)};function ph(a,b){(a=ue(a,!0,rg))&&0<a.getLength()&&a.serializeBinary(1,b,hd.prototype.writeString,hd.prototype.writeMessage,vg)}
wg.prototype.clearFeatureListMap=function(){ue(this,void 0,rg).clear()};function qh(a){$d(this,a,null,null)}Gb(qh,Yd);qh.prototype.toObject=function(a){var b,c={features:(b=this.getFeatures())&&ng(a,b)};a&&(c.$jspbMessageInstance=this);return c};function rh(a){a=new bd(a);for(var b=new qh;ed(a)&&!dd(a);)switch(a.nextField_){case 1:var c=new mg;a.readMessage(c,pg);Ze(b,1,c);break;default:fd(a)}return b}
qh.prototype.serializeBinary=function(){var a=new hd;var b=this.getFeatures();null!=b&&a.writeMessage(1,b,qg);return xd(a)};qh.prototype.getFeatures=function(){return Be(this,mg,1)};qh.prototype.clearFeatures=function(){Ze(this,1,void 0)};function sh(a){$d(this,a,null,null)}Gb(sh,Yd);T=sh.prototype;T.toObject=function(a){var b,c={context:(b=this.getContext())&&ng(a,b),featureLists:(b=Be(this,wg,2))&&nh(a,b)};a&&(c.$jspbMessageInstance=this);return c};
function th(a){a=new bd(a);for(var b=new sh;ed(a)&&!dd(a);)switch(a.nextField_){case 1:var c=new mg;a.readMessage(c,pg);b.setContext(c);break;case 2:c=new wg;a.readMessage(c,oh);Ze(b,2,c);break;default:fd(a)}return b}T.serializeBinary=function(){var a=new hd;var b=this.getContext();null!=b&&a.writeMessage(1,b,qg);b=Be(this,wg,2);null!=b&&a.writeMessage(2,b,ph);return xd(a)};T.getContext=function(){return Be(this,mg,1)};T.setContext=function(a){Ze(this,1,a)};T.clearContext=function(){this.setContext(void 0)};
T.clearFeatureLists=function(){Ze(this,2,void 0)};T.hasFeatureLists=function(){return null!=ee(this,2)};
//~~WEBPATH~~bazel-out/k8-fastbuild/bin/external/ai_google_pair_facets/facets_overview/proto/proto.js
function uh(a){$d(this,a,vh,null)}Gb(uh,Yd);var vh=[1];uh.prototype.toObject=function(a){var b={datasetsList:de(wh(this),xh,a)};a&&(b.$jspbMessageInstance=this);return b};function yh(a){a=new bd(a);for(var b=new uh;ed(a)&&!dd(a);)switch(a.nextField_){case 1:var c=new zh;a.readMessage(c,Ah);bf(b,1,c,zh,void 0);break;default:fd(a)}return b}uh.prototype.serializeBinary=function(){var a=new hd;var b=wh(this);0<b.length&&Jd(a,1,b,Bh);return xd(a)};function wh(a){return Xe(a,zh,1)}
uh.prototype.clearDatasetsList=function(){af(this,1,[])};function zh(a){$d(this,a,Ch,null)}Gb(zh,Yd);var Ch=[3];T=zh.prototype;T.toObject=function(a){return xh(a,this)};function xh(a,b){var c={name:te(b,1,""),numExamples:te(b,2,0),weightedNumExamples:+te(b,4,0),featuresList:de(b.getFeaturesList(),Dh,a)};a&&(c.$jspbMessageInstance=b);return c}
function Ah(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readString();a.setName(c);break;case 2:c=b.readUint64();we(a,2,c);break;case 4:c=b.readDouble();ye(a,4,c);break;case 3:c=new Eh;b.readMessage(c,Fh);bf(a,3,c,Eh,void 0);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;Bh(this,a);return xd(a)};
function Bh(a,b){var c=a.getName();0<c.length&&b.writeString(1,c);c=te(a,2,0);0!==c&&b.writeUint64(2,c);c=+te(a,4,0);0!==c&&b.writeDouble(4,c);c=a.getFeaturesList();0<c.length&&Jd(b,3,c,Gh)}T.getName=function(){return te(this,1,"")};T.setName=function(a){xe(this,1,a,"")};T.getFeaturesList=function(){return Xe(this,Eh,3)};T.clearFeaturesList=function(){af(this,3,[])};function Eh(a){$d(this,a,mi,ni)}Gb(Eh,Yd);var mi=[6],ni=[[3,4,5,7]];T=Eh.prototype;T.getStatsCase=function(){return ce(this,ni[0])};
T.toObject=function(a){return Dh(a,this)};function Dh(a,b){var c,e={name:te(b,1,""),type:te(b,2,0),numStats:(c=oi(b))&&pi(a,c),stringStats:(c=qi(b))&&ri(a,c),bytesStats:(c=si(b))&&ti(a,c),structStats:(c=Be(b,ui,7))&&vi(a,c),customStatsList:de(wi(b),xi,a)};a&&(e.$jspbMessageInstance=b);return e}
function Fh(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readString();a.setName(c);break;case 2:c=b.readEnum();a.setType(c);break;case 3:c=new yi;b.readMessage(c,zi);$e(a,3,ni[0],c);break;case 4:c=new Ai;b.readMessage(c,Bi);$e(a,4,ni[0],c);break;case 5:c=new Ci;b.readMessage(c,Di);$e(a,5,ni[0],c);break;case 7:c=new ui;b.readMessage(c,Ei);$e(a,7,ni[0],c);break;case 6:c=new Fi;b.readMessage(c,Gi);bf(a,6,c,Fi,void 0);break;default:fd(b)}return a}
T.serializeBinary=function(){var a=new hd;Gh(this,a);return xd(a)};function Gh(a,b){var c=a.getName();0<c.length&&b.writeString(1,c);c=a.getType();0!==c&&b.writeEnum(2,c);c=oi(a);null!=c&&b.writeMessage(3,c,Hi);c=qi(a);null!=c&&b.writeMessage(4,c,Ii);c=si(a);null!=c&&b.writeMessage(5,c,Ji);c=Be(a,ui,7);null!=c&&b.writeMessage(7,c,Ki);c=wi(a);0<c.length&&Jd(b,6,c,Li)}T.getName=function(){return te(this,1,"")};T.setName=function(a){xe(this,1,a,"")};T.getType=function(){return te(this,2,0)};
T.setType=function(a){xe(this,2,a,0)};function oi(a){return Be(a,yi,3)}T.clearNumStats=function(){$e(this,3,ni[0],void 0)};T.hasNumStats=function(){return null!=ee(this,3)};function qi(a){return Be(a,Ai,4)}T.clearStringStats=function(){$e(this,4,ni[0],void 0)};T.hasStringStats=function(){return null!=ee(this,4)};function si(a){return Be(a,Ci,5)}T.clearBytesStats=function(){$e(this,5,ni[0],void 0)};T.hasBytesStats=function(){return null!=ee(this,5)};T.clearStructStats=function(){$e(this,7,ni[0],void 0)};
T.hasStructStats=function(){return null!=ee(this,7)};function wi(a){return Xe(a,Fi,6)}T.clearCustomStatsList=function(){af(this,6,[])};function Mi(a){$d(this,a,null,null)}Gb(Mi,Yd);T=Mi.prototype;T.toObject=function(a){return Ni(a,this)};function Ni(a,b){var c={numNonMissing:+te(b,1,0),numMissing:+te(b,2,0),avgNumValues:+te(b,3,0),totNumValues:+te(b,4,0)};a&&(c.$jspbMessageInstance=b);return c}
function Oi(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readDouble();a.setNumNonMissing(c);break;case 2:c=b.readDouble();a.setNumMissing(c);break;case 3:c=b.readDouble();a.setAvgNumValues(c);break;case 4:c=b.readDouble();a.setTotNumValues(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;Pi(this,a);return xd(a)};
function Pi(a,b){var c=a.getNumNonMissing();0!==c&&b.writeDouble(1,c);c=a.getNumMissing();0!==c&&b.writeDouble(2,c);c=a.getAvgNumValues();0!==c&&b.writeDouble(3,c);c=a.getTotNumValues();0!==c&&b.writeDouble(4,c)}T.getNumNonMissing=function(){return+te(this,1,0)};T.setNumNonMissing=function(a){ye(this,1,a)};T.getNumMissing=function(){return+te(this,2,0)};T.setNumMissing=function(a){ye(this,2,a)};T.getAvgNumValues=function(){return+te(this,3,0)};T.setAvgNumValues=function(a){ye(this,3,a)};
T.getTotNumValues=function(){return+te(this,4,0)};T.setTotNumValues=function(a){ye(this,4,a)};function Fi(a){$d(this,a,null,Qi)}Gb(Fi,Yd);var Qi=[[2,3,4,5]];T=Fi.prototype;T.getValCase=function(){return ce(this,Qi[0])};T.toObject=function(a){return xi(a,this)};function xi(a,b){var c,e={name:te(b,1,""),num:+te(b,2,0),str:te(b,3,""),histogram:(c=Be(b,Ri,4))&&Si(a,c),rankHistogram:(c=b.getRankHistogram())&&Ti(a,c)};a&&(e.$jspbMessageInstance=b);return e}
function Gi(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readString();a.setName(c);break;case 2:c=b.readDouble();Ae(a,2,Qi[0],c);break;case 3:c=b.readString();Ae(a,3,Qi[0],c);break;case 4:c=new Ri;b.readMessage(c,Vi);$e(a,4,Qi[0],c);break;case 5:c=new Wi;b.readMessage(c,Xi);a.setRankHistogram(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;Li(this,a);return xd(a)};
function Li(a,b){var c=a.getName();0<c.length&&b.writeString(1,c);c=ee(a,2);null!=c&&b.writeDouble(2,c);c=ee(a,3);null!=c&&b.writeString(3,c);c=Be(a,Ri,4);null!=c&&b.writeMessage(4,c,Nj);c=a.getRankHistogram();null!=c&&b.writeMessage(5,c,Oj)}T.getName=function(){return te(this,1,"")};T.setName=function(a){xe(this,1,a,"")};T.clearNum=function(){Ae(this,2,Qi[0],void 0)};T.hasNum=function(){return null!=ee(this,2)};T.clearStr=function(){Ae(this,3,Qi[0],void 0)};
T.hasStr=function(){return null!=ee(this,3)};T.clearHistogram=function(){$e(this,4,Qi[0],void 0)};T.hasHistogram=function(){return null!=ee(this,4)};T.getRankHistogram=function(){return Be(this,Wi,5)};T.setRankHistogram=function(a){$e(this,5,Qi[0],a)};T.clearRankHistogram=function(){this.setRankHistogram(void 0)};T.hasRankHistogram=function(){return null!=ee(this,5)};function yi(a){$d(this,a,Pj,null)}Gb(yi,Yd);var Pj=[8];T=yi.prototype;T.toObject=function(a){return pi(a,this)};
function pi(a,b){var c,e={commonStats:(c=Qj(b))&&Rj(a,c),mean:+te(b,2,0),stdDev:+te(b,3,0),numZeros:te(b,4,0),min:+te(b,5,0),median:+te(b,6,0),max:+te(b,7,0),histogramsList:de(b.getHistogramsList(),Si,a),weightedNumericStats:(c=Be(b,Sj,9))&&Tj(a,c)};a&&(e.$jspbMessageInstance=b);return e}
function zi(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=new Uj;b.readMessage(c,Vj);a.setCommonStats(c);break;case 2:c=b.readDouble();a.setMean(c);break;case 3:c=b.readDouble();a.setStdDev(c);break;case 4:c=b.readUint64();we(a,4,c);break;case 5:c=b.readDouble();ye(a,5,c);break;case 6:c=b.readDouble();a.setMedian(c);break;case 7:c=b.readDouble();ye(a,7,c);break;case 8:c=new Ri;b.readMessage(c,Vi);a.addHistograms(c);break;case 9:c=new Sj;b.readMessage(c,Wj);Ze(a,9,c);break;default:fd(b)}return a}
T.serializeBinary=function(){var a=new hd;Hi(this,a);return xd(a)};function Hi(a,b){var c=Qj(a);null!=c&&b.writeMessage(1,c,Xj);c=a.getMean();0!==c&&b.writeDouble(2,c);c=a.getStdDev();0!==c&&b.writeDouble(3,c);c=te(a,4,0);0!==c&&b.writeUint64(4,c);c=+te(a,5,0);0!==c&&b.writeDouble(5,c);c=a.getMedian();0!==c&&b.writeDouble(6,c);c=+te(a,7,0);0!==c&&b.writeDouble(7,c);c=a.getHistogramsList();0<c.length&&Jd(b,8,c,Nj);c=Be(a,Sj,9);null!=c&&b.writeMessage(9,c,Yj)}function Qj(a){return Be(a,Uj,1)}
T.setCommonStats=function(a){Ze(this,1,a)};T.clearCommonStats=function(){this.setCommonStats(void 0)};T.hasCommonStats=function(){return null!=ee(this,1)};T.getMean=function(){return+te(this,2,0)};T.setMean=function(a){ye(this,2,a)};T.getStdDev=function(){return+te(this,3,0)};T.setStdDev=function(a){ye(this,3,a)};T.getMedian=function(){return+te(this,6,0)};T.setMedian=function(a){ye(this,6,a)};T.getHistogramsList=function(){return Xe(this,Ri,8)};T.setHistogramsList=function(a){af(this,8,a)};
T.addHistograms=function(a){return bf(this,8,a,Ri,void 0)};T.clearHistogramsList=function(){this.setHistogramsList([])};T.clearWeightedNumericStats=function(){Ze(this,9,void 0)};T.hasWeightedNumericStats=function(){return null!=ee(this,9)};function Ai(a){$d(this,a,Zj,null)}Gb(Ai,Yd);var Zj=[3];Ai.prototype.toObject=function(a){return ri(a,this)};
function ri(a,b){var c,e={commonStats:(c=Qj(b))&&Rj(a,c),unique:te(b,2,0),topValuesList:de(b.getTopValuesList(),ak,a),avgLength:+te(b,4,0),rankHistogram:(c=b.getRankHistogram())&&Ti(a,c),weightedStringStats:(c=Be(b,bk,6))&&ck(a,c)};a&&(e.$jspbMessageInstance=b);return e}
function Bi(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=new Uj;b.readMessage(c,Vj);a.setCommonStats(c);break;case 2:c=b.readUint64();a.setUnique(c);break;case 3:c=new dk;b.readMessage(c,ek);a.addTopValues(c);break;case 4:c=b.readFloat();ye(a,4,c);break;case 5:c=new Wi;b.readMessage(c,Xi);a.setRankHistogram(c);break;case 6:c=new bk;b.readMessage(c,fk);Ze(a,6,c);break;default:fd(b)}return a}Ai.prototype.serializeBinary=function(){var a=new hd;Ii(this,a);return xd(a)};
function Ii(a,b){var c=Qj(a);null!=c&&b.writeMessage(1,c,Xj);c=te(a,2,0);0!==c&&b.writeUint64(2,c);c=a.getTopValuesList();0<c.length&&Jd(b,3,c,gk);c=+te(a,4,0);0!==c&&b.writeFloat(4,c);c=a.getRankHistogram();null!=c&&b.writeMessage(5,c,Oj);c=Be(a,bk,6);null!=c&&b.writeMessage(6,c,hk)}function dk(a){$d(this,a,null,null)}Gb(dk,Yd);dk.prototype.toObject=function(a){return ak(a,this)};
function ak(a,b){var c={deprecatedFreq:te(b,1,0),value:te(b,2,""),frequency:+te(b,3,0)};a&&(c.$jspbMessageInstance=b);return c}function ek(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readUint64();we(a,1,c);break;case 2:c=b.readString();a.setValue(c);break;case 3:c=b.readDouble();ye(a,3,c);break;default:fd(b)}return a}dk.prototype.serializeBinary=function(){var a=new hd;gk(this,a);return xd(a)};
function gk(a,b){var c=te(a,1,0);0!==c&&b.writeUint64(1,c);c=a.getValue();0<c.length&&b.writeString(2,c);c=+te(a,3,0);0!==c&&b.writeDouble(3,c)}dk.prototype.getValue=function(){return te(this,2,"")};dk.prototype.setValue=function(a){xe(this,2,a,"")};T=Ai.prototype;T.getCommonStats=function(){return Be(this,Uj,1)};T.setCommonStats=function(a){Ze(this,1,a)};T.clearCommonStats=function(){this.setCommonStats(void 0)};T.hasCommonStats=function(){return null!=ee(this,1)};
T.setUnique=function(a){we(this,2,a)};T.getTopValuesList=function(){return Xe(this,dk,3)};T.setTopValuesList=function(a){af(this,3,a)};T.addTopValues=function(a){return bf(this,3,a,dk,void 0)};T.clearTopValuesList=function(){this.setTopValuesList([])};T.getRankHistogram=function(){return Be(this,Wi,5)};T.setRankHistogram=function(a){Ze(this,5,a)};T.clearRankHistogram=function(){this.setRankHistogram(void 0)};T.hasRankHistogram=function(){return null!=ee(this,5)};
T.clearWeightedStringStats=function(){Ze(this,6,void 0)};T.hasWeightedStringStats=function(){return null!=ee(this,6)};function Sj(a){$d(this,a,ik,null)}Gb(Sj,Yd);var ik=[4];T=Sj.prototype;T.toObject=function(a){return Tj(a,this)};function Tj(a,b){var c={mean:+te(b,1,0),stdDev:+te(b,2,0),median:+te(b,3,0),histogramsList:de(b.getHistogramsList(),Si,a)};a&&(c.$jspbMessageInstance=b);return c}
function Wj(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readDouble();a.setMean(c);break;case 2:c=b.readDouble();a.setStdDev(c);break;case 3:c=b.readDouble();a.setMedian(c);break;case 4:c=new Ri;b.readMessage(c,Vi);a.addHistograms(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;Yj(this,a);return xd(a)};
function Yj(a,b){var c=a.getMean();0!==c&&b.writeDouble(1,c);c=a.getStdDev();0!==c&&b.writeDouble(2,c);c=a.getMedian();0!==c&&b.writeDouble(3,c);c=a.getHistogramsList();0<c.length&&Jd(b,4,c,Nj)}T.getMean=function(){return+te(this,1,0)};T.setMean=function(a){ye(this,1,a)};T.getStdDev=function(){return+te(this,2,0)};T.setStdDev=function(a){ye(this,2,a)};T.getMedian=function(){return+te(this,3,0)};T.setMedian=function(a){ye(this,3,a)};T.getHistogramsList=function(){return Xe(this,Ri,4)};
T.setHistogramsList=function(a){af(this,4,a)};T.addHistograms=function(a){return bf(this,4,a,Ri,void 0)};T.clearHistogramsList=function(){this.setHistogramsList([])};function bk(a){$d(this,a,jk,null)}Gb(bk,Yd);var jk=[1];T=bk.prototype;T.toObject=function(a){return ck(a,this)};function ck(a,b){var c,e={topValuesList:de(b.getTopValuesList(),ak,a),rankHistogram:(c=b.getRankHistogram())&&Ti(a,c)};a&&(e.$jspbMessageInstance=b);return e}
function fk(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=new dk;b.readMessage(c,ek);a.addTopValues(c);break;case 2:c=new Wi;b.readMessage(c,Xi);a.setRankHistogram(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;hk(this,a);return xd(a)};function hk(a,b){var c=a.getTopValuesList();0<c.length&&Jd(b,1,c,gk);c=a.getRankHistogram();null!=c&&b.writeMessage(2,c,Oj)}T.getTopValuesList=function(){return Xe(this,dk,1)};T.setTopValuesList=function(a){af(this,1,a)};
T.addTopValues=function(a){return bf(this,1,a,dk,void 0)};T.clearTopValuesList=function(){this.setTopValuesList([])};T.getRankHistogram=function(){return Be(this,Wi,2)};T.setRankHistogram=function(a){Ze(this,2,a)};T.clearRankHistogram=function(){this.setRankHistogram(void 0)};T.hasRankHistogram=function(){return null!=ee(this,2)};function Ci(a){$d(this,a,null,null)}Gb(Ci,Yd);T=Ci.prototype;T.toObject=function(a){return ti(a,this)};
function ti(a,b){var c,e={commonStats:(c=Qj(b))&&Rj(a,c),unique:te(b,2,0),avgNumBytes:+te(b,3,0),minNumBytes:+te(b,4,0),maxNumBytes:+te(b,5,0)};a&&(e.$jspbMessageInstance=b);return e}function Di(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=new Uj;b.readMessage(c,Vj);a.setCommonStats(c);break;case 2:c=b.readUint64();a.setUnique(c);break;case 3:c=b.readFloat();ye(a,3,c);break;case 4:c=b.readFloat();ye(a,4,c);break;case 5:c=b.readFloat();ye(a,5,c);break;default:fd(b)}return a}
T.serializeBinary=function(){var a=new hd;Ji(this,a);return xd(a)};function Ji(a,b){var c=Qj(a);null!=c&&b.writeMessage(1,c,Xj);c=te(a,2,0);0!==c&&b.writeUint64(2,c);c=+te(a,3,0);0!==c&&b.writeFloat(3,c);c=+te(a,4,0);0!==c&&b.writeFloat(4,c);c=+te(a,5,0);0!==c&&b.writeFloat(5,c)}T.getCommonStats=function(){return Be(this,Uj,1)};T.setCommonStats=function(a){Ze(this,1,a)};T.clearCommonStats=function(){this.setCommonStats(void 0)};T.hasCommonStats=function(){return null!=ee(this,1)};
T.getUnique=function(){return te(this,2,0)};T.setUnique=function(a){we(this,2,a)};function ui(a){$d(this,a,null,null)}Gb(ui,Yd);T=ui.prototype;T.toObject=function(a){return vi(a,this)};function vi(a,b){var c,e={commonStats:(c=Qj(b))&&Rj(a,c)};a&&(e.$jspbMessageInstance=b);return e}function Ei(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=new Uj;b.readMessage(c,Vj);a.setCommonStats(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;Ki(this,a);return xd(a)};
function Ki(a,b){a=Qj(a);null!=a&&b.writeMessage(1,a,Xj)}T.getCommonStats=function(){return Be(this,Uj,1)};T.setCommonStats=function(a){Ze(this,1,a)};T.clearCommonStats=function(){this.setCommonStats(void 0)};T.hasCommonStats=function(){return null!=ee(this,1)};function Uj(a){$d(this,a,null,null)}Gb(Uj,Yd);T=Uj.prototype;T.toObject=function(a){return Rj(a,this)};
function Rj(a,b){var c,e={numNonMissing:te(b,1,0),numMissing:te(b,2,0),minNumValues:te(b,3,0),maxNumValues:te(b,4,0),avgNumValues:+te(b,5,0),totNumValues:te(b,8,0),numValuesHistogram:(c=Be(b,Ri,6))&&Si(a,c),weightedCommonStats:(c=Be(b,Mi,7))&&Ni(a,c),featureListLengthHistogram:(c=Be(b,Ri,9))&&Si(a,c)};a&&(e.$jspbMessageInstance=b);return e}
function Vj(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readUint64();a.setNumNonMissing(c);break;case 2:c=b.readUint64();a.setNumMissing(c);break;case 3:c=b.readUint64();we(a,3,c);break;case 4:c=b.readUint64();we(a,4,c);break;case 5:c=b.readFloat();a.setAvgNumValues(c);break;case 8:c=b.readUint64();a.setTotNumValues(c);break;case 6:c=new Ri;b.readMessage(c,Vi);Ze(a,6,c);break;case 7:c=new Mi;b.readMessage(c,Oi);Ze(a,7,c);break;case 9:c=new Ri;b.readMessage(c,Vi);Ze(a,9,c);break;default:fd(b)}return a}
T.serializeBinary=function(){var a=new hd;Xj(this,a);return xd(a)};function Xj(a,b){var c=a.getNumNonMissing();0!==c&&b.writeUint64(1,c);c=a.getNumMissing();0!==c&&b.writeUint64(2,c);c=te(a,3,0);0!==c&&b.writeUint64(3,c);c=te(a,4,0);0!==c&&b.writeUint64(4,c);c=a.getAvgNumValues();0!==c&&b.writeFloat(5,c);c=a.getTotNumValues();0!==c&&b.writeUint64(8,c);c=Be(a,Ri,6);null!=c&&b.writeMessage(6,c,Nj);c=Be(a,Mi,7);null!=c&&b.writeMessage(7,c,Pi);c=Be(a,Ri,9);null!=c&&b.writeMessage(9,c,Nj)}
T.getNumNonMissing=function(){return te(this,1,0)};T.setNumNonMissing=function(a){we(this,1,a)};T.getNumMissing=function(){return te(this,2,0)};T.setNumMissing=function(a){we(this,2,a)};T.getAvgNumValues=function(){return+te(this,5,0)};T.setAvgNumValues=function(a){ye(this,5,a)};T.getTotNumValues=function(){return te(this,8,0)};T.setTotNumValues=function(a){we(this,8,a)};T.clearNumValuesHistogram=function(){Ze(this,6,void 0)};T.hasNumValuesHistogram=function(){return null!=ee(this,6)};
T.clearWeightedCommonStats=function(){Ze(this,7,void 0)};T.hasWeightedCommonStats=function(){return null!=ee(this,7)};T.clearFeatureListLengthHistogram=function(){Ze(this,9,void 0)};T.hasFeatureListLengthHistogram=function(){return null!=ee(this,9)};function Ri(a){$d(this,a,kk,null)}Gb(Ri,Yd);var kk=[3];Ri.prototype.toObject=function(a){return Si(a,this)};
function Si(a,b){var c={numNan:te(b,1,0),numUndefined:te(b,2,0),bucketsList:de(b.getBucketsList(),lk,a),type:te(b,4,0),name:te(b,5,"")};a&&(c.$jspbMessageInstance=b);return c}function Vi(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readUint64();we(a,1,c);break;case 2:c=b.readUint64();we(a,2,c);break;case 3:c=new mk;b.readMessage(c,nk);a.addBuckets(c);break;case 4:c=b.readEnum();a.setType(c);break;case 5:c=b.readString();a.setName(c);break;default:fd(b)}return a}
Ri.prototype.serializeBinary=function(){var a=new hd;Nj(this,a);return xd(a)};function Nj(a,b){var c=te(a,1,0);0!==c&&b.writeUint64(1,c);c=te(a,2,0);0!==c&&b.writeUint64(2,c);c=a.getBucketsList();0<c.length&&Jd(b,3,c,ok);c=a.getType();0!==c&&b.writeEnum(4,c);c=a.getName();0<c.length&&b.writeString(5,c)}function mk(a){$d(this,a,null,null)}Gb(mk,Yd);T=mk.prototype;T.toObject=function(a){return lk(a,this)};
function lk(a,b){var c={lowValue:+te(b,1,0),highValue:+te(b,2,0),deprecatedCount:te(b,3,0),sampleCount:+te(b,4,0)};a&&(c.$jspbMessageInstance=b);return c}function nk(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readDouble();pk(a,c);break;case 2:c=b.readDouble();qk(a,c);break;case 3:c=b.readUint64();a.setDeprecatedCount(c);break;case 4:c=b.readDouble();a.setSampleCount(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;ok(this,a);return xd(a)};
function ok(a,b){var c=a.getLowValue();0!==c&&b.writeDouble(1,c);c=rk(a);0!==c&&b.writeDouble(2,c);c=te(a,3,0);0!==c&&b.writeUint64(3,c);c=a.getSampleCount();0!==c&&b.writeDouble(4,c)}T.getLowValue=function(){return+te(this,1,0)};function pk(a,b){ye(a,1,b)}function rk(a){return+te(a,2,0)}function qk(a,b){ye(a,2,b)}T.setDeprecatedCount=function(a){we(this,3,a)};T.getSampleCount=function(){return+te(this,4,0)};T.setSampleCount=function(a){ye(this,4,a)};T=Ri.prototype;
T.getBucketsList=function(){return Xe(this,mk,3)};T.setBucketsList=function(a){af(this,3,a)};T.addBuckets=function(a){return bf(this,3,a,mk,void 0)};T.clearBucketsList=function(){this.setBucketsList([])};T.getType=function(){return te(this,4,0)};T.setType=function(a){xe(this,4,a,0)};T.getName=function(){return te(this,5,"")};T.setName=function(a){xe(this,5,a,"")};function Wi(a){$d(this,a,sk,null)}Gb(Wi,Yd);var sk=[1];Wi.prototype.toObject=function(a){return Ti(a,this)};
function Ti(a,b){var c={bucketsList:de(b.getBucketsList(),tk,a),name:te(b,2,"")};a&&(c.$jspbMessageInstance=b);return c}function Xi(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=new uk;b.readMessage(c,vk);a.addBuckets(c);break;case 2:c=b.readString();a.setName(c);break;default:fd(b)}return a}Wi.prototype.serializeBinary=function(){var a=new hd;Oj(this,a);return xd(a)};function Oj(a,b){var c=a.getBucketsList();0<c.length&&Jd(b,1,c,wk);c=a.getName();0<c.length&&b.writeString(2,c)}
function uk(a){$d(this,a,null,null)}Gb(uk,Yd);T=uk.prototype;T.toObject=function(a){return tk(a,this)};function tk(a,b){var c={lowRank:te(b,1,0),highRank:te(b,2,0),deprecatedCount:te(b,3,0),label:te(b,4,""),sampleCount:+te(b,5,0)};a&&(c.$jspbMessageInstance=b);return c}
function vk(a,b){for(;ed(b)&&!dd(b);)switch(b.nextField_){case 1:var c=b.readUint64();we(a,1,c);break;case 2:c=b.readUint64();we(a,2,c);break;case 3:c=b.readUint64();a.setDeprecatedCount(c);break;case 4:c=b.readString();xe(a,4,c,"");break;case 5:c=b.readDouble();a.setSampleCount(c);break;default:fd(b)}return a}T.serializeBinary=function(){var a=new hd;wk(this,a);return xd(a)};
function wk(a,b){var c=te(a,1,0);0!==c&&b.writeUint64(1,c);c=te(a,2,0);0!==c&&b.writeUint64(2,c);c=te(a,3,0);0!==c&&b.writeUint64(3,c);c=a.getLabel();0<c.length&&b.writeString(4,c);c=a.getSampleCount();0!==c&&b.writeDouble(5,c)}T.getDeprecatedCount=function(){return te(this,3,0)};T.setDeprecatedCount=function(a){we(this,3,a)};T.getLabel=function(){return te(this,4,"")};T.getSampleCount=function(){return+te(this,5,0)};T.setSampleCount=function(a){ye(this,5,a)};T=Wi.prototype;
T.getBucketsList=function(){return Xe(this,uk,1)};T.setBucketsList=function(a){af(this,1,a)};T.addBuckets=function(a){return bf(this,1,a,uk,void 0)};T.clearBucketsList=function(){this.setBucketsList([])};T.getName=function(){return te(this,2,"")};T.setName=function(a){xe(this,2,a,"")};
//~~WEBPATH~~external/com_google_javascript_closure_library/closure/goog/deps.js
//~~WEBPATH~~/analytics.html.js
window.ga=function(){};
</script>


<style>
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto'), local('Roboto-Regular'), url(/font-roboto/uYECMKoHcO9x1wdmbyHIm3-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto'), local('Roboto-Regular'), url(/font-roboto/sTdaA6j0Psb920Vjv-mrzH-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto'), local('Roboto-Regular'), url(/font-roboto/_VYFx-s824kXq_Ul2BHqYH-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto'), local('Roboto-Regular'), url(/font-roboto/tnj4SB6DNbdaQnsM8CFqBX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto'), local('Roboto-Regular'), url(/font-roboto/oMMgfZMQthOryQo9n22dcuvvDin1pK8aKteLpeZ5c0A.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto'), local('Roboto-Regular'), url(/font-roboto/Ks_cVxiCiwUWVsFWFA3Bjn-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto'), local('Roboto-Regular'), url(/font-roboto/NJ4vxlgWwWbEsv18dAhqnn-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Bold'), local('Roboto-Bold'), url(/font-roboto/isZ-wbCXNKAbnjo6_TwHToX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Bold'), local('Roboto-Bold'), url(/font-roboto/77FXFjRbGzN4aCrSFhlh3oX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Bold'), local('Roboto-Bold'), url(/font-roboto/jSN2CGVDbcVyCnfJfjSdfIX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Bold'), local('Roboto-Bold'), url(/font-roboto/UX6i4JxQDm3fVTc1CPuwqoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Bold'), local('Roboto-Bold'), url(/font-roboto/d-6IYplOFocCacKzxwXSOJBw1xU1rKptJj_0jans920.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Bold'), local('Roboto-Bold'), url(/font-roboto/97uahxiqZRoncBaCEI3aW4X0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Bold'), local('Roboto-Bold'), url(/font-roboto/PwZc-YbIL414wB9rB1IAPYX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 700;
  src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(/font-roboto/t6Nd4cfPRhZP44Q5QAjcC14sYYdJg5dU2qzJEVSuta0.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 700;
  src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(/font-roboto/t6Nd4cfPRhZP44Q5QAjcC_ZraR2Tg8w2lzm7kLNL0-w.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 700;
  src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(/font-roboto/t6Nd4cfPRhZP44Q5QAjcCwt_Rm691LTebKfY2ZkKSmI.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 700;
  src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(/font-roboto/t6Nd4cfPRhZP44Q5QAjcC1BW26QxpSj-_ZKm_xT4hWw.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 700;
  src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(/font-roboto/t6Nd4cfPRhZP44Q5QAjcC4gp9Q8gbYrhqGlRav_IXfk.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 700;
  src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(/font-roboto/t6Nd4cfPRhZP44Q5QAjcC6E8kM4xWR1_1bYURRojRGc.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 700;
  src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(/font-roboto/t6Nd4cfPRhZP44Q5QAjcC9DiNsR5a-9Oe_Ivpu8XWlY.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 400;
  src: local('Roboto Italic'), local('Roboto-Italic'), url(/font-roboto/OpXUqTo0UgQQhGj_SFdLWBkAz4rYn47Zy2rvigWQf6w.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 400;
  src: local('Roboto Italic'), local('Roboto-Italic'), url(/font-roboto/WxrXJa0C3KdtC7lMafG4dRkAz4rYn47Zy2rvigWQf6w.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 400;
  src: local('Roboto Italic'), local('Roboto-Italic'), url(/font-roboto/cDKhRaXnQTOVbaoxwdOr9xkAz4rYn47Zy2rvigWQf6w.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 400;
  src: local('Roboto Italic'), local('Roboto-Italic'), url(/font-roboto/1hZf02POANh32k2VkgEoUBkAz4rYn47Zy2rvigWQf6w.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 400;
  src: local('Roboto Italic'), local('Roboto-Italic'), url(/font-roboto/vPcynSL0qHq_6dX7lKVByXYhjbSpvc47ee6xR_80Hnw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 400;
  src: local('Roboto Italic'), local('Roboto-Italic'), url(/font-roboto/vSzulfKSK0LLjjfeaxcREhkAz4rYn47Zy2rvigWQf6w.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 400;
  src: local('Roboto Italic'), local('Roboto-Italic'), url(/font-roboto/K23cxWVTrIFD6DJsEVi07RkAz4rYn47Zy2rvigWQf6w.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 300;
  src: local('Roboto Light'), local('Roboto-Light'), url(/font-roboto/Fl4y0QdOxyyTHEGMXX8kcYX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 300;
  src: local('Roboto Light'), local('Roboto-Light'), url(/font-roboto/0eC6fl06luXEYWpBSJvXCIX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 300;
  src: local('Roboto Light'), local('Roboto-Light'), url(/font-roboto/I3S1wsgSg9YCurV6PUkTOYX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 300;
  src: local('Roboto Light'), local('Roboto-Light'), url(/font-roboto/-L14Jk06m6pUHB-5mXQQnYX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 300;
  src: local('Roboto Light'), local('Roboto-Light'), url(/font-roboto/Hgo13k-tfSpn0qi1SFdUfZBw1xU1rKptJj_0jans920.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 300;
  src: local('Roboto Light'), local('Roboto-Light'), url(/font-roboto/Pru33qjShpZSmG3z6VYwnYX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 300;
  src: local('Roboto Light'), local('Roboto-Light'), url(/font-roboto/NYDWBdD4gIq26G5XYbHsFIX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 300;
  src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(/font-roboto/7m8l7TlFO-S3VkhHuR0at14sYYdJg5dU2qzJEVSuta0.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 300;
  src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(/font-roboto/7m8l7TlFO-S3VkhHuR0at_ZraR2Tg8w2lzm7kLNL0-w.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 300;
  src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(/font-roboto/7m8l7TlFO-S3VkhHuR0atwt_Rm691LTebKfY2ZkKSmI.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 300;
  src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(/font-roboto/7m8l7TlFO-S3VkhHuR0at1BW26QxpSj-_ZKm_xT4hWw.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 300;
  src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(/font-roboto/7m8l7TlFO-S3VkhHuR0at4gp9Q8gbYrhqGlRav_IXfk.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 300;
  src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(/font-roboto/7m8l7TlFO-S3VkhHuR0at6E8kM4xWR1_1bYURRojRGc.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 300;
  src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(/font-roboto/7m8l7TlFO-S3VkhHuR0at9DiNsR5a-9Oe_Ivpu8XWlY.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  src: local('Roboto Medium'), local('Roboto-Medium'), url(/font-roboto/oHi30kwQWvpCWqAhzHcCSIX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  src: local('Roboto Medium'), local('Roboto-Medium'), url(/font-roboto/ZLqKeelYbATG60EpZBSDy4X0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  src: local('Roboto Medium'), local('Roboto-Medium'), url(/font-roboto/mx9Uck6uB63VIKFYnEMXrYX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  src: local('Roboto Medium'), local('Roboto-Medium'), url(/font-roboto/rGvHdJnr2l75qb0YND9NyIX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  src: local('Roboto Medium'), local('Roboto-Medium'), url(/font-roboto/RxZJdnzeo3R5zSexge8UUZBw1xU1rKptJj_0jans920.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  src: local('Roboto Medium'), local('Roboto-Medium'), url(/font-roboto/oOeFwZNlrTefzLYmlVV1UIX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  src: local('Roboto Medium'), local('Roboto-Medium'), url(/font-roboto/mbmhprMH69Zi6eEPBYVFhYX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 500;
  src: local('Roboto Medium Italic'), local('Roboto-MediumItalic'), url(/font-roboto/OLffGBTaF0XFOW1gnuHF0V4sYYdJg5dU2qzJEVSuta0.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 500;
  src: local('Roboto Medium Italic'), local('Roboto-MediumItalic'), url(/font-roboto/OLffGBTaF0XFOW1gnuHF0fZraR2Tg8w2lzm7kLNL0-w.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 500;
  src: local('Roboto Medium Italic'), local('Roboto-MediumItalic'), url(/font-roboto/OLffGBTaF0XFOW1gnuHF0Qt_Rm691LTebKfY2ZkKSmI.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 500;
  src: local('Roboto Medium Italic'), local('Roboto-MediumItalic'), url(/font-roboto/OLffGBTaF0XFOW1gnuHF0VBW26QxpSj-_ZKm_xT4hWw.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 500;
  src: local('Roboto Medium Italic'), local('Roboto-MediumItalic'), url(/font-roboto/OLffGBTaF0XFOW1gnuHF0Ygp9Q8gbYrhqGlRav_IXfk.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 500;
  src: local('Roboto Medium Italic'), local('Roboto-MediumItalic'), url(/font-roboto/OLffGBTaF0XFOW1gnuHF0aE8kM4xWR1_1bYURRojRGc.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 500;
  src: local('Roboto Medium Italic'), local('Roboto-MediumItalic'), url(/font-roboto/OLffGBTaF0XFOW1gnuHF0dDiNsR5a-9Oe_Ivpu8XWlY.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto Mono'), local('RobotoMono-Regular'), url(/font-roboto/hMqPNLsu_dywMa4C_DEpY14sYYdJg5dU2qzJEVSuta0.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto Mono'), local('RobotoMono-Regular'), url(/font-roboto/hMqPNLsu_dywMa4C_DEpY_ZraR2Tg8w2lzm7kLNL0-w.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto Mono'), local('RobotoMono-Regular'), url(/font-roboto/hMqPNLsu_dywMa4C_DEpYwt_Rm691LTebKfY2ZkKSmI.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto Mono'), local('RobotoMono-Regular'), url(/font-roboto/hMqPNLsu_dywMa4C_DEpY1BW26QxpSj-_ZKm_xT4hWw.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto Mono'), local('RobotoMono-Regular'), url(/font-roboto/hMqPNLsu_dywMa4C_DEpY4gp9Q8gbYrhqGlRav_IXfk.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto Mono'), local('RobotoMono-Regular'), url(/font-roboto/hMqPNLsu_dywMa4C_DEpY6E8kM4xWR1_1bYURRojRGc.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto Mono'), local('RobotoMono-Regular'), url(/font-roboto/hMqPNLsu_dywMa4C_DEpY9DiNsR5a-9Oe_Ivpu8XWlY.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Mono Bold'), local('RobotoMono-Bold'), url(/font-roboto/N4duVc9C58uwPiY8_59Fz1x-M1I1w5OMiqnVF8xBLhU.woff2) format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Mono Bold'), local('RobotoMono-Bold'), url(/font-roboto/N4duVc9C58uwPiY8_59FzwXaAXup5mZlfK6xRLrhsco.woff2) format('woff2');
  unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Mono Bold'), local('RobotoMono-Bold'), url(/font-roboto/N4duVc9C58uwPiY8_59Fzwn6Wqxo-xwxilDXPU8chVU.woff2) format('woff2');
  unicode-range: U+0370-03FF;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Mono Bold'), local('RobotoMono-Bold'), url(/font-roboto/N4duVc9C58uwPiY8_59Fz1T7aJLK6nKpn36IMwTcMMc.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Mono Bold'), local('RobotoMono-Bold'), url(/font-roboto/N4duVc9C58uwPiY8_59Fz_79_ZuUxCigM2DespTnFaw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Mono Bold'), local('RobotoMono-Bold'), url(/font-roboto/N4duVc9C58uwPiY8_59Fz4gd9OEPUCN3AdYW0e8tat4.woff2) format('woff2');
  unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Mono Bold'), local('RobotoMono-Bold'), url(/font-roboto/N4duVc9C58uwPiY8_59Fz8bIQSYZnWLaWC9QNCpTK_U.woff2) format('woff2');
  unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
</style>


<style>
  html,
  body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Roboto, sans-serif;
  }
</style>

<script>//~~WEBPATH~~/polymer/polymer-micro.html.js
(function(){function a(){document.body.removeAttribute("unresolved")}window.WebComponents?addEventListener("WebComponentsReady",a):"interactive"===document.readyState||"complete"===document.readyState?a():addEventListener("DOMContentLoaded",a)})();var xk=window,yk=window.Polymer||{};if(!yk.noUrlSettings)for(var zk=location.search.slice(1).split("\x26"),Ak=0,Bk;Ak<zk.length&&(Bk=zk[Ak]);Ak++)Bk=Bk.split("\x3d"),Bk[0]&&(yk[Bk[0]]=Bk[1]||!0);yk.wantShadow="shadow"===yk.dom;yk.hasShadow=!!Element.prototype.createShadowRoot;
yk.nativeShadow=yk.hasShadow&&!window.ShadowDOMPolyfill;yk.useShadow=yk.wantShadow&&yk.hasShadow;yk.hasNativeImports="import"in document.createElement("link");yk.useNativeImports=yk.hasNativeImports;yk.useNativeCustomElements=!window.CustomElements||window.CustomElements.useNative;yk.useNativeShadow=yk.useShadow&&yk.nativeShadow;yk.usePolyfillProto=!yk.useNativeCustomElements&&!Object.__proto__;
yk.hasNativeCSSProperties=!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)");yk.useNativeCSSProperties=yk.hasNativeCSSProperties&&yk.lazyRegister&&yk.useNativeCSSProperties;yk.isIE=navigator.userAgent.match("Trident");yk.passiveTouchGestures=yk.passiveTouchGestures||!1;xk.Polymer={Settings:yk};
(function(){function a(e){var f=Polymer.Base;e.extends&&(f=Polymer.Base._getExtendedPrototype(e.extends));e=Polymer.Base.chainObject(e,f);e.registerCallback();return e}var b=window.Polymer;window.Polymer=function(e){"function"===typeof e&&(e=e.prototype);e||(e={});e=a(e);var f=e===e.constructor.prototype?e.constructor:null,g={prototype:e};e.extends&&(g.extends=e.extends);Polymer.telemetry._registrate(e);e=document.registerElement(e.is,g);return f||e};if(b)for(var c in b)Polymer[c]=b[c];Polymer.Class=
function(e){e.factoryImpl||(e.factoryImpl=function(){});return a(e).constructor}})();Polymer.telemetry={registrations:[],_regLog:function(a){console.log("["+a.is+"]: registered")},_registrate:function(a){this.registrations.push(a);Polymer.log&&this._regLog(a)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}};Object.defineProperty(window,"currentImport",{enumerable:!0,configurable:!0,get:function(){return(document._currentScript||document.currentScript||{}).ownerDocument}});
Polymer.RenderStatus={_ready:!1,_callbacks:[],whenReady:function(a){this._ready?a():this._callbacks.push(a)},_makeReady:function(){this._ready=!0;for(var a=0;a<this._callbacks.length;a++)this._callbacks[a]();this._callbacks=[]},_catchFirstRender:function(){requestAnimationFrame(function(){Polymer.RenderStatus._makeReady()})},_afterNextRenderQueue:[],_waitingNextRender:!1,afterNextRender:function(a,b,c){this._watchNextRender();this._afterNextRenderQueue.push([a,b,c])},hasRendered:function(){return this._ready},
_watchNextRender:function(){if(!this._waitingNextRender){this._waitingNextRender=!0;var a=function(){Polymer.RenderStatus._flushNextRender()};this._ready?requestAnimationFrame(a):this.whenReady(a)}},_flushNextRender:function(){var a=this;setTimeout(function(){a._flushRenderCallbacks(a._afterNextRenderQueue);a._afterNextRenderQueue=[];a._waitingNextRender=!1})},_flushRenderCallbacks:function(a){for(var b=0,c;b<a.length;b++)c=a[b],c[1].apply(c[0],c[2]||Polymer.nar)}};
window.HTMLImports?HTMLImports.whenReady(function(){Polymer.RenderStatus._catchFirstRender()}):Polymer.RenderStatus._catchFirstRender();Polymer.ImportStatus=Polymer.RenderStatus;Polymer.ImportStatus.whenLoaded=Polymer.ImportStatus.whenReady;
(function(){var a=Polymer.Settings;Polymer.Base={__isPolymerInstance__:!0,_addFeature:function(e){this.mixin(this,e)},registerCallback:function(){if("max"!==a.lazyRegister){this._desugarBehaviors();for(var e=0,f;e<this.behaviors.length;e++)f=this.behaviors[e],f.beforeRegister&&f.beforeRegister.call(this)}this.beforeRegister&&this.beforeRegister();this._registerFeatures();a.lazyRegister||this.ensureRegisterFinished()},createdCallback:function(){if(a.disableUpgradeEnabled){if(this.hasAttribute("disable-upgrade")){this._propertySetter=
b;this._configValue=null;this.__data__={};return}this.__hasInitialized=!0}this.__initialize()},__initialize:function(){this.__hasRegisterFinished||this._ensureRegisterFinished(this.__proto__);Polymer.telemetry.instanceCount++;this.root=this;for(var e=0,f;e<this.behaviors.length;e++)f=this.behaviors[e],f.created&&f.created.call(this);this.created&&this.created();this._initFeatures()},ensureRegisterFinished:function(){this._ensureRegisterFinished(this)},_ensureRegisterFinished:function(e){if(e.__hasRegisterFinished!==
e.is||!e.is){if("max"===a.lazyRegister){e._desugarBehaviors();for(var f=0,g;f<e.behaviors.length;f++)g=e.behaviors[f],g.beforeRegister&&g.beforeRegister.call(e)}e.__hasRegisterFinished=e.is;e._finishRegisterFeatures&&e._finishRegisterFeatures();for(f=0;f<e.behaviors.length;f++)g=e.behaviors[f],g.registered&&g.registered.call(e);e.registered&&e.registered();a.usePolyfillProto&&e!==this&&e.extend(this,e)}},attachedCallback:function(){var e=this;Polymer.RenderStatus.whenReady(function(){e.isAttached=
!0;for(var f=0,g;f<e.behaviors.length;f++)g=e.behaviors[f],g.attached&&g.attached.call(e);e.attached&&e.attached()})},detachedCallback:function(){var e=this;Polymer.RenderStatus.whenReady(function(){e.isAttached=!1;for(var f=0,g;f<e.behaviors.length;f++)g=e.behaviors[f],g.detached&&g.detached.call(e);e.detached&&e.detached()})},attributeChangedCallback:function(e,f,g){this._attributeChangedImpl(e);for(var h=0,l;h<this.behaviors.length;h++)l=this.behaviors[h],l.attributeChanged&&l.attributeChanged.call(this,
e,f,g);this.attributeChanged&&this.attributeChanged(e,f,g)},_attributeChangedImpl:function(e){this._setAttributeToProperty(this,e)},extend:function(e,f){if(e&&f)for(var g=Object.getOwnPropertyNames(f),h=0,l;h<g.length&&(l=g[h]);h++)this.copyOwnProperty(l,f,e);return e||f},mixin:function(e,f){for(var g in f)e[g]=f[g];return e},copyOwnProperty:function(e,f,g){(f=Object.getOwnPropertyDescriptor(f,e))&&Object.defineProperty(g,e,f)},_logger:function(e,f){1===f.length&&Array.isArray(f[0])&&(f=f[0]);switch(e){case "log":case "warn":case "error":console[e].apply(console,
f)}},_log:function(){this._logger("log",Array.prototype.slice.call(arguments,0))},_warn:function(){this._logger("warn",Array.prototype.slice.call(arguments,0))},_error:function(){this._logger("error",Array.prototype.slice.call(arguments,0))},_logf:function(){return this._logPrefix.concat(this.is).concat(Array.prototype.slice.call(arguments,0))}};Polymer.Base._logPrefix=window.chrome&&!/edge/i.test(navigator.userAgent)||/firefox/i.test(navigator.userAgent)?["%c[%s::%s]:","font-weight: bold; background-color:#EEEE00;"]:
["[%s::%s]:"];Polymer.Base.chainObject=function(e,f){e&&f&&e!==f&&(Object.__proto__||(e=Polymer.Base.extend(Object.create(f),e)),e.__proto__=f);return e};Polymer.Base=Polymer.Base.chainObject(Polymer.Base,HTMLElement.prototype);Polymer.BaseDescriptors={};if(a.disableUpgradeEnabled){var b=function(e,f){this.__data__[e]=f};var c=Polymer.Base.attributeChangedCallback;Polymer.Base.attributeChangedCallback=function(e,f,g){this.__hasInitialized||"disable-upgrade"!==e||(this.__hasInitialized=!0,this._propertySetter=
Polymer.Bind._modelApi._propertySetter,this._configValue=Polymer.Base._configValue,this.__initialize());c.call(this,e,f,g)}}Polymer.instanceof=window.CustomElements?CustomElements.instanceof:function(e,f){return e instanceof f};Polymer.isInstance=function(e){return!(!e||!e.__isPolymerInstance__)};Polymer.telemetry.instanceCount=0})();
(function(){function a(){return document.createElement("dom-module")}var b={},c={};a.prototype=Object.create(HTMLElement.prototype);Polymer.Base.mixin(a.prototype,{createdCallback:function(){this.register()},register:function(f){if(f=f||this.id||this.getAttribute("name")||this.getAttribute("is"))this.id=f,b[f]=this,c[f.toLowerCase()]=this},import:function(f,g){if(f){var h=b[f]||c[f.toLowerCase()];if(!h){if(e){h=document._currentScript||document.currentScript;h=(h&&h.ownerDocument||document).querySelectorAll("dom-module");
for(var l=h.length-1,n;0<=l&&(n=h[l])&&!n.__upgraded__;l--)CustomElements.upgrade(n)}h=b[f]||c[f.toLowerCase()]}h&&g&&(h=h.querySelector(g));return h}}});Object.defineProperty(a.prototype,"constructor",{value:a,configurable:!0,writable:!0});var e=window.CustomElements&&!CustomElements.useNative;document.registerElement("dom-module",a)})();
Polymer.Base._addFeature({_prepIs:function(){if(!this.is){var a=(document._currentScript||document.currentScript).parentNode;"dom-module"===a.localName&&(this.is=a.id||a.getAttribute("name")||a.getAttribute("is"))}this.is&&(this.is=this.is.toLowerCase())}});
Polymer.Base._addFeature({behaviors:[],_desugarBehaviors:function(){this.behaviors.length&&(this.behaviors=this._desugarSomeBehaviors(this.behaviors))},_desugarSomeBehaviors:function(a){var b=[];a=this._flattenBehaviorsList(a);for(var c=a.length-1;0<=c;c--){var e=a[c];-1===b.indexOf(e)&&(this._mixinBehavior(e),b.unshift(e))}return b},_flattenBehaviorsList:function(a){for(var b=[],c=0;c<a.length;c++){var e=a[c];e instanceof Array?b=b.concat(this._flattenBehaviorsList(e)):e?b.push(e):this._warn(this._logf("_flattenBehaviorsList",
"behavior is null, check for missing or 404 import"))}return b},_mixinBehavior:function(a){for(var b=Object.getOwnPropertyNames(a),c=a._noAccessors,e=0,f;e<b.length&&(f=b[e]);e++)Polymer.Base._behaviorProperties[f]||this.hasOwnProperty(f)||(c?this[f]=a[f]:this.copyOwnProperty(f,a,this))},_prepBehaviors:function(){this._prepFlattenedBehaviors(this.behaviors)},_prepFlattenedBehaviors:function(a){for(var b=0,c=a.length;b<c;b++)this._prepBehavior(a[b]);this._prepBehavior(this)},_marshalBehaviors:function(){for(var a=
0;a<this.behaviors.length;a++)this._marshalBehavior(this.behaviors[a]);this._marshalBehavior(this)}});Polymer.Base._behaviorProperties={hostAttributes:!0,beforeRegister:!0,registered:!0,properties:!0,observers:!0,listeners:!0,created:!0,attached:!0,detached:!0,attributeChanged:!0,ready:!0,_noAccessors:!0};
Polymer.Base._addFeature({_getExtendedPrototype:function(a){return this._getExtendedNativePrototype(a)},_nativePrototypes:{},_getExtendedNativePrototype:function(a){var b=this._nativePrototypes[a];if(!b){b=Object.create(this.getNativePrototype(a));for(var c=Object.getOwnPropertyNames(Polymer.Base),e=0,f;e<c.length&&(f=c[e]);e++)Polymer.BaseDescriptors[f]||(b[f]=Polymer.Base[f]);Object.defineProperties(b,Polymer.BaseDescriptors);this._nativePrototypes[a]=b}return b},getNativePrototype:function(a){return Object.getPrototypeOf(document.createElement(a))}});
Polymer.Base._addFeature({_prepConstructor:function(){function a(){return this._factory(arguments)}this._factoryArgs=this.extends?[this.extends,this.is]:[this.is];this.hasOwnProperty("extends")&&(a.extends=this.extends);Object.defineProperty(this,"constructor",{value:a,writable:!0,configurable:!0});a.prototype=this},_factory:function(a){var b=document.createElement.apply(document,this._factoryArgs);this.factoryImpl&&this.factoryImpl.apply(b,a);return b}});Polymer.nob=Object.create(null);
Polymer.Base._addFeature({getPropertyInfo:function(a){var b=this._getPropertyInfo(a,this.properties);if(!b)for(var c=0;c<this.behaviors.length;c++)if(b=this._getPropertyInfo(a,this.behaviors[c].properties))return b;return b||Polymer.nob},_getPropertyInfo:function(a,b){var c=b&&b[a];"function"===typeof c&&(c=b[a]={type:c});c&&(c.defined=!0);return c},_prepPropertyInfo:function(){this._propertyInfo={};for(var a=0;a<this.behaviors.length;a++)this._addPropertyInfo(this._propertyInfo,this.behaviors[a].properties);
this._addPropertyInfo(this._propertyInfo,this.properties);this._addPropertyInfo(this._propertyInfo,this._propertyEffects)},_addPropertyInfo:function(a,b){if(b){var c;for(c in b){var e=a[c];var f=b[c];if("_"!==c[0]||f.readOnly)a[c]?(e.type||(e.type=f.type),e.readOnly||(e.readOnly=f.readOnly)):a[c]={type:"function"===typeof f?f:f.type,readOnly:f.readOnly,attribute:Polymer.CaseMap.camelToDashCase(c)}}}}});var Ck={configurable:!0,writable:!0,enumerable:!0,value:{}};
Polymer.BaseDescriptors.properties=Ck;Object.defineProperty(Polymer.Base,"properties",Ck);Polymer.CaseMap={_caseMap:{},_rx:{dashToCamel:/-[a-z]/g,camelToDash:/([A-Z])/g},dashToCamelCase:function(a){return this._caseMap[a]||(this._caseMap[a]=0>a.indexOf("-")?a:a.replace(this._rx.dashToCamel,function(b){return b[1].toUpperCase()}))},camelToDashCase:function(a){return this._caseMap[a]||(this._caseMap[a]=a.replace(this._rx.camelToDash,"-$1").toLowerCase())}};
Polymer.Base._addFeature({_addHostAttributes:function(a){this._aggregatedAttributes||(this._aggregatedAttributes={});a&&this.mixin(this._aggregatedAttributes,a)},_marshalHostAttributes:function(){this._aggregatedAttributes&&this._applyAttributes(this,this._aggregatedAttributes)},_applyAttributes:function(a,b){for(var c in b)this.hasAttribute(c)||"class"===c||this.serializeValueToAttribute(b[c],c,this)},_marshalAttributes:function(){this._takeAttributesToModel(this)},_takeAttributesToModel:function(a){if(this.hasAttributes())for(var b in this._propertyInfo){var c=
this._propertyInfo[b];this.hasAttribute(c.attribute)&&this._setAttributeToProperty(a,c.attribute,b,c)}},_setAttributeToProperty:function(a,b,c,e){this._serializing||(c=c||Polymer.CaseMap.dashToCamelCase(b),(e=e||this._propertyInfo&&this._propertyInfo[c])&&!e.readOnly&&(b=this.getAttribute(b),a[c]=this.deserialize(b,e.type)))},_serializing:!1,reflectPropertyToAttribute:function(a,b,c){this._serializing=!0;c=void 0===c?this[a]:c;this.serializeValueToAttribute(c,b||Polymer.CaseMap.camelToDashCase(a));
this._serializing=!1},serializeValueToAttribute:function(a,b,c){a=this.serialize(a);c=c||this;void 0===a?c.removeAttribute(b):c.setAttribute(b,a)},deserialize:function(a,b){switch(b){case Number:a=Number(a);break;case Boolean:a=null!=a;break;case Object:try{a=JSON.parse(a)}catch(c){}break;case Array:try{a=JSON.parse(a)}catch(c){a=null,console.warn("Polymer::Attributes: couldn`t decode Array as JSON")}break;case Date:a=new Date(a)}return a},serialize:function(a){switch(typeof a){case "boolean":return a?
"":void 0;case "object":if(a instanceof Date)return a.toString();if(a)try{return JSON.stringify(a)}catch(b){return""}default:return null!=a?a:void 0}}});Polymer.version="1.11.3";Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs();this._prepBehaviors();this._prepConstructor();this._prepPropertyInfo()},_prepBehavior:function(a){this._addHostAttributes(a.hostAttributes)},_marshalBehavior:function(){},_initFeatures:function(){this._marshalHostAttributes();this._marshalBehaviors()}});
</script>











<script>//~~WEBPATH~~/polymer/polymer-mini.html.js
(function(){function a(m,q){return m.replace(g,function(r,v,u,w){return v+"'"+b(u.replace(/["']/g,""),q)+"'"+w})}function b(m,q){if(m&&l.test(m))return m;q=q.body.__urlResolver||(q.body.__urlResolver=q.createElement("a"));q.href=m;return q.href||m}function c(m){return m.substring(0,m.lastIndexOf("/")+1)}var e,f,g=/(url\()([^)]*)(\))/g,h={"*":["href","src","style","url"],form:["action"]},l=/(^\/)|(^#)|(^[\w-\d]*:)/,n=/\{\{|\[\[/;Polymer.ResolveUrl={resolveCss:a,resolveAttrs:function(m,q){for(var r in h)for(var v=
h[r],u=0,w=v.length,z,A,E;u<w&&(z=v[u]);u++)("*"===r||m.localName===r)&&(E=(A=m.attributes[z])&&A.value)&&0>E.search(n)&&(A.value="style"===z?a(E,q):b(E,q))},resolveUrl:function(m,q){e||(e=document.implementation.createHTMLDocument("temp"),f=e.createElement("base"),e.head.appendChild(f));f.href=q;return b(m,e)},pathFromUrl:c};Polymer.rootPath=Polymer.Settings.rootPath||c(document.baseURI||window.location.href)})();
Polymer.Base._addFeature({_prepTemplate:function(){var a;void 0===this._template&&(this._template=(a=Polymer.DomModule.import(this.is))&&a.querySelector("template"));if(a){var b=a.getAttribute("assetpath")||"";a=Polymer.ResolveUrl.resolveUrl(b,a.ownerDocument.baseURI);this._importPath=Polymer.ResolveUrl.pathFromUrl(a)}else this._importPath="";this._template&&this._template.hasAttribute("is")&&this._warn(this._logf("_prepTemplate","top-level Polymer template must not be a type-extension, found",this._template,
"Move inside simple \x3ctemplate\x3e."));this._template&&!this._template.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(this._template)},_stampTemplate:function(){this._template&&(this.root=this.instanceTemplate(this._template))},instanceTemplate:function(a){return document.importNode(a._content||a.content,!0)}});
(function(){var a=Polymer.Base.attachedCallback,b=Polymer.Base.detachedCallback;Polymer.Base._addFeature({_hostStack:[],ready:function(){},_registerHost:function(c){(this.dataHost=c=c||Polymer.Base._hostStack[Polymer.Base._hostStack.length-1])&&c._clients&&c._clients.push(this);this._clients=null;this._clientsReadied=!1},_beginHosting:function(){Polymer.Base._hostStack.push(this);this._clients||(this._clients=[])},_endHosting:function(){Polymer.Base._hostStack.pop()},_tryReady:function(){this._readied=
!1;this._canReady()&&this._ready()},_canReady:function(){return!this.dataHost||this.dataHost._clientsReadied},_ready:function(){this._beforeClientsReady();this._template&&(this._setupRoot(),this._readyClients());this._clientsReadied=!0;this._clients=null;this._afterClientsReady();this._readySelf()},_readyClients:function(){this._beginDistribute();var c=this._clients;if(c)for(var e=0,f=c.length,g;e<f&&(g=c[e]);e++)g._ready();this._finishDistribute()},_readySelf:function(){for(var c=0,e;c<this.behaviors.length;c++)e=
this.behaviors[c],e.ready&&e.ready.call(this);this.ready&&this.ready();this._readied=!0;this._attachedPending&&(this._attachedPending=!1,this.attachedCallback())},_beforeClientsReady:function(){},_afterClientsReady:function(){},_beforeAttached:function(){},attachedCallback:function(){this._readied?(this._beforeAttached(),a.call(this)):this._attachedPending=!0},detachedCallback:function(){this._readied?b.call(this):this._attachedPending=!1}})})();
Polymer.ArraySplice=function(){function a(c,e,f){return{index:c,removed:e,addedCount:f}}function b(){}b.prototype={calcEditDistances:function(c,e,f,g,h,l){l=l-h+1;f=f-e+1;for(var n=Array(l),m=0;m<l;m++)n[m]=Array(f),n[m][0]=m;for(var q=0;q<f;q++)n[0][q]=q;for(m=1;m<l;m++)for(q=1;q<f;q++)if(this.equals(c[e+q-1],g[h+m-1]))n[m][q]=n[m-1][q-1];else{var r=n[m-1][q]+1,v=n[m][q-1]+1;n[m][q]=r<v?r:v}return n},spliceOperationsFromEditDistances:function(c){for(var e=c.length-1,f=c[0].length-1,g=c[e][f],h=[];0<
e||0<f;)if(0==e)h.push(2),f--;else if(0==f)h.push(3),e--;else{var l=c[e-1][f-1],n=c[e-1][f],m=c[e][f-1];var q=n<m?n<l?n:l:m<l?m:l;q==l?(l==g?h.push(0):(h.push(1),g=l),e--,f--):q==n?(h.push(3),e--,g=n):(h.push(2),f--,g=m)}h.reverse();return h},calcSplices:function(c,e,f,g,h,l){var n=0,m=0,q=Math.min(f-e,l-h);0==e&&0==h&&(n=this.sharedPrefix(c,g,q));f==c.length&&l==g.length&&(m=this.sharedSuffix(c,g,q-n));e+=n;h+=n;f-=m;l-=m;if(0==f-e&&0==l-h)return[];if(e==f){for(c=a(e,[],0);h<l;)c.removed.push(g[h++]);
return[c]}if(h==l)return[a(e,[],f-e)];l=this.spliceOperationsFromEditDistances(this.calcEditDistances(c,e,f,g,h,l));c=void 0;f=[];for(n=0;n<l.length;n++)switch(l[n]){case 0:c&&(f.push(c),c=void 0);e++;h++;break;case 1:c||(c=a(e,[],0));c.addedCount++;e++;c.removed.push(g[h]);h++;break;case 2:c||(c=a(e,[],0));c.addedCount++;e++;break;case 3:c||(c=a(e,[],0)),c.removed.push(g[h]),h++}c&&f.push(c);return f},sharedPrefix:function(c,e,f){for(var g=0;g<f;g++)if(!this.equals(c[g],e[g]))return g;return f},
sharedSuffix:function(c,e,f){for(var g=c.length,h=e.length,l=0;l<f&&this.equals(c[--g],e[--h]);)l++;return l},calculateSplices:function(c,e){return this.calcSplices(c,0,c.length,e,0,e.length)},equals:function(c,e){return c===e}};return new b}();
Polymer.domInnerHTML=function(){function a(l){switch(l){case "\x26":return"\x26amp;";case "\x3c":return"\x26lt;";case "\x3e":return"\x26gt;";case '"':return"\x26quot;";case "\u00a0":return"\x26nbsp;"}}function b(l){for(var n={},m=0;m<l.length;m++)n[l[m]]=!0;return n}function c(l,n){l instanceof HTMLTemplateElement&&(l=l.content);for(var m="",q=Polymer.dom(l).childNodes,r=0,v=q.length,u;r<v&&(u=q[r]);r++){a:{var w=u;var z=l;var A=n;switch(w.nodeType){case Node.ELEMENT_NODE:for(var E=w.localName,C=
"\x3c"+E,D=w.attributes,J=0;z=D[J];J++)C+=" "+z.name+'\x3d"'+z.value.replace(e,a)+'"';C+="\x3e";w=g[E]?C:C+c(w,A)+"\x3c/"+E+"\x3e";break a;case Node.TEXT_NODE:w=w.data;w=z&&h[z.localName]?w:w.replace(f,a);break a;case Node.COMMENT_NODE:w="\x3c!--"+w.data+"--\x3e";break a;default:throw console.error(w),Error("not implemented");}}m+=w}return m}var e=/[&\u00A0"]/g,f=/[&\u00A0<>]/g,g=b("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),h=b("style script xmp iframe noembed noframes plaintext noscript".split(" "));
return{getInnerHTML:c}}();
(function(){var a=Element.prototype.insertBefore,b=Element.prototype.appendChild,c=Element.prototype.removeChild;Polymer.TreeApi={arrayCopyChildNodes:function(e){var f=[],g=0;for(e=e.firstChild;e;e=e.nextSibling)f[g++]=e;return f},arrayCopyChildren:function(e){var f=[],g=0;for(e=e.firstElementChild;e;e=e.nextElementSibling)f[g++]=e;return f},arrayCopy:function(e){for(var f=e.length,g=Array(f),h=0;h<f;h++)g[h]=e[h];return g}};Polymer.TreeApi.Logical={hasParentNode:function(e){return!(!e.__dom||!e.__dom.parentNode)},
hasChildNodes:function(e){return!(!e.__dom||void 0===e.__dom.childNodes)},getChildNodes:function(e){return this.hasChildNodes(e)?this._getChildNodes(e):e.childNodes},_getChildNodes:function(e){if(!e.__dom.childNodes){e.__dom.childNodes=[];for(var f=e.__dom.firstChild;f;f=f.__dom.nextSibling)e.__dom.childNodes.push(f)}return e.__dom.childNodes},getParentNode:function(e){return e.__dom&&void 0!==e.__dom.parentNode?e.__dom.parentNode:e.parentNode},getFirstChild:function(e){return e.__dom&&void 0!==e.__dom.firstChild?
e.__dom.firstChild:e.firstChild},getLastChild:function(e){return e.__dom&&void 0!==e.__dom.lastChild?e.__dom.lastChild:e.lastChild},getNextSibling:function(e){return e.__dom&&void 0!==e.__dom.nextSibling?e.__dom.nextSibling:e.nextSibling},getPreviousSibling:function(e){return e.__dom&&void 0!==e.__dom.previousSibling?e.__dom.previousSibling:e.previousSibling},getFirstElementChild:function(e){return e.__dom&&void 0!==e.__dom.firstChild?this._getFirstElementChild(e):e.firstElementChild},_getFirstElementChild:function(e){for(e=
e.__dom.firstChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__dom.nextSibling;return e},getLastElementChild:function(e){return e.__dom&&void 0!==e.__dom.lastChild?this._getLastElementChild(e):e.lastElementChild},_getLastElementChild:function(e){for(e=e.__dom.lastChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__dom.previousSibling;return e},getNextElementSibling:function(e){return e.__dom&&void 0!==e.__dom.nextSibling?this._getNextElementSibling(e):e.nextElementSibling},_getNextElementSibling:function(e){for(e=
e.__dom.nextSibling;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__dom.nextSibling;return e},getPreviousElementSibling:function(e){return e.__dom&&void 0!==e.__dom.previousSibling?this._getPreviousElementSibling(e):e.previousElementSibling},_getPreviousElementSibling:function(e){for(e=e.__dom.previousSibling;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__dom.previousSibling;return e},saveChildNodes:function(e){if(!this.hasChildNodes(e)){e.__dom=e.__dom||{};e.__dom.firstChild=e.firstChild;e.__dom.lastChild=e.lastChild;
e.__dom.childNodes=[];for(var f=e.firstChild;f;f=f.nextSibling)f.__dom=f.__dom||{},f.__dom.parentNode=e,e.__dom.childNodes.push(f),f.__dom.nextSibling=f.nextSibling,f.__dom.previousSibling=f.previousSibling}},recordInsertBefore:function(e,f,g){f.__dom.childNodes=null;if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(e=e.firstChild;e;e=e.nextSibling)this._linkNode(e,f,g);else this._linkNode(e,f,g)},_linkNode:function(e,f,g){e.__dom=e.__dom||{};f.__dom=f.__dom||{};g&&(g.__dom=g.__dom||{});e.__dom.previousSibling=
g?g.__dom.previousSibling:f.__dom.lastChild;e.__dom.previousSibling&&(e.__dom.previousSibling.__dom.nextSibling=e);e.__dom.nextSibling=g||null;e.__dom.nextSibling&&(e.__dom.nextSibling.__dom.previousSibling=e);e.__dom.parentNode=f;g?g===f.__dom.firstChild&&(f.__dom.firstChild=e):(f.__dom.lastChild=e,f.__dom.firstChild||(f.__dom.firstChild=e));f.__dom.childNodes=null},recordRemoveChild:function(e,f){e.__dom=e.__dom||{};f.__dom=f.__dom||{};e===f.__dom.firstChild&&(f.__dom.firstChild=e.__dom.nextSibling);
e===f.__dom.lastChild&&(f.__dom.lastChild=e.__dom.previousSibling);var g=e.__dom.previousSibling,h=e.__dom.nextSibling;g&&(g.__dom.nextSibling=h);h&&(h.__dom.previousSibling=g);e.__dom.parentNode=e.__dom.previousSibling=e.__dom.nextSibling=void 0;f.__dom.childNodes=null}};Polymer.TreeApi.Composed={getChildNodes:function(e){return Polymer.TreeApi.arrayCopyChildNodes(e)},getParentNode:function(e){return e.parentNode},clearChildNodes:function(e){e.textContent=""},insertBefore:function(e,f,g){return a.call(e,
f,g||null)},appendChild:function(e,f){return b.call(e,f)},removeChild:function(e,f){return c.call(e,f)}}})();
Polymer.DomApi=function(){function a(h){this.node=e?a.wrap(h):h}var b=Polymer.Settings,c=Polymer.TreeApi,e=b.hasShadow&&!b.nativeShadow;a.wrap=window.wrap?window.wrap:function(h){return h};a.prototype={flush:function(){Polymer.dom.flush()},deepContains:function(h){if(this.node.contains(h))return!0;var l=h;for(h=h.ownerDocument;l&&l!==h&&l!==this.node;)l=Polymer.dom(l).parentNode||l.host;return l===this.node},queryDistributedElements:function(h){for(var l=this.getEffectiveChildNodes(),n=[],m=0,q=l.length,
r;m<q&&(r=l[m]);m++)r.nodeType===Node.ELEMENT_NODE&&a.matchesSelector.call(r,h)&&n.push(r);return n},getEffectiveChildNodes:function(){for(var h=[],l=this.childNodes,n=0,m=l.length,q;n<m&&(q=l[n]);n++)if(q.localName===f)for(var r=g(q).getDistributedNodes(),v=0;v<r.length;v++)h.push(r[v]);else h.push(q);return h},observeNodes:function(h){if(h)return this.observer||(this.observer=this.node.localName===f?new a.DistributedNodesObserver(this):new a.EffectiveNodesObserver(this)),this.observer.addListener(h)},
unobserveNodes:function(h){this.observer&&this.observer.removeListener(h)},notifyObserver:function(){this.observer&&this.observer.notify()},_query:function(h,l,n){l=l||this.node;var m=[];this._queryElements(c.Logical.getChildNodes(l),h,n,m);return m},_queryElements:function(h,l,n,m){for(var q=0,r=h.length,v;q<r&&(v=h[q]);q++)if(v.nodeType===Node.ELEMENT_NODE&&this._queryElement(v,l,n,m))return!0},_queryElement:function(h,l,n,m){var q=l(h);q&&m.push(h);if(n&&n(q))return q;this._queryElements(c.Logical.getChildNodes(h),
l,n,m)}};var f=a.CONTENT="content",g=a.factory=function(h){h=h||document;h.__domApi||(h.__domApi=new a.ctor(h));return h.__domApi};a.hasApi=function(h){return!!h.__domApi};a.ctor=a;Polymer.dom=function(h,l){return h instanceof Event?Polymer.EventApi.factory(h):a.factory(h,l)};b=Element.prototype;a.matchesSelector=b.matches||b.matchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector||b.webkitMatchesSelector;return a}();
(function(){var a=Polymer.DomApi,b=a.factory,c=Polymer.TreeApi,e=Polymer.domInnerHTML.getInnerHTML,f=a.CONTENT;if(!Polymer.Settings.useShadow){var g=Element.prototype.cloneNode,h=Document.prototype.importNode;Polymer.Base.mixin(a.prototype,{_lazyDistribute:function(l){l.shadyRoot&&l.shadyRoot._distributionClean&&(l.shadyRoot._distributionClean=!1,Polymer.dom.addDebouncer(l.debounce("_distribute",l._distributeContent)))},appendChild:function(l){return this.insertBefore(l)},insertBefore:function(l,
n){if(n&&c.Logical.getParentNode(n)!==this.node)throw Error("The ref_node to be inserted before is not a child of this node");if(l.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var m=c.Logical.getParentNode(l);m?(a.hasApi(m)&&b(m).notifyObserver(),this._removeNode(l)):this._removeOwnerShadyRoot(l)}this._addNode(l,n)||(n&&(n=n.localName===f?this._firstComposedNode(n):n),m=this.node._isShadyRoot?this.node.host:this.node,n?c.Composed.insertBefore(m,l,n):c.Composed.appendChild(m,l));this.notifyObserver();return l},
_addNode:function(l,n){var m=this.getOwnerRoot();if(m){var q=this._maybeAddInsertionPoint(l,this.node);m._invalidInsertionPoints||(m._invalidInsertionPoints=q);this._addNodeToHost(m.host,l)}c.Logical.hasChildNodes(this.node)&&c.Logical.recordInsertBefore(l,this.node,n);if(n=this._maybeDistribute(l)||this.node.shadyRoot)if(l.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(;l.firstChild;)c.Composed.removeChild(l,l.firstChild);else(m=c.Composed.getParentNode(l))&&c.Composed.removeChild(m,l);return n},removeChild:function(l){if(c.Logical.getParentNode(l)!==
this.node)throw Error("The node to be removed is not a child of this node: "+l);if(!this._removeNode(l)){var n=this.node._isShadyRoot?this.node.host:this.node;n===c.Composed.getParentNode(l)&&c.Composed.removeChild(n,l)}this.notifyObserver();return l},_removeNode:function(l){var n=c.Logical.hasParentNode(l)&&c.Logical.getParentNode(l),m=this._ownerShadyRootForNode(l);if(n){var q=b(l)._maybeDistributeParent();c.Logical.recordRemoveChild(l,n);m&&this._removeDistributedChildren(m,l)&&(m._invalidInsertionPoints=
!0,this._lazyDistribute(m.host))}this._removeOwnerShadyRoot(l);m&&this._removeNodeFromHost(m.host,l);return q},replaceChild:function(l,n){this.insertBefore(l,n);this.removeChild(n);return l},_hasCachedOwnerRoot:function(l){return void 0!==l._ownerShadyRoot},getOwnerRoot:function(){return this._ownerShadyRootForNode(this.node)},_ownerShadyRootForNode:function(l){if(l){var n=l._ownerShadyRoot;void 0===n&&(n=l._isShadyRoot?l:(n=c.Logical.getParentNode(l))?n._isShadyRoot?n:this._ownerShadyRootForNode(n):
null,n||document.documentElement.contains(l))&&(l._ownerShadyRoot=n);return n}},_maybeDistribute:function(l){var n=l.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!l.__noContent&&b(l).querySelector(f),m=n&&c.Logical.getParentNode(n).nodeType!==Node.DOCUMENT_FRAGMENT_NODE;(l=n||l.localName===f)&&(n=this.getOwnerRoot())&&this._lazyDistribute(n.host);(n=this._nodeNeedsDistribution(this.node))&&this._lazyDistribute(this.node);return n||l&&!m},_maybeAddInsertionPoint:function(l,n){if(l.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||
l.__noContent)l.localName===f&&(c.Logical.saveChildNodes(n),c.Logical.saveChildNodes(l),u=!0);else for(var m=b(l).querySelectorAll(f),q=0,r,v;q<m.length&&(r=m[q]);q++){v=c.Logical.getParentNode(r);v===l&&(v=n);v=this._maybeAddInsertionPoint(r,v);var u=u||v}return u},_updateInsertionPoints:function(l){l=l.shadyRoot._insertionPoints=b(l.shadyRoot).querySelectorAll(f);for(var n=0,m;n<l.length;n++)m=l[n],c.Logical.saveChildNodes(m),c.Logical.saveChildNodes(c.Logical.getParentNode(m))},_nodeNeedsDistribution:function(l){return l&&
l.shadyRoot&&a.hasInsertionPoint(l.shadyRoot)},_addNodeToHost:function(l,n){l._elementAdd&&l._elementAdd(n)},_removeNodeFromHost:function(l,n){l._elementRemove&&l._elementRemove(n)},_removeDistributedChildren:function(l,n){l=l._insertionPoints;for(var m=0;m<l.length;m++){var q=l[m];if(this._contains(n,q)){q=b(q).getDistributedNodes();for(var r=0;r<q.length;r++){var v=!0;var u=q[r],w=c.Composed.getParentNode(u);w&&c.Composed.removeChild(w,u)}}}return v},_contains:function(l,n){for(;n;){if(n==l)return!0;
n=c.Logical.getParentNode(n)}},_removeOwnerShadyRoot:function(l){if(this._hasCachedOwnerRoot(l))for(var n=c.Logical.getChildNodes(l),m=0,q=n.length,r;m<q&&(r=n[m]);m++)this._removeOwnerShadyRoot(r);l._ownerShadyRoot=void 0},_firstComposedNode:function(l){for(var n=b(l).getDistributedNodes(),m=0,q=n.length,r,v;m<q&&(r=n[m]);m++)if(v=b(r).getDestinationInsertionPoints(),v[v.length-1]===l)return r},querySelector:function(l){return this._query(function(n){return a.matchesSelector.call(n,l)},this.node,
function(n){return!!n})[0]||null},querySelectorAll:function(l){return this._query(function(n){return a.matchesSelector.call(n,l)},this.node)},getDestinationInsertionPoints:function(){return this.node._destinationInsertionPoints||[]},getDistributedNodes:function(){return this.node._distributedNodes||[]},_clear:function(){for(;this.childNodes.length;)this.removeChild(this.childNodes[0])},setAttribute:function(l,n){this.node.setAttribute(l,n);this._maybeDistributeParent()},removeAttribute:function(l){this.node.removeAttribute(l);
this._maybeDistributeParent()},_maybeDistributeParent:function(){if(this._nodeNeedsDistribution(this.parentNode))return this._lazyDistribute(this.parentNode),!0},cloneNode:function(l){var n=g.call(this.node,!1);if(l){l=this.childNodes;for(var m=b(n),q=0,r;q<l.length;q++)r=b(l[q]).cloneNode(!0),m.appendChild(r)}return n},importNode:function(l,n){var m=this.node instanceof Document?this.node:this.node.ownerDocument,q=h.call(m,l,!1);if(n){l=c.Logical.getChildNodes(l);n=b(q);for(var r=0,v;r<l.length;r++)v=
b(m).importNode(l[r],!0),n.appendChild(v)}return q},_getComposedInnerHTML:function(){return e(this.node,!0)}});Object.defineProperties(a.prototype,{activeElement:{get:function(){var l=document.activeElement;if(!l)return null;var n=!!this.node._isShadyRoot;if(!(this.node===document||n&&this.node.host!==l&&this.node.host.contains(l)))return null;for(n=b(l).getOwnerRoot();n&&n!==this.node;)l=n.host,n=b(l).getOwnerRoot();return this.node===document?n?null:l:n===this.node?l:null},configurable:!0},childNodes:{get:function(){var l=
c.Logical.getChildNodes(this.node);return Array.isArray(l)?l:c.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return c.Logical.hasChildNodes(this.node)?Array.prototype.filter.call(this.childNodes,function(l){return l.nodeType===Node.ELEMENT_NODE}):c.arrayCopyChildren(this.node)},configurable:!0},parentNode:{get:function(){return c.Logical.getParentNode(this.node)},configurable:!0},firstChild:{get:function(){return c.Logical.getFirstChild(this.node)},configurable:!0},lastChild:{get:function(){return c.Logical.getLastChild(this.node)},
configurable:!0},nextSibling:{get:function(){return c.Logical.getNextSibling(this.node)},configurable:!0},previousSibling:{get:function(){return c.Logical.getPreviousSibling(this.node)},configurable:!0},firstElementChild:{get:function(){return c.Logical.getFirstElementChild(this.node)},configurable:!0},lastElementChild:{get:function(){return c.Logical.getLastElementChild(this.node)},configurable:!0},nextElementSibling:{get:function(){return c.Logical.getNextElementSibling(this.node)},configurable:!0},
previousElementSibling:{get:function(){return c.Logical.getPreviousElementSibling(this.node)},configurable:!0},textContent:{get:function(){var l=this.node.nodeType;if(l===Node.TEXT_NODE||l===Node.COMMENT_NODE)return this.node.textContent;l=[];for(var n=0,m=this.childNodes,q;q=m[n];n++)q.nodeType!==Node.COMMENT_NODE&&l.push(q.textContent);return l.join("")},set:function(l){var n=this.node.nodeType;n===Node.TEXT_NODE||n===Node.COMMENT_NODE?this.node.textContent=l:(this._clear(),l&&this.appendChild(document.createTextNode(l)))},
configurable:!0},innerHTML:{get:function(){var l=this.node.nodeType;return l===Node.TEXT_NODE||l===Node.COMMENT_NODE?null:e(this.node)},set:function(l){var n=this.node.nodeType;if(n!==Node.TEXT_NODE||n!==Node.COMMENT_NODE)for(this._clear(),n=document.createElement("div"),n.innerHTML=l,l=c.arrayCopyChildNodes(n),n=0;n<l.length;n++)this.appendChild(l[n])},configurable:!0}});a.hasInsertionPoint=function(l){return!(!l||!l._insertionPoints.length)}}})();
(function(){var a=Polymer.TreeApi,b=Polymer.DomApi;if(Polymer.Settings.useShadow){Polymer.Base.mixin(b.prototype,{querySelectorAll:function(f){return a.arrayCopy(this.node.querySelectorAll(f))},getOwnerRoot:function(){for(var f=this.node;f;){if(f.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&f.host)return f;f=f.parentNode}},importNode:function(f,g){return(this.node instanceof Document?this.node:this.node.ownerDocument).importNode(f,g)},getDestinationInsertionPoints:function(){var f=this.node.getDestinationInsertionPoints&&
this.node.getDestinationInsertionPoints();return f?a.arrayCopy(f):[]},getDistributedNodes:function(){var f=this.node.getDistributedNodes&&this.node.getDistributedNodes();return f?a.arrayCopy(f):[]}});Object.defineProperties(b.prototype,{activeElement:{get:function(){var f=b.wrap(this.node),g=f.activeElement;return f.contains(g)?g:null},configurable:!0},childNodes:{get:function(){return a.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return a.arrayCopyChildren(this.node)},
configurable:!0},textContent:{get:function(){return this.node.textContent},set:function(f){return this.node.textContent=f},configurable:!0},innerHTML:{get:function(){return this.node.innerHTML},set:function(f){return this.node.innerHTML=f},configurable:!0}});var c=function(f){b.prototype[f]=function(){return this.node[f].apply(this.node,arguments)}};(function(f){for(var g=0;g<f.length;g++)c(f[g])})("cloneNode appendChild insertBefore removeChild replaceChild setAttribute removeAttribute querySelector".split(" "));
var e=function(f){Object.defineProperty(b.prototype,f,{get:function(){return this.node[f]},configurable:!0})};(function(f){for(var g=0;g<f.length;g++)e(f[g])})("parentNode firstChild lastChild nextSibling previousSibling firstElementChild lastElementChild nextElementSibling previousElementSibling".split(" "))}})();
Polymer.Base.mixin(Polymer.dom,{_flushGuard:0,_FLUSH_MAX:100,_needsTakeRecords:!Polymer.Settings.useNativeCustomElements,_debouncers:[],_staticFlushList:[],_finishDebouncer:null,flush:function(){this._flushGuard=0;for(this._prepareFlush();this._debouncers.length&&this._flushGuard<this._FLUSH_MAX;){for(;this._debouncers.length;)this._debouncers.shift().complete();this._finishDebouncer&&this._finishDebouncer.complete();this._prepareFlush();this._flushGuard++}this._flushGuard>=this._FLUSH_MAX&&console.warn("Polymer.dom.flush aborted. Flush may not be complete.")},
_prepareFlush:function(){this._needsTakeRecords&&CustomElements.takeRecords();for(var a=0;a<this._staticFlushList.length;a++)this._staticFlushList[a]()},addStaticFlush:function(a){this._staticFlushList.push(a)},removeStaticFlush:function(a){a=this._staticFlushList.indexOf(a);0<=a&&this._staticFlushList.splice(a,1)},addDebouncer:function(a){this._debouncers.push(a);this._finishDebouncer=Polymer.Debounce(this._finishDebouncer,this._finishFlush)},_finishFlush:function(){Polymer.dom._debouncers=[]}});
Polymer.EventApi=function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.Event=function(c){this.event=c};a.Event.prototype=b.useShadow?{get rootTarget(){return this.event.path[0]},get localTarget(){return this.event.target},get path(){var c=this.event.path;Array.isArray(c)||(c=Array.prototype.slice.call(c));return c}}:{get rootTarget(){return this.event.target},get localTarget(){var c=this.event.currentTarget;c=c&&Polymer.dom(c).getOwnerRoot();for(var e=this.path,f=0;f<e.length;f++)if(Polymer.dom(e[f]).getOwnerRoot()===
c)return e[f]},get path(){if(!this.event._path){for(var c=[],e=this.rootTarget;e;){c.push(e);var f=Polymer.dom(e).getDestinationInsertionPoints();if(f.length){for(e=0;e<f.length-1;e++)c.push(f[e]);e=f[f.length-1]}else e=Polymer.dom(e).parentNode||e.host}c.push(window);this.event._path=c}return this.event._path}};return{factory:function(c){c.__eventApi||(c.__eventApi=new a.Event(c));return c.__eventApi}}}();
(function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings.useShadow;Object.defineProperty(a.prototype,"classList",{get:function(){this._classList||(this._classList=new a.ClassList(this));return this._classList},configurable:!0});a.ClassList=function(c){this.domApi=c;this.node=c.node};a.ClassList.prototype={add:function(){this.node.classList.add.apply(this.node.classList,arguments);this._distributeParent()},remove:function(){this.node.classList.remove.apply(this.node.classList,arguments);this._distributeParent()},
toggle:function(){this.node.classList.toggle.apply(this.node.classList,arguments);this._distributeParent()},_distributeParent:function(){b||this.domApi._maybeDistributeParent()},contains:function(){return this.node.classList.contains.apply(this.node.classList,arguments)}}})();
(function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.EffectiveNodesObserver=function(f){this.domApi=f;this.node=this.domApi.node;this._listeners=[]};a.EffectiveNodesObserver.prototype={addListener:function(f){this._isSetup||(this._setup(),this._isSetup=!0);f={fn:f,_nodes:[]};this._listeners.push(f);this._scheduleNotify();return f},removeListener:function(f){var g=this._listeners.indexOf(f);0<=g&&(this._listeners.splice(g,1),f._nodes=[]);this._hasListeners()||(this._cleanup(),this._isSetup=!1)},
_setup:function(){this._observeContentElements(this.domApi.childNodes)},_cleanup:function(){this._unobserveContentElements(this.domApi.childNodes)},_hasListeners:function(){return!!this._listeners.length},_scheduleNotify:function(){this._debouncer&&this._debouncer.stop();this._debouncer=Polymer.Debounce(this._debouncer,this._notify);this._debouncer.context=this;Polymer.dom.addDebouncer(this._debouncer)},notify:function(){this._hasListeners()&&this._scheduleNotify()},_notify:function(){this._beforeCallListeners();
this._callListeners()},_beforeCallListeners:function(){this._updateContentElements()},_updateContentElements:function(){this._observeContentElements(this.domApi.childNodes)},_observeContentElements:function(f){for(var g=0,h;g<f.length&&(h=f[g]);g++)this._isContent(h)&&(h.__observeNodesMap=h.__observeNodesMap||new WeakMap,h.__observeNodesMap.has(this)||h.__observeNodesMap.set(this,this._observeContent(h)))},_observeContent:function(f){var g=this;f=Polymer.dom(f).observeNodes(function(){g._scheduleNotify()});
f._avoidChangeCalculation=!0;return f},_unobserveContentElements:function(f){for(var g=0,h,l;g<f.length&&(h=f[g]);g++)this._isContent(h)&&(l=h.__observeNodesMap.get(this))&&(Polymer.dom(h).unobserveNodes(l),h.__observeNodesMap.delete(this))},_isContent:function(f){return"content"===f.localName},_callListeners:function(){for(var f=this._listeners,g=this._getEffectiveNodes(),h=0,l;h<f.length&&(l=f[h]);h++){var n=this._generateListenerInfo(l,g);(n||l._alwaysNotify)&&this._callListener(l,n)}},_getEffectiveNodes:function(){return this.domApi.getEffectiveChildNodes()},
_generateListenerInfo:function(f,g){if(f._avoidChangeCalculation)return!0;for(var h={target:this.node,addedNodes:[],removedNodes:[]},l=Polymer.ArraySplice.calculateSplices(g,f._nodes),n=0,m;n<l.length&&(m=l[n]);n++)for(var q=0,r;q<m.removed.length&&(r=m.removed[q]);q++)h.removedNodes.push(r);n=0;for(m;n<l.length&&(m=l[n]);n++)for(q=m.index;q<m.index+m.addedCount;q++)h.addedNodes.push(g[q]);f._nodes=g;if(h.addedNodes.length||h.removedNodes.length)return h},_callListener:function(f,g){return f.fn.call(this.node,
g)},enableShadowAttributeTracking:function(){}};if(b.useShadow){var c=a.EffectiveNodesObserver.prototype._setup,e=a.EffectiveNodesObserver.prototype._cleanup;Polymer.Base.mixin(a.EffectiveNodesObserver.prototype,{_setup:function(){if(!this._observer){var f=this;this._mutationHandler=function(g){g&&g.length&&f._scheduleNotify()};this._observer=new MutationObserver(this._mutationHandler);this._boundFlush=function(){f._flush()};Polymer.dom.addStaticFlush(this._boundFlush);this._observer.observe(this.node,
{childList:!0})}c.call(this)},_cleanup:function(){this._observer.disconnect();this._mutationHandler=this._observer=null;Polymer.dom.removeStaticFlush(this._boundFlush);e.call(this)},_flush:function(){this._observer&&this._mutationHandler(this._observer.takeRecords())},enableShadowAttributeTracking:function(){if(this._observer){this._makeContentListenersAlwaysNotify();this._observer.disconnect();this._observer.observe(this.node,{childList:!0,attributes:!0,subtree:!0});var f=this.domApi.getOwnerRoot();
(f=f&&f.host)&&Polymer.dom(f).observer&&Polymer.dom(f).observer.enableShadowAttributeTracking()}},_makeContentListenersAlwaysNotify:function(){for(var f=0,g;f<this._listeners.length;f++)g=this._listeners[f],g._alwaysNotify=g._isContentListener}})}})();
(function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.DistributedNodesObserver=function(c){a.EffectiveNodesObserver.call(this,c)};a.DistributedNodesObserver.prototype=Object.create(a.EffectiveNodesObserver.prototype);Polymer.Base.mixin(a.DistributedNodesObserver.prototype,{_setup:function(){},_cleanup:function(){},_beforeCallListeners:function(){},_getEffectiveNodes:function(){return this.domApi.getDistributedNodes()}});b.useShadow&&Polymer.Base.mixin(a.DistributedNodesObserver.prototype,{_setup:function(){if(!this._observer){var c=
this.domApi.getOwnerRoot();if(c=c&&c.host){var e=this;this._observer=Polymer.dom(c).observeNodes(function(){e._scheduleNotify()});this._observer._isContentListener=!0;this._hasAttrSelect()&&Polymer.dom(c).observer.enableShadowAttributeTracking()}}},_hasAttrSelect:function(){var c=this.node.getAttribute("select");return c&&c.match(/[[.]+/)},_cleanup:function(){var c=this.domApi.getOwnerRoot();(c=c&&c.host)&&Polymer.dom(c).unobserveNodes(this._observer);this._observer=null}})})();
(function(){function a(h,l){l._distributedNodes.push(h);var n=h._destinationInsertionPoints;n?n.push(l):h._destinationInsertionPoints=[l]}function b(h){for(var l=e.Logical.getChildNodes(h),n=0,m;n<l.length;n++)if(m=l[n],m.localName&&"content"===m.localName)return h.domHost}var c=Polymer.DomApi,e=Polymer.TreeApi;Polymer.Base._addFeature({_prepShady:function(){this._useContent=this._useContent||!!this._template},_setupShady:function(){this.shadyRoot=null;this.__domApi||(this.__domApi=null);this.__dom||
(this.__dom=null);this._ownerShadyRoot||(this._ownerShadyRoot=void 0)},_poolContent:function(){this._useContent&&e.Logical.saveChildNodes(this)},_setupRoot:function(){if(this._useContent&&(this._createLocalRoot(),!this.dataHost)){var h=e.Logical.getChildNodes(this);if(g&&h)for(var l=0;l<h.length;l++)CustomElements.upgrade(h[l])}},_createLocalRoot:function(){this.shadyRoot=this.root;this.shadyRoot._distributionClean=!1;this.shadyRoot._hasDistributed=!1;this.shadyRoot._isShadyRoot=!0;this.shadyRoot._dirtyRoots=
[];var h=this.shadyRoot._insertionPoints=!this._notes||this._notes._hasContent?this.shadyRoot.querySelectorAll("content"):[];e.Logical.saveChildNodes(this.shadyRoot);for(var l=0,n;l<h.length;l++)n=h[l],e.Logical.saveChildNodes(n),e.Logical.saveChildNodes(n.parentNode);this.shadyRoot.host=this},distributeContent:function(h){if(this.shadyRoot){this.shadyRoot._invalidInsertionPoints=this.shadyRoot._invalidInsertionPoints||h;for(h=this;h&&b(h);)h=h.domHost;Polymer.dom(this)._lazyDistribute(h)}},_distributeContent:function(){this._useContent&&
!this.shadyRoot._distributionClean&&(this.shadyRoot._invalidInsertionPoints&&(Polymer.dom(this)._updateInsertionPoints(this),this.shadyRoot._invalidInsertionPoints=!1),this._beginDistribute(),this._distributeDirtyRoots(),this._finishDistribute())},_beginDistribute:function(){this._useContent&&c.hasInsertionPoint(this.shadyRoot)&&(this._resetDistribution(),this._distributePool(this.shadyRoot,this._collectPool()))},_distributeDirtyRoots:function(){for(var h=this.shadyRoot._dirtyRoots,l=0,n=h.length,
m;l<n&&(m=h[l]);l++)m._distributeContent();this.shadyRoot._dirtyRoots=[]},_finishDistribute:function(){if(this._useContent){this.shadyRoot._distributionClean=!0;if(c.hasInsertionPoint(this.shadyRoot)){this._composeTree();for(var h=this.shadyRoot,l=0,n;l<h._insertionPoints.length;l++)n=h._insertionPoints[l],c.hasApi(n)&&Polymer.dom(n).notifyObserver()}else this.shadyRoot._hasDistributed?(h=this._composeNode(this),this._updateChildNodes(this,h)):(e.Composed.clearChildNodes(this),this.appendChild(this.shadyRoot));
this.shadyRoot._hasDistributed||c.hasApi(this)&&Polymer.dom(this).notifyObserver();this.shadyRoot._hasDistributed=!0}},elementMatches:function(h,l){return c.matchesSelector.call(l||this,h)},_resetDistribution:function(){for(var h=e.Logical.getChildNodes(this),l=0;l<h.length;l++){var n=h[l];n._destinationInsertionPoints&&(n._destinationInsertionPoints=void 0);if("content"==n.localName){var m=n._distributedNodes;if(m)for(var q=0;q<m.length;q++){var r=m[q]._destinationInsertionPoints;r&&r.splice(r.indexOf(n)+
1,r.length)}}}h=this.shadyRoot._insertionPoints;for(l=0;l<h.length;l++)h[l]._distributedNodes=[]},_collectPool:function(){for(var h=[],l=e.Logical.getChildNodes(this),n=0;n<l.length;n++){var m=l[n];"content"==m.localName?h.push.apply(h,m._distributedNodes):h.push(m)}return h},_distributePool:function(h,l){h=h._insertionPoints;for(var n=0,m=h.length,q;n<m&&(q=h[n]);n++){this._distributeInsertionPoint(q,l);var r=e.Logical.getParentNode(q);r&&r.shadyRoot&&c.hasInsertionPoint(r.shadyRoot)&&r.shadyRoot._distributionClean&&
(r.shadyRoot._distributionClean=!1,this.shadyRoot._dirtyRoots.push(r))}},_distributeInsertionPoint:function(h,l){for(var n=!1,m=0,q=l.length,r;m<q;m++)(r=l[m])&&this._matchesContentSelect(r,h)&&(a(r,h),l[m]=void 0,n=!0);if(!n)for(l=e.Logical.getChildNodes(h),n=0;n<l.length;n++)a(l[n],h)},_composeTree:function(){this._updateChildNodes(this,this._composeNode(this));for(var h=this.shadyRoot._insertionPoints,l=0,n=h.length,m,q;l<n&&(m=h[l]);l++)q=e.Logical.getParentNode(m),q._useContent||q===this||q===
this.shadyRoot||this._updateChildNodes(q,this._composeNode(q))},_composeNode:function(h){var l=[];h=e.Logical.getChildNodes(h.shadyRoot||h);for(var n=0;n<h.length;n++){var m=h[n];if("content"==m.localName)for(var q=m._distributedNodes,r=0;r<q.length;r++){var v=q[r],u=v._destinationInsertionPoints;u&&u[u.length-1]===m&&l.push(v)}else l.push(m)}return l},_updateChildNodes:function(h,l){for(var n=e.Composed.getChildNodes(h),m=Polymer.ArraySplice.calculateSplices(l,n),q=0,r=0,v;q<m.length&&(v=m[q]);q++){for(var u=
0,w;u<v.removed.length&&(w=v.removed[u]);u++)e.Composed.getParentNode(w)===h&&e.Composed.removeChild(h,w),n.splice(v.index+r,1);r-=v.addedCount}for(q=0;q<m.length&&(v=m[q]);q++)for(r=n[v.index],u=v.index,w;u<v.index+v.addedCount;u++)w=l[u],e.Composed.insertBefore(h,w,r),n.splice(u,0,w)},_matchesContentSelect:function(h,l){l=l.getAttribute("select");return l?(l=l.trim())?h instanceof Element&&/^(:not\()?[*.#[a-zA-Z_|]/.test(l)?this.elementMatches(l,h):!1:!0:!0},_elementAdd:function(){},_elementRemove:function(){}});
var f={get:function(){var h=Polymer.dom(this).getOwnerRoot();return h&&h.host},configurable:!0};Object.defineProperty(Polymer.Base,"domHost",f);Polymer.BaseDescriptors.domHost=f;var g=window.CustomElements&&!CustomElements.useNative})();
Polymer.Settings.useShadow&&Polymer.Base._addFeature({_poolContent:function(){},_beginDistribute:function(){},distributeContent:function(){},_distributeContent:function(){},_finishDistribute:function(){},_createLocalRoot:function(){this.createShadowRoot();this.shadowRoot.appendChild(this.root);this.root=this.shadowRoot}});
Polymer.Async={_currVal:0,_lastVal:0,_callbacks:[],_twiddleContent:0,_twiddle:document.createTextNode(""),run:function(a,b){if(0<b)return~setTimeout(a,b);this._twiddle.textContent=this._twiddleContent++;this._callbacks.push(a);return this._currVal++},cancel:function(a){if(0>a)clearTimeout(~a);else{var b=a-this._lastVal;if(0<=b){if(!this._callbacks[b])throw"invalid async handle: "+a;this._callbacks[b]=null}}},_atEndOfMicrotask:function(){for(var a=this._callbacks.length,b=0;b<a;b++){var c=this._callbacks[b];
if(c)try{c()}catch(e){throw b++,this._callbacks.splice(0,b),this._lastVal+=b,this._twiddle.textContent=this._twiddleContent++,e;}}this._callbacks.splice(0,a);this._lastVal+=a}};(new window.MutationObserver(function(){Polymer.Async._atEndOfMicrotask()})).observe(Polymer.Async._twiddle,{characterData:!0});
Polymer.Debounce=function(){function a(c){this.context=c;var e=this;this.boundComplete=function(){e.complete()}}var b=Polymer.Async;a.prototype={go:function(c,e){this.finish=function(){b.cancel(f)};var f=b.run(this.boundComplete,e);this.callback=c},stop:function(){this.finish&&(this.finish(),this.callback=this.finish=null)},complete:function(){if(this.finish){var c=this.callback;this.stop();c.call(this.context)}}};return function(c,e,f){c?c.stop():c=new a(this);c.go(e,f);return c}}();
Polymer.Base._addFeature({_setupDebouncers:function(){this._debouncers={}},debounce:function(a,b,c){return this._debouncers[a]=Polymer.Debounce.call(this,this._debouncers[a],b,c)},isDebouncerActive:function(a){a=this._debouncers[a];return!(!a||!a.finish)},flushDebouncer:function(a){(a=this._debouncers[a])&&a.complete()},cancelDebouncer:function(a){(a=this._debouncers[a])&&a.stop()}});Polymer.DomModule=document.createElement("dom-module");
Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs();this._prepBehaviors();this._prepConstructor();this._prepTemplate();this._prepShady();this._prepPropertyInfo()},_prepBehavior:function(a){this._addHostAttributes(a.hostAttributes)},_initFeatures:function(){this._registerHost();this._template&&(this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting());this._marshalHostAttributes();this._setupDebouncers();this._marshalBehaviors();this._tryReady()},_marshalBehavior:function(){}});
</script>






<script>//~~WEBPATH~~/polymer/polymer.html.js
(function(){Polymer.nar=[];var a=Polymer.Settings.disableUpgradeEnabled;Polymer.Annotations={parseAnnotations:function(b,c){var e=[];this._parseNodeAnnotations(b._content||b.content,e,c||b.hasAttribute("strip-whitespace"));return e},_parseNodeAnnotations:function(b,c,e){return b.nodeType===Node.TEXT_NODE?this._parseTextNodeAnnotation(b,c):this._parseElementAnnotations(b,c,e)},_bindingRegex:/(\[\[|{{)\s*(?:(!)\s*)?((?:[a-zA-Z_$][\w.:$\-*]*)\s*(?:\(\s*(?:(?:(?:(?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*"))\s*)(?:,\s*(?:(?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*"))\s*))*)?)\)\s*)?)(?:]]|}})/g,
_parseBindings:function(b){for(var c=this._bindingRegex,e=[],f=0,g;null!==(g=c.exec(b));){g.index>f&&e.push({literal:b.slice(f,g.index)});f=g[1][0];var h=!!g[2];g=g[3].trim();var l;if("{"==f&&0<(l=g.indexOf("::"))){var n=g.substring(l+2);g=g.substring(0,l);var m=!0}e.push({compoundIndex:e.length,value:g,mode:f,negate:h,event:n,customEvent:m});f=c.lastIndex}f&&f<b.length&&(b=b.substring(f))&&e.push({literal:b});if(e.length)return e},_literalFromParts:function(b){for(var c="",e=0;e<b.length;e++)c+=
b[e].literal||"";return c},_parseTextNodeAnnotation:function(b,c){var e=this._parseBindings(b.textContent);if(e)return b.textContent=this._literalFromParts(e)||" ",b={bindings:[{kind:"text",name:"textContent",parts:e,isCompound:1!==e.length}]},c.push(b),b},_parseElementAnnotations:function(b,c,e){var f={bindings:[],events:[]};"content"===b.localName&&(c._hasContent=!0);this._parseChildNodesAnnotations(b,f,c,e);b.attributes&&(this._parseNodeAttributeAnnotations(b,f,c),this.prepElement&&this.prepElement(b));
(f.bindings.length||f.events.length||f.id)&&c.push(f);return f},_parseChildNodesAnnotations:function(b,c,e,f){if(b.firstChild)for(var g=b.firstChild,h=0;g;){var l=g.nextSibling;"template"!==g.localName||g.hasAttribute("preserve-content")||this._parseTemplate(g,h,e,c,f);"slot"==g.localName&&(g=this._replaceSlotWithContent(g));if(g.nodeType===Node.TEXT_NODE){for(var n=l;n&&n.nodeType===Node.TEXT_NODE;)g.textContent+=n.textContent,l=n.nextSibling,b.removeChild(n),n=l;f&&!g.textContent.trim()&&(b.removeChild(g),
h--)}g.parentNode&&(g=this._parseNodeAnnotations(g,e,f))&&(g.parent=c,g.index=h);g=l;h++}},_replaceSlotWithContent:function(b){for(var c=b.ownerDocument.createElement("content");b.firstChild;)c.appendChild(b.firstChild);for(var e=b.attributes,f=0;f<e.length;f++){var g=e[f];c.setAttribute(g.name,g.value)}(e=b.getAttribute("name"))&&c.setAttribute("select","[slot\x3d'"+e+"']");b.parentNode.replaceChild(c,b);return c},_parseTemplate:function(b,c,e,f,g){var h=document.createDocumentFragment();h._notes=
this.parseAnnotations(b,g);h.appendChild(b.content);e.push({bindings:Polymer.nar,events:Polymer.nar,templateContent:h,parent:f,index:c})},_parseNodeAttributeAnnotations:function(b,c){for(var e=Array.prototype.slice.call(b.attributes),f=e.length-1,g;g=e[f];f--){var h=g.name;g=g.value;var l;"on-"===h.slice(0,3)?(b.removeAttribute(h),c.events.push({name:h.slice(3),value:g})):(l=this._parseNodeAttributeAnnotation(b,h,g))?c.bindings.push(l):"id"===h&&(c.id=g)}},_parseNodeAttributeAnnotation:function(b,
c,e){if(e=this._parseBindings(e)){var f=c,g="property";"$"==c[c.length-1]&&(c=c.slice(0,-1),g="attribute");var h=this._literalFromParts(e);h&&"attribute"==g&&b.setAttribute(c,h);"input"===b.localName&&"value"===f&&b.setAttribute(f,"");a&&"disable-upgrade$"===f&&b.setAttribute(c,"");b.removeAttribute(f);b=Polymer.CaseMap.dashToCamelCase(c);"property"===g&&(c=b);return{kind:g,name:c,propertyName:b,parts:e,literal:h,isCompound:1!==e.length}}},findAnnotatedNode:function(b,c){var e=c.parent&&Polymer.Annotations.findAnnotatedNode(b,
c.parent);if(e)for(b=e.firstChild,e=0;b;b=b.nextSibling){if(c.index===e++)return b}else return b}}})();Polymer.Path={root:function(a){var b=a.indexOf(".");return-1===b?a:a.slice(0,b)},isDeep:function(a){return-1!==a.indexOf(".")},isAncestor:function(a,b){return 0===a.indexOf(b+".")},isDescendant:function(a,b){return 0===b.indexOf(a+".")},translate:function(a,b,c){return b+c.slice(a.length)},matches:function(a,b,c){return a===c||this.isAncestor(a,c)||!!b&&this.isDescendant(a,c)}};
Polymer.Base._addFeature({_prepAnnotations:function(){if(this._template){var a=this;Polymer.Annotations.prepElement=function(b){a._prepElement(b)};this._template._content&&this._template._content._notes?this._notes=this._template._content._notes:(this._notes=Polymer.Annotations.parseAnnotations(this._template),this._processAnnotations(this._notes));Polymer.Annotations.prepElement=null}else this._notes=[]},_processAnnotations:function(a){for(var b=0;b<a.length;b++){for(var c=a[b],e=0;e<c.bindings.length;e++)for(var f=
c.bindings[e],g=0;g<f.parts.length;g++){var h=f.parts[g];if(!h.literal){var l=this._parseMethod(h.value);l?h.signature=l:h.model=Polymer.Path.root(h.value)}}if(c.templateContent){this._processAnnotations(c.templateContent._notes);f=c.templateContent._parentProps=this._discoverTemplateParentProps(c.templateContent._notes);e=[];for(var n in f)f="_parent_"+n,e.push({index:c.index,kind:"property",name:f,propertyName:f,parts:[{mode:"{",model:n,value:n}]});c.bindings=c.bindings.concat(e)}}},_discoverTemplateParentProps:function(a){for(var b=
{},c=0,e;c<a.length&&(e=a[c]);c++){for(var f=0,g=e.bindings,h;f<g.length&&(h=g[f]);f++)for(var l=0,n=h.parts,m;l<n.length&&(m=n[l]);l++)if(m.signature){for(var q=m.signature.args,r=0;r<q.length;r++){var v=q[r].model;v&&(b[v]=!0)}m.signature.dynamicFn&&(b[m.signature.method]=!0)}else m.model&&(b[m.model]=!0);e.templateContent&&Polymer.Base.mixin(b,e.templateContent._parentProps)}return b},_prepElement:function(a){Polymer.ResolveUrl.resolveAttrs(a,this._template.ownerDocument)},_findAnnotatedNode:Polymer.Annotations.findAnnotatedNode,
_marshalAnnotationReferences:function(){this._template&&(this._marshalIdNodes(),this._marshalAnnotatedNodes(),this._marshalAnnotatedListeners())},_configureAnnotationReferences:function(){for(var a=this._notes,b=this._nodes,c=0;c<a.length;c++){var e=a[c],f=b[c];this._configureTemplateContent(e,f);this._configureCompoundBindings(e,f)}},_configureTemplateContent:function(a,b){a.templateContent&&(b._content=a.templateContent)},_configureCompoundBindings:function(a,b){a=a.bindings;for(var c=0;c<a.length;c++){var e=
a[c];if(e.isCompound){for(var f=b.__compoundStorage__||(b.__compoundStorage__={}),g=e.parts,h=Array(g.length),l=0;l<g.length;l++)h[l]=g[l].literal;g=e.name;f[g]=h;e.literal&&"property"==e.kind&&(b._configValue?b._configValue(g,e.literal):b[g]=e.literal)}}},_marshalIdNodes:function(){this.$={};for(var a=0,b=this._notes.length,c;a<b&&(c=this._notes[a]);a++)c.id&&(this.$[c.id]=this._findAnnotatedNode(this.root,c))},_marshalAnnotatedNodes:function(){if(this._notes&&this._notes.length){for(var a=Array(this._notes.length),
b=0;b<this._notes.length;b++)a[b]=this._findAnnotatedNode(this.root,this._notes[b]);this._nodes=a}},_marshalAnnotatedListeners:function(){for(var a=0,b=this._notes.length,c;a<b&&(c=this._notes[a]);a++)if(c.events&&c.events.length)for(var e=this._findAnnotatedNode(this.root,c),f=0,g=c.events,h;f<g.length&&(h=g[f]);f++)this.listen(e,h.name,h.value)}});
Polymer.Base._addFeature({listeners:{},_listenListeners:function(a){var b;for(b in a){if(0>b.indexOf(".")){var c=this;var e=b}else e=b.split("."),c=this.$[e[0]],e=e[1];this.listen(c,e,a[b])}},listen:function(a,b,c){var e=this._recallEventHandler(this,b,a,c);e||(e=this._createEventHandler(a,b,c));e._listening||(this._listen(a,b,e),e._listening=!0)},_boundListenerKey:function(a,b){return a+":"+b},_recordEventHandler:function(a,b,c,e,f){var g=a.__boundListeners;g||(g=a.__boundListeners=new WeakMap);
a=g.get(c);a||(a={},Polymer.Settings.isIE&&c==window||g.set(c,a));a[this._boundListenerKey(b,e)]=f},_recallEventHandler:function(a,b,c,e){if(a=a.__boundListeners)if(c=a.get(c))return c[this._boundListenerKey(b,e)]},_createEventHandler:function(a,b,c){function e(g){if(f[c])f[c](g,g.detail);else f._warn(f._logf("_createEventHandler","listener method `"+c+"` not defined"))}var f=this;e._listening=!1;this._recordEventHandler(f,b,a,c,e);return e},unlisten:function(a,b,c){if(c=this._recallEventHandler(this,
b,a,c))this._unlisten(a,b,c),c._listening=!1},_listen:function(a,b,c){a.addEventListener(b,c)},_unlisten:function(a,b,c){a.removeEventListener(b,c)}});
(function(){function a(A){var E=A.sourceCapabilities;if(!E||E.firesTouchEvents)if(A.__polymerGesturesHandled={skip:!0},"click"===A.type){if(E=Polymer.dom(A).path)for(var C=0;C<E.length;C++)if(E[C]===u.mouse.target)return;A.preventDefault();A.stopPropagation()}}function b(A){if(!(-1<n.indexOf(A))&&"touchend"!==A&&l&&r&&Polymer.Settings.passiveTouchGestures)return{passive:!0}}function c(A){for(var E=v?["click"]:n,C=0,D;C<E.length;C++)D=E[C],A?document.addEventListener(D,a,!0):document.removeEventListener(D,
a,!0)}function e(A){var E=A.type;return-1<n.indexOf(E)?"mousemove"===E?(E=void 0===A.buttons?1:A.buttons,A instanceof window.MouseEvent&&!q&&(E=m[A.which]||0),!!(E&1)):0===(void 0===A.button?0:A.button):!1}function f(A,E,C){A.movefn=E;A.upfn=C;document.addEventListener("mousemove",E);document.addEventListener("mouseup",C)}function g(A){document.removeEventListener("mousemove",A.movefn);document.removeEventListener("mouseup",A.upfn);A.movefn=null;A.upfn=null}var h=Polymer.DomApi.wrap,l="string"===
typeof document.head.style.touchAction,n=["mousedown","mousemove","mouseup","click"],m=[0,1,4,2];try{var q=1===(new MouseEvent("test",{buttons:1})).buttons}catch(A){q=!1}var r=!1;(function(){try{var A=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,A);window.removeEventListener("test",null,A)}catch(E){}})();var v=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),u={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener("touchend",
function(A){u.mouse.mouseIgnoreJob||c(!0);u.mouse.target=Polymer.dom(A).rootTarget;u.mouse.mouseIgnoreJob=Polymer.Debounce(u.mouse.mouseIgnoreJob,function(){c();u.mouse.target=null;u.mouse.mouseIgnoreJob=null},2500)},r?{passive:!0}:!1);var w={gestures:{},recognizers:[],deepTargetFind:function(A,E){for(var C=document.elementFromPoint(A,E),D=C;D&&D.shadowRoot;)(D=D.shadowRoot.elementFromPoint(A,E))&&(C=D);return C},findOriginalTarget:function(A){return A.path?A.path[0]:A.target},handleNative:function(A){var E=
A.type,C=h(A.currentTarget).__polymerGestures;if(C&&(C=C[E])){if(!A.__polymerGesturesHandled&&(A.__polymerGesturesHandled={},"touch"===E.slice(0,5))){var D=A.changedTouches[0];"touchstart"===E&&1===A.touches.length&&(u.touch.id=D.identifier);if(u.touch.id!==D.identifier)return;l||("touchstart"===E||"touchmove"===E)&&w.handleTouchAction(A)}D=A.__polymerGesturesHandled;if(!D.skip){for(var J=w.recognizers,M=0,H;M<J.length;M++)H=J[M],C[H.name]&&!D[H.name]&&H.flow&&-1<H.flow.start.indexOf(A.type)&&H.reset&&
H.reset();M=0;for(H;M<J.length;M++)H=J[M],C[H.name]&&!D[H.name]&&(D[H.name]=!0,H[E](A))}}},handleTouchAction:function(A){var E=A.changedTouches[0],C=A.type;if("touchstart"===C)u.touch.x=E.clientX,u.touch.y=E.clientY,u.touch.scrollDecided=!1;else if("touchmove"===C&&!u.touch.scrollDecided){u.touch.scrollDecided=!0;C=Polymer.dom(A).path;for(var D="auto",J=0,M;J<C.length;J++)if(M=C[J],M.__polymerGesturesTouchAction){D=M.__polymerGesturesTouchAction;break}C=D;D=!1;J=Math.abs(u.touch.x-E.clientX);E=Math.abs(u.touch.y-
E.clientY);A.cancelable&&("none"===C?D=!0:"pan-x"===C?D=E>J:"pan-y"===C&&(D=J>E));D?A.preventDefault():w.prevent("track")}},add:function(A,E,C){A=h(A);var D=this.gestures[E],J=D.deps,M=D.name,H=A.__polymerGestures;H||(A.__polymerGestures=H={});for(var K=0,L,P;K<J.length;K++)L=J[K],v&&-1<n.indexOf(L)&&"click"!==L||((P=H[L])||(H[L]=P={_count:0}),0===P._count&&A.addEventListener(L,this.handleNative,b(L)),P[M]=(P[M]||0)+1,P._count=(P._count||0)+1);A.addEventListener(E,C);D.touchAction&&this.setTouchAction(A,
D.touchAction)},remove:function(A,E,C){A=h(A);var D=this.gestures[E],J=D.deps;D=D.name;var M=A.__polymerGestures;if(M)for(var H=0,K,L;H<J.length;H++)K=J[H],(L=M[K])&&L[D]&&(L[D]=(L[D]||1)-1,L._count=(L._count||1)-1,0===L._count&&A.removeEventListener(K,this.handleNative,b(K)));A.removeEventListener(E,C)},register:function(A){this.recognizers.push(A);for(var E=0;E<A.emits.length;E++)this.gestures[A.emits[E]]=A},findRecognizerByEvent:function(A){for(var E=0,C;E<this.recognizers.length;E++){C=this.recognizers[E];
for(var D=0,J;D<C.emits.length;D++)if(J=C.emits[D],J===A)return C}return null},setTouchAction:function(A,E){l&&(A.style.touchAction=E);A.__polymerGesturesTouchAction=E},fire:function(A,E,C){Polymer.Base.fire(E,C,{node:A,bubbles:!0,cancelable:!0}).defaultPrevented&&(A=C.preventer||C.sourceEvent)&&A.preventDefault&&A.preventDefault()},prevent:function(A){A=this.findRecognizerByEvent(A);A.info&&(A.info.prevent=!0)},resetMouseCanceller:function(){u.mouse.mouseIgnoreJob&&u.mouse.mouseIgnoreJob.complete()}};
w.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){g(this.info)},mousedown:function(A){if(e(A)){var E=w.findOriginalTarget(A),C=this;f(this.info,function(D){e(D)||(C.fire("up",E,D),g(C.info))},function(D){e(D)&&C.fire("up",E,D);g(C.info)});this.fire("down",E,A)}},touchstart:function(A){this.fire("down",w.findOriginalTarget(A),A.changedTouches[0],A)},
touchend:function(A){this.fire("up",w.findOriginalTarget(A),A.changedTouches[0],A)},fire:function(A,E,C,D){w.fire(E,A,{x:C.clientX,y:C.clientY,sourceEvent:C,preventer:D,prevent:function(J){return w.prevent(J)}})}});w.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(A){2<this.moves.length&&this.moves.shift();
this.moves.push(A)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start";this.info.started=!1;this.info.moves=[];this.info.x=0;this.info.y=0;this.info.prevent=!1;g(this.info)},hasMovedEnough:function(A,E){if(this.info.prevent)return!1;if(this.info.started)return!0;E=Math.abs(this.info.y-E);return 5<=Math.abs(this.info.x-A)||5<=E},mousedown:function(A){if(e(A)){var E=w.findOriginalTarget(A),C=this,D=function(J){var M=J.clientX,H=J.clientY;C.hasMovedEnough(M,H)&&(C.info.state=
C.info.started?"mouseup"===J.type?"end":"track":"start","start"===C.info.state&&w.prevent("tap"),C.info.addMove({x:M,y:H}),e(J)||(C.info.state="end",g(C.info)),C.fire(E,J),C.info.started=!0)};f(this.info,D,function(J){C.info.started&&D(J);g(C.info)});this.info.x=A.clientX;this.info.y=A.clientY}},touchstart:function(A){A=A.changedTouches[0];this.info.x=A.clientX;this.info.y=A.clientY},touchmove:function(A){var E=w.findOriginalTarget(A);A=A.changedTouches[0];var C=A.clientX,D=A.clientY;this.hasMovedEnough(C,
D)&&("start"===this.info.state&&w.prevent("tap"),this.info.addMove({x:C,y:D}),this.fire(E,A),this.info.state="track",this.info.started=!0)},touchend:function(A){var E=w.findOriginalTarget(A),C=A.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:C.clientX,y:C.clientY}),this.fire(E,C,A))},fire:function(A,E,C){var D=this.info.moves[this.info.moves.length-2],J=this.info.moves[this.info.moves.length-1],M=J.x-this.info.x,H=J.y-this.info.y,K=0;if(D){var L=J.x-D.x;K=J.y-D.y}return w.fire(A,
"track",{state:this.info.state,x:E.clientX,y:E.clientY,dx:M,dy:H,ddx:L,ddy:K,sourceEvent:E,preventer:C,hover:function(){return w.deepTargetFind(E.clientX,E.clientY)}})}});w.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN;this.info.y=NaN;this.info.prevent=!1},save:function(A){this.info.x=A.clientX;this.info.y=A.clientY},mousedown:function(A){e(A)&&
this.save(A)},click:function(A){e(A)&&this.forward(A)},touchstart:function(A){this.save(A.changedTouches[0],A)},touchend:function(A){this.forward(A.changedTouches[0],A)},forward:function(A,E){var C=Math.abs(A.clientX-this.info.x),D=Math.abs(A.clientY-this.info.y),J=w.findOriginalTarget(A);if(!(C=isNaN(C)||isNaN(D)||25>=C&&25>=D))if("click"===A.type)if(0===A.detail)C=!0;else{C=w.findOriginalTarget(A).getBoundingClientRect();D=A.pageX;var M=A.pageY;C=!(D>=C.left&&D<=C.right&&M>=C.top&&M<=C.bottom)}else C=
!1;C&&(this.info.prevent||w.fire(J,"tap",{x:A.clientX,y:A.clientY,sourceEvent:A,preventer:E}))}});var z={x:"pan-x",y:"pan-y",none:"none",all:"auto"};Polymer.Base._addFeature({_setupGestures:function(){this.__polymerGestures=null},_listen:function(A,E,C){w.gestures[E]?w.add(A,E,C):A.addEventListener(E,C)},_unlisten:function(A,E,C){w.gestures[E]?w.remove(A,E,C):A.removeEventListener(E,C)},setScrollDirection:function(A,E){w.setTouchAction(E||this,z[A]||"auto")}});Polymer.Gestures=w})();
(function(){Polymer.Base._addFeature({$$:function(b){return Polymer.dom(this.root).querySelector(b)},toggleClass:function(b,c,e){e=e||this;1==arguments.length&&(c=!e.classList.contains(b));c?Polymer.dom(e).classList.add(b):Polymer.dom(e).classList.remove(b)},toggleAttribute:function(b,c,e){e=e||this;1==arguments.length&&(c=!e.hasAttribute(b));c?Polymer.dom(e).setAttribute(b,""):Polymer.dom(e).removeAttribute(b)},classFollows:function(b,c,e){e&&Polymer.dom(e).classList.remove(b);c&&Polymer.dom(c).classList.add(b)},
attributeFollows:function(b,c,e){e&&Polymer.dom(e).removeAttribute(b);c&&Polymer.dom(c).setAttribute(b,"")},getEffectiveChildNodes:function(){return Polymer.dom(this).getEffectiveChildNodes()},getEffectiveChildren:function(){return Polymer.dom(this).getEffectiveChildNodes().filter(function(b){return b.nodeType===Node.ELEMENT_NODE})},getEffectiveTextContent:function(){for(var b=this.getEffectiveChildNodes(),c=[],e=0,f;f=b[e];e++)f.nodeType!==Node.COMMENT_NODE&&c.push(Polymer.dom(f).textContent);return c.join("")},
queryEffectiveChildren:function(b){return(b=Polymer.dom(this).queryDistributedElements(b))&&b[0]},queryAllEffectiveChildren:function(b){return Polymer.dom(this).queryDistributedElements(b)},getContentChildNodes:function(b){return(b=Polymer.dom(this.root).querySelector(b||"content"))?Polymer.dom(b).getDistributedNodes():[]},getContentChildren:function(b){return this.getContentChildNodes(b).filter(function(c){return c.nodeType===Node.ELEMENT_NODE})},fire:function(b,c,e){e=e||Polymer.nob;var f=e.node||
this;c=null===c||void 0===c?{}:c;var g=e._useCache;e=this._getEvent(b,void 0===e.bubbles?!0:e.bubbles,!!e.cancelable,g);e.detail=c;g&&(this.__eventCache[b]=null);f.dispatchEvent(e);g&&(this.__eventCache[b]=e);return e},__eventCache:{},_getEvent:function(b,c,e,f){(f=f&&this.__eventCache[b])&&f.bubbles==c&&f.cancelable==e||(f=new Event(b,{bubbles:!!c,cancelable:e}));return f},async:function(b,c){var e=this;return Polymer.Async.run(function(){b.call(e)},c)},cancelAsync:function(b){Polymer.Async.cancel(b)},
arrayDelete:function(b,c){if(Array.isArray(b)){if(c=b.indexOf(c),0<=c)return b.splice(c,1)}else if(c=this._get(b).indexOf(c),0<=c)return this.splice(b,c,1)},transform:function(b,c){c=c||this;c.style.webkitTransform=b;c.style.transform=b},translate3d:function(b,c,e,f){this.transform("translate3d("+b+","+c+","+e+")",f||this)},importHref:function(b,c,e,f){function g(r){r.target.__firedError=!0;r.target.removeEventListener("load",h);r.target.removeEventListener("error",g);return e.call(q,r)}function h(r){r.target.__firedLoad=
!0;r.target.removeEventListener("load",h);r.target.removeEventListener("error",g);return c.call(q,r)}var l=document.createElement("link");l.rel="import";l.href=b;b=Polymer.Base.importHref.imported=Polymer.Base.importHref.imported||{};var n=b[l.href],m=n||l,q=this;c&&m.addEventListener("load",h);e&&m.addEventListener("error",g);n?(n.__firedLoad&&n.dispatchEvent(new Event("load")),n.__firedError&&n.dispatchEvent(new Event("error"))):(b[l.href]=l,f&&l.setAttribute("async",""),document.head.appendChild(l));
return m},create:function(b,c){b=document.createElement(b);if(c)for(var e in c)b[e]=c[e];return b},isLightDescendant:function(b){return this!==b&&this.contains(b)&&Polymer.dom(this).getOwnerRoot()===Polymer.dom(b).getOwnerRoot()},isLocalDescendant:function(b){return this.root===Polymer.dom(b).getOwnerRoot()}});if(!Polymer.Settings.useNativeCustomElements){var a=Polymer.Base.importHref;Polymer.Base.importHref=function(b,c,e,f){CustomElements.ready=!1;return a.call(this,b,function(g){CustomElements.upgradeDocumentTree(document);
CustomElements.ready=!0;if(c)return c.call(this,g)},e,f)}}})();
Polymer.Bind={prepareModel:function(a){Polymer.Base.mixin(a,this._modelApi)},_modelApi:{_notifyChange:function(a,b,c){c=void 0===c?this[a]:c;b=b||Polymer.CaseMap.camelToDashCase(a)+"-changed";this.fire(b,{value:c},{bubbles:!1,cancelable:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_propertySetter:function(a,b,c,e){var f=this.__data__[a];f===b||f!==f&&b!==b||(this.__data__[a]=b,"object"==typeof b&&this._clearPath(a),this._propertyChanged&&this._propertyChanged(a,b,f),c&&
this._effectEffects(a,b,c,f,e));return f},__setProperty:function(a,b,c,e){e=e||this;var f=e._propertyEffects&&e._propertyEffects[a];f?e._propertySetter(a,b,f,c):e[a]!==b&&(e[a]=b)},_effectEffects:function(a,b,c,e,f){b=0;for(var g=c.length,h;b<g&&(h=c[b]);b++)h.fn.call(this,a,this[a],h.effect,e,f)},_clearPath:function(a){for(var b in this.__data__)Polymer.Path.isDescendant(a,b)&&(this.__data__[b]=void 0)}},ensurePropertyEffects:function(a,b){a._propertyEffects||(a._propertyEffects={});var c=a._propertyEffects[b];
c||(c=a._propertyEffects[b]=[]);return c},addPropertyEffect:function(a,b,c,e){a=this.ensurePropertyEffects(a,b);c={kind:c,effect:e,fn:Polymer.Bind["_"+c+"Effect"]};a.push(c);return c},createBindings:function(a){var b=a._propertyEffects;if(b)for(var c in b){var e=b[c];e.sort(this._sortPropertyEffects);this._createAccessors(a,c,e)}},_sortPropertyEffects:function(){var a={compute:0,annotation:1,annotatedComputation:2,reflect:3,notify:4,observer:5,complexObserver:6,"function":7};return function(b,c){return a[b.kind]-
a[c.kind]}}(),_createAccessors:function(a,b,c){function e(h){this._propertySetter(b,h,c)}var f={get:function(){return this.__data__[b]}},g=a.getPropertyInfo&&a.getPropertyInfo(b);g&&g.readOnly?g.computed||(a["_set"+this.upper(b)]=e):f.set=e;Object.defineProperty(a,b,f)},upper:function(a){return a[0].toUpperCase()+a.substring(1)},_addAnnotatedListener:function(a,b,c,e,f,g){a._bindListeners||(a._bindListeners=[]);g=this._notedListenerFactory(c,e,Polymer.Path.isDeep(e),g);f=f||Polymer.CaseMap.camelToDashCase(c)+
"-changed";a._bindListeners.push({index:b,property:c,path:e,changedFn:g,event:f})},_isEventBogus:function(a,b){return a.path&&a.path[0]!==b},_notedListenerFactory:function(a,b,c,e){return function(f,g,h){h?(f=Polymer.Path.translate(a,b,h),this._notifyPath(f,g)):(g=f[a],e&&(g=!g),c?this.__data__[b]!=g&&this.set(b,g):this[b]=g)}},prepareInstance:function(a){a.__data__=Object.create(null)},setupBindListeners:function(a){for(var b=a._bindListeners,c=0,e=b.length,f;c<e&&(f=b[c]);c++)this._addNotifyListener(a._nodes[f.index],
a,f.event,f.changedFn)},_addNotifyListener:function(a,b,c,e){a.addEventListener(c,function(f){return b._notifyListener(e,f)})}};
Polymer.Base.mixin(Polymer.Bind,{_shouldAddListener:function(a){return a.name&&"attribute"!=a.kind&&"text"!=a.kind&&!a.isCompound&&"{"===a.parts[0].mode},_annotationEffect:function(a,b,c){a!=c.value&&(b=this._get(c.value),this.__data__[c.value]=b);this._applyEffectValue(c,b)},_reflectEffect:function(a,b,c){this.reflectPropertyToAttribute(a,c.attribute,b)},_notifyEffect:function(a,b,c,e,f){f||this._notifyChange(a,c.event,b)},_functionEffect:function(a,b,c,e,f){c.call(this,a,b,e,f)},_observerEffect:function(a,
b,c,e){(a=this[c.method])?a.call(this,b,e):this._warn(this._logf("_observerEffect","observer method `"+c.method+"` not defined"))},_complexObserverEffect:function(a,b,c){var e=this[c.method];e?(a=Polymer.Bind._marshalArgs(this.__data__,c,a,b))&&e.apply(this,a):c.dynamicFn||this._warn(this._logf("_complexObserverEffect","observer method `"+c.method+"` not defined"))},_computeEffect:function(a,b,c){var e=this[c.method];if(e){if(a=Polymer.Bind._marshalArgs(this.__data__,c,a,b))e=e.apply(this,a),this.__setProperty(c.name,
e)}else c.dynamicFn||this._warn(this._logf("_computeEffect","compute method `"+c.method+"` not defined"))},_annotatedComputationEffect:function(a,b,c){var e=this._rootDataHost||this,f=e[c.method];if(f){if(a=Polymer.Bind._marshalArgs(this.__data__,c,a,b))e=f.apply(e,a),this._applyEffectValue(c,e)}else c.dynamicFn||e._warn(e._logf("_annotatedComputationEffect","compute method `"+c.method+"` not defined"))},_marshalArgs:function(a,b,c,e){var f=[],g=b.args;b=1<g.length||b.dynamicFn;for(var h=0,l=g.length;h<
l;h++){var n=g[h],m=n.name;if(n.literal)var q=n.value;else c===m?q=e:(q=a[m],void 0===q&&n.structured&&(q=Polymer.Base._get(m,a)));if(b&&void 0===q)return;n.wildcard?(n=Polymer.Path.isAncestor(c,m),f[h]={path:n?c:m,value:n?e:q,base:q}):f[h]=q}return f}});
Polymer.Base._addFeature({_addPropertyEffect:function(a,b,c){a=Polymer.Bind.addPropertyEffect(this,a,b,c);a.pathFn=this["_"+a.kind+"PathEffect"]},_prepEffects:function(){Polymer.Bind.prepareModel(this);this._addAnnotationEffects(this._notes)},_prepBindings:function(){Polymer.Bind.createBindings(this)},_addPropertyEffects:function(a){if(a)for(var b in a){var c=a[b];c.observer&&this._addObserverEffect(b,c.observer);c.computed&&(c.readOnly=!0,this._addComputedEffect(b,c.computed));c.notify&&this._addPropertyEffect(b,
"notify",{event:Polymer.CaseMap.camelToDashCase(b)+"-changed"});if(c.reflectToAttribute){var e=Polymer.CaseMap.camelToDashCase(b);"-"===e[0]?this._warn(this._logf("_addPropertyEffects","Property "+b+" cannot be reflected to attribute "+e+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.')):this._addPropertyEffect(b,"reflect",{attribute:e})}c.readOnly&&Polymer.Bind.ensurePropertyEffects(this,b)}},_addComputedEffect:function(a,b){b=this._parseMethod(b);
for(var c=b.dynamicFn,e=0,f;e<b.args.length&&(f=b.args[e]);e++)this._addPropertyEffect(f.model,"compute",{method:b.method,args:b.args,trigger:f,name:a,dynamicFn:c});c&&this._addPropertyEffect(b.method,"compute",{method:b.method,args:b.args,trigger:null,name:a,dynamicFn:c})},_addObserverEffect:function(a,b){this._addPropertyEffect(a,"observer",{method:b,property:a})},_addComplexObserverEffects:function(a){if(a)for(var b=0,c;b<a.length&&(c=a[b]);b++)this._addComplexObserverEffect(c)},_addComplexObserverEffect:function(a){var b=
this._parseMethod(a);if(!b)throw Error("Malformed observer expression '"+a+"'");a=b.dynamicFn;for(var c=0,e;c<b.args.length&&(e=b.args[c]);c++)this._addPropertyEffect(e.model,"complexObserver",{method:b.method,args:b.args,trigger:e,dynamicFn:a});a&&this._addPropertyEffect(b.method,"complexObserver",{method:b.method,args:b.args,trigger:null,dynamicFn:a})},_addAnnotationEffects:function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++)for(var e=c.bindings,f=0,g;f<e.length&&(g=e[f]);f++)this._addAnnotationEffect(g,
b)},_addAnnotationEffect:function(a,b){Polymer.Bind._shouldAddListener(a)&&Polymer.Bind._addAnnotatedListener(this,b,a.name,a.parts[0].value,a.parts[0].event,a.parts[0].negate);for(var c=0;c<a.parts.length;c++){var e=a.parts[c];e.signature?this._addAnnotatedComputationEffect(a,e,b):e.literal||("attribute"===a.kind&&"-"===a.name[0]?this._warn(this._logf("_addAnnotationEffect","Cannot set attribute "+a.name+' because "-" is not a valid attribute starting character')):this._addPropertyEffect(e.model,
"annotation",{kind:a.kind,index:b,name:a.name,propertyName:a.propertyName,value:e.value,isCompound:a.isCompound,compoundIndex:e.compoundIndex,event:e.event,customEvent:e.customEvent,negate:e.negate}))}},_addAnnotatedComputationEffect:function(a,b,c){var e=b.signature;if(e.static)this.__addAnnotatedComputationEffect("__static__",c,a,b,null);else{for(var f=0,g;f<e.args.length&&(g=e.args[f]);f++)g.literal||this.__addAnnotatedComputationEffect(g.model,c,a,b,g);e.dynamicFn&&this.__addAnnotatedComputationEffect(e.method,
c,a,b,null)}},__addAnnotatedComputationEffect:function(a,b,c,e,f){this._addPropertyEffect(a,"annotatedComputation",{index:b,isCompound:c.isCompound,compoundIndex:e.compoundIndex,kind:c.kind,name:c.name,negate:e.negate,method:e.signature.method,args:e.signature.args,trigger:f,dynamicFn:e.signature.dynamicFn})},_parseMethod:function(a){var b=a.match(/([^\s]+?)\(([\s\S]*)\)/);if(b){a={method:b[1],static:!0};this.getPropertyInfo(a.method)!==Polymer.nob&&(a.static=!1,a.dynamicFn=!0);if(b[2].trim())return b=
b[2].replace(/\\,/g,"\x26comma;").split(","),this._parseArgs(b,a);a.args=Polymer.nar;return a}},_parseArgs:function(a,b){b.args=a.map(function(c){c=this._parseArg(c);c.literal||(b.static=!1);return c},this);return b},_parseArg:function(a){a=a.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1");var b={name:a},c=a[0];"-"===c&&(c=a[1]);"0"<=c&&"9">=c&&(c="#");switch(c){case "'":case '"':b.value=a.slice(1,-1);b.literal=!0;break;case "#":b.value=Number(a),b.literal=!0}b.literal||(b.model=Polymer.Path.root(a),
b.structured=Polymer.Path.isDeep(a),b.structured&&(b.wildcard=".*"==a.slice(-2),b.wildcard&&(b.name=a.slice(0,-2))));return b},_marshalInstanceEffects:function(){Polymer.Bind.prepareInstance(this);this._bindListeners&&Polymer.Bind.setupBindListeners(this)},_applyEffectValue:function(a,b){var c=this._nodes[a.index],e=a.name;b=this._computeFinalAnnotationValue(c,e,b,a);"attribute"==a.kind?this.serializeValueToAttribute(b,e,c):(a=c._propertyInfo&&c._propertyInfo[e])&&a.readOnly||this.__setProperty(e,
b,Polymer.Settings.suppressBindingNotifications,c)},_computeFinalAnnotationValue:function(a,b,c,e){e.negate&&(c=!c);if(e.isCompound){var f=a.__compoundStorage__[b];f[e.compoundIndex]=c;c=f.join("")}"attribute"!==e.kind&&("className"===b&&(c=this._scopeElementClass(a,c)),"textContent"===b||"input"==a.localName&&"value"==b)&&(c=void 0==c?"":c);return c},_executeStaticEffects:function(){this._propertyEffects&&this._propertyEffects.__static__&&this._effectEffects("__static__",null,this._propertyEffects.__static__)}});
(function(){var a=Polymer.Settings.usePolyfillProto,b=!!Object.getOwnPropertyDescriptor(document.documentElement,"properties");Polymer.Base._addFeature({_setupConfigure:function(c){this._config={};this._handlers=[];this._aboveConfig=null;if(c)for(var e in c)void 0!==c[e]&&(this._config[e]=c[e])},_marshalAttributes:function(){this._takeAttributesToModel(this._config)},_attributeChangedImpl:function(c){this._setAttributeToProperty(this._clientsReadied?this:this._config,c)},_configValue:function(c,e){var f=
this._propertyInfo[c];f&&f.readOnly||(this._config[c]=e)},_beforeClientsReady:function(){this._configure()},_configure:function(){this._configureAnnotationReferences();this._configureInstanceProperties();this._aboveConfig=this.mixin({},this._config);for(var c={},e=0;e<this.behaviors.length;e++)this._configureProperties(this.behaviors[e].properties,c);this._configureProperties(b?this.__proto__.properties:this.properties,c);this.mixin(c,this._aboveConfig);this._config=c;this._clients&&this._clients.length&&
this._distributeConfig(this._config)},_configureInstanceProperties:function(){for(var c in this._propertyEffects)!a&&this.hasOwnProperty(c)&&(this._configValue(c,this[c]),delete this[c])},_configureProperties:function(c,e){for(var f in c){var g=c[f];void 0!==g.value&&(g=g.value,"function"==typeof g&&(g=g.call(this,this._config)),e[f]=g)}},_distributeConfig:function(c){var e=this._propertyEffects;if(e)for(var f in c){var g=e[f];if(g)for(var h=0,l=g.length,n;h<l&&(n=g[h]);h++)if("annotation"===n.kind){var m=
this._nodes[n.effect.index],q=n.effect.propertyName,r="attribute"==n.effect.kind,v=m._propertyEffects&&m._propertyEffects[q];!m._configValue||!v&&r||(v=f===n.effect.value?c[f]:this._get(n.effect.value,c),v=this._computeFinalAnnotationValue(m,q,v,n.effect),r&&(v=m.deserialize(this.serialize(v),m._propertyInfo[q].type)),m._configValue(q,v))}}},_afterClientsReady:function(){this.importPath=this._importPath;this.rootPath=Polymer.rootPath;this._executeStaticEffects();this._applyConfig(this._config,this._aboveConfig);
this._flushHandlers()},_applyConfig:function(c,e){for(var f in c)void 0===this[f]&&this.__setProperty(f,c[f],f in e)},_notifyListener:function(c,e){if(!Polymer.Bind._isEventBogus(e,e.target)){if(e.detail){var f=e.detail.value;var g=e.detail.path}if(this._clientsReadied)return c.call(this,e.target,f,g);this._queueHandler([c,e.target,f,g])}},_queueHandler:function(c){this._handlers.push(c)},_flushHandlers:function(){for(var c=this._handlers,e=0,f=c.length,g;e<f&&(g=c[e]);e++)g[0].call(this,g[1],g[2],
g[3]);this._handlers=[]}})})();
(function(){var a=Polymer.Path;Polymer.Base._addFeature({notifyPath:function(b,c,e){var f={},g=this._get(b,this,f);1===arguments.length&&(c=g);f.path&&this._notifyPath(f.path,c,e)},_notifyPath:function(b,c,e){var f=this._propertySetter(b,c);if(f!==c&&(f===f||c===c))return this._pathEffector(b,c),e||this._notifyPathUp(b,c),!0},_getPathParts:function(b){if(Array.isArray(b)){for(var c=[],e=0;e<b.length;e++)for(var f=b[e].toString().split("."),g=0;g<f.length;g++)c.push(f[g]);return c}return b.toString().split(".")},
set:function(b,c,e){var f=e||this,g=this._getPathParts(b),h=g[g.length-1];if(1<g.length){for(b=0;b<g.length-1;b++){var l=g[b];n&&"#"==l[0]?f=Polymer.Collection.get(n).getItem(l):(f=f[l],n&&parseInt(l,10)==l&&(g[b]=Polymer.Collection.get(n).getKey(f)));if(!f)return;var n=Array.isArray(f)?f:null}if(n)if(l=Polymer.Collection.get(n),"#"==h[0]){var m=h;var q=l.getItem(m);h=n.indexOf(q);l.setItem(m,c)}else parseInt(h,10)==h&&(q=f[h],m=l.getKey(q),g[b]=m,l.setItem(m,c));f[h]=c;e||this._notifyPath(g.join("."),
c)}else f[b]=c},get:function(b,c){return this._get(b,c)},_get:function(b,c,e){c=c||this;b=this._getPathParts(b);for(var f,g=0;g<b.length;g++){if(!c)return;var h=b[g];f&&"#"==h[0]?c=Polymer.Collection.get(f).getItem(h):(c=c[h],e&&f&&parseInt(h,10)==h&&(b[g]=Polymer.Collection.get(f).getKey(c)));f=Array.isArray(c)?c:null}e&&(e.path=b.join("."));return c},_pathEffector:function(b,c){var e=a.root(b);if(e=this._propertyEffects&&this._propertyEffects[e])for(var f=0,g;f<e.length&&(g=e[f]);f++){var h=g.pathFn;
h&&h.call(this,b,c,g.effect)}this._boundPaths&&this._notifyBoundPaths(b,c)},_annotationPathEffect:function(b,c,e){if(a.matches(e.value,!1,b))Polymer.Bind._annotationEffect.call(this,b,c,e);else if(!e.negate&&a.isDescendant(e.value,b)){var f=this._nodes[e.index];f&&f._notifyPath&&(b=a.translate(e.value,e.name,b),f._notifyPath(b,c,!0))}},_complexObserverPathEffect:function(b,c,e){a.matches(e.trigger.name,e.trigger.wildcard,b)&&Polymer.Bind._complexObserverEffect.call(this,b,c,e)},_computePathEffect:function(b,
c,e){a.matches(e.trigger.name,e.trigger.wildcard,b)&&Polymer.Bind._computeEffect.call(this,b,c,e)},_annotatedComputationPathEffect:function(b,c,e){a.matches(e.trigger.name,e.trigger.wildcard,b)&&Polymer.Bind._annotatedComputationEffect.call(this,b,c,e)},linkPaths:function(b,c){this._boundPaths=this._boundPaths||{};c?this._boundPaths[b]=c:this.unlinkPaths(b)},unlinkPaths:function(b){this._boundPaths&&delete this._boundPaths[b]},_notifyBoundPaths:function(b,c){for(var e in this._boundPaths){var f=this._boundPaths[e];
a.isDescendant(e,b)?this._notifyPath(a.translate(e,f,b),c):a.isDescendant(f,b)&&this._notifyPath(a.translate(f,e,b),c)}},_notifyPathUp:function(b,c){var e=a.root(b);e=Polymer.CaseMap.camelToDashCase(e)+this._EVENT_CHANGED;this.fire(e,{path:b,value:c},{bubbles:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_EVENT_CHANGED:"-changed",notifySplices:function(b,c){var e={};b=this._get(b,this,e);this._notifySplices(b,e.path,c)},_notifySplices:function(b,c,e){e={keySplices:Polymer.Collection.applySplices(b,
e),indexSplices:e};var f=c+".splices";this._notifyPath(f,e);this._notifyPath(c+".length",b.length);this.__data__[f]={keySplices:null,indexSplices:null}},_notifySplice:function(b,c,e,f,g){this._notifySplices(b,c,[{index:e,addedCount:f,removed:g,object:b,type:"splice"}])},push:function(b){var c={},e=this._get(b,this,c),f=Array.prototype.slice.call(arguments,1),g=e.length,h=e.push.apply(e,f);f.length&&this._notifySplice(e,c.path,g,f.length,[]);return h},pop:function(b){var c={},e=this._get(b,this,c),
f=!!e.length,g=e.pop.apply(e,Array.prototype.slice.call(arguments,1));f&&this._notifySplice(e,c.path,e.length,0,[g]);return g},splice:function(b,c){var e={},f=this._get(b,this,e);(c=0>c?f.length-Math.floor(-c):Math.floor(c))||(c=0);var g=Array.prototype.slice.call(arguments,1),h=f.splice.apply(f,g);((g=Math.max(g.length-2,0))||h.length)&&this._notifySplice(f,e.path,c,g,h);return h},shift:function(b){var c={},e=this._get(b,this,c),f=!!e.length,g=e.shift.apply(e,Array.prototype.slice.call(arguments,
1));f&&this._notifySplice(e,c.path,0,0,[g]);return g},unshift:function(b){var c={},e=this._get(b,this,c),f=Array.prototype.slice.call(arguments,1),g=e.unshift.apply(e,f);f.length&&this._notifySplice(e,c.path,0,f.length,[]);return g},prepareModelNotifyPath:function(b){this.mixin(b,{fire:Polymer.Base.fire,_getEvent:Polymer.Base._getEvent,__eventCache:Polymer.Base.__eventCache,notifyPath:Polymer.Base.notifyPath,_get:Polymer.Base._get,_EVENT_CHANGED:Polymer.Base._EVENT_CHANGED,_notifyPath:Polymer.Base._notifyPath,
_notifyPathUp:Polymer.Base._notifyPathUp,_pathEffector:Polymer.Base._pathEffector,_annotationPathEffect:Polymer.Base._annotationPathEffect,_complexObserverPathEffect:Polymer.Base._complexObserverPathEffect,_annotatedComputationPathEffect:Polymer.Base._annotatedComputationPathEffect,_computePathEffect:Polymer.Base._computePathEffect,_notifyBoundPaths:Polymer.Base._notifyBoundPaths,_getPathParts:Polymer.Base._getPathParts})}})})();
Polymer.Base._addFeature({resolveUrl:function(a){return Polymer.ResolveUrl.resolveUrl(a,this._importPath)}});
Polymer.CssParse={parse:function(a){a=this._clean(a);return this._parseCss(this._lex(a),a)},_clean:function(a){return a.replace(this._rx.comments,"").replace(this._rx.port,"")},_lex:function(a){for(var b={start:0,end:a.length},c=b,e=0,f=a.length;e<f;e++)switch(a[e]){case this.OPEN_BRACE:c.rules||(c.rules=[]);var g=c;c={start:e+1,parent:g,previous:g.rules[g.rules.length-1]};g.rules.push(c);break;case this.CLOSE_BRACE:c.end=e+1,c=c.parent||b}return b},_parseCss:function(a,b){var c=b.substring(a.start,
a.end-1);a.parsedCssText=a.cssText=c.trim();a.parent&&(c=b.substring(a.previous?a.previous.end:a.parent.start,a.start-1),c=this._expandUnicodeEscapes(c),c=c.replace(this._rx.multipleSpaces," "),c=c.substring(c.lastIndexOf(";")+1),c=a.parsedSelector=a.selector=c.trim(),a.atRule=0===c.indexOf(this.AT_START),a.atRule?0===c.indexOf(this.MEDIA_START)?a.type=this.types.MEDIA_RULE:c.match(this._rx.keyframesRule)&&(a.type=this.types.KEYFRAMES_RULE,a.keyframesName=a.selector.split(this._rx.multipleSpaces).pop()):
a.type=0===c.indexOf(this.VAR_START)?this.types.MIXIN_RULE:this.types.STYLE_RULE);if(c=a.rules)for(var e=0,f=c.length,g;e<f&&(g=c[e]);e++)this._parseCss(g,b);return a},_expandUnicodeEscapes:function(a){return a.replace(/\\([0-9a-f]{1,6})\s/gi,function(b,c){b=c;for(c=6-b.length;c--;)b="0"+b;return"\\"+b})},stringify:function(a,b,c){c=c||"";var e="";if(a.cssText||a.rules){var f=a.rules;if(f&&!this._hasMixinRules(f))for(var g=0,h=f.length,l;g<h&&(l=f[g]);g++)e=this.stringify(l,b,e);else e=b?a.cssText:
this.removeCustomProps(a.cssText),(e=e.trim())&&(e="  "+e+"\n")}e&&(a.selector&&(c+=a.selector+" "+this.OPEN_BRACE+"\n"),c+=e,a.selector&&(c+=this.CLOSE_BRACE+"\n\n"));return c},_hasMixinRules:function(a){return 0===a[0].selector.indexOf(this.VAR_START)},removeCustomProps:function(a){a=this.removeCustomPropAssignment(a);return this.removeCustomPropApply(a)},removeCustomPropAssignment:function(a){return a.replace(this._rx.customProp,"").replace(this._rx.mixinProp,"")},removeCustomPropApply:function(a){return a.replace(this._rx.mixinApply,
"").replace(this._rx.varApply,"")},types:{STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1E3},OPEN_BRACE:"{",CLOSE_BRACE:"}",_rx:{comments:/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},
VAR_START:"--",MEDIA_START:"@media",AT_START:"@"};
Polymer.StyleUtil=function(){var a=Polymer.Settings;return{unscopedStyleImports:new WeakMap,SHADY_UNSCOPED_ATTR:"shady-unscoped",NATIVE_VARIABLES:Polymer.Settings.useNativeCSSProperties,MODULE_STYLES_SELECTOR:"style, link[rel\x3dimport][type~\x3dcss], template",INCLUDE_ATTR:"include",toCssText:function(b,c){"string"===typeof b&&(b=this.parser.parse(b));c&&this.forEachRule(b,c);return this.parser.stringify(b,this.NATIVE_VARIABLES)},forRulesInStyles:function(b,c,e){if(b)for(var f=0,g=b.length,h;f<g&&
(h=b[f]);f++)this.forEachRuleInStyle(h,c,e)},forActiveRulesInStyles:function(b,c,e){if(b)for(var f=0,g=b.length,h;f<g&&(h=b[f]);f++)this.forEachRuleInStyle(h,c,e,!0)},rulesForStyle:function(b){!b.__cssRules&&b.textContent&&(b.__cssRules=this.parser.parse(b.textContent));return b.__cssRules},isKeyframesSelector:function(b){return b.parent&&b.parent.type===this.ruleTypes.KEYFRAMES_RULE},forEachRuleInStyle:function(b,c,e,f){var g=this.rulesForStyle(b),h,l;c&&(h=function(n){c(n,b)});e&&(l=function(n){e(n,
b)});this.forEachRule(g,h,l,f)},forEachRule:function(b,c,e,f){if(b){var g=!1;if(f&&b.type===this.ruleTypes.MEDIA_RULE){var h=b.selector.match(this.rx.MEDIA_MATCH);h&&(window.matchMedia(h[1]).matches||(g=!0))}b.type===this.ruleTypes.STYLE_RULE?c(b):e&&b.type===this.ruleTypes.KEYFRAMES_RULE?e(b):b.type===this.ruleTypes.MIXIN_RULE&&(g=!0);if((b=b.rules)&&!g){g=0;h=b.length;for(var l;g<h&&(l=b[g]);g++)this.forEachRule(l,c,e,f)}}},applyCss:function(b,c,e,f){b=this.createScopeStyle(b,c);return this.applyStyle(b,
e,f)},applyStyle:function(b,c,e){c=c||document.head;e=e&&e.nextSibling||c.firstChild;this.__lastHeadApplyNode=b;return c.insertBefore(b,e)},createScopeStyle:function(b,c){var e=document.createElement("style");c&&e.setAttribute("scope",c);e.textContent=b;return e},__lastHeadApplyNode:null,applyStylePlaceHolder:function(b){b=document.createComment(" Shady DOM styles for "+b+" ");var c=document.head;c.insertBefore(b,(this.__lastHeadApplyNode?this.__lastHeadApplyNode.nextSibling:null)||c.firstChild);
return this.__lastHeadApplyNode=b},cssFromModules:function(b,c){b=b.trim().split(/\s+/);for(var e="",f=0;f<b.length;f++)e+=this.cssFromModule(b[f],c);return e},cssFromModule:function(b,c){var e=Polymer.DomModule.import(b);e&&!e._cssText&&(e._cssText=this.cssFromElement(e));!e&&c&&console.warn("Could not find style data in module named",b);return e&&e._cssText||""},cssFromElement:function(b){for(var c="",e=Polymer.TreeApi.arrayCopy((b.content||b).querySelectorAll(this.MODULE_STYLES_SELECTOR)),f=0,
g;f<e.length;f++)if(g=e[f],"template"===g.localName)g.hasAttribute("preserve-content")||(c+=this.cssFromElement(g));else if("style"===g.localName){var h=g.getAttribute(this.INCLUDE_ATTR);h&&(c+=this.cssFromModules(h,!0));g=g.__appliedElement||g;g.parentNode.removeChild(g);h=this.resolveCss(g.textContent,b.ownerDocument);!a.useNativeShadow&&g.hasAttribute(this.SHADY_UNSCOPED_ATTR)?(g.textContent=h,document.head.insertBefore(g,document.head.firstChild)):c+=h}else g.import&&g.import.body&&(h=this.resolveCss(g.import.body.textContent,
g.import),!a.useNativeShadow&&g.hasAttribute(this.SHADY_UNSCOPED_ATTR)?this.unscopedStyleImports.has(g.import)||(this.unscopedStyleImports.set(g.import,!0),g=document.createElement("style"),g.setAttribute(this.SHADY_UNSCOPED_ATTR,""),g.textContent=h,document.head.insertBefore(g,document.head.firstChild)):c+=h);return c},styleIncludesToTemplate:function(b){b=b.content.querySelectorAll("style[include]");for(var c=0,e;c<b.length;c++)e=b[c],e.parentNode.insertBefore(this._includesToFragment(e.getAttribute("include")),
e)},_includesToFragment:function(b){b=b.trim().split(" ");for(var c=document.createDocumentFragment(),e=0;e<b.length;e++){var f=Polymer.DomModule.import(b[e],"template");f&&this._addStylesToFragment(c,f.content)}return c},_addStylesToFragment:function(b,c){c=c.querySelectorAll("style");for(var e=0,f;e<c.length;e++){f=c[e];var g=f.getAttribute("include");g&&b.appendChild(this._includesToFragment(g));f.textContent&&b.appendChild(f.cloneNode(!0))}},isTargetedBuild:function(b){return a.useNativeShadow?
"shadow"===b:"shady"===b},cssBuildTypeForModule:function(b){if(b=Polymer.DomModule.import(b))return this.getCssBuildType(b)},getCssBuildType:function(b){return b.getAttribute("css-build")},_findMatchingParen:function(b,c){for(var e=0,f=b.length;c<f;c++)switch(b[c]){case "(":e++;break;case ")":if(0===--e)return c}return-1},processVariableAndFallback:function(b,c){var e=b.indexOf("var(");if(-1===e)return c(b,"","","");var f=this._findMatchingParen(b,e+3),g=b.substring(e+4,f);e=b.substring(0,e);b=this.processVariableAndFallback(b.substring(f+
1),c);var h=g.indexOf(",");if(-1===h)return c(e,g.trim(),"",b);f=g.substring(0,h).trim();g=g.substring(h+1).trim();return c(e,f,g,b)},rx:{VAR_ASSIGN:/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\s}])|$)/gi,MIXIN_MATCH:/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,VAR_CONSUMED:/(--[\w-]+)\s*([:,;)]|$)/gi,ANIMATION_MATCH:/(animation\s*:)|(animation-name\s*:)/,MEDIA_MATCH:/@media[^(]*(\([^)]*\))/,IS_VAR:/^--/,BRACKETED:/\{[^}]*\}/g,HOST_PREFIX:"(?:^|[^.#[:])",HOST_SUFFIX:"($|[.:[\\s\x3e+~])"},
resolveCss:Polymer.ResolveUrl.resolveCss,parser:Polymer.CssParse,ruleTypes:Polymer.CssParse.types}}();
Polymer.StyleTransformer=function(){var a=Polymer.StyleUtil,b=Polymer.Settings,c={dom:function(R,Y,W,X){this._transformDom(R,Y||"",W,X)},_transformDom:function(R,Y,W,X){R.setAttribute&&this.element(R,Y,W,X);R=Polymer.dom(R).childNodes;for(var ja=0;ja<R.length;ja++)this._transformDom(R[ja],Y,W,X)},element:function(R,Y,W,X){W?X?R.removeAttribute(e):R.setAttribute(e,Y):Y&&(R.classList?X?(R.classList.remove(e),R.classList.remove(Y)):(R.classList.add(e),R.classList.add(Y)):R.getAttribute&&(W=R.getAttribute(D),
X?W&&R.setAttribute(D,W.replace(e,"").replace(Y,"")):R.setAttribute(D,(W?W+" ":"")+e+" "+Y)))},elementStyles:function(R,Y){var W=R._styles,X="",ja=R.__cssBuild;ja=b.useNativeShadow||"shady"===ja;if(ja){var pa=this;var ta=function(ka){ka.selector=pa._slottedToContent(ka.selector);ka.selector=ka.selector.replace(m,":host \x3e *");ka.selector=pa._dirShadowTransform(ka.selector);Y&&Y(ka)}}for(var da=0,Aa=W.length,Ca;da<Aa&&(Ca=W[da]);da++){var oa=a.rulesForStyle(Ca);X+=ja?a.toCssText(oa,ta):this.css(oa,
R.is,R.extends,Y,R._scopeCssViaAttr)+"\n\n"}return X.trim()},css:function(R,Y,W,X,ja){var pa=this._calcHostScope(Y,W);Y=this._calcElementScope(Y,ja);var ta=this;return a.toCssText(R,function(da){da.isScoped||(ta.rule(da,Y,pa),da.isScoped=!0);X&&X(da,Y,pa)})},_calcElementScope:function(R,Y){return R?Y?A+R+E:z+R:""},_calcHostScope:function(R,Y){return Y?"[is\x3d"+R+"]":R},rule:function(R,Y,W){this._transformRule(R,this._transformComplexSelector,Y,W)},_transformRule:function(R,Y,W,X){R.selector=R.transformedSelector=
this._transformRuleCss(R,Y,W,X)},_splitSelectorList:function(R){for(var Y=[],W="",X=0;0<=X&&X<R.length;X++)if("("===R[X]){var ja=a._findMatchingParen(R,X);W+=R.slice(X,ja+1);X=ja}else R[X]===g?(Y.push(W),W=""):W+=R[X];W&&Y.push(W);0===Y.length&&Y.push(R);return Y},_transformRuleCss:function(R,Y,W,X){var ja=this._splitSelectorList(R.selector);if(!a.isKeyframesSelector(R)){R=0;for(var pa=ja.length,ta;R<pa&&(ta=ja[R]);R++)ja[R]=Y.call(this,ta,W,X)}return ja.join(g)},_ensureScopedDir:function(R){var Y=
R.match(L);Y&&""===Y[1]&&Y[0].length===R.length&&(R="*"+R);return R},_additionalDirSelectors:function(R,Y,W){return R&&Y?g+(W||"")+" "+R+" "+Y:""},_transformComplexSelector:function(R,Y,W){var X=!1,ja=!1,pa=!1,ta=this;R=R.trim();R=this._slottedToContent(R);R=R.replace(m,":host \x3e *");R=R.replace(J,n+" $1");R=this._ensureScopedDir(R);R=R.replace(h,function(da,Aa,Ca){X?Ca=Ca.replace(w," "):(da=ta._transformCompoundSelector(Ca,Aa,Y,W),X=X||da.stop,ja=ja||da.hostContext,pa=pa||da.dir,Aa=da.combinator,
Ca=da.value);return Aa+Ca});ja&&(R=R.replace(v,function(da,Aa,Ca,oa){da=Aa+Ca+" "+W+oa+g+" "+Aa+W+Ca+oa;pa&&(da+=ta._additionalDirSelectors(Ca,oa,W));return da}));return R},_transformDir:function(R){R=R.replace(S,aa);return R=R.replace(L,P)},_transformCompoundSelector:function(R,Y,W,X){var ja=R.search(w),pa=!1,ta=!1;R.match(L)&&(R=this._transformDir(R),ta=!0);0<=R.indexOf(r)?pa=!0:0<=R.indexOf(n)?R=this._transformHostSelector(R,X):0!==ja&&(R=W?this._transformSimpleSelector(R,W):R);0<=R.indexOf(u)&&
(Y="");if(0<=ja){R=R.replace(w," ");var da=!0}return{value:R,combinator:Y,stop:da,hostContext:pa,dir:ta}},_transformSimpleSelector:function(R,Y){R=R.split(C);R[0]+=Y;return R.join(C)},_transformHostSelector:function(R,Y){var W=R.match(q);return(W=W&&W[2].trim()||"")?W[0].match(l)?R.replace(q,function(X,ja,pa){return Y+pa}):W.split(l)[0]===Y?W:M:R.replace(n,Y)},documentRule:function(R){R.selector=R.parsedSelector;this.normalizeRootSelector(R);b.useNativeShadow||this._transformRule(R,this._transformDocumentSelector)},
normalizeRootSelector:function(R){R.selector=R.selector.replace(m,"html");var Y=this._splitSelectorList(R.selector);Y=Y.filter(function(W){return!W.match(K)});R.selector=Y.join(g)},_transformDocumentSelector:function(R){return this._transformComplexSelector(R,f)},_slottedToContent:function(R){return R.replace(H,u+"\x3e $1")},_dirShadowTransform:function(R){return R.match(/:dir\(/)?this._splitSelectorList(R).map(function(Y){Y=this._ensureScopedDir(Y);Y=this._transformDir(Y);var W=v.exec(Y);W&&(Y+=
this._additionalDirSelectors(W[2],W[3],""));return Y},this).join(g):R},SCOPE_NAME:"style-scope"},e=c.SCOPE_NAME,f=":not(["+e+"]):not(."+e+")",g=",",h=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=\[])+)/g,l=/[[.:#*]/,n=":host",m=":root",q=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,r=":host-context",v=/(.*)(?::host-context)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))(.*)/,u="::content",w=/::content|::shadow|\/deep\//,z=".",A="["+e+"~\x3d",E="]",C=":",D="class",J=new RegExp("^("+u+")"),M="should_not_match",H=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/g,
K=/:host(?:\s*>\s*\*)?/,L=/(.*):dir\((ltr|rtl)\)/,P=':host-context([dir\x3d"$2"]) $1',S=/:host\(:dir\((rtl|ltr)\)\)/g,aa=':host-context([dir\x3d"$1"])';return c}();
Polymer.StyleExtends=function(){var a=Polymer.StyleUtil;return{hasExtends:function(b){return!!b.match(this.rx.EXTEND)},transform:function(b){b=a.rulesForStyle(b);var c=this;a.forEachRule(b,function(e){c._mapRuleOntoParent(e);if(e.parent)for(var f;f=c.rx.EXTEND.exec(e.cssText);)(f=c._findExtendor(f[1],e))&&c._extendRule(e,f);e.cssText=e.cssText.replace(c.rx.EXTEND,"")});return a.toCssText(b,function(e){e.selector.match(c.rx.STRIP)&&(e.cssText="")},!0)},_mapRuleOntoParent:function(b){if(b.parent){for(var c=
b.parent.map||(b.parent.map={}),e=b.selector.split(","),f=0,g;f<e.length;f++)g=e[f],c[g.trim()]=b;return c}},_findExtendor:function(b,c){return c.parent&&c.parent.map&&c.parent.map[b]||this._findExtendor(b,c.parent)},_extendRule:function(b,c){b.parent!==c.parent&&this._cloneAndAddRuleToParent(c,b.parent);b.extends=b.extends||[];b.extends.push(c);c.selector=c.selector.replace(this.rx.STRIP,"");c.selector=(c.selector&&c.selector+",\n")+b.selector;c.extends&&c.extends.forEach(function(e){this._extendRule(b,
e)},this)},_cloneAndAddRuleToParent:function(b,c){b=Object.create(b);b.parent=c;b.extends&&(b.extends=b.extends.slice());c.rules.push(b)},rx:{EXTEND:/@extends\(([^)]*)\)\s*?;/gim,STRIP:/%[^,]*$/}}}();
Polymer.ApplyShim=function(){function a(z,A){z=z.trim();u[z]={properties:A,dependants:{}}}function b(z){z=z.trim();return u[z]}function c(z){z=z.split(";");for(var A,E,C={},D=0,J;D<z.length;D++)if(A=z[D])if(J=A.split(":"),1<J.length){E=A=J[0].trim();J=J.slice(1).join(":");var M=v.exec(J);M&&(J=M[1]?w._getInitialValueForProperty(E):"apply-shim-inherit");E=J;C[A]=E}return C}function e(z){var A=w.__currentElementProto;A=A&&A.is;for(var E in z.dependants)E!==A&&(z.dependants[E].__applyShimInvalid=!0)}
function f(z,A,E,C){E&&l.processVariableAndFallback(E,function(R,Y){Y&&b(Y)&&(C="@apply "+Y+";")});if(!C)return z;var D=h(C),J=z.slice(0,z.indexOf("--")),M=D=c(D),H=b(A),K=H&&H.properties;K?(M=Object.create(K),M=Polymer.Base.mixin(M,D)):a(A,M);var L=[],P,S=!1;for(P in M){var aa=D[P];void 0===aa&&(aa="initial");!K||P in K||(S=!0);L.push(A+"_-_"+P+": "+aa)}S&&e(H);H&&(H.properties=M);E&&(J=z+";"+J);return J+L.join("; ")+";"}function g(z,A,E){return"var("+A+",var("+E+"))"}function h(z){for(var A;A=n.exec(z);){var E=
A[0],C=A[1];A=A.index;var D=z.slice(0,A+E.indexOf("@apply"));z=z.slice(A+E.length);var J=c(D),M;E=void 0;C=C.replace(r,"");var H=[];var K=b(C);K||(a(C,{}),K=b(C));if(K)for(E in(M=w.__currentElementProto)&&(K.dependants[M.is]=M),K.properties)K=J&&J[E],M=[E,": var(",C,"_-_",E],K&&M.push(",",K),M.push(")"),H.push(M.join(""));E=H.join("; ");z=[D,E,z].join("");n.lastIndex=A+E.length}return z}var l=Polymer.StyleUtil,n=l.rx.MIXIN_MATCH,m=l.rx.VAR_ASSIGN,q=/var\(\s*(--[^,]*),\s*(--[^)]*)\)/g,r=/;\s*/m,v=
/^\s*(initial)|(inherit)\s*$/,u={},w={_measureElement:null,_map:u,_separator:"_-_",transform:function(z,A){this.__currentElementProto=A;l.forRulesInStyles(z,this._boundFindDefinitions);l.forRulesInStyles(z,this._boundFindApplications);A&&(A.__applyShimInvalid=!1);this.__currentElementProto=null},_findDefinitions:function(z){var A=z.parsedCssText;A=A.replace(q,g);A=A.replace(m,f);z.cssText=A;":root"===z.selector&&(z.selector=":host \x3e *")},_findApplications:function(z){z.cssText=h(z.cssText)},transformRule:function(z){this._findDefinitions(z);
this._findApplications(z)},_getInitialValueForProperty:function(z){this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement));return window.getComputedStyle(this._measureElement).getPropertyValue(z)}};w._boundTransformRule=w.transformRule.bind(w);w._boundFindDefinitions=w._findDefinitions.bind(w);w._boundFindApplications=w._findApplications.bind(w);return w}();
(function(){var a=Polymer.Base._prepElement,b=Polymer.Settings.useNativeShadow,c=Polymer.StyleUtil,e=Polymer.StyleTransformer,f=Polymer.StyleExtends,g=Polymer.ApplyShim,h=Polymer.Settings;Polymer.Base._addFeature({_prepElement:function(l){this._encapsulateStyle&&"shady"!==this.__cssBuild&&e.element(l,this.is,this._scopeCssViaAttr);a.call(this,l)},_prepStyles:function(){void 0===this._encapsulateStyle&&(this._encapsulateStyle=!b);b||(this._scopeStyle=c.applyStylePlaceHolder(this.is));this.__cssBuild=
c.cssBuildTypeForModule(this.is)},_prepShimStyles:function(){if(this._template){var l=c.isTargetedBuild(this.__cssBuild);h.useNativeCSSProperties&&"shadow"===this.__cssBuild&&l?h.preserveStyleIncludes&&c.styleIncludesToTemplate(this._template):(this._styles=this._styles||this._collectStyles(),h.useNativeCSSProperties&&!this.__cssBuild&&g.transform(this._styles,this),l=h.useNativeCSSProperties&&l?this._styles.length&&this._styles[0].textContent.trim():e.elementStyles(this),this._prepStyleProperties(),
!this._needsStyleProperties()&&l&&c.applyCss(l,this.is,b?this._template.content:null,this._scopeStyle))}else this._styles=[]},_collectStyles:function(){var l=[],n="",m=this.styleModules;if(m)for(var q=0,r=m.length,v;q<r&&(v=m[q]);q++)n+=c.cssFromModule(v);n+=c.cssFromModule(this.is);m=this._template&&this._template.parentNode;!this._template||m&&m.id.toLowerCase()===this.is||(n+=c.cssFromElement(this._template));n&&(m=document.createElement("style"),m.textContent=n,f.hasExtends(m.textContent)&&f.transform(m),
l.push(m));return l},_elementAdd:function(l){this._encapsulateStyle&&(l.__styleScoped?l.__styleScoped=!1:e.dom(l,this.is,this._scopeCssViaAttr))},_elementRemove:function(l){this._encapsulateStyle&&e.dom(l,this.is,this._scopeCssViaAttr,!0)},scopeSubtree:function(l,n){if(!b){var m=this,q=function(r){if(r.nodeType===Node.ELEMENT_NODE){var v=r.getAttribute("class");r.setAttribute("class",m._scopeElementClass(r,v));r=r.querySelectorAll("*");for(var u=0,w;u<r.length&&(w=r[u]);u++)v=w.getAttribute("class"),
w.setAttribute("class",m._scopeElementClass(w,v))}};q(l);if(n)return n=new MutationObserver(function(r){for(var v=0,u;v<r.length&&(u=r[v]);v++)if(u.addedNodes)for(var w=0;w<u.addedNodes.length;w++)q(u.addedNodes[w])}),n.observe(l,{childList:!0,subtree:!0}),n}}})})();
Polymer.StyleProperties=function(){var a=Polymer.DomApi.matchesSelector,b=Polymer.StyleUtil,c=Polymer.StyleTransformer,e=navigator.userAgent.match("Trident"),f=Polymer.Settings;return{decorateStyles:function(g,h){var l=this,n={},m=[],q=0,r=c._calcHostScope(h.is,h.extends);b.forRulesInStyles(g,function(u,w){l.decorateRule(u);u.index=q++;l.whenHostOrRootRule(h,u,w,function(z){u.parent.type===b.ruleTypes.MEDIA_RULE&&(h.__notStyleScopeCacheable=!0);z.isHost&&(z=z.selector.split(" ").some(function(A){return 0===
A.indexOf(r)&&A.length!==r.length}),h.__notStyleScopeCacheable=h.__notStyleScopeCacheable||z)});l.collectPropertiesInCssText(u.propertyInfo.cssText,n)},function(u){m.push(u)});g._keyframes=m;g=[];for(var v in n)g.push(v);return g},decorateRule:function(g){if(g.propertyInfo)return g.propertyInfo;var h={},l={};this.collectProperties(g,l)&&(h.properties=l,g.rules=null);h.cssText=this.collectCssText(g);return g.propertyInfo=h},collectProperties:function(g,h){var l=g.propertyInfo;if(l){if(l.properties)return Polymer.Base.mixin(h,
l.properties),!0}else{l=this.rx.VAR_ASSIGN;for(var n=g.parsedCssText,m;g=l.exec(n);)m=(g[2]||g[3]).trim(),"inherit"!==m&&(h[g[1].trim()]=m),m=!0;return m}},collectCssText:function(g){return this.collectConsumingCssText(g.parsedCssText)},collectConsumingCssText:function(g){return g.replace(this.rx.BRACKETED,"").replace(this.rx.VAR_ASSIGN,"")},collectPropertiesInCssText:function(g,h){for(var l;l=this.rx.VAR_CONSUMED.exec(g);){var n=l[1];":"!==l[2]&&(h[n]=!0)}},reify:function(g){for(var h=Object.getOwnPropertyNames(g),
l=0,n;l<h.length;l++)n=h[l],g[n]=this.valueForProperty(g[n],g)},valueForProperty:function(g,h){if(g)if(0<=g.indexOf(";"))g=this.valueForProperties(g,h);else{var l=this;g=b.processVariableAndFallback(g,function(n,m,q,r){(m=l.valueForProperty(h[m],h))&&"initial"!==m?"apply-shim-inherit"===m&&(m="inherit"):m=l.valueForProperty(h[q]||q,h)||q;return n+(m||"")+r})}return g&&g.trim()||""},valueForProperties:function(g,h){g=g.split(";");for(var l=0,n,m;l<g.length;l++)if(n=g[l]){this.rx.MIXIN_MATCH.lastIndex=
0;if(m=this.rx.MIXIN_MATCH.exec(n))n=this.valueForProperty(h[m[1]],h);else if(m=n.indexOf(":"),-1!==m){var q=n.substring(m);q=q.trim();q=this.valueForProperty(q,h)||q;n=n.substring(0,m)+q}g[l]=n&&n.lastIndexOf(";")===n.length-1?n.slice(0,-1):n||""}return g.join(";")},applyProperties:function(g,h){var l="";g.propertyInfo||this.decorateRule(g);g.propertyInfo.cssText&&(l=this.valueForProperties(g.propertyInfo.cssText,h));g.cssText=l},applyKeyframeTransforms:function(g,h){var l=g.cssText,n=g.cssText;
null==g.hasAnimations&&(g.hasAnimations=this.rx.ANIMATION_MATCH.test(l));if(g.hasAnimations)if(null==g.keyframeNamesToTransform){g.keyframeNamesToTransform=[];for(var m in h)n=h[m],n=n(l),l!==n&&(l=n,g.keyframeNamesToTransform.push(m))}else{for(m=0;m<g.keyframeNamesToTransform.length;++m)n=h[g.keyframeNamesToTransform[m]],l=n(l);n=l}g.cssText=n},propertyDataFromStyles:function(g,h){var l={},n=this,m=[];b.forActiveRulesInStyles(g,function(q){q.propertyInfo||n.decorateRule(q);var r=q.transformedSelector||
q.parsedSelector;h&&q.propertyInfo.properties&&r&&a.call(h,r)&&(n.collectProperties(q,l),q=q.index,r=parseInt(q/32),m[r]=(m[r]||0)|1<<q%32)});return{properties:l,key:m}},_rootSelector:/:root|:host\s*>\s*\*/,_checkRoot:function(g,h){return!!h.match(this._rootSelector)||"html"===g&&-1<h.indexOf("html")},whenHostOrRootRule:function(g,h,l,n){h.propertyInfo||self.decorateRule(h);if(h.propertyInfo.properties){var m=g.is?c._calcHostScope(g.is,g.extends):"html",q=h.parsedSelector,r=this._checkRoot(m,q),v=
!r&&0===q.indexOf(":host");"shady"===(g.__cssBuild||l.__cssBuild)&&(r=q===m+" \x3e *."+m||-1<q.indexOf("html"),v=!r&&0===q.indexOf(m));if(r||v)l=m,v&&(f.useNativeShadow&&!h.transformedSelector&&(h.transformedSelector=c._transformRuleCss(h,c._transformComplexSelector,g.is,m)),l=h.transformedSelector||h.parsedSelector),r&&"html"===m&&(l=h.transformedSelector||h.parsedSelector),n({selector:l,isHost:v,isRoot:r})}},hostAndRootPropertiesForScope:function(g){var h={},l={},n=this;b.forActiveRulesInStyles(g._styles,
function(m,q){n.whenHostOrRootRule(g,m,q,function(r){a.call(g._element||g,r.selector)&&(r.isHost?n.collectProperties(m,h):n.collectProperties(m,l))})});return{rootProps:l,hostProps:h}},transformStyles:function(g,h,l){var n=this,m=c._calcHostScope(g.is,g.extends),q=new RegExp(this.rx.HOST_PREFIX+(g.extends?"\\"+m.slice(0,-1)+"\\]":m)+this.rx.HOST_SUFFIX),r=this._elementKeyframeTransforms(g,l);return c.elementStyles(g,function(v){n.applyProperties(v,h);f.useNativeShadow||Polymer.StyleUtil.isKeyframesSelector(v)||
!v.cssText||(n.applyKeyframeTransforms(v,r),n._scopeSelector(v,q,m,g._scopeCssViaAttr,l))})},_elementKeyframeTransforms:function(g,h){g=g._styles._keyframes;var l={};if(!f.useNativeShadow&&g)for(var n=0,m=g[n];n<g.length;m=g[++n])this._scopeKeyframes(m,h),l[m.keyframesName]=this._keyframesRuleTransformer(m);return l},_keyframesRuleTransformer:function(g){return function(h){return h.replace(g.keyframesNameRx,g.transformedKeyframesName)}},_scopeKeyframes:function(g,h){g.keyframesNameRx=new RegExp("\\b"+
g.keyframesName+"(?!\\B|-)","g");g.transformedKeyframesName=g.keyframesName+"-"+h;g.transformedSelector=g.transformedSelector||g.selector;g.selector=g.transformedSelector.replace(g.keyframesName,g.transformedKeyframesName)},_hasDirOrHostContext:function(g){return/:host-context|:dir/.test(g)},_scopeSelector:function(g,h,l,n,m){g.transformedSelector=g.transformedSelector||g.selector;m=c._calcElementScope(m,n);n=c._calcElementScope(l,n);for(var q=g.transformedSelector.split(","),r=this._hasDirOrHostContext(g.parsedSelector),
v=0,u=q.length,w;v<u&&(w=q[v]);v++)q[v]=w.match(h)?w.replace(l,m):r?w.replace(n,m+" "+n):m+" "+w;g.selector=q.join(",")},applyElementScopeSelector:function(g,h,l,n){var m=n?g.getAttribute(c.SCOPE_NAME):g.getAttribute("class")||"";h=l?m.replace(l,h):(m?m+" ":"")+this.XSCOPE_NAME+" "+h;m!==h&&(n?g.setAttribute(c.SCOPE_NAME,h):g.setAttribute("class",h))},applyElementStyle:function(g,h,l,n){h=n?n.textContent||"":this.transformStyles(g,h,l);var m=g._customStyle;m&&!f.useNativeShadow&&m!==n&&(m._useCount--,
0>=m._useCount&&m.parentNode&&m.parentNode.removeChild(m));f.useNativeShadow?g._customStyle?(g._customStyle.textContent=h,n=g._customStyle):h&&(n=b.applyCss(h,l,g.root,g._scopeStyle)):n?n.parentNode||(e&&-1<h.indexOf("@media")&&(n.textContent=h),b.applyStyle(n,null,g._scopeStyle)):h&&(n=b.applyCss(h,l,null,g._scopeStyle));n&&(n._useCount=n._useCount||0,g._customStyle!=n&&n._useCount++,g._customStyle=n);return n},mixinCustomStyle:function(g,h){var l,n;for(n in h)if((l=h[n])||0===l)g[n]=l},updateNativeStyleProperties:function(g,
h){var l=g.__customStyleProperties;if(l)for(var n=0;n<l.length;n++)g.style.removeProperty(l[n]);l=[];for(var m in h)null!==h[m]&&(g.style.setProperty(m,h[m]),l.push(m));g.__customStyleProperties=l},rx:b.rx,XSCOPE_NAME:"x-scope"}}();Polymer.StyleCache=function(){this.cache={}};
Polymer.StyleCache.prototype={MAX:100,store:function(a,b,c,e){b.keyValues=c;b.styles=e;a=this.cache[a]=this.cache[a]||[];a.push(b);a.length>this.MAX&&a.shift()},retrieve:function(a,b,c){if(a=this.cache[a])for(var e=a.length-1,f;0<=e;e--)if(f=a[e],c===f.styles&&this._objectsEqual(b,f.keyValues))return f},clear:function(){this.cache={}},_objectsEqual:function(a,b){var c;for(c in a){var e=a[c];var f=b[c];if("object"===typeof e&&e?!this._objectsStrictlyEqual(e,f):e!==f)return!1}return Array.isArray(a)?
a.length===b.length:!0},_objectsStrictlyEqual:function(a,b){return this._objectsEqual(a,b)&&this._objectsEqual(b,a)}};
Polymer.StyleDefaults=function(){var a=Polymer.StyleProperties,b=Polymer.Settings.useNativeCSSProperties;return{_styles:[],_properties:null,customStyle:{},_styleCache:new Polymer.StyleCache,_element:Polymer.DomApi.wrap(document.documentElement),addStyle:function(c){this._styles.push(c);this._properties=null},get _styleProperties(){this._properties||(a.decorateStyles(this._styles,this),this._styles._scopeStyleProperties=null,this._properties=a.hostAndRootPropertiesForScope(this).rootProps,a.mixinCustomStyle(this._properties,
this.customStyle),a.reify(this._properties));return this._properties},hasStyleProperties:function(){return!!this._properties},_needsStyleProperties:function(){},_computeStyleProperties:function(){return this._styleProperties},updateStyles:function(c){this._properties=null;c&&Polymer.Base.mixin(this.customStyle,c);this._styleCache.clear();c=0;for(var e;c<this._styles.length;c++)e=this._styles[c],e=e.__importElement||e,e._apply();b&&a.updateNativeStyleProperties(document.documentElement,this.customStyle)}}}();
(function(){var a=Polymer.Base.serializeValueToAttribute,b=Polymer.StyleProperties,c=Polymer.StyleTransformer,e=Polymer.StyleDefaults,f=Polymer.Settings.useNativeShadow,g=Polymer.Settings.useNativeCSSProperties;Polymer.Base._addFeature({_prepStyleProperties:function(){g||(this._ownStylePropertyNames=this._styles&&this._styles.length?b.decorateStyles(this._styles,this):null)},customStyle:null,getComputedStyleValue:function(m){g||this._styleProperties||this._computeStyleProperties();return!g&&this._styleProperties&&
this._styleProperties[m]||getComputedStyle(this).getPropertyValue(m)},_setupStyleProperties:function(){this.customStyle={};this._customStyle=this._ownStyleProperties=this._scopeSelector=this._styleProperties=this._styleCache=null},_needsStyleProperties:function(){return!(g||!this._ownStylePropertyNames||!this._ownStylePropertyNames.length)},_validateApplyShim:function(){if(this.__applyShimInvalid){Polymer.ApplyShim.transform(this._styles,this.__proto__);var m=c.elementStyles(this);if(f){var q=this._template.content.querySelector("style");
q&&(q.textContent=m)}else if(q=this._scopeStyle&&this._scopeStyle.nextSibling)q.textContent=m}},_beforeAttached:function(){this._scopeSelector&&!this.__stylePropertiesInvalid||!this._needsStyleProperties()||(this.__stylePropertiesInvalid=!1,this._updateStyleProperties())},_findStyleHost:function(){for(var m=this;m=Polymer.dom(m).getOwnerRoot();){if(Polymer.isInstance(m.host))return m.host;m=m.host}return e},_updateStyleProperties:function(){var m=this._findStyleHost();m._styleProperties||m._computeStyleProperties();
m._styleCache||(m._styleCache=new Polymer.StyleCache);var q=b.propertyDataFromStyles(m._styles,this),r=!this.__notStyleScopeCacheable;if(r){q.key.customStyle=this.customStyle;var v=m._styleCache.retrieve(this.is,q.key,this._styles)}var u=!!v;u?this._styleProperties=v._styleProperties:this._computeStyleProperties(q.properties);this._computeOwnStyleProperties();u||(v=h.retrieve(this.is,this._ownStyleProperties,this._styles));var w=!!v&&!u;v=this._applyStyleProperties(v);u||(v=v&&f?v.cloneNode(!0):v,
v={style:v,_scopeSelector:this._scopeSelector,_styleProperties:this._styleProperties},r&&(q.key.customStyle={},this.mixin(q.key.customStyle,this.customStyle),m._styleCache.store(this.is,v,q.key,this._styles)),w||h.store(this.is,Object.create(v),this._ownStyleProperties,this._styles))},_computeStyleProperties:function(m){var q=this._findStyleHost();q._styleProperties||q._computeStyleProperties();var r=Object.create(q._styleProperties),v=b.hostAndRootPropertiesForScope(this);this.mixin(r,v.hostProps);
m=m||b.propertyDataFromStyles(q._styles,this).properties;this.mixin(r,m);this.mixin(r,v.rootProps);b.mixinCustomStyle(r,this.customStyle);b.reify(r);this._styleProperties=r},_computeOwnStyleProperties:function(){for(var m={},q=0,r;q<this._ownStylePropertyNames.length;q++)r=this._ownStylePropertyNames[q],m[r]=this._styleProperties[r];this._ownStyleProperties=m},_scopeCount:0,_applyStyleProperties:function(m){var q=this._scopeSelector;this._scopeSelector=m?m._scopeSelector:this.is+"-"+this.__proto__._scopeCount++;
m=b.applyElementStyle(this,this._styleProperties,this._scopeSelector,m&&m.style);f||b.applyElementScopeSelector(this,this._scopeSelector,q,this._scopeCssViaAttr);return m},serializeValueToAttribute:function(m,q,r){r=r||this;if("class"===q&&!f){var v=r===this?this.domHost||this.dataHost:this;v&&(m=v._scopeElementClass(r,m))}r=this.shadyRoot&&this.shadyRoot._hasDistributed?Polymer.dom(r):r;a.call(this,m,q,r)},_scopeElementClass:function(m,q){f||this._scopeCssViaAttr||(q=(q?q+" ":"")+l+" "+this.is+(m._scopeSelector?
" "+n+" "+m._scopeSelector:""));return q},updateStyles:function(m){m&&this.mixin(this.customStyle,m);g?b.updateNativeStyleProperties(this,this.customStyle):(this.isAttached?this._needsStyleProperties()?this._updateStyleProperties():this._styleProperties=null:this.__stylePropertiesInvalid=!0,this._styleCache&&this._styleCache.clear(),this._updateRootStyles())},_updateRootStyles:function(m){m=m||this.root;m=Polymer.dom(m)._query(function(u){return u.shadyRoot||u.shadowRoot});for(var q=0,r=m.length,
v;q<r&&(v=m[q]);q++)v.updateStyles&&v.updateStyles()}});Polymer.updateStyles=function(m){e.updateStyles(m);Polymer.Base._updateRootStyles(document)};var h=new Polymer.StyleCache;Polymer.customStyleCache=h;var l=c.SCOPE_NAME,n=b.XSCOPE_NAME})();
Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs();this.factoryImpl&&this._prepConstructor();this._prepStyles()},_finishRegisterFeatures:function(){this._prepTemplate();this._prepShimStyles();this._prepAnnotations();this._prepEffects();this._prepBehaviors();this._prepPropertyInfo();this._prepBindings();this._prepShady()},_prepBehavior:function(a){this._addPropertyEffects(a.properties);this._addComplexObserverEffects(a.observers);this._addHostAttributes(a.hostAttributes)},_initFeatures:function(){this._setupGestures();
this._setupConfigure(this.__data__);this._setupStyleProperties();this._setupDebouncers();this._setupShady();this._registerHost();this._template&&(this._validateApplyShim(),this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting(),this._marshalAnnotationReferences());this._marshalInstanceEffects();this._marshalBehaviors();this._marshalHostAttributes();this._marshalAttributes();this._tryReady()},_marshalBehavior:function(a){a.listeners&&this._listenListeners(a.listeners)}});
(function(){var a=Polymer.StyleProperties,b=Polymer.StyleUtil,c=Polymer.CssParse,e=Polymer.StyleDefaults,f=Polymer.StyleTransformer,g=Polymer.ApplyShim,h=Polymer.Debounce,l=Polymer.Settings,n;Polymer({is:"custom-style",extends:"style",_template:null,properties:{include:String},ready:function(){this.__appliedElement=this.__appliedElement||this;this.__cssBuild=b.getCssBuildType(this);this.__appliedElement!==this&&(this.__appliedElement.__cssBuild=this.__cssBuild);this.ownerDocument!==window.document&&
this.__appliedElement===this&&document.head.appendChild(this);this._tryApply()},attached:function(){this._tryApply()},_tryApply:function(){if(!this._appliesToDocument&&this.parentNode&&"dom-module"!==this.parentNode.localName){this._appliesToDocument=!0;var m=this.__appliedElement;l.useNativeCSSProperties||(this.__needsUpdateStyles=e.hasStyleProperties(),e.addStyle(m));if(m.textContent||this.include)this._apply(!0);else{var q=this,r=new MutationObserver(function(){r.disconnect();q._apply(!0)});r.observe(m,
{childList:!0})}}},_updateStyles:function(){Polymer.updateStyles()},_apply:function(m){var q=this.__appliedElement;this.include&&(q.textContent=b.cssFromModules(this.include,!0)+q.textContent);if(q.textContent){var r=this.__cssBuild,v=b.isTargetedBuild(r);if(!l.useNativeCSSProperties||!v){var u=b.rulesForStyle(q);v||(b.forEachRule(u,function(z){f.documentRule(z)}),l.useNativeCSSProperties&&!r&&g.transform([q]));if(l.useNativeCSSProperties)q.textContent=b.toCssText(u);else{var w=this;q=function(){w._flushCustomProperties()};
m?Polymer.RenderStatus.whenReady(q):q()}}}},_flushCustomProperties:function(){this.__needsUpdateStyles?(this.__needsUpdateStyles=!1,n=h(n,this._updateStyles)):this._applyCustomProperties()},_applyCustomProperties:function(){var m=this.__appliedElement;this._computeStyleProperties();var q=this._styleProperties,r=b.rulesForStyle(m);r&&(m.textContent=b.toCssText(r,function(v){var u=v.cssText=v.parsedCssText;v.propertyInfo&&v.propertyInfo.cssText&&(u=c.removeCustomPropAssignment(u),v.cssText=a.valueForProperties(u,
q))}))}})})();
Polymer.Templatizer={properties:{__hideTemplateChildren__:{observer:"_showHideChildren"}},_instanceProps:Polymer.nob,_parentPropPrefix:"_parent_",templatize:function(a){this._templatized=a;a._content||(a._content=a.content);if(a._content._ctor)this.ctor=a._content._ctor,this._prepParentProperties(this.ctor.prototype,a);else{var b=Object.create(Polymer.Base);this._customPrepAnnotations(b,a);this._prepParentProperties(b,a);b._prepEffects();this._customPrepEffects(b);b._prepBehaviors();b._prepPropertyInfo();
b._prepBindings();b._notifyPathUp=this._notifyPathUpImpl;b._scopeElementClass=this._scopeElementClassImpl;b.listen=this._listenImpl;b._showHideChildren=this._showHideChildrenImpl;b.__setPropertyOrig=this.__setProperty;b.__setProperty=this.__setPropertyImpl;var c=this._constructorImpl,e=function(f,g){c.call(this,f,g)};e.prototype=b;b.constructor=e;this.ctor=a._content._ctor=e}},_getRootDataHost:function(){return this.dataHost&&this.dataHost._rootDataHost||this.dataHost},_showHideChildrenImpl:function(a){for(var b=
this._children,c=0;c<b.length;c++){var e=b[c];!!a!=!!e.__hideTemplateChildren__&&(e.nodeType===Node.TEXT_NODE?a?(e.__polymerTextContent__=e.textContent,e.textContent=""):e.textContent=e.__polymerTextContent__:e.style&&(a?(e.__polymerDisplay__=e.style.display,e.style.display="none"):e.style.display=e.__polymerDisplay__));e.__hideTemplateChildren__=a}},__setPropertyImpl:function(a,b,c,e){e&&e.__hideTemplateChildren__&&"textContent"==a&&(a="__polymerTextContent__");this.__setPropertyOrig(a,b,c,e)},_debounceTemplate:function(a){Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",
a))},_flushTemplates:function(){Polymer.dom.flush()},_customPrepEffects:function(a){var b=a._parentProps,c;for(c in b)a._addPropertyEffect(c,"function",this._createHostPropEffector(c));for(c in this._instanceProps)a._addPropertyEffect(c,"function",this._createInstancePropEffector(c))},_customPrepAnnotations:function(a,b){var c=(a._template=document.createElement("template"))._content=b._content;if(!c._notes){var e=a._rootDataHost;e&&(Polymer.Annotations.prepElement=function(){e._prepElement()});c._notes=
Polymer.Annotations.parseAnnotations(b);Polymer.Annotations.prepElement=null;this._processAnnotations(c._notes)}a._notes=c._notes;a._parentProps=c._parentProps},_prepParentProperties:function(a,b){var c=this._parentProps=a._parentProps;if(this._forwardParentProp&&c){var e=a._parentPropProto,f;if(!e){for(f in this._instanceProps)delete c[f];e=a._parentPropProto=Object.create(null);b!=this&&(Polymer.Bind.prepareModel(e),Polymer.Base.prepareModelNotifyPath(e));for(f in c)a=this._parentPropPrefix+f,c=
[{kind:"function",effect:this._createForwardPropEffector(f),fn:Polymer.Bind._functionEffect},{kind:"notify",fn:Polymer.Bind._notifyEffect,effect:{event:Polymer.CaseMap.camelToDashCase(a)+"-changed"}}],e._propertyEffects=e._propertyEffects||{},e._propertyEffects[a]=c,Polymer.Bind._createAccessors(e,a,c)}var g=this;b!=this&&(Polymer.Bind.prepareInstance(b),b._forwardParentProp=function(h,l){g._forwardParentProp(h,l)});this._extendTemplate(b,e);b._pathEffector=function(h,l,n){return g._pathEffectorImpl(h,
l,n)}}},_createForwardPropEffector:function(a){return function(b,c){this._forwardParentProp(a,c)}},_createHostPropEffector:function(a){var b=this._parentPropPrefix;return function(c,e){this.dataHost._templatized[b+a]=e}},_createInstancePropEffector:function(a){return function(b,c,e,f){f||this.dataHost._forwardInstanceProp(this,a,c)}},_extendTemplate:function(a,b){var c=Object.getOwnPropertyNames(b);b._propertySetter&&(a._propertySetter=b._propertySetter);for(var e=0,f;e<c.length&&(f=c[e]);e++){var g=
a[f];if(g&&"_propertyEffects"==f)g=Polymer.Base.mixin({},g),a._propertyEffects=Polymer.Base.mixin(g,b._propertyEffects);else{var h=Object.getOwnPropertyDescriptor(b,f);Object.defineProperty(a,f,h);void 0!==g&&a._propertySetter(f,g)}}},_showHideChildren:function(){},_forwardInstancePath:function(){},_forwardInstanceProp:function(){},_notifyPathUpImpl:function(a,b){var c=this.dataHost,e=Polymer.Path.root(a);c._forwardInstancePath.call(c,this,a,b);e in c._parentProps&&c._templatized._notifyPath(c._parentPropPrefix+
a,b)},_pathEffectorImpl:function(a,b,c){if(this._forwardParentPath&&0===a.indexOf(this._parentPropPrefix)){var e=a.substring(this._parentPropPrefix.length);Polymer.Path.root(e)in this._parentProps&&this._forwardParentPath(e,b)}Polymer.Base._pathEffector.call(this._templatized,a,b,c)},_constructorImpl:function(a,b){this._rootDataHost=b._getRootDataHost();this._setupConfigure(a);this._registerHost(b);this._beginHosting();this.root=this.instanceTemplate(this._template);this.root.__noContent=!this._notes._hasContent;
this.root.__styleScoped=!0;this._endHosting();this._marshalAnnotatedNodes();this._marshalInstanceEffects();this._marshalAnnotatedListeners();a=[];for(var c=this.root.firstChild;c;c=c.nextSibling)a.push(c),c._templateInstance=this;this._children=a;b.__hideTemplateChildren__&&this._showHideChildren(!0);this._tryReady()},_listenImpl:function(a,b,c){var e=this,f=this._rootDataHost,g=f._createEventHandler(a,b,c);f._listen(a,b,function(h){h.model=e;g(h)})},_scopeElementClassImpl:function(a,b){var c=this._rootDataHost;
return c?c._scopeElementClass(a,b):b},stamp:function(a){a=a||{};if(this._parentProps){var b=this._templatized,c;for(c in this._parentProps)void 0===a[c]&&(a[c]=b[this._parentPropPrefix+c])}return new this.ctor(a,this)},modelForElement:function(a){for(var b;a;)if(b=a._templateInstance)if(b.dataHost!=this)a=b.dataHost;else return b;else a=a.parentNode}};Polymer({is:"dom-template",extends:"template",_template:null,behaviors:[Polymer.Templatizer],ready:function(){this.templatize(this)}});
Polymer._collections=new WeakMap;Polymer.Collection=function(a){Polymer._collections.set(a,this);this.userArray=a;this.store=a.slice();this.initMap()};function Dk(a){if(a&&"#"==a[0])return a.slice(1)}function Ek(a,b){b&&"object"==typeof b?a.omap.delete(b):delete a.pmap[b]}
Polymer.Collection.prototype={constructor:Polymer.Collection,initMap:function(){for(var a=this.omap=new WeakMap,b=this.pmap={},c=this.store,e=0;e<c.length;e++){var f=c[e];f&&"object"==typeof f?a.set(f,e):b[f]=e}},add:function(a){var b=this.store.push(a)-1;a&&"object"==typeof a?this.omap.set(a,b):this.pmap[a]=b;return"#"+b},removeKey:function(a){if(a=Dk(a))Ek(this,this.store[a]),delete this.store[a]},remove:function(a){a=this.getKey(a);this.removeKey(a);return a},getKey:function(a){a=a&&"object"==
typeof a?this.omap.get(a):this.pmap[a];if(void 0!=a)return"#"+a},getKeys:function(){return Object.keys(this.store).map(function(a){return"#"+a})},setItem:function(a,b){if(a=Dk(a)){var c=this.store[a];c&&Ek(this,c);b&&"object"==typeof b?this.omap.set(b,a):this.pmap[b]=a;this.store[a]=b}},getItem:function(a){if(a=Dk(a))return this.store[a]},getItems:function(){var a=[],b=this.store,c;for(c in b)a.push(b[c]);return a}};Polymer.Collection.get=function(a){return Polymer._collections.get(a)||new Polymer.Collection(a)};
Polymer.Collection.applySplices=function(a,b){a=Polymer._collections.get(a);if(a){for(var c={},e=0,f;e<b.length&&(f=b[e]);e++){f.addedKeys=[];for(var g=0;g<f.removed.length;g++){var h=a.getKey(f.removed[g]);c[h]=c[h]?null:-1}for(g=0;g<f.addedCount;g++){var l=a.userArray[f.index+g];h=a.getKey(l);h=void 0===h?a.add(l):h;c[h]=c[h]?null:1;f.addedKeys.push(h)}}b=[];f=[];for(h in c)0>c[h]&&(a.removeKey(h),b.push(h)),0<c[h]&&f.push(h);h=[{removed:b,added:f}]}else h=null;return h};
function DomRepeatElement(){}T=DomRepeatElement.prototype;T.ctor=function(){};T.stamp=function(){};T.templatize=function(){};T.modelForElement=function(){};T._debounceTemplate=function(){};T._setRenderedItemCount=function(){};
Polymer({is:"dom-repeat",extends:"template",_template:null,properties:{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},sort:{type:Function,observer:"_sortChanged"},filter:{type:Function,observer:"_filterChanged"},observe:{type:String,observer:"_observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!Polymer.Settings.suppressTemplateNotifications,readOnly:!0},initialCount:{type:Number,observer:"_initializeChunking"},targetFramerate:{type:Number,value:20},
notifyDomChange:{type:Boolean},_targetFrameTime:{type:Number,computed:"_computeFrameTime(targetFramerate)"}},behaviors:[Polymer.Templatizer],observers:["_itemsChanged(items.*)"],created:function(){this._instances=[];this._pool=[];this._limit=Infinity;var a=this;this._boundRenderChunk=function(){a._renderChunk()}},detached:function(){this.__isDetached=!0;for(var a=0;a<this._instances.length;a++)this._detachInstance(a)},attached:function(){if(this.__isDetached){this.__isDetached=!1;var a=Polymer.dom(this).parentNode;
if(a.localName==this.is){var b=a;a=Polymer.dom(a).parentNode}else b=this;a=Polymer.dom(a);for(var c=0;c<this._instances.length;c++)this._attachInstance(c,a,b)}},ready:function(){this._instanceProps={__key__:!0};this._instanceProps[this.as]=!0;this._instanceProps[this.indexAs]=!0;this.ctor||this.templatize(this)},_sortChanged:function(a){var b=this._getRootDataHost();this._sortFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)});this._needFullRefresh=!0;this.items&&this._debounceTemplate(this._render)},
_filterChanged:function(a){var b=this._getRootDataHost();this._filterFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)});this._needFullRefresh=!0;this.items&&this._debounceTemplate(this._render)},_computeFrameTime:function(a){return Math.ceil(1E3/a)},_initializeChunking:function(){this.initialCount&&(this._chunkCount=this._limit=this.initialCount,this._lastChunkTime=performance.now())},_tryRenderChunk:function(){this.items&&this._limit<this.items.length&&this.debounce("renderChunk",
this._requestRenderChunk)},_requestRenderChunk:function(){requestAnimationFrame(this._boundRenderChunk)},_renderChunk:function(){var a=performance.now();this._chunkCount=Math.round(this._targetFrameTime/(a-this._lastChunkTime)*this._chunkCount)||1;this._limit+=this._chunkCount;this._lastChunkTime=a;this._debounceTemplate(this._render)},_observeChanged:function(){this._observePaths=this.observe&&this.observe.replace(".*",".").split(" ")},_itemsChanged:function(a){if("items"==a.path)Array.isArray(this.items)?
this.collection=Polymer.Collection.get(this.items):this.items?this._error(this._logf("dom-repeat","expected array for `items`, found",this.items)):this.collection=null,this._keySplices=[],this._indexSplices=[],this._needFullRefresh=!0,this._initializeChunking(),this._debounceTemplate(this._render);else if("items.splices"==a.path)this._keySplices=this._keySplices.concat(a.value.keySplices),this._indexSplices=this._indexSplices.concat(a.value.indexSplices),this._debounceTemplate(this._render);else{var b=
a.path.slice(6);this._forwardItemPath(b,a.value);this._checkObservedPaths(b)}},_checkObservedPaths:function(a){if(this._observePaths){a=a.substring(a.indexOf(".")+1);for(var b=this._observePaths,c=0;c<b.length;c++)if(0===a.indexOf(b[c])){this._needFullRefresh=!0;this.delay?this.debounce("render",this._render,this.delay):this._debounceTemplate(this._render);break}}},render:function(){this._needFullRefresh=!0;this._debounceTemplate(this._render);this._flushTemplates()},_render:function(){this._needFullRefresh?
(this._applyFullRefresh(),this._needFullRefresh=!1):this._keySplices.length&&(this._sortFn?this._applySplicesUserSort(this._keySplices):this._filterFn?this._applyFullRefresh():this._applySplicesArrayOrder(this._indexSplices));this._keySplices=[];this._indexSplices=[];for(var a=this._keyToInstIdx={},b=this._instances.length-1;0<=b;b--){var c=this._instances[b];c.isPlaceholder&&b<this._limit?c=this._insertInstance(b,c.__key__):!c.isPlaceholder&&b>=this._limit&&(c=this._downgradeInstance(b,c.__key__));
a[c.__key__]=b;c.isPlaceholder||c.__setProperty(this.indexAs,b,!0)}this._pool.length=0;this._setRenderedItemCount(this._instances.length);Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change");this._tryRenderChunk()},_applyFullRefresh:function(){var a=this.collection;if(this._sortFn)var b=a?a.getKeys():[];else{b=[];var c=this.items;if(c)for(var e=0;e<c.length;e++)b.push(a.getKey(c[e]))}var f=this;this._filterFn&&(b=b.filter(function(h){return f._filterFn(a.getItem(h))}));
this._sortFn&&b.sort(function(h,l){return f._sortFn(a.getItem(h),a.getItem(l))});for(e=0;e<b.length;e++){c=b[e];var g=this._instances[e];g?(g.__key__=c,!g.isPlaceholder&&e<this._limit&&g.__setProperty(this.as,a.getItem(c),!0)):e<this._limit?this._insertInstance(e,c):this._insertPlaceholder(e,c)}for(b=this._instances.length-1;b>=e;b--)this._detachAndRemoveInstance(b)},_numericSort:function(a,b){return a-b},_applySplicesUserSort:function(a){for(var b=this.collection,c={},e,f=0,g;f<a.length&&(g=a[f]);f++){for(var h=
0;h<g.removed.length;h++)e=g.removed[h],c[e]=c[e]?null:-1;for(h=0;h<g.added.length;h++)e=g.added[h],c[e]=c[e]?null:1}g=[];a=[];for(e in c)-1===c[e]&&g.push(this._keyToInstIdx[e]),1===c[e]&&a.push(e);if(g.length)for(g.sort(this._numericSort),f=g.length-1;0<=f;f--)c=g[f],void 0!==c&&this._detachAndRemoveInstance(c);var l=this;if(a.length)for(this._filterFn&&(a=a.filter(function(n){return l._filterFn(b.getItem(n))})),a.sort(function(n,m){return l._sortFn(b.getItem(n),b.getItem(m))}),f=c=0;f<a.length;f++)c=
this._insertRowUserSort(c,a[f])},_insertRowUserSort:function(a,b){for(var c=this.collection,e=c.getItem(b),f=this._instances.length-1,g=-1;a<=f;){var h=a+f>>1,l=this._sortFn(c.getItem(this._instances[h].__key__),e);if(0>l)a=h+1;else if(0<l)f=h-1;else{g=h;break}}0>g&&(g=f+1);this._insertPlaceholder(g,b);return g},_applySplicesArrayOrder:function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++){for(var e=0;e<c.removed.length;e++)this._detachAndRemoveInstance(c.index);for(e=0;e<c.addedKeys.length;e++)this._insertPlaceholder(c.index+
e,c.addedKeys[e])}},_detachInstance:function(a){a=this._instances[a];if(!a.isPlaceholder){for(var b=0;b<a._children.length;b++){var c=a._children[b];Polymer.dom(a.root).appendChild(c)}return a}},_attachInstance:function(a,b,c){a=this._instances[a];a.isPlaceholder||b.insertBefore(a.root,c)},_detachAndRemoveInstance:function(a){var b=this._detachInstance(a);b&&this._pool.push(b);this._instances.splice(a,1)},_insertPlaceholder:function(a,b){this._instances.splice(a,0,{isPlaceholder:!0,__key__:b})},_stampInstance:function(a,
b){var c={__key__:b};c[this.as]=this.collection.getItem(b);c[this.indexAs]=a;return this.stamp(c)},_insertInstance:function(a,b){var c=this._pool.pop();c?(c.__setProperty(this.as,this.collection.getItem(b),!0),c.__setProperty("__key__",b,!0)):c=this._stampInstance(a,b);b=(b=this._instances[a+1])&&!b.isPlaceholder?b._children[0]:this;var e=Polymer.dom(this).parentNode;e.localName==this.is&&(b==this&&(b=e),e=Polymer.dom(e).parentNode);Polymer.dom(e).insertBefore(c.root,b);return this._instances[a]=
c},_downgradeInstance:function(a,b){var c=this._detachInstance(a);c&&this._pool.push(c);c={isPlaceholder:!0,__key__:b};return this._instances[a]=c},_showHideChildren:function(a){for(var b=0;b<this._instances.length;b++)this._instances[b].isPlaceholder||this._instances[b]._showHideChildren(a)},_forwardInstanceProp:function(a,b,c){b==this.as&&(a=this._sortFn||this._filterFn?this.items.indexOf(this.collection.getItem(a.__key__)):a[this.indexAs],this.set("items."+a,c))},_forwardInstancePath:function(a,
b,c){0===b.indexOf(this.as+".")&&this._notifyPath("items."+a.__key__+"."+b.slice(this.as.length+1),c)},_forwardParentProp:function(a,b){for(var c=this._instances,e=0,f;e<c.length&&(f=c[e]);e++)f.isPlaceholder||f.__setProperty(a,b,!0)},_forwardParentPath:function(a,b){for(var c=this._instances,e=0,f;e<c.length&&(f=c[e]);e++)f.isPlaceholder||f._notifyPath(a,b,!0)},_forwardItemPath:function(a,b){if(this._keyToInstIdx){var c=a.indexOf("."),e=this._instances[this._keyToInstIdx[a.substring(0,0>c?a.length:
c)]];e&&!e.isPlaceholder&&(0<=c?(a=this.as+"."+a.substring(c+1),e._notifyPath(a,b,!0)):e.__setProperty(this.as,b,!0))}},itemForElement:function(a){return(a=this.modelForElement(a))&&a[this.as]},keyForElement:function(a){return(a=this.modelForElement(a))&&a.__key__},indexForElement:function(a){return(a=this.modelForElement(a))&&a[this.indexAs]}});
Polymer({is:"array-selector",_template:null,properties:{items:{type:Array,observer:"clearSelection"},multi:{type:Boolean,value:!1,observer:"clearSelection"},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}},clearSelection:function(){if(Array.isArray(this.selected))for(var a=0;a<this.selected.length;a++)this.unlinkPaths("selected."+a);else this.unlinkPaths("selected"),this.unlinkPaths("selectedItem");if(this.multi){if(!this.selected||this.selected.length)this.selected=
[],this._selectedColl=Polymer.Collection.get(this.selected)}else this._selectedColl=this.selected=null;this.selectedItem=null},isSelected:function(a){return this.multi?void 0!==this._selectedColl.getKey(a):this.selected==a},deselect:function(a){if(this.multi){if(this.isSelected(a)){var b=this._selectedColl.getKey(a);this.arrayDelete("selected",a);this.unlinkPaths("selected."+b)}}else this.selectedItem=this.selected=null,this.unlinkPaths("selected"),this.unlinkPaths("selectedItem")},select:function(a){var b=
Polymer.Collection.get(this.items).getKey(a);this.multi?this.isSelected(a)?this.toggle&&this.deselect(a):(this.push("selected",a),a=this._selectedColl.getKey(a),this.linkPaths("selected."+a,"items."+b)):this.toggle&&a==this.selected?this.deselect():(this.selectedItem=this.selected=a,this.linkPaths("selected","items."+b),this.linkPaths("selectedItem","items."+b))}});
Polymer({is:"dom-if",extends:"template",_template:null,properties:{"if":{type:Boolean,value:!1,observer:"_queueRender"},restamp:{type:Boolean,value:!1,observer:"_queueRender"},notifyDomChange:{type:Boolean}},behaviors:[Polymer.Templatizer],_queueRender:function(){this._debounceTemplate(this._render)},detached:function(){var a=this.parentNode;a&&a.localName==this.is&&(a=Polymer.dom(a).parentNode);a&&(a.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Polymer.Settings.hasShadow&&a instanceof ShadowRoot)||this._teardownInstance()},
attached:function(){this.if&&this.ctor&&this.async(this._ensureInstance)},render:function(){this._flushTemplates()},_render:function(){this.if?(this.ctor||this.templatize(this),this._ensureInstance(),this._showHideChildren()):this.restamp&&this._teardownInstance();!this.restamp&&this._instance&&this._showHideChildren();this.if!=this._lastIf&&(Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change"),this._lastIf=this.if)},_ensureInstance:function(){var a=Polymer.dom(this).parentNode;
if(a&&a.localName==this.is){var b=a;a=Polymer.dom(a).parentNode}else b=this;if(a)if(this._instance){var c=this._instance._children;if(c&&c.length&&Polymer.dom(b).previousSibling!==c[c.length-1])for(var e=0,f;e<c.length&&(f=c[e]);e++)Polymer.dom(a).insertBefore(f,b)}else this._instance=this.stamp(),c=this._instance.root,Polymer.dom(a).insertBefore(c,b)},_teardownInstance:function(){if(this._instance){var a=this._instance._children;if(a&&a.length)for(var b=Polymer.dom(Polymer.dom(a[0]).parentNode),
c=0,e;c<a.length&&(e=a[c]);c++)b.removeChild(e);this._instance=null}},_showHideChildren:function(){var a=this.__hideTemplateChildren__||!this.if;this._instance&&this._instance._showHideChildren(a)},_forwardParentProp:function(a,b){this._instance&&this._instance.__setProperty(a,b,!0)},_forwardParentPath:function(a,b){this._instance&&this._instance._notifyPath(a,b,!0)}});
Polymer({is:"dom-bind",properties:{notifyDomChange:{type:Boolean}},extends:"template",_template:null,created:function(){var a=this;Polymer.RenderStatus.whenReady(function(){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function(){a._markImportsReady()}):a._markImportsReady()})},_ensureReady:function(){this._readied||this._readySelf()},_markImportsReady:function(){this._importsReady=!0;this._ensureReady()},_registerFeatures:function(){this._prepConstructor()},_insertChildren:function(){var a=
Polymer.dom(this).parentNode;if(a.localName==this.is){var b=a;a=Polymer.dom(a).parentNode}else b=this;Polymer.dom(a).insertBefore(this.root,b)},_removeChildren:function(){if(this._children)for(var a=0;a<this._children.length;a++)this.root.appendChild(this._children[a])},_initFeatures:function(){},_scopeElementClass:function(a,b){return this.dataHost?this.dataHost._scopeElementClass(a,b):b},_configureInstanceProperties:function(){},_prepConfigure:function(){var a={},b;for(b in this._propertyEffects)a[b]=
this[b];var c=this._setupConfigure;this._setupConfigure=function(){c.call(this,a)}},attached:function(){this._importsReady&&this.render()},detached:function(){this._removeChildren()},render:function(){this._ensureReady();this._children||(this._template=this,this._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepConfigure(),this._prepBindings(),this._prepPropertyInfo(),Polymer.Base._initFeatures.call(this),this._children=Polymer.TreeApi.arrayCopyChildNodes(this.root));this._insertChildren();
Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change")}});
</script>













<script>//~~WEBPATH~~/iron-flex-layout/iron-flex-layout.html.js
var Fk=document.createElement("style");Fk.textContent="[hidden] { display: none !important; }";document.head.appendChild(Fk);
</script>
<custom-style>
  <style is="custom-style">
    [hidden] {
      display: none !important;
    }
  </style>
</custom-style>

<custom-style>
  <style is="custom-style">
    html {

      --layout: {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
      };

      --layout-inline: {
        display: -ms-inline-flexbox;
        display: -webkit-inline-flex;
        display: inline-flex;
      };

      --layout-horizontal: {
        @apply --layout;

        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
      };

      --layout-horizontal-reverse: {
        @apply --layout;

        -ms-flex-direction: row-reverse;
        -webkit-flex-direction: row-reverse;
        flex-direction: row-reverse;
      };

      --layout-vertical: {
        @apply --layout;

        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      };

      --layout-vertical-reverse: {
        @apply --layout;

        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      };

      --layout-wrap: {
        -ms-flex-wrap: wrap;
        -webkit-flex-wrap: wrap;
        flex-wrap: wrap;
      };

      --layout-wrap-reverse: {
        -ms-flex-wrap: wrap-reverse;
        -webkit-flex-wrap: wrap-reverse;
        flex-wrap: wrap-reverse;
      };

      --layout-flex-auto: {
        -ms-flex: 1 1 auto;
        -webkit-flex: 1 1 auto;
        flex: 1 1 auto;
      };

      --layout-flex-none: {
        -ms-flex: none;
        -webkit-flex: none;
        flex: none;
      };

      --layout-flex: {
        -ms-flex: 1 1 0.000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: 0.000000001px;
        flex-basis: 0.000000001px;
      };

      --layout-flex-2: {
        -ms-flex: 2;
        -webkit-flex: 2;
        flex: 2;
      };

      --layout-flex-3: {
        -ms-flex: 3;
        -webkit-flex: 3;
        flex: 3;
      };

      --layout-flex-4: {
        -ms-flex: 4;
        -webkit-flex: 4;
        flex: 4;
      };

      --layout-flex-5: {
        -ms-flex: 5;
        -webkit-flex: 5;
        flex: 5;
      };

      --layout-flex-6: {
        -ms-flex: 6;
        -webkit-flex: 6;
        flex: 6;
      };

      --layout-flex-7: {
        -ms-flex: 7;
        -webkit-flex: 7;
        flex: 7;
      };

      --layout-flex-8: {
        -ms-flex: 8;
        -webkit-flex: 8;
        flex: 8;
      };

      --layout-flex-9: {
        -ms-flex: 9;
        -webkit-flex: 9;
        flex: 9;
      };

      --layout-flex-10: {
        -ms-flex: 10;
        -webkit-flex: 10;
        flex: 10;
      };

      --layout-flex-11: {
        -ms-flex: 11;
        -webkit-flex: 11;
        flex: 11;
      };

      --layout-flex-12: {
        -ms-flex: 12;
        -webkit-flex: 12;
        flex: 12;
      };

      /* alignment in cross axis */

      --layout-start: {
        -ms-flex-align: start;
        -webkit-align-items: flex-start;
        align-items: flex-start;
      };

      --layout-center: {
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      };

      --layout-end: {
        -ms-flex-align: end;
        -webkit-align-items: flex-end;
        align-items: flex-end;
      };

      --layout-baseline: {
        -ms-flex-align: baseline;
        -webkit-align-items: baseline;
        align-items: baseline;
      };

      /* alignment in main axis */

      --layout-start-justified: {
        -ms-flex-pack: start;
        -webkit-justify-content: flex-start;
        justify-content: flex-start;
      };

      --layout-center-justified: {
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
      };

      --layout-end-justified: {
        -ms-flex-pack: end;
        -webkit-justify-content: flex-end;
        justify-content: flex-end;
      };

      --layout-around-justified: {
        -ms-flex-pack: distribute;
        -webkit-justify-content: space-around;
        justify-content: space-around;
      };

      --layout-justified: {
        -ms-flex-pack: justify;
        -webkit-justify-content: space-between;
        justify-content: space-between;
      };

      --layout-center-center: {
        @apply --layout-center;
        @apply --layout-center-justified;
      };

      /* self alignment */

      --layout-self-start: {
        -ms-align-self: flex-start;
        -webkit-align-self: flex-start;
        align-self: flex-start;
      };

      --layout-self-center: {
        -ms-align-self: center;
        -webkit-align-self: center;
        align-self: center;
      };

      --layout-self-end: {
        -ms-align-self: flex-end;
        -webkit-align-self: flex-end;
        align-self: flex-end;
      };

      --layout-self-stretch: {
        -ms-align-self: stretch;
        -webkit-align-self: stretch;
        align-self: stretch;
      };

      --layout-self-baseline: {
        -ms-align-self: baseline;
        -webkit-align-self: baseline;
        align-self: baseline;
      };

      /* multi-line alignment in main axis */

      --layout-start-aligned: {
        -ms-flex-line-pack: start;  /* IE10 */
        -ms-align-content: flex-start;
        -webkit-align-content: flex-start;
        align-content: flex-start;
      };

      --layout-end-aligned: {
        -ms-flex-line-pack: end;  /* IE10 */
        -ms-align-content: flex-end;
        -webkit-align-content: flex-end;
        align-content: flex-end;
      };

      --layout-center-aligned: {
        -ms-flex-line-pack: center;  /* IE10 */
        -ms-align-content: center;
        -webkit-align-content: center;
        align-content: center;
      };

      --layout-between-aligned: {
        -ms-flex-line-pack: justify;  /* IE10 */
        -ms-align-content: space-between;
        -webkit-align-content: space-between;
        align-content: space-between;
      };

      --layout-around-aligned: {
        -ms-flex-line-pack: distribute;  /* IE10 */
        -ms-align-content: space-around;
        -webkit-align-content: space-around;
        align-content: space-around;
      };

      /*******************************
                Other Layout
      *******************************/

      --layout-block: {
        display: block;
      };

      --layout-invisible: {
        visibility: hidden !important;
      };

      --layout-relative: {
        position: relative;
      };

      --layout-fit: {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-scroll: {
        -webkit-overflow-scrolling: touch;
        overflow: auto;
      };

      --layout-fullbleed: {
        margin: 0;
        height: 100vh;
      };

      /* fixed position */

      --layout-fixed-top: {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
      };

      --layout-fixed-right: {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
      };

      --layout-fixed-bottom: {
        position: fixed;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-fixed-left: {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
      };

    }
  </style>
</custom-style>





<script>//~~WEBPATH~~/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html.js
(function(){function a(v,u){var w="";if(v)if(v=v.toLowerCase()," "===v||q.test(v))w="space";else if(r.test(v))w="esc";else if(1==v.length){if(!u||l.test(v))w=v}else w=m.test(v)?v.replace("arrow",""):"multiply"==v?"*":v;return w}function b(v,u){var w=v.hasModifiers;if(u.key)w=a(u.key,w);else if(u.detail&&u.detail.key)w=a(u.detail.key,w);else{w=u.keyIdentifier;var z="";w&&(w in f?z=f[w]:n.test(w)?(w=parseInt(w.replace("U+","0x"),16),z=String.fromCharCode(w).toLowerCase()):z=w.toLowerCase());(w=z)||
(w=u.keyCode,z="",Number(w)&&(z=65<=w&&90>=w?String.fromCharCode(32+w):112<=w&&123>=w?"f"+(w-112+1):48<=w&&57>=w?String(w-48):96<=w&&105>=w?String(w-96):g[w]),w=z);w=w||""}return w===v.key&&(!v.hasModifiers||!!u.shiftKey===!!v.shiftKey&&!!u.ctrlKey===!!v.ctrlKey&&!!u.altKey===!!v.altKey&&!!u.metaKey===!!v.metaKey)}function c(v){return 1===v.length?{combo:v,key:v,event:"keydown"}:v.split("+").reduce(function(u,w){var z=w.split(":");w=z[0];z=z[1];w in h?(u[h[w]]=!0,u.hasModifiers=!0):(u.key=w,u.event=
z||"keydown");return u},{combo:v.split(":").shift()})}function e(v){return v.trim().split(" ").map(function(u){return c(u)})}var f={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},g={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},h={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},l=/[a-z0-9*]/,n=/U\+/,m=/^arrow/,q=/^space(bar)?/,r=/^escape$/;
Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},
addOwnKeyBinding:function(v,u){this._imperativeKeyBindings[v]=u;this._prepKeyBindings();this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={};this._prepKeyBindings();this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(v,u){u=e(u);for(var w=0;w<u.length;++w)if(b(u[w],v))return!0;return!1},_collectKeyBindings:function(){var v=this.behaviors.map(function(u){return u.keyBindings});-1===v.indexOf(this.keyBindings)&&v.push(this.keyBindings);return v},
_prepKeyBindings:function(){this._keyBindings={};this._collectKeyBindings().forEach(function(w){for(var z in w)this._addKeyBinding(z,w[z])},this);for(var v in this._imperativeKeyBindings)this._addKeyBinding(v,this._imperativeKeyBindings[v]);for(var u in this._keyBindings)this._keyBindings[u].sort(function(w,z){w=w[0].hasModifiers;return w===z[0].hasModifiers?0:w?-1:1})},_addKeyBinding:function(v,u){e(v).forEach(function(w){this._keyBindings[w.event]=this._keyBindings[w.event]||[];this._keyBindings[w.event].push([w,
u])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners();this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(v){var u=this._onKeyBindingEvent.bind(this,this._keyBindings[v]);this._boundKeyHandlers.push([this.keyEventTarget,v,u]);this.keyEventTarget.addEventListener(v,u)},this)},_unlistenKeyEventListeners:function(){for(var v,u,w;this._boundKeyHandlers.length;)v=this._boundKeyHandlers.pop(),
u=v[0],w=v[1],v=v[2],u.removeEventListener(w,v)},_onKeyBindingEvent:function(v,u){this.stopKeyboardEventPropagation&&u.stopPropagation();if(!u.defaultPrevented)for(var w=0;w<v.length;w++){var z=v[w][0],A=v[w][1];if(b(z,u)&&(this._triggerKeyHandler(z,A,u),u.defaultPrevented))break}},_triggerKeyHandler:function(v,u,w){var z=Object.create(v);z.keyboardEvent=w;v=new CustomEvent(v.event,{detail:z,cancelable:!0});this[u].call(this,v);v.defaultPrevented&&w.preventDefault()}}})();
</script>



<script>//~~WEBPATH~~/iron-behaviors/iron-control-state.html.js
Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:String},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}},__handleEventRetargeting:{type:Boolean,value:function(){return!this.shadowRoot&&!Polymer.Element}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",
this._boundFocusBlurHandler,!0);this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(a){if(Polymer.Element)this._setFocused("focus"===a.type);else if(a.target===this)this._setFocused("focus"===a.type);else if(this.__handleEventRetargeting){var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}},_disabledChanged:function(a){this.setAttribute("aria-disabled",a?"true":"false");
this.style.pointerEvents=a?"none":"";a?(this._oldTabIndex=this.getAttribute("tabindex"),this._setFocused(!1),this.tabIndex=-1,this.blur()):void 0!==this._oldTabIndex&&(null===this._oldTabIndex?this.removeAttribute("tabindex"):this.setAttribute("tabindex",this._oldTabIndex))},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}};
</script>


<script>//~~WEBPATH~~/iron-behaviors/iron-button-state.html.js
Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},
observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(a){this._detectKeyboardFocus(a);a||this._setPressed(!1)},_detectKeyboardFocus:function(a){this._setReceivedFocusFromKeyboard(!this.pointerDown&&a)},_userActivate:function(a){this.active!==
a&&(this.active=a,this.fire("change"))},_downHandler:function(){this._setPointerDown(!0);this._setPressed(!0);this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1);this._setPressed(!1)},_spaceKeyDownHandler:function(a){a=a.detail.keyboardEvent;var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||(a.preventDefault(),a.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(a){a=Polymer.dom(a.detail.keyboardEvent).localTarget;this.isLightDescendant(a)||
(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(){this._changedButtonState()},_ariaActiveAttributeChanged:function(a,b){b&&b!=a&&this.hasAttribute(b)&&this.removeAttribute(b)},_activeChanged:function(a){this.toggles?this.setAttribute(this.ariaActiveAttribute,a?"true":"false"):this.removeAttribute(this.ariaActiveAttribute);this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):
this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}};Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl];
</script>








<dom-module id="paper-ripple">

  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        border-radius: inherit;
        overflow: hidden;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;

        /* See PolymerElements/paper-behaviors/issues/34. On non-Chrome browsers,
         * creating a node (with a position:absolute) in the middle of an event
         * handler "interrupts" that event handler (which happens when the
         * ripple is created on demand) */
        pointer-events: none;
      }

      :host([animating]) {
        /* This resolves a rendering issue in Chrome (as of 40) where the
           ripple is not properly clipped by its parent (which may have
           rounded corners). See: http://jsbin.com/temexa/4

           Note: We only apply this style conditionally. Otherwise, the browser
           will create a new compositing layer for every ripple element on the
           page, and that would be bad. */
        -webkit-transform: translate(0, 0);
        transform: translate3d(0, 0, 0);
      }

      #background,
      #waves,
      .wave-container,
      .wave {
        pointer-events: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      #background,
      .wave {
        opacity: 0;
      }

      #waves,
      .wave {
        overflow: hidden;
      }

      .wave-container,
      .wave {
        border-radius: 50%;
      }

      :host(.circle) #background,
      :host(.circle) #waves {
        border-radius: 50%;
      }

      :host(.circle) .wave-container {
        overflow: hidden;
      }
    </style>

    <div id="background"></div>
    <div id="waves"></div>
  </template>
</dom-module>
<script>//~~WEBPATH~~/paper-ripple/paper-ripple.html.js
(function(){function a(e){this.element=e;this.width=this.boundingRect.width;this.height=this.boundingRect.height;this.size=Math.max(this.width,this.height)}function b(e){this.element=e;this.color=window.getComputedStyle(e).color;this.wave=document.createElement("div");this.waveContainer=document.createElement("div");this.wave.style.backgroundColor=this.color;this.wave.classList.add("wave");this.waveContainer.classList.add("wave-container");Polymer.dom(this.waveContainer).appendChild(this.wave);this.resetInteractionState()}
var c={distance:function(e,f,g,h){e-=g;f-=h;return Math.sqrt(e*e+f*f)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};a.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(e,f){var g=c.distance(e,f,0,0),h=c.distance(e,f,this.width,0),l=c.distance(e,f,0,this.height);e=c.distance(e,f,this.width,this.height);return Math.max(g,h,l,e)}};b.MAX_RADIUS=300;b.prototype={get recenters(){return this.element.recenters},
get center(){return this.element.center},get mouseDownElapsed(){if(!this.mouseDownStart)return 0;var e=c.now()-this.mouseDownStart;this.mouseUpStart&&(e-=this.mouseUpElapsed);return e},get mouseUpElapsed(){return this.mouseUpStart?c.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1E3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1E3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},
get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var e=1.1*Math.min(Math.sqrt(this.containerMetrics.width*this.containerMetrics.width+this.containerMetrics.height*this.containerMetrics.height),b.MAX_RADIUS)+5;return Math.abs(e*(1-Math.pow(80,-(this.mouseInteractionSeconds/(1.1-e/b.MAX_RADIUS*.2)))))},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){return Math.max(0,
Math.min(.3*this.mouseUpElapsedSeconds,this.opacity))},get isOpacityFullyDecayed(){return.01>this.opacity&&this.radius>=Math.min(this.maxRadius,b.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,b.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?
this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.slideDistance=this.yEnd=this.xEnd=this.yStart=this.xStart=this.mouseUpStart=this.mouseDownStart=this.maxRadius=0;this.containerMetrics=new a(this.element)},draw:function(){this.wave.style.opacity=this.opacity;var e=this.radius/
(this.containerMetrics.size/2);var f=this.xNow-this.containerMetrics.width/2;var g=this.yNow-this.containerMetrics.height/2;this.waveContainer.style.webkitTransform="translate("+f+"px, "+g+"px)";this.waveContainer.style.transform="translate3d("+f+"px, "+g+"px, 0)";this.wave.style.webkitTransform="scale("+e+","+e+")";this.wave.style.transform="scale3d("+e+","+e+",1)"},downAction:function(e){var f=this.containerMetrics.width/2,g=this.containerMetrics.height/2;this.resetInteractionState();this.mouseDownStart=
c.now();this.center?(this.xStart=f,this.yStart=g,this.slideDistance=c.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=e?e.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=e?e.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2);this.recenters&&(this.xEnd=f,this.yEnd=g,this.slideDistance=c.distance(this.xStart,this.yStart,this.xEnd,this.yEnd));this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,
this.yStart);this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px";this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px";this.waveContainer.style.width=this.containerMetrics.size+"px";this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(){this.isMouseDown&&(this.mouseUpStart=c.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}};Polymer({is:"paper-ripple",
behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},
get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){var e=this.keyEventTarget=11==this.parentNode.nodeType?Polymer.dom(this).getOwnerRoot().host:this.parentNode;this.listen(e,"up","uiUpAction");this.listen(e,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction");this.unlisten(this.keyEventTarget,"down","uiDownAction");this.keyEventTarget=
null},get shouldKeepAnimating(){for(var e=0;e<this.ripples.length;++e)if(!this.ripples[e].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null);this.async(function(){this.upAction()},1)},uiDownAction:function(e){this.noink||this.downAction(e)},downAction:function(e){this.holdDown&&0<this.ripples.length||(this.addRipple().downAction(e),this._animating||(this._animating=!0,this.animate()))},uiUpAction:function(e){this.noink||this.upAction(e)},upAction:function(e){this.holdDown||
(this.ripples.forEach(function(f){f.upAction(e)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1;this.$.background.style.backgroundColor=null;this.fire("transitionend")},addRipple:function(){var e=new b(this);Polymer.dom(this.$.waves).appendChild(e.waveContainer);this.$.background.style.backgroundColor=e.color;this.ripples.push(e);this._setAnimating(!0);return e},removeRipple:function(e){var f=this.ripples.indexOf(e);0>f||(this.ripples.splice(f,1),e.remove(),
this.ripples.length||this._setAnimating(!1))},animate:function(){if(this._animating){var e;for(e=0;e<this.ripples.length;++e){var f=this.ripples[e];f.draw();this.$.background.style.opacity=f.outerOpacity;f.isOpacityFullyDecayed&&!f.isRestingAtMaxRadius&&this.removeRipple(f)}if(this.shouldKeepAnimating||0!==this.ripples.length)window.requestAnimationFrame(this._boundAnimate);else this.onAnimationComplete()}},_onEnterKeydown:function(){this.uiDownAction();this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},
_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(e,f){void 0!==f&&(e?this.downAction():this.upAction())}})})();
</script>


<script>//~~WEBPATH~~/paper-behaviors/paper-ripple-behavior.html.js
Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a);this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple();this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;b&&Polymer.dom(b).appendChild(this._ripple);if(a){b=
Polymer.dom(this._rippleContainer||this);var c=Polymer.dom(a).rootTarget;b.deepContains(c)&&this._ripple.uiDownAction(a)}}},getRipple:function(){this.ensureRipple();return this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};
</script>


<script>//~~WEBPATH~~/paper-behaviors/paper-button-behavior.html.js
Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var a=1;this.disabled?a=0:this.active||this.pressed?a=4:this.receivedFocusFromKeyboard&&(a=3);this._setElevation(a)},_computeKeyboardClass:function(a){this.toggleClass("keyboard-focus",
a)},_spaceKeyDownHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,a);this.hasRipple()&&1>this.getRipple().ripples.length&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,a);this.hasRipple()&&this._ripple.uiUpAction()}};Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl];
</script>




<custom-style>
  <style is="custom-style">
    html {

      --shadow-transition: {
        transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
      };

      --shadow-none: {
        box-shadow: none;
      };

      /* from http://codepen.io/shyndman/pen/c5394ddf2e8b2a5c9185904b57421cdb */

      --shadow-elevation-2dp: {
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                    0 1px 5px 0 rgba(0, 0, 0, 0.12),
                    0 3px 1px -2px rgba(0, 0, 0, 0.2);
      };

      --shadow-elevation-3dp: {
        box-shadow: 0 3px 4px 0 rgba(0, 0, 0, 0.14),
                    0 1px 8px 0 rgba(0, 0, 0, 0.12),
                    0 3px 3px -2px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-4dp: {
        box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-6dp: {
        box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14),
                    0 1px 18px 0 rgba(0, 0, 0, 0.12),
                    0 3px 5px -1px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-8dp: {
        box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),
                    0 3px 14px 2px rgba(0, 0, 0, 0.12),
                    0 5px 5px -3px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-12dp: {
        box-shadow: 0 12px 16px 1px rgba(0, 0, 0, 0.14),
                    0 4px 22px 3px rgba(0, 0, 0, 0.12),
                    0 6px 7px -4px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-16dp: {
        box-shadow: 0 16px 24px 2px rgba(0, 0, 0, 0.14),
                    0  6px 30px 5px rgba(0, 0, 0, 0.12),
                    0  8px 10px -5px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-24dp: {
        box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14),
                    0 9px 46px 8px rgba(0, 0, 0, 0.12),
                    0 11px 15px -7px rgba(0, 0, 0, 0.4);
      };
    }
  </style>
</custom-style>




<dom-module id="paper-material-styles">
  <template>
    <style>
      :host, html {
        --paper-material: {
          display: block;
          position: relative;
        };
        --paper-material-elevation-1: {
          @apply --shadow-elevation-2dp;
        };
        --paper-material-elevation-2: {
          @apply --shadow-elevation-4dp;
        };
        --paper-material-elevation-3: {
          @apply --shadow-elevation-6dp;
        };
        --paper-material-elevation-4: {
          @apply --shadow-elevation-8dp;
        };
        --paper-material-elevation-5: {
          @apply --shadow-elevation-16dp;
        };
      }
      :host(.paper-material), .paper-material {
        @apply --paper-material;
      }
      :host(.paper-material[elevation="1"]), .paper-material[elevation="1"] {
        @apply --paper-material-elevation-1;
      }
      :host(.paper-material[elevation="2"]), .paper-material[elevation="2"] {
        @apply --paper-material-elevation-2;
      }
      :host(.paper-material[elevation="3"]), .paper-material[elevation="3"] {
        @apply --paper-material-elevation-3;
      }
      :host(.paper-material[elevation="4"]), .paper-material[elevation="4"] {
        @apply --paper-material-elevation-4;
      }
      :host(.paper-material[elevation="5"]), .paper-material[elevation="5"] {
        @apply --paper-material-elevation-5;
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-button">
  <template strip-whitespace>
    <style include="paper-material-styles">
      /* Need to specify the same specificity as the styles imported from paper-material. */
      :host {
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;
        box-sizing: border-box;
        min-width: 5.14em;
        margin: 0 0.29em;
        background: transparent;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;
        font: inherit;
        text-transform: uppercase;
        outline-width: 0;
        border-radius: 3px;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        padding: 0.7em 0.57em;

        @apply --paper-font-common-base;
        @apply --paper-button;
      }

      :host([elevation="1"]) {
        @apply --paper-material-elevation-1;
      }

      :host([elevation="2"]) {
        @apply --paper-material-elevation-2;
      }

      :host([elevation="3"]) {
        @apply --paper-material-elevation-3;
      }

      :host([elevation="4"]) {
        @apply --paper-material-elevation-4;
      }

      :host([elevation="5"]) {
        @apply --paper-material-elevation-5;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host([raised].keyboard-focus) {
        font-weight: bold;
        @apply --paper-button-raised-keyboard-focus;
      }

      :host(:not([raised]).keyboard-focus) {
        font-weight: bold;
        @apply --paper-button-flat-keyboard-focus;
      }

      :host([disabled]) {
        background: #eaeaea;
        color: #a8a8a8;
        cursor: auto;
        pointer-events: none;

        @apply --paper-button-disabled;
      }

      :host([animated]) {
        @apply --shadow-transition;
      }

      paper-ripple {
        color: var(--paper-button-ink-color);
      }
    </style>

    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-button/paper-button.html.js
Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this._setElevation(0)}});
</script>
</dom-module>





<custom-style>
  <style is="custom-style">
    html {

      /* Material Design color palette for Google products */

      --google-red-100: #f4c7c3;
      --google-red-300: #e67c73;
      --google-red-500: #db4437;
      --google-red-700: #c53929;

      --google-blue-100: #c6dafc;
      --google-blue-300: #7baaf7;
      --google-blue-500: #4285f4;
      --google-blue-700: #3367d6;

      --google-green-100: #b7e1cd;
      --google-green-300: #57bb8a;
      --google-green-500: #0f9d58;
      --google-green-700: #0b8043;

      --google-yellow-100: #fce8b2;
      --google-yellow-300: #f7cb4d;
      --google-yellow-500: #f4b400;
      --google-yellow-700: #f09300;

      --google-grey-100: #f5f5f5;
      --google-grey-300: #e0e0e0;
      --google-grey-500: #9e9e9e;
      --google-grey-700: #616161;

      /* Material Design color palette from online spec document */

      --paper-red-50: #ffebee;
      --paper-red-100: #ffcdd2;
      --paper-red-200: #ef9a9a;
      --paper-red-300: #e57373;
      --paper-red-400: #ef5350;
      --paper-red-500: #f44336;
      --paper-red-600: #e53935;
      --paper-red-700: #d32f2f;
      --paper-red-800: #c62828;
      --paper-red-900: #b71c1c;
      --paper-red-a100: #ff8a80;
      --paper-red-a200: #ff5252;
      --paper-red-a400: #ff1744;
      --paper-red-a700: #d50000;

      --paper-pink-50: #fce4ec;
      --paper-pink-100: #f8bbd0;
      --paper-pink-200: #f48fb1;
      --paper-pink-300: #f06292;
      --paper-pink-400: #ec407a;
      --paper-pink-500: #e91e63;
      --paper-pink-600: #d81b60;
      --paper-pink-700: #c2185b;
      --paper-pink-800: #ad1457;
      --paper-pink-900: #880e4f;
      --paper-pink-a100: #ff80ab;
      --paper-pink-a200: #ff4081;
      --paper-pink-a400: #f50057;
      --paper-pink-a700: #c51162;

      --paper-purple-50: #f3e5f5;
      --paper-purple-100: #e1bee7;
      --paper-purple-200: #ce93d8;
      --paper-purple-300: #ba68c8;
      --paper-purple-400: #ab47bc;
      --paper-purple-500: #9c27b0;
      --paper-purple-600: #8e24aa;
      --paper-purple-700: #7b1fa2;
      --paper-purple-800: #6a1b9a;
      --paper-purple-900: #4a148c;
      --paper-purple-a100: #ea80fc;
      --paper-purple-a200: #e040fb;
      --paper-purple-a400: #d500f9;
      --paper-purple-a700: #aa00ff;

      --paper-deep-purple-50: #ede7f6;
      --paper-deep-purple-100: #d1c4e9;
      --paper-deep-purple-200: #b39ddb;
      --paper-deep-purple-300: #9575cd;
      --paper-deep-purple-400: #7e57c2;
      --paper-deep-purple-500: #673ab7;
      --paper-deep-purple-600: #5e35b1;
      --paper-deep-purple-700: #512da8;
      --paper-deep-purple-800: #4527a0;
      --paper-deep-purple-900: #311b92;
      --paper-deep-purple-a100: #b388ff;
      --paper-deep-purple-a200: #7c4dff;
      --paper-deep-purple-a400: #651fff;
      --paper-deep-purple-a700: #6200ea;

      --paper-indigo-50: #e8eaf6;
      --paper-indigo-100: #c5cae9;
      --paper-indigo-200: #9fa8da;
      --paper-indigo-300: #7986cb;
      --paper-indigo-400: #5c6bc0;
      --paper-indigo-500: #3f51b5;
      --paper-indigo-600: #3949ab;
      --paper-indigo-700: #303f9f;
      --paper-indigo-800: #283593;
      --paper-indigo-900: #1a237e;
      --paper-indigo-a100: #8c9eff;
      --paper-indigo-a200: #536dfe;
      --paper-indigo-a400: #3d5afe;
      --paper-indigo-a700: #304ffe;

      --paper-blue-50: #e3f2fd;
      --paper-blue-100: #bbdefb;
      --paper-blue-200: #90caf9;
      --paper-blue-300: #64b5f6;
      --paper-blue-400: #42a5f5;
      --paper-blue-500: #2196f3;
      --paper-blue-600: #1e88e5;
      --paper-blue-700: #1976d2;
      --paper-blue-800: #1565c0;
      --paper-blue-900: #0d47a1;
      --paper-blue-a100: #82b1ff;
      --paper-blue-a200: #448aff;
      --paper-blue-a400: #2979ff;
      --paper-blue-a700: #2962ff;

      --paper-light-blue-50: #e1f5fe;
      --paper-light-blue-100: #b3e5fc;
      --paper-light-blue-200: #81d4fa;
      --paper-light-blue-300: #4fc3f7;
      --paper-light-blue-400: #29b6f6;
      --paper-light-blue-500: #03a9f4;
      --paper-light-blue-600: #039be5;
      --paper-light-blue-700: #0288d1;
      --paper-light-blue-800: #0277bd;
      --paper-light-blue-900: #01579b;
      --paper-light-blue-a100: #80d8ff;
      --paper-light-blue-a200: #40c4ff;
      --paper-light-blue-a400: #00b0ff;
      --paper-light-blue-a700: #0091ea;

      --paper-cyan-50: #e0f7fa;
      --paper-cyan-100: #b2ebf2;
      --paper-cyan-200: #80deea;
      --paper-cyan-300: #4dd0e1;
      --paper-cyan-400: #26c6da;
      --paper-cyan-500: #00bcd4;
      --paper-cyan-600: #00acc1;
      --paper-cyan-700: #0097a7;
      --paper-cyan-800: #00838f;
      --paper-cyan-900: #006064;
      --paper-cyan-a100: #84ffff;
      --paper-cyan-a200: #18ffff;
      --paper-cyan-a400: #00e5ff;
      --paper-cyan-a700: #00b8d4;

      --paper-teal-50: #e0f2f1;
      --paper-teal-100: #b2dfdb;
      --paper-teal-200: #80cbc4;
      --paper-teal-300: #4db6ac;
      --paper-teal-400: #26a69a;
      --paper-teal-500: #009688;
      --paper-teal-600: #00897b;
      --paper-teal-700: #00796b;
      --paper-teal-800: #00695c;
      --paper-teal-900: #004d40;
      --paper-teal-a100: #a7ffeb;
      --paper-teal-a200: #64ffda;
      --paper-teal-a400: #1de9b6;
      --paper-teal-a700: #00bfa5;

      --paper-green-50: #e8f5e9;
      --paper-green-100: #c8e6c9;
      --paper-green-200: #a5d6a7;
      --paper-green-300: #81c784;
      --paper-green-400: #66bb6a;
      --paper-green-500: #4caf50;
      --paper-green-600: #43a047;
      --paper-green-700: #388e3c;
      --paper-green-800: #2e7d32;
      --paper-green-900: #1b5e20;
      --paper-green-a100: #b9f6ca;
      --paper-green-a200: #69f0ae;
      --paper-green-a400: #00e676;
      --paper-green-a700: #00c853;

      --paper-light-green-50: #f1f8e9;
      --paper-light-green-100: #dcedc8;
      --paper-light-green-200: #c5e1a5;
      --paper-light-green-300: #aed581;
      --paper-light-green-400: #9ccc65;
      --paper-light-green-500: #8bc34a;
      --paper-light-green-600: #7cb342;
      --paper-light-green-700: #689f38;
      --paper-light-green-800: #558b2f;
      --paper-light-green-900: #33691e;
      --paper-light-green-a100: #ccff90;
      --paper-light-green-a200: #b2ff59;
      --paper-light-green-a400: #76ff03;
      --paper-light-green-a700: #64dd17;

      --paper-lime-50: #f9fbe7;
      --paper-lime-100: #f0f4c3;
      --paper-lime-200: #e6ee9c;
      --paper-lime-300: #dce775;
      --paper-lime-400: #d4e157;
      --paper-lime-500: #cddc39;
      --paper-lime-600: #c0ca33;
      --paper-lime-700: #afb42b;
      --paper-lime-800: #9e9d24;
      --paper-lime-900: #827717;
      --paper-lime-a100: #f4ff81;
      --paper-lime-a200: #eeff41;
      --paper-lime-a400: #c6ff00;
      --paper-lime-a700: #aeea00;

      --paper-yellow-50: #fffde7;
      --paper-yellow-100: #fff9c4;
      --paper-yellow-200: #fff59d;
      --paper-yellow-300: #fff176;
      --paper-yellow-400: #ffee58;
      --paper-yellow-500: #ffeb3b;
      --paper-yellow-600: #fdd835;
      --paper-yellow-700: #fbc02d;
      --paper-yellow-800: #f9a825;
      --paper-yellow-900: #f57f17;
      --paper-yellow-a100: #ffff8d;
      --paper-yellow-a200: #ffff00;
      --paper-yellow-a400: #ffea00;
      --paper-yellow-a700: #ffd600;

      --paper-amber-50: #fff8e1;
      --paper-amber-100: #ffecb3;
      --paper-amber-200: #ffe082;
      --paper-amber-300: #ffd54f;
      --paper-amber-400: #ffca28;
      --paper-amber-500: #ffc107;
      --paper-amber-600: #ffb300;
      --paper-amber-700: #ffa000;
      --paper-amber-800: #ff8f00;
      --paper-amber-900: #ff6f00;
      --paper-amber-a100: #ffe57f;
      --paper-amber-a200: #ffd740;
      --paper-amber-a400: #ffc400;
      --paper-amber-a700: #ffab00;

      --paper-orange-50: #fff3e0;
      --paper-orange-100: #ffe0b2;
      --paper-orange-200: #ffcc80;
      --paper-orange-300: #ffb74d;
      --paper-orange-400: #ffa726;
      --paper-orange-500: #ff9800;
      --paper-orange-600: #fb8c00;
      --paper-orange-700: #f57c00;
      --paper-orange-800: #ef6c00;
      --paper-orange-900: #e65100;
      --paper-orange-a100: #ffd180;
      --paper-orange-a200: #ffab40;
      --paper-orange-a400: #ff9100;
      --paper-orange-a700: #ff6500;

      --paper-deep-orange-50: #fbe9e7;
      --paper-deep-orange-100: #ffccbc;
      --paper-deep-orange-200: #ffab91;
      --paper-deep-orange-300: #ff8a65;
      --paper-deep-orange-400: #ff7043;
      --paper-deep-orange-500: #ff5722;
      --paper-deep-orange-600: #f4511e;
      --paper-deep-orange-700: #e64a19;
      --paper-deep-orange-800: #d84315;
      --paper-deep-orange-900: #bf360c;
      --paper-deep-orange-a100: #ff9e80;
      --paper-deep-orange-a200: #ff6e40;
      --paper-deep-orange-a400: #ff3d00;
      --paper-deep-orange-a700: #dd2c00;

      --paper-brown-50: #efebe9;
      --paper-brown-100: #d7ccc8;
      --paper-brown-200: #bcaaa4;
      --paper-brown-300: #a1887f;
      --paper-brown-400: #8d6e63;
      --paper-brown-500: #795548;
      --paper-brown-600: #6d4c41;
      --paper-brown-700: #5d4037;
      --paper-brown-800: #4e342e;
      --paper-brown-900: #3e2723;

      --paper-grey-50: #fafafa;
      --paper-grey-100: #f5f5f5;
      --paper-grey-200: #eeeeee;
      --paper-grey-300: #e0e0e0;
      --paper-grey-400: #bdbdbd;
      --paper-grey-500: #9e9e9e;
      --paper-grey-600: #757575;
      --paper-grey-700: #616161;
      --paper-grey-800: #424242;
      --paper-grey-900: #212121;

      --paper-blue-grey-50: #eceff1;
      --paper-blue-grey-100: #cfd8dc;
      --paper-blue-grey-200: #b0bec5;
      --paper-blue-grey-300: #90a4ae;
      --paper-blue-grey-400: #78909c;
      --paper-blue-grey-500: #607d8b;
      --paper-blue-grey-600: #546e7a;
      --paper-blue-grey-700: #455a64;
      --paper-blue-grey-800: #37474f;
      --paper-blue-grey-900: #263238;

      /* opacity for dark text on a light background */
      --dark-divider-opacity: 0.12;
      --dark-disabled-opacity: 0.38; /* or hint text or icon */
      --dark-secondary-opacity: 0.54;
      --dark-primary-opacity: 0.87;

      /* opacity for light text on a dark background */
      --light-divider-opacity: 0.12;
      --light-disabled-opacity: 0.3; /* or hint text or icon */
      --light-secondary-opacity: 0.7;
      --light-primary-opacity: 1.0;

    }

  </style>
</custom-style>




<custom-style>
  <style is="custom-style">
    html {
      /*
       * You can use these generic variables in your elements for easy theming.
       * For example, if all your elements use `--primary-text-color` as its main
       * color, then switching from a light to a dark theme is just a matter of
       * changing the value of `--primary-text-color` in your application.
       */
      --primary-text-color: var(--light-theme-text-color);
      --primary-background-color: var(--light-theme-background-color);
      --secondary-text-color: var(--light-theme-secondary-color);
      --disabled-text-color: var(--light-theme-disabled-color);
      --divider-color: var(--light-theme-divider-color);
      --error-color: var(--paper-deep-orange-a700);

      /*
       * Primary and accent colors. Also see color.html for more colors.
       */
      --primary-color: var(--paper-indigo-500);
      --light-primary-color: var(--paper-indigo-100);
      --dark-primary-color: var(--paper-indigo-700);

      --accent-color: var(--paper-pink-a200);
      --light-accent-color: var(--paper-pink-a100);
      --dark-accent-color: var(--paper-pink-a400);


      /*
       * Material Design Light background theme
       */
      --light-theme-background-color: #ffffff;
      --light-theme-base-color: #000000;
      --light-theme-text-color: var(--paper-grey-900);
      --light-theme-secondary-color: #737373;  /* for secondary text and icons */
      --light-theme-disabled-color: #9b9b9b;  /* disabled/hint text */
      --light-theme-divider-color: #dbdbdb;

      /*
       * Material Design Dark background theme
       */
      --dark-theme-background-color: var(--paper-grey-900);
      --dark-theme-base-color: #ffffff;
      --dark-theme-text-color: #ffffff;
      --dark-theme-secondary-color: #bcbcbc;  /* for secondary text and icons */
      --dark-theme-disabled-color: #646464;  /* disabled/hint text */
      --dark-theme-divider-color: #3c3c3c;

      /*
       * Deprecated values because of their confusing names.
       */
      --text-primary-color: var(--dark-theme-text-color);
      --default-primary-color: var(--primary-color);
    }
  </style>
</custom-style>








<script>//~~WEBPATH~~/iron-meta/iron-meta.html.js
(function(){Polymer.IronMeta=function(b){Polymer.IronMeta[" "](b);this.type=b&&b.type||"default";this.key=b&&b.key;b&&"value"in b&&(this.value=b.value)};Polymer.IronMeta[" "]=function(){};Polymer.IronMeta.types={};Polymer.IronMeta.prototype={get value(){var b=this.type,c=this.key;if(b&&c)return Polymer.IronMeta.types[b]&&Polymer.IronMeta.types[b][c]},set value(b){var c=this.type,e=this.key;c&&e&&(c=Polymer.IronMeta.types[c]=Polymer.IronMeta.types[c]||{},null==b?delete c[e]:c[e]=b)},get list(){if(this.type){var b=
Polymer.IronMeta.types[this.type];return b?Object.keys(b).map(function(c){return a[this.type][c]},this):[]}},byKey:function(b){this.key=b;return this.value}};var a=Polymer.IronMeta.types;Polymer({is:"iron-meta",properties:{type:{type:String,value:"default"},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:"_selfChanged"},__meta:{type:Boolean,computed:"__computeMeta(type, key, value)"}},hostAttributes:{hidden:!0},__computeMeta:function(b,c,e){b=new Polymer.IronMeta({type:b,
key:c});void 0!==e&&e!==b.value?b.value=e:this.value!==b.value&&(this.value=b.value);return b},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(b){b&&(this.value=this)},byKey:function(b){return(new Polymer.IronMeta({type:this.type,key:b})).value}})})();
</script>


<script>//~~WEBPATH~~/iron-validatable-behavior/iron-validatable-behavior.html.js
Polymer.IronValidatableBehaviorMeta=null;
Polymer.IronValidatableBehavior={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1},_validatorMeta:{type:Object},validatorType:{type:String,value:"validator"},_validator:{type:Object,computed:"__computeValidator(validator)"}},observers:["_invalidChanged(invalid)"],registered:function(){Polymer.IronValidatableBehaviorMeta=new Polymer.IronMeta({type:"validator"})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},
hasValidator:function(){return null!=this._validator},validate:function(a){this.invalid=!this._getValidity(a);return!this.invalid},_getValidity:function(a){return this.hasValidator()?this._validator.validate(a):!0},__computeValidator:function(){return Polymer.IronValidatableBehaviorMeta&&Polymer.IronValidatableBehaviorMeta.byKey(this.validator)}};
</script>



<script>//~~WEBPATH~~/iron-form-element-behavior/iron-form-element-behavior.html.js
Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1},_parentForm:{type:Object}},attached:function(){Polymer.Element||this.fire("iron-form-element-register")},detached:function(){!Polymer.Element&&this._parentForm&&this._parentForm.fire("iron-form-element-unregister",{target:this})}};
</script>


<script>//~~WEBPATH~~/iron-checked-element-behavior/iron-checked-element-behavior.html.js
Polymer.IronCheckedElementBehaviorImpl={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_checkedChanged"},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:"on",observer:"_valueChanged"}},observers:["_requiredChanged(required)"],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(){return this.disabled||!this.required||this.checked},_requiredChanged:function(){this.required?this.setAttribute("aria-required",
"true"):this.removeAttribute("aria-required")},_checkedChanged:function(){this.active=this.checked;this.fire("iron-change")},_valueChanged:function(){if(void 0===this.value||null===this.value)this.value="on"}};Polymer.IronCheckedElementBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronCheckedElementBehaviorImpl];
</script>





<script>//~~WEBPATH~~/paper-behaviors/paper-inky-focus-behavior.html.js
Polymer.PaperInkyFocusBehaviorImpl={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(a){a&&this.ensureRipple();this.hasRipple()&&(this._ripple.holdDown=a)},_createRipple:function(){var a=Polymer.PaperRippleBehavior._createRipple();a.id="ink";a.setAttribute("center","");a.classList.add("circle");return a}};Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl];
</script>


<script>//~~WEBPATH~~/paper-behaviors/paper-checked-element-behavior.html.js
Polymer.PaperCheckedElementBehaviorImpl={_checkedChanged:function(){Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this);this.hasRipple()&&(this.checked?this._ripple.setAttribute("checked",""):this._ripple.removeAttribute("checked"))},_buttonStateChanged:function(){Polymer.PaperRippleBehavior._buttonStateChanged.call(this);!this.disabled&&this.isAttached&&(this.checked=this.active)}};
Polymer.PaperCheckedElementBehavior=[Polymer.PaperInkyFocusBehavior,Polymer.IronCheckedElementBehavior,Polymer.PaperCheckedElementBehaviorImpl];
</script>




<dom-module id="paper-checkbox">
  <template strip-whitespace>
    <style>
      :host {
        display: inline-block;
        white-space: nowrap;
        cursor: pointer;
        --calculated-paper-checkbox-size: var(--paper-checkbox-size, 18px);
        /* -1px is a sentinel for the default and is replaced in `attached`. */
        --calculated-paper-checkbox-ink-size: var(--paper-checkbox-ink-size, -1px);
        @apply --paper-font-common-base;
        line-height: 0;
        -webkit-tap-highlight-color: transparent;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:focus) {
        outline: none;
      }

      .hidden {
        display: none;
      }

      #checkboxContainer {
        display: inline-block;
        position: relative;
        width: var(--calculated-paper-checkbox-size);
        height: var(--calculated-paper-checkbox-size);
        min-width: var(--calculated-paper-checkbox-size);
        margin: var(--paper-checkbox-margin, initial);
        vertical-align: var(--paper-checkbox-vertical-align, middle);
        background-color: var(--paper-checkbox-unchecked-background-color, transparent);
      }

      #ink {
        position: absolute;

        /* Center the ripple in the checkbox by negative offsetting it by
         * (inkWidth - rippleWidth) / 2 */
        top: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        width: var(--calculated-paper-checkbox-ink-size);
        height: var(--calculated-paper-checkbox-ink-size);
        color: var(--paper-checkbox-unchecked-ink-color, var(--primary-text-color));
        opacity: 0.6;
        pointer-events: none;
      }

      #ink:dir(rtl) {
        right: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: auto;
      }

      #ink[checked] {
        color: var(--paper-checkbox-checked-ink-color, var(--primary-color));
      }

      #checkbox {
        position: relative;
        box-sizing: border-box;
        height: 100%;
        border: solid 2px;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        border-radius: 2px;
        pointer-events: none;
        -webkit-transition: background-color 140ms, border-color 140ms;
        transition: background-color 140ms, border-color 140ms;
      }

      /* checkbox checked animations */
      #checkbox.checked #checkmark {
        -webkit-animation: checkmark-expand 140ms ease-out forwards;
        animation: checkmark-expand 140ms ease-out forwards;
      }

      @-webkit-keyframes checkmark-expand {
        0% {
          -webkit-transform: scale(0, 0) rotate(45deg);
        }
        100% {
          -webkit-transform: scale(1, 1) rotate(45deg);
        }
      }

      @keyframes checkmark-expand {
        0% {
          transform: scale(0, 0) rotate(45deg);
        }
        100% {
          transform: scale(1, 1) rotate(45deg);
        }
      }

      #checkbox.checked {
        background-color: var(--paper-checkbox-checked-color, var(--primary-color));
        border-color: var(--paper-checkbox-checked-color, var(--primary-color));
      }

      #checkmark {
        position: absolute;
        width: 36%;
        height: 70%;
        border-style: solid;
        border-top: none;
        border-left: none;
        border-right-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-bottom-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-color: var(--paper-checkbox-checkmark-color, white);
        -webkit-transform-origin: 97% 86%;
        transform-origin: 97% 86%;
        box-sizing: content-box; /* protect against page-level box-sizing */
      }

      #checkmark:dir(rtl) {
        -webkit-transform-origin: 50% 14%;
        transform-origin: 50% 14%;
      }

      /* label */
      #checkboxLabel {
        position: relative;
        display: inline-block;
        vertical-align: middle;
        padding-left: var(--paper-checkbox-label-spacing, 8px);
        white-space: normal;
        line-height: normal;
        color: var(--paper-checkbox-label-color, var(--primary-text-color));
        @apply --paper-checkbox-label;
      }

      :host([checked]) #checkboxLabel {
        color: var(--paper-checkbox-label-checked-color, var(--paper-checkbox-label-color, var(--primary-text-color)));
        @apply --paper-checkbox-label-checked;
      }

      #checkboxLabel:dir(rtl) {
        padding-right: var(--paper-checkbox-label-spacing, 8px);
        padding-left: 0;
      }

      #checkboxLabel[hidden] {
        display: none;
      }

      /* disabled state */

      :host([disabled]) #checkbox {
        opacity: 0.5;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
      }

      :host([disabled][checked]) #checkbox {
        background-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        opacity: 0.5;
      }

      :host([disabled]) #checkboxLabel  {
        opacity: 0.65;
      }

      /* invalid state */
      #checkbox.invalid:not(.checked) {
        border-color: var(--paper-checkbox-error-color, var(--error-color));
      }
    </style>

    <div id="checkboxContainer">
      <div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]">
        <div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div>
      </div>
    </div>

    <div id="checkboxLabel"><slot></slot></div>
  </template>

  <script>//~~WEBPATH~~/paper-checkbox/paper-checkbox.html.js
Polymer({is:"paper-checkbox",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"checkbox","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-checkbox-ink-size").trim()){var a=this.getComputedStyleValue("--calculated-paper-checkbox-size").trim(),b="px",c=a.match(/[A-Za-z]+$/);null!==c&&(b=c[0]);a=parseFloat(a);
c=8/3*a;"px"===b&&(c=Math.floor(c),c%2!==a%2&&c++);this.updateStyles({"--paper-checkbox-ink-size":c+b})}})},_computeCheckboxClass:function(a,b){var c="";a&&(c+="checked ");b&&(c+="invalid");return c},_computeCheckmarkClass:function(a){return a?"":"hidden"},_createRipple:function(){this._rippleContainer=this.$.checkboxContainer;return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)}});
</script>
</dom-module>












<dom-module id="iron-icon">
  <template>
    <style>
      :host {
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;

        vertical-align: middle;

        fill: var(--iron-icon-fill-color, currentcolor);
        stroke: var(--iron-icon-stroke-color, none);

        width: var(--iron-icon-width, 24px);
        height: var(--iron-icon-height, 24px);
        @apply --iron-icon;
      }

      :host([hidden]) {
        display: none;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/iron-icon/iron-icon.html.js
Polymer({is:"iron-icon",properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create("iron-meta",{type:"iconset"})}},observers:["_updateIcon(_meta, isAttached)","_updateIcon(theme, isAttached)","_srcChanged(src, isAttached)","_iconChanged(icon, isAttached)"],_DEFAULT_ICONSET:"icons",_iconChanged:function(a){a=(a||"").split(":");this._iconName=a.pop();this._iconsetName=a.pop()||this._DEFAULT_ICONSET;this._updateIcon()},_srcChanged:function(){this._updateIcon()},
_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?(this._img&&this._img.parentNode&&Polymer.dom(this.root).removeChild(this._img),""===this._iconName?this._iconset&&this._iconset.removeIcon(this):this._iconsetName&&this._meta&&((this._iconset=this._meta.byKey(this._iconsetName))?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,"iron-iconset-added","_updateIcon")):this.listen(window,"iron-iconset-added","_updateIcon"))):(this._iconset&&
this._iconset.removeIcon(this),this._img||(this._img=document.createElement("img"),this._img.style.width="100%",this._img.style.height="100%",this._img.draggable=!1),this._img.src=this.src,Polymer.dom(this.root).appendChild(this._img))}});
</script>

</dom-module>









<dom-module id="iron-a11y-announcer">
  <template>
    <style>
      :host {
        display: inline-block;
        position: fixed;
        clip: rect(0px,0px,0px,0px);
      }
    </style>
    <div aria-live$="[[mode]]">[[_text]]</div>
  </template>

  <script>//~~WEBPATH~~/iron-a11y-announcer/iron-a11y-announcer.html.js
Polymer.IronA11yAnnouncer=function(){};Polymer.IronA11yAnnouncer=Polymer({is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},_text:{type:String,value:""}},created:function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=this);document.body.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(a){this._text="";this.async(function(){this._text=a},100)},_onIronAnnounce:function(a){a.detail&&a.detail.text&&this.announce(a.detail.text)}});
Polymer.IronA11yAnnouncer.instance=null;Polymer.IronA11yAnnouncer.requestAvailability=function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=document.createElement("iron-a11y-announcer"));document.body.appendChild(Polymer.IronA11yAnnouncer.instance)};
</script>
</dom-module>



<script>//~~WEBPATH~~/iron-input/iron-input.html.js
Polymer({is:"iron-input",extends:"input",behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{observer:"_bindValueChanged",type:String},preventInvalidInput:{type:Boolean},allowedPattern:{type:String,observer:"_allowedPatternChanged"},_previousValidInput:{type:String,value:""},_patternAlreadyChecked:{type:Boolean,value:!1}},listeners:{input:"_onInput",keypress:"_onKeypress"},registered:function(){this._canDispatchEventOnDisabled()||(this._origDispatchEvent=this.dispatchEvent,this.dispatchEvent=
this._dispatchEventFirefoxIE)},created:function(){Polymer.IronA11yAnnouncer.requestAvailability()},_canDispatchEventOnDisabled:function(){var a=document.createElement("input"),b=!1;a.disabled=!0;a.addEventListener("feature-check-dispatch-event",function(){b=!0});try{a.dispatchEvent(new Event("feature-check-dispatch-event"))}catch(c){}return b},_dispatchEventFirefoxIE:function(a){var b=this.disabled;this.disabled=!1;a=this._origDispatchEvent(a);this.disabled=b;return a},get _patternRegExp(){if(this.allowedPattern)var a=
new RegExp(this.allowedPattern);else switch(this.type){case "number":a=/[0-9.,e-]/}return a},ready:function(){this.bindValue=this.value},_bindValueChanged:function(){this.value!==this.bindValue&&(this.value=this.bindValue||0===this.bindValue||!1===this.bindValue?this.bindValue:"");this.fire("bind-value-changed",{value:this.bindValue})},_allowedPatternChanged:function(){this.preventInvalidInput=this.allowedPattern?!0:!1},_onInput:function(){!this.preventInvalidInput||this._patternAlreadyChecked||this._checkPatternValidity()||
(this._announceInvalidCharacter("Invalid string of characters not entered."),this.value=this._previousValidInput);this._previousValidInput=this.bindValue=this.value;this._patternAlreadyChecked=!1},_isPrintable:function(a){var b=19==a.keyCode||20==a.keyCode||45==a.keyCode||46==a.keyCode||144==a.keyCode||145==a.keyCode||32<a.keyCode&&41>a.keyCode||111<a.keyCode&&124>a.keyCode;return!(8==a.keyCode||9==a.keyCode||13==a.keyCode||27==a.keyCode)&&!(0==a.charCode&&b)},_onKeypress:function(a){if(this.preventInvalidInput||
"number"===this.type){var b=this._patternRegExp;if(b&&!(a.metaKey||a.ctrlKey||a.altKey)){this._patternAlreadyChecked=!0;var c=String.fromCharCode(a.charCode);this._isPrintable(a)&&!b.test(c)&&(a.preventDefault(),this._announceInvalidCharacter("Invalid character "+c+" not entered."))}}},_checkPatternValidity:function(){var a=this._patternRegExp;if(!a)return!0;for(var b=0;b<this.value.length;b++)if(!a.test(this.value[b]))return!1;return!0},validate:function(){var a=this.checkValidity();a&&(this.required&&
""===this.value?a=!1:this.hasValidator()&&(a=Polymer.IronValidatableBehavior.validate.call(this,this.value)));this.invalid=!a;this.fire("iron-input-validate");return a},_announceInvalidCharacter:function(a){this.fire("iron-announce",{text:a})}});
</script>





<script>//~~WEBPATH~~/paper-input/paper-input-behavior.html.js
Polymer.PaperInputHelper={};Polymer.PaperInputHelper.NextLabelID=1;Polymer.PaperInputHelper.NextAddonID=1;Polymer.PaperInputHelper.NextInputID=1;
Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},preventInvalidInput:{type:Boolean},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},
validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},
_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""},_inputId:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){this.$||(this.$={});this.$.input||(this._generateInputId(),this.$.input=this.$$("#"+this._inputId));return this.$.input},get _focusableElement(){return this.inputElement},registered:function(){this._typesThatHaveText="date datetime datetime-local month time week file".split(" ")},
attached:function(){this._updateAriaLabelledBy();this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(a,b){return a?a+" "+b:b},_onAddonAttached:function(a){a=a.path?a.path[0]:a.target;if(a.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,a.id);else{var b="paper-input-add-on-"+Polymer.PaperInputHelper.NextAddonID++;a.id=b;this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,
b)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(a){Polymer.IronControlState._focusBlurHandler.call(this,a);this.focused&&!this._shiftTabPressed&&this._focusableElement&&this._focusableElement.focus()},_onShiftTabDown:function(){var a=this.getAttribute("tabindex");this._shiftTabPressed=!0;this.setAttribute("tabindex","-1");this.async(function(){this.setAttribute("tabindex",a);this._shiftTabPressed=!1},1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},
updateValueAndPreserveCaret:function(a){try{var b=this.inputElement.selectionStart;this.value=a;this.inputElement.selectionStart=b;this.inputElement.selectionEnd=b}catch(c){this.value=a}},_computeAlwaysFloatLabel:function(a,b){return b||a},_updateAriaLabelledBy:function(){var a=Polymer.dom(this.root).querySelector("label");if(a){if(a.id)var b=a.id;else b="paper-input-label-"+Polymer.PaperInputHelper.NextLabelID++,a.id=b;this._ariaLabelledBy=b}else this._ariaLabelledBy=""},_generateInputId:function(){this._inputId&&
""!==this._inputId||(this._inputId="input-"+Polymer.PaperInputHelper.NextInputID++)},_onChange:function(a){this.shadowRoot&&this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var a=document.activeElement;a instanceof HTMLElement&&a!==document.body&&a!==document.documentElement||this._focusableElement.focus()}}};
Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.PaperInputBehaviorImpl];
</script>






<custom-style>
  <style is="custom-style">
    html {

      /* Shared Styles */
      --paper-font-common-base: {
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-code: {
        font-family: 'Roboto Mono', 'Consolas', 'Menlo', monospace;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-expensive-kerning: {
        text-rendering: optimizeLegibility;
      };

      --paper-font-common-nowrap: {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      };

      /* Material Font Styles */

      --paper-font-display4: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 112px;
        font-weight: 300;
        letter-spacing: -.044em;
        line-height: 120px;
      };

      --paper-font-display3: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 56px;
        font-weight: 400;
        letter-spacing: -.026em;
        line-height: 60px;
      };

      --paper-font-display2: {
        @apply --paper-font-common-base;

        font-size: 45px;
        font-weight: 400;
        letter-spacing: -.018em;
        line-height: 48px;
      };

      --paper-font-display1: {
        @apply --paper-font-common-base;

        font-size: 34px;
        font-weight: 400;
        letter-spacing: -.01em;
        line-height: 40px;
      };

      --paper-font-headline: {
        @apply --paper-font-common-base;

        font-size: 24px;
        font-weight: 400;
        letter-spacing: -.012em;
        line-height: 32px;
      };

      --paper-font-title: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 20px;
        font-weight: 500;
        line-height: 28px;
      };

      --paper-font-subhead: {
        @apply --paper-font-common-base;

        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
      };

      --paper-font-body2: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-body1: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
      };

      --paper-font-caption: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 12px;
        font-weight: 400;
        letter-spacing: 0.011em;
        line-height: 20px;
      };

      --paper-font-menu: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 13px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-button: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 14px;
        font-weight: 500;
        letter-spacing: 0.018em;
        line-height: 24px;
        text-transform: uppercase;
      };

      --paper-font-code2: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 700;
        line-height: 20px;
      };

      --paper-font-code1: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
      };

    }

  </style>
</custom-style>



<script>//~~WEBPATH~~/paper-input/paper-input-addon-behavior.html.js
Polymer.PaperInputAddonBehavior={hostAttributes:{"add-on":""},attached:function(){this.fire("addon-attached")},update:function(){}};
</script>




<dom-module id="paper-input-char-counter">
  <template>
    <style>
      :host {
        display: inline-block;
        float: right;

        @apply(--paper-font-caption);
        @apply(--paper-input-char-counter);
      }

      :host([hidden]) {
        display: none !important;
      }

      :host-context([dir="rtl"]) {
        float: left;
      }
    </style>

    <span>[[_charCounterStr]]</span>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input-char-counter.html.js
Polymer({is:"paper-input-char-counter",behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:"0"}},update:function(a){if(a.inputElement){a.value=a.value||"";var b=a.value.toString().length.toString();a.inputElement.hasAttribute("maxlength")&&(b+="/"+a.inputElement.getAttribute("maxlength"));this._charCounterStr=b}}});
</script>








<dom-module id="paper-input-container">
  <template>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        @apply(--paper-input-container);
      }

      :host([inline]) {
        display: inline-block;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.33;

        @apply(--paper-input-container-disabled);
      }

      :host([hidden]) {
        display: none !important;
      }

      .floated-label-placeholder {
        @apply(--paper-font-caption);
      }

      .underline {
        height: 2px;
        position: relative;
      }

      .focused-line {
        @apply(--layout-fit);

        border-bottom: 2px solid var(--paper-input-container-focus-color, --primary-color);

        -webkit-transform-origin: center center;
        transform-origin: center center;
        -webkit-transform: scale3d(0,1,1);
        transform: scale3d(0,1,1);

        @apply(--paper-input-container-underline-focus);
      }

      .underline.is-highlighted .focused-line {
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply(--paper-transition-easing);
      }

      .underline.is-invalid .focused-line {
        border-color: var(--paper-input-container-invalid-color, --error-color);
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply(--paper-transition-easing);
      }

      .unfocused-line {
        @apply(--layout-fit);

        border-bottom: 1px solid var(--paper-input-container-color, --secondary-text-color);

        @apply(--paper-input-container-underline);
      }

      :host([disabled]) .unfocused-line {
        border-bottom: 1px dashed;
        border-color: var(--paper-input-container-color, --secondary-text-color);

        @apply(--paper-input-container-underline-disabled);
      }

      .label-and-input-container {
        @apply(--layout-flex-auto);
        @apply(--layout-relative);

        width: 100%;
        max-width: 100%;
      }

      .input-content {
        @apply(--layout-horizontal);
        @apply(--layout-center);

        position: relative;
      }

      .input-content ::content label,
      .input-content ::content .paper-input-label {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        width: 100%;
        font: inherit;
        color: var(--paper-input-container-color, --secondary-text-color);
        -webkit-transition: -webkit-transform 0.25s, width 0.25s;
        transition: transform 0.25s, width 0.25s;
        -webkit-transform-origin: left top;
        transform-origin: left top;
        /* Fix for safari not focusing 0-height date/time inputs with -webkit-apperance: none; */
        min-height: 1px;

        @apply(--paper-font-common-nowrap);
        @apply(--paper-font-subhead);
        @apply(--paper-input-container-label);
        @apply(--paper-transition-easing);
      }

      .input-content.label-is-floating ::content label,
      .input-content.label-is-floating ::content .paper-input-label {
        -webkit-transform: translateY(-75%) scale(0.75);
        transform: translateY(-75%) scale(0.75);

        /* Since we scale to 75/100 of the size, we actually have 100/75 of the
        original space now available */
        width: 133%;

        @apply(--paper-input-container-label-floating);
      }

      :host-context([dir="rtl"]) .input-content.label-is-floating ::content label,
      :host-context([dir="rtl"]) .input-content.label-is-floating ::content .paper-input-label {
        /* TODO(noms): Figure out why leaving the width at 133% before the animation
         * actually makes
         * it wider on the right side, not left side, as you would expect in RTL */
        width: 100%;
        -webkit-transform-origin: right top;
        transform-origin: right top;
      }

      .input-content.label-is-highlighted ::content label,
      .input-content.label-is-highlighted ::content .paper-input-label {
        color: var(--paper-input-container-focus-color, --primary-color);

        @apply(--paper-input-container-label-focus);
      }

      .input-content.is-invalid ::content label,
      .input-content.is-invalid ::content .paper-input-label {
        color: var(--paper-input-container-invalid-color, --error-color);
      }

      .input-content.label-is-hidden ::content label,
      .input-content.label-is-hidden ::content .paper-input-label {
        visibility: hidden;
      }

      .input-content ::content input,
      .input-content ::content textarea,
      .input-content ::content iron-autogrow-textarea,
      .input-content ::content .paper-input-input {
        position: relative; /* to make a stacking context */
        outline: none;
        box-shadow: none;
        padding: 0;
        width: 100%;
        max-width: 100%;
        background: transparent;
        border: none;
        color: var(--paper-input-container-input-color, --primary-text-color);
        -webkit-appearance: none;
        text-align: inherit;
        vertical-align: bottom;

        @apply(--paper-font-subhead);
        @apply(--paper-input-container-input);
      }

      .input-content.focused ::content input,
      .input-content.focused ::content textarea,
      .input-content.focused ::content iron-autogrow-textarea,
      .input-content.focused ::content .paper-input-input {
        @apply(--paper-input-container-input-focus);
      }

      .input-content.is-invalid ::content input,
      .input-content.is-invalid ::content textarea,
      .input-content.is-invalid ::content iron-autogrow-textarea,
      .input-content.is-invalid ::content .paper-input-input {
        @apply(--paper-input-container-input-invalid);
      }

      .input-content ::content input::-webkit-outer-spin-button,
      .input-content ::content input::-webkit-inner-spin-button {
        @apply(--paper-input-container-input-webkit-spinner);
      }

      ::content [prefix] {
        @apply(--paper-font-subhead);

        @apply(--paper-input-prefix);
        @apply(--layout-flex-none);
      }

      ::content [suffix] {
        @apply(--paper-font-subhead);

        @apply(--paper-input-suffix);
        @apply(--layout-flex-none);
      }

      /* Firefox sets a min-width on the input, which can cause layout issues */
      .input-content ::content input {
        min-width: 0;
      }

      .input-content ::content textarea {
        resize: none;
      }

      .add-on-content {
        position: relative;
      }

      .add-on-content.is-invalid ::content * {
        color: var(--paper-input-container-invalid-color, --error-color);
      }

      .add-on-content.is-highlighted ::content * {
        color: var(--paper-input-container-focus-color, --primary-color);
      }
    </style>

    <template is="dom-if" if="[[!noLabelFloat]]">
      <div class="floated-label-placeholder" aria-hidden="true">&nbsp;</div>
    </template>

    <div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]">
      <content select="[prefix]" id="prefix"></content>

      <div class="label-and-input-container" id="labelAndInputContainer">
        <content select=":not([add-on]):not([prefix]):not([suffix])"></content>
      </div>

      <content select="[suffix]"></content>
    </div>

    <div class$="[[_computeUnderlineClass(focused,invalid)]]">
      <div class="unfocused-line"></div>
      <div class="focused-line"></div>
    </div>

    <div class$="[[_computeAddOnContentClass(focused,invalid)]]">
      <content id="addOnContent" select="[add-on]"></content>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input-container.html.js
Polymer({is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},
_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},
get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this._addons||(this._addons=[]);this.addEventListener("focus",this._boundOnFocus,!0);this.addEventListener("blur",this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput);""!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):
this._handleValue(this._inputElement)},_onAddonAttached:function(a){this._addons||(this._addons=[]);a=a.target;-1===this._addons.indexOf(a)&&(this._addons.push(a),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1);this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(a){this._handleValueAndAutoValidate(a.target)},_onValueChanged:function(a){this._handleValueAndAutoValidate(a.target)},_handleValue:function(a){var b=
this._inputElementValue;b||0===b||"number"===a.type&&!a.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1;this.updateAddons({inputElement:a,value:b,invalid:this.invalid})},_handleValueAndAutoValidate:function(a){this.autoValidate&&(this.invalid=!(a.validate?a.validate(this._inputElementValue):a.checkValidity()));this._handleValue(a)},_onIronInputValidate:function(){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},
updateAddons:function(a){for(var b,c=0;b=this._addons[c];c++)b.update(a)},_computeInputContentClass:function(a,b,c,e,f){var g="input-content";a?(f&&(g+=" label-is-hidden"),e&&(g+=" is-invalid")):(a=this.querySelector("label"),b||f?(g+=" label-is-floating",this.$.labelAndInputContainer.style.position="static",e?g+=" is-invalid":c&&(g+=" label-is-highlighted")):(a&&(this.$.labelAndInputContainer.style.position="relative"),e&&(g+=" is-invalid")));c&&(g+=" focused");return g},_computeUnderlineClass:function(a,
b){var c="underline";b?c+=" is-invalid":a&&(c+=" is-highlighted");return c},_computeAddOnContentClass:function(a,b){var c="add-on-content";b?c+=" is-invalid":a&&(c+=" is-highlighted");return c}});
</script>








<dom-module id="paper-input-error">
  <template>
    <style>
      :host {
        display: inline-block;
        visibility: hidden;

        color: var(--paper-input-container-invalid-color, --error-color);

        @apply(--paper-font-caption);
        @apply(--paper-input-error);
        position: absolute;
        left:0;
        right:0;
      }

      :host([invalid]) {
        visibility: visible;
      };
    </style>

    <content></content>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input-error.html.js
Polymer({is:"paper-input-error",behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(a){this._setInvalid(a.invalid)}});
</script>




<dom-module id="paper-input">
  <template>
    <style>
      :host {
        display: block;
      }

      :host([focused]) {
        outline: none;
      }

      :host([hidden]) {
        display: none !important;
      }

      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        @apply(--paper-input-container-input-webkit-spinner);
      }

      input::-webkit-clear-button {
        @apply(--paper-input-container-input-webkit-clear);
      }

      input::-webkit-input-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input:-moz-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input::-moz-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input::-ms-clear {
        @apply(--paper-input-container-ms-clear);
      }

      input::-webkit-calendar-picker-indicator {
        @apply --paper-input-container-input-webkit-calendar-picker-indicator;
      }

      input:-ms-input-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      label {
        pointer-events: none;
      }
    </style>

    <paper-input-container no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <content select="[prefix]"></content>

      <label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]">[[label]]</label>

      <input is="iron-input" id$="[[_inputId]]" class="input-element" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" bind-value="{{value}}" invalid="{{invalid}}" prevent-invalid-input="[[preventInvalidInput]]" allowed-pattern="[[allowedPattern]]" validator="[[validator]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabindex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]">

      <content select="[suffix]"></content>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error aria-live="assertive">[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter></paper-input-char-counter>
      </template>

    </paper-input-container>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input.html.js
Polymer({is:"paper-input",behaviors:[Polymer.IronFormElementBehavior,Polymer.PaperInputBehavior]});
</script>







<script>//~~WEBPATH~~/iron-resizable-behavior/iron-resizable-behavior.html.js
Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[];this._boundNotifyResize=this.notifyResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):window.removeEventListener("resize",
this._boundNotifyResize);this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(a){this.resizerShouldNotify(a)&&this._notifyDescendant(a)},this),this._fireResize())},assignParentResizable:function(a){this._parentResizable=a},stopResizeNotificationsFor:function(a){var b=this._interestedResizables.indexOf(a);-1<b&&(this._interestedResizables.splice(b,1),this.unlisten(a,"iron-resize","_onDescendantIronResize"))},resizerShouldNotify:function(){return!0},
_onDescendantIronResize:function(a){this._notifyingDescendant?a.stopPropagation():Polymer.Settings.useShadow||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(a){var b=Polymer.dom(a).rootTarget;b!==this&&(-1===this._interestedResizables.indexOf(b)&&(this._interestedResizables.push(b),this.listen(b,"iron-resize","_onDescendantIronResize")),b.assignParentResizable(this),this._notifyDescendant(b),a.stopPropagation())},
_parentResizableChanged:function(a){a&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(a){this.isAttached&&(this._notifyingDescendant=!0,a.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if("loading"===document.readyState){var a=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function c(){document.removeEventListener("readystatechange",c);a()})}else this.fire("iron-request-resize-notifications",
null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable||(window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())}};
</script>






<script>//~~WEBPATH~~/iron-fit-behavior/iron-fit-behavior.html.js
Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){return this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width},
get _fitHeight(){return this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height},get _fitLeft(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().left},get _fitTop(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().top},get _defaultPositionTarget(){var a=Polymer.dom(this).parentNode;a&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=a.host);return a},get _localeHorizontalAlign(){if(this._isRTL){if("right"===this.horizontalAlign)return"left";
if("left"===this.horizontalAlign)return"right"}return this.horizontalAlign},get __shouldPosition(){return(this.horizontalAlign||this.verticalAlign)&&("center"!==this.horizontalAlign||"middle"!==this.verticalAlign)},attached:function(){"undefined"===typeof this._isRTL&&(this._isRTL="rtl"==window.getComputedStyle(this).direction);this.positionTarget=this.positionTarget||this._defaultPositionTarget;this.autoFitOnAttach&&("none"===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):
(window.ShadyDOM&&ShadyDOM.flush(),this.fit()))},detached:function(){this.__deferredFit&&(clearTimeout(this.__deferredFit),this.__deferredFit=null)},fit:function(){this.position();this.constrain();this.center()},_discoverInfo:function(){if(!this._fitInfo){var a=window.getComputedStyle(this),b=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||"",left:this.style.left||"",position:this.style.position||""},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||
"",maxHeight:this.sizingTarget.style.maxHeight||"",boxSizing:this.sizingTarget.style.boxSizing||""},positionedBy:{vertically:"auto"!==a.top?"top":"auto"!==a.bottom?"bottom":null,horizontally:"auto"!==a.left?"left":"auto"!==a.right?"right":null},sizedBy:{height:"none"!==b.maxHeight,width:"none"!==b.maxWidth,minWidth:parseInt(b.minWidth,10)||0,minHeight:parseInt(b.minHeight,10)||0},margin:{top:parseInt(a.marginTop,10)||0,right:parseInt(a.marginRight,10)||0,bottom:parseInt(a.marginBottom,10)||0,left:parseInt(a.marginLeft,
10)||0}}}},resetFit:function(){var a=this._fitInfo||{},b;for(b in a.sizerInlineStyle)this.sizingTarget.style[b]=a.sizerInlineStyle[b];for(b in a.inlineStyle)this.style[b]=a.inlineStyle[b];this._fitInfo=null},refit:function(){var a=this.sizingTarget.scrollLeft,b=this.sizingTarget.scrollTop;this.resetFit();this.fit();this.sizingTarget.scrollLeft=a;this.sizingTarget.scrollTop=b},position:function(){if(this.__shouldPosition){this._discoverInfo();this.style.position="fixed";this.sizingTarget.style.boxSizing=
"border-box";this.style.left="0px";this.style.top="0px";var a=this.getBoundingClientRect(),b=this.__getNormalizedRect(this.positionTarget),c=this.__getNormalizedRect(this.fitInto),e=this._fitInfo.margin,f=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,{width:a.width+e.left+e.right,height:a.height+e.top+e.bottom},a,b,c);b=f.left+e.left;f=f.top+e.top;var g=Math.min(c.right-e.right,b+a.width),h=Math.min(c.bottom-e.bottom,f+a.height);b=Math.max(c.left+e.left,Math.min(b,g-this._fitInfo.sizedBy.minWidth));
f=Math.max(c.top+e.top,Math.min(f,h-this._fitInfo.sizedBy.minHeight));this.sizingTarget.style.maxWidth=Math.max(g-b,this._fitInfo.sizedBy.minWidth)+"px";this.sizingTarget.style.maxHeight=Math.max(h-f,this._fitInfo.sizedBy.minHeight)+"px";this.style.left=b-a.left+"px";this.style.top=f-a.top+"px"}},constrain:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo;a.positionedBy.vertically||(this.style.position="fixed",this.style.top="0px");a.positionedBy.horizontally||(this.style.position=
"fixed",this.style.left="0px");this.sizingTarget.style.boxSizing="border-box";var b=this.getBoundingClientRect();a.sizedBy.height||this.__sizeDimension(b,a.positionedBy.vertically,"top","bottom","Height");a.sizedBy.width||this.__sizeDimension(b,a.positionedBy.horizontally,"left","right","Width")}},_sizeDimension:function(a,b,c,e,f){this.__sizeDimension(a,b,c,e,f)},__sizeDimension:function(a,b,c,e,f){var g=this._fitInfo,h=this.__getNormalizedRect(this.fitInto);h="Width"===f?h.width:h.height;b=b===
e;var l="offset"+f;this.sizingTarget.style["max"+f]=h-g.margin[b?c:e]-(b?h-a[e]:a[c])-(this[l]-this.sizingTarget[l])+"px"},center:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo.positionedBy;if(!a.vertically||!a.horizontally){this.style.position="fixed";a.vertically||(this.style.top="0px");a.horizontally||(this.style.left="0px");var b=this.getBoundingClientRect(),c=this.__getNormalizedRect(this.fitInto);a.vertically||(this.style.top=c.top-b.top+(c.height-b.height)/2+
"px");a.horizontally||(this.style.left=c.left-b.left+(c.width-b.width)/2+"px")}}},__getNormalizedRect:function(a){return a===document.documentElement||a===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:a.getBoundingClientRect()},__getOffscreenArea:function(a,b,c){return Math.abs(Math.min(0,a.top)+Math.min(0,c.bottom-(a.top+b.height)))*b.width+Math.abs(Math.min(0,a.left)+Math.min(0,c.right-(a.left+b.width)))*b.height},__getPosition:function(a,
b,c,e,f,g){var h=[{verticalAlign:"top",horizontalAlign:"left",top:f.top+this.verticalOffset,left:f.left+this.horizontalOffset},{verticalAlign:"top",horizontalAlign:"right",top:f.top+this.verticalOffset,left:f.right-c.width-this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"left",top:f.bottom-c.height-this.verticalOffset,left:f.left+this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"right",top:f.bottom-c.height-this.verticalOffset,left:f.right-c.width-this.horizontalOffset}];
if(this.noOverlap){for(var l=0,n=h.length;l<n;l++){var m={},q;for(q in h[l])m[q]=h[l][q];h.push(m)}h[0].top=h[1].top+=f.height;h[2].top=h[3].top-=f.height;h[4].left=h[6].left+=f.width;h[5].left=h[7].left-=f.width}b="auto"===b?null:b;a="auto"===a?null:a;a&&"center"!==a||(h.push({verticalAlign:"top",horizontalAlign:"center",top:f.top+this.verticalOffset+(this.noOverlap?f.height:0),left:f.left-e.width/2+f.width/2+this.horizontalOffset}),h.push({verticalAlign:"bottom",horizontalAlign:"center",top:f.bottom-
c.height-this.verticalOffset-(this.noOverlap?f.height:0),left:f.left-e.width/2+f.width/2+this.horizontalOffset}));b&&"middle"!==b||(h.push({verticalAlign:"middle",horizontalAlign:"left",top:f.top-e.height/2+f.height/2+this.verticalOffset,left:f.left+this.horizontalOffset+(this.noOverlap?f.width:0)}),h.push({verticalAlign:"middle",horizontalAlign:"right",top:f.top-e.height/2+f.height/2+this.verticalOffset,left:f.right-c.width-this.horizontalOffset-(this.noOverlap?f.width:0)}));for(l=0;l<h.length;l++){e=
h[l];f=e.verticalAlign===b;n=e.horizontalAlign===a;if(!this.dynamicAlign&&!this.noOverlap&&f&&n){var r=e;break}m=(!b||f)&&(!a||n);if(this.dynamicAlign||m){e.offscreenArea=this.__getOffscreenArea(e,c,g);if(0===e.offscreenArea&&m){r=e;break}r=r||e;m=e.offscreenArea-r.offscreenArea;if(0>m||0===m&&(f||n))r=e}}return r}};
</script>







<dom-module id="iron-overlay-backdrop">

  <template>
    <style>
      :host {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--iron-overlay-backdrop-background-color, #000);
        opacity: 0;
        transition: opacity 0.2s;
        pointer-events: none;
        @apply --iron-overlay-backdrop;
      }

      :host(.opened) {
        opacity: var(--iron-overlay-backdrop-opacity, 0.6);
        pointer-events: auto;
        @apply --iron-overlay-backdrop-opened;
      }
    </style>

    <slot></slot>
  </template>

</dom-module>

<script>//~~WEBPATH~~/iron-overlay-behavior/iron-overlay-backdrop.html.js
Polymer({is:"iron-overlay-backdrop",properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:"_openedChanged"}},listeners:{transitionend:"_onTransitionend"},created:function(){this.__openedRaf=null},attached:function(){this.opened&&this._openedChanged(this.opened)},prepare:function(){this.opened&&!this.parentNode&&Polymer.dom(document.body).appendChild(this)},open:function(){this.opened=!0},close:function(){this.opened=!1},complete:function(){this.opened||this.parentNode!==document.body||
Polymer.dom(this.parentNode).removeChild(this)},_onTransitionend:function(a){a&&a.target===this&&this.complete()},_openedChanged:function(a){a?this.prepare():(a=window.getComputedStyle(this),"0s"!==a.transitionDuration&&0!=a.opacity||this.complete());this.isAttached&&(this.__openedRaf&&(window.cancelAnimationFrame(this.__openedRaf),this.__openedRaf=null),this.scrollTop=this.scrollTop,this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null;this.toggleClass("opened",this.opened)}.bind(this)))}});
</script>


<script>//~~WEBPATH~~/iron-overlay-behavior/iron-overlay-manager.html.js
Polymer.IronOverlayManagerClass=function(){this._overlays=[];this._minimumZ=101;this._backdropElement=null;Polymer.Gestures.add(document.documentElement,"tap",function(){});document.addEventListener("tap",this._onCaptureClick.bind(this),!0);document.addEventListener("focus",this._onCaptureFocus.bind(this),!0);document.addEventListener("keydown",this._onCaptureKeyDown.bind(this),!0)};
function Gk(a,b){a=a._minimumZ;b&&(b=Number(b.style.zIndex||window.getComputedStyle(b).zIndex),b===b&&(a=b));return a}
function Hk(a,b){var c=a._overlays.indexOf(b);if(0<=c){if(b=c,c=a._overlays[b]){var e=a._overlays.length-1,f=a._overlays[e];f&&!c.alwaysOnTop&&f.alwaysOnTop&&e--;if(!(b>=e)){f=Math.max(Gk(a,Ik(a)),a._minimumZ);Gk(a,c)<=f&&(c.style.zIndex=f+2);for(;b<e;)a._overlays[b]=a._overlays[b+1],b++;a._overlays[e]=c}}}else{c=a._overlays.length;e=a._overlays[c-1];f=Math.max(Gk(a,e),a._minimumZ);var g=Gk(a,b);e&&!b.alwaysOnTop&&e.alwaysOnTop&&(e.style.zIndex=f+2,c--,f=Math.max(Gk(a,a._overlays[c-1]),a._minimumZ));
g<=f&&(b.style.zIndex=f+2);a._overlays.splice(c,0,b)}Jk(a)}function Kk(a,b){b=a._overlays.indexOf(b);-1!==b&&(a._overlays.splice(b,1),Jk(a))}function Jk(a){var b=Lk(a);if(b||a._backdropElement)a.backdropElement.style.zIndex=Gk(a,b)-1,a.backdropElement.opened=!!b,a.backdropElement.prepare()}function Ik(a){return a._overlays[a._overlays.length-1]}function Lk(a){for(var b=a._overlays.length-1;0<=b;b--)if(a._overlays[b].withBackdrop)return a._overlays[b]}
function Mk(a,b){b=b||[];for(var c=0;c<b.length;c++)if(b[c]._manager===a)return b[c]}
Polymer.IronOverlayManagerClass.prototype={constructor:Polymer.IronOverlayManagerClass,get backdropElement(){this._backdropElement||(this._backdropElement=document.createElement("iron-overlay-backdrop"));return this._backdropElement},get deepActiveElement(){var a=document.activeElement;a&&!1!==a instanceof Element||(a=document.body);for(;a.root&&Polymer.dom(a.root).activeElement;)a=Polymer.dom(a.root).activeElement;return a},addOrRemoveOverlay:function(a){a.opened?Hk(this,a):Kk(this,a)},ensureMinimumZ:function(a){this._minimumZ=
Math.max(this._minimumZ,a)},focusOverlay:function(){var a=Ik(this);a&&a._applyFocus()},getBackdrops:function(){for(var a=[],b=0;b<this._overlays.length;b++)this._overlays[b].withBackdrop&&a.push(this._overlays[b]);return a},backdropZ:function(){return Gk(this,Lk(this))-1},_onCaptureClick:function(a){var b=this._overlays.length-1;if(-1!==b)for(var c=Polymer.dom(a).path,e;(e=this._overlays[b])&&Mk(this,c)!==e;)if(e._onCaptureClick(a),e.allowClickThrough)b--;else break},_onCaptureFocus:function(a){var b=
Ik(this);b&&b._onCaptureFocus(a)},_onCaptureKeyDown:function(a){var b=Ik(this);b&&(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,"esc")?b._onCaptureEsc(a):Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,"tab")&&b._onCaptureTab(a))}};Polymer.IronOverlayManager=new Polymer.IronOverlayManagerClass;
</script>



<script>//~~WEBPATH~~/iron-overlay-behavior/iron-scroll-manager.html.js
(function(){var a=0,b=0,c=null,e=[],f=["wheel","mousewheel","DOMMouseScroll","touchstart","touchmove"];Polymer.IronScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function(g){var h=this.currentLockingElement;if(void 0===h)return!1;if(this._hasCachedLockedElement(g))return!0;if(this._hasCachedUnlockedElement(g))return!1;(h=!!h&&h!==g&&!this._composedTreeContains(h,g))?this._lockedElementCache.push(g):this._unlockedElementCache.push(g);
return h},pushScrollLock:function(g){0<=this._lockingElements.indexOf(g)||(0===this._lockingElements.length&&this._lockScrollInteractions(),this._lockingElements.push(g),this._lockedElementCache=[],this._unlockedElementCache=[])},removeScrollLock:function(g){g=this._lockingElements.indexOf(g);-1!==g&&(this._lockingElements.splice(g,1),this._lockedElementCache=[],this._unlockedElementCache=[],0===this._lockingElements.length&&this._unlockScrollInteractions())},_lockingElements:[],_lockedElementCache:null,
_unlockedElementCache:null,_hasCachedLockedElement:function(g){return-1<this._lockedElementCache.indexOf(g)},_hasCachedUnlockedElement:function(g){return-1<this._unlockedElementCache.indexOf(g)},_composedTreeContains:function(g,h){var l,n;if(g.contains(h))return!0;g=Polymer.dom(g).querySelectorAll("content,slot");for(l=0;l<g.length;++l){var m=Polymer.dom(g[l]).getDistributedNodes();for(n=0;n<m.length;++n)if(m[n].nodeType===Node.ELEMENT_NODE&&this._composedTreeContains(m[n],h))return!0}return!1},_scrollInteractionHandler:function(g){g.cancelable&&
this._shouldPreventScrolling(g)&&g.preventDefault();g.targetTouches&&(g=g.targetTouches[0],a=g.pageX,b=g.pageY)},_lockScrollInteractions:function(){this._boundScrollHandler=this._boundScrollHandler||this._scrollInteractionHandler.bind(this);for(var g=0,h=f.length;g<h;g++)document.addEventListener(f[g],this._boundScrollHandler,{capture:!0,passive:!1})},_unlockScrollInteractions:function(){for(var g=0,h=f.length;g<h;g++)document.removeEventListener(f[g],this._boundScrollHandler,{capture:!0,passive:!1})},
_shouldPreventScrolling:function(g){var h=Polymer.dom(g).rootTarget;"touchmove"!==g.type&&c!==h&&(c=h,e=this._getScrollableNodes(Polymer.dom(g).path));if(!e.length)return!0;if("touchstart"===g.type)return!1;g=this._getScrollInfo(g);return!this._getScrollingNode(e,g.deltaX,g.deltaY)},_getScrollableNodes:function(g){for(var h=[],l=g.indexOf(this.currentLockingElement),n=0;n<=l;n++)if(g[n].nodeType===Node.ELEMENT_NODE){var m=g[n],q=m.style;"scroll"!==q.overflow&&"auto"!==q.overflow&&(q=window.getComputedStyle(m));
"scroll"!==q.overflow&&"auto"!==q.overflow||h.push(m)}return h},_getScrollingNode:function(g,h,l){if(h||l)for(var n=Math.abs(l)>=Math.abs(h),m=0;m<g.length;m++){var q=g[m];if(n?0>l?0<q.scrollTop:q.scrollTop<q.scrollHeight-q.clientHeight:0>h?0<q.scrollLeft:q.scrollLeft<q.scrollWidth-q.clientWidth)return q}},_getScrollInfo:function(g){var h={deltaX:g.deltaX,deltaY:g.deltaY};"deltaX"in g||("wheelDeltaX"in g&&"wheelDeltaY"in g?(h.deltaX=-g.wheelDeltaX,h.deltaY=-g.wheelDeltaY):"wheelDelta"in g?(h.deltaX=
0,h.deltaY=-g.wheelDelta):"axis"in g?(h.deltaX=1===g.axis?g.detail:0,h.deltaY=2===g.axis?g.detail:0):g.targetTouches&&(g=g.targetTouches[0],h.deltaX=a-g.pageX,h.deltaY=b-g.pageY));return h}}})();
</script>



<script>//~~WEBPATH~~/iron-overlay-behavior/iron-focusables-helper.html.js
(function(){var a=Element.prototype,b=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;Polymer.IronFocusablesHelper={getTabbableNodes:function(c){var e=[];return this._collectTabbableNodes(c,e)?this._sortByTabIndex(e):e},isFocusable:function(c){return b.call(c,"input, select, textarea, button, object")?b.call(c,":not([disabled])"):b.call(c,"a[href], area[href], iframe, [tabindex], [contentEditable]")},isTabbable:function(c){return this.isFocusable(c)&&
b.call(c,':not([tabindex\x3d"-1"])')&&this._isVisible(c)},_normalizedTabIndex:function(c){return this.isFocusable(c)?(c=c.getAttribute("tabindex")||0,Number(c)):-1},_collectTabbableNodes:function(c,e){if(c.nodeType!==Node.ELEMENT_NODE||!this._isVisible(c))return!1;var f=this._normalizedTabIndex(c),g=0<f;0<=f&&e.push(c);c="content"===c.localName||"slot"===c.localName?Polymer.dom(c).getDistributedNodes():Polymer.dom(c.root||c).children;for(f=0;f<c.length;f++)g=this._collectTabbableNodes(c[f],e)||g;
return g},_isVisible:function(c){var e=c.style;return"hidden"!==e.visibility&&"none"!==e.display?(e=window.getComputedStyle(c),"hidden"!==e.visibility&&"none"!==e.display):!1},_sortByTabIndex:function(c){var e=c.length;if(2>e)return c;var f=Math.ceil(e/2);e=this._sortByTabIndex(c.slice(0,f));c=this._sortByTabIndex(c.slice(f));return this._mergeSortByTabIndex(e,c)},_mergeSortByTabIndex:function(c,e){for(var f=[];0<c.length&&0<e.length;)this._hasLowerTabOrder(c[0],e[0])?f.push(e.shift()):f.push(c.shift());
return f.concat(c,e)},_hasLowerTabOrder:function(c,e){c=Math.max(c.tabIndex,0);e=Math.max(e.tabIndex,0);return 0===c||0===e?e>c:c>e}}})();
</script>


<script>//~~WEBPATH~~/iron-overlay-behavior/iron-overlay-behavior.html.js
Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:"_openedChanged",type:Boolean,value:!1,notify:!0},canceled:{observer:"_canceledChanged",readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:"_withBackdropChanged",type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},allowClickThrough:{type:Boolean},alwaysOnTop:{type:Boolean},
scrollAction:{type:String},_manager:{type:Object,value:Polymer.IronOverlayManager},_focusedChild:{type:Object}},listeners:{"iron-resize":"_onIronResize"},observers:["__updateScrollObservers(isAttached, opened, scrollAction)"],get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Polymer.dom(this).querySelector("[autofocus]")||this},get _focusableNodes(){return Polymer.IronFocusablesHelper.getTabbableNodes(this)},ready:function(){this.__shouldRemoveTabIndex=
this.__isAnimating=!1;this.__firstFocusableNode=this.__lastFocusableNode=null;this.__rafs={};this.__scrollTop=this.__scrollLeft=this.__restoreFocusNode=null;this.__onCaptureScroll=this.__onCaptureScroll.bind(this);this.__rootNodes=null;this._ensureSetup()},attached:function(){this.opened&&this._openedChanged(this.opened);this._observer=Polymer.dom(this).observeNodes(this._onNodesChange)},detached:function(){Polymer.dom(this).unobserveNodes(this._observer);this._observer=null;for(var a in this.__rafs)null!==
this.__rafs[a]&&cancelAnimationFrame(this.__rafs[a]);this.__rafs={};Kk(this._manager,this);this.__isAnimating&&(this.opened?this._finishRenderOpened():(this._applyFocus(),this._finishRenderClosed()))},toggle:function(){this._setCanceled(!1);this.opened=!this.opened},open:function(){this._setCanceled(!1);this.opened=!0},close:function(){this._setCanceled(!1);this.opened=!1},cancel:function(a){this.fire("iron-overlay-canceled",a,{cancelable:!0}).defaultPrevented||(this._setCanceled(!0),this.opened=
!1)},invalidateTabbables:function(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline="none",this.style.display="none")},_openedChanged:function(a){a?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true");this.isAttached&&(this.__isAnimating=!0,this.__deraf("__openedChanged",this.__openedChanged))},_canceledChanged:function(){this.closingReason=this.closingReason||{};this.closingReason.canceled=
this.canceled},_withBackdropChanged:function(){this.withBackdrop&&!this.hasAttribute("tabindex")?(this.setAttribute("tabindex","-1"),this.__shouldRemoveTabIndex=!0):this.__shouldRemoveTabIndex&&(this.removeAttribute("tabindex"),this.__shouldRemoveTabIndex=!1);this.opened&&this.isAttached&&Jk(this._manager)},_prepareRenderOpened:function(){this.__restoreFocusNode=this._manager.deepActiveElement;this._preparePositioning();this.refit();this._finishPositioning();this.noAutoFocus&&document.activeElement===
this._focusNode&&(this._focusNode.blur(),this.__restoreFocusNode.focus())},_renderOpened:function(){this._finishRenderOpened()},_renderClosed:function(){this._finishRenderClosed()},_finishRenderOpened:function(){this.notifyResize();this.__isAnimating=!1;this.fire("iron-overlay-opened")},_finishRenderClosed:function(){this.style.display="none";this.style.zIndex="";this.notifyResize();this.__isAnimating=!1;this.fire("iron-overlay-closed",this.closingReason)},_preparePositioning:function(){this.style.transition=
this.style.webkitTransition="none";this.style.transform=this.style.webkitTransform="none";this.style.display=""},_finishPositioning:function(){this.style.display="none";this.scrollTop=this.scrollTop;this.style.transition=this.style.webkitTransition="";this.style.transform=this.style.webkitTransform="";this.style.display="";this.scrollTop=this.scrollTop},_applyFocus:function(){if(this.opened)this.noAutoFocus||this._focusNode.focus();else{this._focusNode.blur();this._focusedChild=null;if(this.restoreFocusOnClose&&
this.__restoreFocusNode){var a=this._manager.deepActiveElement;(a===document.body||Polymer.dom(this).deepContains(a))&&this.__restoreFocusNode.focus()}this.__restoreFocusNode=null;(a=Ik(this._manager))&&this!==a&&a._applyFocus()}},_onCaptureClick:function(a){this.noCancelOnOutsideClick||this.cancel(a)},_onCaptureFocus:function(a){if(this.withBackdrop){var b=Polymer.dom(a).path;-1===b.indexOf(this)?(a.stopPropagation(),this._applyFocus()):this._focusedChild=b[0]}},_onCaptureEsc:function(a){this.noCancelOnEscKey||
this.cancel(a)},_onCaptureTab:function(a){if(this.withBackdrop){this.__ensureFirstLastFocusables();var b=a.shiftKey,c=b?this.__firstFocusableNode:this.__lastFocusableNode;b=b?this.__lastFocusableNode:this.__firstFocusableNode;if(c===b)c=!0;else{var e=this._manager.deepActiveElement;c=e===c||e===this}c&&(a.preventDefault(),this._focusedChild=b,this._applyFocus())}},_onIronResize:function(){this.opened&&!this.__isAnimating&&this.__deraf("refit",this.refit)},_onNodesChange:function(){this.opened&&!this.__isAnimating&&
(this.invalidateTabbables(),this.notifyResize())},__ensureFirstLastFocusables:function(){if(!this.__firstFocusableNode||!this.__lastFocusableNode){var a=this._focusableNodes;this.__firstFocusableNode=a[0];this.__lastFocusableNode=a[a.length-1]}},__openedChanged:function(){this.opened?(this._prepareRenderOpened(),Hk(this._manager,this),this._applyFocus(),this._renderOpened()):(Kk(this._manager,this),this._applyFocus(),this._renderClosed())},__deraf:function(a,b){var c=this.__rafs;null!==c[a]&&cancelAnimationFrame(c[a]);
c[a]=requestAnimationFrame(function(){c[a]=null;b.call(this)}.bind(this))},__updateScrollObservers:function(a,b,c){a&&b&&this.__isValidScrollAction(c)?("lock"===c&&(this.__saveScrollPosition(),Polymer.IronScrollManager.pushScrollLock(this)),this.__addScrollListeners()):(Polymer.IronScrollManager.removeScrollLock(this),this.__removeScrollListeners())},__addScrollListeners:function(){if(!this.__rootNodes){this.__rootNodes=[];if(Polymer.Settings.useShadow)for(var a=this;a;)a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&
a.host&&this.__rootNodes.push(a),a=a.host||a.assignedSlot||a.parentNode;this.__rootNodes.push(document)}this.__rootNodes.forEach(function(b){b.addEventListener("scroll",this.__onCaptureScroll,{capture:!0,passive:!0})},this)},__removeScrollListeners:function(){this.__rootNodes&&this.__rootNodes.forEach(function(a){a.removeEventListener("scroll",this.__onCaptureScroll,{capture:!0,passive:!0})},this);this.isAttached||(this.__rootNodes=null)},__isValidScrollAction:function(a){return"lock"===a||"refit"===
a||"cancel"===a},__onCaptureScroll:function(a){if(!(this.__isAnimating||0<=Polymer.dom(a).path.indexOf(this)))switch(this.scrollAction){case "lock":this.__restoreScrollPosition();break;case "refit":this.__deraf("refit",this.refit);break;case "cancel":this.cancel(a)}},__saveScrollPosition:function(){document.scrollingElement?(this.__scrollTop=document.scrollingElement.scrollTop,this.__scrollLeft=document.scrollingElement.scrollLeft):(this.__scrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),
this.__scrollLeft=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))},__restoreScrollPosition:function(){document.scrollingElement?(document.scrollingElement.scrollTop=this.__scrollTop,document.scrollingElement.scrollLeft=this.__scrollLeft):(document.documentElement.scrollTop=document.body.scrollTop=this.__scrollTop,document.documentElement.scrollLeft=document.body.scrollLeft=this.__scrollLeft)}};
Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl];
</script>




<script>//~~WEBPATH~~/neon-animation/neon-animatable-behavior.html.js
Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:"_entryAnimationChanged",type:String},exitAnimation:{observer:"_exitAnimationChanged",type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{};this.animationConfig.entry=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=this.animationConfig||{};this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function(a,
b){for(var c in b)a[c]=b[c]},_cloneConfig:function(a){var b={isClone:!0};this._copyProperties(b,a);return b},_getAnimationConfigRecursive:function(a,b,c){if(this.animationConfig)if(this.animationConfig.value&&"function"===typeof this.animationConfig.value)this._warn(this._logf("playAnimation","Please put 'animationConfig' inside of your components 'properties' object instead of outside of it."));else{var e=a?this.animationConfig[a]:this.animationConfig;Array.isArray(e)||(e=[e]);if(e)for(var f,g=0;f=
e[g];g++)if(f.animatable)f.animatable._getAnimationConfigRecursive(f.type||a,b,c);else if(f.id){var h=b[f.id];h?(h.isClone||(b[f.id]=this._cloneConfig(h),h=b[f.id]),this._copyProperties(h,f)):b[f.id]=f}else c.push(f)}},getAnimationConfig:function(a){var b={},c=[];this._getAnimationConfigRecursive(a,b,c);for(var e in b)c.push(b[e]);return c}};
</script>


<script>//~~WEBPATH~~/neon-animation/neon-animation-runner-behavior.html.js
Polymer.NeonAnimationRunnerBehaviorImpl={_configureAnimations:function(a){var b=[],c=[];if(0<a.length)for(var e,f=0;e=a[f];f++){var g=document.createElement(e.name);if(g.isNeonAnimation){var h=null;g.configure||(g.configure=function(){return null});h=g.configure(e);c.push({result:h,config:e})}else console.warn(this.is+":",e.name,"not found!")}for(a=0;a<c.length;a++){h=c[a].result;e=c[a].config;try{"function"!=typeof h.cancel&&(h=document.timeline.play(h))}catch(l){h=null,console.warn("Couldnt play",
"(",e.name,").",l)}h&&b.push({neonAnimation:g,config:e,animation:h})}return b},_shouldComplete:function(a){for(var b=!0,c=0;c<a.length;c++)if("finished"!=a[c].animation.playState){b=!1;break}return b},_complete:function(a){for(var b=0;b<a.length;b++)a[b].neonAnimation.complete(a[b].config);for(b=0;b<a.length;b++)a[b].animation.cancel()},playAnimation:function(a,b){var c=this.getAnimationConfig(a);if(c){this._active=this._active||{};this._active[a]&&(this._complete(this._active[a]),delete this._active[a]);
var e=this._configureAnimations(c);if(0==e.length)this.fire("neon-animation-finish",b,{bubbles:!1});else for(this._active[a]=e,c=0;c<e.length;c++)e[c].animation.onfinish=function(){this._shouldComplete(e)&&(this._complete(e),delete this._active[a],this.fire("neon-animation-finish",b,{bubbles:!1}))}.bind(this)}},cancelAnimation:function(){for(var a in this._active){var b=this._active[a],c;for(c in b)b[c].animation.cancel()}this._active={}}};
Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl];
</script>




<script>//~~WEBPATH~~/neon-animation/neon-animation-behavior.html.js
Polymer.NeonAnimationBehavior={properties:{animationTiming:{type:Object,value:function(){return{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)",fill:"both"}}}},isNeonAnimation:!0,created:function(){document.body.animate||console.warn("No web animations detected. This element will not function without a web animations polyfill.")},timingFromConfig:function(a){if(a.timing)for(var b in a.timing)this.animationTiming[b]=a.timing[b];return this.animationTiming},setPrefixedProperty:function(a,b,c){for(var e=
{transform:["webkitTransform"],transformOrigin:["mozTransformOrigin","webkitTransformOrigin"]}[b],f,g=0;f=e[g];g++)a.style[f]=c;a.style[b]=c},complete:function(){}};
</script>




<script>//~~WEBPATH~~/neon-animation/animations/opaque-animation.html.js
Polymer({is:"opaque-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;this._effect=new KeyframeEffect(b,[{opacity:"1"},{opacity:"1"}],this.timingFromConfig(a));b.style.opacity="0";return this._effect},complete:function(a){a.node.style.opacity=""}});
</script>



<script>//~~WEBPATH~~/iron-dropdown/iron-dropdown-scroll-manager.html.js
(function(){var a=0,b=0,c=null,e=[],f=["wheel","mousewheel","DOMMouseScroll","touchstart","touchmove"];Polymer.IronDropdownScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function(g){var h=this.currentLockingElement;if(void 0===h)return!1;if(this._hasCachedLockedElement(g))return!0;if(this._hasCachedUnlockedElement(g))return!1;(h=!!h&&h!==g&&!this._composedTreeContains(h,g))?this._lockedElementCache.push(g):this._unlockedElementCache.push(g);
return h},pushScrollLock:function(g){0<=this._lockingElements.indexOf(g)||(0===this._lockingElements.length&&this._lockScrollInteractions(),this._lockingElements.push(g),this._lockedElementCache=[],this._unlockedElementCache=[])},removeScrollLock:function(g){g=this._lockingElements.indexOf(g);-1!==g&&(this._lockingElements.splice(g,1),this._lockedElementCache=[],this._unlockedElementCache=[],0===this._lockingElements.length&&this._unlockScrollInteractions())},_lockingElements:[],_lockedElementCache:null,
_unlockedElementCache:null,_hasCachedLockedElement:function(g){return-1<this._lockedElementCache.indexOf(g)},_hasCachedUnlockedElement:function(g){return-1<this._unlockedElementCache.indexOf(g)},_composedTreeContains:function(g,h){var l,n;if(g.contains(h))return!0;g=Polymer.dom(g).querySelectorAll("content");for(l=0;l<g.length;++l){var m=Polymer.dom(g[l]).getDistributedNodes();for(n=0;n<m.length;++n)if(this._composedTreeContains(m[n],h))return!0}return!1},_scrollInteractionHandler:function(g){g.cancelable&&
this._shouldPreventScrolling(g)&&g.preventDefault();g.targetTouches&&(g=g.targetTouches[0],a=g.pageX,b=g.pageY)},_lockScrollInteractions:function(){this._boundScrollHandler=this._boundScrollHandler||this._scrollInteractionHandler.bind(this);for(var g=0,h=f.length;g<h;g++)document.addEventListener(f[g],this._boundScrollHandler,{capture:!0,passive:!1})},_unlockScrollInteractions:function(){for(var g=0,h=f.length;g<h;g++)document.removeEventListener(f[g],this._boundScrollHandler,{capture:!0,passive:!1})},
_shouldPreventScrolling:function(g){var h=Polymer.dom(g).rootTarget;"touchmove"!==g.type&&c!==h&&(c=h,e=this._getScrollableNodes(Polymer.dom(g).path));if(!e.length)return!0;if("touchstart"===g.type)return!1;g=this._getScrollInfo(g);return!this._getScrollingNode(e,g.deltaX,g.deltaY)},_getScrollableNodes:function(g){for(var h=[],l=g.indexOf(this.currentLockingElement),n=0;n<=l;n++)if(g[n].nodeType===Node.ELEMENT_NODE){var m=g[n],q=m.style;"scroll"!==q.overflow&&"auto"!==q.overflow&&(q=window.getComputedStyle(m));
"scroll"!==q.overflow&&"auto"!==q.overflow||h.push(m)}return h},_getScrollingNode:function(g,h,l){if(h||l)for(var n=Math.abs(l)>=Math.abs(h),m=0;m<g.length;m++){var q=g[m];if(n?0>l?0<q.scrollTop:q.scrollTop<q.scrollHeight-q.clientHeight:0>h?0<q.scrollLeft:q.scrollLeft<q.scrollWidth-q.clientWidth)return q}},_getScrollInfo:function(g){var h={deltaX:g.deltaX,deltaY:g.deltaY};"deltaX"in g||("wheelDeltaX"in g?(h.deltaX=-g.wheelDeltaX,h.deltaY=-g.wheelDeltaY):"axis"in g?(h.deltaX=1===g.axis?g.detail:0,
h.deltaY=2===g.axis?g.detail:0):g.targetTouches&&(g=g.targetTouches[0],h.deltaX=a-g.pageX,h.deltaY=b-g.pageY));return h}}})();
</script>




<dom-module id="iron-dropdown">
  <template>
    <style>
      :host {
        position: fixed;
      }

      #contentWrapper ::content > * {
        overflow: auto;
      }

      #contentWrapper.animating ::content > * {
        overflow: hidden;
      }
    </style>

    <div id="contentWrapper">
      <content id="content" select=".dropdown-content"></content>
    </div>
  </template>

  <script>//~~WEBPATH~~/iron-dropdown/iron-dropdown.html.js
Polymer({is:"iron-dropdown",behaviors:[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.IronOverlayBehavior,Polymer.NeonAnimationRunnerBehavior],properties:{horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},openAnimationConfig:{type:Object},closeAnimationConfig:{type:Object},focusTarget:{type:Object},noAnimations:{type:Boolean,value:!1},allowOutsideScroll:{type:Boolean,value:!1},_boundOnCaptureScroll:{type:Function,
value:function(){return this._onCaptureScroll.bind(this)}}},listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},observers:["_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)"],get containedElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},get _focusTarget(){return this.focusTarget||this.containedElement},ready:function(){this._scrollLeft=this._scrollTop=0;this._refitOnScrollRAF=null},attached:function(){this.sizingTarget&&
this.sizingTarget!==this||(this.sizingTarget=this.containedElement||this)},detached:function(){this.cancelAnimation();document.removeEventListener("scroll",this._boundOnCaptureScroll);Polymer.IronDropdownScrollManager.removeScrollLock(this)},_openedChanged:function(){this.opened&&this.disabled?this.cancel():(this.cancelAnimation(),this._updateAnimationConfig(),this._saveScrollPosition(),this.opened?(document.addEventListener("scroll",this._boundOnCaptureScroll),!this.allowOutsideScroll&&Polymer.IronDropdownScrollManager.pushScrollLock(this)):
(document.removeEventListener("scroll",this._boundOnCaptureScroll),Polymer.IronDropdownScrollManager.removeScrollLock(this)),Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments))},_renderOpened:function(){!this.noAnimations&&this.animationConfig.open?(this.$.contentWrapper.classList.add("animating"),this.playAnimation("open")):Polymer.IronOverlayBehaviorImpl._renderOpened.apply(this,arguments)},_renderClosed:function(){!this.noAnimations&&this.animationConfig.close?(this.$.contentWrapper.classList.add("animating"),
this.playAnimation("close")):Polymer.IronOverlayBehaviorImpl._renderClosed.apply(this,arguments)},_onNeonAnimationFinish:function(){this.$.contentWrapper.classList.remove("animating");this.opened?this._finishRenderOpened():this._finishRenderClosed()},_onCaptureScroll:function(){this.allowOutsideScroll?(this._refitOnScrollRAF&&window.cancelAnimationFrame(this._refitOnScrollRAF),this._refitOnScrollRAF=window.requestAnimationFrame(this.refit.bind(this))):this._restoreScrollPosition()},_saveScrollPosition:function(){document.scrollingElement?
(this._scrollTop=document.scrollingElement.scrollTop,this._scrollLeft=document.scrollingElement.scrollLeft):(this._scrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._scrollLeft=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))},_restoreScrollPosition:function(){document.scrollingElement?(document.scrollingElement.scrollTop=this._scrollTop,document.scrollingElement.scrollLeft=this._scrollLeft):(document.documentElement.scrollTop=this._scrollTop,
document.documentElement.scrollLeft=this._scrollLeft,document.body.scrollTop=this._scrollTop,document.body.scrollLeft=this._scrollLeft)},_updateAnimationConfig:function(){for(var a=this.containedElement,b=[].concat(this.openAnimationConfig||[]).concat(this.closeAnimationConfig||[]),c=0;c<b.length;c++)b[c].node=a;this.animationConfig={open:this.openAnimationConfig,close:this.closeAnimationConfig}},_updateOverlayPosition:function(){this.isAttached&&this.notifyResize()},_applyFocus:function(){var a=
this.focusTarget||this.containedElement;a&&this.opened&&!this.noAutoFocus?a.focus():Polymer.IronOverlayBehaviorImpl._applyFocus.apply(this,arguments)}});
</script>
</dom-module>






<script>//~~WEBPATH~~/neon-animation/animations/fade-in-animation.html.js
Polymer({is:"fade-in-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){return this._effect=new KeyframeEffect(a.node,[{opacity:"0"},{opacity:"1"}],this.timingFromConfig(a))}});
</script>






<script>//~~WEBPATH~~/neon-animation/animations/fade-out-animation.html.js
Polymer({is:"fade-out-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){return this._effect=new KeyframeEffect(a.node,[{opacity:"1"},{opacity:"0"}],this.timingFromConfig(a))}});
</script>







<script>//~~WEBPATH~~/paper-menu-button/paper-menu-button-animations.html.js
Polymer({is:"paper-menu-grow-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().height;return this._effect=new KeyframeEffect(b,[{height:c/2+"px"},{height:c+"px"}],this.timingFromConfig(a))}});Polymer({is:"paper-menu-grow-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().width;return this._effect=new KeyframeEffect(b,[{width:c/2+"px"},{width:c+"px"}],this.timingFromConfig(a))}});
Polymer({is:"paper-menu-shrink-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().width;return this._effect=new KeyframeEffect(b,[{width:c+"px"},{width:c-c/20+"px"}],this.timingFromConfig(a))}});
Polymer({is:"paper-menu-shrink-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().height;this.setPrefixedProperty(b,"transformOrigin","0 0");return this._effect=new KeyframeEffect(b,[{height:c+"px",transform:"translateY(0)"},{height:c/2+"px",transform:"translateY(-20px)"}],this.timingFromConfig(a))}});
</script>






<dom-module id="paper-menu-button">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;

        @apply(--paper-menu-button);
      }

      :host([disabled]) {
        cursor: auto;
        color: var(--disabled-text-color);

        @apply(--paper-menu-button-disabled);
      }

      iron-dropdown {
        @apply(--paper-menu-button-dropdown);
      }

      .dropdown-content {
        @apply(--shadow-elevation-2dp);

        position: relative;
        border-radius: 2px;
        background-color: var(--paper-menu-button-dropdown-background, --primary-background-color);

        @apply(--paper-menu-button-content);
      }

      :host([vertical-align="top"]) .dropdown-content {
        margin-bottom: 20px;
        margin-top: -10px;
        top: 10px;
      }

      :host([vertical-align="bottom"]) .dropdown-content {
        bottom: 10px;
        margin-bottom: -10px;
        margin-top: 20px;
      }
      
      #trigger {
        cursor: pointer;
      }
    </style>

    <div id="trigger" on-tap="toggle">
      <content select=".dropdown-trigger"></content>
    </div>

    <iron-dropdown id="dropdown" opened="{{opened}}" horizontal-align="[[horizontalAlign]]" vertical-align="[[verticalAlign]]" dynamic-align="[[dynamicAlign]]" horizontal-offset="[[horizontalOffset]]" vertical-offset="[[verticalOffset]]" no-overlap="[[noOverlap]]" open-animation-config="[[openAnimationConfig]]" close-animation-config="[[closeAnimationConfig]]" no-animations="[[noAnimations]]" focus-target="[[_dropdownContent]]" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]" on-iron-overlay-canceled="__onIronOverlayCanceled">
      <div class="dropdown-content">
        <content id="content" select=".dropdown-content"></content>
      </div>
    </iron-dropdown>
  </template>

  <script>//~~WEBPATH~~/paper-menu-button/paper-menu-button.html.js
function Nk(){}T=Nk.prototype;T.registered=function(){};T.addOwnKeyBinding=function(){};T.removeOwnKeyBindings=function(){};T.keyboardEventMatchesKeys=function(){};T._collectKeyBindings=function(){};T._prepKeyBindings=function(){};T._addKeyBinding=function(){};T._resetKeyEventListeners=function(){};T._listenKeyEventListeners=function(){};T._unlistenKeyEventListeners=function(){};T._onKeyBindingEvent=function(){};T._triggerKeyHandler=function(){};
T._focusBlurHandler=function(a){if(Polymer.Element)this._setFocused("focus"===a.type);else if(a.target===this)this._setFocused("focus"===a.type);else if(this.__handleEventRetargeting){var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}};T._changedControlState=function(){this._controlStateChanged&&this._controlStateChanged()};T._setFocused=function(){};
(function(){var a={ANIMATION_CUBIC_BEZIER:"cubic-bezier(.3,.95,.5,1)",MAX_ANIMATION_TIME_MS:400};Nk=Polymer({is:"paper-menu-button",behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronControlState],properties:{opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,
value:0,notify:!0},noOverlap:{type:Boolean},noAnimations:{type:Boolean,value:!1},ignoreSelect:{type:Boolean,value:!1},closeOnActivate:{type:Boolean,value:!1},openAnimationConfig:{type:Object,value:function(){return[{name:"fade-in-animation",timing:{delay:100,duration:200}},{name:"paper-menu-grow-width-animation",timing:{delay:100,duration:150,easing:a.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-grow-height-animation",timing:{delay:100,duration:275,easing:a.ANIMATION_CUBIC_BEZIER}}]}},closeAnimationConfig:{type:Object,
value:function(){return[{name:"fade-out-animation",timing:{duration:150}},{name:"paper-menu-shrink-width-animation",timing:{delay:100,duration:50,easing:a.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-shrink-height-animation",timing:{duration:200,easing:"ease-in"}}]}},allowOutsideScroll:{type:Boolean,value:!1},restoreFocusOnClose:{type:Boolean,value:!0},_dropdownContent:{type:Object}},hostAttributes:{role:"group","aria-haspopup":"true"},listeners:{"iron-activate":"_onIronActivate","iron-select":"_onIronSelect"},
get contentElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},toggle:function(){this.opened?this.close():this.open()},open:function(){this.disabled||this.$.dropdown.open()},close:function(){this.$.dropdown.close()},_onIronSelect:function(){this.ignoreSelect||this.close()},_onIronActivate:function(){this.closeOnActivate&&this.close()},_openedChanged:function(b,c){b?(this._dropdownContent=this.contentElement,this.fire("paper-dropdown-open")):null!=c&&this.fire("paper-dropdown-close")},
_disabledChanged:function(b){Polymer.IronControlState._disabledChanged.apply(this,arguments);b&&this.opened&&this.close()},__onIronOverlayCanceled:function(b){var c=b.detail;Polymer.dom(c);var e=this.$.trigger;-1<Polymer.dom(c).path.indexOf(e)&&b.preventDefault()}});Object.keys(a).forEach(function(b){Nk[b]=a[b]});Polymer.PaperMenuButton=Nk})();
</script>
</dom-module>







<script>//~~WEBPATH~~/iron-iconset-svg/iron-iconset-svg.html.js
Polymer({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1},useGlobalRtlAttribute:{type:Boolean,value:!1}},created:function(){this._meta=new Polymer.IronMeta({type:"iconset",key:null,value:null})},attached:function(){this.style.display="none"},getIconNames:function(){this._icons=this._createIconMap();return Object.keys(this._icons).map(function(a){return this.name+":"+a},this)},applyIcon:function(a,b){this.removeIcon(a);
if(b=this._cloneIcon(b,this.rtlMirroring&&this._targetIsRTL(a))){var c=Polymer.dom(a.root||a);c.insertBefore(b,c.childNodes[0]);return a._svgIcon=b}return null},removeIcon:function(a){a._svgIcon&&(Polymer.dom(a.root||a).removeChild(a._svgIcon),a._svgIcon=null)},_targetIsRTL:function(a){null==this.__targetIsRTL&&(this.useGlobalRtlAttribute?this.__targetIsRTL="rtl"===(document.body&&document.body.hasAttribute("dir")?document.body:document.documentElement).getAttribute("dir"):(a&&a.nodeType!==Node.ELEMENT_NODE&&
(a=a.host),this.__targetIsRTL=a&&"rtl"===window.getComputedStyle(a).direction));return this.__targetIsRTL},_nameChanged:function(){this._meta.value=null;this._meta.key=this.name;this._meta.value=this;this.async(function(){this.fire("iron-iconset-added",this,{node:window})})},_createIconMap:function(){var a=Object.create(null);Polymer.dom(this).querySelectorAll("[id]").forEach(function(b){a[b.id]=b});return a},_cloneIcon:function(a,b){this._icons=this._icons||this._createIconMap();return this._prepareSvgClone(this._icons[a],
this.size,b)},_prepareSvgClone:function(a,b,c){if(a){a=a.cloneNode(!0);var e=document.createElementNS("http://www.w3.org/2000/svg","svg");b=a.getAttribute("viewBox")||"0 0 "+b+" "+b;var f="pointer-events: none; display: block; width: 100%; height: 100%;";c&&a.hasAttribute("mirror-in-rtl")&&(f+="-webkit-transform:scale(-1,1);transform:scale(-1,1);transform-origin:center;");e.setAttribute("viewBox",b);e.setAttribute("preserveAspectRatio","xMidYMid meet");e.setAttribute("focusable","false");e.style.cssText=
f;e.appendChild(a).removeAttribute("id");return e}return null}});
</script>


<iron-iconset-svg name="paper-dropdown-menu" size="24">
<svg><defs>
<g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g>
</defs></svg>
</iron-iconset-svg>



<dom-module id="paper-dropdown-menu-shared-styles">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        text-align: left;

        /* NOTE(cdata): Both values are needed, since some phones require the
         * value to be `transparent`.
         */
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        -webkit-tap-highlight-color: transparent;

        --paper-input-container-input: {
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          max-width: 100%;
          box-sizing: border-box;
          cursor: pointer;
        };

        @apply(--paper-dropdown-menu);
      }

      :host([disabled]) {
        @apply(--paper-dropdown-menu-disabled);
      }

      :host([noink]) paper-ripple {
        display: none;
      }

      :host([no-label-float]) paper-ripple {
        top: 8px;
      }

      paper-ripple {
        top: 12px;
        left: 0px;
        bottom: 8px;
        right: 0px;

        @apply(--paper-dropdown-menu-ripple);
      }

      paper-menu-button {
        display: block;
        padding: 0;

        @apply(--paper-dropdown-menu-button);
      }

      paper-input {
        @apply(--paper-dropdown-menu-input);
      }

      iron-icon {
        color: var(--disabled-text-color);

        @apply(--paper-dropdown-menu-icon);
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-dropdown-menu">
  <template>
    <style include="paper-dropdown-menu-shared-styles"></style>

    
    <span role="button"></span>
    <paper-menu-button id="menuButton" vertical-align="[[verticalAlign]]" horizontal-align="[[horizontalAlign]]" dynamic-align="[[dynamicAlign]]" vertical-offset="[[_computeMenuVerticalOffset(noLabelFloat)]]" disabled="[[disabled]]" no-animations="[[noAnimations]]" on-iron-select="_onIronSelect" on-iron-deselect="_onIronDeselect" opened="{{opened}}" close-on-activate allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]">
      <div class="dropdown-trigger">
        <paper-ripple></paper-ripple>
        
        <paper-input type="text" invalid="[[invalid]]" readonly disabled="[[disabled]]" value="[[selectedItemLabel]]" placeholder="[[placeholder]]" error-message="[[errorMessage]]" always-float-label="[[alwaysFloatLabel]]" no-label-float="[[noLabelFloat]]" label="[[label]]">
          <iron-icon icon="paper-dropdown-menu:arrow-drop-down" suffix></iron-icon>
        </paper-input>
      </div>
      <content id="content" select=".dropdown-content"></content>
    </paper-menu-button>
  </template>

  <script>//~~WEBPATH~~/paper-dropdown-menu/paper-dropdown-menu.html.js
Polymer({is:"paper-dropdown-menu",behaviors:[Polymer.IronButtonState,Polymer.IronControlState,Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior],properties:{selectedItemLabel:{type:String,notify:!0,readOnly:!0},selectedItem:{type:Object,notify:!0,readOnly:!0},value:{type:String,notify:!0,readOnly:!0},label:{type:String},placeholder:{type:String},errorMessage:{type:String},opened:{type:Boolean,notify:!0,value:!1,observer:"_openedChanged"},allowOutsideScroll:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,
value:!1,reflectToAttribute:!0},alwaysFloatLabel:{type:Boolean,value:!1},noAnimations:{type:Boolean,value:!1},horizontalAlign:{type:String,value:"right"},verticalAlign:{type:String,value:"top"},dynamicAlign:{type:Boolean},restoreFocusOnClose:{type:Boolean,value:!0}},listeners:{tap:"_onTap"},keyBindings:{"up down":"open",esc:"close"},hostAttributes:{role:"combobox","aria-autocomplete":"none","aria-haspopup":"true"},observers:["_selectedItemChanged(selectedItem)"],attached:function(){var a=this.contentElement;
a&&a.selectedItem&&this._setSelectedItem(a.selectedItem)},get contentElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},open:function(){this.$.menuButton.open()},close:function(){this.$.menuButton.close()},_onIronSelect:function(a){this._setSelectedItem(a.detail.item)},_onIronDeselect:function(){this._setSelectedItem(null)},_onTap:function(a){Polymer.Gestures.findOriginalTarget(a)===this&&this.open()},_selectedItemChanged:function(a){a=a?a.label||a.getAttribute("label")||a.textContent.trim():
"";this._setValue(a);this._setSelectedItemLabel(a)},_computeMenuVerticalOffset:function(a){return a?-4:8},_getValidity:function(){return this.disabled||!this.required||this.required&&!!this.value},_openedChanged:function(){var a=this.opened?"true":"false",b=this.contentElement;b&&b.setAttribute("aria-expanded",a)}});
</script>
</dom-module>










<script>//~~WEBPATH~~/paper-item/paper-item-behavior.html.js
Polymer.PaperItemBehaviorImpl={hostAttributes:{role:"option",tabindex:"0"}};Polymer.PaperItemBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperItemBehaviorImpl];
</script>






<dom-module id="paper-item-shared-styles">
  <template>
    <style>
      :host, .paper-item {
        display: block;
        position: relative;
        min-height: var(--paper-item-min-height, 48px);
        padding: 0px 16px;
      }

      .paper-item {
        @apply --paper-font-subhead;
        border:none;
        outline: none;
        background: white;
        width: 100%;
        text-align: left;
      }

      :host([hidden]), .paper-item[hidden] {
        display: none !important;
      }

      :host(.iron-selected), .paper-item.iron-selected {
        font-weight: var(--paper-item-selected-weight, bold);

        @apply --paper-item-selected;
      }

      :host([disabled]), .paper-item[disabled] {
        color: var(--paper-item-disabled-color, var(--disabled-text-color));

        @apply --paper-item-disabled;
      }

      :host(:focus), .paper-item:focus {
        position: relative;
        outline: 0;

        @apply --paper-item-focused;
      }

      :host(:focus):before, .paper-item:focus:before {
        @apply --layout-fit;

        background: currentColor;
        content: '';
        opacity: var(--dark-divider-opacity);
        pointer-events: none;

        @apply --paper-item-focused-before;
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-item">
  <template>
    <style include="paper-item-shared-styles">
      :host {
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --paper-font-subhead;

        @apply --paper-item;
      }
    </style>
    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-item/paper-item.html.js
Polymer({is:"paper-item",behaviors:[Polymer.PaperItemBehavior]});
</script>
</dom-module>








<script>//~~WEBPATH~~/iron-selector/iron-selection.html.js
Polymer.IronSelection=function(a){this.selection=[];this.selectCallback=a};function Ok(a,b,c){if(null!=b&&c!==a.isSelected(b)){if(c)a.selection.push(b);else{var e=a.selection.indexOf(b);0<=e&&a.selection.splice(e,1)}a.selectCallback&&a.selectCallback(b,c)}}
Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&Ok(this,b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(Ok(this,this.get(),!1),Ok(this,a,!0))},toggle:function(a){Ok(this,a,!this.isSelected(a))}};
</script>


<script>//~~WEBPATH~~/iron-selector/iron-selectable.html.js
Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:"tap",observer:"_activateEventChanged"},selectable:String,selectedClass:{type:String,value:"iron-selected"},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,
"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:["_updateAttrForSelected(attrForSelected)","_updateSelected(selected)","_checkFallback(fallbackSelection)"],created:function(){this._bindFilterItem=this._filterItem.bind(this);this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this);this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer);this._removeListener(this.activateEvent)},
indexOf:function(a){return this.items?this.items.indexOf(a):-1},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length;a=(Number(this._valueToIndex(this.selected))-1+a)%a;this.selected=this._indexToValue(a)},selectNext:function(){var a=(Number(this._valueToIndex(this.selected))+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._observer&&"function"===typeof this._observer.flush?
this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(a){this.listen(this,a,"_activateHandler")},_removeListener:function(a){this.unlisten(this,a,"_activateHandler")},_activateEventChanged:function(a,b){this._removeListener(b);this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||"*");a=Array.prototype.filter.call(a,this._bindFilterItem);
this._setItems(a)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var a=this._valueToItem(this.selected);a?this._selection.select(a):this._selection.clear();this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},
_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected)for(var b=0,c;c=this.items[b];b++){if(this._valueForItem(c)==a)return b}else return Number(a)},_indexToValue:function(a){if(this.attrForSelected){if(a=this.items[a])return this._valueForItem(a)}else return a},_valueForItem:function(a){if(!a)return null;if(!this.attrForSelected)return a=this.indexOf(a),-1===a?null:a;var b=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];
return void 0!=b?b:a.getAttribute(this.attrForSelected)},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a);this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a);this._selectionChange();this.fire("iron-"+(b?"select":"deselect"),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(b){this._updateItems();this._updateSelected();this.fire("iron-items-changed",
b,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){a=a.target;for(var b=this.items;a&&a!=this;){var c=b.indexOf(a);if(0<=c){b=this._indexToValue(c);this._itemActivate(b,a);break}a=a.parentNode}},_itemActivate:function(a,b){this.fire("iron-activate",{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};
</script>


<script>//~~WEBPATH~~/iron-selector/iron-multi-selectable.html.js
Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:"multiChanged"},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:["_updateSelected(selectedValues.splices)"],select:function(a){this.multi?this._toggleSelected(a):this.selected=a},multiChanged:function(a){this._selection.multi=a;this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||
null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){a=
a||[];a=(this._valuesToItems(a)||[]).filter(function(c){return null!==c&&void 0!==c});this._selection.clear(a);for(var b=0;b<a.length;b++)Ok(this._selection,a[b],!0);this.fallbackSelection&&!this._selection.get().length&&this._valueToItem(this.fallbackSelection)&&this.select(this.fallbackSelection)},_selectionChange:function(){var a=this._selection.get();this.multi?(this._setSelectedItems(a),this._setSelectedItem(a.length?a[0]:null)):null!==a&&void 0!==a?(this._setSelectedItems([a]),this._setSelectedItem(a)):
(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push("selectedValues",a):this.splice("selectedValues",b,1)},_valuesToItems:function(a){return null==a?null:a.map(function(b){return this._valueToItem(b)},this)}};Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];
</script>



<script>//~~WEBPATH~~/iron-menu-behavior/iron-menu-behavior.html.js
Polymer.IronMenuBehaviorImpl={properties:{focusedItem:{observer:"_focusedItemChanged",readOnly:!0,type:Object},attrForItemTitle:{type:String},disabled:{type:Boolean,value:!1,observer:"_disabledChanged"}},_MODIFIER_KEYS:"Alt AltGraph CapsLock Control Fn FnLock Hyper Meta NumLock OS ScrollLock Shift Super Symbol SymbolLock".split(" "),_SEARCH_RESET_TIMEOUT_MS:1E3,_previousTabIndex:0,hostAttributes:{role:"menu"},observers:["_updateMultiselectable(multi)"],listeners:{focus:"_onFocus",keydown:"_onKeydown",
"iron-items-changed":"_onIronItemsChanged"},keyBindings:{up:"_onUpKey",down:"_onDownKey",esc:"_onEscKey","shift+tab:keydown":"_onShiftTabDown"},attached:function(){this._resetTabindices()},select:function(a){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null);var b=this._valueToItem(a);b&&b.hasAttribute("disabled")||(this._setFocusedItem(b),Polymer.IronMultiSelectableBehaviorImpl.select.apply(this,arguments))},_resetTabindices:function(){var a=this.multi?
this.selectedItems&&this.selectedItems[0]:this.selectedItem;this.items.forEach(function(b){b.setAttribute("tabindex",b===a?"0":"-1")},this)},_updateMultiselectable:function(a){a?this.setAttribute("aria-multiselectable","true"):this.removeAttribute("aria-multiselectable")},_focusWithKeyboardEvent:function(a){if(-1===this._MODIFIER_KEYS.indexOf(a.key)){this.cancelDebouncer("_clearSearchText");var b=this._searchText||"";b+=(a.key&&1==a.key.length?a.key:String.fromCharCode(a.keyCode)).toLocaleLowerCase();
a=b.length;for(var c=0,e;e=this.items[c];c++)if(!e.hasAttribute("disabled")){var f=this.attrForItemTitle||"textContent";f=(e[f]||e.getAttribute(f)||"").trim();if(!(f.length<a)&&f.slice(0,a).toLocaleLowerCase()==b){this._setFocusedItem(e);break}}this._searchText=b;this.debounce("_clearSearchText",this._clearSearchText,this._SEARCH_RESET_TIMEOUT_MS)}},_clearSearchText:function(){this._searchText=""},_focusPrevious:function(){for(var a=this.items.length,b=Number(this.indexOf(this.focusedItem)),c=1;c<
a+1;c++){var e=this.items[(b-c+a)%a];if(!e.hasAttribute("disabled")){var f=Polymer.dom(e).getOwnerRoot()||document;this._setFocusedItem(e);if(Polymer.dom(f).activeElement==e)break}}},_focusNext:function(){for(var a=this.items.length,b=Number(this.indexOf(this.focusedItem)),c=1;c<a+1;c++){var e=this.items[(b+c)%a];if(!e.hasAttribute("disabled")){var f=Polymer.dom(e).getOwnerRoot()||document;this._setFocusedItem(e);if(Polymer.dom(f).activeElement==e)break}}},_applySelection:function(a,b){b?a.setAttribute("aria-selected",
"true"):a.removeAttribute("aria-selected");Polymer.IronSelectableBehavior._applySelection.apply(this,arguments)},_focusedItemChanged:function(a,b){b&&b.setAttribute("tabindex","-1");!a||a.hasAttribute("disabled")||this.disabled||(a.setAttribute("tabindex","0"),a.focus())},_onIronItemsChanged:function(a){a.detail.addedNodes.length&&this._resetTabindices()},_onShiftTabDown:function(){var a=this.getAttribute("tabindex");Polymer.IronMenuBehaviorImpl._shiftTabPressed=!0;this._setFocusedItem(null);this.setAttribute("tabindex",
"-1");this.async(function(){this.setAttribute("tabindex",a);Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1},1)},_onFocus:function(a){!Polymer.IronMenuBehaviorImpl._shiftTabPressed&&(a=Polymer.dom(a).rootTarget,a===this||"undefined"===typeof a.tabIndex||this.isLightDescendant(a))&&(this._defaultFocusAsync=this.async(function(){var b=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this._setFocusedItem(null);b?this._setFocusedItem(b):this.items[0]&&this._focusNext()}))},_onUpKey:function(a){this._focusPrevious();
a.detail.keyboardEvent.preventDefault()},_onDownKey:function(a){this._focusNext();a.detail.keyboardEvent.preventDefault()},_onEscKey:function(){var a=this.focusedItem;a&&a.blur()},_onKeydown:function(a){this.keyboardEventMatchesKeys(a,"up down esc")||this._focusWithKeyboardEvent(a);a.stopPropagation()},_activateHandler:function(a){Polymer.IronSelectableBehavior._activateHandler.call(this,a);a.stopPropagation()},_disabledChanged:function(a){a?(this._previousTabIndex=this.hasAttribute("tabindex")?this.tabIndex:
0,this.removeAttribute("tabindex")):this.hasAttribute("tabindex")||this.setAttribute("tabindex",this._previousTabIndex)}};Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1;Polymer.IronMenuBehavior=[Polymer.IronMultiSelectableBehavior,Polymer.IronA11yKeysBehavior,Polymer.IronMenuBehaviorImpl];
</script>



<dom-module id="paper-menu-shared-styles">
  <template>
    <style>
      /* need a wrapper element to make this higher specificity than the :host rule in paper-item */
      .selectable-content > ::content > .iron-selected {
        font-weight: bold;

        @apply(--paper-menu-selected-item);
      }

      .selectable-content > ::content > [disabled] {
        color: var(--paper-menu-disabled-color, --disabled-text-color);
      }

      .selectable-content > ::content > *:focus {
        position: relative;
        outline: 0;

        @apply(--paper-menu-focused-item);
      }

      .selectable-content > ::content > *:focus:after {
        @apply(--layout-fit);
        background: currentColor;
        opacity: var(--dark-divider-opacity);
        content: '';
        pointer-events: none;

        @apply(--paper-menu-focused-item-after);
      }

      .selectable-content > ::content > *[colored]:focus:after {
        opacity: 0.26;
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-menu">
  <template>
    <style include="paper-menu-shared-styles"></style>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        background: var(--paper-menu-background-color, --primary-background-color);
        color: var(--paper-menu-color, --primary-text-color);

        @apply(--paper-menu);
      }
    </style>

    <div class="selectable-content">
      <content></content>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-menu/paper-menu.html.js
Polymer({is:"paper-menu",behaviors:[Polymer.IronMenuBehavior]});
</script>
</dom-module>







<script>//~~WEBPATH~~/vz-sorting/sorting.js
var Pk;
(function(a){function b(f,g){var h,l=h||(h={});l[l.NATURAL=0]="NATURAL";l[l.REAL=1]="REAL";l[l.EXPONENT_SIGN=2]="EXPONENT_SIGN";l[l.EXPONENT=3]="EXPONENT";for(l=h.NATURAL;g<f.length;g++)if(l===h.NATURAL)if("."===f[g])l=h.REAL;else if("e"===f[g]||"E"===f[g])l=h.EXPONENT_SIGN;else{if(!c(f[g]))break}else if(l===h.REAL)if("e"===f[g]||"E"===f[g])l=h.EXPONENT_SIGN;else{if(!c(f[g]))break}else if(l===h.EXPONENT_SIGN)if(c(f[g])||"+"===f[g]||"-"===f[g])l=h.EXPONENT;else break;else if(l===h.EXPONENT&&!c(f[g]))break;
return g}function c(f){return"0"<=f&&"9">=f}function e(f){return"/"===f||"_"===f||c(f)}a.compareTagNames=function(f,g){for(var h=0,l=0;;){if(h===f.length)return l===g.length?0:-1;if(l===g.length)return 1;if(c(f[h])&&c(g[l])){var n=h,m=l;h=b(f,h+1);l=b(g,l+1);n=parseFloat(f.slice(n,h));m=parseFloat(g.slice(m,l));if(n<m)return-1;if(n>m)return 1}else{if(e(f[h])){if(!e(g[l]))return-1}else{if(e(g[l]))return 1;if(f[h]<g[l])return-1;if(f[h]>g[l])return 1}h++;l++}}}})(Pk||(Pk={}));
</script>


<script>//~~WEBPATH~~/tf-backend/requestManager.js
var Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),Rk;
(function(a){function b(n,m,q,r){var v=new XMLHttpRequest;v.open(n,m);q&&(v.withCredentials=q);r&&v.setRequestHeader("Content-Type",r);return v}var c=function(n){function m(){var q=null!==n&&n.apply(this,arguments)||this;q.name="RequestCancellationError";return q}Qk(m,n);return m}(Error);a.RequestCancellationError=c;var e=function(n){function m(q){q=n.call(this,q)||this;q.name="InvalidRequestOptionsError";Object.setPrototypeOf(q,m.prototype);return q}Qk(m,n);return m}(Error);a.InvalidRequestOptionsError=
e;var f=function(n){function m(q,r){var v=n.call(this)||this;v.message="RequestNetworkError: "+q.status+" at "+r;v.name="RequestNetworkError";v.req=q;v.url=r;return v}Qk(m,n);return m}(Error);a.RequestNetworkError=f;var g;(function(n){n.GET="GET";n.POST="POST"})(g=a.HttpMethodType||(a.HttpMethodType={}));var h=function(){function n(){}n.prototype.validate=function(){if(this.methodType===g.GET&&this.body)throw new e("body must be missing for a GET request.");};return n}();a.RequestOptions=h;var l=
function(){function n(m,q){void 0===m&&(m=10);void 0===q&&(q=3);this._queue=[];this._nActiveRequests=0;this._nSimultaneousRequests=m;this._maxRetries=q}n.prototype.request=function(m,q){var r=new h;if(q){r.methodType=g.POST;var v=new FormData,u;for(u in q)u&&v.append(u,q[u]);r.body=v}else r.methodType=g.GET;return this.requestWithOptions(m,r)};n.prototype.requestWithOptions=function(m,q){var r=this;q.validate();return(new Promise(function(v,u){r._queue.push({resolve:v,reject:u});r.launchRequests()})).then(function(){return r.promiseWithRetries(m,
r._maxRetries,q)}).then(function(v){r._nActiveRequests--;r.launchRequests();return v},function(v){"RequestNetworkError"===v.name&&(r._nActiveRequests--,r.launchRequests());return Promise.reject(v)})};n.prototype.fetch=function(m,q){var r=this;return(new Promise(function(v,u){r._queue.push({resolve:v,reject:u});r.launchRequests()})).then(function(){var v=1;return new Promise(function(u){function w(){fetch(m,q).then(function(z){!z.ok&&r._maxRetries>v?(v++,w()):(u(z),r._nActiveRequests--,r.launchRequests())})}
w()})})};n.prototype.clearQueue=function(){for(;0<this._queue.length;)this._queue.pop().reject(new c("Request cancelled by clearQueue"))};n.prototype.activeRequests=function(){return this._nActiveRequests};n.prototype.outstandingRequests=function(){return this._nActiveRequests+this._queue.length};n.prototype.launchRequests=function(){for(;this._nActiveRequests<this._nSimultaneousRequests&&0<this._queue.length;)this._nActiveRequests++,this._queue.pop().resolve()};n.prototype.promiseWithRetries=function(m,
q,r){var v=this;return this._promiseFromUrl(m,r).then(function(u){return u},function(u){return 0<q?v.promiseWithRetries(m,q-1,r):Promise.reject(u)})};n.prototype._promiseFromUrl=function(m,q){return new Promise(function(r,v){var u=b(q.methodType,m,q.withCredentials,q.contentType);u.onload=function(){200===u.status?r(JSON.parse(u.responseText)):v(new f(u,m))};u.onerror=function(){v(new f(u,m))};q.body?u.send(q.body):u.send()})};return n}();a.RequestManager=l})(Rk||(Rk={}));
</script>
<script>//~~WEBPATH~~/tf-backend/urlPathHelpers.js
(function(a){a.addParams=function(b,c){var e=Object.keys(c).sort().filter(function(g){return void 0!==c[g]});if(!e.length)return b;var f=-1!==b.indexOf("?")?"\x26":"?";e=[].concat.apply([],e.map(function(g){var h=c[g];return(Array.isArray(h)?h:[h]).map(function(l){return g+"\x3d"+encodeURIComponent(l).replace(/\(/g,"%28").replace(/\)/g,"%29")})})).join("\x26");return b+f+e}})(Rk||(Rk={}));
</script>
<script>//~~WEBPATH~~/tf-backend/router.js
(function(a){function b(g){void 0===g&&(g="data");"/"===g[g.length-1]&&(g=g.slice(0,g.length-1));return{environment:function(){return c(g,"/environment")},experiments:function(){return c(g,"/experiments")},pluginRoute:function(h,l,n){return c(g+"/plugin","/"+h+l,n)},pluginsListing:function(){return c(g,"/plugins_listing")},runs:function(){return c(g,"/runs")},runsForExperiment:function(h){return c(g,"/experiment_runs",e({experiment:String(h)}))}}}function c(g,h,l){void 0===l&&(l=new URLSearchParams);
g+=h;String(l)&&(h=h.includes("?")?"\x26":"?",g+=h+String(l));return g}function e(g){void 0===g&&(g={});var h=Object.keys(g).sort().filter(function(n){return g[n]}),l=new URLSearchParams;h.forEach(function(n){var m=g[n];(Array.isArray(m)?m:[m]).forEach(function(q){return l.append(n,q)})});return l}var f=b();a.createRouter=b;a.getRouter=function(){return f};a.setRouter=function(g){if(null==g)throw Error("Router required, but got: "+g);f=g};a.createSearchParam=e})(Rk||(Rk={}));
</script>
<script>//~~WEBPATH~~/tf-backend/baseStore.js
(function(a){var b=function(){return function(e){this.listener=e}}();a.ListenKey=b;var c=function(){function e(){this.requestManager=new a.RequestManager(1);this._listeners=new Set;this.initialized=!1}e.prototype.refresh=function(){var f=this;return this.load().then(function(){f.initialized=!0})};e.prototype.addListener=function(f){f=new b(f);this._listeners.add(f);return f};e.prototype.removeListenerByKey=function(f){this._listeners.delete(f)};e.prototype.emitChange=function(){this._listeners.forEach(function(f){try{f.listener()}catch(g){}})};
return e}();a.BaseStore=c})(Rk||(Rk={}));
</script>
<script>//~~WEBPATH~~/tf-backend/environmentStore.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){var b;(function(e){e[e.DB=0]="DB";e[e.LOGDIR=1]="LOGDIR"})(b=a.Mode||(a.Mode={}));var c=function(e){function f(){return null!==e&&e.apply(this,arguments)||this}Qk(f,e);f.prototype.load=function(){var g=this,h=a.getRouter().environment();return this.requestManager.request(h).then(function(l){l={dataLocation:l.data_location,mode:"db"==l.mode?b.DB:b.LOGDIR,windowTitle:l.window_title};_.isEqual(g.environment,l)||(g.environment=l,g.emitChange())})};f.prototype.getDataLocation=function(){return this.environment?
this.environment.dataLocation:""};f.prototype.getMode=function(){return this.environment?this.environment.mode:null};f.prototype.getWindowTitle=function(){return this.environment?this.environment.windowTitle:""};return f}(a.BaseStore);a.EnvironmentStore=c;a.environmentStore=new c})(Rk||(Rk={}));
</script>
<script>//~~WEBPATH~~/tf-backend/experimentsStore.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){var b=function(c){function e(){var f=null!==c&&c.apply(this,arguments)||this;f._experiments=[];return f}Qk(e,c);e.prototype.load=function(){var f=this,g=a.getRouter().experiments();return this.requestManager.request(g).then(function(h){_.isEqual(f._experiments,h)||(f._experiments=h,f.emitChange())})};e.prototype.getExperiments=function(){return this._experiments.slice()};return e}(a.BaseStore);a.ExperimentsStore=b;a.experimentsStore=new b})(Rk||(Rk={}));
</script>
<script>//~~WEBPATH~~/tf-backend/runsStore.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){var b=function(c){function e(){var f=null!==c&&c.apply(this,arguments)||this;f._runs=[];return f}Qk(e,c);e.prototype.load=function(){var f=this,g=a.getRouter().runs();return this.requestManager.request(g).then(function(h){_.isEqual(f._runs,h)||(f._runs=h,f.emitChange())})};e.prototype.getRuns=function(){return this._runs.slice()};return e}(a.BaseStore);a.RunsStore=b;a.runsStore=new b})(Rk||(Rk={}));
</script>
<script>//~~WEBPATH~~/tf-backend/backend.js
(function(a){a.TYPES=[];a.getRunsNamed=function(b){return _.keys(b).sort(Pk.compareTagNames)};a.getTags=function(b){return _.union.apply(null,_.values(b)).sort(Pk.compareTagNames)};a.filterTags=function(b,c){var e=[];c.forEach(function(f){return e=e.concat(b[f])});return _.uniq(e).sort(Pk.compareTagNames)}})(Rk||(Rk={}));
</script>
<script>//~~WEBPATH~~/tf-backend/canceller.js
(function(a){var b=function(){function c(){this.cancellationCount=0}c.prototype.cancellable=function(e){var f=this,g=this.cancellationCount;return function(h){return e({value:h,cancelled:f.cancellationCount!==g})}};c.prototype.cancelAll=function(){this.cancellationCount++};return c}();a.Canceller=b})(Rk||(Rk={}));
</script>




<script>//~~WEBPATH~~/tf-categorization-utils/categorizationUtils.js
var Sk;
(function(a){function b(n,m){try{var q=new RegExp(m)}catch(r){q=null}return{name:m,metadata:{type:l.SEARCH_RESULTS,validRegex:!!q,universalRegex:".*"===m},items:q?n.filter(function(r){return r.match(q)}):[]}}function c(n,m){void 0===m&&(m="/");var q=[],r={};n.forEach(function(v){var u=v.indexOf(m);u=0<=u?v.slice(0,u):v;if(!r[u]){var w={name:u,metadata:{type:l.PREFIX_GROUP},items:[]};r[u]=w;q.push(w)}r[u].items.push(v)});return q}function e(n,m){void 0===m&&(m="");m=[b(n,m)];n=c(n);return[].concat(m,n)}
function f(n,m,q){var r=Rk.getTags(n);q=e(r,q);var v=g(_.pick(n,m));return q.map(function(u){return{name:u.name,metadata:u.metadata,items:u.items.map(function(w){return{tag:w,runs:(v.get(w)||[]).slice()}})}})}function g(n){var m=new Map;Object.keys(n).forEach(function(q){n[q].forEach(function(r){var v=m.get(r)||[];v.push(q);m.set(r,v)})});return m}function h(n,m){var q=Pk.compareTagNames(n.tag,m.tag);return 0!=q?q:Pk.compareTagNames(n.run,m.run)}var l;(function(n){n[n.SEARCH_RESULTS=0]="SEARCH_RESULTS";
n[n.PREFIX_GROUP=1]="PREFIX_GROUP"})(l=a.CategoryType||(a.CategoryType={}));a.categorizeBySearchQuery=b;a.categorizeByPrefix=c;a.categorize=e;a.categorizeTags=f;a.categorizeRunTagCombinations=function(n,m,q){return f(n,m,q).map(function(r){var v=_.flatten(r.items.map(function(u){var w=u.tag;return u.runs.map(function(z){return{tag:w,run:z}})}));v.sort(h);return{name:r.name,metadata:r.metadata,items:v}})}})(Sk||(Sk={}));
</script>






<dom-module id="iron-collapse">

  <template>

    <style>
      :host {
        display: block;
        transition-duration: var(--iron-collapse-transition-duration, 300ms);
        /* Safari 10 needs this property prefixed to correctly apply the custom property */
        -webkit-transition-duration: var(--iron-collapse-transition-duration, 300ms);
        overflow: visible;
      }

      :host(.iron-collapse-closed) {
        display: none;
      }

      :host(:not(.iron-collapse-opened)) {
        overflow: hidden;
      }
    </style>

    <slot></slot>

  </template>

</dom-module>

<script>//~~WEBPATH~~/iron-collapse/iron-collapse.html.js
Polymer({is:"iron-collapse",behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:!1,observer:"_horizontalChanged"},opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},transitioning:{type:Boolean,notify:!0,readOnly:!0},noAnimation:{type:Boolean},_desiredSize:{type:String,value:""}},get dimension(){return this.horizontal?"width":"height"},get _dimensionMax(){return this.horizontal?"maxWidth":"maxHeight"},get _dimensionMaxCss(){return this.horizontal?"max-width":
"max-height"},hostAttributes:{role:"group","aria-hidden":"true"},listeners:{transitionend:"_onTransitionEnd"},toggle:function(){this.opened=!this.opened},show:function(){this.opened=!0},hide:function(){this.opened=!1},updateSize:function(a,b){a="auto"===a?"":a;b=b&&!this.noAnimation&&this.isAttached&&this._desiredSize!==a;this._desiredSize=a;this._updateTransition(!1);b&&(b=this._calcSize(),""===a&&(this.style[this._dimensionMax]="",a=this._calcSize()),this.style[this._dimensionMax]=b,this.scrollTop=
this.scrollTop,this._updateTransition(!0),b=a!==b);this.style[this._dimensionMax]=a;b||this._transitionEnd()},enableTransition:function(a){Polymer.Base._warn("`enableTransition()` is deprecated, use `noAnimation` instead.");this.noAnimation=!a},_updateTransition:function(a){this.style.transitionDuration=a&&!this.noAnimation?"":"0s"},_horizontalChanged:function(){this.style.transitionProperty=this._dimensionMaxCss;this.style["maxWidth"===this._dimensionMax?"maxHeight":"maxWidth"]="";this.updateSize(this.opened?
"auto":"0px",!1)},_openedChanged:function(){this.setAttribute("aria-hidden",!this.opened);this._setTransitioning(!0);this.toggleClass("iron-collapse-closed",!1);this.toggleClass("iron-collapse-opened",!1);this.updateSize(this.opened?"auto":"0px",!0);this.opened&&this.focus()},_transitionEnd:function(){this.style[this._dimensionMax]=this._desiredSize;this.toggleClass("iron-collapse-closed",!this.opened);this.toggleClass("iron-collapse-opened",this.opened);this._updateTransition(!1);this.notifyResize();
this._setTransitioning(!1)},_onTransitionEnd:function(a){Polymer.dom(a).rootTarget===this&&this._transitionEnd()},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+"px"}});
</script>



<dom-module id="tf-category-pane">
  <template>
    <template is="dom-if" if="[[_rendered]]" id="ifRendered">
      <button class="heading" on-tap="_togglePane" open-button$="[[opened]]">
        <span class="name">
          <template is="dom-if" if="[[_isSearchResults]]">
            <template is="dom-if" if="[[_isCompositeSearch(category)]]">
              <span>Tags matching multiple experiments</span>
              <template is="dom-if" if="[[_isInvalidSearchResults]]">
                <span>&nbsp;<strong>(malformed regular expression)</strong></span>
              </template>
            </template>
            <template is="dom-if" if="[[!_isCompositeSearch(category)]]">
              <span class="light">Tags matching /</span>
              <span class="category-name">[[category.name]]</span>
              <span class="light">/</span>
              <template is="dom-if" if="[[_isUniversalSearchQuery]]">
                <span> (all tags)</span>
              </template>
              <template is="dom-if" if="[[_isInvalidSearchResults]]">
                <span> <strong>(malformed regular expression)</strong></span>
              </template>
            </template>
          </template>
          <template is="dom-if" if="[[!_isSearchResults]]">
            <span class="category-name">[[category.name]]</span>
          </template>
        </span>
        <span class="count"><span>[[_count]]</span></span>
      </button>
      
      <iron-collapse opened="[[opened]]" no-animation>
        <div class="content">
          <template is="dom-if" if="[[opened]]" restamp="[[restamp]]" id="ifOpened">
            <slot></slot>
          </template>
        </div>
      </iron-collapse>
    </template>
    <style>
      :host {
        display: block;
        margin: 0 5px 1px 10px;
      }

      :host:first-of-type {
        margin-top: 10px;
      }

      :host:last-of-type {
        margin-bottom: 20px;
      }

      .heading {
        background-color: white;
        border: none;
        cursor: pointer;
        width: 100%;
        font-size: 15px;
        line-height: 1;
        box-shadow: 0 1px 5px rgba(0,0,0,0.2);
        padding: 10px 15px;
      }

      .heading::-moz-focus-inner {
        padding: 10px 15px;
      }

      .content {
        padding: 15px;
        border: 1px solid #dedede;
        border-top: none;
        border-bottom-left-radius: 2px;
        border-bottom-right-radius: 2px;
        background: white;
      }

      [open-button] {
        border-bottom-left-radius: 0 !important;
        border-bottom-right-radius: 0 !important;
      }

      .name {
        display: inline-flex;
        float: left;
      }

      .light {
        color: var(--paper-grey-500);
      }

      .category-name {
        white-space: pre;
      }

      .count {
        float: right;
        margin-right: 5px;
        font-size: 12px;
        color: var(--paper-grey-500);
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-categorization-utils/tf-category-pane.html.js
Polymer({is:"tf-category-pane",properties:{category:Object,opened:{type:Boolean,value:!0,notify:!0},restamp:{type:Boolean,value:!0},_count:{type:Number,computed:"_computeCount(category.items.*)"},_rendered:{type:Boolean,computed:"_computeRendered(category)"},_isSearchResults:{type:Boolean,computed:"_computeIsSearchResults(category.metadata.type)"},_isInvalidSearchResults:{type:Boolean,computed:"_computeIsInvalidSearchResults(category.metadata)"},_isUniversalSearchQuery:{type:Boolean,computed:"_computeIsUniversalSearchQuery(category.metadata)"}},
listeners:{"dom-change":"_notifyVisibilityChange"},_notifyVisibilityChange:function(a){"ifRendered"!=a.target.id&&"ifOpened"!=a.target.id||this.fire("content-visibility-changed",this._rendered&&this.opened)},_computeCount:function(){return this.category.items.length},_togglePane:function(){this.set("opened",!this.opened)},_computeRendered:function(a){return!(a.metadata.type===Sk.CategoryType.SEARCH_RESULTS&&""===a.name)},_computeIsSearchResults:function(a){return a===Sk.CategoryType.SEARCH_RESULTS},
_computeIsInvalidSearchResults:function(a){return a.type===Sk.CategoryType.SEARCH_RESULTS&&!a.validRegex},_computeIsUniversalSearchQuery:function(a){return a.type===Sk.CategoryType.SEARCH_RESULTS&&a.universalRegex},_isCompositeSearch:function(){var a=this.category.metadata,b=a.type;return a.compositeSearch&&b===Sk.CategoryType.SEARCH_RESULTS}});
</script>
</dom-module>




<script>//~~WEBPATH~~/tf-globals/globals.js
var Tk;(function(a){var b=!1;a.setUseHash=function(e){b=e};a.useHash=function(){return b};var c="";a.setFakeHash=function(e){c=e};a.getFakeHash=function(){return c}})(Tk||(Tk={}));
</script>




<script>//~~WEBPATH~~/tf-storage/listeners.js
var Uk;
(function(a){var b=function(){return function(f){this.listener=f}}();a.ListenKey=b;var c=new Set,e=new Set;window.addEventListener("hashchange",function(){c.forEach(function(f){return f.listener()})});window.addEventListener("storage",function(){e.forEach(function(f){return f.listener()})});a.addHashListener=function(f){f=new b(f);c.add(f);return f};a.addStorageListener=function(f){f=new b(f);e.add(f);return f};a.fireStorageChanged=function(){e.forEach(function(f){return f.listener()})};a.removeHashListenerByKey=function(f){c.delete(f)};
a.removeStorageListenerByKey=function(f){e.delete(f)}})(Uk||(Uk={}));
</script>
<script>//~~WEBPATH~~/tf-storage/storage.js
var Vk=this&&this.__assign||Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++){b=arguments[c];for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])}return a};
(function(a){function b(n,m){function q(w,z){void 0===z&&(z={});var A=z.defaultValue;z=z.useLocalStorage;w=(void 0===z?0:z)?window.localStorage.getItem(w):h(e())[w];return void 0==w?_.cloneDeep(A):n(w)}function r(w,z,A){void 0===A&&(A={});var E=A.defaultValue,C=A.useLocalStorage;C=void 0===C?!1:C;A=A.useLocationReplace;A=void 0===A?!1:A;var D=m(z);C?(window.localStorage.setItem(w,D),a.fireStorageChanged()):_.isEqual(z,q(w,{useLocalStorage:C}))||(_.isEqual(z,E)?(z=h(e()),delete z[w],f(g(z))):(z=h(e()),
z[w]=D,f(g(z),A)))}var v=[],u=[];return{get:q,set:r,getInitializer:function(w,z){var A=Vk({defaultValue:z.defaultValue,polymerProperty:w,useLocalStorage:!1},z);return function(){function E(){var M=q(D,A);_.isEqual(M,C[A.polymerProperty])||(C[A.polymerProperty]=M)}var C=this,D=c(this,w),J=(A.useLocalStorage?a.addStorageListener:a.addHashListener)(function(){return E()});A.useLocalStorage?u.push(J):v.push(J);E();return this[A.polymerProperty]}},getObserver:function(w,z){var A=Vk({defaultValue:z.defaultValue,
polymerProperty:w,useLocalStorage:!1},z);return function(){var E=c(this,w);r(E,this[A.polymerProperty],A)}},disposeBinding:function(){v.forEach(function(w){return a.removeHashListenerByKey(w)});u.forEach(function(w){return a.removeStorageListenerByKey(w)})}}}function c(n,m){n=n[a.DISAMBIGUATOR];return(null==n?[m]:[n,m]).join(".")}function e(){return Tk.useHash()?window.location.hash.slice(1):Tk.getFakeHash()}function f(n,m){void 0===m&&(m=!1);Tk.useHash()?m?window.location.replace("#"+n):window.location.hash=
n:Tk.setFakeHash(n)}function g(n){var m="";void 0!==n[a.TAB]&&(m+=n[a.TAB]);var q=Object.keys(n).map(function(r){return[r,n[r]]}).filter(function(r){return r[0]!==a.TAB}).map(function(r){return encodeURIComponent(r[0])+"\x3d"+encodeURIComponent(r[1])}).join("\x26");return 0<q.length?m+"\x26"+q:m}function h(n){var m={};n.split("\x26").forEach(function(q){q=q.split("\x3d");1===q.length?m[a.TAB]=q[0]:2===q.length&&(m[decodeURIComponent(q[0])]=decodeURIComponent(q[1]))});return m}a.TAB="__tab__";a.DISAMBIGUATOR=
"disambiguator";var l=b(function(n){return n},function(n){return n});a.getString=l.get;a.setString=l.set;a.getStringInitializer=l.getInitializer;a.getStringObserver=l.getObserver;a.disposeStringBinding=l.disposeBinding;l=b(function(n){return"true"===n?!0:"false"===n?!1:void 0},function(n){return n.toString()});a.getBoolean=l.get;a.setBoolean=l.set;a.getBooleanInitializer=l.getInitializer;a.getBooleanObserver=l.getObserver;a.disposeBooleanBinding=l.disposeBinding;l=b(function(n){return+n},function(n){return n.toString()});
a.getNumber=l.get;a.setNumber=l.set;a.getNumberInitializer=l.getInitializer;a.getNumberObserver=l.getObserver;a.disposeNumberBinding=l.disposeBinding;l=b(function(n){return JSON.parse(atob(n))},function(n){return btoa(JSON.stringify(n))});a.getObject=l.get;a.setObject=l.set;a.getObjectInitializer=l.getInitializer;a.getObjectObserver=l.getObserver;a.disposeObjectBinding=l.disposeBinding;a.makeBindings=b})(Uk||(Uk={}));
</script>



<dom-module id="tf-tag-filterer">
  <template>
    <paper-input no-label-float label="Filter tags (regular expressions supported)" value="{{_tagFilter}}" class="search-input">
      <iron-icon prefix icon="search" slot="prefix"></iron-icon>
    </paper-input>
  </template>
  <style>
    :host {
      display: block;
      margin: 10px 5px 10px 10px;
    }
  </style>
  <script>//~~WEBPATH~~/tf-categorization-utils/tf-tag-filterer.html.js
Polymer({is:"tf-tag-filterer",properties:{tagFilter:{type:String,notify:!0,computed:"_computeTagFilter(_tagFilter)"},_tagFilter:{type:String,value:Uk.getStringInitializer("tagFilter",{defaultValue:"",useLocalStorage:!1,polymerProperty:"_tagFilter"}),observer:"_tagFilterObserver"}},_tagFilterObserver:Uk.getStringObserver("tagFilter",{defaultValue:"",useLocalStorage:!1,polymerProperty:"_tagFilter"}),_computeTagFilter:function(){return this._tagFilter}});
</script>
</dom-module>

<script>//~~WEBPATH~~/tf-dashboard-common/array-update-helper.js
var Wk;
(function(a){a.ArrayUpdateHelper={updateArrayProp:function(b,c,e){var f=this.get(b);if(!Array.isArray(c))throw RangeError("Expected new value to '"+b+"' to be an array.");Array.isArray(f)||(f=[],this.set(b,f));for(var g=new Set(c.map(function(n,m){return e(n,m)})),h=0,l=0;h<f.length&&l<c.length;)g.has(e(f[h],h))?(e(f[h],h)==e(c[l],l)?this.set(b+"."+h,c[l]):this.splice(b,h,0,c[l]),l++,h++):this.splice(b,h,1);h<f.length&&this.splice(b,h);l<c.length&&this.push.apply(this,[b].concat(c.slice(l)))}}})(Wk||(Wk=
{}));
</script>




<dom-module id="iron-flex">
  <template>
    <style>
      .layout.horizontal,
      .layout.vertical {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
      }

      .layout.inline {
        display: -ms-inline-flexbox;
        display: -webkit-inline-flex;
        display: inline-flex;
      }

      .layout.horizontal {
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
      }

      .layout.vertical {
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      }

      .layout.wrap {
        -ms-flex-wrap: wrap;
        -webkit-flex-wrap: wrap;
        flex-wrap: wrap;
      }

      .layout.no-wrap {
        -ms-flex-wrap: nowrap;
        -webkit-flex-wrap: nowrap;
        flex-wrap: nowrap;
      }

      .layout.center,
      .layout.center-center {
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      }

      .layout.center-justified,
      .layout.center-center {
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
      }

      .flex {
        -ms-flex: 1 1 0.000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: 0.000000001px;
        flex-basis: 0.000000001px;
      }

      .flex-auto {
        -ms-flex: 1 1 auto;
        -webkit-flex: 1 1 auto;
        flex: 1 1 auto;
      }

      .flex-none {
        -ms-flex: none;
        -webkit-flex: none;
        flex: none;
      }
    </style>
  </template>
</dom-module>


<dom-module id="iron-flex-reverse">
  <template>
    <style>
      .layout.horizontal-reverse,
      .layout.vertical-reverse {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
      }

      .layout.horizontal-reverse {
        -ms-flex-direction: row-reverse;
        -webkit-flex-direction: row-reverse;
        flex-direction: row-reverse;
      }

      .layout.vertical-reverse {
        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      }

      .layout.wrap-reverse {
        -ms-flex-wrap: wrap-reverse;
        -webkit-flex-wrap: wrap-reverse;
        flex-wrap: wrap-reverse;
      }
    </style>
  </template>
</dom-module>


<dom-module id="iron-flex-alignment">
  <template>
    <style>
      /**
       * Alignment in cross axis.
       */
      .layout.start {
        -ms-flex-align: start;
        -webkit-align-items: flex-start;
        align-items: flex-start;
      }

      .layout.center,
      .layout.center-center {
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      }

      .layout.end {
        -ms-flex-align: end;
        -webkit-align-items: flex-end;
        align-items: flex-end;
      }

      .layout.baseline {
        -ms-flex-align: baseline;
        -webkit-align-items: baseline;
        align-items: baseline;
      }

      /**
       * Alignment in main axis.
       */
      .layout.start-justified {
        -ms-flex-pack: start;
        -webkit-justify-content: flex-start;
        justify-content: flex-start;
      }

      .layout.center-justified,
      .layout.center-center {
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
      }

      .layout.end-justified {
        -ms-flex-pack: end;
        -webkit-justify-content: flex-end;
        justify-content: flex-end;
      }

      .layout.around-justified {
        -ms-flex-pack: distribute;
        -webkit-justify-content: space-around;
        justify-content: space-around;
      }

      .layout.justified {
        -ms-flex-pack: justify;
        -webkit-justify-content: space-between;
        justify-content: space-between;
      }

      /**
       * Self alignment.
       */
      .self-start {
        -ms-align-self: flex-start;
        -webkit-align-self: flex-start;
        align-self: flex-start;
      }

      .self-center {
        -ms-align-self: center;
        -webkit-align-self: center;
        align-self: center;
      }

      .self-end {
        -ms-align-self: flex-end;
        -webkit-align-self: flex-end;
        align-self: flex-end;
      }

      .self-stretch {
        -ms-align-self: stretch;
        -webkit-align-self: stretch;
        align-self: stretch;
      }

      .self-baseline {
        -ms-align-self: baseline;
        -webkit-align-self: baseline;
        align-self: baseline;
      }

      /**
       * multi-line alignment in main axis.
       */
      .layout.start-aligned {
        -ms-flex-line-pack: start;  /* IE10 */
        -ms-align-content: flex-start;
        -webkit-align-content: flex-start;
        align-content: flex-start;
      }

      .layout.end-aligned {
        -ms-flex-line-pack: end;  /* IE10 */
        -ms-align-content: flex-end;
        -webkit-align-content: flex-end;
        align-content: flex-end;
      }

      .layout.center-aligned {
        -ms-flex-line-pack: center;  /* IE10 */
        -ms-align-content: center;
        -webkit-align-content: center;
        align-content: center;
      }

      .layout.between-aligned {
        -ms-flex-line-pack: justify;  /* IE10 */
        -ms-align-content: space-between;
        -webkit-align-content: space-between;
        align-content: space-between;
      }

      .layout.around-aligned {
        -ms-flex-line-pack: distribute;  /* IE10 */
        -ms-align-content: space-around;
        -webkit-align-content: space-around;
        align-content: space-around;
      }
    </style>
  </template>
</dom-module>

<dom-module id="iron-flex-factors">
  <template>
    <style>
      .flex,
      .flex-1 {
        -ms-flex: 1 1 0.000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: 0.000000001px;
        flex-basis: 0.000000001px;
      }

      .flex-2 {
        -ms-flex: 2;
        -webkit-flex: 2;
        flex: 2;
      }

      .flex-3 {
        -ms-flex: 3;
        -webkit-flex: 3;
        flex: 3;
      }

      .flex-4 {
        -ms-flex: 4;
        -webkit-flex: 4;
        flex: 4;
      }

      .flex-5 {
        -ms-flex: 5;
        -webkit-flex: 5;
        flex: 5;
      }

      .flex-6 {
        -ms-flex: 6;
        -webkit-flex: 6;
        flex: 6;
      }

      .flex-7 {
        -ms-flex: 7;
        -webkit-flex: 7;
        flex: 7;
      }

      .flex-8 {
        -ms-flex: 8;
        -webkit-flex: 8;
        flex: 8;
      }

      .flex-9 {
        -ms-flex: 9;
        -webkit-flex: 9;
        flex: 9;
      }

      .flex-10 {
        -ms-flex: 10;
        -webkit-flex: 10;
        flex: 10;
      }

      .flex-11 {
        -ms-flex: 11;
        -webkit-flex: 11;
        flex: 11;
      }

      .flex-12 {
        -ms-flex: 12;
        -webkit-flex: 12;
        flex: 12;
      }
    </style>
  </template>
</dom-module>


<dom-module id="iron-positioning">
  <template>
    <style>
      .block {
        display: block;
      }

      [hidden] {
        display: none !important;
      }

      .invisible {
        visibility: hidden !important;
      }

      .relative {
        position: relative;
      }

      .fit {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }

      body.fullbleed {
        margin: 0;
        height: 100vh;
      }

      .scroll {
        -webkit-overflow-scrolling: touch;
        overflow: auto;
      }

      /* fixed position */
      .fixed-bottom,
      .fixed-left,
      .fixed-right,
      .fixed-top {
        position: fixed;
      }

      .fixed-top {
        top: 0;
        left: 0;
        right: 0;
      }

      .fixed-right {
        top: 0;
        right: 0;
        bottom: 0;
      }

      .fixed-bottom {
        right: 0;
        bottom: 0;
        left: 0;
      }

      .fixed-left {
        top: 0;
        bottom: 0;
        left: 0;
      }
    </style>
  </template>
</dom-module>









<style is="custom-style">

  :root {
    --tb-orange-weak: #ffa726;
    --tb-orange-strong: #f57c00;
    --tb-orange-dark: #dc7320;
    --tb-grey-darker: #e2e2e2;
    --tb-grey-lighter: #f3f3f3;
    --tb-ui-dark-accent: #757575;
    --tb-ui-light-accent: #e0e0e0;
    --tb-graph-faded: #e0d4b3;
  }

</style>


<dom-module id="dashboard-style">
  <template>
    <style include="iron-flex"></style>
    <style>
      :host {
        --sidebar-vertical-padding: 15px;
      }

      .sidebar {
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        height: 100%;
        margin-right: 20px;
        overflow-x: hidden;
        padding: 5px 0;
        text-overflow: ellipsis;
      }

      tf-runs-selector {
        flex-grow: 1;
        flex-shrink: 1;
        max-height: calc(100% - var(--sidebar-vertical-padding) * 2);
        overflow: hidden;
        position: absolute;
      }

      .search-input {
        margin: 10px 5px 0 10px;
      }

      .sidebar-section {
        border-top: solid 1px rgba(0, 0, 0, .12);
        padding: var(--sidebar-vertical-padding) 0 var(--sidebar-vertical-padding) 30px;
        position: relative;
      }

      .sidebar-section:first-of-type {
        border: none;
      }

      .sidebar-section:last-of-type {
        flex-grow: 1;
        display: flex;
      }

      .sidebar-section paper-button {
        margin: 5px;
      }

      .sidebar-section paper-button:first-of-type {
        margin-left: 0 !important;
      }

      .sidebar-section paper-button:last-of-type {
        margin-right: 0 !important;
      }

      .sidebar-section > :first-child {
        margin-top: 0;
        padding-top: 0;
      }

      .sidebar-section > :last-child {
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .sidebar-section h3 {
        color: var(--paper-grey-800);
        display: block;
        font-size: 14px;
        font-weight: normal;
        margin: 10px 0 5px;
        pointer-events: none;
      }

      paper-checkbox {
        --paper-checkbox-checked-color: var(--tb-ui-dark-accent);
        --paper-checkbox-unchecked-color: var(--tb-ui-dark-accent);
        font-size: 15px;
        margin-top: 5px;
      }
    </style>
  </template>
</dom-module>





<dom-module id="scrollbar-style">
  <template>
    <style>
      .scrollbar::-webkit-scrollbar-track
      {
        visibility: hidden;
      }

      .scrollbar::-webkit-scrollbar
      {
        width: 10px;
      }

      .scrollbar::-webkit-scrollbar-thumb
      {
        border-radius: 10px;
        -webkit-box-shadow: inset 0 0 2px rgba(0,0,0,.3);
        background-color: var(--paper-grey-500);
        color: var(--paper-grey-900);
      }
      .scrollbar {
        box-sizing: border-box;
      }
    </style>
  </template>
</dom-module>




<dom-module id="tf-dashboard-layout">
  <template>
    <div id="sidebar">
      <content select=".sidebar"></content>
    </div>

    <div id="center">
      <content select=".center" class="scollbar"></content>
    </div>
    <style include="scrollbar-style"></style>
    <style>
      :host {
        display: flex;
        flex-direction: row;
        height: 100%;
      }

      #sidebar {
        flex: 0 0 var(--tf-dashboard-layout-sidebar-basis, 25%);
        height: 100%;
        max-width: var(--tf-dashboard-layout-sidebar-max-width, 350px);
        min-width: var(--tf-dashboard-layout-sidebar-min-width, 270px);
        overflow-y: auto;
        text-overflow: ellipsis;
      }

      #center {
        flex-grow: 1;
        flex-shrink: 1;
        height: 100%;
        overflow: hidden;
      }

      ::content.center {
        height: 100%;
        overflow-x: hidden;
        overflow-y: auto;
        width: 100%;
        will-change: transform;
      }

      .tf-graph-dashboard #center {
        background: #fff;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-dashboard-common/tf-dashboard-layout.html.js
Polymer({is:"tf-dashboard-layout"});
</script>
</dom-module>





<dom-module id="tf-option-selector">
  <template>
    <div id="wrap">
      <h3>[[name]]</h3>
      <div class="content-wrapper"><slot></slot></div>
    </div>
    <style>
      .content-wrapper ::content > * {
        background: none;
        color: var(--tb-ui-dark-accent);
        font-size: 13px;
        margin-top: 10px;
      }

      .content-wrapper ::content :first-of-type {
        margin-left: 0;
      }

      .content-wrapper ::content .selected {
        background-color: var(--tb-ui-dark-accent);
        color: white !important;
      }

      h3 {
        color: var(--paper-grey-800);
        display: block;
        font-size: 14px;
        font-weight: normal;
        margin: 0 0 5px;
        pointer-events: none;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-dashboard-common/tf-option-selector.html.js
Polymer({is:"tf-option-selector",properties:{name:String,selectedId:{type:String,notify:!0,observer:"_selectedIdChanged"}},attached:function(){this.async(function(){this.getEffectiveChildren().forEach(function(a){this.listen(a,"tap","_selectTarget")}.bind(this))})},_selectTarget:function(a){this.selectedId=a.currentTarget.id},_selectedIdChanged:function(){var a=this.queryEffectiveChildren("#"+this.selectedId);a&&(this.getEffectiveChildren().forEach(function(b){b.classList.remove("selected")}),a.classList.add("selected"))}});
</script>
</dom-module>









<script>//~~WEBPATH~~/tf-paginated-view/paginatedViewStore.js
var Xk;
(function(a){var b=null,c=new Set;a.addLimitListener=function(e){c.add(e)};a.removeLimitListener=function(e){c.delete(e)};a.getLimit=function(){null==b&&(b=Uk.getNumber("TF.TensorBoard.PaginatedView.limit",{useLocalStorage:!0}),null==b||!isFinite(b)||0>=b)&&(b=12);return b};a.setLimit=function(e){if(e!==Math.floor(e))throw Error("limit must be an integer, but got: "+e);if(0>=e)throw Error("limit must be positive, but got: "+e);e!==b&&(b=e,Uk.setNumber("TF.TensorBoard.PaginatedView.limit",b,{useLocalStorage:!0}),
c.forEach(function(f){f()}))}})(Xk||(Xk={}));
</script>



<dom-module id="tf-paginated-view">
  <template>
    <span id="top-of-container"></span>
    <template is="dom-if" if="[[_multiplePagesExist]]">
      <div class="big-page-buttons" style="margin-bottom: 10px;">
        <paper-button on-tap="_performPreviousPage" disabled$="[[!_hasPreviousPage]]">Previous page</paper-button><paper-button on-tap="_performNextPage" disabled$="[[!_hasNextPage]]">Next page</paper-button>
      </div>
    </template>
    <div><slot></slot></div>
    <template is="dom-if" if="[[_multiplePagesExist]]">
      <div id="controls-container">
        <div style="display: inline-block; padding: 0 5px">
          Page
          <paper-input id="page-input" type="number" no-label-float min="1" max="[[_pageCount]]" value="[[_pageInputValue]]" style="display: inline-block; width: [[_inputWidth]];" on-input="_handlePageInputEvent" on-change="_handlePageChangeEvent" on-focus="_handlePageFocusEvent" on-blur="_handlePageBlurEvent"></paper-input>
          of [[_pageCount]]
        </div>
      </div>
      <div class="big-page-buttons" style="margin-top: 10px;">
        <paper-button on-tap="_performPreviousPage" disabled$="[[!_hasPreviousPage]]">Previous page</paper-button><paper-button on-tap="_performNextPageAndJumpToTop" disabled$="[[!_hasNextPage]]">Next page</paper-button>
      </div>
    </template>
    <style>
      :host {
        display: flex;
        flex-direction: column;
      }
      #controls-container {
        justify-content: center;
        display: flex;
        flex-direction: row;
        flex-grow: 0;
        flex-shrink: 0;
        width: 100%;
      }
      #controls-container paper-button {
        display: inline-block;
      }
      .big-page-buttons {
        display: flex;
      }
      .big-page-buttons paper-button {
        background-color: var(--tb-ui-light-accent);
        color: var(--tb-ui-dark-accent);
        display: inline-block;
        flex-basis: 0;
        flex-grow: 1;
        flex-shrink: 1;
        font-size: 13px;
      }
      .big-page-buttons paper-button[disabled] {
        background: none;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-paginated-view/tf-paginated-view.html.js
Polymer({is:"tf-paginated-view",properties:{items:{type:Array,value:function(){return[]}},pages:{type:Array,notify:!0,computed:"_computePages(items, _limit, _activeIndex, _pageCount)"},_limit:{type:Number,value:12},_activeIndex:{type:Number,value:0},_currentPage:{type:Number,computed:"_computeCurrentPage(_limit, _activeIndex)"},_pageCount:{type:Number,computed:"_computePageCount(items, _limit)"},_multiplePagesExist:{type:Boolean,computed:"_computeMultiplePagesExist(_pageCount)"},_hasPreviousPage:{type:Boolean,
computed:"_computeHasPreviousPage(_currentPage)"},_hasNextPage:{type:Boolean,computed:"_computeHasNextPage(_currentPage, _pageCount)"},_inputWidth:{type:String,computed:"_computeInputWidth(_pageCount)"},_pageInputValue:{type:String,computed:"_computePageInputValue(_pageInputFocused, _pageInputRawValue, _currentPage)",observer:"_updatePageInputValue"},_pageInputRawValue:{type:String,value:""},_pageInputFocused:{type:Boolean,value:!1}},observers:["_clampActiveIndex(items)"],attached:function(){var a=
this;this._limitListener=function(){a.set("_limit",Xk.getLimit())};Xk.addLimitListener(this._limitListener);this._limitListener()},detached:function(){Xk.removeLimitListener(this._limitListener)},_computePages:function(a,b,c,e){var f=Math.floor(c/b);return _.range(e).map(function(g){return{active:g===f,items:(a||[]).slice(g*b,(g+1)*b)}})},_computeCurrentPage:function(a,b){return Math.floor(b/a)+1},_computePageCount:function(a,b){return Math.ceil((a||[]).length/b)},_computeMultiplePagesExist:function(a){return 1<
a},_computeHasPreviousPage:function(a){return 1<a},_computeHasNextPage:function(a,b){return a<b},_computeInputWidth:function(a){return"calc("+a.toString().length+"em + 20px)"},_setActiveIndex:function(a){var b=(this.items||[]).length-1;a>b&&(a=b);0>a&&(a=0);this.set("_activeIndex",a)},_clampActiveIndex:function(){this._setActiveIndex(this._activeIndex)},_performPreviousPage:function(){this._setActiveIndex(this._activeIndex-this._limit)},_performNextPage:function(){this._setActiveIndex(this._activeIndex+
this._limit)},_performNextPageAndJumpToTop:function(){var a=this.$$("#top-of-container");0>a.getBoundingClientRect().top&&a.scrollIntoView();this._performNextPage()},_computePageInputValue:function(a,b,c){return a?b:c.toString()},_handlePageInputEvent:function(a){this.set("_pageInputRawValue",a.target.value);a=a.target.valueAsNumber;isNaN(a)||this._setActiveIndex(this._limit*(Math.max(1,Math.min(a,this._pageCount))-1))},_handlePageChangeEvent:function(){this.set("_pageInputRawValue",this._currentPage.toString())},
_handlePageFocusEvent:function(){this.set("_pageInputRawValue",this._pageInputValue);this.set("_pageInputFocused",!0)},_handlePageBlurEvent:function(){this.set("_pageInputFocused",!1)},_updatePageInputValue:function(a){var b=this.$$("#page-input input");b&&(b.value=a)}});
</script>
</dom-module>







<script>//~~WEBPATH~~/paper-dialog-behavior/paper-dialog-behavior.html.js
Polymer.PaperDialogBehaviorImpl={hostAttributes:{role:"dialog",tabindex:"-1"},properties:{modal:{type:Boolean,value:!1}},observers:["_modalChanged(modal, _readied)"],listeners:{tap:"_onDialogClick"},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick;this.__prevNoCancelOnEscKey=this.noCancelOnEscKey;this.__prevWithBackdrop=this.withBackdrop},_modalChanged:function(a,b){b&&(a?(this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,
this.__prevWithBackdrop=this.withBackdrop,this.withBackdrop=this.noCancelOnEscKey=this.noCancelOnOutsideClick=!0):(this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick,this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey,this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop))},_updateClosingReasonConfirmed:function(a){this.closingReason=this.closingReason||{};this.closingReason.confirmed=a},_onDialogClick:function(a){for(var b=Polymer.dom(a).path,
c=0;c<b.indexOf(this);c++){var e=b[c];if(e.hasAttribute&&(e.hasAttribute("dialog-dismiss")||e.hasAttribute("dialog-confirm"))){this._updateClosingReasonConfirmed(e.hasAttribute("dialog-confirm"));this.close();a.stopPropagation();break}}}};Polymer.PaperDialogBehavior=[Polymer.IronOverlayBehavior,Polymer.PaperDialogBehaviorImpl];
</script>









<dom-module id="paper-dialog-shared-styles">
  <template>
    <style>
      :host {
        display: block;
        margin: 24px 40px;

        background: var(--paper-dialog-background-color, --primary-background-color);
        color: var(--paper-dialog-color, --primary-text-color);

        @apply(--paper-font-body1);
        @apply(--shadow-elevation-16dp);
        @apply(--paper-dialog);
      }

      :host > ::content > * {
        margin-top: 20px;
        padding: 0 24px;
      }

      :host > ::content > .no-padding {
        padding: 0;
      }

      :host > ::content > *:first-child {
        margin-top: 24px;
      }

      :host > ::content > *:last-child {
        margin-bottom: 24px;
      }

      :host > ::content h2 {
        position: relative;
        margin: 0;
        @apply(--paper-font-title);

        @apply(--paper-dialog-title);
      }

      :host > ::content .buttons {
        position: relative;
        padding: 8px 8px 8px 24px;
        margin: 0;

        color: var(--paper-dialog-button-color, --primary-color);

        @apply(--layout-horizontal);
        @apply(--layout-end-justified);
      }
    </style>
  </template>
</dom-module>



<dom-module id="paper-dialog">
  <template>
    <style include="paper-dialog-shared-styles"></style>
    <slot></slot>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-dialog/paper-dialog.html.js
Polymer({is:"paper-dialog",behaviors:[Polymer.PaperDialogBehavior,Polymer.NeonAnimationRunnerBehavior],listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},_renderOpened:function(){this.cancelAnimation();this.playAnimation("entry")},_renderClosed:function(){this.cancelAnimation();this.playAnimation("exit")},_onNeonAnimationFinish:function(){this.opened?this._finishRenderOpened():this._finishRenderClosed()}});
</script>








<dom-module id="tf-color-scale">
  <script>//~~WEBPATH~~/tf-color-scale/palettes.js
var Yk,Zk=Yk||(Yk={});
Zk.palettes={googleStandard:"#db4437 #ff7043 #f4b400 #0f9d58 #00796b #00acc1 #4285f4 #5c6bc0 #ab47bc".split(" "),googleCool:"#9e9d24 #0f9d58 #00796b #00acc1 #4285f4 #5c6bc0 #607d8b".split(" "),googleWarm:"#795548 #ab47bc #f06292 #c2185b #db4437 #ff7043 #f4b400".split(" "),googleColorBlindAssist:"#ff7043 #00ACC1 #AB47BC #2A56C6 #0b8043 #F7CB4D #c0ca33 #5e35b1 #A52714".split(" "),tensorboardColorBlindAssist:"#ff7043 #0077bb #cc3311 #33bbee #ee3377 #009988 #bbbbbb".split(" "),colorBlindAssist1:"#4477aa #44aaaa #aaaa44 #aa7744 #aa4455 #aa4488".split(" "),colorBlindAssist2:"#88ccee #44aa99 #117733 #999933 #ddcc77 #cc6677 #882255 #aa4499".split(" "),
colorBlindAssist3:"#332288 #6699cc #88ccee #44aa99 #117733 #999933 #ddcc77 #cc6677 #aa4466 #882255 #661100 #aa4499".split(" "),colorBlindAssist4:"#4477aa #66ccee #228833 #ccbb44 #ee6677 #aa3377 #bbbbbb".split(" "),colorBlindAssist5:"#FF6DB6 #920000 #924900 #DBD100 #24FF24 #006DDB #490092".split(" "),mldash:"#E47EAD #F4640D #FAA300 #F5E636 #00A077 #0077B8 #00B7ED".split(" ")};Zk.standard=Zk.palettes.tensorboardColorBlindAssist;
</script>
  <script>//~~WEBPATH~~/tf-color-scale/colorScale.js
(function(a){function b(e,f){function g(){h.setDomain(f())}var h=new c;e.addListener(g);g();return function(l){return h.getColor(l)}}var c=function(){function e(f){void 0===f&&(f=a.standard);this.palette=f;this.identifiers=d3.map()}e.prototype.setDomain=function(f){var g=this;this.identifiers=d3.map();f.forEach(function(h,l){g.identifiers.set(h,g.palette[l%g.palette.length])})};e.prototype.getColor=function(f){if(!this.identifiers.has(f))throw Error("String "+f+" was not in the domain.");return this.identifiers.get(f)};
return e}();a.ColorScale=c;a.runsColorScale=b(Rk.runsStore,function(){return Rk.runsStore.getRuns()});a.experimentsColorScale=b(Rk.experimentsStore,function(){return Rk.experimentsStore.getExperiments().map(function(e){return e.name})})})(Yk||(Yk={}));
</script>
</dom-module>




<iron-iconset-svg name="icons" size="24">
<svg><defs>
<g id="3d-rotation"><path d="M7.52 21.48C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32zm.89-6.52c-.19 0-.37-.03-.52-.08-.16-.06-.29-.13-.4-.24-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95.14.27.33.5.56.69.24.18.51.32.82.41.3.1.62.15.96.15.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72c.13-.29.2-.61.2-.97 0-.19-.02-.38-.07-.56-.05-.18-.12-.35-.23-.51-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31.2-.09.37-.2.52-.33.15-.13.27-.27.37-.42.1-.15.17-.3.22-.46.05-.16.07-.32.07-.48 0-.36-.06-.68-.18-.96-.12-.28-.29-.51-.51-.69-.2-.19-.47-.33-.77-.43C9.1 8.05 8.76 8 8.39 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3c0-.17.03-.32.09-.45s.14-.25.25-.34c.11-.09.23-.17.38-.22.15-.05.3-.08.48-.08.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49-.05.15-.14.27-.25.37-.11.1-.25.18-.41.24-.16.06-.36.09-.58.09H7.5v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4.07.16.1.35.1.57 0 .41-.12.72-.35.93-.23.23-.55.33-.95.33zm8.55-5.92c-.32-.33-.7-.59-1.14-.77-.43-.18-.92-.27-1.46-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27.45-.18.84-.43 1.16-.76.32-.33.57-.73.74-1.19.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57-.18-.47-.43-.87-.75-1.2zm-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85-.19.23-.43.41-.71.53-.29.12-.62.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99v.4zM12 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.44 4.84 18.29 0 12 0z" /></g>
<g id="accessibility"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z" /></g>
<g id="accessible"><circle cx="12" cy="4" r="2" /><path d="M19 13v-2c-1.54.02-3.09-.75-4.07-1.83l-1.29-1.43c-.17-.19-.38-.34-.61-.45-.01 0-.01-.01-.02-.01H13c-.35-.2-.75-.3-1.19-.26C10.76 7.11 10 8.04 10 9.09V15c0 1.1.9 2 2 2h5v5h2v-5.5c0-1.1-.9-2-2-2h-3v-3.45c1.29 1.07 3.25 1.94 5 1.95zm-6.17 5c-.41 1.16-1.52 2-2.83 2-1.66 0-3-1.34-3-3 0-1.31.84-2.41 2-2.83V12.1c-2.28.46-4 2.48-4 4.9 0 2.76 2.24 5 5 5 2.42 0 4.44-1.72 4.9-4h-2.07z" /></g>
<g id="account-balance"><path d="M4 10v7h3v-7H4zm6 0v7h3v-7h-3zM2 22h19v-3H2v3zm14-12v7h3v-7h-3zm-4.5-9L2 6v2h19V6l-9.5-5z" /></g>
<g id="account-balance-wallet"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="account-box"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z" /></g>
<g id="account-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" /></g>
<g id="add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" /></g>
<g id="add-alert"><path d="M10.01 21.01c0 1.1.89 1.99 1.99 1.99s1.99-.89 1.99-1.99h-3.98zm8.87-4.19V11c0-3.25-2.25-5.97-5.29-6.69v-.72C13.59 2.71 12.88 2 12 2s-1.59.71-1.59 1.59v.72C7.37 5.03 5.12 7.75 5.12 11v5.82L3 18.94V20h18v-1.06l-2.12-2.12zM16 13.01h-3v3h-2v-3H8V11h3V8h2v3h3v2.01z" /></g>
<g id="add-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" /></g>
<g id="add-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" /></g>
<g id="add-circle-outline"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="add-shopping-cart"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z" /></g>
<g id="alarm"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z" /></g>
<g id="alarm-add"><path d="M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm1-11h-2v3H8v2h3v3h2v-3h3v-2h-3V9z" /></g>
<g id="alarm-off"><path d="M12 6c3.87 0 7 3.13 7 7 0 .84-.16 1.65-.43 2.4l1.52 1.52c.58-1.19.91-2.51.91-3.92 0-4.97-4.03-9-9-9-1.41 0-2.73.33-3.92.91L9.6 6.43C10.35 6.16 11.16 6 12 6zm10-.28l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM2.92 2.29L1.65 3.57 2.98 4.9l-1.11.93 1.42 1.42 1.11-.94.8.8C3.83 8.69 3 10.75 3 13c0 4.97 4.02 9 9 9 2.25 0 4.31-.83 5.89-2.2l2.2 2.2 1.27-1.27L3.89 3.27l-.97-.98zm13.55 16.1C15.26 19.39 13.7 20 12 20c-3.87 0-7-3.13-7-7 0-1.7.61-3.26 1.61-4.47l9.86 9.86zM8.02 3.28L6.6 1.86l-.86.71 1.42 1.42.86-.71z" /></g>
<g id="alarm-on"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-1.46-5.47L8.41 12.4l-1.06 1.06 3.18 3.18 6-6-1.06-1.06-4.93 4.95z" /></g>
<g id="all-out"><path d="M16.21 4.16l4 4v-4zm4 12l-4 4h4zm-12 4l-4-4v4zm-4-12l4-4h-4zm12.95-.95c-2.73-2.73-7.17-2.73-9.9 0s-2.73 7.17 0 9.9 7.17 2.73 9.9 0 2.73-7.16 0-9.9zm-1.1 8.8c-2.13 2.13-5.57 2.13-7.7 0s-2.13-5.57 0-7.7 5.57-2.13 7.7 0 2.13 5.57 0 7.7z" /></g>
<g id="android"><path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z" /></g>
<g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z" /></g>
<g id="apps"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z" /></g>
<g id="archive"><path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z" /></g>
<g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></g>
<g id="arrow-downward"><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z" /></g>
<g id="arrow-drop-down"><path d="M7 10l5 5 5-5z" /></g>
<g id="arrow-drop-down-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 12l-4-4h8l-4 4z" /></g>
<g id="arrow-drop-up"><path d="M7 14l5-5 5 5z" /></g>
<g id="arrow-forward"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" /></g>
<g id="arrow-upward"><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z" /></g>
<g id="aspect-ratio"><path d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z" /></g>
<g id="assessment"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" /></g>
<g id="assignment"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" /></g>
<g id="assignment-ind"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z" /></g>
<g id="assignment-late"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 15h-2v-2h2v2zm0-4h-2V8h2v6zm-1-9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" /></g>
<g id="assignment-return"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm4 12h-4v3l-5-5 5-5v3h4v4z" /></g>
<g id="assignment-returned"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 15l-5-5h3V9h4v4h3l-5 5z" /></g>
<g id="assignment-turned-in"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" /></g>
<g id="attachment"><path d="M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z" /></g>
<g id="autorenew"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" /></g>
<g id="backspace"><path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z" /></g>
<g id="backup"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" /></g>
<g id="block"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z" /></g>
<g id="book"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z" /></g>
<g id="bookmark"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" /></g>
<g id="bookmark-border"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z" /></g>
<g id="bug-report"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z" /></g>
<g id="build"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z" /></g>
<g id="cached"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z" /></g>
<g id="camera-enhance"><path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-1l1.25-2.75L16 13l-2.75-1.25L12 9l-1.25 2.75L8 13l2.75 1.25z" /></g>
<g id="cancel"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z" /></g>
<g id="card-giftcard"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z" /></g>
<g id="card-membership"><path d="M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z" /></g>
<g id="card-travel"><path d="M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z" /></g>
<g id="change-history"><path d="M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z" /></g>
<g id="check"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" /></g>
<g id="check-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" /></g>
<g id="check-box-outline-blank"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="check-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" /></g>
<g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" /></g>
<g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /></g>
<g id="chrome-reader-mode"><path d="M13 12h7v1.5h-7zm0-2.5h7V11h-7zm0 5h7V16h-7zM21 4H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 15h-9V6h9v13z" /></g>
<g id="class"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z" /></g>
<g id="clear"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></g>
<g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></g>
<g id="cloud"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" /></g>
<g id="cloud-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 14H8c-1.66 0-3-1.34-3-3s1.34-3 3-3l.14.01C8.58 8.28 10.13 7 12 7c2.21 0 4 1.79 4 4h.5c1.38 0 2.5 1.12 2.5 2.5S17.88 16 16.5 16z" /></g>
<g id="cloud-done"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17 15.18 9l1.41 1.41L10 17z" /></g>
<g id="cloud-download"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z" /></g>
<g id="cloud-off"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z" /></g>
<g id="cloud-queue"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z" /></g>
<g id="cloud-upload"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" /></g>
<g id="code"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z" /></g>
<g id="compare-arrows"><path d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z" /></g>
<g id="content-copy"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" /></g>
<g id="content-cut"><path d="M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z" /></g>
<g id="content-paste"><path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z" /></g>
<g id="copyright"><path d="M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91 1.05.34 1.7.34c.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="create"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" /></g>
<g id="create-new-folder"><path d="M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z" /></g>
<g id="credit-card"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z" /></g>
<g id="dashboard"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" /></g>
<g id="date-range"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z" /></g>
<g id="delete"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" /></g>
<g id="delete-forever"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z" /></g>
<g id="delete-sweep"><path d="M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z" /></g>
<g id="description"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" /></g>
<g id="dns"><path d="M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="done"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" /></g>
<g id="done-all"><path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z" /></g>
<g id="donut-large"><path d="M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z" /></g>
<g id="donut-small"><path d="M11 9.16V2c-5 .5-9 4.79-9 10s4 9.5 9 10v-7.16c-1-.41-2-1.52-2-2.84s1-2.43 2-2.84zM14.86 11H22c-.48-4.75-4-8.53-9-9v7.16c1 .3 1.52.98 1.86 1.84zM13 14.84V22c5-.47 8.52-4.25 9-9h-7.14c-.34.86-.86 1.54-1.86 1.84z" /></g>
<g id="drafts"><path d="M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zM12 13L3.74 7.84 12 3l8.26 4.84L12 13z" /></g>
<g id="eject"><path d="M5 17h14v2H5zm7-12L5.33 15h13.34z" /></g>
<g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" /></g>
<g id="error-outline"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="euro-symbol"><path d="M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15v-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15V9H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3v2h3.06c-.04.33-.06.66-.06 1 0 .34.02.67.06 1H3v2h3.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57z" /></g>
<g id="event"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z" /></g>
<g id="event-seat"><path d="M4 18v3h3v-3h10v3h3v-6H4zm15-8h3v3h-3zM2 10h3v3H2zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z" /></g>
<g id="exit-to-app"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z" /></g>
<g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" /></g>
<g id="explore"><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm2.19 12.19L6 18l3.81-8.19L18 6l-3.81 8.19z" /></g>
<g id="extension"><path d="M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z" /></g>
<g id="face"><path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z" /></g>
<g id="favorite"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" /></g>
<g id="favorite-border"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z" /></g>
<g id="feedback"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z" /></g>
<g id="file-download"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" /></g>
<g id="file-upload"><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z" /></g>
<g id="filter-list"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z" /></g>
<g id="find-in-page"><path d="M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z" /></g>
<g id="find-replace"><path d="M11 6c1.38 0 2.63.56 3.54 1.46L12 10h6V4l-2.05 2.05C14.68 4.78 12.93 4 11 4c-3.53 0-6.43 2.61-6.92 6H6.1c.46-2.28 2.48-4 4.9-4zm5.64 9.14c.66-.9 1.12-1.97 1.28-3.14H15.9c-.46 2.28-2.48 4-4.9 4-1.38 0-2.63-.56-3.54-1.46L10 12H4v6l2.05-2.05C7.32 17.22 9.07 18 11 18c1.55 0 2.98-.51 4.14-1.36L20 21.49 21.49 20l-4.85-4.86z" /></g>
<g id="fingerprint"><path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z" /></g>
<g id="first-page"><path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z" /></g>
<g id="flag"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z" /></g>
<g id="flight-land"><path d="M2.5 19h19v2h-19zm7.18-5.73l4.35 1.16 5.31 1.42c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l1.6.43 5.31 1.43z" /></g>
<g id="flight-takeoff"><path d="M2.5 19h19v2h-19zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 1.82 3.16.77 1.33 1.6-.43 5.31-1.42 4.35-1.16L21 11.49c.81-.23 1.28-1.05 1.07-1.85z" /></g>
<g id="flip-to-back"><path d="M9 7H7v2h2V7zm0 4H7v2h2v-2zm0-8c-1.11 0-2 .9-2 2h2V3zm4 12h-2v2h2v-2zm6-12v2h2c0-1.1-.9-2-2-2zm-6 0h-2v2h2V3zM9 17v-2H7c0 1.1.89 2 2 2zm10-4h2v-2h-2v2zm0-4h2V7h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zM5 7H3v12c0 1.1.89 2 2 2h12v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z" /></g>
<g id="flip-to-front"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm2 4v-2H3c0 1.1.89 2 2 2zM3 9h2V7H3v2zm12 12h2v-2h-2v2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2z" /></g>
<g id="folder"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" /></g>
<g id="folder-open"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z" /></g>
<g id="folder-shared"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2v1z" /></g>
<g id="font-download"><path d="M9.93 13.5h4.14L12 7.98zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.05 16.5l-1.14-3H9.17l-1.12 3H5.96l5.11-13h1.86l5.11 13h-2.09z" /></g>
<g id="forward"><path d="M12 8V4l8 8-8 8v-4H4V8z" /></g>
<g id="fullscreen"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z" /></g>
<g id="fullscreen-exit"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z" /></g>
<g id="g-translate"><path d="M20 5h-9.12L10 2H4c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h7l1 3h8c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zM7.17 14.59c-2.25 0-4.09-1.83-4.09-4.09s1.83-4.09 4.09-4.09c1.04 0 1.99.37 2.74 1.07l.07.06-1.23 1.18-.06-.05c-.29-.27-.78-.59-1.52-.59-1.31 0-2.38 1.09-2.38 2.42s1.07 2.42 2.38 2.42c1.37 0 1.96-.87 2.12-1.46H7.08V9.91h3.95l.01.07c.04.21.05.4.05.61 0 2.35-1.61 4-3.92 4zm6.03-1.71c.33.6.74 1.18 1.19 1.7l-.54.53-.65-2.23zm.77-.76h-.99l-.31-1.04h3.99s-.34 1.31-1.56 2.74c-.52-.62-.89-1.23-1.13-1.7zM21 20c0 .55-.45 1-1 1h-7l2-2-.81-2.77.92-.92L17.79 18l.73-.73-2.71-2.68c.9-1.03 1.6-2.25 1.92-3.51H19v-1.04h-3.64V9h-1.04v1.04h-1.96L11.18 6H20c.55 0 1 .45 1 1v13z" /></g>
<g id="gavel"><path d="M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z" /></g>
<g id="gesture"><path d="M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93l1.75 1.71zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48z" /></g>
<g id="get-app"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" /></g>
<g id="gif"><path d="M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z" /></g>
<g id="grade"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" /></g>
<g id="group-work"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8 17.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM9.5 8c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8zm6.5 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" /></g>
<g id="help"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" /></g>
<g id="help-outline"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z" /></g>
<g id="highlight-off"><path d="M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="history"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" /></g>
<g id="home"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /></g>
<g id="hourglass-empty"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z" /></g>
<g id="hourglass-full"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z" /></g>
<g id="http"><path d="M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zm9-1.5H18v6h1.5v-2h2c.8 0 1.5-.7 1.5-1.5v-1c0-.8-.7-1.5-1.5-1.5zm0 2.5h-2v-1h2v1z" /></g>
<g id="https"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" /></g>
<g id="important-devices"><path d="M23 11.01L18 11c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5c.55 0 1-.45 1-1v-9c0-.55-.45-.99-1-.99zM23 20h-5v-7h5v7zM20 2H2C.89 2 0 2.89 0 4v12c0 1.1.89 2 2 2h7v2H7v2h8v-2h-2v-2h2v-2H2V4h18v5h2V4c0-1.11-.9-2-2-2zm-8.03 7L11 6l-.97 3H7l2.47 1.76-.94 2.91 2.47-1.8 2.47 1.8-.94-2.91L15 9h-3.03z" /></g>
<g id="inbox"><path d="M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z" /></g>
<g id="indeterminate-check-box"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z" /></g>
<g id="info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" /></g>
<g id="info-outline"><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z" /></g>
<g id="input"><path d="M21 3.01H3c-1.1 0-2 .9-2 2V9h2V4.99h18v14.03H3V15H1v4.01c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98v-14c0-1.11-.9-2-2-2zM11 16l4-4-4-4v3H1v2h10v3z" /></g>
<g id="invert-colors"><path d="M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z" /></g>
<g id="label"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z" /></g>
<g id="label-outline"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z" /></g>
<g id="language"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z" /></g>
<g id="last-page"><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z" /></g>
<g id="launch"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" /></g>
<g id="lightbulb-outline"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z" /></g>
<g id="line-style"><path d="M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z" /></g>
<g id="line-weight"><path d="M3 17h18v-2H3v2zm0 3h18v-1H3v1zm0-7h18v-3H3v3zm0-9v4h18V4H3z" /></g>
<g id="link"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" /></g>
<g id="list"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z" /></g>
<g id="lock"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" /></g>
<g id="lock-open"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z" /></g>
<g id="lock-outline"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z" /></g>
<g id="low-priority"><path d="M14 5h8v2h-8zm0 5.5h8v2h-8zm0 5.5h8v2h-8zM2 11.5C2 15.08 4.92 18 8.5 18H9v2l3-3-3-3v2h-.5C6.02 16 4 13.98 4 11.5S6.02 7 8.5 7H12V5H8.5C4.92 5 2 7.92 2 11.5z" /></g>
<g id="loyalty"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7zm11.77 8.27L13 19.54l-4.27-4.27C8.28 14.81 8 14.19 8 13.5c0-1.38 1.12-2.5 2.5-2.5.69 0 1.32.28 1.77.74l.73.72.73-.73c.45-.45 1.08-.73 1.77-.73 1.38 0 2.5 1.12 2.5 2.5 0 .69-.28 1.32-.73 1.77z" /></g>
<g id="mail"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" /></g>
<g id="markunread"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" /></g>
<g id="markunread-mailbox"><path d="M20 6H10v6H8V4h6V0H6v6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z" /></g>
<g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" /></g>
<g id="more-horiz"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="more-vert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="motorcycle"><path d="M19.44 9.03L15.41 5H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97zM7.82 15C7.4 16.15 6.28 17 5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z" /></g>
<g id="move-to-inbox"><path d="M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10zm-3-5h-2V7h-4v3H8l4 4 4-4z" /></g>
<g id="next-week"><path d="M20 7h-4V5c0-.55-.22-1.05-.59-1.41C15.05 3.22 14.55 3 14 3h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm1 13.5l-1-1 3-3-3-3 1-1 4 4-4 4z" /></g>
<g id="note-add"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z" /></g>
<g id="offline-pin"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm5 16H7v-2h10v2zm-6.7-4L7 10.7l1.4-1.4 1.9 1.9 5.3-5.3L17 7.3 10.3 14z" /></g>
<g id="opacity"><path d="M17.66 8L12 2.35 6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67 3.61 2.35 5.66 2.35 4.1-.79 5.66-2.35S20 15.64 20 13.64 19.22 9.56 17.66 8zM6 14c.01-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 17.99 12 18 14H6z" /></g>
<g id="open-in-browser"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z" /></g>
<g id="open-in-new"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" /></g>
<g id="open-with"><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z" /></g>
<g id="pageview"><path d="M11.5 9C10.12 9 9 10.12 9 11.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S12.88 9 11.5 9zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-3.21 14.21l-2.91-2.91c-.69.44-1.51.7-2.39.7C9.01 16 7 13.99 7 11.5S9.01 7 11.5 7 16 9.01 16 11.5c0 .88-.26 1.69-.7 2.39l2.91 2.9-1.42 1.42z" /></g>
<g id="pan-tool"><path d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z" /></g>
<g id="payment"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z" /></g>
<g id="perm-camera-mic"><path d="M20 5h-3.17L15 3H9L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v-2.09c-2.83-.48-5-2.94-5-5.91h2c0 2.21 1.79 4 4 4s4-1.79 4-4h2c0 2.97-2.17 5.43-5 5.91V21h7c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-6 8c0 1.1-.9 2-2 2s-2-.9-2-2V9c0-1.1.9-2 2-2s2 .9 2 2v4z" /></g>
<g id="perm-contact-calendar"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1z" /></g>
<g id="perm-data-setting"><path d="M18.99 11.5c.34 0 .67.03 1 .07L20 0 0 20h11.56c-.04-.33-.07-.66-.07-1 0-4.14 3.36-7.5 7.5-7.5zm3.71 7.99c.02-.16.04-.32.04-.49 0-.17-.01-.33-.04-.49l1.06-.83c.09-.08.12-.21.06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83c-.02.16-.03.32-.03.49 0 .17.01.33.03.49l-1.06.83c-.09.08-.12.21-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73c.06-.11.03-.24-.06-.32l-1.07-.83zm-3.71 1.01c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="perm-device-information"><path d="M13 7h-2v2h2V7zm0 4h-2v6h2v-6zm4-9.99L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z" /></g>
<g id="perm-identity"><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z" /></g>
<g id="perm-media"><path d="M2 6H0v5h.01L0 20c0 1.1.9 2 2 2h18v-2H2V6zm20-2h-8l-2-2H6c-1.1 0-1.99.9-1.99 2L4 16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7 15l4.5-6 3.5 4.51 2.5-3.01L21 15H7z" /></g>
<g id="perm-phone-msg"><path d="M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM12 3v10l3-3h6V3h-9z" /></g>
<g id="perm-scan-wifi"><path d="M12 3C6.95 3 3.15 4.85 0 7.23L12 22 24 7.25C20.85 4.87 17.05 3 12 3zm1 13h-2v-6h2v6zm-2-8V6h2v2h-2z" /></g>
<g id="pets"><circle cx="4.5" cy="9.5" r="2.5" /><circle cx="9" cy="5.5" r="2.5" /><circle cx="15" cy="5.5" r="2.5" /><circle cx="19.5" cy="9.5" r="2.5" /><path d="M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z" /></g>
<g id="picture-in-picture"><path d="M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z" /></g>
<g id="picture-in-picture-alt"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z" /></g>
<g id="play-for-work"><path d="M11 5v5.59H7.5l4.5 4.5 4.5-4.5H13V5h-2zm-5 9c0 3.31 2.69 6 6 6s6-2.69 6-6h-2c0 2.21-1.79 4-4 4s-4-1.79-4-4H6z" /></g>
<g id="polymer"><path d="M19 4h-4L7.11 16.63 4.5 12 9 4H5L.5 12 5 20h4l7.89-12.63L19.5 12 15 20h4l4.5-8z" /></g>
<g id="power-settings-new"><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z" /></g>
<g id="pregnant-woman"><path d="M9 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm7 9c-.01-1.34-.83-2.51-2-3 0-1.66-1.34-3-3-3s-3 1.34-3 3v7h2v5h3v-5h3v-4z" /></g>
<g id="print"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z" /></g>
<g id="query-builder"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></g>
<g id="question-answer"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z" /></g>
<g id="radio-button-checked"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="radio-button-unchecked"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="receipt"><path d="M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z" /></g>
<g id="record-voice-over"><circle cx="9" cy="9" r="4" /><path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z" /></g>
<g id="redeem"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z" /></g>
<g id="redo"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z" /></g>
<g id="refresh"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" /></g>
<g id="remove"><path d="M19 13H5v-2h14v2z" /></g>
<g id="remove-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z" /></g>
<g id="remove-circle-outline"><path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="remove-shopping-cart"><path d="M22.73 22.73L2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24l1.27-1.27zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2H7.42zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54l9.01 9zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2z" /></g>
<g id="reorder"><path d="M3 15h18v-2H3v2zm0 4h18v-2H3v2zm0-8h18V9H3v2zm0-6v2h18V5H3z" /></g>
<g id="reply"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z" /></g>
<g id="reply-all"><path d="M7 8V5l-7 7 7 7v-3l-4-4 4-4zm6 1V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z" /></g>
<g id="report"><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3zm1-4.3h-2V7h2v6z" /></g>
<g id="report-problem"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" /></g>
<g id="restore"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" /></g>
<g id="restore-page"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5 1.93 0 3.5-1.57 3.5-3.5S13.93 9.5 12 9.5c-1.35 0-2.52.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8c2.76 0 5 2.24 5 5s-2.24 5-5 5z" /></g>
<g id="room"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" /></g>
<g id="rounded-corner"><path d="M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z" /></g>
<g id="rowing"><path d="M8.5 14.5L4 19l1.5 1.5L9 17h2l-2.5-2.5zM15 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 20.01L18 24l-2.99-3.01V19.5l-7.1-7.09c-.31.05-.61.07-.91.07v-2.16c1.66.03 3.61-.87 4.67-2.04l1.4-1.55c.19-.21.43-.38.69-.5.29-.14.62-.23.96-.23h.03C15.99 6.01 17 7.02 17 8.26v5.75c0 .84-.35 1.61-.92 2.16l-3.58-3.58v-2.27c-.63.52-1.43 1.02-2.29 1.39L16.5 18H18l3 3.01z" /></g>
<g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z" /></g>
<g id="schedule"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></g>
<g id="search"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" /></g>
<g id="select-all"><path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" /></g>
<g id="send"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" /></g>
<g id="settings"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" /></g>
<g id="settings-applications"><path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm7-7H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-1.75 9c0 .23-.02.46-.05.68l1.48 1.16c.13.11.17.3.08.45l-1.4 2.42c-.09.15-.27.21-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.26 1.85c-.03.17-.18.3-.35.3h-2.8c-.17 0-.32-.13-.35-.29l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.74.7c-.16.06-.34 0-.43-.15l-1.4-2.42c-.09-.15-.05-.34.08-.45l1.48-1.16c-.03-.23-.05-.46-.05-.69 0-.23.02-.46.05-.68l-1.48-1.16c-.13-.11-.17-.3-.08-.45l1.4-2.42c.09-.15.27-.21.43-.15l1.74.7c.36-.28.76-.51 1.18-.69l.26-1.85c.03-.17.18-.3.35-.3h2.8c.17 0 .32.13.35.29l.26 1.85c.43.18.82.41 1.18.69l1.74-.7c.16-.06.34 0 .43.15l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.16c.03.23.05.46.05.69z" /></g>
<g id="settings-backup-restore"><path d="M14 12c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2zm-2-9c-4.97 0-9 4.03-9 9H0l4 4 4-4H5c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.51 0-2.91-.49-4.06-1.3l-1.42 1.44C8.04 20.3 9.94 21 12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z" /></g>
<g id="settings-bluetooth"><path d="M11 24h2v-2h-2v2zm-4 0h2v-2H7v2zm8 0h2v-2h-2v2zm2.71-18.29L12 0h-1v7.59L6.41 3 5 4.41 10.59 10 5 15.59 6.41 17 11 12.41V20h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 3.83l1.88 1.88L13 7.59V3.83zm1.88 10.46L13 16.17v-3.76l1.88 1.88z" /></g>
<g id="settings-brightness"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02zM8 16h2.5l1.5 1.5 1.5-1.5H16v-2.5l1.5-1.5-1.5-1.5V8h-2.5L12 6.5 10.5 8H8v2.5L6.5 12 8 13.5V16zm4-7c1.66 0 3 1.34 3 3s-1.34 3-3 3V9z" /></g>
<g id="settings-cell"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 16H8V4h8v12z" /></g>
<g id="settings-ethernet"><path d="M7.77 6.76L6.23 5.48.82 12l5.41 6.52 1.54-1.28L3.42 12l4.35-5.24zM7 13h2v-2H7v2zm10-2h-2v2h2v-2zm-6 2h2v-2h-2v2zm6.77-7.52l-1.54 1.28L20.58 12l-4.35 5.24 1.54 1.28L23.18 12l-5.41-6.52z" /></g>
<g id="settings-input-antenna"><path d="M12 5c-3.87 0-7 3.13-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.87-3.13-7-7-7zm1 9.29c.88-.39 1.5-1.26 1.5-2.29 0-1.38-1.12-2.5-2.5-2.5S9.5 10.62 9.5 12c0 1.02.62 1.9 1.5 2.29v3.3L7.59 21 9 22.41l3-3 3 3L16.41 21 13 17.59v-3.3zM12 1C5.93 1 1 5.93 1 12h2c0-4.97 4.03-9 9-9s9 4.03 9 9h2c0-6.07-4.93-11-11-11z" /></g>
<g id="settings-input-component"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z" /></g>
<g id="settings-input-composite"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z" /></g>
<g id="settings-input-hdmi"><path d="M18 7V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v3H5v6l3 6v3h8v-3l3-6V7h-1zM8 4h8v3h-2V5h-1v2h-2V5h-1v2H8V4z" /></g>
<g id="settings-input-svideo"><path d="M8 11.5c0-.83-.67-1.5-1.5-1.5S5 10.67 5 11.5 5.67 13 6.5 13 8 12.33 8 11.5zm7-5c0-.83-.67-1.5-1.5-1.5h-3C9.67 5 9 5.67 9 6.5S9.67 8 10.5 8h3c.83 0 1.5-.67 1.5-1.5zM8.5 15c-.83 0-1.5.67-1.5 1.5S7.67 18 8.5 18s1.5-.67 1.5-1.5S9.33 15 8.5 15zM12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9zm5.5-11c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-2 5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z" /></g>
<g id="settings-overscan"><path d="M12.01 5.5L10 8h4l-1.99-2.5zM18 10v4l2.5-1.99L18 10zM6 10l-2.5 2.01L6 14v-4zm8 6h-4l2.01 2.5L14 16zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z" /></g>
<g id="settings-phone"><path d="M13 9h-2v2h2V9zm4 0h-2v2h2V9zm3 6.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM19 9v2h2V9h-2z" /></g>
<g id="settings-power"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm2-22h-2v10h2V2zm3.56 2.44l-1.45 1.45C16.84 6.94 18 8.83 18 11c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2.17 1.16-4.06 2.88-5.12L7.44 4.44C5.36 5.88 4 8.28 4 11c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.72-1.36-5.12-3.44-6.56zM15 24h2v-2h-2v2z" /></g>
<g id="settings-remote"><path d="M15 9H9c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V10c0-.55-.45-1-1-1zm-3 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM7.05 6.05l1.41 1.41C9.37 6.56 10.62 6 12 6s2.63.56 3.54 1.46l1.41-1.41C15.68 4.78 13.93 4 12 4s-3.68.78-4.95 2.05zM12 0C8.96 0 6.21 1.23 4.22 3.22l1.41 1.41C7.26 3.01 9.51 2 12 2s4.74 1.01 6.36 2.64l1.41-1.41C17.79 1.23 15.04 0 12 0z" /></g>
<g id="settings-voice"><path d="M7 24h2v-2H7v2zm5-11c1.66 0 2.99-1.34 2.99-3L15 4c0-1.66-1.34-3-3-3S9 2.34 9 4v6c0 1.66 1.34 3 3 3zm-1 11h2v-2h-2v2zm4 0h2v-2h-2v2zm4-14h-1.7c0 3-2.54 5.1-5.3 5.1S6.7 13 6.7 10H5c0 3.41 2.72 6.23 6 6.72V20h2v-3.28c3.28-.49 6-3.31 6-6.72z" /></g>
<g id="shop"><path d="M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z" /></g>
<g id="shop-two"><path d="M3 9H1v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2H3V9zm15-4V3c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H5v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5h-5zm-6-2h4v2h-4V3zm0 12V8l5.5 3-5.5 4z" /></g>
<g id="shopping-basket"><path d="M17.21 9l-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="shopping-cart"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="sort"><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z" /></g>
<g id="speaker-notes"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 14H6v-2h2v2zm0-3H6V9h2v2zm0-3H6V6h2v2zm7 6h-5v-2h5v2zm3-3h-8V9h8v2zm0-3h-8V6h8v2z" /></g>
<g id="speaker-notes-off"><path d="M10.54 11l-.54-.54L7.54 8 6 6.46 2.38 2.84 1.27 1.73 0 3l2.01 2.01L2 22l4-4h9l5.73 5.73L22 22.46 17.54 18l-7-7zM8 14H6v-2h2v2zm-2-3V9l2 2H6zm14-9H4.08L10 7.92V6h8v2h-7.92l1 1H18v2h-4.92l6.99 6.99C21.14 17.95 22 17.08 22 16V4c0-1.1-.9-2-2-2z" /></g>
<g id="spellcheck"><path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z" /></g>
<g id="star"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" /></g>
<g id="star-border"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z" /></g>
<g id="star-half"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z" /></g>
<g id="stars"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z" /></g>
<g id="store"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z" /></g>
<g id="subdirectory-arrow-left"><path d="M11 9l1.42 1.42L8.83 14H18V4h2v12H8.83l3.59 3.58L11 21l-6-6 6-6z" /></g>
<g id="subdirectory-arrow-right"><path d="M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z" /></g>
<g id="subject"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z" /></g>
<g id="supervisor-account"><path d="M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7C15.12 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z" /></g>
<g id="swap-horiz"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z" /></g>
<g id="swap-vert"><path d="M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z" /></g>
<g id="swap-vertical-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM6.5 9L10 5.5 13.5 9H11v4H9V9H6.5zm11 6L14 18.5 10.5 15H13v-4h2v4h2.5z" /></g>
<g id="system-update-alt"><path d="M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2z" /></g>
<g id="tab"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h10v4h8v10z" /></g>
<g id="tab-unselected"><path d="M1 9h2V7H1v2zm0 4h2v-2H1v2zm0-8h2V3c-1.1 0-2 .9-2 2zm8 16h2v-2H9v2zm-8-4h2v-2H1v2zm2 4v-2H1c0 1.1.9 2 2 2zM21 3h-8v6h10V5c0-1.1-.9-2-2-2zm0 14h2v-2h-2v2zM9 5h2V3H9v2zM5 21h2v-2H5v2zM5 5h2V3H5v2zm16 16c1.1 0 2-.9 2-2h-2v2zm0-8h2v-2h-2v2zm-8 8h2v-2h-2v2zm4 0h2v-2h-2v2z" /></g>
<g id="text-format"><path d="M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z" /></g>
<g id="theaters"><path d="M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z" /></g>
<g id="thumb-down"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z" /></g>
<g id="thumb-up"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z" /></g>
<g id="thumbs-up-down"><path d="M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm10.5 4h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5z" /></g>
<g id="timeline"><path d="M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z" /></g>
<g id="toc"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /></g>
<g id="today"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" /></g>
<g id="toll"><path d="M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zM3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65z" /></g>
<g id="touch-app"><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z" /></g>
<g id="track-changes"><path d="M19.07 4.93l-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z" /></g>
<g id="translate"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" /></g>
<g id="trending-down"><path d="M16 18l2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z" /></g>
<g id="trending-flat"><path d="M22 12l-4-4v3H3v2h15v3z" /></g>
<g id="trending-up"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z" /></g>
<g id="turned-in"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" /></g>
<g id="turned-in-not"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z" /></g>
<g id="unarchive"><path d="M20.55 5.22l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28zM12 9.5l5.5 5.5H14v2h-4v-2H6.5L12 9.5zM5.12 5l.82-1h12l.93 1H5.12z" /></g>
<g id="undo"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" /></g>
<g id="unfold-less"><path d="M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z" /></g>
<g id="unfold-more"><path d="M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z" /></g>
<g id="update"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79 2.73 2.71 7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z" /></g>
<g id="verified-user"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" /></g>
<g id="view-agenda"><path d="M20 13H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm0-10H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z" /></g>
<g id="view-array"><path d="M4 18h3V5H4v13zM18 5v13h3V5h-3zM8 18h9V5H8v13z" /></g>
<g id="view-carousel"><path d="M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z" /></g>
<g id="view-column"><path d="M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z" /></g>
<g id="view-day"><path d="M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z" /></g>
<g id="view-headline"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z" /></g>
<g id="view-list"><path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z" /></g>
<g id="view-module"><path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z" /></g>
<g id="view-quilt"><path d="M10 18h5v-6h-5v6zm-6 0h5V5H4v13zm12 0h5v-6h-5v6zM10 5v6h11V5H10z" /></g>
<g id="view-stream"><path d="M4 18h17v-6H4v6zM4 5v6h17V5H4z" /></g>
<g id="view-week"><path d="M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z" /></g>
<g id="visibility"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="visibility-off"><path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z" /></g>
<g id="warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" /></g>
<g id="watch-later"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z" /></g>
<g id="weekend"><path d="M21 10c-1.1 0-2 .9-2 2v3H5v-3c0-1.1-.9-2-2-2s-2 .9-2 2v5c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zm-3-5H6c-1.1 0-2 .9-2 2v2.15c1.16.41 2 1.51 2 2.82V14h12v-2.03c0-1.3.84-2.4 2-2.82V7c0-1.1-.9-2-2-2z" /></g>
<g id="work"><path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z" /></g>
<g id="youtube-searched-for"><path d="M17.01 14h-.8l-.27-.27c.98-1.14 1.57-2.61 1.57-4.23 0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4 4.16-4H6.51C6.51 7 8.53 5 11.01 5s4.5 2.01 4.5 4.5c0 2.48-2.02 4.5-4.5 4.5-.65 0-1.26-.14-1.82-.38L7.71 15.1c.97.57 2.09.9 3.3.9 1.61 0 3.08-.59 4.22-1.57l.27.27v.79l5.01 4.99L22 19l-4.99-5z" /></g>
<g id="zoom-in"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z" /></g>
<g id="zoom-out"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z" /></g>
</defs></svg>
</iron-iconset-svg>









<dom-module id="paper-icon-button">
  <template strip-whitespace>
    <style>
      :host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        line-height: 1;

        width: 40px;
        height: 40px;

        /* NOTE: Both values are needed, since some phones require the value to be `transparent`. */
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;

        /* Because of polymer/2558, this style has lower specificity than * */
        box-sizing: border-box !important;

        @apply --paper-icon-button;
      }

      :host #ink {
        color: var(--paper-icon-button-ink-color, var(--primary-text-color));
        opacity: 0.6;
      }

      :host([disabled]) {
        color: var(--paper-icon-button-disabled-text, var(--disabled-text-color));
        pointer-events: none;
        cursor: auto;

        @apply --paper-icon-button-disabled;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:hover) {
        @apply --paper-icon-button-hover;
      }

      iron-icon {
        --iron-icon-width: 100%;
        --iron-icon-height: 100%;
      }
    </style>

    <iron-icon id="icon" src="[[src]]" icon="[[icon]]" alt$="[[alt]]"></iron-icon>
  </template>

  <script>//~~WEBPATH~~/paper-icon-button/paper-icon-button.html.js
Polymer({is:"paper-icon-button",hostAttributes:{role:"button",tabindex:"0"},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:"_altChanged"}},_altChanged:function(a,b){var c=this.getAttribute("aria-label");c&&b!=c||this.setAttribute("aria-label",a)}});
</script>
</dom-module>








<dom-module id="run-color-style">
  <template>
    <style>
    [color-class="light-blue"] paper-checkbox {
      --paper-checkbox-checked-color: var(--paper-light-blue-500);
      --paper-checkbox-checked-ink-color: var(--paper-light-blue-500);
      --paper-checkbox-unchecked-color: var(--paper-light-blue-900);
      --paper-checkbox-unchecked-ink-color: var(--paper-light-blue-900);
    }
    [color-class="red"] paper-checkbox {
      --paper-checkbox-checked-color: var(--paper-red-500);
      --paper-checkbox-checked-ink-color: var(--paper-red-500);
      --paper-checkbox-unchecked-color: var(--paper-red-900);
      --paper-checkbox-unchecked-ink-color: var(--paper-red-900);
    }
    [color-class="green"] paper-checkbox {
      --paper-checkbox-checked-color: var(--paper-green-500);
      --paper-checkbox-checked-ink-color: var(--paper-green-500);
      --paper-checkbox-unchecked-color: var(--paper-green-900);
      --paper-checkbox-unchecked-ink-color: var(--paper-green-900);
    }
    [color-class="purple"] paper-checkbox {
      --paper-checkbox-checked-color: var(--paper-purple-500);
      --paper-checkbox-checked-ink-color: var(--paper-purple-500);
      --paper-checkbox-unchecked-color: var(--paper-purple-900);
      --paper-checkbox-unchecked-ink-color: var(--paper-purple-900);
    }
    [color-class="teal"] paper-checkbox {
      --paper-checkbox-checked-color: var(--paper-teal-500);
      --paper-checkbox-checked-ink-color: var(--paper-teal-500);
      --paper-checkbox-unchecked-color: var(--paper-teal-900);
      --paper-checkbox-unchecked-ink-color: var(--paper-teal-900);
    }
    [color-class="pink"] paper-checkbox {
      --paper-checkbox-checked-color: var(--paper-pink-500);
      --paper-checkbox-checked-ink-color: var(--paper-pink-500);
      --paper-checkbox-unchecked-color: var(--paper-pink-900);
      --paper-checkbox-unchecked-ink-color: var(--paper-pink-900);
    }
    [color-class="orange"] paper-checkbox {
      --paper-checkbox-checked-color: var(--paper-orange-500);
      --paper-checkbox-checked-ink-color: var(--paper-orange-500);
      --paper-checkbox-unchecked-color: var(--paper-orange-900);
      --paper-checkbox-unchecked-ink-color: var(--paper-orange-900);
    }
    [color-class="brown"] paper-checkbox {
      --paper-checkbox-checked-color: var(--paper-brown-500);
      --paper-checkbox-checked-ink-color: var(--paper-brown-500);
      --paper-checkbox-unchecked-color: var(--paper-brown-900);
      --paper-checkbox-unchecked-ink-color: var(--paper-brown-900);
    }
    [color-class="indigo"] paper-checkbox {
      --paper-checkbox-checked-color: var(--paper-indigo-500);
      --paper-checkbox-checked-ink-color: var(--paper-indigo-500);
      --paper-checkbox-unchecked-color: var(--paper-indigo-900);
      --paper-checkbox-unchecked-ink-color: var(--paper-indigo-900);
    }
    </style>
  </template>
</dom-module>




<dom-module id="tf-multi-checkbox">
  <style include="scrollbar-style"></style>
  <style include="run-color-style"></style>

  <template>
    <paper-input id="names-regex" no-label-float label="Write a regex to filter runs" value="[[regex]]" on-bind-value-changed="_debouncedRegexChange"></paper-input>
    <div id="outer-container" class="scrollbar">
      <template is="dom-repeat" items="[[namesMatchingRegex]]">
        <div class="name-row">
          <div class="icon-container checkbox-container vertical-align-container">
            <paper-checkbox class="checkbox vertical-align-center" id$="checkbox-[[item]]" name="[[item]]" checked$="[[_isChecked(item, selectionState.*)]]" on-change="_checkboxChange"></paper-checkbox>

          </div>
          <div class="icon-container isolator-container vertical-align-container">
            <paper-icon-button icon="radio-button-unchecked" class="isolator vertical-align-center" on-tap="_isolateName" name="[[item]]"></paper-icon-button>
          </div>
          <div class="item-label-container">
            <span>[[item]]</span>
          </div>
        </div>
      </template>
    </div>
  <style>
    paper-input {
      --paper-input-container-focus-color: var(--tb-orange-strong);
      --paper-input-container-input: {
        font-size: 14px;
      };
      --paper-input-container-label: {
        font-size: 14px;
      };
    }
    :host {
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;
    }
    #outer-container {
      overflow-y: auto;
      overflow-x: hidden;
      width: 100%;
      flex-grow: 1;
      flex-shrink: 1;
      word-wrap: break-word;
    }
    .name-row {
      padding-top: 5px;
      padding-bottom: 5px;
      display: flex;
      flex-direction: row;
      font-size: 13px;
      word-break: break-all; /* makes wrapping of hyperparam strings better */
    }
    .icon-container {
      flex-grow: 0;
      flex-shrink: 0;
      padding-left: 2px;
    }
    .checkbox {
      padding-left: 2px;
      width: 18px;
      height: 18px;
    }
    .isolator {
      width: 18px;
      height: 18px;
      padding: 0px;
    }
    .isolator-container {
      padding-left: 6px;
      padding-right: 3px;
    }
    .checkbox-container {
      padding-left: 2px;
    }
    .item-label-container {
      padding-left: 5px;
      flex-grow: 1;
      flex-shrink: 1;
      width: 0px; /* hack to get the flex-grow to work properly */
    }
    .tooltip-value-container {
      display: flex;
      justify-content: center;
      flex-grow: 0;
      flex-shrink: 0;
      text-align:right;
      padding-left: 2px;
    }
    .vertical-align-container {
      display: flex;
      justify-content: center;
    }
    .vertical-align-container .vertical-align-center {
      align-self: center;
    }
    .vertical-align-container .vertical-align-top {
      align-self: start;
    }
  </style>
  </template>
  <script>//~~WEBPATH~~/tf-dashboard-common/tf-multi-checkbox.js
Wk||(Wk={});
Polymer({is:"tf-multi-checkbox",properties:{names:{type:Array,value:function(){return[]}},coloring:{type:Object,value:{getColor:function(){return""}}},regex:{type:String,notify:!0,value:""},_regex:{type:Object,computed:"_makeRegex(regex)"},namesMatchingRegex:{type:Array,computed:"computeNamesMatchingRegex(names.*, _regex)"},selectionState:{type:Object,notify:!0,value:function(){return{}}},outSelected:{type:Array,notify:!0,computed:"computeOutSelected(namesMatchingRegex.*, selectionState.*)"},maxNamesToEnableByDefault:{type:Number,
value:40},_debouncedRegexChange:{type:Object,value:function(){var a=this,b=_.debounce(function(c){a.regex=c},150,{leading:!1});return function(){var c=this,e=this.$$("#names-regex").value;""==e?this.async(function(){c.regex=e},30):b(e)}}}},listeners:{"dom-change":"synchronizeColors"},observers:["_setIsolatorIcon(selectionState, names)"],_makeRegex:function(a){try{return new RegExp(a)}catch(b){return null}},_setIsolatorIcon:function(){var a=this.selectionState,b=_.filter(_.values(a)).length;Array.prototype.slice.call(this.querySelectorAll(".isolator")).forEach(function(c){c.icon=
1===b&&a[c.name]?"radio-button-checked":"radio-button-unchecked"})},computeNamesMatchingRegex:function(){var a=this._regex;return a?this.names.filter(function(b){return a.test(b)}):this.names},computeOutSelected:function(){var a=this.selectionState,b=this.namesMatchingRegex.length<=this.maxNamesToEnableByDefault;return this.namesMatchingRegex.filter(function(c){return null==a[c]?b:a[c]})},synchronizeColors:function(){var a=this;this._setIsolatorIcon();this.querySelectorAll("paper-checkbox").forEach(function(b){var c=
a.coloring.getColor(b.name);b.customStyle["--paper-checkbox-checked-color"]=c;b.customStyle["--paper-checkbox-checked-ink-color"]=c;b.customStyle["--paper-checkbox-unchecked-color"]=c;b.customStyle["--paper-checkbox-unchecked-ink-color"]=c});this.querySelectorAll(".isolator").forEach(function(b){var c=a.coloring.getColor(b.name);b.style.color=c});window.requestAnimationFrame(function(){a.updateStyles()})},_isolateName:function(a){var b=Polymer.dom(a).localTarget.name,c={};this.names.forEach(function(e){c[e]=
e==b});this.selectionState=c},_checkboxChange:function(a){a=Polymer.dom(a).localTarget;var b=_.clone(this.selectionState);b[a.name]=a.checked;this.selectionState=b},_isChecked:function(a){return-1!=this.outSelected.indexOf(a)},toggleAll:function(){var a=this,b=this.namesMatchingRegex.some(function(g){return a.selectionState[g]}),c=0==Object.keys(this.selectionState).length,e=this.namesMatchingRegex.length>this.maxRunsToEnableByDefault;b=b||c&&!e;var f={};this.names.forEach(function(g){f[g]=!b});this.selectionState=
f}});
</script>
</dom-module>



<dom-module id="tf-runs-selector">
  <template>
    <paper-dialog with-backdrop id="data-location-dialog">
      <h2>Data Location</h2>
      <div inner-h-t-m-l="{{_breakString(dataLocation)}}"></div>
    </paper-dialog>
    <div id="top-text">
      <h3 id="tooltip-help" class="tooltip-container">Runs</h3>
    </div>
    <tf-multi-checkbox id="multiCheckbox" names="[[runs]]" selection-state="{{runSelectionState}}" out-selected="{{selectedRuns}}" regex="{{regexInput}}" coloring="[[coloring]]"></tf-multi-checkbox>
    <paper-button class="x-button" id="toggle-all" on-tap="_toggleAll">
    Toggle All Runs
    </paper-button>
    <template is="dom-if" if="[[dataLocation]]">
      <div id="data-location">
        <span id="clipped-dataLocation" inner-h-t-m-l="[[_clippedDataLocation]]"></span><template is="dom-if" if="[[_shouldShowExpandDataLocationButton(dataLocation, _dataLocationClipLength)]]"><a href="" on-click="_openDataLocationDialog">â¦</a>
        </template>
      </div>
    </template>
    <style>
      :host {
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        padding-bottom: 10px;
      }
      #top-text {
        width: 100%;
        flex-grow: 0;
        flex-shrink: 0;
        padding-right: 16px;
        box-sizing: border-box;
        color: var(--paper-grey-800);
      }
      tf-multi-checkbox {
        display: flex;
        flex-grow: 1;
        flex-shrink: 1;
        overflow: hidden;
      }
      .x-button {
        font-size: 13px;
        background-color: var(--tb-ui-light-accent);
        color: var(--tb-ui-dark-accent);
      }
      #tooltip-help {
        color: var(--paper-grey-800);
        margin: 0;
        font-weight: normal;
        font-size: 14px;
        margin-bottom: 5px;
      }
      paper-button {
        margin-left: 0;
      }
      #data-location {
        color: var(--tb-ui-dark-accent);
        font-size: 13px;
        margin: 5px 0 0 0;
        max-width: 288px;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-runs-selector/tf-runs-selector.html.js
Polymer({is:"tf-runs-selector",properties:{runSelectionState:{type:Object,observer:"_storeRunSelectionState",value:Uk.getObjectInitializer("runSelectionState",{defaultValue:{}})},regexInput:{type:String,value:Uk.getStringInitializer("regexInput",{defaultValue:""}),observer:"_regexObserver"},selectedRuns:{type:Array,notify:!0},runs:Array,dataLocation:{type:String,notify:!0},_clippedDataLocation:{type:String,computed:"_getClippedDataLocation(dataLocation, _dataLocationClipLength)"},_dataLocationClipLength:{type:Number,
value:250,readOnly:!0},coloring:{type:Object,value:{getColor:Yk.runsColorScale}}},attached:function(){var a=this;this._runStoreListener=Rk.runsStore.addListener(function(){a.set("runs",Rk.runsStore.getRuns())});this.set("runs",Rk.runsStore.getRuns());this._envStoreListener=Rk.environmentStore.addListener(function(){a.set("dataLocation",Rk.environmentStore.getDataLocation())});this.set("dataLocation",Rk.environmentStore.getDataLocation())},detached:function(){Rk.runsStore.removeListenerByKey(this._runStoreListener);
Rk.environmentStore.removeListenerByKey(this._envStoreListener)},_toggleAll:function(){this.$.multiCheckbox.toggleAll()},_breakString:function(a){return a.replace(/([\/=\-_,])/g,"$1\x3cwbr\x3e")},_getClippedDataLocation:function(a,b){if(void 0!==a)return a.length>b?this._breakString(a.substring(0,b)):this._breakString(a)},_openDataLocationDialog:function(a){a.preventDefault();this.$$("#data-location-dialog").open()},_shouldShowExpandDataLocationButton:function(a,b){return a&&a.length>b},_storeRunSelectionState:Uk.getObjectObserver("runSelectionState",
{defaultValue:{}}),_regexObserver:Uk.getStringObserver("regexInput",{defaultValue:""})});
</script>
</dom-module>


<script>//~~WEBPATH~~/tf-tensorboard/registry.js
var $k;
(function(a){(function(b){b.NOT_LOADED="NOT_LOADED";b.LOADED="LOADED";b.FAILED="FAILED"})(a.ActiveDashboardsLoadState||(a.ActiveDashboardsLoadState={}));a.dashboardRegistry={};a.registerDashboard=function(b){if(!b.plugin)throw Error("Dashboard.plugin must be present");if(!b.elementName)throw Error("Dashboard.elementName must be present");if(b.plugin in a.dashboardRegistry)throw Error("Plugin already registered: "+b.plugin);b.tabName||(b.tabName=b.plugin);a.dashboardRegistry[b.plugin]=b}})($k||($k=
{}));
</script>

<script>//~~WEBPATH~~/tf-utils/utils.js
var al;
(function(a){a.aggregateTagInfo=function(b,c){var e=void 0,f={};Object.keys(b).forEach(function(h){var l=b[h];void 0===e&&(e=l.displayName);e!==l.displayName&&(e=null);void 0===f[l.description]&&(f[l.description]=[]);f[l.description].push(h)});c=null!=e?e:c;var g=function(){var h=Object.keys(f);return 0===h.length?"":1===h.length?h[0]:"\x3cp\x3e\x3cstrong\x3eMultiple descriptions:\x3c/strong\x3e\x3c/p\x3e\x3cul\x3e"+h.map(function(l){var n=f[l].map(function(m){return"\x3ccode\x3e"+m.replace(/</g,"\x26lt;").replace(/>/g,
"\x26gt;").replace(/&/g,"\x26amp;")+"\x3c/code\x3e"});return"\x3cli\x3e\x3cp\x3eFor "+(1===n.length?"run":"runs")+" "+(2<n.length?n.slice(0,n.length-1).join(", ")+", and "+n[n.length-1]:n.join(" and "))+":\x3c/p\x3e"+l+"\x3c/li\x3e"}).join("")+"\x3c/ul\x3e"}();return{displayName:c,description:g}}})(al||(al={}));
</script>










<dom-module id="paper-listbox">
  <template>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        background: var(--paper-listbox-background-color, var(--primary-background-color));
        color: var(--paper-listbox-color, var(--primary-text-color));

        @apply --paper-listbox;
      }
    </style>

    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-listbox/paper-listbox.html.js
Polymer({is:"paper-listbox",behaviors:[Polymer.IronMenuBehavior],hostAttributes:{role:"listbox"}});
</script>
</dom-module>









<script>//~~WEBPATH~~/paper-spinner/paper-spinner-behavior.html.js
Polymer.PaperSpinnerBehavior={properties:{active:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"__activeChanged"},alt:{type:String,value:"loading",observer:"__altChanged"},__coolingDown:{type:Boolean,value:!1}},__computeContainerClasses:function(a,b){return[a||b?"active":"",b?"cooldown":""].join(" ")},__activeChanged:function(a,b){this.__setAriaHidden(!a);this.__coolingDown=!a&&b},__altChanged:function(a){"loading"===a?this.alt=this.getAttribute("aria-label")||a:(this.__setAriaHidden(""===
a),this.setAttribute("aria-label",a))},__setAriaHidden:function(a){a?this.setAttribute("aria-hidden","true"):this.removeAttribute("aria-hidden")},__reset:function(){this.__coolingDown=this.active=!1}};
</script>

<dom-module id="paper-spinner-styles">
  <template>
    <style>
      /*
      /**************************/
      /* STYLES FOR THE SPINNER */
      /**************************/

      /*
       * Constants:
       *      ARCSIZE     = 270 degrees (amount of circle the arc takes up)
       *      ARCTIME     = 1333ms (time it takes to expand and contract arc)
       *      ARCSTARTROT = 216 degrees (how much the start location of the arc
       *                                should rotate each time, 216 gives us a
       *                                5 pointed star shape (it's 360/5 * 3).
       *                                For a 7 pointed star, we might do
       *                                360/7 * 3 = 154.286)
       *      SHRINK_TIME = 400ms
       */

      :host {
        display: inline-block;
        position: relative;
        width: 28px;
        height: 28px;

        /* 360 * ARCTIME / (ARCSTARTROT + (360-ARCSIZE)) */
        --paper-spinner-container-rotation-duration: 1568ms;

        /* ARCTIME */
        --paper-spinner-expand-contract-duration: 1333ms;

        /* 4 * ARCTIME */
        --paper-spinner-full-cycle-duration: 5332ms;

        /* SHRINK_TIME */
        --paper-spinner-cooldown-duration: 400ms;
      }

      #spinnerContainer {
        width: 100%;
        height: 100%;

        /* The spinner does not have any contents that would have to be
         * flipped if the direction changes. Always use ltr so that the
         * style works out correctly in both cases. */
        direction: ltr;
      }

      #spinnerContainer.active {
        -webkit-animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite;
        animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite;
      }

      @-webkit-keyframes container-rotate {
        to { -webkit-transform: rotate(360deg) }
      }

      @keyframes container-rotate {
        to { transform: rotate(360deg) }
      }

      .spinner-layer {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0;
        white-space: nowrap;
        color: var(--paper-spinner-color, var(--google-blue-500));
      }

      .layer-1 {
        color: var(--paper-spinner-layer-1-color, var(--google-blue-500));
      }

      .layer-2 {
        color: var(--paper-spinner-layer-2-color, var(--google-red-500));
      }

      .layer-3 {
        color: var(--paper-spinner-layer-3-color, var(--google-yellow-500));
      }

      .layer-4 {
        color: var(--paper-spinner-layer-4-color, var(--google-green-500));
      }

      /**
       * IMPORTANT NOTE ABOUT CSS ANIMATION PROPERTIES (keanulee):
       *
       * iOS Safari (tested on iOS 8.1) does not handle animation-delay very well - it doesn't
       * guarantee that the animation will start _exactly_ after that value. So we avoid using
       * animation-delay and instead set custom keyframes for each color (as layer-2undant as it
       * seems).
       */
      .active .spinner-layer {
        -webkit-animation-name: fill-unfill-rotate;
        -webkit-animation-duration: var(--paper-spinner-full-cycle-duration);
        -webkit-animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        -webkit-animation-iteration-count: infinite;
        animation-name: fill-unfill-rotate;
        animation-duration: var(--paper-spinner-full-cycle-duration);
        animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        animation-iteration-count: infinite;
        opacity: 1;
      }

      .active .spinner-layer.layer-1 {
        -webkit-animation-name: fill-unfill-rotate, layer-1-fade-in-out;
        animation-name: fill-unfill-rotate, layer-1-fade-in-out;
      }

      .active .spinner-layer.layer-2 {
        -webkit-animation-name: fill-unfill-rotate, layer-2-fade-in-out;
        animation-name: fill-unfill-rotate, layer-2-fade-in-out;
      }

      .active .spinner-layer.layer-3 {
        -webkit-animation-name: fill-unfill-rotate, layer-3-fade-in-out;
        animation-name: fill-unfill-rotate, layer-3-fade-in-out;
      }

      .active .spinner-layer.layer-4 {
        -webkit-animation-name: fill-unfill-rotate, layer-4-fade-in-out;
        animation-name: fill-unfill-rotate, layer-4-fade-in-out;
      }

      @-webkit-keyframes fill-unfill-rotate {
        12.5% { -webkit-transform: rotate(135deg) } /* 0.5 * ARCSIZE */
        25%   { -webkit-transform: rotate(270deg) } /* 1   * ARCSIZE */
        37.5% { -webkit-transform: rotate(405deg) } /* 1.5 * ARCSIZE */
        50%   { -webkit-transform: rotate(540deg) } /* 2   * ARCSIZE */
        62.5% { -webkit-transform: rotate(675deg) } /* 2.5 * ARCSIZE */
        75%   { -webkit-transform: rotate(810deg) } /* 3   * ARCSIZE */
        87.5% { -webkit-transform: rotate(945deg) } /* 3.5 * ARCSIZE */
        to    { -webkit-transform: rotate(1080deg) } /* 4   * ARCSIZE */
      }

      @keyframes fill-unfill-rotate {
        12.5% { transform: rotate(135deg) } /* 0.5 * ARCSIZE */
        25%   { transform: rotate(270deg) } /* 1   * ARCSIZE */
        37.5% { transform: rotate(405deg) } /* 1.5 * ARCSIZE */
        50%   { transform: rotate(540deg) } /* 2   * ARCSIZE */
        62.5% { transform: rotate(675deg) } /* 2.5 * ARCSIZE */
        75%   { transform: rotate(810deg) } /* 3   * ARCSIZE */
        87.5% { transform: rotate(945deg) } /* 3.5 * ARCSIZE */
        to    { transform: rotate(1080deg) } /* 4   * ARCSIZE */
      }

      @-webkit-keyframes layer-1-fade-in-out {
        0% { opacity: 1 }
        25% { opacity: 1 }
        26% { opacity: 0 }
        89% { opacity: 0 }
        90% { opacity: 1 }
        to { opacity: 1 }
      }

      @keyframes layer-1-fade-in-out {
        0% { opacity: 1 }
        25% { opacity: 1 }
        26% { opacity: 0 }
        89% { opacity: 0 }
        90% { opacity: 1 }
        to { opacity: 1 }
      }

      @-webkit-keyframes layer-2-fade-in-out {
        0% { opacity: 0 }
        15% { opacity: 0 }
        25% { opacity: 1 }
        50% { opacity: 1 }
        51% { opacity: 0 }
        to { opacity: 0 }
      }

      @keyframes layer-2-fade-in-out {
        0% { opacity: 0 }
        15% { opacity: 0 }
        25% { opacity: 1 }
        50% { opacity: 1 }
        51% { opacity: 0 }
        to { opacity: 0 }
      }

      @-webkit-keyframes layer-3-fade-in-out {
        0% { opacity: 0 }
        40% { opacity: 0 }
        50% { opacity: 1 }
        75% { opacity: 1 }
        76% { opacity: 0 }
        to { opacity: 0 }
      }

      @keyframes layer-3-fade-in-out {
        0% { opacity: 0 }
        40% { opacity: 0 }
        50% { opacity: 1 }
        75% { opacity: 1 }
        76% { opacity: 0 }
        to { opacity: 0 }
      }

      @-webkit-keyframes layer-4-fade-in-out {
        0% { opacity: 0 }
        65% { opacity: 0 }
        75% { opacity: 1 }
        90% { opacity: 1 }
        to { opacity: 0 }
      }

      @keyframes layer-4-fade-in-out {
        0% { opacity: 0 }
        65% { opacity: 0 }
        75% { opacity: 1 }
        90% { opacity: 1 }
        to { opacity: 0 }
      }

      .circle-clipper {
        display: inline-block;
        position: relative;
        width: 50%;
        height: 100%;
        overflow: hidden;
      }

      /**
       * Patch the gap that appear between the two adjacent div.circle-clipper while the
       * spinner is rotating (appears on Chrome 50, Safari 9.1.1, and Edge).
       */
      .spinner-layer::after {
        left: 45%;
        width: 10%;
        border-top-style: solid;
      }

      .spinner-layer::after,
      .circle-clipper::after {
        content: '';
        box-sizing: border-box;
        position: absolute;
        top: 0;
        border-width: var(--paper-spinner-stroke-width, 3px);
        border-radius: 50%;
      }

      .circle-clipper::after {
        bottom: 0;
        width: 200%;
        border-style: solid;
        border-bottom-color: transparent !important;
      }

      .circle-clipper.left::after {
        left: 0;
        border-right-color: transparent !important;
        -webkit-transform: rotate(129deg);
        transform: rotate(129deg);
      }

      .circle-clipper.right::after {
        left: -100%;
        border-left-color: transparent !important;
        -webkit-transform: rotate(-129deg);
        transform: rotate(-129deg);
      }

      .active .gap-patch::after,
      .active .circle-clipper::after {
        -webkit-animation-duration: var(--paper-spinner-expand-contract-duration);
        -webkit-animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        -webkit-animation-iteration-count: infinite;
        animation-duration: var(--paper-spinner-expand-contract-duration);
        animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        animation-iteration-count: infinite;
      }

      .active .circle-clipper.left::after {
        -webkit-animation-name: left-spin;
        animation-name: left-spin;
      }

      .active .circle-clipper.right::after {
        -webkit-animation-name: right-spin;
        animation-name: right-spin;
      }

      @-webkit-keyframes left-spin {
        0% { -webkit-transform: rotate(130deg) }
        50% { -webkit-transform: rotate(-5deg) }
        to { -webkit-transform: rotate(130deg) }
      }

      @keyframes left-spin {
        0% { transform: rotate(130deg) }
        50% { transform: rotate(-5deg) }
        to { transform: rotate(130deg) }
      }

      @-webkit-keyframes right-spin {
        0% { -webkit-transform: rotate(-130deg) }
        50% { -webkit-transform: rotate(5deg) }
        to { -webkit-transform: rotate(-130deg) }
      }

      @keyframes right-spin {
        0% { transform: rotate(-130deg) }
        50% { transform: rotate(5deg) }
        to { transform: rotate(-130deg) }
      }

      #spinnerContainer.cooldown {
        -webkit-animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite, fade-out var(--paper-spinner-cooldown-duration) cubic-bezier(0.4, 0.0, 0.2, 1);
        animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite, fade-out var(--paper-spinner-cooldown-duration) cubic-bezier(0.4, 0.0, 0.2, 1);
      }

      @-webkit-keyframes fade-out {
        0% { opacity: 1 }
        to { opacity: 0 }
      }

      @keyframes fade-out {
        0% { opacity: 1 }
        to { opacity: 0 }
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-spinner-lite">
  <template strip-whitespace>
    <style include="paper-spinner-styles"></style>

    <div id="spinnerContainer" class-name="[[__computeContainerClasses(active, __coolingDown)]]" on-animationend="__reset" on-webkit-animation-end="__reset">
      <div class="spinner-layer">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-spinner/paper-spinner-lite.html.js
Polymer({is:"paper-spinner-lite",behaviors:[Polymer.PaperSpinnerBehavior]});
</script>
</dom-module>




<script>//~~WEBPATH~~/tf-dashboard-common/data-loader-behavior.js
(function(a){a.DataLoaderBehavior={properties:{loadKey:{type:String,value:""},dataToLoad:{type:Array,value:function(){return[]}},getDataLoadName:{type:Function,value:function(){return function(b){return String(b)}}},loadDataCallback:Function,requestData:{type:Function,value:function(){var b=this;return function(c){return b.requestManager.request(b.getDataLoadUrl(c))}}},getDataLoadUrl:Function,dataLoading:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},_loadedData:{type:Object,value:function(){return new Set}},
_canceller:{type:Object,value:function(){return new Rk.Canceller}}},observers:["_dataToLoadChanged(isAttached, dataToLoad.*)"],onLoadFinish:function(){},reload:function(){this._loadedData.clear();this._loadData()},reset:function(){this._canceller&&this._canceller.cancelAll();this._loadedData&&this._loadedData.clear();this.isAttached&&this._loadData()},_dataToLoadChanged:function(){this.isAttached&&this._loadData()},created:function(){this._loadData=_.debounce(this._loadDataImpl,100,{leading:!0,trailing:!0})},
detached:function(){this._canceller.cancelAll();this.cancelAsync(this._loadDataAsync)},_loadDataImpl:function(){var b=this;this.cancelAsync(this._loadDataAsync);this.isAttached&&(this._loadDataAsync=this.async(function(){b._setDataLoading(!0);b._canceller.cancelAll();var c=b.dataToLoad.filter(function(e){e=b.getDataLoadName(e);return!b._loadedData.has(e)}).map(function(e){var f=b.getDataLoadName(e),g=b._canceller.cancellable(function(h){h.cancelled||(b._loadedData.add(f),b.loadDataCallback(b,e,h.value))});
return b.requestData(e).then(g)});return Promise.all(c).then(b._canceller.cancellable(function(e){b._setDataLoading(!1);if(!e.cancelled)b.onLoadFinish()}))}))}}})(Wk||(Wk={}));
</script>





<script>//~~WEBPATH~~/tf-imports/plottable.js
/*
 MIT
 MIT
 @fileoverview Implements the Signature API to help in comparing when two
 Plottable objects have "changed".

 Memoization in Plottable is complicated by mutable scales and datasets. We cannot simply
 reference compare two e.g. scales since it may have internally mutated. To resolve this,
 we write a recursive Signature interface that holds an immutable snapshot of whatever
 state the scale/data was in at the time. Then on memoized function invocation we sign the
 new inputs and compare the signatures to decide if we should recompute.

 We must hand-write a signature for each custom class we wish to support.
 MIT

 @fileoverview manually add d3-selection-multi to d3 default bundle. Most of this code is
 copied from d3-selection-multi@1.0.0.
 See https://github.com/d3/d3-selection-multi/issues/11 for why we have to do this
 MIT
 @fileoverview Implements a convenient thunk function to handle the common case
 of creating a memoized function that takes its inputs from mutable class properties.
 MIT
 @fileoverview Implements a function memoizer using the Signature API.
 Plottable 3.7.0 (https://github.com/palantir/plottable)
 Copyright 2014-2017 Palantir Technologies
 Licensed under MIT (https://github.com/palantir/plottable/blob/master/LICENSE)
 is-plain-object <https://github.com/jonschlinkert/is-plain-object>

 Copyright (c) 2014-2017, Jon Schlinkert.
 Released under the MIT License.
 isobject <https://github.com/jonschlinkert/isobject>

 Copyright (c) 2014-2017, Jon Schlinkert.
 Released under the MIT License.
*/
function bl(a){return function(b){function c(f){if(e[f])return e[f].exports;var g=e[f]={i:f,l:!1,exports:{}};b[f].call(g.exports,g,g.exports,c);g.l=!0;return g.exports}var e={};c.m=b;c.c=e;c.i=function(f){return f};c.d=function(f,g,h){c.o(f,g)||Object.defineProperty(f,g,{configurable:!1,enumerable:!0,get:h})};c.n=function(f){var g=f&&f.__esModule?function(){return f["default"]}:function(){return f};c.d(g,"a",g);return g};c.o=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)};c.p="";return c(c.s=
140)}([function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}b=e(107);c.Array=b;b=e(110);c.Color=b;b=e(55);c.DOM=b;b=e(56);c.Math=b;b=e(113);c.Object=b;b=e(57);c.RTree=b;b=e(115);c.Stacking=b;b=e(35);c.Window=b;f(e(108));f(e(109));f(e(12));f(e(111));f(e(112));f(e(58));f(e(116))},function(b){b.exports=a},function(b,c,e){function f(E,C,D){var J=C.accessor;C=C.scale;if(null==C)return[];var M=E.data();null!=D&&(M=M.filter(function(H,K){return D(H,K,E)}));M=M.map(function(H,K){return J(H,
K,E)});return C.extentOfValues(M)}var g=this&&this.__extends||function(E,C){function D(){this.constructor=E}for(var J in C)C.hasOwnProperty(J)&&(E[J]=C[J]);E.prototype=null===C?Object.create(C):(D.prototype=C.prototype,new D)},h=e(1),l=e(7);b=e(4);var n=e(18),m=e(6),q=e(9),r=e(20),v=e(0),u=e(12),w=e(10),z=e(51),A=e(52);c.Renderer=w.makeEnum(["svg","canvas"]);e=function(E){function C(){var D=E.call(this)||this;D._dataChanged=!1;D._attrExtents={};D._animate=!1;D._animators={};D._propertyExtents={};
D._resetEntityStore=function(){D._cachedEntityStore=void 0};D._overflowHidden=!0;D.addClass("plot");D._datasetToDrawer=new v.Map;D._attrBindings=h.map();D._includedValuesProvider=function(M,H){return D._includedValuesForScale(M,H)};D._renderCallback=function(){return D.render()};D._onDatasetUpdateCallback=function(){return D._onDatasetUpdate()};D._propertyBindings=h.map();var J=(new l.Easing).maxTotalDuration(C._ANIMATION_MAX_DURATION);D.animator(z.Animator.MAIN,J);D.animator(z.Animator.RESET,new l.Null);
D._deferredResetEntityStore=v.Window.debounce(A.DeferredRenderer.DEFERRED_RENDERING_DELAY,D._resetEntityStore);return D}g(C,E);C.getTotalDrawTime=function(D,J){return J.reduce(function(M,H){return M+H.animator.totalTime(D.length)},0)};C.applyDrawSteps=function(D,J){return D.map(function(M){var H=M.attrToProjector,K={};Object.keys(H).forEach(function(L){K[L]=function(P,S){return H[L](P,S,J)}});return{attrToAppliedProjector:K,animator:M.animator}})};C.prototype.anchor=function(D){D=u.coerceExternalD3(D);
E.prototype.anchor.call(this,D);this._dataChanged=!0;this._resetEntityStore();this._updateExtents();return this};C.prototype._setup=function(){var D=this;this._isSetup||(E.prototype._setup.call(this),null!=this._canvas&&this._appendCanvasNode(),this._renderArea=this.content().append("g").classed("render-area",!0),this.datasets().forEach(function(J){return D._createNodesForDataset(J)}))};C.prototype._appendCanvasNode=function(){var D=this.element().select(".plot-canvas-container");D.empty()&&(D=this.element().append("div").classed("plot-canvas-container",
!0),D.node().appendChild(this._canvas.node()))};C.prototype.setBounds=function(D,J,M,H){E.prototype.setBounds.call(this,D,J,M,H);this._resetEntityStore();null!=this._canvas&&(this._bufferCanvas&&!this._bufferCanvasValid&&(this._bufferCanvas.attr("width",this._canvas.attr("width")),this._bufferCanvas.attr("height",this._canvas.attr("height")),(M=this._bufferCanvas.node().getContext("2d"))&&M.drawImage(this._canvas.node(),0,0),this._bufferCanvasValid=!0),M=null!=window.devicePixelRatio?window.devicePixelRatio:
1,this._canvas.attr("width",D*M),this._canvas.attr("height",J*M),H=this._canvas.node().getContext("2d"))&&(H.setTransform(M,0,0,M,0,0),this._bufferCanvas&&H.drawImage(this._bufferCanvas.node(),0,0,D,J))};C.prototype.destroy=function(){var D=this;E.prototype.destroy.call(this);this._scales().forEach(function(J){return J.offUpdate(D._renderCallback)});this.datasets([])};C.prototype._createNodesForDataset=function(D){D=this._datasetToDrawer.get(D);"svg"===this.renderer()?D.useSVG(this._renderArea):D.useCanvas(this._canvas);
return D};C.prototype._createDrawer=function(){return new m.ProxyDrawer(function(){return new q.SVGDrawer("path","")},function(D){return new n.CanvasDrawer(D,function(){})})};C.prototype._getAnimator=function(D){return this._animateOnNextRender()?this._animators[D]||new l.Null:new l.Null};C.prototype._onDatasetUpdate=function(){this._updateExtents();this._dataChanged=!0;this._resetEntityStore();this.renderLowPriority()};C.prototype.attr=function(D,J,M){if(null==J)return this._attrBindings.get(D);
this._bindAttr(D,J,M);this.render();return this};C.prototype._bindProperty=function(D,J,M,H){var K=this._propertyBindings.get(D);K=null!=K?K.scale:null;this._propertyBindings.set(D,{accessor:"function"===typeof J?J:function(){return J},scale:M,postScale:H});null!=K&&this._uninstallScaleForKey(K,D);null!=M&&this._installScaleForKey(M,D);this._clearAttrToProjectorCache()};C.prototype._bindAttr=function(D,J,M){var H=this._attrBindings.get(D);H=null!=H?H.scale:null;this._attrBindings.set(D,{accessor:"function"===
typeof J?J:function(){return J},scale:M});null!=H&&this._uninstallScaleForKey(H,D);null!=M&&this._installScaleForKey(M,D);this._clearAttrToProjectorCache()};C.prototype._clearAttrToProjectorCache=function(){delete this._cachedAttrToProjector};C.prototype._getAttrToProjector=function(){null==this._cachedAttrToProjector&&(this._cachedAttrToProjector=this._generateAttrToProjector());return v.Object.assign({},this._cachedAttrToProjector)};C.prototype._generateAttrToProjector=function(){var D={};this._attrBindings.each(function(M,
H){D[H]=C._scaledAccessor(M)});var J=this._propertyProjectors();Object.keys(J).forEach(function(M){null==D[M]&&(D[M]=J[M])});return D};C.prototype.renderImmediately=function(){E.prototype.renderImmediately.call(this);this._isAnchored&&(this._paint(),this._dataChanged=!1);return this};C.prototype.renderLowPriority=function(){this._renderCallback()};C.prototype.animated=function(D){if(null==D)return this._animate;this._animate=D;return this};C.prototype.detach=function(){E.prototype.detach.call(this);
this._updateExtents();return this};C.prototype._scales=function(){var D=[];this._attrBindings.each(function(J){J=J.scale;null!=J&&-1===D.indexOf(J)&&D.push(J)});this._propertyBindings.each(function(J){J=J.scale;null!=J&&-1===D.indexOf(J)&&D.push(J)});return D};C.prototype._updateExtents=function(){var D=this;this._resetEntityStore();this._scales().forEach(function(J){return J.addIncludedValuesProvider(D._includedValuesProvider)})};C.prototype._filterForProperty=function(){return null};C.prototype.getExtentsForAttr=
function(D){var J=this;null==this._attrExtents[D]&&(this._attrExtents[D]=r.memThunk(function(){return J.datasets()},function(){return J._attrBindings.get(D)},function(M,H){return null==H||null==H.accessor?null:M.map(function(K){return f(K,H,null)})}));return this._attrExtents[D]()};C.prototype.getExtentsForProperty=function(D){var J=this;null==this._propertyExtents[D]&&(this._propertyExtents[D]=r.memThunk(function(){return J.datasets()},function(){return J._propertyBindings.get(D)},function(){return J._filterForProperty(D)},
function(M,H,K){return null==H||null==H.accessor?null:M.map(function(L){return f(L,H,K)})}));return this._propertyExtents[D]()};C.prototype._includedValuesForScale=function(D,J){var M=this;if(!this._isAnchored&&!J)return[];var H=[];this._attrBindings.each(function(K,L){K.scale===D&&(K=M.getExtentsForAttr(L),null!=K&&(H=H.concat(h.merge(K))))});this._propertyBindings.each(function(K,L){K.scale===D&&(K=M.getExtentsForProperty(L),null!=K&&(H=H.concat(h.merge(K))))});return H};C.prototype.animator=function(D,
J){if(void 0===J)return this._animators[D];this._animators[D]=J;return this};C.prototype.renderer=function(D){var J=this;if(void 0===D)return null==this._canvas?"svg":"canvas";null==this._canvas&&"canvas"===D?(this._canvas=h.select(document.createElement("canvas")).classed("plot-canvas",!0),this._bufferCanvas=h.select(document.createElement("canvas")),null!=this.element()&&this._appendCanvasNode(),this._datasetToDrawer.forEach(function(M){M.useCanvas(J._canvas)}),this.render()):null!=this._canvas&&
"svg"==D&&(this._canvas.remove(),this._bufferCanvas=this._canvas=null,this._datasetToDrawer.forEach(function(M){M.useSVG(J._renderArea)}),this.render());return this};C.prototype.addDataset=function(D){this._addDataset(D);this._onDatasetUpdate();return this};C.prototype._addDataset=function(D){this._removeDataset(D);var J=this._createDrawer(D);this._datasetToDrawer.set(D,J);this._isSetup&&this._createNodesForDataset(D);D.onUpdate(this._onDatasetUpdateCallback);return this};C.prototype.removeDataset=
function(D){this._removeDataset(D);this._onDatasetUpdate()};C.prototype._removeDataset=function(D){if(-1===this.datasets().indexOf(D))return this;this._removeDatasetNodes(D);D.offUpdate(this._onDatasetUpdateCallback);this._datasetToDrawer.delete(D);return this};C.prototype._removeDatasetNodes=function(D){this._datasetToDrawer.get(D).remove()};C.prototype.datasets=function(D){var J=this,M=[];this._datasetToDrawer.forEach(function(H,K){return M.push(K)});if(null==D)return M;M.forEach(function(H){return J._removeDataset(H)});
D.forEach(function(H){return J._addDataset(H)});this._onDatasetUpdate();return this};C.prototype._generateDrawSteps=function(){return[{attrToProjector:this._getAttrToProjector(),animator:new l.Null}]};C.prototype._additionalPaint=function(){};C.prototype._buildLightweightPlotEntities=function(D){var J=this,M=[];D.forEach(function(H,K){var L=J._datasetToDrawer.get(H),P=0;H.data().forEach(function(S,aa){var R=J._pixelPoint(S,aa,H);v.Math.isNaN(R.x)||v.Math.isNaN(R.y)||(M.push({datum:S,get position(){return J._pixelPoint.call(J,
S,aa,H)},index:aa,dataset:H,datasetIndex:K,component:J,drawer:L,validDatumIndex:P}),P++)})});return M};C.prototype._getDataToDraw=function(){var D=new v.Map;this.datasets().forEach(function(J){return D.set(J,J.data())});return D};C.prototype._paint=function(){var D=this;delete this._cachedAttrToProjector;var J=this._generateDrawSteps(),M=this._getDataToDraw(),H=this.datasets().map(function(L){return D._datasetToDrawer.get(L)});if("canvas"===this.renderer()){var K=this._canvas.node();K.getContext("2d").clearRect(0,
0,K.clientWidth,K.clientHeight);this._bufferCanvasValid=!1}this.datasets().forEach(function(L,P){var S=C.applyDrawSteps(J,L);H[P].draw(M.get(L),S)});K=this.datasets().map(function(L){return C.getTotalDrawTime(M.get(L),J)});K=v.Math.max(K,0);this._additionalPaint(K)};C.prototype.selections=function(D){var J=this;void 0===D&&(D=this.datasets());if("canvas"===this.renderer())return h.selectAll();var M=[];D.forEach(function(H){H=J._datasetToDrawer.get(H);null!=H&&(H=H.getVisualPrimitives(),M.push.apply(M,
H))});return h.selectAll(M)};C.prototype.entities=function(D){var J=this;return this._getEntityStore(D).entities().map(function(M){return J._lightweightPlotEntityToPlotEntity(M)})};C.prototype._getEntityStore=function(D){function J(K){return M._entityBounds(K)}var M=this;if(void 0!==D){var H=new v.EntityStore;H.addAll(this._buildLightweightPlotEntities(D),J,this._localOriginBounds());return H}void 0===this._cachedEntityStore&&(H=new v.EntityStore,H.addAll(this._buildLightweightPlotEntities(this.datasets()),
J,this._localOriginBounds()),this._cachedEntityStore=H);return this._cachedEntityStore};C.prototype._localOriginBounds=function(){return{topLeft:{x:0,y:0},bottomRight:{x:this.width(),y:this.height()}}};C.prototype._entityBounds=function(D){D=this._pixelPoint(D.datum,D.index,D.dataset);return{x:D.x,y:D.y,width:0,height:0}};C.prototype._lightweightPlotEntityToPlotEntity=function(D){return{bounds:this._entityBounds(D),component:D.component,dataset:D.dataset,datasetIndex:D.datasetIndex,datum:D.datum,
index:D.index,position:D.position,selection:h.select(D.drawer.getVisualPrimitives()[D.validDatumIndex])}};C.prototype.entitiesAt=function(){throw Error("plots must implement entitiesAt");};C.prototype.entityNearest=function(D){D=this._getEntityStore().entityNearest(D);return void 0===D?void 0:this._lightweightPlotEntityToPlotEntity(D)};C.prototype.entitiesIn=function(D,J){return this.entitiesInBounds(null==J?{x:D.topLeft.x,y:D.topLeft.y,width:D.bottomRight.x-D.topLeft.x,height:D.bottomRight.y-D.topLeft.y}:
{x:D.min,y:J.min,width:D.max-D.min,height:J.max-J.min})};C.prototype.entitiesInBounds=function(D){var J=this;if(D=this._getEntityStore().entitiesInBounds(D))return D.map(function(M){return J._lightweightPlotEntityToPlotEntity(M)})};C.prototype.entitiesInXBounds=function(D){var J=this;if(D=this._getEntityStore().entitiesInXBounds(D))return D.map(function(M){return J._lightweightPlotEntityToPlotEntity(M)})};C.prototype.entitiesInYBounds=function(D){var J=this;if(D=this._getEntityStore().entitiesInYBounds(D))return D.map(function(M){return J._lightweightPlotEntityToPlotEntity(M)})};
C.prototype._uninstallScaleForKey=function(D){D.offUpdate(this._renderCallback);D.offUpdate(this._deferredResetEntityStore);D.removeIncludedValuesProvider(this._includedValuesProvider)};C.prototype._installScaleForKey=function(D){D.onUpdate(this._renderCallback);D.onUpdate(this._deferredResetEntityStore);D.addIncludedValuesProvider(this._includedValuesProvider)};C.prototype._propertyProjectors=function(){return{}};C._scaledAccessor=function(D){var J=D.scale,M=D.accessor,H=D.postScale,K=null==J?M:
function(L,P,S){return J.scale(M(L,P,S))};return null==H?K:function(L,P,S){return H(K(L,P,S),L,P,S)}};C.prototype._pixelPoint=function(){return{x:0,y:0}};C.prototype._animateOnNextRender=function(){return this._animate&&this._dataChanged};return C}(b.Component);e._ANIMATION_MAX_DURATION=600;c.Plot=e},function(b,c,e){function f(l){for(var n in l)c.hasOwnProperty(n)||(c[n]=l[n])}b=e(105);c.TickGenerators=b;f(e(54));f(e(101));f(e(102));f(e(103));f(e(104));f(e(106));var g=e(54),h=e(11);c.isTransformable=
function(l){return l instanceof h.QuantitativeScale||l instanceof g.Category}},function(b,c,e){var f=e(1),g=e(30),h=e(0),l=e(12);b=e(10);c.XAlignment=b.makeEnum(["left","center","right"]);c.YAlignment=b.makeEnum(["top","center","bottom"]);b=function(){function n(){this._overflowHidden=!1;this._origin={x:0,y:0};this._xAlignment="left";this._yAlignment="top";this._isAnchored=this._isSetup=!1;this._cssClasses=new h.Set;this._destroyed=!1;this._onAnchorCallbacks=new h.CallbackSet;this._onDetachCallbacks=
new h.CallbackSet;this._cssClasses.add("component")}n.prototype.anchor=function(m){m=l.coerceExternalD3(m);if(this._destroyed)throw Error("Can't reuse destroy()-ed Components!");this.isRoot()&&(this._rootElement=m,this._rootElement.classed("plottable",!0));null!=this._element?m.node().appendChild(this._element.node()):(this._element=m.append("div"),this._setup());this._isAnchored=!0;this._onAnchorCallbacks.callCallbacks(this);return this};n.prototype.onAnchor=function(m){this._isAnchored&&m(this);
this._onAnchorCallbacks.add(m)};n.prototype.offAnchor=function(m){this._onAnchorCallbacks.delete(m)};n.prototype._setup=function(){var m=this;this._isSetup||(this._cssClasses.forEach(function(q){m._element.classed(q,!0)}),this._cssClasses=new h.Set,this._backgroundContainer=this._element.append("svg").classed("background-container",!0),this._content=this._element.append("svg").classed("content",!0),this._foregroundContainer=this._element.append("svg").classed("foreground-container",!0),this._overflowHidden?
this._content.classed("component-overflow-hidden",!0):this._content.classed("component-overflow-visible",!0),this._isSetup=!0)};n.prototype.requestedSpace=function(){return{minWidth:0,minHeight:0}};n.prototype.computeLayout=function(m,q,r){if(null==m||null==q||null==r){if(null==this._element)throw Error("anchor() must be called before computeLayout()");if(null!=this._rootElement)m={x:0,y:0},r=this._rootElement.node(),q=h.DOM.elementWidth(r),r=h.DOM.elementHeight(r);else throw Error("null arguments cannot be passed to computeLayout() on a non-root, unanchored node");
}var v=this._sizeFromOffer(q,r),u=v.height;v=v.width;this.setBounds(v,u,m.x+(q-v)*n._xAlignToProportion[this._xAlignment],m.y+(r-u)*n._yAlignToProportion[this._yAlignment]);return this};n.prototype.setBounds=function(m,q,r,v){void 0===r&&(r=0);void 0===v&&(v=0);this._width=m;this._height=q;this._origin={x:r,y:v};null!=this._element&&this._element.styles({left:r+"px",height:q+"px",top:v+"px",width:m+"px"});null!=this._resizeHandler&&this._resizeHandler({width:m,height:q})};n.prototype._sizeFromOffer=
function(m,q){var r=this.requestedSpace(m,q);return{width:this.fixedWidth()?Math.min(m,r.minWidth):m,height:this.fixedHeight()?Math.min(q,r.minHeight):q}};n.prototype.render=function(){this._isAnchored&&this._isSetup&&0<=this.width()&&0<=this.height()&&g.registerToRender(this);return this};n.prototype.renderLowPriority=function(){this.render()};n.prototype._scheduleComputeLayout=function(){this._isAnchored&&this._isSetup&&g.registerToComputeLayoutAndRender(this)};n.prototype.onResize=function(m){this._resizeHandler=
m;return this};n.prototype.renderImmediately=function(){return this};n.prototype.redraw=function(){this._isAnchored&&this._isSetup&&(this.isRoot()?this._scheduleComputeLayout():this.parent().redraw());return this};n.prototype.invalidateCache=function(){};n.prototype.renderTo=function(m){this.detach();if(null!=m){m="string"===typeof m?f.select(m):m instanceof Element?f.select(m):l.coerceExternalD3(m);if(!m.node()||null==m.node().nodeName)throw Error("Plottable requires a valid Element to renderTo");
if("svg"===m.node().nodeName)throw Error("Plottable 3.x and later can only renderTo an HTML component; pass a div instead!");this.anchor(m)}if(null==this._element)throw Error("If a Component has never been rendered before, then renderTo must be given a node to render to, or a d3.Selection, or a selector string");g.registerToComputeLayoutAndRender(this);g.flush()};n.prototype.xAlignment=function(m){if(null==m)return this._xAlignment;m=m.toLowerCase();if(null==n._xAlignToProportion[m])throw Error("Unsupported alignment: "+
m);this._xAlignment=m;this.redraw();return this};n.prototype.yAlignment=function(m){if(null==m)return this._yAlignment;m=m.toLowerCase();if(null==n._yAlignToProportion[m])throw Error("Unsupported alignment: "+m);this._yAlignment=m;this.redraw();return this};n.prototype.hasClass=function(m){return null==m?!1:null==this._element?this._cssClasses.has(m):this._element.classed(m)};n.prototype.addClass=function(m){null!=m&&(null==this._element?this._cssClasses.add(m):this._element.classed(m,!0))};n.prototype.removeClass=
function(m){null!=m&&(null==this._element?this._cssClasses.delete(m):this._element.classed(m,!1))};n.prototype.fixedWidth=function(){return!1};n.prototype.fixedHeight=function(){return!1};n.prototype.detach=function(){this.parent(null);this._isAnchored&&this._element.remove();this._isAnchored=!1;this._onDetachCallbacks.callCallbacks(this);return this};n.prototype.onDetach=function(m){this._onDetachCallbacks.add(m)};n.prototype.offDetach=function(m){this._onDetachCallbacks.delete(m)};n.prototype.parent=
function(m){if(void 0===m)return this._parent;if(null!==m&&!m.has(this))throw Error("Passed invalid parent");this._parent=m;return this};n.prototype.bounds=function(){var m=this.origin();return{topLeft:m,bottomRight:{x:m.x+this.width(),y:m.y+this.height()}}};n.prototype.destroy=function(){this._destroyed=!0;this.detach()};n.prototype.width=function(){return this._width};n.prototype.height=function(){return this._height};n.prototype.origin=function(){return{x:this._origin.x,y:this._origin.y}};n.prototype.originToRoot=
function(){for(var m=this.origin(),q=this.parent();null!=q;){var r=q.origin();m.x+=r.x;m.y+=r.y;q=q.parent()}return m};n.prototype.root=function(){for(var m=this;!m.isRoot();)m=m.parent();return m};n.prototype.isRoot=function(){return null==this.parent()};n.prototype.foreground=function(){return this._foregroundContainer};n.prototype.content=function(){return this._content};n.prototype.element=function(){return this._element};n.prototype.rootElement=function(){return this.root()._rootElement};n.prototype.background=
function(){return this._backgroundContainer};return n}();b._xAlignToProportion={left:0,center:.5,right:1};b._yAlignToProportion={top:0,center:.5,bottom:1};c.Component=b},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(59));f(e(62));f(e(133));f(e(21));f(e(64));f(e(66))},function(b,c){b=function(){function e(f,g){this._svgDrawerFactory=f;this._canvasDrawerFactory=g}e.prototype.useSVG=function(f){null!=this._currentDrawer&&this._currentDrawer.remove();var g=this._svgDrawerFactory();
g.attachTo(f);this._currentDrawer=g};e.prototype.useCanvas=function(f){null!=this._currentDrawer&&this._currentDrawer.remove();this._currentDrawer=this._canvasDrawerFactory(f.node().getContext("2d"))};e.prototype.getDrawer=function(){return this._currentDrawer};e.prototype.remove=function(){null!=this._currentDrawer&&this._currentDrawer.remove()};e.prototype.draw=function(f,g){this._currentDrawer.draw(f,g)};e.prototype.getVisualPrimitives=function(){return this._currentDrawer.getVisualPrimitives()};
e.prototype.getVisualPrimitiveAtIndex=function(f){return this._currentDrawer.getVisualPrimitiveAtIndex(f)};return e}();c.ProxyDrawer=b},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(70));f(e(71))},function(b,c,e){function f(l){void 0===l&&(l=3);g(l);return function(n){return n.toFixed(l)}}function g(l){if(0>l||20<l)throw new RangeError("Formatter precision must be between 0 and 20");if(l!==Math.floor(l))throw new RangeError("Formatter precision must be an integer");
}var h=e(1);c.currency=function(l,n,m){void 0===l&&(l=2);void 0===n&&(n="$");void 0===m&&(m=!0);var q=f(l);return function(r){var v=q(Math.abs(r));""!==v&&(v=m?n+v:v+n,0>r&&(v="-"+v));return v}};c.fixed=f;c.general=function(l){void 0===l&&(l=3);g(l);return function(n){if("number"===typeof n){var m=Math.pow(10,l);return String(Math.round(n*m)/m)}return String(n)}};c.identity=function(){return function(l){return String(l)}};c.percentage=function(l){void 0===l&&(l=0);var n=f(l);return function(m){var q=
m.toString();q=Math.pow(10,q.length-(q.indexOf(".")+1));return n(parseInt((100*m*q).toString(),10)/q)+"%"}};c.siSuffix=function(l){void 0===l&&(l=3);g(l);return function(n){return h.format("."+l+"s")(n)}};c.shortScale=function(){var l=0;void 0===l&&(l=3);g(l);var n=h.format("."+l+"e"),m=h.format("."+l+"f"),q=Math.pow(10,18),r=Math.pow(10,-l);return function(v){var u=Math.abs(v);if((u<r||u>=q)&&0!==u)return n(v);for(var w=-1;u>=Math.pow(1E3,w+2)&&4>w;)w++;u=-1===w?m(v):m(v/Math.pow(1E3,w+1))+"KMBTQ"[w];
if(0<v&&"1000"===u.substr(0,4)||0>v&&"-1000"===u.substr(0,5))4>w?(w++,u=m(v/Math.pow(1E3,w+1))+"KMBTQ"[w]):u=n(v);return u}};c.multiTime=function(){var l=[{specifier:".%L",predicate:function(n){return 0!==n.getMilliseconds()}},{specifier:":%S",predicate:function(n){return 0!==n.getSeconds()}},{specifier:"%I:%M",predicate:function(n){return 0!==n.getMinutes()}},{specifier:"%I %p",predicate:function(n){return 0!==n.getHours()}},{specifier:"%a %d",predicate:function(n){return 0!==n.getDay()&&1!==n.getDate()}},
{specifier:"%b %d",predicate:function(n){return 1!==n.getDate()}},{specifier:"%b",predicate:function(n){return 0!==n.getMonth()}}];return function(n){var m=l.filter(function(q){return q.predicate(n)});return h.timeFormat(0<m.length?m[0].specifier:"%Y")(n)}};c.time=function(l){return h.timeFormat(l)}},function(b,c,e){var f=e(1),g=e(0);b=function(){function h(l,n){this._root=f.select(document.createElementNS("http://www.w3.org/2000/svg","g"));this._className=n;this._svgElementName=l}h.prototype.draw=
function(l,n){var m=this;this._createAndDestroyDOMElements(l);var q=0;n.forEach(function(r){g.Window.setTimeout(function(){return m._drawStep(r)},q);q+=r.animator.totalTime(l.length)})};h.prototype.getVisualPrimitives=function(){null==this._cachedVisualPrimitivesNodes&&(this._cachedVisualPrimitivesNodes=this._selection.nodes());return this._cachedVisualPrimitivesNodes};h.prototype.getVisualPrimitiveAtIndex=function(l){return this.getVisualPrimitives()[l]};h.prototype.remove=function(){this._root.remove()};
h.prototype.attachTo=function(l){l.node().appendChild(this._root.node())};h.prototype.getRoot=function(){return this._root};h.prototype.selector=function(){return this._svgElementName};h.prototype._applyDefaultAttributes=function(){};h.prototype._createAndDestroyDOMElements=function(l){l=l.filter(function(n){return null!=n});l=this._root.selectAll(this.selector()).data(l);this._selection=l.enter().append(this._svgElementName).merge(l);l.exit().remove();this._cachedVisualPrimitivesNodes=null;null!=
this._className&&this._selection.classed(this._className,!0);this._applyDefaultAttributes(this._selection)};h.prototype._drawStep=function(l){var n=this;["fill","stroke"].forEach(function(m){null!=l.attrToAppliedProjector[m]&&n._selection.attr(m,l.attrToAppliedProjector[m])});l.animator.animate(this._selection,l.attrToAppliedProjector);null!=this._className&&this._selection.classed(this._className,!0)};return h}();c.SVGDrawer=b},function(b,c){c.makeEnum=function(e){return e.reduce(function(f,g){f[g]=
g;return f},{})}},function(b,c,e){var f=this&&this.__extends||function(n,m){function q(){this.constructor=n}for(var r in m)m.hasOwnProperty(r)&&(n[r]=m[r]);n.prototype=null===m?Object.create(m):(q.prototype=m.prototype,new q)},g=e(1),h=e(26),l=e(0);b=function(n){function m(){var q=n.call(this)||this;q._tickGenerator=function(r){return r.defaultTicks()};q._padProportion=.05;q._snappingDomainEnabled=!0;q._paddingExceptionsProviders=new l.Set;return q}f(m,n);m.prototype.autoDomain=function(){this._domainMax=
this._domainMin=null;n.prototype.autoDomain.call(this)};m.prototype._autoDomainIfAutomaticMode=function(){if(null!=this._domainMin&&null!=this._domainMax)this._setDomain([this._domainMin,this._domainMax]);else{var q=this._getExtent();null!=this._domainMin?(q=q[1],this._domainMin>=q&&(q=this._expandSingleValueDomain([this._domainMin,this._domainMin])[1]),this._setDomain([this._domainMin,q])):null!=this._domainMax?(q=q[0],this._domainMax<=q&&(q=this._expandSingleValueDomain([this._domainMax,this._domainMax])[0]),
this._setDomain([q,this._domainMax])):n.prototype._autoDomainIfAutomaticMode.call(this)}};m.prototype._getUnboundedExtent=function(q){void 0===q&&(q=!1);q=this._getAllIncludedValues(q);var r=this._defaultExtent();0!==q.length&&(q=[l.Math.min(q,r[0]),l.Math.max(q,r[1])],r=this._padDomain(q));return r};m.prototype._getExtent=function(){var q=this._getUnboundedExtent();null!=this._domainMin&&(q[0]=this._domainMin);null!=this._domainMax&&(q[1]=this._domainMax);return q};m.prototype.addPaddingExceptionsProvider=
function(q){this._paddingExceptionsProviders.add(q);this._autoDomainIfAutomaticMode()};m.prototype.removePaddingExceptionsProvider=function(q){this._paddingExceptionsProviders.delete(q);this._autoDomainIfAutomaticMode()};m.prototype.padProportion=function(q){if(null==q)return this._padProportion;if(0>q)throw Error("padProportion must be non-negative");this._padProportion=q;this._autoDomainIfAutomaticMode();return this};m.prototype._padDomain=function(q){var r=this;if(q[0].valueOf()===q[1].valueOf())return this._expandSingleValueDomain(q);
if(0===this._padProportion)return q;var v=this._padProportion/2,u=q[0],w=q[1],z=!1,A=!1;this._paddingExceptionsProviders.forEach(function(C){C(r).forEach(function(D){D.valueOf()===u.valueOf()&&(z=!0);D.valueOf()===w.valueOf()&&(A=!0)})});var E=this._backingScaleDomain();this._backingScaleDomain(q);q=z?u:this.invert(this.scale(u)-(this.scale(w)-this.scale(u))*v);v=A?w:this.invert(this.scale(w)+(this.scale(w)-this.scale(u))*v);this._backingScaleDomain(E);return this._snappingDomainEnabled?this._niceDomain([q,
v]):[q,v]};m.prototype.snappingDomainEnabled=function(q){null!=q&&(this._snappingDomainEnabled=q,this._autoDomainIfAutomaticMode())};m.prototype._expandSingleValueDomain=function(q){return q};m.prototype.invert=function(){throw Error("Subclasses should override invert");};m.prototype.domain=function(q){null!=q&&(this._domainMin=q[0],this._domainMax=q[1]);return n.prototype.domain.call(this,q)};m.prototype.domainMin=function(q){if(null==q)return this.domain()[0];this._domainMin=q;this._autoDomainIfAutomaticMode();
return this};m.prototype.domainMax=function(q){if(null==q)return this.domain()[1];this._domainMax=q;this._autoDomainIfAutomaticMode();return this};m.prototype.extentOfValues=function(q){q=g.extent(q.filter(function(r){return l.Math.isValidNumber(+r)}));return null==q[0]||null==q[1]?[]:q};m.prototype.zoom=function(q,r){var v=this;this.domain(this.range().map(function(u){return v.invert(h.zoomOut(u,q,r))}))};m.prototype.pan=function(q){var r=this;this.domain(this.range().map(function(v){return r.invert(v+
q)}))};m.prototype.scaleTransformation=function(){throw Error("Subclasses should override scaleTransformation");};m.prototype.invertedTransformation=function(){throw Error("Subclasses should override invertedTransformation");};m.prototype.getTransformationExtent=function(){throw Error("Subclasses should override getTransformationExtent");};m.prototype.getTransformationDomain=function(){throw Error("Subclasses should override getTransformationDomain");};m.prototype.setTransformationDomain=function(){throw Error("Subclasses should override setTransformationDomain");
};m.prototype._setDomain=function(q){function r(v){return l.Math.isNaN(v)||Infinity===v||-Infinity===v}r(q[0])||r(q[1])?l.Window.warn("Warning: QuantitativeScales cannot take NaN or Infinity as a domain value. Ignoring."):n.prototype._setDomain.call(this,q)};m.prototype.defaultTicks=function(){throw Error("Subclasses should override _getDefaultTicks");};m.prototype.ticks=function(){return this._tickGenerator(this)};m.prototype._niceDomain=function(){throw Error("Subclasses should override _niceDomain");
};m.prototype._defaultExtent=function(){throw Error("Subclasses should override _defaultExtent");};m.prototype.tickGenerator=function(){var q=Plottable.Scales.TickGenerators.integerTickGenerator();null!=q&&(this._tickGenerator=q)};return m}(e(17).Scale);b._DEFAULT_NUM_TICKS=10;c.QuantitativeScale=b},function(b,c,e){var f=e(1);c.coerceExternalD3=function(g){if(null==g.attrs){if(null==g.nodes){var h=[];g.each(function(){h.push(this)});return f.selectAll(h)}return f.selectAll(g.nodes())}return g}},function(b,
c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(83));f(e(84));f(e(85))},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(44));f(e(45));f(e(46));f(e(18));f(e(6));f(e(33));f(e(34));f(e(47));f(e(9));f(e(48))},function(b,c){b=function(){function e(){var f=this;this._anchorCallback=function(g){return f._anchor(g)};this._enabled=!0}e.prototype.attachTo=function(f){this._disconnect();this._componentAttachedTo=f;this._connect();return this};e.prototype.detachFrom=
function(){this.detach()};e.prototype.detach=function(){this._disconnect();this._componentAttachedTo=null;return this};e.prototype.enabled=function(f){if(null==f)return this._enabled;(this._enabled=f)?this._connect():this._disconnect();return this};e.prototype._anchor=function(){this._isAnchored=!0};e.prototype._unanchor=function(){this._isAnchored=!1};e.prototype._translateToComponentSpace=function(f){var g=this._componentAttachedTo.originToRoot();return{x:f.x-g.x,y:f.y-g.y}};e.prototype._isInsideComponent=
function(f){return 0<=f.x&&0<=f.y&&f.x<=this._componentAttachedTo.width()&&f.y<=this._componentAttachedTo.height()};e.prototype._connect=function(){if(this.enabled()&&null!=this._componentAttachedTo&&!this._isAnchored)this._componentAttachedTo.onAnchor(this._anchorCallback)};e.prototype._disconnect=function(){this._isAnchored&&this._unanchor();null!=this._componentAttachedTo&&this._componentAttachedTo.offAnchor(this._anchorCallback)};return e}();c.Interaction=b},function(b,c,e){var f=this&&this.__extends||
function(m,q){function r(){this.constructor=m}for(var v in q)q.hasOwnProperty(v)&&(m[v]=q[v]);m.prototype=null===q?Object.create(q):(r.prototype=q.prototype,new r)},g=e(3),h=e(0),l=e(52),n=e(2);b=function(m){function q(){var r=m.call(this)||this;r._autoAdjustXScaleDomain=!1;r._autoAdjustYScaleDomain=!1;r._deferredRendering=!1;r._applyDeferredRenderingTransform=function(v,u,w,z){r._isAnchored&&(null!=r._renderArea&&r._renderArea.attr("transform","translate("+v+", "+u+") scale("+w+", "+z+")"),null!=
r._canvas&&r._canvas.style("transform","translate("+v+"px, "+u+"px) scale("+w+", "+z+")"))};r.addClass("xy-plot");r._adjustYDomainOnChangeFromXCallback=function(){return r._adjustYDomainOnChangeFromX()};r._adjustXDomainOnChangeFromYCallback=function(){return r._adjustXDomainOnChangeFromY()};r._renderCallback=function(){if(r.deferredRendering()){var v=r.x()&&r.x().scale,u=r.y()&&r.y().scale;r._deferredRenderer.updateDomains(v,u)}else r.render()};r._deferredRenderer=new l.DeferredRenderer(function(){return r.render()},
r._applyDeferredRenderingTransform);return r}f(q,m);q.prototype.render=function(){this.deferredRendering()&&this._deferredRenderer.resetTransforms();return m.prototype.render.call(this)};q.prototype.deferredRendering=function(){return this._deferredRendering};q.prototype.x=function(r,v,u){if(null==r)return this._propertyBindings.get(q._X_KEY);this._bindProperty(q._X_KEY,r,v,u);r=this.width();null!=v&&null!=r&&v.range([0,r]);this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain();this.render();
return this};q.prototype.y=function(r,v,u){if(null==r)return this._propertyBindings.get(q._Y_KEY);this._bindProperty(q._Y_KEY,r,v,u);r=this.height();null!=v&&null!=r&&(v instanceof g.Category?v.range([0,r]):v.range([r,0]));this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain();this.render();return this};q.prototype._filterForProperty=function(r){return"x"===r&&this._autoAdjustXScaleDomain?this._makeFilterByProperty("y"):"y"===r&&this._autoAdjustYScaleDomain?this._makeFilterByProperty("x"):
null};q.prototype._makeFilterByProperty=function(r){r=this._propertyBindings.get(r);if(null!=r){var v=r.accessor,u=r.scale;if(null!=u)return function(w,z,A){var E=u.range();return h.Math.inRange(u.scale(v(w,z,A)),E[0],E[1])}}return null};q.prototype._uninstallScaleForKey=function(r,v){m.prototype._uninstallScaleForKey.call(this,r,v);r.offUpdate(v===q._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback)};q.prototype._installScaleForKey=function(r,v){m.prototype._installScaleForKey.call(this,
r,v);r.onUpdate(v===q._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback)};q.prototype.destroy=function(){m.prototype.destroy.call(this);this.x().scale&&this.x().scale.offUpdate(this._adjustYDomainOnChangeFromXCallback);this.y().scale&&this.y().scale.offUpdate(this._adjustXDomainOnChangeFromYCallback);return this};q.prototype.autorangeMode=function(r){if(null==r)return this._autoAdjustXScaleDomain?"x":this._autoAdjustYScaleDomain?"y":"none";switch(r){case "x":this._autoAdjustXScaleDomain=
!0;this._autoAdjustYScaleDomain=!1;this._adjustXDomainOnChangeFromY();break;case "y":this._autoAdjustXScaleDomain=!1;this._autoAdjustYScaleDomain=!0;this._adjustYDomainOnChangeFromX();break;case "none":this._autoAdjustYScaleDomain=this._autoAdjustXScaleDomain=!1;break;default:throw Error("Invalid scale name '"+r+"', must be 'x', 'y' or 'none'");}return this};q.prototype.computeLayout=function(r,v,u){m.prototype.computeLayout.call(this,r,v,u);r=(r=this.x())&&r.scale;null!=r&&r.range([0,this.width()]);
r=(r=this.y())&&r.scale;null!=r&&(r instanceof g.Category?r.range([0,this.height()]):r.range([this.height(),0]));return this};q.prototype._updateXExtentsAndAutodomain=function(){var r=this.x().scale;null!=r&&r.autoDomain()};q.prototype._updateYExtentsAndAutodomain=function(){var r=this.y().scale;null!=r&&r.autoDomain()};q.prototype.showAllData=function(){this._updateXExtentsAndAutodomain();this._updateYExtentsAndAutodomain();return this};q.prototype._adjustYDomainOnChangeFromX=function(){this._projectorsReady()&&
this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain()};q.prototype._adjustXDomainOnChangeFromY=function(){this._projectorsReady()&&this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain()};q.prototype._projectorsReady=function(){var r=this.x(),v=this.y();return null!=r&&null!=r.accessor&&null!=v&&null!=v.accessor};q.prototype._pixelPoint=function(r,v,u){var w=n.Plot._scaledAccessor(this.x()),z=n.Plot._scaledAccessor(this.y());return{x:w(r,v,u),y:z(r,v,u)}};q.prototype._getDataToDraw=
function(){var r=this,v=m.prototype._getDataToDraw.call(this);this.datasets().forEach(function(u){v.set(u,v.get(u).filter(function(w,z){var A=n.Plot._scaledAccessor(r.x())(w,z,u);w=n.Plot._scaledAccessor(r.y())(w,z,u);return h.Math.isValidNumber(A)&&h.Math.isValidNumber(w)}))});return v};return q}(n.Plot);b._X_KEY="x";b._Y_KEY="y";c.XYPlot=b},function(b,c,e){var f=e(0);b=function(){function g(){this._autoDomainAutomatically=!0;this._domainModificationInProgress=!1;this._updateId=0;this._callbacks=
new f.CallbackSet;this._includedValuesProviders=new f.Set}g.prototype.extentOfValues=function(){return[]};g.prototype._getAllIncludedValues=function(h){var l=this;void 0===h&&(h=!1);var n=[];this._includedValuesProviders.forEach(function(m){m=m(l,h);n=n.concat(m)});return n};g.prototype._getExtent=function(){return[]};g.prototype.onUpdate=function(h){this._callbacks.add(h);return this};g.prototype.offUpdate=function(h){this._callbacks.delete(h);return this};g.prototype._dispatchUpdate=function(){this._updateId++;
this._callbacks.callCallbacks(this)};g.prototype.autoDomain=function(){this._autoDomainAutomatically=!0;this._setDomain(this._getExtent())};g.prototype._autoDomainIfAutomaticMode=function(){this._autoDomainAutomatically&&this.autoDomain()};g.prototype.scale=function(){throw Error("Subclasses should override scale");};g.prototype.ticks=function(){return this.domain()};g.prototype.domain=function(h){if(null==h)return this._getDomain();this._autoDomainAutomatically=!1;this._setDomain(h);return this};
g.prototype._getDomain=function(){throw Error("Subclasses should override _getDomain");};g.prototype._setDomain=function(h){this._domainModificationInProgress||(this._domainModificationInProgress=!0,this._backingScaleDomain(h),this._dispatchUpdate(),this._domainModificationInProgress=!1)};g.prototype._backingScaleDomain=function(){throw Error("Subclasses should override _backingDomain");};g.prototype.range=function(h){if(null==h)return this._getRange();this._setRange(h);return this};g.prototype._getRange=
function(){throw Error("Subclasses should override _getRange");};g.prototype._setRange=function(){throw Error("Subclasses should override _setRange");};g.prototype.addIncludedValuesProvider=function(h){this._includedValuesProviders.add(h);this._autoDomainIfAutomaticMode();return this};g.prototype.removeIncludedValuesProvider=function(h){this._includedValuesProviders.delete(h);this._autoDomainIfAutomaticMode()};g.prototype.updateId=function(){return this._updateId};return g}();c.Scale=b},function(b,
c,e){function f(n,m,q,r){for(var v={},u=0;u<m.length;u++){var w=m[u];n.hasOwnProperty(w)&&(v[w]=n[w](q,r))}return v}function g(n){return null!=n["stroke-width"]?parseFloat(n["stroke-width"]):1}function h(n,m){if(m.stroke){n.lineWidth=g(m);var q=l.color(m.stroke);q.opacity=q.opacity*(null!=m["stroke-opacity"]?parseFloat(m["stroke-opacity"]):1)*(null!=m.opacity?parseFloat(m.opacity):1);n.strokeStyle=q.toString();n.stroke()}m.fill&&(q=l.color(m.fill),q.opacity=q.opacity*(null!=m["fill-opacity"]?parseFloat(m["fill-opacity"]):
1)*(null!=m.opacity?parseFloat(m.opacity):1),n.fillStyle=q.toString(),n.fill())}var l=e(1);b=function(){function n(m,q){this._context=m;this._drawStep=q}n.prototype.getDrawStep=function(){return this._drawStep};n.prototype.draw=function(m,q){q=q[q.length-1].attrToAppliedProjector;this._context.save();this._drawStep(this._context,m,q);this._context.restore()};n.prototype.getVisualPrimitives=function(){return[]};n.prototype.getVisualPrimitiveAtIndex=function(){return null};n.prototype.remove=function(){};
return n}();c.CanvasDrawer=b;c.ContextStyleAttrs="fill-opacity fill opacity stroke-opacity stroke-width stroke".split(" ");c.resolveAttributesSubsetWithStyles=function(n,m,q,r){return f(n,c.ContextStyleAttrs.concat(m),q,r)};c.resolveAttributes=f;c.getStrokeWidth=g;c.renderArea=function(n,m,q,r){n.save();n.beginPath();m.context(n);m(q);n.lineJoin="round";h(n,r);n.restore()};c.renderLine=function(n,m,q,r){n.save();n.beginPath();m.context(n);m(q);n.lineJoin="round";h(n,r);n.restore()};c.renderPathWithStyle=
h},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(50));f(e(27));f(e(51));f(e(93));f(e(53));f(e(94));f(e(95));f(e(96));f(e(97));f(e(98));f(e(99));f(e(100))},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(92));f(e(91));b=e(49);c.sign=b.sign},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(134));f(e(135));f(e(136));f(e(137))},function(b,c,e){var f=this&&this.__extends||function(m,q){function r(){this.constructor=
m}for(var v in q)q.hasOwnProperty(v)&&(m[v]=q[v]);m.prototype=null===q?Object.create(q):(r.prototype=q.prototype,new r)},g=e(1),h=e(5);b=e(4);var l=e(8),n=e(0);e=e(10);c.AxisOrientation=e.makeEnum(["bottom","left","right","top"]);e=function(m){function q(r,v){var u=m.call(this)||this;u._endTickLength=5;u._innerTickLength=5;u._tickLabelPadding=10;u._margin=15;u._showEndTickLabels=!1;u._annotationsEnabled=!1;u._annotationTierCount=1;if(null==r||null==v)throw Error("Axis requires a scale and orientation");
u._scale=r;u.orientation(v);u._setDefaultAlignment();u.addClass("axis");u.isHorizontal()?u.addClass("x-axis"):u.addClass("y-axis");u.formatter(l.identity());u._rescaleCallback=function(){return u._rescale()};u._scale.onUpdate(u._rescaleCallback);u._annotatedTicks=[];u._annotationFormatter=l.identity();return u}f(q,m);q.prototype.destroy=function(){m.prototype.destroy.call(this);this._scale.offUpdate(this._rescaleCallback)};q.prototype.tickLabelDataOnElement=function(r){if(null!=r){for(var v;null!=
r&&r.classList&&void 0===v;)r.classList.contains(q.TICK_LABEL_CLASS)?v=r:r=r.parentNode;return void 0===r?void 0:g.select(r).datum()}};q.prototype._computeWidth=function(){return this._maxLabelTickLength()};q.prototype._computeHeight=function(){return this._maxLabelTickLength()};q.prototype.requestedSpace=function(){var r=0,v=0;if(this.isHorizontal()){if(v=this._computeHeight()+this._margin,this.annotationsEnabled()){var u=this._annotationMeasurer.measure().height+2*q._ANNOTATION_LABEL_PADDING;v+=
u*this.annotationTierCount()}}else r=this._computeWidth()+this._margin,this.annotationsEnabled()&&(u=this._annotationMeasurer.measure().height+2*q._ANNOTATION_LABEL_PADDING,r+=u*this.annotationTierCount());return{minWidth:r,minHeight:v}};q.prototype.fixedHeight=function(){return this.isHorizontal()};q.prototype.fixedWidth=function(){return!this.isHorizontal()};q.prototype._rescale=function(){this.render()};q.prototype.computeLayout=function(r,v,u){m.prototype.computeLayout.call(this,r,v,u);this.isHorizontal()?
this._scale.range([0,this.width()]):this._scale.range([this.height(),0]);return this};q.prototype._sizeFromOffer=function(r,v){var u=this.requestedSpace(r,v);return this.isHorizontal()?{width:r,height:u.minHeight}:{height:v,width:u.minWidth}};q.prototype._setup=function(){m.prototype._setup.call(this);this._tickMarkContainer=this.content().append("g").classed(q.TICK_MARK_CLASS+"-container",!0);this._tickLabelContainer=this.content().append("g").classed(q.TICK_LABEL_CLASS+"-container",!0);this._baseline=
this.content().append("line").classed("baseline",!0);this._annotationContainer=this.content().append("g").classed("annotation-container",!0);this._annotationContainer.append("g").classed("annotation-line-container",!0);this._annotationContainer.append("g").classed("annotation-circle-container",!0);this._annotationContainer.append("g").classed("annotation-rect-container",!0);var r=this._annotationContainer.append("g").classed("annotation-label-container",!0);r=new h.SvgContext(r.node());this._annotationMeasurer=
new h.CacheMeasurer(r);this._annotationWriter=new h.Writer(this._annotationMeasurer,r)};q.prototype._getTickValues=function(){return[]};q.prototype.renderImmediately=function(){var r=this._getTickValues(),v=this._tickMarkContainer.selectAll("."+q.TICK_MARK_CLASS).data(r),u=v.enter().append("line").classed(q.TICK_MARK_CLASS,!0).merge(v);u.attrs(this._generateTickMarkAttrHash());g.select(u.nodes()[0]).classed(q.END_TICK_MARK_CLASS,!0).attrs(this._generateTickMarkAttrHash(!0));g.select(u.nodes()[r.length-
1]).classed(q.END_TICK_MARK_CLASS,!0).attrs(this._generateTickMarkAttrHash(!0));v.exit().remove();this._baseline.attrs(this._generateBaselineAttrHash());this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations();return this};q.prototype.annotatedTicks=function(){return this._annotatedTicks};q.prototype.annotationFormatter=function(r){if(null==r)return this._annotationFormatter;this._annotationFormatter=r;this.render();return this};q.prototype.annotationsEnabled=function(){return this._annotationsEnabled};
q.prototype.annotationTierCount=function(){return this._annotationTierCount};q.prototype._drawAnnotations=function(){function r(W){switch(A.orientation()){case "bottom":case "right":return w(W);case "top":case "left":return w(W)-C.get(W).height}}function v(W){return H.has(W)?"hidden":"visible"}function u(W){return A._scale.scale(W)}function w(W){switch(A.orientation()){case "bottom":case "right":return M.get(W)*J+L;case "top":case "left":return K-L-M.get(W)*J}}function z(W,X,ja){W=W.selectAll("."+
ja).data(D);X=W.enter().append(X).classed(ja,!0).merge(W);W.exit().remove();return X}var A=this,E=q._ANNOTATION_LABEL_PADDING,C=new n.Map,D=this._annotatedTicksToRender();D.forEach(function(W){var X=A._annotationMeasurer.measure(A.annotationFormatter()(W));C.set(W,{width:X.width+2*E,height:X.height+2*E})});var J=this._annotationMeasurer.measure().height+2*E,M=this._annotationToTier(C),H=new n.Set,K=this.isHorizontal()?this.height():this.width(),L=this._coreSize(),P=Math.min(this.annotationTierCount(),
Math.floor((K-L)/J));M.forEach(function(W,X){(-1===W||W>=P)&&H.add(X)});switch(this.orientation()){case "bottom":case "right":var S=0;break;case "top":S=this.height();break;case "left":S=this.width()}var aa=this.isHorizontal();z(this._annotationContainer.select(".annotation-line-container"),"line",q.ANNOTATION_LINE_CLASS).attrs({x1:aa?u:S,x2:aa?u:w,y1:aa?S:u,y2:aa?w:u,visibility:v});z(this._annotationContainer.select(".annotation-circle-container"),"circle",q.ANNOTATION_CIRCLE_CLASS).attrs({cx:aa?
u:S,cy:aa?S:u,r:3});z(this._annotationContainer.select(".annotation-rect-container"),"rect",q.ANNOTATION_RECT_CLASS).attrs({x:aa?u:r,y:aa?r:u,width:aa?function(W){return C.get(W).width}:function(W){return C.get(W).height},height:aa?function(W){return C.get(W).height}:function(W){return C.get(W).width},visibility:v});var R=this._annotationWriter,Y=this.annotationFormatter();S=z(this._annotationContainer.select(".annotation-label-container"),"g",q.ANNOTATION_LABEL_CLASS);S.selectAll(".text-container").remove();
S.attrs({transform:function(W){var X=aa?u(W):r(W);W=aa?r(W):u(W);return"translate("+X+","+W+")"},visibility:v}).each(function(W){R.write(Y(W),aa?C.get(W).width:C.get(W).height,aa?C.get(W).height:C.get(W).width,{xAlign:"center",yAlign:"center",textRotation:aa?0:90},g.select(this).node())})};q.prototype._annotatedTicksToRender=function(){var r=this,v=this._scale.range();return n.Array.uniq(this.annotatedTicks().filter(function(u){return null==u?!1:n.Math.inRange(r._scale.scale(u),v[0],v[1])}))};q.prototype._coreSize=
function(){var r=this.isHorizontal()?this.height():this.width(),v=this.isHorizontal()?this._computeHeight():this._computeWidth();return Math.min(v,r)};q.prototype._annotationTierHeight=function(){return this._annotationMeasurer.measure().height+2*q._ANNOTATION_LABEL_PADDING};q.prototype._annotationToTier=function(r){var v=this,u=[[]],w=new n.Map,z=this.isHorizontal()?this.width():this.height();this._annotatedTicksToRender().forEach(function(A){var E=v._scale.scale(A),C=r.get(A).width;if(0>E||E+C>
z)w.set(A,-1);else{for(var D=function(M){return u[M].some(function(H){var K=v._scale.scale(H);H=r.get(H).width;return E+C>=K&&E<=K+H})},J=0;D(J);)J++,u.length===J&&u.push([]);u[J].push(A);w.set(A,J)}});return w};q.prototype._removeAnnotations=function(){this._annotationContainer.selectAll(".annotation-line").remove();this._annotationContainer.selectAll(".annotation-circle").remove();this._annotationContainer.selectAll(".annotation-rect").remove();this._annotationContainer.selectAll(".annotation-label").remove()};
q.prototype._generateBaselineAttrHash=function(){var r={x1:0,y1:0,x2:0,y2:0};switch(this._orientation){case "bottom":r.x2=this.width();break;case "top":r.x2=this.width();r.y1=this.height();r.y2=this.height();break;case "left":r.x1=this.width();r.x2=this.width();r.y2=this.height();break;case "right":r.y2=this.height()}return r};q.prototype._generateTickMarkAttrHash=function(r){function v(z){return u._scale.scale(z)}var u=this;void 0===r&&(r=!1);var w={x1:0,y1:0,x2:0,y2:0};this.isHorizontal()?(w.x1=
v,w.x2=v):(w.y1=v,w.y2=v);r=r?this._endTickLength:this._innerTickLength;switch(this._orientation){case "bottom":w.y2=r;break;case "top":w.y1=this.height();w.y2=this.height()-r;break;case "left":w.x1=this.width();w.x2=this.width()-r;break;case "right":w.x2=r}return w};q.prototype._setDefaultAlignment=function(){switch(this._orientation){case "bottom":this.yAlignment("top");break;case "top":this.yAlignment("bottom");break;case "left":this.xAlignment("right");break;case "right":this.xAlignment("left")}};
q.prototype.isHorizontal=function(){return"top"===this._orientation||"bottom"===this._orientation};q.prototype.getScale=function(){return this._scale};q.prototype.formatter=function(r){if(null==r)return this._formatter;this._formatter=r;this.redraw();return this};q.prototype.innerTickLength=function(){return this._innerTickLength};q.prototype.endTickLength=function(){return this._endTickLength};q.prototype._maxLabelTickLength=function(){return this.showEndTickLabels()?Math.max(this.innerTickLength(),
this.endTickLength()):this.innerTickLength()};q.prototype.tickLabelPadding=function(r){if(null==r)return this._tickLabelPadding;if(0>r)throw Error("tick label padding must be positive");this._tickLabelPadding=r;this.redraw();return this};q.prototype.margin=function(r){if(null==r)return this._margin;if(0>r)throw Error("margin size must be positive");this._margin=r;this.redraw();return this};q.prototype.orientation=function(r){if(null==r)return this._orientation;r=r.toLowerCase();if("top"!==r&&"bottom"!==
r&&"left"!==r&&"right"!==r)throw Error("unsupported orientation");this._orientation=r;this.redraw();return this};q.prototype.showEndTickLabels=function(){return this._showEndTickLabels};q.prototype._showAllTickMarks=function(){this._tickMarkContainer.selectAll("."+q.TICK_MARK_CLASS).each(function(){g.select(this).style("visibility","inherit")})};q.prototype._showAllTickLabels=function(){this._tickLabelContainer.selectAll("."+q.TICK_LABEL_CLASS).each(function(){g.select(this).style("visibility","inherit")})};
q.prototype._hideOverflowingTickLabels=function(){var r=this.element().node().getBoundingClientRect(),v=this._tickLabelContainer.selectAll("."+q.TICK_LABEL_CLASS);v.empty()||v.each(function(){n.DOM.clientRectInside(this.getBoundingClientRect(),r)||g.select(this).style("visibility","hidden")})};q.prototype._hideTickMarksWithoutLabel=function(){var r=this._tickMarkContainer.selectAll("."+q.TICK_MARK_CLASS),v=this._tickLabelContainer.selectAll("."+q.TICK_LABEL_CLASS).filter(function(){var u=g.select(this).style("visibility");
return"inherit"===u||"visible"===u}).data();r.each(function(u){-1===v.indexOf(u)&&g.select(this).style("visibility","hidden")})};q.prototype.invalidateCache=function(){m.prototype.invalidateCache.call(this);this._annotationMeasurer.reset()};return q}(b.Component);e.END_TICK_MARK_CLASS="end-tick-mark";e.TICK_MARK_CLASS="tick-mark";e.TICK_LABEL_CLASS="tick-label";e.ANNOTATION_LINE_CLASS="annotation-line";e.ANNOTATION_RECT_CLASS="annotation-rect";e.ANNOTATION_CIRCLE_CLASS="annotation-circle";e.ANNOTATION_LABEL_CLASS=
"annotation-label";e._ANNOTATION_LABEL_PADDING=4;c.Axis=e},function(b,c){c.SHOW_WARNINGS=!0;c.ADD_TITLE_ELEMENTS=!0},function(b,c,e){var f=e(0);b=function(){function g(){this._eventToProcessingFunction={};this._eventTarget=document;this._eventNameToCallbackSet={};this._connected=!1}g.prototype._hasNoCallbacks=function(){for(var h=Object.keys(this._eventNameToCallbackSet),l=0;l<h.length;l++)if(0!==this._eventNameToCallbackSet[h[l]].size)return!1;return!0};g.prototype._connect=function(){var h=this;
this._connected||(Object.keys(this._eventToProcessingFunction).forEach(function(l){h._eventTarget.addEventListener(l,h._eventToProcessingFunction[l])}),this._connected=!0)};g.prototype._disconnect=function(){var h=this;this._connected&&this._hasNoCallbacks()&&(Object.keys(this._eventToProcessingFunction).forEach(function(l){h._eventTarget.removeEventListener(l,h._eventToProcessingFunction[l])}),this._connected=!1)};g.prototype._addCallbackForEvent=function(h,l){null==this._eventNameToCallbackSet[h]&&
(this._eventNameToCallbackSet[h]=new f.CallbackSet);this._eventNameToCallbackSet[h].add(l);this._connect()};g.prototype._removeCallbackForEvent=function(h,l){null!=this._eventNameToCallbackSet[h]&&this._eventNameToCallbackSet[h].delete(l);this._disconnect()};g.prototype._callCallbacksForEvent=function(h){for(var l=[],n=1;n<arguments.length;n++)l[n-1]=arguments[n];n=this._eventNameToCallbackSet[h];null!=n&&n.callCallbacks.apply(n,l)};return g}();c.Dispatcher=b},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||
(c[h]=g[h])}f(e(87));f(e(88));f(e(40));f(e(89));f(e(90));b=e(26);c.zoomOut=b.zoomOut},function(b,c){function e(l,n,m){return m-(m-l)*n}function f(l,n,m,q){var r=1<n;m=r?q:m;if(null==m)return n;l=l.getTransformationDomain();return(r?Math.min:Math.max)(n,m/Math.abs(l[1]-l[0]))}function g(l,n,m,q,r){if(1>=n)return{centerPoint:m,zoomAmount:n};if(null==q&&null==r)return{centerPoint:m,zoomAmount:n};var v=h(l),u,w=l.getTransformationDomain();w=(u=w[1]<w[0])?Infinity:-Infinity;u=u?-Infinity:Infinity;q=null==
q?w:q;r=null==r?u:r;u=l.getTransformationDomain();w=u[0];u=u[1];r=l.scaleTransformation(r);u=l.scaleTransformation(u);var z=e(u,n,m);q=l.scaleTransformation(q);l=l.scaleTransformation(w);w=e(l,n,m);return Math.abs(z-w)>Math.abs(r-q)?(n=(r-q)/(u-l),1!==n?{centerPoint:(u*n-r)/(n-1),zoomAmount:n}:{centerPoint:m,zoomAmount:n}):z>r!=v?{centerPoint:(u*n-r)/(n-1),zoomAmount:n}:w<q!=v?{centerPoint:(l*n-q)/(n-1),zoomAmount:n}:{centerPoint:m,zoomAmount:n}}function h(l){l=l.range();return l[1]<l[0]}c.zoomOut=
e;c.constrainedZoom=function(l,n,m,q,r,v,u){n=f(l,n,q,r);return g(l,n,m,v,u)};c.constrainZoomExtents=f;c.constrainZoomValues=g;c.constrainedTranslation=function(l,n,m,q){var r=l.getTransformationDomain(),v=r[0],u=r[1];r=h(l);0<n!==r?(m=q,null!=m&&(v=l.scaleTransformation(u),l=l.scaleTransformation(m),n=(r?Math.max:Math.min)(v+n,l)-v)):null!=m&&(v=l.scaleTransformation(v),l=l.scaleTransformation(m),n=(r?Math.min:Math.max)(v+n,l)-v);return n}},function(b,c,e){function f(J,M,H){var K=J.scale;if(K instanceof
w.Category)H=K.rangeBand();else{var L=J.accessor;J=h.set(A.Array.flatten(M.map(function(P){return P.data().map(function(S,aa){return L(S,aa,P)}).filter(function(S){return null!=S}).map(function(S){return S.valueOf()})}))).values().map(function(P){return+P});J.sort(function(P,S){return P-S});J=J.map(function(P){return K.scale(P)});J=h.pairs(J);H=A.Math.min(J,function(P){return Math.abs(P[1]-P[0])},H*D._SINGLE_BAR_DIMENSION_RATIO);H*=D._BAR_THICKNESS_RATIO}return H}var g=this&&this.__extends||function(J,
M){function H(){this.constructor=J}for(var K in M)M.hasOwnProperty(K)&&(J[K]=M[K]);J.prototype=null===M?Object.create(M):(H.prototype=M.prototype,new H)},h=e(1),l=e(5),n=e(7),m=e(8),q=e(14),r=e(6),v=e(34),u=e(20),w=e(3),z=e(11),A=e(0);b=e(10);var E=e(19),C=e(2);e=e(16);c.BarOrientation=b.makeEnum(["vertical","horizontal"]);c.LabelsPosition=b.makeEnum(["start","middle","end","outside"]);c.BarAlignment=b.makeEnum(["start","middle","end"]);var D=function(J){function M(H){void 0===H&&(H="vertical");var K=
J.call(this)||this;K._labelFormatter=m.identity();K._labelsEnabled=!1;K._labelsPosition=c.LabelsPosition.end;K._hideBarsIfAnyAreTooWide=!0;K._barAlignment="middle";K._computeBarPixelThickness=u.memoize(f);K._fixedBarPixelThickness=!0;K.addClass("bar-plot");if("vertical"!==H&&"horizontal"!==H)throw Error(H+" is not a valid orientation for Plots.Bar");K._isVertical="vertical"===H;K.animator("baseline",new n.Null);K.attr("fill",(new w.Color).range()[0]);K.attr(M._BAR_THICKNESS_KEY,function(){return K._barPixelThickness()});
K._labelConfig=new A.Map;K._baselineValueProvider=function(){return[K.baselineValue()]};return K}g(M,J);M.prototype.computeLayout=function(H,K,L){J.prototype.computeLayout.call(this,H,K,L);this._updateExtents();return this};M.prototype.x=function(H,K){if(null==H)return J.prototype.x.call(this);null==K?J.prototype.x.call(this,H):J.prototype.x.call(this,H,K);this._updateThicknessAttr();this._updateLengthScale();return this};M.prototype.y=function(H,K){if(null==H)return J.prototype.y.call(this);null==
K?J.prototype.y.call(this,H):J.prototype.y.call(this,H,K);this._updateLengthScale();return this};M.prototype.length=function(){return this._isVertical?this.y():this.x()};M.prototype.position=function(){return this._isVertical?this.x():this.y()};M.prototype.barEnd=function(){return this._propertyBindings.get(M._BAR_END_KEY)};M.prototype.barAlignment=function(H){if(null==H)return this._barAlignment;this._barAlignment=H;this._clearAttrToProjectorCache();this.render();return this};M.prototype.orientation=
function(){return this._isVertical?"vertical":"horizontal"};M.prototype._createDrawer=function(){return new r.ProxyDrawer(function(){return new v.RectangleSVGDrawer(M._BAR_AREA_CLASS)},function(H){return new q.RectangleCanvasDrawer(H)})};M.prototype._setup=function(){J.prototype._setup.call(this);this._baseline=this._renderArea.append("line").classed("baseline",!0)};M.prototype.baselineValue=function(){if(null!=this._baselineValue)return this._baselineValue;if(!this._projectorsReady())return 0;var H=
this.length().scale;return H?H instanceof w.Time?new Date(0):0:0};M.prototype.addDataset=function(H){J.prototype.addDataset.call(this,H);return this};M.prototype._addDataset=function(H){J.prototype._addDataset.call(this,H);return this};M.prototype.removeDataset=function(H){J.prototype.removeDataset.call(this,H)};M.prototype._removeDataset=function(H){J.prototype._removeDataset.call(this,H);return this};M.prototype.datasets=function(H){if(null==H)return J.prototype.datasets.call(this);J.prototype.datasets.call(this,
H);return this};M.prototype.labelsEnabled=function(H){if(null==H)return this._labelsEnabled;this._labelsEnabled=H;this._clearAttrToProjectorCache();this.render();return this};M.prototype.labelFormatter=function(H){if(null==H)return this._labelFormatter;this._labelFormatter=H;this._clearAttrToProjectorCache();this.render();return this};M.prototype._createNodesForDataset=function(H){var K=J.prototype._createNodesForDataset.call(this,H),L=this._renderArea.append("g").classed(M._LABEL_AREA_CLASS,!0),
P=new l.SvgContext(L.node()),S=new l.CacheMeasurer(P);P=new l.Writer(S,P);this._labelConfig.set(H,{labelArea:L,measurer:S,writer:P});return K};M.prototype._removeDatasetNodes=function(H){J.prototype._removeDatasetNodes.call(this,H);var K=this._labelConfig.get(H);null!=K&&(K.labelArea.remove(),this._labelConfig.delete(H))};M.prototype.entityNearest=function(H){var K=this;return this._computeBarPixelThickness.doLocked(function(){var L=K._isVertical?H.x:H.y,P=K._isVertical?H.y:H.x,S=K.bounds(),aa={min:0,
max:S.bottomRight.x-S.topLeft.x},R={min:0,max:S.bottomRight.y-S.topLeft.y},Y=C.Plot._scaledAccessor(K.length()),W=K.length().scale.scale(K.baselineValue()),X=Infinity,ja=Infinity,pa;K._getEntityStore().entities().forEach(function(ta){var da=K._entityBounds(ta);if(A.DOM.intersectsBBox(aa,R,da)){var Aa=0,Ca=0;if(!A.DOM.intersectsBBox(H.x,H.y,da,.5)){Ca=K._pixelPointBar(Y(ta.datum,ta.index,ta.dataset),W,da);Aa=Math.abs(L-(K._isVertical?Ca.x:Ca.y));var oa=K._isVertical?da.y:da.x;da=oa+(K._isVertical?
da.height:da.width);Ca=P>=oa-.5&&P<=da+.5?0:Math.abs(P-(K._isVertical?Ca.y:Ca.x))}if(Aa<X||Aa===X&&Ca<ja)pa=ta,X=Aa,ja=Ca}});if(void 0!==pa)return K._lightweightPlotEntityToPlotEntity(pa)})};M.prototype.entitiesAt=function(H){return this._entitiesIntersecting(H.x,H.y)};M.prototype._entitiesIntersecting=function(H,K){var L=this,P=[];this._getEntityStore().entities().forEach(function(S){A.DOM.intersectsBBox(H,K,L._entityBounds(S))&&P.push(L._lightweightPlotEntityToPlotEntity(S))});return P};M.prototype._updateLengthScale=
function(){if(this._projectorsReady()){var H=this.length().scale;H instanceof z.QuantitativeScale&&(H.addPaddingExceptionsProvider(this._baselineValueProvider),H.addIncludedValuesProvider(this._baselineValueProvider))}};M.prototype.renderImmediately=function(){var H=this;this._barPixelThickness();return this._computeBarPixelThickness.doLocked(function(){return J.prototype.renderImmediately.call(H)})};M.prototype._additionalPaint=function(H){var K=this,L=this.length().scale.scale(this.baselineValue());
L={x1:this._isVertical?0:L,y1:this._isVertical?L:0,x2:this._isVertical?this.width():L,y2:this._isVertical?L:this.height()};this._getAnimator("baseline").animate(this._baseline,L);this.datasets().forEach(function(P){return K._labelConfig.get(P).labelArea.selectAll("g").remove()});this._labelsEnabled&&A.Window.setTimeout(function(){return K._drawLabels()},H)};M.prototype.getExtentsForProperty=function(H){var K=this,L=J.prototype.getExtentsForProperty.call(this,H);if("x"===H&&this._isVertical)H=this.x();
else{if("y"!==H||this._isVertical)return L;H=this.y()}if(!(H&&H.scale&&H.scale instanceof z.QuantitativeScale))return L;var P=H.scale,S=this._barPixelThickness();return L=L.map(function(aa){return h.extent([P.invert(K._getPositionAttr(P.scale(aa[0]),S)),P.invert(K._getPositionAttr(P.scale(aa[0]),S)+S),P.invert(K._getPositionAttr(P.scale(aa[1]),S)),P.invert(K._getPositionAttr(P.scale(aa[1]),S)+S)])})};M.prototype._getPositionAttr=function(H,K){this._isVertical||(H-=K,K*=-1);switch(this._barAlignment){case "start":return H;
case "end":return H-K;default:return H-K/2}};M.prototype._drawLabels=function(){var H=this,K=this._getDataToDraw(),L=this._getAttrToProjector(),P=this.datasets().some(function(S){return K.get(S).some(function(aa,R){return null==aa?!1:H._drawLabel(aa,R,S,L)})});this._hideBarsIfAnyAreTooWide&&P&&this.datasets().forEach(function(S){return H._labelConfig.get(S).labelArea.selectAll("g").remove()})};M.prototype._drawLabel=function(H,K,L,P){var S=this._labelConfig.get(L),aa=S.labelArea,R=S.measurer;S=S.writer;
var Y=this.length().accessor,W=Y(H,K,L);Y=this.length().scale;var X=null!=Y?Y.scale(W):W,ja=null!=Y?Y.scale(this.baselineValue()):this.baselineValue(),pa={x:P.x(H,K,L),y:P.y(H,K,L)};Y={width:P.width(H,K,L),height:P.height(H,K,L)};W=this._labelFormatter(W,H,K,L);R=R.measure(W);var ta=this._shouldShowLabelOnBar(pa,Y,R);pa=this._calculateLabelProperties(pa,Y,R,ta,this._isVertical?X<=ja:X<ja);X=pa.containerDimensions;ja=pa.labelContainerOrigin;pa=pa.alignment;H=P.fill(H,K,L);aa=this._createLabelContainer(aa,
ja,ta,H);S.write(W,X.width,X.height,{xAlign:pa.x,yAlign:pa.y},aa.node());return this._isVertical?Y.width<R.width:Y.height<R.height};M.prototype._shouldShowLabelOnBar=function(H,K,L){if(this._labelsPosition===c.LabelsPosition.outside)return!1;H=this._isVertical?H.y:H.x;var P=this._isVertical?K.height:K.width;K=this._isVertical?this.height():this.width();L=this._isVertical?L.height:L.width;var S=H+P;S>K?P=K-H:0>H&&(P=S);return L+M._LABEL_MARGIN_INSIDE_BAR<=P};M.prototype._calculateLabelProperties=function(H,
K,L,P,S){function aa(Aa){switch(Aa){case "topLeft":ja=R._isVertical?"top":"left";ta+=M._LABEL_MARGIN_INSIDE_BAR;da+=M._LABEL_MARGIN_INSIDE_BAR;break;case "center":da+=(W+X)/2;break;case "bottomRight":ja=R._isVertical?"bottom":"right",ta-=M._LABEL_MARGIN_INSIDE_BAR,da+=pa-M._LABEL_MARGIN_INSIDE_BAR-X}}var R=this,Y=this._isVertical?H.y:H.x,W=this._isVertical?K.height:K.width,X=this._isVertical?L.height:L.width,ja="center",pa=W,ta=Y,da=Y;if(P)switch(this._labelsPosition){case c.LabelsPosition.start:S?
aa("bottomRight"):aa("topLeft");break;case c.LabelsPosition.middle:aa("center");break;case c.LabelsPosition.end:S?aa("topLeft"):aa("bottomRight")}else S?(ja=this._isVertical?"top":"left",pa=W+M._LABEL_MARGIN_INSIDE_BAR+X,ta-=M._LABEL_MARGIN_INSIDE_BAR+X,da-=M._LABEL_MARGIN_INSIDE_BAR+X):(ja=this._isVertical?"bottom":"right",pa=W+M._LABEL_MARGIN_INSIDE_BAR+X,da+=W+M._LABEL_MARGIN_INSIDE_BAR);return{containerDimensions:{width:this._isVertical?K.width:pa,height:this._isVertical?pa:K.height},labelContainerOrigin:{x:this._isVertical?
H.x:ta,y:this._isVertical?ta:H.y},labelOrigin:{x:this._isVertical?H.x+K.width/2-L.width/2:da,y:this._isVertical?da:H.y+K.height/2-L.height/2},alignment:{x:this._isVertical?"center":ja,y:this._isVertical?ja:"center"}}};M.prototype._createLabelContainer=function(H,K,L,P){H=H.append("g").attr("transform","translate("+K.x+", "+K.y+")");L?(H.classed("on-bar-label",!0),L=1.6*A.Color.contrast("white",P)<A.Color.contrast("black",P),H.classed(L?"dark-label":"light-label",!0)):H.classed("off-bar-label",!0);
return H};M.prototype._generateDrawSteps=function(){var H=[];if(this._animateOnNextRender()){var K=this._getAttrToProjector(),L=this.length().scale.scale(this.baselineValue()),P=this._isVertical?"height":"width";K[this._isVertical?"y":"x"]=function(){return L};K[P]=function(){return 0};H.push({attrToProjector:K,animator:this._getAnimator(E.Animator.RESET)})}H.push({attrToProjector:this._getAttrToProjector(),animator:this._getAnimator(E.Animator.MAIN)});return H};M.prototype._generateAttrToProjector=
function(){function H(pa,ta,da){return Math.abs(P-Y(pa,ta,da))}var K=this,L=J.prototype._generateAttrToProjector.call(this),P=this.length().scale.scale(this.baselineValue()),S=this._isVertical?"y":"x",aa=this._isVertical?"x":"y",R=C.Plot._scaledAccessor(this.position()),Y=C.Plot._scaledAccessor(this.length()),W=L[M._BAR_THICKNESS_KEY],X=L.gap,ja=null==X?W:function(pa,ta,da){return W(pa,ta,da)-X(pa,ta,da)};L.width=this._isVertical?ja:H;L.height=this._isVertical?H:ja;L[S]=function(pa,ta,da){pa=Y(pa,
ta,da);return pa>P?P:pa};L[aa]=function(pa,ta,da){return K._getPositionAttr(R(pa,ta,da),W(pa,ta,da))};return L};M.prototype._updateThicknessAttr=function(){var H=this,K=this.position(),L=this.barEnd();null!=K&&null!=L?(this._fixedBarPixelThickness=!1,this.attr(M._BAR_THICKNESS_KEY,function(P,S,aa){var R=K.accessor(P,S,aa);P=L.accessor(P,S,aa);R=K.scale?K.scale.scale(R):R;P=L.scale?L.scale.scale(P):P;return Math.abs(P-R)})):(this._fixedBarPixelThickness=!0,this.attr(M._BAR_THICKNESS_KEY,function(){return H._barPixelThickness()}))};
M.prototype._barPixelThickness=function(){return this._fixedBarPixelThickness?this._projectorsReady()?this._computeBarPixelThickness(this.position(),this.datasets(),this._isVertical?this.width():this.height()):0:0};M.prototype.entities=function(H){void 0===H&&(H=this.datasets());return this._projectorsReady()?J.prototype.entities.call(this,H):[]};M.prototype._entityBounds=function(H){return this._pixelBounds(H.datum,H.index,H.dataset)};M.prototype._pixelBounds=function(H,K,L){var P=this._getAttrToProjector();
return{x:P.x(H,K,L),y:P.y(H,K,L),width:P.width(H,K,L),height:P.height(H,K,L)}};M.prototype._pixelPoint=function(H,K,L){var P=this._pixelBounds(H,K,L);H=(this._isVertical?C.Plot._scaledAccessor(this.y()):C.Plot._scaledAccessor(this.x()))(H,K,L);K=(this._isVertical?this.y().scale:this.x().scale).scale(this.baselineValue());return this._pixelPointBar(H,K,P)};M.prototype._pixelPointBar=function(H,K,L){if(this._isVertical){var P=L.x+L.width/2;H=H<=K?L.y:L.y+L.height}else P=H>=K?L.x+L.width:L.x,H=L.y+L.height/
2;return{x:P,y:H}};M.prototype._uninstallScaleForKey=function(H,K){J.prototype._uninstallScaleForKey.call(this,H,K)};M.prototype._getDataToDraw=function(){var H=this,K=new A.Map,L=this._getAttrToProjector(),P=this.width(),S=this.height();this.datasets().forEach(function(aa){var R=aa.data().map(function(Y,W){return H._isDatumOnScreen(L,P,S,Y,W,aa)?Y:null});K.set(aa,R)});return K};M.prototype._isDatumOnScreen=function(H,K,L,P,S,aa){var R=H.x(P,S,aa),Y=H.y(P,S,aa),W=H.width(P,S,aa);H=H.height(P,S,aa);
return A.Math.isValidNumber(R)&&A.Math.isValidNumber(Y)&&A.Math.isValidNumber(W)&&A.Math.isValidNumber(H)?A.Math.boundsIntersects(R,Y,W,H,K,L):!1};return M}(e.XYPlot);D._BAR_THICKNESS_RATIO=.95;D._SINGLE_BAR_DIMENSION_RATIO=.4;D._BAR_AREA_CLASS="bar-area";D._BAR_END_KEY="barEnd";D._BAR_THICKNESS_KEY="width";D._LABEL_AREA_CLASS="bar-label-text-area";D._LABEL_MARGIN_INSIDE_BAR=10;c.Bar=D},function(b,c,e){var f=this&&this.__extends||function(v,u){function w(){this.constructor=v}for(var z in u)u.hasOwnProperty(z)&&
(v[z]=u[z]);v.prototype=null===u?Object.create(u):(w.prototype=u.prototype,new w)},g=e(1),h=e(5),l=e(8),n=e(3),m=e(0);b=e(10);var q=e(22);c.TimeInterval=b.makeEnum("second minute hour day week month year".split(" "));c.TimeAxisOrientation=b.makeEnum(["top","bottom"]);c.TierLabelPosition=b.makeEnum(["between","center"]);e=function(v){function u(w,z){w=v.call(this,w,z)||this;w._maxTimeIntervalPrecision=null;w._tierLabelPositions=[];w.addClass("time-axis");w.tickLabelPadding(5);w.axisConfigurations(u._DEFAULT_TIME_AXIS_CONFIGURATIONS);
w.annotationFormatter(l.time("%a %b %d, %Y"));return w}f(u,v);u.prototype.tierLabelPositions=function(w){if(null==w)return this._tierLabelPositions;if(!w.every(function(z){return"between"===z.toLowerCase()||"center"===z.toLowerCase()}))throw Error("Unsupported position for tier labels");this._tierLabelPositions=w;this.redraw();return this};u.prototype.maxTimeIntervalPrecision=function(w){if(null==w)return this._maxTimeIntervalPrecision;this._maxTimeIntervalPrecision=w;this.redraw();return this};u.prototype.currentAxisConfiguration=
function(){return this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex]};u.prototype.axisConfigurations=function(w){if(null!=w){this._possibleTimeAxisConfigurations=w;this._numTiers=m.Math.max(this._possibleTimeAxisConfigurations.map(function(E){return E.length}),0);this._isAnchored&&this._setupDomElements();w=this.tierLabelPositions();for(var z=[],A=0;A<this._numTiers;A++)z.push(w[A]||"between");this.tierLabelPositions(z);this.redraw()}};u.prototype._getMostPreciseConfigurationIndex=
function(){var w=this,z=this._possibleTimeAxisConfigurations.length;this._possibleTimeAxisConfigurations.forEach(function(A,E){E<z&&A.every(function(C){return w._checkTimeAxisTierConfiguration(C)})&&(z=E)});z===this._possibleTimeAxisConfigurations.length&&(m.Window.warn("zoomed out too far: could not find suitable interval to display labels"),--z);return z};u.prototype.orientation=function(w){if(w&&("right"===w.toLowerCase()||"left"===w.toLowerCase()))throw Error(w+" is not a supported orientation for TimeAxis - only horizontal orientations are supported");
return v.prototype.orientation.call(this,w)};u.prototype._computeHeight=function(){var w=this._measurer.measure().height;this._tierHeights=[];for(var z=0;z<this._numTiers;z++)this._tierHeights.push(w+this.tickLabelPadding()+("between"===this._tierLabelPositions[z]?0:this._maxLabelTickLength()));return g.sum(this._tierHeights)};u.prototype._getIntervalLength=function(w){var z=this._scale.domain()[0];w=n.Time.timeIntervalToD3Time(w.interval).offset(z,w.step);return w>this._scale.domain()[1]?this.width():
Math.abs(this._scale.scale(w)-this._scale.scale(z))};u.prototype._maxWidthForInterval=function(w){return this._measurer.measure(w.formatter(u._LONG_DATE)).width};u.prototype._checkTimeAxisTierConfiguration=function(w){if(null!=this._maxTimeIntervalPrecision){var z=u._SORTED_TIME_INTERVAL_INDEX[this._maxTimeIntervalPrecision],A=u._SORTED_TIME_INTERVAL_INDEX[w.interval];if(null!=z&&null!=A&&A<z)return!1}z=this._maxWidthForInterval(w)+2*this.tickLabelPadding();return Math.min(this._getIntervalLength(w),
this.width())>=z};u.prototype._sizeFromOffer=function(w,z){var A=v.prototype._sizeFromOffer.call(this,w,z);w=this._tierHeights.reduce(function(E,C){return E+C>A.height?E:E+C});z=this.margin()+(this.annotationsEnabled()?this.annotationTierCount()*this._annotationTierHeight():0);A.height=Math.min(A.height,w+z);return A};u.prototype._setup=function(){v.prototype._setup.call(this);this._setupDomElements()};u.prototype._setupDomElements=function(){this.content().selectAll("."+u.TIME_AXIS_TIER_CLASS).remove();
this._tierLabelContainers=[];this._tierMarkContainers=[];this._tierBaselines=[];this._tickLabelContainer.remove();this._baseline.remove();for(var w=0;w<this._numTiers;++w){var z=this.content().append("g").classed(u.TIME_AXIS_TIER_CLASS,!0);this._tierLabelContainers.push(z.append("g").classed(q.Axis.TICK_LABEL_CLASS+"-container",!0));this._tierMarkContainers.push(z.append("g").classed(q.Axis.TICK_MARK_CLASS+"-container",!0));this._tierBaselines.push(z.append("line").classed("baseline",!0))}w=new h.SvgContext(this._tierLabelContainers[0].node());
this._measurer=new h.CacheMeasurer(w)};u.prototype._getTickIntervalValues=function(w){return this._scale.tickInterval(w.interval,w.step)};u.prototype._getTickValues=function(){var w=this;return this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex].reduce(function(z,A){return z.concat(w._getTickIntervalValues(A))},[])};u.prototype._cleanTiers=function(){for(var w=0;w<this._tierLabelContainers.length;w++)this._tierLabelContainers[w].selectAll("."+q.Axis.TICK_LABEL_CLASS).remove(),this._tierMarkContainers[w].selectAll("."+
q.Axis.TICK_MARK_CLASS).remove(),this._tierBaselines[w].style("visibility","hidden")};u.prototype._getTickValuesForConfiguration=function(w){w=this._scale.tickInterval(w.interval,w.step);var z=this._scale.domain(),A=w.map(function(E){return E.valueOf()});-1===A.indexOf(z[0].valueOf())&&w.unshift(z[0]);-1===A.indexOf(z[1].valueOf())&&w.push(z[1]);return w};u.prototype._renderTierLabels=function(w,z,A){var E=this,C=this._getTickValuesForConfiguration(z),D=[];"between"===this._tierLabelPositions[A]&&
1===z.step?C.map(function(L,P){P+1>=C.length||D.push(new Date((C[P+1].valueOf()-C[P].valueOf())/2+C[P].valueOf()))}):D=C;w=w.selectAll("."+q.Axis.TICK_LABEL_CLASS).data(D,function(L){return String(L.valueOf())});var J=w.enter().append("g").classed(q.Axis.TICK_LABEL_CLASS,!0);J.append("text");var M="center"===this._tierLabelPositions[A]||1===z.step?0:this.tickLabelPadding();var H="bottom"===this.orientation()?g.sum(this._tierHeights.slice(0,A+1))-this.tickLabelPadding():"center"===this._tierLabelPositions[A]?
this.height()-g.sum(this._tierHeights.slice(0,A))-this.tickLabelPadding()-this._maxLabelTickLength():this.height()-g.sum(this._tierHeights.slice(0,A))-this.tickLabelPadding();J=w.merge(J);var K=J.selectAll("text");0<K.size()&&K.attr("transform","translate("+M+","+H+")");w.exit().remove();J.attr("transform",function(L){return"translate("+E._scale.scale(L)+",0)"});A="center"===this._tierLabelPositions[A]||1===z.step?"middle":"start";J.selectAll("text").text(z.formatter).style("text-anchor",A)};u.prototype._renderTickMarks=
function(w,z){w=this._tierMarkContainers[z].selectAll("."+q.Axis.TICK_MARK_CLASS).data(w);var A=w.enter().append("line").classed(q.Axis.TICK_MARK_CLASS,!0).merge(w),E=this._generateTickMarkAttrHash(),C=this._tierHeights.slice(0,z).reduce(function(D,J){return D+J},0);"bottom"===this.orientation()?(E.y1=C,E.y2=C+("center"===this._tierLabelPositions[z]?this.innerTickLength():this._tierHeights[z])):(E.y1=this.height()-C,E.y2=this.height()-(C+("center"===this._tierLabelPositions[z]?this.innerTickLength():
this._tierHeights[z])));A.attrs(E);"bottom"===this.orientation()?(E.y1=C,E.y2=C+("center"===this._tierLabelPositions[z]?this.endTickLength():this._tierHeights[z])):(E.y1=this.height()-C,E.y2=this.height()-(C+("center"===this._tierLabelPositions[z]?this.endTickLength():this._tierHeights[z])));g.select(A.nodes()[0]).attrs(E);g.select(A.nodes()[A.size()-1]).attrs(E);g.select(A.nodes()[0]).classed(q.Axis.END_TICK_MARK_CLASS,!0);g.select(A.nodes()[A.size()-1]).classed(q.Axis.END_TICK_MARK_CLASS,!0);w.exit().remove()};
u.prototype._renderLabellessTickMarks=function(w){w=this._tickMarkContainer.selectAll("."+q.Axis.TICK_MARK_CLASS).data(w);var z=w.enter().append("line").classed(q.Axis.TICK_MARK_CLASS,!0).merge(w),A=this._generateTickMarkAttrHash();A.y2="bottom"===this.orientation()?this.tickLabelPadding():this.height()-this.tickLabelPadding();z.attrs(A);w.exit().remove()};u.prototype._generateLabellessTicks=function(){return 1>this._mostPreciseConfigIndex?[]:this._getTickIntervalValues(this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex-
1][0])};u.prototype.renderImmediately=function(){var w=this;this._mostPreciseConfigIndex=this._getMostPreciseConfigurationIndex();var z=this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex];this._cleanTiers();z.forEach(function(J,M){return w._renderTierLabels(w._tierLabelContainers[M],J,M)});for(var A=z.map(function(J){return w._getTickValuesForConfiguration(J)}),E=0,C=0;C<Math.max(z.length,1);++C){var D=this._generateBaselineAttrHash();D.y1+="bottom"===this.orientation()?E:-E;D.y2=D.y1;
this._tierBaselines[C].attrs(D).style("visibility","inherit");E+=this._tierHeights[C]}E=[];C=this._scale.domain();C=this._scale.scale(C[1])-this._scale.scale(C[0]);1.5*this._getIntervalLength(z[0])>=C&&(E=this._generateLabellessTicks());this._renderLabellessTickMarks(E);this._hideOverflowingTiers();for(C=0;C<z.length;++C)this._renderTickMarks(A[C],C),this._hideOverlappingAndCutOffLabels(C);this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations();return this};u.prototype._hideOverflowingTiers=
function(){var w=this,z=this.height(),A=0;this.content().selectAll("."+u.TIME_AXIS_TIER_CLASS).attr("visibility",function(E,C){A+=w._tierHeights[C];return A<=z?"inherit":"hidden"})};u.prototype._hideOverlappingAndCutOffLabels=function(w){var z=this,A=this.element().node().getBoundingClientRect(),E=this._tierMarkContainers[w].selectAll("."+q.Axis.TICK_MARK_CLASS).filter(function(){var D=g.select(this).style("visibility");return"visible"===D||"inherit"===D}).nodes().map(function(D){return D.getBoundingClientRect()}),
C;this._tierLabelContainers[w].selectAll("."+q.Axis.TICK_LABEL_CLASS).filter(function(){var D=g.select(this).style("visibility");return"visible"===D||"inherit"===D}).each(function(D,J){D=this.getBoundingClientRect();var M=g.select(this),H=E[J],K=E[J+1];J=null!=C&&m.DOM.clientRectsOverlap(D,C);H=null!=H&&m.DOM.clientRectsOverlap(D,H);K=null!=K&&m.DOM.clientRectsOverlap(D,K);!(Math.floor(A.left)<=Math.ceil(D.left)&&Math.floor(A.top)<=Math.ceil(D.top)&&Math.floor(D.right)<=Math.ceil(A.left+z.width())&&
Math.floor(D.bottom)<=Math.ceil(A.top+z.height()))||J||H||K?M.style("visibility","hidden"):(C=D,M.style("visibility","inherit"))})};u.prototype.invalidateCache=function(){v.prototype.invalidateCache.call(this);this._measurer.reset()};return u}(q.Axis);e.TIME_AXIS_TIER_CLASS="time-axis-tier";e._SORTED_TIME_INTERVAL_INDEX=(r={},r[c.TimeInterval.second]=0,r[c.TimeInterval.minute]=1,r[c.TimeInterval.hour]=2,r[c.TimeInterval.day]=3,r[c.TimeInterval.week]=4,r[c.TimeInterval.month]=5,r[c.TimeInterval.year]=
6,r);e._DEFAULT_TIME_AXIS_CONFIGURATIONS=[[{interval:c.TimeInterval.second,step:1,formatter:l.time("%I:%M:%S %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.second,step:5,formatter:l.time("%I:%M:%S %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.second,step:10,formatter:l.time("%I:%M:%S %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.second,step:15,
formatter:l.time("%I:%M:%S %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.second,step:30,formatter:l.time("%I:%M:%S %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.minute,step:1,formatter:l.time("%I:%M %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.minute,step:5,formatter:l.time("%I:%M %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],
[{interval:c.TimeInterval.minute,step:10,formatter:l.time("%I:%M %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.minute,step:15,formatter:l.time("%I:%M %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.minute,step:30,formatter:l.time("%I:%M %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.hour,step:1,formatter:l.time("%I %p")},{interval:c.TimeInterval.day,
step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.hour,step:3,formatter:l.time("%I %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.hour,step:6,formatter:l.time("%I %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.hour,step:12,formatter:l.time("%I %p")},{interval:c.TimeInterval.day,step:1,formatter:l.time("%B %e, %Y")}],[{interval:c.TimeInterval.day,step:1,formatter:l.time("%a %e")},
{interval:c.TimeInterval.month,step:1,formatter:l.time("%B %Y")}],[{interval:c.TimeInterval.day,step:1,formatter:l.time("%e")},{interval:c.TimeInterval.month,step:1,formatter:l.time("%B %Y")}],[{interval:c.TimeInterval.month,step:1,formatter:l.time("%B")},{interval:c.TimeInterval.year,step:1,formatter:l.time("%Y")}],[{interval:c.TimeInterval.month,step:1,formatter:l.time("%b")},{interval:c.TimeInterval.year,step:1,formatter:l.time("%Y")}],[{interval:c.TimeInterval.month,step:3,formatter:l.time("%b")},
{interval:c.TimeInterval.year,step:1,formatter:l.time("%Y")}],[{interval:c.TimeInterval.month,step:6,formatter:l.time("%b")},{interval:c.TimeInterval.year,step:1,formatter:l.time("%Y")}],[{interval:c.TimeInterval.year,step:1,formatter:l.time("%Y")}],[{interval:c.TimeInterval.year,step:1,formatter:l.time("%y")}],[{interval:c.TimeInterval.year,step:5,formatter:l.time("%Y")}],[{interval:c.TimeInterval.year,step:25,formatter:l.time("%Y")}],[{interval:c.TimeInterval.year,step:50,formatter:l.time("%Y")}],
[{interval:c.TimeInterval.year,step:100,formatter:l.time("%Y")}],[{interval:c.TimeInterval.year,step:200,formatter:l.time("%Y")}],[{interval:c.TimeInterval.year,step:500,formatter:l.time("%Y")}],[{interval:c.TimeInterval.year,step:1E3,formatter:l.time("%Y")}]];e._LONG_DATE=new Date(9999,8,29,12,59,9999);c.Time=e;var r},function(b,c,e){var f=this&&this.__extends||function(h,l){function n(){this.constructor=h}for(var m in l)l.hasOwnProperty(m)&&(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=
l.prototype,new n)},g=e(12);b=function(h){function l(){var n=h.call(this)||this;n._detachCallback=function(m){return n.remove(m)};return n}f(l,h);l.prototype.anchor=function(n){var m=this;n=g.coerceExternalD3(n);h.prototype.anchor.call(this,n);this._forEach(function(q){return q.anchor(m.element())});return this};l.prototype.render=function(){this._forEach(function(n){return n.render()});return this};l.prototype.has=function(){throw Error("has() is not implemented on ComponentContainer");};l.prototype._adoptAndAnchor=
function(n){n.parent(this);n.onDetach(this._detachCallback);this._isAnchored&&n.anchor(this.element())};l.prototype.remove=function(n){this.has(n)&&(n.offDetach(this._detachCallback),this._remove(n),n.detach(),this.redraw());return this};l.prototype._remove=function(){};l.prototype._forEach=function(){throw Error("_forEach() is not implemented on ComponentContainer");};l.prototype.destroy=function(){h.prototype.destroy.call(this);this._forEach(function(n){return n.destroy()})};l.prototype.invalidateCache=
function(){this._forEach(function(n){return n.invalidateCache()})};return l}(e(4).Component);c.ComponentContainer=b},function(b,c,e){function f(v){n.add(v);l.add(v);m||(m=!0,r.render())}var g=e(0);b=e(10);var h=e(39),l=new g.Set,n=new g.Set,m=!1,q=!1;c.Policy=b.makeEnum(["immediate","animationFrame","timeout"]);var r=new h.AnimationFrame;c.renderPolicy=function(){var v=Plottable.RenderController.Policy.immediate;if(null!=v)switch(v){case c.Policy.immediate:r=new h.Immediate;break;case c.Policy.animationFrame:r=
new h.AnimationFrame;break;case c.Policy.timeout:r=new h.Timeout;break;default:g.Window.warn("Unrecognized renderPolicy: "+v)}};c.registerToRender=function(v){q&&g.Window.warn("Registered to render while other components are flushing: request may be ignored");l.add(v);m||(m=!0,r.render())};c.registerToComputeLayoutAndRender=f;c.registerToComputeLayout=function(v){f(v)};c.flush=function(){if(m){n.forEach(function(u){return u.computeLayout()});l.forEach(function(u){return u.render()});q=!0;var v=new g.Set;
l.forEach(function(u){try{u.renderImmediately()}catch(w){window.setTimeout(function(){throw w;},0),v.add(u)}});n=new g.Set;l=v;q=m=!1}}},function(b,c,e){var f=e(1);c.circle=function(){return function(h){return f.symbol().type(f.symbolCircle).size(Math.PI*Math.pow(h/2,2))}};c.square=function(){return function(h){return f.symbol().type(f.symbolSquare).size(Math.pow(h,2))}};c.cross=function(){return function(h){return f.symbol().type(f.symbolCross).size(5/9*Math.pow(h,2))}};c.diamond=function(){return function(h){return f.symbol().type(f.symbolDiamond).size(Math.tan(Math.PI/
6)*Math.pow(h,2)/2)}};c.triangle=function(){return function(h){return f.symbol().type(f.symbolTriangle).size(Math.sqrt(3)*Math.pow(h/2,2))}};c.star=function(){return function(h){return f.symbol().type(f.symbolStar).size(.8908130915292852*Math.pow(h/2,2))}};var g=3*(1/Math.sqrt(12)/2+1);c.wye=function(){return function(h){return f.symbol().type(f.symbolWye).size(g*Math.pow(h/2.4,2))}}},function(b,c,e){var f=this&&this.__extends||function(m,q){function r(){this.constructor=m}for(var v in q)q.hasOwnProperty(v)&&
(m[v]=q[v]);m.prototype=null===q?Object.create(q):(r.prototype=q.prototype,new r)},g=e(25),h=e(0),l=e(12),n=e(37);b=function(m){function q(){var r=m.call(this)||this;r._detectionRadius=3;r._resizable=!1;r._movable=!1;r._hasCorners=!0;r.addClass("drag-box-layer");r._dragInteraction=new g.Drag;r._setUpCallbacks();r._dragInteraction.attachTo(r);r._dragStartCallbacks=new h.CallbackSet;r._dragCallbacks=new h.CallbackSet;r._dragEndCallbacks=new h.CallbackSet;return r}f(q,m);q.prototype._setUpCallbacks=
function(){function r(J,M){0===D&&J.x===M.x&&J.y===M.y&&w.boxVisible(!1);w._dragEndCallbacks.callCallbacks(w.bounds())}function v(J,M){switch(D){case 0:E.x=M.x;E.y=M.y;break;case 1:z.bottom?E.y=M.y:z.top&&(A.y=M.y);z.right?E.x=M.x:z.left&&(A.x=M.x);break;case 2:J=M.x-C.x;var H=M.y-C.y;A.x+=J;A.y+=H;E.x+=J;E.y+=H;C=M}w._setBounds({topLeft:A,bottomRight:E});w._xBoundsMode===n.PropertyMode.VALUE&&null!=w.xScale()&&w._setXExtent([w.xScale().invert(A.x),w.xScale().invert(E.x)]);w._yBoundsMode===n.PropertyMode.VALUE&&
null!=w.yScale()&&w._setYExtent([w.yScale().invert(A.y),w.yScale().invert(E.y)]);w.render();w._dragCallbacks.callCallbacks(w.bounds())}function u(J){z=w._getResizingEdges(J);var M=w.bounds();M=M.topLeft.x<=J.x&&J.x<=M.bottomRight.x&&M.topLeft.y<=J.y&&J.y<=M.bottomRight.y;w.boxVisible()&&(z.top||z.bottom||z.left||z.right)?D=1:w.boxVisible()&&w.movable()&&M?D=2:(D=0,w._setBounds({topLeft:J,bottomRight:J}),w._xBoundsMode===n.PropertyMode.VALUE&&null!=w.xScale()&&w._setXExtent([w.xScale().invert(J.x),
w.xScale().invert(J.x)]),w._yBoundsMode===n.PropertyMode.VALUE&&null!=w.yScale()&&w._setYExtent([w.yScale().invert(J.y),w.yScale().invert(J.y)]),w.render());w.boxVisible(!0);M=w.bounds();A={x:M.topLeft.x,y:M.topLeft.y};E={x:M.bottomRight.x,y:M.bottomRight.y};C=J;w._dragStartCallbacks.callCallbacks(M)}var w=this,z,A,E,C,D=0;this._dragInteraction.onDragStart(u);this._dragInteraction.onDrag(v);this._dragInteraction.onDragEnd(r);this._disconnectInteraction=function(){w._dragInteraction.offDragStart(u);
w._dragInteraction.offDrag(v);w._dragInteraction.offDragEnd(r);w._dragInteraction.detach()}};q.prototype._setup=function(){function r(){return v._box.append("line").styles({opacity:0,stroke:"pink","pointer-events":"visibleStroke"})}var v=this;m.prototype._setup.call(this);this._detectionEdgeT=r().classed("drag-edge-tb",!0);this._detectionEdgeB=r().classed("drag-edge-tb",!0);this._detectionEdgeL=r().classed("drag-edge-lr",!0);this._detectionEdgeR=r().classed("drag-edge-lr",!0);if(this._hasCorners){var u=
function(){return v._box.append("circle").styles({opacity:0,fill:"pink","pointer-events":"visibleFill"})};this._detectionCornerTL=u().classed("drag-corner-tl",!0);this._detectionCornerTR=u().classed("drag-corner-tr",!0);this._detectionCornerBL=u().classed("drag-corner-bl",!0);this._detectionCornerBR=u().classed("drag-corner-br",!0)}};q.prototype._getResizingEdges=function(r){var v={top:!1,bottom:!1,left:!1,right:!1};if(!this.resizable())return v;var u=this.bounds(),w=u.topLeft.y,z=u.bottomRight.y,
A=u.topLeft.x;u=u.bottomRight.x;var E=this._detectionRadius;A-E<=r.x&&r.x<=u+E&&(v.top=w-E<=r.y&&r.y<=w+E,v.bottom=z-E<=r.y&&r.y<=z+E);w-E<=r.y&&r.y<=z+E&&(v.left=A-E<=r.x&&r.x<=A+E,v.right=u-E<=r.x&&r.x<=u+E);return v};q.prototype.renderImmediately=function(){m.prototype.renderImmediately.call(this);if(this.boxVisible()){var r=this.bounds(),v=r.topLeft.y,u=r.bottomRight.y,w=r.topLeft.x;r=r.bottomRight.x;this._detectionEdgeT.attrs({x1:w,y1:v,x2:r,y2:v,"stroke-width":2*this._detectionRadius});this._detectionEdgeB.attrs({x1:w,
y1:u,x2:r,y2:u,"stroke-width":2*this._detectionRadius});this._detectionEdgeL.attrs({x1:w,y1:v,x2:w,y2:u,"stroke-width":2*this._detectionRadius});this._detectionEdgeR.attrs({x1:r,y1:v,x2:r,y2:u,"stroke-width":2*this._detectionRadius});this._hasCorners&&(this._detectionCornerTL.attrs({cx:w,cy:v,r:this._detectionRadius}),this._detectionCornerTR.attrs({cx:r,cy:v,r:this._detectionRadius}),this._detectionCornerBL.attrs({cx:w,cy:u,r:this._detectionRadius}),this._detectionCornerBR.attrs({cx:r,cy:u,r:this._detectionRadius}))}return this};
q.prototype.detectionRadius=function(){return this._detectionRadius};q.prototype.resizable=function(r){if(null==r)return this._resizable;this._resizable=r;this._setResizableClasses(r);return this};q.prototype._setResizableClasses=function(r){r&&this.enabled()?(this.addClass("x-resizable"),this.addClass("y-resizable")):(this.removeClass("x-resizable"),this.removeClass("y-resizable"))};q.prototype.movable=function(){return this._movable};q.prototype._setMovableClass=function(){this.movable()&&this.enabled()?
this.addClass("movable"):this.removeClass("movable")};q.prototype.onDragStart=function(r){this._dragStartCallbacks.add(r)};q.prototype.offDragStart=function(r){this._dragStartCallbacks.delete(r)};q.prototype.onDrag=function(r){this._dragCallbacks.add(r)};q.prototype.offDrag=function(r){this._dragCallbacks.delete(r)};q.prototype.onDragEnd=function(r){this._dragEndCallbacks.add(r)};q.prototype.offDragEnd=function(r){this._dragEndCallbacks.delete(r)};q.prototype.dragInteraction=function(){return this._dragInteraction};
q.prototype.enabled=function(r){if(null==r)return this._dragInteraction.enabled();this._dragInteraction.enabled(r);this._setResizableClasses(this.resizable());this._setMovableClass();return this};q.prototype.destroy=function(){var r=this;m.prototype.destroy.call(this);this._dragStartCallbacks.forEach(function(v){return r._dragCallbacks.delete(v)});this._dragCallbacks.forEach(function(v){return r._dragCallbacks.delete(v)});this._dragEndCallbacks.forEach(function(v){return r._dragEndCallbacks.delete(v)});
this._disconnectInteraction()};q.prototype.detach=function(){this._resetState();this._dragInteraction.detach();m.prototype.detach.call(this);return this};q.prototype.anchor=function(r){r=l.coerceExternalD3(r);this._dragInteraction.attachTo(this);m.prototype.anchor.call(this,r);return this};q.prototype._resetState=function(){this.bounds({topLeft:{x:0,y:0},bottomRight:{x:0,y:0}})};return q}(e(43).SelectionBoxLayer);c.DragBoxLayer=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=
l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(18);b=function(l){function n(){return l.call(this,"path","line")||this}f(n,l);n.prototype._applyDefaultAttributes=function(m){m.style("fill","none")};n.prototype.getVisualPrimitiveAtIndex=function(){return l.prototype.getVisualPrimitiveAtIndex.call(this,0)};return n}(e(9).SVGDrawer);c.LineSVGDrawer=b;var h=["opacity","stroke-opacity","stroke-width","stroke"];c.makeLineCanvasDrawStep=
function(l){return function(n,m,q){q=g.resolveAttributes(q,h,m[0],0);g.renderLine(n,l(),m[0],q)}}},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(18);b=function(l){function n(m){void 0===m&&(m="");var q=l.call(this,"rect","")||this;q._rootClassName=m;q._root.classed(q._rootClassName,!0);return q}f(n,l);return n}(e(9).SVGDrawer);c.RectangleSVGDrawer=
b;var h=["x","y","width","height"];c.RectangleCanvasDrawStep=function(l,n,m){l.save();n.forEach(function(q,r){null!=q&&(q=g.resolveAttributesSubsetWithStyles(m,h,q,r),l.beginPath(),l.rect(q.x,q.y,q.width,q.height),g.renderPathWithStyle(l,q))});l.restore()};b=function(l){function n(m){return l.call(this,m,c.RectangleCanvasDrawStep)||this}f(n,l);return n}(g.CanvasDrawer);c.RectangleCanvasDrawer=b},function(b,c,e){function f(l){h.SHOW_WARNINGS&&console.warn(l)}function g(l,n){for(var m=[],q=2;q<arguments.length;q++)m[q-
2]=arguments[q];return 0===n?(l(m),-1):window.setTimeout(l,n,m)}var h=e(23);c.warn=f;c.setTimeout=g;c.debounce=function(l,n,m){function q(){n.apply(m,v)}var r=null,v=[];return function(){v=Array.prototype.slice.call(arguments);clearTimeout(r);r=g(q,l)}};c.deprecated=function(l,n,m){void 0===m&&(m="");f("Method "+l+" has been deprecated in version "+n+". Please refer to the release notes. "+m)}},function(b,c){b=function(){function e(f){this.ruler=null!=f.createRuler?f.createRuler():f}e.prototype.measure=
function(f){void 0===f&&(f=e.HEIGHT_TEXT);return this.ruler(f)};return e}();b.HEIGHT_TEXT="bdpql";c.AbstractMeasurer=b},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(32));f(e(74));f(e(75));f(e(41));f(e(42));f(e(76));f(e(77));f(e(78));f(e(79));f(e(43));f(e(80));f(e(81));f(e(82))},function(b,c,e){var f=e(0);b=function(){function g(h,l){void 0===h&&(h=[]);void 0===l&&(l={});this._updateId=0;this._data=h;this._metadata=l;this._callbacks=new f.CallbackSet}g.prototype.onUpdate=
function(h){this._callbacks.add(h);return this};g.prototype.offUpdate=function(h){this._callbacks.delete(h);return this};g.prototype.data=function(h){if(null==h)return this._data;this._data=h;this._dispatchUpdate();return this};g.prototype.metadata=function(h){if(null==h)return this._metadata;this._metadata=h;this._dispatchUpdate();return this};g.prototype.updateId=function(){return this._updateId};g.prototype._dispatchUpdate=function(){this._updateId++;this._callbacks.callCallbacks(this)};return g}();
c.Dataset=b},function(b,c,e){var f=e(0),g=e(30);b=function(){function h(){}h.prototype.render=function(){g.flush()};return h}();c.Immediate=b;b=function(){function h(){}h.prototype.render=function(){f.DOM.requestAnimationFramePolyfill(g.flush)};return h}();c.AnimationFrame=b;b=function(){function h(){this._timeoutMsec=f.DOM.SCREEN_REFRESH_RATE_MILLISECONDS}h.prototype.render=function(){setTimeout(g.flush,this._timeoutMsec)};return h}();c.Timeout=b},function(b,c,e){var f=this&&this.__extends||function(l,
n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(13),h=e(0);b=function(l){function n(){var m=null!==l&&l.apply(this,arguments)||this;m._keyPressCallbacks={};m._keyReleaseCallbacks={};m._mouseMoveCallback=function(){return!1};m._downedKeys=new h.Set;m._keyDownCallback=function(q,r){return m._handleKeyDownEvent(q,r)};m._keyUpCallback=function(q){return m._handleKeyUpEvent(q)};return m}f(n,l);
n.prototype._anchor=function(m){l.prototype._anchor.call(this,m);this._positionDispatcher=g.Mouse.getDispatcher(this._componentAttachedTo);this._positionDispatcher.onMouseMove(this._mouseMoveCallback);this._keyDispatcher=g.Key.getDispatcher();this._keyDispatcher.onKeyDown(this._keyDownCallback);this._keyDispatcher.onKeyUp(this._keyUpCallback)};n.prototype._unanchor=function(){l.prototype._unanchor.call(this);this._positionDispatcher.offMouseMove(this._mouseMoveCallback);this._positionDispatcher=null;
this._keyDispatcher.offKeyDown(this._keyDownCallback);this._keyDispatcher.offKeyUp(this._keyUpCallback);this._keyDispatcher=null};n.prototype._handleKeyDownEvent=function(m,q){var r=this._translateToComponentSpace(this._positionDispatcher.lastMousePosition());this._isInsideComponent(r)&&!q.repeat&&(this._keyPressCallbacks[m]&&this._keyPressCallbacks[m].callCallbacks(m),this._downedKeys.add(m))};n.prototype._handleKeyUpEvent=function(m){this._downedKeys.has(m)&&this._keyReleaseCallbacks[m]&&this._keyReleaseCallbacks[m].callCallbacks(m);
this._downedKeys.delete(m)};n.prototype.onKeyPress=function(m,q){this._keyPressCallbacks[m]||(this._keyPressCallbacks[m]=new h.CallbackSet);this._keyPressCallbacks[m].add(q);return this};n.prototype.offKeyPress=function(m,q){this._keyPressCallbacks[m].delete(q);0===this._keyPressCallbacks[m].size&&delete this._keyPressCallbacks[m];return this};n.prototype.onKeyRelease=function(m,q){this._keyReleaseCallbacks[m]||(this._keyReleaseCallbacks[m]=new h.CallbackSet);this._keyReleaseCallbacks[m].add(q);return this};
n.prototype.offKeyRelease=function(m,q){this._keyReleaseCallbacks[m].delete(q);0===this._keyReleaseCallbacks[m].size&&delete this._keyReleaseCallbacks[m];return this};return n}(e(15).Interaction);c.Key=b},function(b,c,e){var f=this&&this.__extends||function(h,l){function n(){this.constructor=h}for(var m in l)l.hasOwnProperty(m)&&(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)},g=e(0);b=function(h){function l(n){void 0===n&&(n=[]);var m=h.call(this)||this;m._components=
[];m.addClass("component-group");n.forEach(function(q){return m.append(q)});return m}f(l,h);l.prototype._forEach=function(n){this.components().forEach(n)};l.prototype.has=function(n){return 0<=this._components.indexOf(n)};l.prototype.requestedSpace=function(n,m){var q=this._components.map(function(r){return r.requestedSpace(n,m)});return{minWidth:g.Math.max(q,function(r){return r.minWidth},0),minHeight:g.Math.max(q,function(r){return r.minHeight},0)}};l.prototype.computeLayout=function(n,m,q){var r=
this;h.prototype.computeLayout.call(this,n,m,q);this._forEach(function(v){v.computeLayout({x:0,y:0},r.width(),r.height())});return this};l.prototype._sizeFromOffer=function(n,m){return{width:n,height:m}};l.prototype.fixedWidth=function(){return this._components.every(function(n){return n.fixedWidth()})};l.prototype.fixedHeight=function(){return this._components.every(function(n){return n.fixedHeight()})};l.prototype.components=function(){return this._components.slice()};l.prototype.append=function(n){null==
n||this.has(n)||(n.detach(),this._components.push(n),this._adoptAndAnchor(n),this.redraw());return this};l.prototype._remove=function(n){n=this._components.indexOf(n);0<=n&&this._components.splice(n,1)};return l}(e(29).ComponentContainer);c.Group=b},function(b,c,e){var f=this&&this.__extends||function(h,l){function n(){this.constructor=h}for(var m in l)l.hasOwnProperty(m)&&(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)};e(0);b=e(4);var g;(function(h){h[h.VALUE=0]=
"VALUE";h[h.PIXEL=1]="PIXEL"})(g||(g={}));b=function(h){function l(n){var m=h.call(this)||this;m._mode=g.VALUE;if(n!==l.ORIENTATION_VERTICAL&&n!==l.ORIENTATION_HORIZONTAL)throw Error(n+" is not a valid orientation for GuideLineLayer");m._orientation=n;m._overflowHidden=!0;m.addClass("guide-line-layer");m._isVertical()?m.addClass("vertical"):m.addClass("horizontal");m._scaleUpdateCallback=function(){m._syncPixelPositionAndValue();m.render()};return m}f(l,h);l.prototype._setup=function(){h.prototype._setup.call(this);
this._guideLine=this.content().append("line").classed("guide-line",!0)};l.prototype._sizeFromOffer=function(n,m){return{width:n,height:m}};l.prototype._isVertical=function(){return this._orientation===l.ORIENTATION_VERTICAL};l.prototype.fixedWidth=function(){return!0};l.prototype.fixedHeight=function(){return!0};l.prototype.computeLayout=function(n,m,q){h.prototype.computeLayout.call(this,n,m,q);null!=this.scale()&&(this._isVertical()?this.scale().range([0,this.width()]):this.scale().range([this.height(),
0]));return this};l.prototype.renderImmediately=function(){h.prototype.renderImmediately.call(this);this._syncPixelPositionAndValue();this._guideLine.attrs({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition()});return this};l.prototype._syncPixelPositionAndValue=function(){null!=this.scale()&&(this._mode===g.VALUE&&null!=this.value()?this._pixelPosition=
this.scale().scale(this.value()):this._mode===g.PIXEL&&null!=this.pixelPosition()&&(this._value=this.scale().invert(this.pixelPosition())))};l.prototype._setPixelPositionWithoutChangingMode=function(n){this._pixelPosition=n;null!=this.scale()&&(this._value=this.scale().invert(this.pixelPosition()));this.render()};l.prototype.scale=function(n){if(null==n)return this._scale;var m=this._scale;null!=m&&m.offUpdate(this._scaleUpdateCallback);this._scale=n;this._scale.onUpdate(this._scaleUpdateCallback);
this._syncPixelPositionAndValue();this.redraw();return this};l.prototype.value=function(n){if(null==n)return this._value;this._value=n;this._mode=g.VALUE;this._syncPixelPositionAndValue();this.render();return this};l.prototype.pixelPosition=function(){return this._pixelPosition};l.prototype.destroy=function(){h.prototype.destroy.call(this);null!=this.scale()&&this.scale().offUpdate(this._scaleUpdateCallback)};return l}(b.Component);b.ORIENTATION_VERTICAL="vertical";b.ORIENTATION_HORIZONTAL="horizontal";
c.GuideLineLayer=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(0);b=e(4);var h;(function(l){l[l.VALUE=0]="VALUE";l[l.PIXEL=1]="PIXEL"})(h=c.PropertyMode||(c.PropertyMode={}));b=function(l){function n(){var m=l.call(this)||this;m._boxVisible=!1;m._boxBounds={topLeft:{x:0,y:0},bottomRight:{x:0,y:0}};m._xBoundsMode=h.PIXEL;m._yBoundsMode=
h.PIXEL;m.addClass("selection-box-layer");m._adjustBoundsCallback=function(){m.render()};m._overflowHidden=!0;m._xExtent=[void 0,void 0];m._yExtent=[void 0,void 0];return m}f(n,l);n.prototype._setup=function(){l.prototype._setup.call(this);this._box=this.content().append("g").classed("selection-box",!0).remove();this._boxArea=this._box.append("rect").classed("selection-area",!0)};n.prototype._sizeFromOffer=function(m,q){return{width:m,height:q}};n.prototype.bounds=function(m){if(null==m)return this._getBounds();
this._setBounds(m);this._yBoundsMode=this._xBoundsMode=h.PIXEL;this.render();return this};n.prototype._setBounds=function(m){this._boxBounds={topLeft:{x:Math.min(m.topLeft.x,m.bottomRight.x),y:Math.min(m.topLeft.y,m.bottomRight.y)},bottomRight:{x:Math.max(m.topLeft.x,m.bottomRight.x),y:Math.max(m.topLeft.y,m.bottomRight.y)}}};n.prototype._getBounds=function(){return{topLeft:{x:this._xBoundsMode===h.PIXEL?this._boxBounds.topLeft.x:null==this._xScale?0:Math.min(this.xScale().scale(this.xExtent()[0]),
this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===h.PIXEL?this._boxBounds.topLeft.y:null==this._yScale?0:Math.min(this.yScale().scale(this.yExtent()[0]),this.yScale().scale(this.yExtent()[1]))},bottomRight:{x:this._xBoundsMode===h.PIXEL?this._boxBounds.bottomRight.x:null==this._xScale?0:Math.max(this.xScale().scale(this.xExtent()[0]),this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===h.PIXEL?this._boxBounds.bottomRight.y:null==this._yScale?0:Math.max(this.yScale().scale(this.yExtent()[0]),
this.yScale().scale(this.yExtent()[1]))}}};n.prototype.renderImmediately=function(){l.prototype.renderImmediately.call(this);if(this._boxVisible){var m=this.bounds(),q=m.topLeft.y,r=m.bottomRight.y,v=m.topLeft.x;m=m.bottomRight.x;if(!(g.Math.isValidNumber(q)&&g.Math.isValidNumber(r)&&g.Math.isValidNumber(v)&&g.Math.isValidNumber(m)))throw Error("bounds have not been properly set");this._boxArea.attrs({x:v,y:q,width:m-v,height:r-q});this.content().node().appendChild(this._box.node())}else this._box.remove();
return this};n.prototype.boxVisible=function(m){if(null==m)return this._boxVisible;this._boxVisible=m;this.render();return this};n.prototype.fixedWidth=function(){return!0};n.prototype.fixedHeight=function(){return!0};n.prototype.xScale=function(m){if(null==m)return this._xScale;null!=this._xScale&&this._xScale.offUpdate(this._adjustBoundsCallback);this._xScale=m;this._xBoundsMode=h.VALUE;this._xScale.onUpdate(this._adjustBoundsCallback);this.render();return this};n.prototype.yScale=function(m){if(null==
m)return this._yScale;null!=this._yScale&&this._yScale.offUpdate(this._adjustBoundsCallback);this._yScale=m;this._yBoundsMode=h.VALUE;this._yScale.onUpdate(this._adjustBoundsCallback);this.render();return this};n.prototype.xExtent=function(){return this._getXExtent()};n.prototype._getXExtent=function(){return this._xBoundsMode===h.VALUE?this._xExtent:null==this._xScale?[void 0,void 0]:[this._xScale.invert(this._boxBounds.topLeft.x),this._xScale.invert(this._boxBounds.bottomRight.x)]};n.prototype._setXExtent=
function(m){this._xExtent=m};n.prototype.yExtent=function(){return this._getYExtent()};n.prototype._getYExtent=function(){return this._yBoundsMode===h.VALUE?this._yExtent:null==this._yScale?[void 0,void 0]:[this._yScale.invert(this._boxBounds.topLeft.y),this._yScale.invert(this._boxBounds.bottomRight.y)]};n.prototype._setYExtent=function(m){this._yExtent=m};n.prototype.destroy=function(){l.prototype.destroy.call(this);null!=this._xScale&&this.xScale().offUpdate(this._adjustBoundsCallback);null!=this._yScale&&
this.yScale().offUpdate(this._adjustBoundsCallback)};return n}(b.Component);c.SelectionBoxLayer=b},function(b,c,e){var f=this&&this.__extends||function(g,h){function l(){this.constructor=g}for(var n in h)h.hasOwnProperty(n)&&(g[n]=h[n]);g.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)};b=function(g){function h(){return g.call(this,"path","arc fill")||this}f(h,g);h.prototype._applyDefaultAttributes=function(l){l.style("stroke","none")};return h}(e(9).SVGDrawer);c.ArcSVGDrawer=
b},function(b,c,e){var f=this&&this.__extends||function(g,h){function l(){this.constructor=g}for(var n in h)h.hasOwnProperty(n)&&(g[n]=h[n]);g.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)};b=function(g){function h(){return g.call(this,"path","arc outline")||this}f(h,g);h.prototype._applyDefaultAttributes=function(l){l.style("fill","none")};return h}(e(9).SVGDrawer);c.ArcOutlineSVGDrawer=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=
l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(18);b=function(l){function n(){return l.call(this,"path","area")||this}f(n,l);n.prototype._applyDefaultAttributes=function(m){m.style("stroke","none")};n.prototype.getVisualPrimitiveAtIndex=function(){return l.prototype.getVisualPrimitiveAtIndex.call(this,0)};return n}(e(9).SVGDrawer);c.AreaSVGDrawer=b;var h=["fill","opacity","fill-opacity"];c.makeAreaCanvasDrawStep=function(l){return function(n,
m,q){q=g.resolveAttributes(q,h,m[0],0);g.renderArea(n,l(),m[0],q)}}},function(b,c,e){var f=this&&this.__extends||function(g,h){function l(){this.constructor=g}for(var n in h)h.hasOwnProperty(n)&&(g[n]=h[n]);g.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)};b=function(g){function h(){return g.call(this,"line","")||this}f(h,g);return h}(e(9).SVGDrawer);c.SegmentSVGDrawer=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&
(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(86),h=e(18);b=function(l){function n(){return l.call(this,"path","symbol")||this}f(n,l);return n}(e(9).SVGDrawer);c.SymbolSVGDrawer=b;c.makeSymbolCanvasDrawStep=function(l,n,m){var q=this;return function(r,v,u){var w=r.canvas,z=w.clientWidth;w=w.clientHeight;for(var A=new g.CanvasBuffer(0,0),E=n(),C=m(),D=null,J=null,M=null,H=0;H<v.length;H++){var K=v[H];if(null!=K){var L=h.resolveAttributesSubsetWithStyles(u,["x",
"y"],K,H),P=C(K,H,l),S=L.x,aa=L.y;if(0<=S+P&&S-P<=z&&0<=aa+P&&aa-P<=w){a:if(S=h.ContextStyleAttrs,null==D)S=!1;else{for(aa=0;aa<S.length;aa++){var R=S[aa];if(D[R]!=L[R]){S=!1;break a}}S=!0}K=E(K,H,q._dataset);S&&M==P&&J==K||(D=h.getStrokeWidth(L),D=P+D+1,(D>A.screenWidth||D>A.screenHeight)&&A.resize(D,D,!0),A.clear(),D=A.ctx,D.beginPath(),K(P).context(D)(null),D.closePath(),h.renderPathWithStyle(D,L),J=K,M=P,D=L);A.blitCenter(r,L.x,L.y)}}}}}},function(b,c,e){function f(C){return C instanceof w?C:
C instanceof Date?l(C.valueOf()):C instanceof u.Scale?g(C):C instanceof v.Dataset?h(C):r(C)?m(C):Array.isArray(C)?n(C):l(C)}function g(C){C={domain:C.domain(),range:C.range(),updateId:C.updateId(),ref:l(C)};return m(C)}function h(C){C={ref:l(C),updateId:C.updateId()};return m(C)}function l(C){return new A(C)}function n(C){return new z(C.map(function(D){return f(D)}))}function m(C){var D={},J;for(J in C)C.hasOwnProperty(J)&&(D[J]=f(C[J]));return new E(D)}var q=this&&this.__extends||function(C,D){function J(){this.constructor=
C}for(var M in D)D.hasOwnProperty(M)&&(C[M]=D[M]);C.prototype=null===D?Object.create(D):(J.prototype=D.prototype,new J)},r=e(128),v=e(38),u=e(17);c.sign=f;c.signScale=g;c.signDataset=h;c.signRef=l;c.signArray=n;c.signObj=m;var w=function(){function C(){}C.prototype.isDifferent=function(D){return D instanceof this.constructor?this.isSignatureDifferent(D):!0};return C}();c.Signature=w;var z=function(C){function D(J){var M=C.call(this)||this;M.array=J;return M}q(D,C);D.prototype.isSignatureDifferent=
function(J){if(J.array.length!==this.array.length)return!0;for(var M=0;M<this.array.length;M++)if(this.array[M].isDifferent(J.array[M]))return!0;return!1};return D}(w);c.ArraySignature=z;var A=function(C){function D(J){var M=C.call(this)||this;M.ref=J;return M}q(D,C);D.prototype.isSignatureDifferent=function(J){return this.ref!==J.ref};return D}(w);c.ReferenceSignature=A;var E=function(C){function D(J){var M=C.call(this)||this;M.obj=J;return M}q(D,C);D.prototype.isSignatureDifferent=function(J){var M=
Object.keys(this.obj),H=Object.keys(J.obj);if(M.length!==H.length)return!0;for(H=0;H<M.length;H++){var K=M[H];if(!J.obj.hasOwnProperty(K)||this.obj[K].isDifferent(J.obj[K]))return!0}return!1};return D}(w);c.ObjectSignature=E},function(b,c,e){var f=this&&this.__extends||function(w,z){function A(){this.constructor=w}for(var E in z)z.hasOwnProperty(E)&&(w[E]=z[E]);w.prototype=null===z?Object.create(z):(A.prototype=z.prototype,new A)},g=e(1),h=e(3),l=e(0),n=e(14),m=e(46),q=e(6),r=e(33),v=e(19);b=e(53);
var u=e(2);e=function(w){function z(){var A=w.call(this)||this;A.addClass("area-plot");A.y0(0);A.attr("fill-opacity",.25);A.attr("fill",(new h.Color).range()[0]);A._lineDrawers=new l.Map;return A}f(z,w);z.prototype.y=function(A,E){if(null==A)return w.prototype.y.call(this);null==E?w.prototype.y.call(this,A):w.prototype.y.call(this,A,E);null!=E&&(A=this.y0().accessor,null!=A&&this._bindProperty(z._Y0_KEY,A,E),this._updateYScale());return this};z.prototype.y0=function(A){if(null==A)return this._propertyBindings.get(z._Y0_KEY);
var E=this.y();this._bindProperty(z._Y0_KEY,A,E&&E.scale);this._updateYScale();this.render();return this};z.prototype._onDatasetUpdate=function(){w.prototype._onDatasetUpdate.call(this);this._updateYScale()};z.prototype._addDataset=function(A){var E=this;this._lineDrawers.set(A,new n.ProxyDrawer(function(){return new r.LineSVGDrawer},function(C){return new n.CanvasDrawer(C,r.makeLineCanvasDrawStep(function(){var D=u.Plot._scaledAccessor(E.x()),J=u.Plot._scaledAccessor(E.y());return E._d3LineFactory(A,
D,J)}))}));w.prototype._addDataset.call(this,A);return this};z.prototype._createNodesForDataset=function(A){w.prototype._createNodesForDataset.call(this,A);A=this._lineDrawers.get(A);"svg"===this.renderer()?A.useSVG(this._renderArea):A.useCanvas(this._canvas);return A};z.prototype._removeDatasetNodes=function(A){w.prototype._removeDatasetNodes.call(this,A);this._lineDrawers.get(A).remove()};z.prototype._additionalPaint=function(){var A=this,E=this._generateLineDrawSteps(),C=this._getDataToDraw();
this.datasets().forEach(function(D){var J=u.Plot.applyDrawSteps(E,D);A._lineDrawers.get(D).draw(C.get(D),J)})};z.prototype._generateLineDrawSteps=function(){var A=[];if(this._animateOnNextRender()){var E=this._generateLineAttrToProjector();E.d=this._constructLineProjector(u.Plot._scaledAccessor(this.x()),this._getResetYFunction());A.push({attrToProjector:E,animator:this._getAnimator(v.Animator.RESET)})}A.push({attrToProjector:this._generateLineAttrToProjector(),animator:this._getAnimator(v.Animator.MAIN)});
return A};z.prototype._generateLineAttrToProjector=function(){var A=this._getAttrToProjector();A.d=this._constructLineProjector(u.Plot._scaledAccessor(this.x()),u.Plot._scaledAccessor(this.y()));return A};z.prototype._createDrawer=function(A){var E=this;return new q.ProxyDrawer(function(){return new m.AreaSVGDrawer},function(C){return new n.CanvasDrawer(C,m.makeAreaCanvasDrawStep(function(){var D=u.Plot._scaledAccessor(E.x()),J=u.Plot._scaledAccessor(E.y()),M=u.Plot._scaledAccessor(E.y0());return E._createAreaGenerator(D,
J,M,E._createDefinedProjector(D,J),A)}))})};z.prototype._generateDrawSteps=function(){var A=[];if(this._animateOnNextRender()){var E=this._getAttrToProjector();E.d=this._constructAreaProjector(u.Plot._scaledAccessor(this.x()),this._getResetYFunction(),u.Plot._scaledAccessor(this.y0()));A.push({attrToProjector:E,animator:this._getAnimator(v.Animator.RESET)})}A.push({attrToProjector:this._getAttrToProjector(),animator:this._getAnimator(v.Animator.MAIN)});return A};z.prototype._updateYScale=function(){var A=
this.getExtentsForProperty("y0");A=l.Array.uniq(l.Array.flatten(A));var E=1===A.length?A[0]:null;A=(A=this.y())&&A.scale;null!=A&&(null!=this._constantBaselineValueProvider&&(A.removePaddingExceptionsProvider(this._constantBaselineValueProvider),this._constantBaselineValueProvider=null),null!=E&&(this._constantBaselineValueProvider=function(){return[E]},A.addPaddingExceptionsProvider(this._constantBaselineValueProvider)))};z.prototype._getResetYFunction=function(){return u.Plot._scaledAccessor(this.y0())};
z.prototype._propertyProjectors=function(){var A=w.prototype._propertyProjectors.call(this);A.d=this._constructAreaProjector(u.Plot._scaledAccessor(this.x()),u.Plot._scaledAccessor(this.y()),u.Plot._scaledAccessor(this.y0()));return A};z.prototype.selections=function(A){var E=this;void 0===A&&(A=this.datasets());if("canvas"===this.renderer())return g.selectAll();var C=w.prototype.selections.call(this,A).nodes();A.map(function(D){return E._lineDrawers.get(D)}).filter(function(D){return null!=D}).forEach(function(D){return C.push.apply(C,
D.getVisualPrimitives())});return g.selectAll(C)};z.prototype._constructAreaProjector=function(A,E,C){var D=this,J=this._createDefinedProjector(u.Plot._scaledAccessor(this.x()),u.Plot._scaledAccessor(this.y()));return function(M,H,K){return D._createAreaGenerator(A,E,C,J,K)(M)}};z.prototype._createDefinedProjector=function(A,E){return function(C,D,J){var M=A(C,D,J);C=E(C,D,J);return l.Math.isValidNumber(M)&&l.Math.isValidNumber(C)}};z.prototype._createAreaGenerator=function(A,E,C,D,J){var M=this._getCurveFactory();
return g.area().x(function(H,K){return A(H,K,J)}).y1(function(H,K){return E(H,K,J)}).y0(function(H,K){return C(H,K,J)}).curve(M).defined(function(H,K){return D(H,K,J)})};return z}(b.Line);e._Y0_KEY="y0";c.Area=e},function(b,c){b=c.Animator||(c.Animator={});b.MAIN="main";b.RESET="reset"},function(b,c){var e=function(){function f(){var g=this;this.translate=this.scale=0;this.cachedDomain=[null,null];this.lastSeenDomain=[null,null];this.updateDomain=function(h){g.lastSeenDomain=h.getTransformationDomain();
var l=h.scaleTransformation(g.cachedDomain[1])-h.scaleTransformation(g.cachedDomain[0]),n=h.scaleTransformation(g.lastSeenDomain[1])-h.scaleTransformation(g.lastSeenDomain[0]);g.scale=l/n||1;g.translate=h.scaleTransformation(g.cachedDomain[0])-h.scaleTransformation(g.lastSeenDomain[0])*g.scale||0}}f.prototype.reset=function(){this.scale=1;this.translate=0;this.cachedDomain=this.lastSeenDomain};f.prototype.setDomain=function(g){this.cachedDomain=g.getTransformationDomain()};return f}();b=function(){function f(g,
h){var l=this;this.renderCallback=g;this.applyTransformCallback=h;this.domainTransformX=new e;this.domainTransformY=new e;this.renderDeferred=function(){l.applyTransform();clearTimeout(l.timeoutToken);l.timeoutToken=setTimeout(function(){l.renderCallback()},f.DEFERRED_RENDERING_DELAY)}}f.prototype.setDomains=function(g,h){g&&this.domainTransformX.setDomain(g);h&&this.domainTransformY.setDomain(h);this.renderDeferred()};f.prototype.updateDomains=function(g,h){g&&this.domainTransformX.updateDomain(g);
h&&this.domainTransformY.updateDomain(h);this.renderDeferred()};f.prototype.resetTransforms=function(){this.domainTransformX.reset();this.domainTransformY.reset();this.applyTransform()};f.prototype.applyTransform=function(){this.applyTransformCallback(this.domainTransformX.translate,this.domainTransformY.translate,this.domainTransformX.scale,this.domainTransformY.scale)};return f}();b.DEFERRED_RENDERING_DELAY=200;c.DeferredRenderer=b},function(b,c,e){var f=this&&this.__extends||function(A,E){function C(){this.constructor=
A}for(var D in E)E.hasOwnProperty(D)&&(A[D]=E[D]);A.prototype=null===E?Object.create(E):(C.prototype=E.prototype,new C)},g=e(1),h=e(7),l=e(14),n=e(6),m=e(33),q=e(3),r=e(11),v=e(0);b=e(10);var u=e(19),w=e(2);e=e(16);var z={linear:g.curveLinear,linearClosed:g.curveLinearClosed,step:g.curveStep,stepBefore:g.curveStepBefore,stepAfter:g.curveStepAfter,basis:g.curveBasis,basisOpen:g.curveBasisOpen,basisClosed:g.curveBasisClosed,bundle:g.curveBundle,cardinal:g.curveCardinal,cardinalOpen:g.curveCardinalOpen,
cardinalClosed:g.curveCardinalClosed,monotone:g.curveMonotoneX};c.CurveName=b.makeEnum("linear linearClosed step stepBefore stepAfter basis basisOpen basisClosed bundle cardinal cardinalOpen cardinalClosed monotone".split(" "));e=function(A){function E(){var C=A.call(this)||this;C._curve="linear";C._autorangeSmooth=!1;C._croppedRenderingEnabled=!0;C._collapseDenseVerticalLinesEnabled=!1;C._downsamplingEnabled=!1;C.addClass("line-plot");var D=new h.Easing;D.stepDuration(w.Plot._ANIMATION_MAX_DURATION);
D.easingMode("expInOut");D.maxTotalDuration(w.Plot._ANIMATION_MAX_DURATION);C.animator(u.Animator.MAIN,D);C.attr("stroke",(new q.Color).range()[0]);C.attr("stroke-width","2px");return C}f(E,A);E.prototype.x=function(C,D,J){if(null==C)return A.prototype.x.call(this);A.prototype.x.call(this,C,D,J);this._setScaleSnapping();return this};E.prototype.y=function(C,D,J){if(null==C)return A.prototype.y.call(this);A.prototype.y.call(this,C,D,J);this._setScaleSnapping();return this};E.prototype.autorangeMode=
function(C){if(null==C)return A.prototype.autorangeMode.call(this);A.prototype.autorangeMode.call(this,C);this._setScaleSnapping();return this};E.prototype.autorangeSmooth=function(){return this._autorangeSmooth};E.prototype._setScaleSnapping=function(){"x"===this.autorangeMode()&&this.x()&&this.x().scale&&this.x().scale instanceof r.QuantitativeScale&&this.x().scale.snappingDomainEnabled(!this.autorangeSmooth());"y"===this.autorangeMode()&&this.y()&&this.y().scale&&this.y().scale instanceof r.QuantitativeScale&&
this.y().scale.snappingDomainEnabled(!this.autorangeSmooth())};E.prototype.curve=function(C){if(null==C)return this._curve;this._curve=C;this.render();return this};E.prototype.downsamplingEnabled=function(){return this._downsamplingEnabled};E.prototype.croppedRenderingEnabled=function(C){if(null==C)return this._croppedRenderingEnabled;this._croppedRenderingEnabled=C;this.render();return this};E.prototype.collapseDenseLinesEnabled=function(C){if(null==C)return this._collapseDenseVerticalLinesEnabled;
this._collapseDenseVerticalLinesEnabled=C;this.render();return this};E.prototype._createDrawer=function(C){var D=this;return new n.ProxyDrawer(function(){return new m.LineSVGDrawer},function(J){return new l.CanvasDrawer(J,m.makeLineCanvasDrawStep(function(){return D._d3LineFactory(C)}))})};E.prototype.getExtentsForProperty=function(C){var D=A.prototype.getExtentsForProperty.call(this,C);if(!this._autorangeSmooth||this.autorangeMode()!==C||"x"!==this.autorangeMode()&&"y"!==this.autorangeMode())return D;
C=this._getEdgeIntersectionPoints();var J="y"===this.autorangeMode()?C.left.concat(C.right).map(function(M){return M.y}):C.top.concat(C.bottom).map(function(M){return M.x});return D.map(function(M){return g.extent(g.merge([M,J]))})};E.prototype._getEdgeIntersectionPoints=function(){var C=this;if(!(this.y().scale instanceof r.QuantitativeScale&&this.x().scale instanceof r.QuantitativeScale))return{left:[],right:[],top:[],bottom:[]};var D=this.y().scale,J=this.x().scale,M={left:[],right:[],top:[],bottom:[]},
H=J.scale(J.domain()[0]),K=J.scale(J.domain()[1]),L=D.scale(D.domain()[0]),P=D.scale(D.domain()[1]);this.datasets().forEach(function(S){for(var aa=S.data(),R,Y,W,X,ja,pa,ta,da=1;da<aa.length;da++)X=pa||J.scale(C.x().accessor(aa[da-1],da-1,S)),ja=ta||D.scale(C.y().accessor(aa[da-1],da-1,S)),pa=J.scale(C.x().accessor(aa[da],da,S)),ta=D.scale(C.y().accessor(aa[da],da,S)),X<H===H<=pa&&(R=H-X,Y=pa-X,W=ta-ja,R=R*W/Y,M.left.push({x:H,y:D.invert(ja+R)})),X<K===K<=pa&&(R=K-X,Y=pa-X,W=ta-ja,R=R*W/Y,M.right.push({x:K,
y:D.invert(ja+R)})),ja<P===P<=ta&&(Y=pa-X,R=P-ja,W=ta-ja,R=R*Y/W,M.top.push({x:J.invert(X+R),y:P})),ja<L===L<=ta&&(Y=pa-X,R=L-ja,W=ta-ja,R=R*Y/W,M.bottom.push({x:J.invert(X+R),y:L}))});return M};E.prototype._getResetYFunction=function(){var C=this.y().scale.domain(),D=Math.max(C[0],C[1]);C=Math.min(C[0],C[1]);D=0>D&&D||0<C&&C||0;var J=this.y().scale.scale(D);return function(){return J}};E.prototype._generateDrawSteps=function(){var C=[];if(this._animateOnNextRender()){var D=this._getAttrToProjector();
D.d=this._constructLineProjector(w.Plot._scaledAccessor(this.x()),this._getResetYFunction());C.push({attrToProjector:D,animator:this._getAnimator(u.Animator.RESET)})}C.push({attrToProjector:this._getAttrToProjector(),animator:this._getAnimator(u.Animator.MAIN)});return C};E.prototype._generateAttrToProjector=function(){var C=A.prototype._generateAttrToProjector.call(this);Object.keys(C).forEach(function(D){if("d"!==D){var J=C[D];C[D]=function(M,H,K){return 0<M.length?J(M[0],H,K):null}}});return C};
E.prototype.entitiesAt=function(C){C=this.entityNearestByXThenY(C);return null!=C?[C]:[]};E.prototype.entityNearestByXThenY=function(C){var D=Infinity,J=Infinity,M,H=this.bounds();this.entities().forEach(function(K){if(v.Math.within(K.position,H)){var L=Math.abs(C.x-K.position.x),P=Math.abs(C.y-K.position.y);if(L<D||L===D&&P<J)M=K,D=L,J=P}});return M};E.prototype._propertyProjectors=function(){var C=A.prototype._propertyProjectors.call(this);C.d=this._constructLineProjector(w.Plot._scaledAccessor(this.x()),
w.Plot._scaledAccessor(this.y()));return C};E.prototype._constructLineProjector=function(C,D){var J=this;return function(M,H,K){return J._d3LineFactory(K,C,D)(M)}};E.prototype._d3LineFactory=function(C,D,J){void 0===D&&(D=w.Plot._scaledAccessor(this.x()));void 0===J&&(J=w.Plot._scaledAccessor(this.y()));return g.line().x(function(M,H){return D(M,H,C)}).y(function(M,H){return J(M,H,C)}).curve(this._getCurveFactory()).defined(function(M,H){var K=D(M,H,C);M=J(M,H,C);return v.Math.isValidNumber(K)&&v.Math.isValidNumber(M)})};
E.prototype._getCurveFactory=function(){var C=this.curve();return"string"===typeof C?(C=z[C],null==C?z.linear:C):C};E.prototype._getDataToDraw=function(){var C=this,D=new v.Map;this.datasets().forEach(function(J){var M=J.data();if(C._croppedRenderingEnabled||C._downsamplingEnabled){var H=M.map(function(K,L){return L});C._croppedRenderingEnabled&&(H=C._filterCroppedRendering(J,H));C._downsamplingEnabled&&(H=C._filterDownsampling(J,H));C._collapseDenseVerticalLinesEnabled&&(H=C._filterDenseLines(J,
H));D.set(J,[H.map(function(K){return M[K]})])}else D.set(J,[M])});return D};E.prototype._filterCroppedRendering=function(C,D){function J(W,X){return v.Math.inRange(W,0,M.width())&&v.Math.inRange(X,0,M.height())}for(var M=this,H=w.Plot._scaledAccessor(this.x()),K=w.Plot._scaledAccessor(this.y()),L=C.data(),P=[],S=0;S<D.length;S++){var aa=H(L[D[S]],D[S],C),R=K(L[D[S]],D[S],C);aa=J(aa,R);if(!aa&&null!=D[S-1]&&null!=L[D[S-1]]){R=H(L[D[S-1]],D[S-1],C);var Y=K(L[D[S-1]],D[S-1],C);aa=aa||J(R,Y)}aa||null==
D[S+1]||null==L[D[S+1]]||(R=H(L[D[S+1]],D[S+1],C),Y=K(L[D[S+1]],D[S+1],C),aa=aa||J(R,Y));aa&&P.push(D[S])}return P};E.prototype._filterDownsampling=function(C,D){function J(ta,da){var Aa=H(M[D[ta]],D[ta],C),Ca=K(M[D[ta]],D[ta],C),oa=H(M[D[ta+1]],D[ta+1],C);ta=K(M[D[ta+1]],D[ta+1],C);return Infinity===da?Math.floor(Aa)===Math.floor(oa):Math.floor(ta)===Math.floor(Ca+(oa-Aa)*da)}if(0===D.length)return[];for(var M=C.data(),H=w.Plot._scaledAccessor(this.x()),K=w.Plot._scaledAccessor(this.y()),L=[D[0]],
P=0;P<D.length-1;){var S=D[P],aa=H(M[D[P]],D[P],C),R=K(M[D[P]],D[P],C),Y=H(M[D[P+1]],D[P+1],C),W=K(M[D[P+1]],D[P+1],C);W=Math.floor(aa)===Math.floor(Y)?Infinity:(W-R)/(Y-aa);Y=D[P];R=Infinity===W?R:aa;aa=Y;for(var X=R,ja=!0;P<D.length-1&&(ja||J(P,W));){P++;ja=!1;var pa=Infinity===W?K(M[D[P]],D[P],C):H(M[D[P]],D[P],C);pa>X&&(X=pa,aa=D[P]);pa<R&&(R=pa,Y=D[P])}W=D[P];Y!==S&&L.push(Y);aa!==Y&&aa!==S&&L.push(aa);W!==S&&W!==Y&&W!==aa&&L.push(W)}return L};E.prototype._filterDenseLines=function(C,D){if(0===
D.length)return[];var J=C.data(),M=w.Plot._scaledAccessor(this.x()),H=w.Plot._scaledAccessor(this.y());return this._bucketByX(C,D,function(K){return M(J[K],K,C)},function(K){return H(J[K],K,C)})};E.prototype._bucketByX=function(C,D,J,M){var H=[];C=C.data();for(var K=null,L=0;L<=D.length;++L){var P=D[L];if(null!=C[P]){var S=Math.floor(J(P)),aa=M(P);null==K?K=new v.Bucket(P,S,aa):K.isInBucket(S)?K.addToBucket(aa,P):(H.push.apply(H,K.getUniqueIndices()),K=new v.Bucket(P,S,aa))}}null!=K&&H.push.apply(H,
K.getUniqueIndices());return H};return E}(e.XYPlot);c.Line=e},function(b,c,e){var f=this&&this.__extends||function(m,q){function r(){this.constructor=m}for(var v in q)q.hasOwnProperty(v)&&(m[v]=q[v]);m.prototype=null===q?Object.create(q):(r.prototype=q.prototype,new r)},g=e(1),h=e(26),l=e(0),n=[0,1];b=function(m){function q(){var r=m.call(this)||this;r._range=[0,1];r._d3Scale=g.scaleBand();r._d3Scale.range(n);r._d3TransformationScale=g.scaleLinear();r._d3TransformationScale.domain(n);r._innerPadding=
q._convertToPlottableInnerPadding();r._outerPadding=q._convertToPlottableOuterPadding();return r}f(q,m);q.prototype.cloneWithoutProviders=function(){var r=(new q).domain(this.domain()).range(this.range()).innerPadding(this.innerPadding()).outerPadding(this.outerPadding());r._d3TransformationScale.domain(this._d3TransformationScale.domain());return r};q.prototype.extentOfValues=function(r){return l.Array.uniq(r)};q.prototype._getExtent=function(){return l.Array.uniq(this._getAllIncludedValues())};
q.prototype.domain=function(r){return m.prototype.domain.call(this,r)};q.prototype.invertRange=function(){var r,v=this;void 0===r&&(r=this.range());var u=this._d3Scale.bandwidth(),w=this.invertedTransformation(r[0]),z=this.invertedTransformation(r[1]);r=this._d3Scale.domain();var A=r.map(function(E){return v._d3Scale(E)+u/2});w=g.bisect(A,w);z=g.bisect(A,z);return r.slice(w,z)};q.prototype.range=function(r){return m.prototype.range.call(this,r)};q._convertToPlottableInnerPadding=function(){return 1/
.7-1};q._convertToPlottableOuterPadding=function(){return.5/.7};q.prototype._setBands=function(){var r=1-1/(1+this.innerPadding()),v=this.outerPadding()/(1+this.innerPadding());this._d3Scale.paddingInner(r);this._d3Scale.paddingOuter(v)};q.prototype.rangeBand=function(){return this._rescaleBand(this._d3Scale.bandwidth())};q.prototype.stepWidth=function(){return this._rescaleBand(this._d3Scale.bandwidth()*(1+this.innerPadding()))};q.prototype.ticks=function(){return this.domain()};q.prototype.innerPadding=
function(r){if(null==r)return this._innerPadding;this._innerPadding=r;this.range(this.range());this._dispatchUpdate();return this};q.prototype.outerPadding=function(r){if(null==r)return this._outerPadding;this._outerPadding=r;this.range(this.range());this._dispatchUpdate();return this};q.prototype.scale=function(r){r=this._d3Scale(r)+this._d3Scale.bandwidth()/2;return this._d3TransformationScale(r)};q.prototype.zoom=function(r,v){var u=this;this._d3TransformationScale.domain(this._d3TransformationScale.range().map(function(w){return u._d3TransformationScale.invert(h.zoomOut(w,
r,v))}));this._dispatchUpdate()};q.prototype.pan=function(r){var v=this;this._d3TransformationScale.domain(this._d3TransformationScale.range().map(function(u){return v._d3TransformationScale.invert(u+r)}));this._dispatchUpdate()};q.prototype.scaleTransformation=function(r){return this._d3TransformationScale(r)};q.prototype.invertedTransformation=function(r){return this._d3TransformationScale.invert(r)};q.prototype.getTransformationExtent=function(){return n};q.prototype.getTransformationDomain=function(){return this._d3TransformationScale.domain()};
q.prototype.setTransformationDomain=function(r){this._d3TransformationScale.domain(r);this._dispatchUpdate()};q.prototype._getDomain=function(){return this._backingScaleDomain()};q.prototype._backingScaleDomain=function(r){if(null==r)return this._d3Scale.domain();this._d3Scale.domain(r);this._setBands();return this};q.prototype._getRange=function(){return this._range};q.prototype._setRange=function(r){this._range=r;this._d3TransformationScale.range(r);this._setBands()};q.prototype._rescaleBand=function(r){return Math.abs(this._d3TransformationScale(r)-
this._d3TransformationScale(0))};return q}(e(17).Scale);c.Category=b},function(b,c,e){function f(z){try{var A=z.node().getBBox()}catch(E){A={x:0,y:0,width:0,height:0}}return A}function g(z){if("number"===typeof z)return{min:z,max:z};if(z instanceof Object&&"min"in z&&"max"in z)return z;throw Error("input '"+z+"' can't be parsed as an Range");}function h(z,A){z=z.getPropertyValue(A);return parseFloat(z)||0}function l(z){if(null==z||"none"===z)return null;z=z.match(u);if(null==z||2>z.length)return null;
z=z[1].split(w).map(function(A){return parseFloat(A)});return 6!=z.length?null:z}var n=e(1),m=Math;c.contains=function(z,A){for(;null!=A&&A!==z;)A=A.parentNode;return A===z};c.elementBBox=f;c.entityBounds=function(z){return z instanceof SVGElement?f(n.select(z)):z instanceof HTMLElement?(z=z.getBoundingClientRect(),{x:z.left,y:z.top,width:z.width,height:z.height}):{x:0,y:0,width:0,height:0}};c.SCREEN_REFRESH_RATE_MILLISECONDS=1E3/60;c.requestAnimationFramePolyfill=function(z){null!=window.requestAnimationFrame?
window.requestAnimationFrame(z):setTimeout(z,c.SCREEN_REFRESH_RATE_MILLISECONDS)};c.elementWidth=function(z){z=z instanceof n.selection?z.node():z;z=window.getComputedStyle(z);return h(z,"width")+h(z,"padding-left")+h(z,"padding-right")+h(z,"border-left-width")+h(z,"border-right-width")};c.elementHeight=function(z){z=z instanceof n.selection?z.node():z;z=window.getComputedStyle(z);return h(z,"height")+h(z,"padding-top")+h(z,"padding-bottom")+h(z,"border-top-width")+h(z,"border-bottom-width")};var q=
/translate\s*\(\s*((?:[-+]?[0-9]*\.?[0-9]+))(?:(?:(?:\s+,?\s*)|(?:,\s*))((?:[-+]?[0-9]*\.?[0-9]+)))?\s*\)/,r=/rotate\s*\(\s*((?:[-+]?[0-9]*\.?[0-9]+))\s*\)/,v=/scale\s*\(\s*((?:[-+]?[0-9]*\.?[0-9]+))(?:(?:(?:\s+,?\s*)|(?:,\s*))((?:[-+]?[0-9]*\.?[0-9]+)))?\s*\)/;c.getTranslateValues=function(z){z=q.exec(z.attr("transform"));if(null!=z){var A=z[2];return[+z[1],+(void 0===A?0:A)]}return[0,0]};c.getRotate=function(z){z=r.exec(z.attr("transform"));return null!=z?+z[1]:0};c.getScaleValues=function(z){var A=
v.exec(z.attr("transform"));return null!=A?(z=A[1],A=A[2],[+z,null==A?+z:+A]):[0,0]};c.clientRectsOverlap=function(z,A){return m.floor(z.right)<=m.ceil(A.left)||m.ceil(z.left)>=m.floor(A.right)||m.floor(z.bottom)<=m.ceil(A.top)||m.ceil(z.top)>=m.floor(A.bottom)?!1:!0};c.expandRect=function(z,A){return{left:z.left-A,top:z.top-A,right:z.right+A,bottom:z.bottom+A,width:z.width+2*A,height:z.height+2*A}};c.clientRectInside=function(z,A){return m.floor(A.left)<=m.ceil(z.left)&&m.floor(A.top)<=m.ceil(z.top)&&
m.floor(z.right)<=m.ceil(A.right)&&m.floor(z.bottom)<=m.ceil(A.bottom)};c.intersectsBBox=function(z,A,E,C){void 0===C&&(C=.5);z=g(z);A=g(A);return E.x+E.width>=z.min-C&&E.x<=z.max+C&&E.y+E.height>=A.min-C&&E.y<=A.max+C};c.getHtmlElementAncestors=function(z){for(var A=[];z&&z instanceof HTMLElement;)A.push(z),z=z.parentElement;return A};c.getElementTransform=function(z){z=window.getComputedStyle(z,null);z=z.getPropertyValue("-webkit-transform")||z.getPropertyValue("-moz-transform")||z.getPropertyValue("-ms-transform")||
z.getPropertyValue("-o-transform")||z.getPropertyValue("transform");return l(z)};var u=/^matrix\(([^)]+)\)$/,w=/[, ]+/},function(b,c,e){function f(r,v){return[r[0]*v[0]+r[2]*v[1],r[1]*v[0]+r[3]*v[1],r[0]*v[2]+r[2]*v[3],r[1]*v[2]+r[3]*v[3],r[0]*v[4]+r[2]*v[5]+r[4],r[1]*v[4]+r[3]*v[5]+r[5]]}function g(r,v){return[r[0],r[1],r[2],r[3],r[0]*v[0]+r[2]*v[1]+r[4],r[1]*v[0]+r[3]*v[1]+r[5]]}function h(r){var v=r[0]*r[3]-r[1]*r[2];if(0===v)throw Error("singular matrix");v=1/v;return[v*r[3],v*-r[1],v*-r[2],v*
r[0],v*(-r[3]*r[4]+r[2]*r[5]),v*(r[1]*r[4]+-r[0]*r[5])]}var l=e(1),n=e(55),m=Math,q=[1,0,0,1,0,0];c.inRange=function(r,v,u){return m.min(v,u)<=r&&r<=m.max(v,u)};c.clamp=function(r,v,u){return m.min(m.max(v,r),u)};c.max=function(r,v,u){var w="function"===typeof v?v:null;v=null==w?v:u;r=null==w?l.max(r):l.max(r,w);return void 0!==r?r:v};c.min=function(r,v,u){var w="function"===typeof v?v:null;v=null==w?v:u;r=null==w?l.min(r):l.min(r,w);return void 0!==r?r:v};c.isNaN=function(r){return r!==r};c.isValidNumber=
function(r){return"number"===typeof r&&1>r-r};c.range=function(r,v,u){void 0===u&&(u=1);if(0===u)throw Error("step cannot be 0");v=m.max(m.ceil((v-r)/u),0);for(var w=[],z=0;z<v;++z)w[z]=r+u*z;return w};c.distanceSquared=function(r,v){return m.pow(v.y-r.y,2)+m.pow(v.x-r.x,2)};c.degreesToRadians=function(r){return r/360*m.PI*2};c.within=function(r,v){return v.topLeft.x<=r.x&&v.bottomRight.x>=r.x&&v.topLeft.y<=r.y&&v.bottomRight.y>=r.y};c.boundsIntersects=function(r,v,u,w,z,A){return r<=0+z&&0<=r+u&&
v<=0+A&&0<=v+w};c.getCumulativeTransform=function(r){r=n.getHtmlElementAncestors(r);for(var v=q,u=null,w=0;w<r.length;w++){var z=r[w],A=n.getElementTransform(z);if(null!=A){var E=z.clientWidth/2,C=z.clientHeight/2;v=g(v,[E,C]);v=f(v,h(A));v=g(v,[-E,-C])}A=z.scrollLeft;E=z.scrollTop;if(null===u||z===u)A-=z.offsetLeft+z.clientLeft,E-=z.offsetTop+z.clientTop,u=z.offsetParent;v=g(v,[A,E])}return v};c.multiplyMatrix=f;c.premultiplyTranslate=function(r,v){return[v[0],v[1],v[2],v[3],v[4]+r[0],v[5]+r[1]]};
c.multiplyTranslate=g;c.invertMatrix=h;c.applyTransform=function(r,v){return{x:r[0]*v.x+r[2]*v.y+r[4],y:r[1]*v.x+r[3]*v.y+r[5]}}},function(b,c,e){var f=new (e(114).SplitStrategyLinear);b=function(){function l(n,m){void 0===n&&(n=5);void 0===m&&(m=f);this.maxNodeChildren=n;this.splitStrategy=m;this.root=new g(!0);this.size=0}l.prototype.getRoot=function(){return this.root};l.prototype.clear=function(){this.root=new g(!0);this.size=0};l.prototype.insert=function(n,m){for(var q=this.root;!q.leaf;)q=
q.subtree(n);n=g.valueNode(n,m);q.insert(n);for(this.size+=1;q.overflow(this.maxNodeChildren);)q=q.split(this.splitStrategy),null==q.parent&&(this.root=q);return n};l.prototype.locate=function(n){return this.query(function(m){return m.contains(n)})};l.prototype.intersect=function(n){return this.query(function(m){return h.isBoundsOverlapBounds(m,n)})};l.prototype.intersectX=function(n){return this.query(function(m){return h.isBoundsOverlapX(m,n)})};l.prototype.intersectY=function(n){return this.query(function(m){return h.isBoundsOverlapY(m,
n)})};l.prototype.query=function(n){var m=[];if(null!=this.root.bounds&&!n(this.root.bounds))return m;for(var q=[this.root];0<q.length;)for(var r=q.shift(),v=0;v<r.entries.length;v++){var u=r.entries[v];n(u.bounds)&&(r.leaf?m.push(u.value):q.push(u))}return m};return l}();c.RTree=b;var g=function(){function l(n){this.leaf=n;this.bounds=null;this.entries=[];this.value=this.parent=null}l.valueNode=function(n,m){var q=new l(!0);q.bounds=n;q.value=m;return q};l.prototype.overflow=function(n){return this.entries.length>
n};l.prototype.insert=function(n){this.entries.push(n);n.parent=this;for(var m=this;null!=m;)m.bounds=h.unionAll([m.bounds,n.bounds]),m=m.parent;return this};l.prototype.remove=function(n){n=this.entries.indexOf(n);if(0<=n)for(this.entries.splice(n,1),n=this;null!=n;)n.bounds=h.unionAll(n.entries.map(function(m){return m.bounds})),n=n.parent;return this};l.prototype.subtree=function(n){for(var m=null,q=0;q<this.entries.length;q++){var r=this.entries[q],v=r.unionAreaDifference(n);if(Infinity>v||Infinity===
v&&null!=m&&r.entries.length<m.entries.length)m=r}return m};l.prototype.split=function(n){null!=this.parent&&this.parent.remove(this);var m=[new l(this.leaf),new l(this.leaf)];n.split(this.entries,m);n=null!=this.parent?this.parent:new l(!1);n.insert(m[0]);n.insert(m[1]);return n};l.prototype.unionAreaDifference=function(n){return Math.abs(h.union(this.bounds,n).area()-this.bounds.area())};l.prototype.maxDepth=function(){return this.leaf?1:1+this.entries.map(function(n){return n.maxDepth()}).reduce(function(n,
m){return Math.max(n,m)})};return l}();c.RTreeNode=g;var h=function(){function l(n,m,q,r){this.xl=n;this.yl=m;this.xh=q;this.yh=r;this.width=this.xh-this.xl;this.height=this.yh-this.yl}l.xywh=function(n,m,q,r){return new l(n,m,n+q,m+r)};l.entityBounds=function(n){return new l(n.x,n.y,n.x+n.width,n.y+n.height)};l.bounds=function(n){return l.pointPair(n.topLeft,n.bottomRight)};l.pointPair=function(n,m){return new l(Math.min(n.x,m.x),Math.min(n.y,m.y),Math.max(n.x,m.x),Math.max(n.y,m.y))};l.points=function(n){if(2>
n.length)throw Error("need at least 2 points to create bounds");var m=n.map(function(q){return q.x});n=n.map(function(q){return q.y});return new l(m.reduce(function(q,r){return Math.min(q,r)}),n.reduce(function(q,r){return Math.min(q,r)}),m.reduce(function(q,r){return Math.max(q,r)}),n.reduce(function(q,r){return Math.max(q,r)}))};l.union=function(n,m){return new l(Math.min(n.xl,m.xl),Math.min(n.yl,m.yl),Math.max(n.xh,m.xh),Math.max(n.yh,m.yh))};l.unionAll=function(n){n=n.filter(function(m){return null!=
m});return 0===n.length?null:n.reduce(function(m,q){return l.union(m,q)})};l.isBoundsOverlapBounds=function(n,m){return l.isBoundsOverlapX(n,m)&&l.isBoundsOverlapY(n,m)};l.isBoundsOverlapX=function(n,m){return!(n.xh<m.xl)&&!(n.xl>m.xh)};l.isBoundsOverlapY=function(n,m){return!(n.yh<m.yl)&&!(n.yl>m.yh)};l.prototype.area=function(){null==this.areaCached&&(this.areaCached=(this.xh-this.xl)*(this.yh-this.yl));return this.areaCached};l.prototype.contains=function(n){return this.xl<=n.x&&this.xh>=n.x&&
this.yl<=n.y&&this.yh>=n.y};return l}();c.RTreeBounds=h},function(b,c){b=function(){function e(){"function"===typeof window.Set?this._es6Set=new window.Set:this._values=[];this.size=0}e.prototype.add=function(f){if(null!=this._es6Set)return this._es6Set.add(f),this.size=this._es6Set.size,this;this.has(f)||(this._values.push(f),this.size=this._values.length);return this};e.prototype.delete=function(f){if(null!=this._es6Set)return f=this._es6Set.delete(f),this.size=this._es6Set.size,f;f=this._values.indexOf(f);
return-1!==f?(this._values.splice(f,1),this.size=this._values.length,!0):!1};e.prototype.has=function(f){return null!=this._es6Set?this._es6Set.has(f):-1!==this._values.indexOf(f)};e.prototype.forEach=function(f,g){var h=this;null!=this._es6Set?this._es6Set.forEach(function(l,n){return f.call(g,l,n,h)},g):this._values.forEach(function(l){f.call(g,l,l,h)})};return e}();c.Set=b},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(131));f(e(130))},function(b,c,e){var f=
this&&this.__extends||function(h,l){function n(){this.constructor=h}for(var m in l)l.hasOwnProperty(m)&&(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)},g=e(21);b=function(h){function l(n,m){var q=h.call(this,n,m)||this;q.cache=new g.Cache(function(r){return q._measureCharacterNotFromCache(r)});return q}f(l,h);l.prototype._measureCharacterNotFromCache=function(n){return h.prototype._measureCharacter.call(this,n)};l.prototype._measureCharacter=function(n){return this.cache.get(n)};
l.prototype.reset=function(){this.cache.clear()};return l}(e(61).CharacterMeasurer);c.CacheCharacterMeasurer=b},function(b,c,e){var f=this&&this.__extends||function(g,h){function l(){this.constructor=g}for(var n in h)h.hasOwnProperty(n)&&(g[n]=h[n]);g.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)};b=function(g){function h(){return g.apply(this,arguments)||this}f(h,g);h.prototype._measureCharacter=function(l){return g.prototype._measureLine.call(this,l)};h.prototype._measureLine=
function(l){var n=this;l=l.split("").map(function(m){return n._measureCharacter(m)});return{height:l.reduce(function(m,q){return Math.max(m,q.height)},0),width:l.reduce(function(m,q){return m+q.width},0)}};return h}(e(63).Measurer);c.CharacterMeasurer=b},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(36));f(e(60));f(e(132));f(e(61));f(e(63))},function(b,c,e){var f=this&&this.__extends||function(h,l){function n(){this.constructor=h}for(var m in l)l.hasOwnProperty(m)&&
(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)},g=e(36);b=function(h){function l(n,m){void 0===m&&(m=!1);n=h.call(this,n)||this;n.useGuards=m;return n}f(l,h);l.prototype._addGuards=function(n){return g.AbstractMeasurer.HEIGHT_TEXT+n+g.AbstractMeasurer.HEIGHT_TEXT};l.prototype._measureLine=function(n){var m;void 0===m&&(m=!1);m=this.useGuards||m||/^[\t ]$/.test(n);n=h.prototype.measure.call(this,m?this._addGuards(n):n);n.width-=m?2*this.getGuardWidth():0;return n};
l.prototype.measure=function(n){var m=this;void 0===n&&(n=g.AbstractMeasurer.HEIGHT_TEXT);if(""===n.trim())return{width:0,height:0};n=n.trim().split("\n").map(function(q){return m._measureLine(q)});return{height:n.reduce(function(q,r){return q+r.height},0),width:n.reduce(function(q,r){return Math.max(q,r.width)},0)}};l.prototype.getGuardWidth=function(){null==this.guardWidth&&(this.guardWidth=h.prototype.measure.call(this).width);return this.guardWidth};return l}(g.AbstractMeasurer);c.Measurer=b},
function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(138));f(e(65))},function(b,c,e){var f=e(21);b=function(){function g(){this.maxLines(Infinity);this.textTrimming();this.allowBreakingWords();this._tokenizer=new f.Tokenizer;this._breakingCharacter="-"}g.prototype.maxLines=function(h){if(null==h)return this._maxLines;this._maxLines=h;return this};g.prototype.textTrimming=function(){this._textTrimming="ellipsis"};g.prototype.allowBreakingWords=function(){this._allowBreakingWords=
!0};g.prototype.wrap=function(h,l,n,m){var q=this;void 0===m&&(m=Infinity);var r={noBrokeWords:0,noLines:0,originalText:h,truncatedText:"",wrappedText:""};n={availableLines:Math.min(Math.floor(m/l.measure().height),this._maxLines),availableWidth:n,canFitText:!0,currentLine:"",wrapping:r};var v=h.split("\n");return v.reduce(function(u,w,z){return q.breakLineToFitWidth(u,w,z!==v.length-1,l)},n).wrapping};g.prototype.breakLineToFitWidth=function(h,l,n,m){var q=this;h.canFitText||""===h.wrapping.truncatedText||
(h.wrapping.truncatedText+="\n");h=this._tokenizer.tokenize(l).reduce(function(r,v){return q.wrapNextToken(v,r,m)},h);l=f.StringMethods.trimEnd(h.currentLine);h.wrapping.noLines+=+(""!==l);h.wrapping.noLines===h.availableLines&&"none"!==this._textTrimming&&n?h.canFitText=!1:h.wrapping.wrappedText+=l;h.currentLine="\n";return h};g.prototype.canFitToken=function(h,l,n){var m=this,q=this._allowBreakingWords?h.split("").map(function(r,v){return v!==h.length-1?r+m._breakingCharacter:r}):[h];return n.measure(h).width<=
l||q.every(function(r){return n.measure(r).width<=l})};g.prototype.addEllipsis=function(h,l,n){if("none"===this._textTrimming)return{remainingToken:"",wrappedToken:h};var m=h.substring(0).trim(),q=n.measure(m).width,r=n.measure("...").width,v=0<h.length&&"\n"===h[0]?"\n":"";if(l<=r)return{remainingToken:h,wrappedToken:v+"...".substr(0,Math.floor(l/(r/3)))};for(;q+r>l;)m=f.StringMethods.trimEnd(m.substr(0,m.length-1)),q=n.measure(m).width;return{remainingToken:f.StringMethods.trimEnd(h.substring(m.length),
"-").trim(),wrappedToken:v+m+"..."}};g.prototype.wrapNextToken=function(h,l,n){if(!l.canFitText||l.availableLines===l.wrapping.noLines||!this.canFitToken(h,l.availableWidth,n))return this.finishWrapping(h,l,n);for(;h;){var m=this.breakTokenToFitInWidth(h,l.currentLine,l.availableWidth,n);l.currentLine=m.line;h=m.remainingToken;if(null!=h)if(l.wrapping.noBrokeWords+=+m.breakWord,++l.wrapping.noLines,l.availableLines===l.wrapping.noLines){n=this.addEllipsis(l.currentLine,l.availableWidth,n);l.wrapping.wrappedText+=
n.wrappedToken;l.wrapping.truncatedText+=n.remainingToken+h;l.currentLine="\n";break}else l.wrapping.wrappedText+=f.StringMethods.trimEnd(l.currentLine),l.currentLine="\n"}return l};g.prototype.finishWrapping=function(h,l,n){l.canFitText&&l.availableLines!==l.wrapping.noLines&&this._allowBreakingWords&&"none"!==this._textTrimming?(n=this.addEllipsis(l.currentLine+h,l.availableWidth,n),l.wrapping.wrappedText+=n.wrappedToken,l.wrapping.truncatedText+=n.remainingToken,l.wrapping.noBrokeWords+=+(n.remainingToken.length<
h.length),l.wrapping.noLines+=+(0<n.wrappedToken.length),l.currentLine=""):l.wrapping.truncatedText+=h;l.canFitText=!1;return l};g.prototype.breakTokenToFitInWidth=function(h,l,n,m){if(void 0===q)var q=this._breakingCharacter;if(m.measure(l+h).width<=n)return{breakWord:!1,line:l+h,remainingToken:null};if(""===h.trim())return{breakWord:!1,line:l,remainingToken:""};if(!this._allowBreakingWords)return{breakWord:!1,line:l,remainingToken:h};for(var r=0;r<h.length;)if(m.measure(l+h.substring(0,r+1)+q).width<=
n)++r;else break;n="";0<r&&(n=q);return{breakWord:0<r,line:l+h.substring(0,r)+n,remainingToken:h.substring(r)}};return g}();c.Wrapper=b},function(b,c,e){b=e(139);for(var f in b)c.hasOwnProperty(f)||(c[f]=b[f])},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}f(e(72));f(e(73));f(e(28))},function(b,c){c.version="3.7.0"},function(b,c,e){function f(z,A){return z.each(function(){var E=A.apply(this,arguments),C=w.select(this),D;for(D in E)C.attr(D,E[D])})}function g(z,A){for(var E in A)z.attr(E,
A[E]);return z}function h(z,A,E){return z.each(function(){var C=A.apply(this,arguments),D=w.select(this),J;for(J in C)D.style(J,C[J],E)})}function l(z,A,E){for(var C in A)z.style(C,A[C],E);return z}function n(z,A){return z.each(function(){var E=A.apply(this,arguments),C=w.select(this),D;for(D in E)C.property(D,E[D])})}function m(z,A){for(var E in A)z.property(E,A[E]);return z}function q(z,A){return z.each(function(){var E=A.apply(this,arguments),C=w.select(this).transition(z),D;for(D in E)C.attr(D,
E[D])})}function r(z,A){for(var E in A)z.attr(E,A[E]);return z}function v(z,A,E){return z.each(function(){var C=A.apply(this,arguments),D=w.select(this).transition(z),J;for(J in C)D.style(J,C[J],E)})}function u(z,A,E){for(var C in A)z.style(C,A[C],E);return z}var w=b=e(1);w.selection.prototype.attrs=function(z){return("function"===typeof z?f:g)(this,z)};w.selection.prototype.styles=function(z,A){return("function"===typeof z?h:l)(this,z,null==A?"":A)};w.selection.prototype.properties=function(z){return("function"===
typeof z?n:m)(this,z)};b.transition.prototype.attrs=function(z){return("function"===typeof z?q:r)(this,z)};b.transition.prototype.styles=function(z,A){return("function"===typeof z?v:u)(this,z,null==A?"":A)}},function(b,c,e){b=e(117);var f=e(12);e=e(10);var g={linear:b.easeLinear,quad:b.easeQuad,quadIn:b.easeQuadIn,quadOut:b.easeQuadOut,quadInOut:b.easeQuadInOut,cubic:b.easeCubic,cubicIn:b.easeCubicIn,cubicOut:b.easeCubicOut,cubicInOut:b.easeCubicInOut,poly:b.easePoly,polyIn:b.easePolyIn,polyOut:b.easePolyOut,
polyInOut:b.easePolyInOut,sin:b.easeSin,sinIn:b.easeSinIn,sinOut:b.easeSinOut,sinInOut:b.easeSinInOut,exp:b.easeExp,expIn:b.easeExpIn,expOut:b.easeExpOut,expInOut:b.easeExpInOut,circle:b.easeCircle,circleIn:b.easeCircleIn,circleOut:b.easeCircleOut,circleInOut:b.easeCircleInOut,bounce:b.easeBounce,bounceIn:b.easeBounceIn,bounceOut:b.easeBounceOut,bounceInOut:b.easeBounceInOut,back:b.easeBack,backIn:b.easeBackIn,backOut:b.easeBackOut,backInOut:b.easeBackInOut,elastic:b.easeElastic,elasticIn:b.easeElasticIn,
elasticOut:b.easeElasticOut,elasticInOut:b.easeElasticInOut};c.EaseName=e.makeEnum("linear quad quadIn quadOut quadInOut cubic cubicIn cubicOut cubicInOut poly polyIn polyOut polyInOut sin sinIn sinOut sinInOut exp expIn expOut expInOut circle circleIn circleOut circleInOut bounce bounceIn bounceOut bounceInOut back backIn backOut backInOut elastic elasticIn elasticOut elasticInOut".split(" "));e=function(){function h(){this._startDelay=h._DEFAULT_START_DELAY_MILLISECONDS;this._stepDuration=h._DEFAULT_STEP_DURATION_MILLISECONDS;
this._stepDelay=h._DEFAULT_ITERATIVE_DELAY_MILLISECONDS;this._maxTotalDuration=h._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS;this._easingMode=h._DEFAULT_EASING_MODE}h.prototype.totalTime=function(l){var n=this._getAdjustedIterativeDelay(l);return this.startDelay()+n*Math.max(l-1,0)+this.stepDuration()};h.prototype.animate=function(l,n){var m=this;l=f.coerceExternalD3(l);var q=l.size(),r=this._getAdjustedIterativeDelay(q);return l.transition().ease(this._getEaseFactory()).duration(this.stepDuration()).delay(function(v,
u){return m.startDelay()+r*u}).attrs(n)};h.prototype.startDelay=function(l){if(null==l)return this._startDelay;this._startDelay=l;return this};h.prototype.stepDuration=function(l){if(null==l)return Math.min(this._stepDuration,this._maxTotalDuration);this._stepDuration=l;return this};h.prototype.stepDelay=function(){return this._stepDelay};h.prototype.maxTotalDuration=function(l){if(null==l)return this._maxTotalDuration;this._maxTotalDuration=l;return this};h.prototype.easingMode=function(l){if(null==
l)return this._easingMode;this._easingMode=l;return this};h.prototype._getEaseFactory=function(){var l=this.easingMode();return"string"===typeof l?(l=g[l],null==l?g.linear:l):l};h.prototype._getAdjustedIterativeDelay=function(l){var n=this.maxTotalDuration()-this.stepDuration();n=Math.max(n,0);l=n/Math.max(l-1,1);return Math.min(this.stepDelay(),l)};return h}();e._DEFAULT_START_DELAY_MILLISECONDS=0;e._DEFAULT_STEP_DURATION_MILLISECONDS=300;e._DEFAULT_ITERATIVE_DELAY_MILLISECONDS=15;e._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS=
Infinity;e._DEFAULT_EASING_MODE="expOut";c.Easing=e},function(b,c,e){var f=e(12);b=function(){function g(){}g.prototype.totalTime=function(){return 0};g.prototype.animate=function(h,l){h=f.coerceExternalD3(h);return h.attrs(l)};return g}();c.Null=b},function(b,c,e){var f=this&&this.__extends||function(q,r){function v(){this.constructor=q}for(var u in r)r.hasOwnProperty(u)&&(q[u]=r[u]);q.prototype=null===r?Object.create(r):(v.prototype=r.prototype,new v)},g=e(1),h=e(5),l=e(4),n=e(0),m=e(22);b=function(q){function r(v,
u){void 0===u&&(u="bottom");v=q.call(this,v,u)||this;v._tickLabelAngle=0;v._tickLabelShearAngle=0;v.addClass("category-axis");return v}f(r,q);Object.defineProperty(r.prototype,"_wrapper",{get:function(){var v=new h.Wrapper;null!=this._tickLabelMaxLines&&v.maxLines(this._tickLabelMaxLines);return v},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"_writer",{get:function(){return new h.Writer(this._measurer,this._typesetterContext,this._wrapper)},enumerable:!0,configurable:!0});r.prototype._setup=
function(){q.prototype._setup.call(this);this._typesetterContext=new h.SvgContext(this._tickLabelContainer.node());this._measurer=new h.CacheMeasurer(this._typesetterContext)};r.prototype._rescale=function(){return this.redraw()};r.prototype.requestedSpace=function(v,u){var w=this.isHorizontal()?0:this._tickSpaceRequired()+this.margin(),z=this.isHorizontal()?this._tickSpaceRequired()+this.margin():0;if(0===this._scale.domain().length)return{minWidth:0,minHeight:0};if(this.annotationsEnabled()){var A=
this._annotationTierHeight()*this.annotationTierCount();this.isHorizontal()?z+=A:w+=A}v=this._measureTickLabels(v,u);return{minWidth:v.usedWidth+w,minHeight:v.usedHeight+z}};r.prototype._coreSize=function(){var v=this.isHorizontal()?this.height():this.width(),u=this.isHorizontal()?this.requestedSpace(this.width(),this.height()).minHeight:this.requestedSpace(this.width(),this.height()).minWidth,w=this.margin()+this._annotationTierHeight();return Math.min(u-w,v)};r.prototype._getTickValues=function(){return this.getDownsampleInfo().domain};
r.prototype._sizeFromOffer=function(v,u){return l.Component.prototype._sizeFromOffer.call(this,v,u)};r.prototype.getDownsampleInfo=function(v){var u;void 0===v&&(v=this._scale);void 0===u&&(u=v.invertRange());var w=Math.ceil(r._MINIMUM_WIDTH_PER_LABEL_PX*(0===this._tickLabelAngle?1:1/Math.cos(this._tickLabelShearAngle/180*Math.PI))/v.stepWidth());return{domain:u.filter(function(z,A){return 0===A%w}),stepWidth:w*v.stepWidth()}};r.prototype.tickLabelAngle=function(){return this._tickLabelAngle;throw Error("Angle undefined not supported; only 0, 90, and -90 are valid values");
};r.prototype.tickLabelShearAngle=function(){return this._tickLabelShearAngle};r.prototype.tickLabelMaxWidth=function(v){if(0===arguments.length)return this._tickLabelMaxWidth;this._tickLabelMaxWidth=v;this.redraw();return this};r.prototype.tickLabelMaxLines=function(v){if(0===arguments.length)return this._tickLabelMaxLines;this._tickLabelMaxLines=v;this.redraw();return this};r.prototype._tickSpaceRequired=function(){return this._maxLabelTickLength()+this.tickLabelPadding()};r.prototype._drawTicks=
function(v,u){var w=this;switch(this.tickLabelAngle()){case 0:var z={left:"right",right:"left",top:"center",bottom:"center"};var A={left:"center",right:"center",top:"bottom",bottom:"top"};break;case 90:z={left:"center",right:"center",top:"right",bottom:"left"};A={left:"top",right:"bottom",top:"center",bottom:"center"};break;case -90:z={left:"center",right:"center",top:"left",bottom:"right"},A={left:"bottom",right:"top",top:"center",bottom:"center"}}u.each(function(E){var C=g.select(this),D=w.isHorizontal()?
v:w.width()-w._tickSpaceRequired(),J=w.isHorizontal()?w.height()-w._tickSpaceRequired():v,M={xAlign:z[w.orientation()],yAlign:A[w.orientation()],textRotation:w.tickLabelAngle(),textShear:w.tickLabelShearAngle()};if(null!=w._tickLabelMaxWidth){if("left"===w.orientation()&&D>w._tickLabelMaxWidth){var H=D-w._tickLabelMaxWidth;H=C.attr("transform")+" translate("+H+", 0)";C.attr("transform",H)}D=Math.min(D,w._tickLabelMaxWidth)}w._writer.write(w.formatter()(E),D,J,M,C.node())})};r.prototype._measureTickLabels=
function(v,u){var w=this,z=this._scale.cloneWithoutProviders().range([0,this.isHorizontal()?v:u]),A=this.getDownsampleInfo(z);z=A.domain;A=A.stepWidth;var E=v-this._tickSpaceRequired();this.isHorizontal()&&(E=A,0!==this._tickLabelAngle&&(E=u-this._tickSpaceRequired()),E=Math.max(E,0));var C=A;this.isHorizontal()&&(C=u-this._tickSpaceRequired(),0!==this._tickLabelAngle&&(C=v-this._tickSpaceRequired()),C=Math.max(C,0));null!=this._tickLabelMaxWidth&&(E=Math.min(E,this._tickLabelMaxWidth));u=z.map(function(D){return w._wrapper.wrap(w.formatter()(D),
w._measurer,E,C)});v=this.isHorizontal()&&0===this._tickLabelAngle?g.sum:n.Math.max;z=this.isHorizontal()&&0===this._tickLabelAngle?n.Math.max:g.sum;v=v(u,function(D){return w._measurer.measure(D.wrappedText).width},0);u=z(u,function(D){return w._measurer.measure(D.wrappedText).height},0);0!==this._tickLabelAngle&&(u=[u,v],v=u[0],u=u[1]);return{usedWidth:v,usedHeight:u}};r.prototype.renderImmediately=function(){var v=this;q.prototype.renderImmediately.call(this);var u=this._scale,w=this.getDownsampleInfo(u),
z=w.domain,A=w=w.stepWidth;this.isHorizontal()&&null!=this._tickLabelMaxWidth&&(A=Math.min(A,this._tickLabelMaxWidth));z=this._tickLabelContainer.selectAll("."+m.Axis.TICK_LABEL_CLASS).data(z);var E=z.enter().append("g").classed(m.Axis.TICK_LABEL_CLASS,!0).merge(z);z.exit().remove();E.attr("transform",function(C){var D=u.scale(C)-A/2;C=v.isHorizontal()?D:0;D=v.isHorizontal()?0:D;return"translate("+C+","+D+")"});E.text("");this._drawTicks(w,E);w="right"===this.orientation()?this._tickSpaceRequired():
0;z="bottom"===this.orientation()?this._tickSpaceRequired():0;this._tickLabelContainer.attr("transform","translate("+w+","+z+")");this._showAllTickMarks();this._showAllTickLabels();this._hideTickMarksWithoutLabel();return this};r.prototype.computeLayout=function(v,u,w){q.prototype.computeLayout.call(this,v,u,w);this.isHorizontal()||this._scale.range([0,this.height()]);return this};r.prototype.invalidateCache=function(){q.prototype.invalidateCache.call(this);this._measurer.reset()};return r}(m.Axis);
b._MINIMUM_WIDTH_PER_LABEL_PX=15;c.Category=b},function(b,c,e){var f=this&&this.__extends||function(q,r){function v(){this.constructor=q}for(var u in r)r.hasOwnProperty(u)&&(q[u]=r[u]);q.prototype=null===r?Object.create(r):(v.prototype=r.prototype,new v)},g=e(1),h=e(5),l=e(8),n=e(0),m=e(22);b=function(q){function r(v,u){v=q.call(this,v,u)||this;v._tickLabelPositioning="center";v._usesTextWidthApproximation=!1;v.formatter(l.general());return v}f(r,q);r.prototype._setup=function(){q.prototype._setup.call(this);
var v=new h.SvgContext(this._tickLabelContainer.node(),m.Axis.TICK_LABEL_CLASS);this._measurer=new h.CacheMeasurer(v);this._wrapper=(new h.Wrapper).maxLines(1)};r.prototype._computeWidth=function(){var v=this._usesTextWidthApproximation?this._computeApproximateTextWidth():this._computeExactTextWidth();return"center"===this._tickLabelPositioning?this._maxLabelTickLength()+this.tickLabelPadding()+v:Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+v)};r.prototype._computeExactTextWidth=function(){var v=
this,u=this._getTickValues().map(function(w){w=v.formatter()(w);return v._measurer.measure(w).width});return n.Math.max(u,0)};r.prototype._computeApproximateTextWidth=function(){var v=this,u=this._getTickValues(),w=this._measurer.measure("M").width;u=u.map(function(z){return v.formatter()(z).length*w});return n.Math.max(u,0)};r.prototype._computeHeight=function(){var v=this._measurer.measure().height;return"center"===this._tickLabelPositioning?this._maxLabelTickLength()+this.tickLabelPadding()+v:
Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+v)};r.prototype._getTickValues=function(){var v=this._scale,u=v.domain(),w=u[0]<=u[1]?u[0]:u[1],z=u[0]>=u[1]?u[0]:u[1];return v.ticks().filter(function(A){return A>=w&&A<=z})};r.prototype._rescale=function(){if(this._isSetup){if(!this.isHorizontal()){var v=this._computeWidth();if(v>this.width()||v<this.width()-this.margin()){this.redraw();return}}this.render()}};r.prototype.renderImmediately=function(){var v=this;q.prototype.renderImmediately.call(this);
var u={x:0,y:0,dx:"0em",dy:"0.3em"},w=this._maxLabelTickLength(),z=this.tickLabelPadding(),A="middle",E=0,C=0,D=0,J=0;if(this.isHorizontal())switch(this._tickLabelPositioning){case "left":A="end";E=-z;J=z;break;case "center":J=w+z;break;case "right":A="start",J=E=z}else switch(this._tickLabelPositioning){case "top":u.dy="-0.3em";D=z;C=-z;break;case "center":D=w+z;break;case "bottom":u.dy="1em",C=D=z}w=this._generateTickMarkAttrHash();switch(this.orientation()){case "bottom":u.x=w.x1;u.dy="0.95em";
C=w.y1+J;break;case "top":u.x=w.x1;u.dy="-.25em";C=w.y1-J;break;case "left":A="end";E=w.x1-D;u.y=w.y1;break;case "right":A="start",E=w.x1+D,u.y=w.y1}D=this._getTickValues();D=this._tickLabelContainer.selectAll("."+m.Axis.TICK_LABEL_CLASS).data(D);D.exit().remove();D.enter().append("text").classed(m.Axis.TICK_LABEL_CLASS,!0).merge(D).style("text-anchor",A).style("visibility","inherit").attrs(u).text(function(M){return v.formatter()(M)});this._tickLabelContainer.attr("transform","translate("+E+", "+
C+")");this._showAllTickMarks();this.showEndTickLabels()||this._hideEndTickLabels();this._hideOverflowingTickLabels();this._hideOverlappingTickLabels();"center"!==this._tickLabelPositioning&&this._hideTickMarksWithoutLabel();return this};r.prototype.tickLabelPosition=function(v){if(null==v)return this._tickLabelPositioning;v=v.toLowerCase();if(this.isHorizontal()){if("left"!==v&&"center"!==v&&"right"!==v)throw Error(v+" is not a valid tick label position for a horizontal NumericAxis");}else if("top"!==
v&&"center"!==v&&"bottom"!==v)throw Error(v+" is not a valid tick label position for a vertical NumericAxis");this._tickLabelPositioning=v;this.redraw();return this};r.prototype.usesTextWidthApproximation=function(){this._usesTextWidthApproximation=!0};r.prototype._hideEndTickLabels=function(){var v=this.element().node().getBoundingClientRect(),u=this._tickLabelContainer.selectAll("."+m.Axis.TICK_LABEL_CLASS);if(0!==u.size()){var w=u.nodes()[0];n.DOM.clientRectInside(w.getBoundingClientRect(),v)||
g.select(w).style("visibility","hidden");u=u.nodes()[u.size()-1];n.DOM.clientRectInside(u.getBoundingClientRect(),v)||g.select(u).style("visibility","hidden")}};r.prototype._hideOverlappingTickLabels=function(){for(var v=this._tickLabelContainer.selectAll("."+m.Axis.TICK_LABEL_CLASS).filter(function(){var z=g.select(this).style("visibility");return"inherit"===z||"visible"===z}),u=v.nodes().map(function(z){return z.getBoundingClientRect()}),w=1;!this._hasOverlapWithInterval(w,u)&&w<u.length;)w+=1;
v.each(function(z,A){z=g.select(this);0!==A%w&&z.style("visibility","hidden")})};r.prototype._hasOverlapWithInterval=function(v,u){var w="center"===this._tickLabelPositioning?this.tickLabelPadding():3*this.tickLabelPadding();u=u.map(function(A){return n.DOM.expandRect(A,w)});for(var z=0;z<u.length-v;z+=v)if(n.DOM.clientRectsOverlap(u[z],u[z+v]))return!1;return!0};r.prototype.invalidateCache=function(){q.prototype.invalidateCache.call(this);this._measurer.reset()};return r}(m.Axis);c.Numeric=b},function(b,
c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)};b=e(42);var g=e(25),h=e(0);e=function(l){function n(m){function q(){w&&(w=!1,u._dragEndCallbacks.callCallbacks(u))}function r(z,A){w&&(u._setPixelPositionWithoutChangingMode(u._isVertical()?A.x:A.y),u._dragCallbacks.callCallbacks(u))}function v(z){if(u._isVertical()&&u.pixelPosition()-u.detectionRadius()<=
z.x&&z.x<=u.pixelPosition()+u.detectionRadius()||!u._isVertical()&&u.pixelPosition()-u.detectionRadius()<=z.y&&z.y<=u.pixelPosition()+u.detectionRadius())w=!0,u._dragStartCallbacks.callCallbacks(u)}var u=l.call(this,m)||this;u._detectionRadius=3;u._enabled=!0;u.addClass("drag-line-layer");u.addClass("enabled");u._dragInteraction=new g.Drag;u._dragInteraction.attachTo(u);var w=!1;u._dragInteraction.onDragStart(v);u._dragInteraction.onDrag(r);u._dragInteraction.onDragEnd(q);u._disconnectInteraction=
function(){u._dragInteraction.offDragStart(v);u._dragInteraction.offDrag(r);u._dragInteraction.offDragEnd(q);u._dragInteraction.detach()};u._dragStartCallbacks=new h.CallbackSet;u._dragCallbacks=new h.CallbackSet;u._dragEndCallbacks=new h.CallbackSet;return u}f(n,l);n.prototype._setup=function(){l.prototype._setup.call(this);this._detectionEdge=this.content().append("line").styles({opacity:0,stroke:"pink","pointer-events":"visibleStroke"}).classed("drag-edge",!0)};n.prototype.renderImmediately=function(){l.prototype.renderImmediately.call(this);
this._detectionEdge.attrs({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition(),"stroke-width":2*this._detectionRadius});return this};n.prototype.detectionRadius=function(){return this._detectionRadius};n.prototype.enabled=function(m){if(null==m)return this._enabled;(this._enabled=m)?this.addClass("enabled"):this.removeClass("enabled");this._dragInteraction.enabled(m);
return this};n.prototype.onDragStart=function(m){this._dragStartCallbacks.add(m)};n.prototype.offDragStart=function(m){this._dragStartCallbacks.delete(m)};n.prototype.onDrag=function(m){this._dragCallbacks.add(m)};n.prototype.offDrag=function(m){this._dragCallbacks.delete(m)};n.prototype.onDragEnd=function(m){this._dragEndCallbacks.add(m)};n.prototype.offDragEnd=function(m){this._dragEndCallbacks.delete(m)};n.prototype.destroy=function(){var m=this;l.prototype.destroy.call(this);this._dragStartCallbacks.forEach(function(q){return m._dragStartCallbacks.delete(q)});
this._dragCallbacks.forEach(function(q){return m._dragCallbacks.delete(q)});this._dragEndCallbacks.forEach(function(q){return m._dragEndCallbacks.delete(q)});this._disconnectInteraction()};return n}(b.GuideLineLayer);c.DragLineLayer=e},function(b,c,e){function f(h,l,n){var m={};if(void 0!==n)for(var q=0;q<n.length;q++)m[n[q]]=n[q-1];return function(r){var v=h.scale(r);if(!l)return v;var u;r=void 0===m[r]?void 0:h.scale(m[r]);void 0!==r&&(u=r+(v-r)/2);return u}}var g=this&&this.__extends||function(h,
l){function n(){this.constructor=h}for(var m in l)l.hasOwnProperty(m)&&(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)};b=function(h){function l(n,m){var q=h.call(this)||this;q.addClass("gridlines");q._xScale=n;q._yScale=m;q._renderCallback=function(){return q.render()};if(q._xScale)q._xScale.onUpdate(q._renderCallback);if(q._yScale)q._yScale.onUpdate(q._renderCallback);return q}g(l,h);l.prototype.betweenX=function(){return this._betweenX};l.prototype.betweenY=function(){return this._betweenY};
l.prototype.destroy=function(){h.prototype.destroy.call(this);this._xScale&&this._xScale.offUpdate(this._renderCallback);this._yScale&&this._yScale.offUpdate(this._renderCallback);return this};l.prototype._setup=function(){h.prototype._setup.call(this);this._xLinesContainer=this.content().append("g").classed("x-gridlines",!0);this._yLinesContainer=this.content().append("g").classed("y-gridlines",!0)};l.prototype.renderImmediately=function(){h.prototype.renderImmediately.call(this);this._redrawXLines();
this._redrawYLines();return this};l.prototype.computeLayout=function(n,m,q){h.prototype.computeLayout.call(this,n,m,q);null!=this._xScale&&this._xScale.range([0,this.width()]);null!=this._yScale&&this._yScale.range([this.height(),0]);return this};l.prototype._redrawXLines=function(){if(this._xScale){var n=this.betweenX(),m=this._xScale.ticks().slice(n?1:0);m=this._xLinesContainer.selectAll("line").data(m);m.enter().append("line").merge(m).attr("x1",f(this._xScale,n,this._xScale.ticks())).attr("y1",
0).attr("x2",f(this._xScale,n,this._xScale.ticks())).attr("y2",this.height()).classed("betweenline",n).classed("zeroline",function(q){return 0===q});m.exit().remove()}};l.prototype._redrawYLines=function(){if(this._yScale){var n=this.betweenY(),m=this._yScale.ticks().slice(n?1:0);m=this._yLinesContainer.selectAll("line").data(m);m.enter().append("line").merge(m).attr("x1",0).attr("y1",f(this._yScale,n,this._yScale.ticks())).attr("x2",this.width()).attr("y2",f(this._yScale,n,this._yScale.ticks())).classed("betweenline",
n).classed("zeroline",function(q){return 0===q});m.exit().remove()}};return l}(e(4).Component);c.Gridlines=b},function(b,c,e){var f=this&&this.__extends||function(m,q){function r(){this.constructor=m}for(var v in q)q.hasOwnProperty(v)&&(m[v]=q[v]);m.prototype=null===q?Object.create(q):(r.prototype=q.prototype,new r)},g=e(5),h=e(23),l=e(8),n=e(0);b=function(m){function q(r){var v=m.call(this)||this;v._textPadding=5;if(null==r)throw Error("InterpolatedColorLegend requires a interpolatedColorScale");
v._scale=r;v._redrawCallback=function(){return v.redraw()};v._scale.onUpdate(v._redrawCallback);v._formatter=l.general();v._orientation="horizontal";v._expands=!1;v.addClass("legend");v.addClass("interpolated-color-legend");return v}f(q,m);q.prototype.destroy=function(){m.prototype.destroy.call(this);this._scale.offUpdate(this._redrawCallback)};q.prototype.formatter=function(r){if(void 0===r)return this._formatter;this._formatter=r;this.redraw();return this};q.prototype.expands=function(){return this._expands};
q._ensureOrientation=function(r){r=r.toLowerCase();if("horizontal"===r||"left"===r||"right"===r)return r;throw Error('"'+r+'" is not a valid orientation for InterpolatedColorLegend');};q.prototype.orientation=function(r){if(null==r)return this._orientation;this._orientation=q._ensureOrientation(r);this.redraw();return this};q.prototype.fixedWidth=function(){return!this.expands()||this._isVertical()};q.prototype.fixedHeight=function(){return!this.expands()||!this._isVertical()};q.prototype._generateTicks=
function(r){void 0===r&&(r=q._DEFAULT_NUM_SWATCHES);var v=this._scale.domain();if(1===r)return[v[0]];for(var u=(v[1]-v[0])/(r-1),w=[],z=0;z<r;z++)w.push(v[0]+u*z);return w};q.prototype._setup=function(){m.prototype._setup.call(this);this._swatchContainer=this.content().append("g").classed("swatch-container",!0);this._swatchBoundingBox=this.content().append("rect").classed("swatch-bounding-box",!0);this._lowerLabel=this.content().append("g").classed(q.LEGEND_LABEL_CLASS,!0);this._upperLabel=this.content().append("g").classed(q.LEGEND_LABEL_CLASS,
!0);var r=new g.SvgContext(this.content().node());this._measurer=new g.Measurer(r);this._wrapper=new g.Wrapper;this._writer=new g.Writer(this._measurer,r,this._wrapper)};q.prototype.requestedSpace=function(){var r=this,v=this._measurer.measure().height,u=this._scale.domain().map(function(A){return r._measurer.measure(r._formatter(A)).width}),w=q._DEFAULT_NUM_SWATCHES;if(this._isVertical()){var z=n.Math.max(u,0);u=v+v+this._textPadding+z+this._textPadding;z=w*v}else z=v+v+v,u=this._textPadding+u[0]+
w*v+u[1]+this._textPadding;return{minWidth:u,minHeight:z}};q.prototype._isVertical=function(){return"horizontal"!==this._orientation};q.prototype.renderImmediately=function(){var r=this;m.prototype.renderImmediately.call(this);var v=this._scale.domain(),u=this._formatter(v[0]),w=this._measurer.measure(u).width,z=this._formatter(v[1]);v=this._measurer.measure(z).width;var A=this._measurer.measure().height,E=this._textPadding,C=0,D=0,J=0,M=0,H={xAlign:"center",yAlign:"center",textRotation:0},K={xAlign:"center",
yAlign:"center",textRotation:0},L={x:0,y:0,width:0,height:0};if(this._isVertical()){var P=Math.floor(this.height());var S=Math.max(w,v);var aa=(this.width()-S-2*this._textPadding)/2;v=Math.max(this.width()-aa-2*E-S,0);A=1;var R=function(W,X){return r.height()-(X+1)};K.yAlign="top";D=0;H.yAlign="bottom";M=0;if("left"===this._orientation){var Y=function(){return E+S+E};K.xAlign="right";C=-(aa+v+E);H.xAlign="right";J=-(aa+v+E)}else Y=function(){return aa},K.xAlign="left",C=aa+v+E,H.xAlign="left",J=aa+
v+E;L.width=v;L.height=P*A}else aa=Math.max(E,(this.height()-A)/2),P=Math.max(Math.floor(this.width()-4*E-w-v),0),v=1,A=Math.max(this.height()-2*aa,0),Y=function(W,X){return Math.floor(w+2*E)+X},R=function(){return aa},K.xAlign="right",C=-E,H.xAlign="left",J=E,L.y=aa,L.width=P*v,L.height=A;L.x=Y(null,0);this._upperLabel.text("");this._writer.write(z,this.width(),this.height(),K,this._upperLabel.node());this._upperLabel.attr("transform","translate("+C+", "+D+")");this._lowerLabel.text("");this._writer.write(u,
this.width(),this.height(),H,this._lowerLabel.node());this._lowerLabel.attr("transform","translate("+J+", "+M+")");this._swatchBoundingBox.attrs(L);u=this._generateTicks(P);u=this._swatchContainer.selectAll("rect.swatch").data(u);z=u.enter().append("rect").classed("swatch",!0);C=u.merge(z);u.exit().remove();C.attrs({fill:function(W){return r._scale.scale(W)},width:v,height:A,x:Y,y:R,"shape-rendering":"crispEdges"});h.ADD_TITLE_ELEMENTS&&z.append("title").text(function(W){return r._formatter(W)});
return this};return q}(e(4).Component);b._DEFAULT_NUM_SWATCHES=11;b.LEGEND_LABEL_CLASS="legend-label";c.InterpolatedColorLegend=b},function(b,c,e){var f=this&&this.__extends||function(h,l){function n(){this.constructor=h}for(var m in l)l.hasOwnProperty(m)&&(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)},g=e(5);b=function(h){function l(n,m){void 0===n&&(n="");void 0===m&&(m=0);var q=h.call(this)||this;q.addClass("label");q.text(n);q.angle(m);q.xAlignment("center").yAlignment("center");
q._padding=0;return q}f(l,h);l.prototype.requestedSpace=function(){var n=this._measurer.measure(this._text),m=(0===this.angle()?n.width:n.height)+2*this.padding();n=(0===this.angle()?n.height:n.width)+2*this.padding();return{minWidth:m,minHeight:n}};l.prototype._setup=function(){h.prototype._setup.call(this);this._textContainer=this.content().append("g");var n=new g.SvgContext(this._textContainer.node());this._measurer=new g.CacheMeasurer(n);this._wrapper=new g.Wrapper;this._writer=new g.Writer(this._measurer,
n,this._wrapper);this.text(this._text)};l.prototype.text=function(n){if(null==n)return this._text;if("string"!==typeof n)throw Error("Label.text() only takes strings as input");this._text=n;this.redraw();return this};l.prototype.angle=function(n){if(null==n)return this._angle;n%=360;180<n?n-=360:-180>n&&(n+=360);if(-90===n||0===n||90===n)this._angle=n;else throw Error(n+" is not a valid angle for Label");this.redraw();return this};l.prototype.padding=function(n){if(null==n)return this._padding;n=
+n;if(0>n)throw Error(n+" is not a valid padding value. Cannot be less than 0.");this._padding=n;this.redraw();return this};l.prototype.fixedWidth=function(){return!0};l.prototype.fixedHeight=function(){return!0};l.prototype.renderImmediately=function(){h.prototype.renderImmediately.call(this);this._textContainer.selectAll("g").remove();var n=this._measurer.measure(this._text),m=Math.max(Math.min((this.height()-n.height)/2,this.padding()),0);n=Math.max(Math.min((this.width()-n.width)/2,this.padding()),
0);this._textContainer.attr("transform","translate("+n+","+m+")");n=this.width()-2*n;m=this.height()-2*m;var q={xAlign:this.xAlignment(),yAlign:this.yAlignment(),textRotation:this.angle()};this._writer.write(this._text,n,m,q);return this};l.prototype.invalidateCache=function(){h.prototype.invalidateCache.call(this);this._measurer.reset()};return l}(e(4).Component);c.Label=b;e=function(h){function l(n,m){n=h.call(this,n,m)||this;n.addClass(l.TITLE_LABEL_CLASS);return n}f(l,h);return l}(b);e.TITLE_LABEL_CLASS=
"title-label";c.TitleLabel=e;b=function(h){function l(n,m){n=h.call(this,n,m)||this;n.addClass(l.AXIS_LABEL_CLASS);return n}f(l,h);return l}(b);b.AXIS_LABEL_CLASS="axis-label";c.AxisLabel=b},function(b,c,e){var f=this&&this.__extends||function(u,w){function z(){this.constructor=u}for(var A in w)w.hasOwnProperty(A)&&(u[A]=w[A]);u.prototype=null===w?Object.create(w):(z.prototype=w.prototype,new z)},g=e(1),h=e(5),l=e(23),n=e(8),m=e(31),q=e(0);b=e(4);var r=function(){function u(w,z,A){void 0===w&&(w=
[]);void 0===z&&(z=0);void 0===A&&(A=Infinity);this.columns=w;this.bottomPadding=z;this.maxWidth=A}u.prototype.addColumn=function(w){var z=w.width,A=this.getWidthAvailable();w.width=Math.min(A,z);this.columns.push(w)};u.prototype.getBounds=function(w){for(var z=this.columns[w],A=0,E=0;E<w;E++)A+=this.columns[E].width;return{topLeft:{x:A,y:0},bottomRight:{x:A+z.width,y:z.height}}};u.prototype.getHeight=function(){return q.Math.max(this.columns.map(function(w){return w.height}),0)+this.bottomPadding};
u.prototype.getWidth=function(){return Math.min(this.columns.reduce(function(w,z){return w+z.width},0),this.maxWidth)};u.prototype.getWidthAvailable=function(){var w=this.getWidth();return Math.max(this.maxWidth-w,0)};return u}(),v=function(){function u(w,z,A,E){void 0===w&&(w=Infinity);void 0===z&&(z=Infinity);void 0===A&&(A=0);void 0===E&&(E=[]);this.maxWidth=w;this.maxHeight=z;this.padding=A;this.rows=E}u.prototype.addRow=function(w){w.maxWidth=this.maxWidth-2*this.padding;this.rows.push(w)};u.prototype.getColumnBounds=
function(w,z){var A=this.getRowBounds(w);w=this.rows[w].getBounds(z);w.topLeft.x+=A.topLeft.x;w.bottomRight.x+=A.topLeft.x;w.topLeft.y+=A.topLeft.y;w.bottomRight.y+=A.topLeft.y;return w};u.prototype.getRowBounds=function(w){for(var z=this.padding,A=this.padding,E=0;E<w;E++)A+=this.rows[E].getHeight();return{topLeft:{x:z,y:A},bottomRight:{x:z+this.rows[w].getWidth(),y:A+this.rows[w].getHeight()}}};u.prototype.getHeight=function(){return Math.min(this.rows.reduce(function(w,z){return w+z.getHeight()},
0)+2*this.padding,this.maxHeight)};u.prototype.getWidth=function(){return Math.min(q.Math.max(this.rows.map(function(w){return w.getWidth()}),0)+2*this.padding,this.maxWidth)};return u}();b=function(u){function w(z){var A=u.call(this)||this;A._padding=5;A._rowBottomPadding=3;A.addClass("legend");A.maxEntriesPerRow(1);if(null==z)throw Error("Legend requires a colorScale");A._colorScale=z;A._redrawCallback=function(){return A.redraw()};A._colorScale.onUpdate(A._redrawCallback);A._formatter=n.identity();
A.maxLinesPerEntry(1);A.xAlignment("right").yAlignment("top");A.comparator(function(E,C){var D=A._colorScale.domain().slice().map(function(J){return A._formatter(J)});return D.indexOf(E)-D.indexOf(C)});A._symbolFactoryAccessor=function(){return m.circle()};A._symbolOpacityAccessor=function(){return 1};return A}f(w,u);w.prototype._setup=function(){u.prototype._setup.call(this);var z=this.content().append("g").classed(w.LEGEND_ROW_CLASS,!0);z.append("g").classed(w.LEGEND_ENTRY_CLASS,!0).append("text");
z=new h.SvgContext(z.node(),null,l.ADD_TITLE_ELEMENTS);this._measurer=new h.CacheMeasurer(z);this._wrapper=(new h.Wrapper).maxLines(this.maxLinesPerEntry());this._writer=new h.Writer(this._measurer,z,this._wrapper)};w.prototype.formatter=function(z){if(null==z)return this._formatter;this._formatter=z;this.redraw();return this};w.prototype.maxEntriesPerRow=function(z){if(null==z)return this._maxEntriesPerRow;this._maxEntriesPerRow=z;this.redraw();return this};w.prototype.maxLinesPerEntry=function(z){if(null==
z)return this._maxLinesPerEntry;this._maxLinesPerEntry=z;this.redraw();return this};w.prototype.maxWidth=function(z){if(null==z)return this._maxWidth;this._maxWidth=z;this.redraw();return this};w.prototype.comparator=function(z){null!=z&&(this._comparator=z,this.redraw())};w.prototype.colorScale=function(z){return null!=z?(this._colorScale.offUpdate(this._redrawCallback),this._colorScale=z,this._colorScale.onUpdate(this._redrawCallback),this.redraw(),this):this._colorScale};w.prototype.destroy=function(){u.prototype.destroy.call(this);
this._colorScale.offUpdate(this._redrawCallback)};w.prototype._buildLegendTable=function(z,A){var E=this,C=this._measurer.measure().height,D=new v(z,A,this._padding);z=this._colorScale.domain().slice().sort(function(M,H){return E._comparator(E._formatter(M),E._formatter(H))});var J=new r;D.addRow(J);J.bottomPadding=this._rowBottomPadding;z.forEach(function(M){J.columns.length/2===E.maxEntriesPerRow()&&(J=new r,J.bottomPadding=E._rowBottomPadding,D.addRow(J));var H=J.getWidthAvailable(),K=E._formatter(M),
L=E._measurer.measure(K).width;0>H-C-L&&1<J.columns.length&&(J=new r,J.bottomPadding=E._rowBottomPadding,D.addRow(J));J.addColumn({width:C,height:C,data:{name:M,type:"symbol"}});H=J.getWidthAvailable();H=Math.min(H,L);E._wrapper.maxLines(E.maxLinesPerEntry());K=E._wrapper.wrap(K,E._measurer,H).noLines*C;J.addColumn({width:H,height:K,data:{name:M,type:"text"}})});return D};w.prototype.requestedSpace=function(z,A){z=this._buildLegendTable(q.Math.min([this.maxWidth(),z],z),A);return{minHeight:z.getHeight(),
minWidth:z.getWidth()}};w.prototype.entitiesAt=function(z){var A=this;if(!this._isSetup)return[];var E=this._buildLegendTable(this.width(),this.height());return E.rows.reduce(function(C,D,J){if(0!==C.length)return C;var M=E.getRowBounds(J);return q.Math.within(z,M)?D.columns.reduce(function(H,K,L){var P=E.getColumnBounds(J,L);if(q.Math.within(z,P)){H=A.content().selectAll("."+w.LEGEND_ROW_CLASS).nodes()[J];L=g.select(H).selectAll("."+w.LEGEND_ENTRY_CLASS).nodes()[Math.floor(L/2)];var S=g.select(L).select("."+
w.LEGEND_SYMBOL_CLASS);P=q.DOM.getTranslateValues(g.select(H));S=q.DOM.getTranslateValues(S);return[{bounds:q.DOM.elementBBox(g.select(H)),datum:K.data.name,position:{x:P[0]+S[0],y:P[1]+S[1]},selection:g.select(L),component:A}]}return H},C):C},[])};w.prototype.renderImmediately=function(){u.prototype.renderImmediately.call(this);var z=this._buildLegendTable(this.width(),this.height());this.content().selectAll("*").remove();var A=this.content().selectAll("g."+w.LEGEND_ROW_CLASS).data(z.rows),E=A.enter().append("g").classed(w.LEGEND_ROW_CLASS,
!0).merge(A);A.exit().remove();E.attr("transform",function(D,J){D=z.getRowBounds(J);return"translate("+D.topLeft.x+", "+D.topLeft.y+")"});var C=this;E.each(function(D,J){for(var M=[],H=0;H<D.columns.length;H+=2)M.push([D.columns[H],D.columns[H+1]]);D=g.select(this).selectAll("g."+w.LEGEND_ENTRY_CLASS).data(M);M=D.enter().append("g").classed(w.LEGEND_ENTRY_CLASS,!0).merge(D);M.append("path").attr("d",function(K){K=K[0];return C.symbol()(K.data.name,J)(.6*K.height)(null)}).attr("transform",function(K){K=
K[0];return"translate("+(z.getColumnBounds(J,z.rows[J].columns.indexOf(K)).topLeft.x+K.width/2)+", "+K.height/2+")"}).attr("fill",function(K){return C._colorScale.scale(K[0].data.name)}).attr("opacity",function(K){return C.symbolOpacity()(K[0].data.name,J)}).classed(w.LEGEND_SYMBOL_CLASS,!0);M.append("g").classed("text-container",!0).attr("transform",function(K){return"translate("+z.getColumnBounds(J,z.rows[J].columns.indexOf(K[1])).topLeft.x+", 0)"}).each(function(K){var L=g.select(this);K=K[1];
C._writer.write(C._formatter(K.data.name),K.width,C.height(),{xAlign:"left",yAlign:"top",textRotation:0},L.node())});D.exit().remove()});return this};w.prototype.symbol=function(z){if(null==z)return this._symbolFactoryAccessor;this._symbolFactoryAccessor=z;this.render();return this};w.prototype.symbolOpacity=function(){return this._symbolOpacityAccessor};w.prototype.fixedWidth=function(){return!0};w.prototype.fixedHeight=function(){return!0};w.prototype.invalidateCache=function(){this._measurer.reset()};
return w}(b.Component);b.LEGEND_ROW_CLASS="legend-row";b.LEGEND_ENTRY_CLASS="legend-entry";b.LEGEND_SYMBOL_CLASS="legend-symbol";c.Legend=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(2),h=e(0);b=function(l){function n(){return null!==l&&l.apply(this,arguments)||this}f(n,l);n.prototype.entityNearest=function(m){var q,r=Infinity;this.components().forEach(function(v){v=
v.entityNearest(m);if(null!=v){var u=h.Math.distanceSquared(v.position,m);u<=r&&(r=u,q=v)}});return q};n.prototype.append=function(m){if(null!=m&&!(m instanceof g.Plot))throw Error("Plot Group only accepts plots");l.prototype.append.call(this,m);return this};return n}(e(41).Group);c.PlotGroup=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},
g=e(1),h=e(0);b=function(l){function n(m){void 0===m&&(m=[]);var q=l.call(this)||this;q._rowPadding=0;q._columnPadding=0;q._rows=[];q._rowWeights=[];q._columnWeights=[];q._nRows=0;q._nCols=0;q._calculatedLayout=null;q.addClass("table");m.forEach(function(r,v){r.forEach(function(u,w){null!=u&&q.add(u,v,w)})});return q}f(n,l);n.prototype._forEach=function(m){for(var q=0;q<this._nRows;q++)for(var r=0;r<this._nCols;r++)null!=this._rows[q][r]&&m(this._rows[q][r])};n.prototype.has=function(m){for(var q=
0;q<this._nRows;q++)for(var r=0;r<this._nCols;r++)if(this._rows[q][r]===m)return!0;return!1};n.prototype.componentAt=function(m){return 0>=this._nRows||0>m||m>=this._nCols?null:this._rows[0][m]};n.prototype.add=function(m,q,r){if(null==m)throw Error("Cannot add null to a table cell");if(!this.has(m)){if(null!=(this._rows[q]&&this._rows[q][r]))throw Error("cell is occupied");m.detach();this._nRows=Math.max(q+1,this._nRows);this._nCols=Math.max(r+1,this._nCols);this._padTableToSize(this._nRows,this._nCols);
this._rows[q][r]=m;this._adoptAndAnchor(m);this.redraw()}return this};n.prototype._remove=function(m){for(var q=0;q<this._nRows;q++)for(var r=0;r<this._nCols;r++)if(this._rows[q][r]===m){this._rows[q][r]=null;return}};n.prototype._iterateLayout=function(m,q,r){void 0===r&&(r=!1);var v=this._rows,u=g.transpose(this._rows);m-=this._columnPadding*(this._nCols-1);q-=this._rowPadding*(this._nRows-1);v=n._calcComponentWeights(this._rowWeights,v,function(S){return null==S||S.fixedHeight()});u=n._calcComponentWeights(this._columnWeights,
u,function(S){return null==S||S.fixedWidth()});var w=u.map(function(S){return 0===S?.5:S}),z=v.map(function(S){return 0===S?.5:S});w=n._calcProportionalSpace(w,m);var A=n._calcProportionalSpace(z,q),E=h.Array.createFilledArray(0,this._nCols),C=h.Array.createFilledArray(0,this._nRows);z=0;for(var D,J,M;;){C=h.Array.add(C,A);w=h.Array.add(E,w);D=this._determineGuarantees(w,C,r);E=D.guaranteedWidths;C=D.guaranteedHeights;J=D.wantsWidthArr.some(function(S){return S});M=D.wantsHeightArr.some(function(S){return S});
var H=L,K=P;var L=m-g.sum(D.guaranteedWidths);var P=q-g.sum(D.guaranteedHeights);w=void 0;J?(w=D.wantsWidthArr.map(function(S){return S?.1:0}),w=h.Array.add(w,u)):w=u;A=void 0;M?(A=D.wantsHeightArr.map(function(S){return S?.1:0}),A=h.Array.add(A,v)):A=v;w=n._calcProportionalSpace(w,L);A=n._calcProportionalSpace(A,P);z++;K=0<P&&P!==K;if(!(0<L&&L!==H||K))break;if(5<z)break}L=m-g.sum(D.guaranteedWidths);P=q-g.sum(D.guaranteedHeights);w=n._calcProportionalSpace(u,L);A=n._calcProportionalSpace(v,P);return{colProportionalSpace:w,
rowProportionalSpace:A,guaranteedWidths:D.guaranteedWidths,guaranteedHeights:D.guaranteedHeights,wantsWidth:J,wantsHeight:M}};n.prototype._determineGuarantees=function(m,q,r){void 0===r&&(r=!1);var v=h.Array.createFilledArray(0,this._nCols),u=h.Array.createFilledArray(0,this._nRows),w=h.Array.createFilledArray(!1,this._nCols),z=h.Array.createFilledArray(!1,this._nRows);this._rows.forEach(function(A,E){A.forEach(function(C,D){C=null!=C?C.requestedSpace(m[D],q[E]):{minWidth:0,minHeight:0};v[D]=Math.max(v[D],
r?Math.min(C.minWidth,m[D]):C.minWidth);u[E]=Math.max(u[E],r?Math.min(C.minHeight,q[E]):C.minHeight);var J=C.minWidth>m[D];w[D]=w[D]||J;D=C.minHeight>q[E];z[E]=z[E]||D})});return{guaranteedWidths:v,guaranteedHeights:u,wantsWidthArr:w,wantsHeightArr:z}};n.prototype.requestedSpace=function(m,q){this._calculatedLayout=this._iterateLayout(m,q);return{minWidth:g.sum(this._calculatedLayout.guaranteedWidths),minHeight:g.sum(this._calculatedLayout.guaranteedHeights)}};n.prototype.computeLayout=function(m,
q,r){var v=this;l.prototype.computeLayout.call(this,m,q,r);m=g.sum(this._calculatedLayout.guaranteedHeights);q=this._calculatedLayout;if(g.sum(this._calculatedLayout.guaranteedWidths)>this.width()||m>this.height())q=this._iterateLayout(this.width(),this.height(),!0);var u=0,w=h.Array.add(q.rowProportionalSpace,q.guaranteedHeights),z=h.Array.add(q.colProportionalSpace,q.guaranteedWidths);this._rows.forEach(function(A,E){var C=0;A.forEach(function(D,J){null!=D&&D.computeLayout({x:C,y:u},z[J],w[E]);
C+=z[J]+v._columnPadding});u+=w[E]+v._rowPadding});return this};n.prototype.rowPadding=function(m){if(null==m)return this._rowPadding;if(!h.Math.isValidNumber(m)||0>m)throw Error("rowPadding must be a non-negative finite value");this._rowPadding=m;this.redraw();return this};n.prototype.columnPadding=function(m){if(null!=m){if(!h.Math.isValidNumber(m)||0>m)throw Error("columnPadding must be a non-negative finite value");this._columnPadding=m;this.redraw()}};n.prototype.rowWeight=function(m,q){if(null==
q)return this._rowWeights[m];if(!h.Math.isValidNumber(q)||0>q)throw Error("rowWeight must be a non-negative finite value");this._rowWeights[m]=q;this.redraw();return this};n.prototype.columnWeight=function(m,q){if(null==q)return this._columnWeights[m];if(!h.Math.isValidNumber(q)||0>q)throw Error("columnWeight must be a non-negative finite value");this._columnWeights[m]=q;this.redraw();return this};n.prototype.fixedWidth=function(){var m=g.transpose(this._rows);return n._fixedSpace(m,function(q){return null==
q||q.fixedWidth()})};n.prototype.fixedHeight=function(){return n._fixedSpace(this._rows,function(m){return null==m||m.fixedHeight()})};n.prototype._padTableToSize=function(m,q){for(var r=0;r<m;r++){void 0===this._rows[r]&&(this._rows[r]=[],this._rowWeights[r]=null);for(var v=0;v<q;v++)void 0===this._rows[r][v]&&(this._rows[r][v]=null)}for(v=0;v<q;v++)void 0===this._columnWeights[v]&&(this._columnWeights[v]=null)};n._calcComponentWeights=function(m,q,r){return m.map(function(v,u){return null!=v?v:
q[u].map(r).reduce(function(w,z){return w&&z},!0)?0:1})};n._calcProportionalSpace=function(m,q){var r=g.sum(m);return 0===r?h.Array.createFilledArray(0,m.length):m.map(function(v){return q*v/r})};n._fixedSpace=function(m,q){function r(v){return v.reduce(function(u,w){return u&&w},!0)}return r(m.map(function(v){return r(v.map(q))}))};return n}(e(29).ComponentContainer);c.Table=b},function(b,c,e){var f=this&&this.__extends||function(g,h){function l(){this.constructor=g}for(var n in h)h.hasOwnProperty(n)&&
(g[n]=h[n]);g.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)};b=function(g){function h(){var l=g.call(this)||this;l.addClass("x-drag-box-layer");l._hasCorners=!1;return l}f(h,g);h.prototype.computeLayout=function(l,n,m){g.prototype.computeLayout.call(this,l,n,m);this._setBounds(this.bounds());return this};h.prototype._setBounds=function(l){g.prototype._setBounds.call(this,{topLeft:{x:l.topLeft.x,y:0},bottomRight:{x:l.bottomRight.x,y:this.height()}})};h.prototype._setResizableClasses=
function(l){l&&this.enabled()?this.addClass("x-resizable"):this.removeClass("x-resizable")};h.prototype.yScale=function(l){if(null==l)return g.prototype.yScale.call(this);throw Error("yScales cannot be set on an XDragBoxLayer");};h.prototype.yExtent=function(){return g.prototype.yExtent.call(this);throw Error("XDragBoxLayer has no yExtent");};return h}(e(32).DragBoxLayer);c.XDragBoxLayer=b},function(b,c,e){var f=this&&this.__extends||function(g,h){function l(){this.constructor=g}for(var n in h)h.hasOwnProperty(n)&&
(g[n]=h[n]);g.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)};b=function(g){function h(){var l=g.call(this)||this;l.addClass("y-drag-box-layer");l._hasCorners=!1;return l}f(h,g);h.prototype.computeLayout=function(l,n,m){g.prototype.computeLayout.call(this,l,n,m);this._setBounds(this.bounds());return this};h.prototype._setBounds=function(l){g.prototype._setBounds.call(this,{topLeft:{x:0,y:l.topLeft.y},bottomRight:{x:this.width(),y:l.bottomRight.y}})};h.prototype._setResizableClasses=
function(l){l&&this.enabled()?this.addClass("y-resizable"):this.removeClass("y-resizable")};h.prototype.xScale=function(l){if(null==l)return g.prototype.xScale.call(this);throw Error("xScales cannot be set on an YDragBoxLayer");};h.prototype.xExtent=function(){return g.prototype.xExtent.call(this);throw Error("YDragBoxLayer has no xExtent");};return h}(e(32).DragBoxLayer);c.YDragBoxLayer=b},function(b,c,e){var f=this&&this.__extends||function(g,h){function l(){this.constructor=g}for(var n in h)h.hasOwnProperty(n)&&
(g[n]=h[n]);g.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)};b=function(g){function h(){var l=g.call(this)||this;l._eventToProcessingFunction[h._KEYDOWN_EVENT_NAME]=function(n){return l._processKeydown(n)};l._eventToProcessingFunction[h._KEYUP_EVENT_NAME]=function(n){return l._processKeyup(n)};return l}f(h,g);h.getDispatcher=function(){var l=document[h._DISPATCHER_KEY];null==l&&(l=new h,document[h._DISPATCHER_KEY]=l);return l};h.prototype._processKeydown=function(l){this._callCallbacksForEvent(h._KEYDOWN_EVENT_NAME,
l.keyCode,l)};h.prototype._processKeyup=function(l){this._callCallbacksForEvent(h._KEYUP_EVENT_NAME,l.keyCode,l)};h.prototype.onKeyDown=function(l){this._addCallbackForEvent(h._KEYDOWN_EVENT_NAME,l);return this};h.prototype.offKeyDown=function(l){this._removeCallbackForEvent(h._KEYDOWN_EVENT_NAME,l)};h.prototype.onKeyUp=function(l){this._addCallbackForEvent(h._KEYUP_EVENT_NAME,l);return this};h.prototype.offKeyUp=function(l){this._removeCallbackForEvent(h._KEYUP_EVENT_NAME,l)};return h}(e(24).Dispatcher);
b._DISPATCHER_KEY="__Plottable_Dispatcher_Key";b._KEYDOWN_EVENT_NAME="keydown";b._KEYUP_EVENT_NAME="keyup";c.Key=b},function(b,c,e){var f=this&&this.__extends||function(h,l){function n(){this.constructor=h}for(var m in l)l.hasOwnProperty(m)&&(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)},g=e(0);b=function(h){function l(n){function m(r){return q._measureAndDispatch(n,r,l._MOUSEMOVE_EVENT_NAME,"page")}var q=h.call(this)||this;q._lastMousePosition={x:-1,y:-1};q._translator=
g.getTranslator(n);q._eventToProcessingFunction[l._MOUSEOVER_EVENT_NAME]=m;q._eventToProcessingFunction[l._MOUSEMOVE_EVENT_NAME]=m;q._eventToProcessingFunction[l._MOUSEOUT_EVENT_NAME]=m;q._eventToProcessingFunction[l._MOUSEDOWN_EVENT_NAME]=function(r){return q._measureAndDispatch(n,r,l._MOUSEDOWN_EVENT_NAME)};q._eventToProcessingFunction[l._MOUSEUP_EVENT_NAME]=function(r){return q._measureAndDispatch(n,r,l._MOUSEUP_EVENT_NAME,"page")};q._eventToProcessingFunction[l._WHEEL_EVENT_NAME]=function(r){return q._measureAndDispatch(n,
r,l._WHEEL_EVENT_NAME)};q._eventToProcessingFunction[l._DBLCLICK_EVENT_NAME]=function(r){return q._measureAndDispatch(n,r,l._DBLCLICK_EVENT_NAME)};return q}f(l,h);l.getDispatcher=function(n){var m=n.root().rootElement(),q=m[l._DISPATCHER_KEY];null==q&&(q=new l(n),m[l._DISPATCHER_KEY]=q);return q};l.prototype.onMouseMove=function(n){this._addCallbackForEvent(l._MOUSEMOVE_EVENT_NAME,n);return this};l.prototype.offMouseMove=function(n){this._removeCallbackForEvent(l._MOUSEMOVE_EVENT_NAME,n)};l.prototype.onMouseDown=
function(n){this._addCallbackForEvent(l._MOUSEDOWN_EVENT_NAME,n);return this};l.prototype.offMouseDown=function(n){this._removeCallbackForEvent(l._MOUSEDOWN_EVENT_NAME,n)};l.prototype.onMouseUp=function(n){this._addCallbackForEvent(l._MOUSEUP_EVENT_NAME,n);return this};l.prototype.offMouseUp=function(n){this._removeCallbackForEvent(l._MOUSEUP_EVENT_NAME,n)};l.prototype.onWheel=function(n){this._addCallbackForEvent(l._WHEEL_EVENT_NAME,n);return this};l.prototype.offWheel=function(n){this._removeCallbackForEvent(l._WHEEL_EVENT_NAME,
n)};l.prototype.onDblClick=function(n){this._addCallbackForEvent(l._DBLCLICK_EVENT_NAME,n)};l.prototype.offDblClick=function(n){this._removeCallbackForEvent(l._DBLCLICK_EVENT_NAME,n)};l.prototype._measureAndDispatch=function(n,m,q,r){void 0===r&&(r="element");if("page"!==r&&"element"!==r)throw Error("Invalid scope '"+r+"', must be 'element' or 'page'");if("page"===r||this.eventInside(n,m))this._lastMousePosition=this._translator.computePosition(m.clientX,m.clientY),this._callCallbacksForEvent(q,this.lastMousePosition(),
m)};l.prototype.eventInside=function(n,m){return g.Translator.isEventInside(n,m)};l.prototype.lastMousePosition=function(){return this._lastMousePosition};return l}(e(24).Dispatcher);b._DISPATCHER_KEY="__Plottable_Dispatcher_Mouse";b._MOUSEOVER_EVENT_NAME="mouseover";b._MOUSEMOVE_EVENT_NAME="mousemove";b._MOUSEOUT_EVENT_NAME="mouseout";b._MOUSEDOWN_EVENT_NAME="mousedown";b._MOUSEUP_EVENT_NAME="mouseup";b._WHEEL_EVENT_NAME="wheel";b._DBLCLICK_EVENT_NAME="dblclick";c.Mouse=b},function(b,c,e){var f=
this&&this.__extends||function(h,l){function n(){this.constructor=h}for(var m in l)l.hasOwnProperty(m)&&(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)},g=e(0);b=function(h){function l(n){var m=h.call(this)||this;m._translator=g.getTranslator(n);m._eventToProcessingFunction[l._TOUCHSTART_EVENT_NAME]=function(q){return m._measureAndDispatch(n,q,l._TOUCHSTART_EVENT_NAME,"page")};m._eventToProcessingFunction[l._TOUCHMOVE_EVENT_NAME]=function(q){return m._measureAndDispatch(n,
q,l._TOUCHMOVE_EVENT_NAME,"page")};m._eventToProcessingFunction[l._TOUCHEND_EVENT_NAME]=function(q){return m._measureAndDispatch(n,q,l._TOUCHEND_EVENT_NAME,"page")};m._eventToProcessingFunction[l._TOUCHCANCEL_EVENT_NAME]=function(q){return m._measureAndDispatch(n,q,l._TOUCHCANCEL_EVENT_NAME,"page")};return m}f(l,h);l.getDispatcher=function(n){var m=n.root().rootElement(),q=m[l._DISPATCHER_KEY];null==q&&(q=new l(n),m[l._DISPATCHER_KEY]=q);return q};l.prototype.onTouchStart=function(n){this._addCallbackForEvent(l._TOUCHSTART_EVENT_NAME,
n)};l.prototype.offTouchStart=function(n){this._removeCallbackForEvent(l._TOUCHSTART_EVENT_NAME,n)};l.prototype.onTouchMove=function(n){this._addCallbackForEvent(l._TOUCHMOVE_EVENT_NAME,n)};l.prototype.offTouchMove=function(n){this._removeCallbackForEvent(l._TOUCHMOVE_EVENT_NAME,n)};l.prototype.onTouchEnd=function(n){this._addCallbackForEvent(l._TOUCHEND_EVENT_NAME,n)};l.prototype.offTouchEnd=function(n){this._removeCallbackForEvent(l._TOUCHEND_EVENT_NAME,n)};l.prototype.onTouchCancel=function(n){this._addCallbackForEvent(l._TOUCHCANCEL_EVENT_NAME,
n)};l.prototype.offTouchCancel=function(n){this._removeCallbackForEvent(l._TOUCHCANCEL_EVENT_NAME,n)};l.prototype._measureAndDispatch=function(n,m,q,r){void 0===r&&(r="element");if("page"!==r&&"element"!==r)throw Error("Invalid scope '"+r+"', must be 'element' or 'page'");if("element"!==r||this.eventInside(n,m)){n=m.changedTouches;r={};for(var v=[],u=0;u<n.length;u++){var w=n[u],z=w.identifier;w=this._translator.computePosition(w.clientX,w.clientY);null!=w&&(r[z]=w,v.push(z))}0<v.length&&this._callCallbacksForEvent(q,
v,r,m)}};l.prototype.eventInside=function(n,m){return g.Translator.isEventInside(n,m)};return l}(e(24).Dispatcher);b._DISPATCHER_KEY="__Plottable_Dispatcher_Touch";b._TOUCHSTART_EVENT_NAME="touchstart";b._TOUCHMOVE_EVENT_NAME="touchmove";b._TOUCHEND_EVENT_NAME="touchend";b._TOUCHCANCEL_EVENT_NAME="touchcancel";c.Touch=b},function(b,c){b=function(){function e(f,g,h){void 0===h&&(h=window.devicePixelRatio);this.screenWidth=f;this.screenHeight=g;this.devicePixelRatio=h;this.pixelWidth=f*h;this.pixelHeight=
g*h;this.canvas=document.createElement("canvas");this.ctx=this.canvas.getContext("2d");e.sizePixels(this.ctx,f,g,h)}e.sizePixels=function(f,g,h,l){var n=f.canvas;n.width=g*l;n.height=h*l;n.style.width=g+"px";n.style.height=h+"px";f.setTransform(1,0,0,1,0,0);f.scale(l,l)};e.prototype.blit=function(f,g,h){void 0===g&&(g=0);void 0===h&&(h=0);f.drawImage(this.canvas,g,h,this.screenWidth,this.screenHeight)};e.prototype.blitCenter=function(f,g,h){void 0===g&&(g=0);void 0===h&&(h=0);this.blit(f,Math.floor(g-
this.screenWidth/2),Math.floor(h-this.screenHeight/2))};e.prototype.resize=function(f,g,h){void 0===h&&(h=!1);var l=this.devicePixelRatio;this.screenWidth=f;this.screenHeight=g;this.pixelWidth=f*l;this.pixelHeight=g*l;e.sizePixels(this.ctx,f,g,l);h&&this.ctx.translate(f/2,f/2);return this};e.prototype.clear=function(f){var g=this.pixelWidth,h=this.pixelHeight,l=this.ctx;l.save();l.setTransform(1,0,0,1,0,0);null==f?l.clearRect(0,0,g,h):(l.fillStyle=f,l.fillRect(0,0,g,h));l.restore();return this};e.prototype.getImageData=
function(){return this.ctx.getImageData(0,0,this.pixelWidth,this.pixelHeight)};return e}();c.CanvasBuffer=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(13),h=e(0);b=function(l){function n(){var m=null!==l&&l.apply(this,arguments)||this;m._clickedDown=!1;m._doubleClicking=!1;m._onClickCallbacks=new h.CallbackSet;m._onDoubleClickCallbacks=
new h.CallbackSet;m._mouseDownCallback=function(q){return m._handleClickDown(q)};m._mouseUpCallback=function(q,r){return m._handleClickUp(q,r)};m._dblClickCallback=function(q,r){return m._handleDblClick(q,r)};m._touchStartCallback=function(q,r){return m._handleClickDown(r[q[0]])};m._touchEndCallback=function(q,r,v){return m._handleClickUp(r[q[0]],v)};m._touchCancelCallback=function(){return m._clickedDown=!1};return m}f(n,l);n.prototype._anchor=function(m){l.prototype._anchor.call(this,m);this._mouseDispatcher=
g.Mouse.getDispatcher(m);this._mouseDispatcher.onMouseDown(this._mouseDownCallback);this._mouseDispatcher.onMouseUp(this._mouseUpCallback);this._mouseDispatcher.onDblClick(this._dblClickCallback);this._touchDispatcher=g.Touch.getDispatcher(m);this._touchDispatcher.onTouchStart(this._touchStartCallback);this._touchDispatcher.onTouchEnd(this._touchEndCallback);this._touchDispatcher.onTouchCancel(this._touchCancelCallback)};n.prototype._unanchor=function(){l.prototype._unanchor.call(this);this._mouseDispatcher.offMouseDown(this._mouseDownCallback);
this._mouseDispatcher.offMouseUp(this._mouseUpCallback);this._mouseDispatcher.offDblClick(this._dblClickCallback);this._mouseDispatcher=null;this._touchDispatcher.offTouchStart(this._touchStartCallback);this._touchDispatcher.offTouchEnd(this._touchEndCallback);this._touchDispatcher.offTouchCancel(this._touchCancelCallback);this._touchDispatcher=null};n.prototype._handleClickDown=function(m){m=this._translateToComponentSpace(m);this._isInsideComponent(m)&&(this._clickedDown=!0,this._clickedPoint=m)};
n.prototype._handleClickUp=function(m,q){var r=this,v=this._translateToComponentSpace(m);this._clickedDown&&n._pointsEqual(v,this._clickedPoint)&&setTimeout(function(){r._doubleClicking||r._onClickCallbacks.callCallbacks(v,q)},0);this._clickedDown=!1};n.prototype._handleDblClick=function(m,q){var r=this;m=this._translateToComponentSpace(m);this._doubleClicking=!0;this._onDoubleClickCallbacks.callCallbacks(m,q);setTimeout(function(){return r._doubleClicking=!1},0)};n._pointsEqual=function(m,q){return m.x===
q.x&&m.y===q.y};n.prototype.onClick=function(m){this._onClickCallbacks.add(m);return this};n.prototype.offClick=function(m){this._onClickCallbacks.delete(m)};n.prototype.onDoubleClick=function(m){this._onDoubleClickCallbacks.add(m)};n.prototype.offDoubleClick=function(m){this._onDoubleClickCallbacks.delete(m);return this};return n}(e(15).Interaction);c.Click=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);
l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(13),h=e(0);b=function(l){function n(){var m=null!==l&&l.apply(this,arguments)||this;m._dragging=!1;m._constrainedToComponent=!0;m._mouseFilter=n._DEFAULT_MOUSE_FILTER;m._dragStartCallbacks=new h.CallbackSet;m._dragCallbacks=new h.CallbackSet;m._dragEndCallbacks=new h.CallbackSet;m._mouseDownCallback=function(q,r){return m._startDrag(q,r)};m._mouseMoveCallback=function(q){return m._doDrag(q)};m._mouseUpCallback=function(q,r){return m._endDrag(q,
r)};m._touchStartCallback=function(q,r,v){return m._startDrag(r[q[0]],v)};m._touchMoveCallback=function(q,r){return m._doDrag(r[q[0]])};m._touchEndCallback=function(q,r,v){return m._endDrag(r[q[0]],v)};return m}f(n,l);n.prototype._anchor=function(m){l.prototype._anchor.call(this,m);this._mouseDispatcher=g.Mouse.getDispatcher(this._componentAttachedTo);this._mouseDispatcher.onMouseDown(this._mouseDownCallback);this._mouseDispatcher.onMouseMove(this._mouseMoveCallback);this._mouseDispatcher.onMouseUp(this._mouseUpCallback);
this._touchDispatcher=g.Touch.getDispatcher(this._componentAttachedTo);this._touchDispatcher.onTouchStart(this._touchStartCallback);this._touchDispatcher.onTouchMove(this._touchMoveCallback);this._touchDispatcher.onTouchEnd(this._touchEndCallback)};n.prototype._unanchor=function(){l.prototype._unanchor.call(this);this._mouseDispatcher.offMouseDown(this._mouseDownCallback);this._mouseDispatcher.offMouseMove(this._mouseMoveCallback);this._mouseDispatcher.offMouseUp(this._mouseUpCallback);this._mouseDispatcher=
null;this._touchDispatcher.offTouchStart(this._touchStartCallback);this._touchDispatcher.offTouchMove(this._touchMoveCallback);this._touchDispatcher.offTouchEnd(this._touchEndCallback);this._touchDispatcher=null};n.prototype._translateAndConstrain=function(m){m=this._translateToComponentSpace(m);return this._constrainedToComponent?{x:h.Math.clamp(m.x,0,this._componentAttachedTo.width()),y:h.Math.clamp(m.y,0,this._componentAttachedTo.height())}:m};n.prototype._startDrag=function(m,q){q instanceof MouseEvent&&
!this._mouseFilter(q)||(m=this._translateToComponentSpace(m),this._isInsideComponent(m)&&(q.preventDefault(),this._dragging=!0,this._dragOrigin=m,this._dragStartCallbacks.callCallbacks(this._dragOrigin)))};n.prototype._doDrag=function(m){this._dragging&&this._dragCallbacks.callCallbacks(this._dragOrigin,this._translateAndConstrain(m))};n.prototype._endDrag=function(m,q){q instanceof MouseEvent&&0!==q.button||!this._dragging||(this._dragging=!1,this._dragEndCallbacks.callCallbacks(this._dragOrigin,
this._translateAndConstrain(m)))};n.prototype.constrainedToComponent=function(){this._constrainedToComponent=!1};n.prototype.mouseFilter=function(m){0!==arguments.length&&(this._mouseFilter=m)};n.prototype.onDragStart=function(m){this._dragStartCallbacks.add(m)};n.prototype.offDragStart=function(m){this._dragStartCallbacks.delete(m)};n.prototype.onDrag=function(m){this._dragCallbacks.add(m)};n.prototype.offDrag=function(m){this._dragCallbacks.delete(m)};n.prototype.onDragEnd=function(m){this._dragEndCallbacks.add(m)};
n.prototype.offDragEnd=function(m){this._dragEndCallbacks.delete(m)};return n}(e(15).Interaction);b._DEFAULT_MOUSE_FILTER=function(l){return 0===l.button};c.Drag=b},function(b,c,e){var f=this&&this.__extends||function(r,v){function u(){this.constructor=r}for(var w in v)v.hasOwnProperty(w)&&(r[w]=v[w]);r.prototype=null===v?Object.create(v):(u.prototype=v.prototype,new u)},g=e(1),h=e(13),l=e(3),n=e(0),m=e(25);b=e(15);var q=e(26);e=function(r){function v(u,w){var z=r.call(this)||this;z._wheelFilter=
function(){return!0};z._wheelCallback=function(A,E){return z._handleWheelEvent(A,E)};z._touchStartCallback=function(A,E){return z._handleTouchStart(A,E)};z._touchMoveCallback=function(A,E){return z._handlePinch(A,E)};z._touchEndCallback=function(A){return z._handleTouchEnd(A)};z._touchCancelCallback=function(A){return z._handleTouchEnd(A)};z._panEndCallbacks=new n.CallbackSet;z._zoomEndCallbacks=new n.CallbackSet;z._panZoomUpdateCallbacks=new n.CallbackSet;z._xScales=new n.Set;z._yScales=new n.Set;
z._dragInteraction=new m.Drag;z._setupDragInteraction();z._touchIds=g.map();z._minDomainExtents=new n.Map;z._maxDomainExtents=new n.Map;z._minDomainValues=new n.Map;z._maxDomainValues=new n.Map;null!=u&&z.addXScale(u);null!=w&&z.addYScale(w);return z}f(v,r);v.prototype.dragInteraction=function(){return this._dragInteraction};v.prototype.wheelFilter=function(u){0!==arguments.length&&(this._wheelFilter=u)};v.prototype.pan=function(u){var w=this;this.xScales().forEach(function(z){z.pan(w._constrainedTranslation(z,
u.x))});this.yScales().forEach(function(z){z.pan(w._constrainedTranslation(z,u.y))});this._panZoomUpdateCallbacks.callCallbacks()};v.prototype.zoom=function(u,w,z){var A=this;void 0===z&&(z=!0);if(null!=w){var E=w.x;var C=w.y;z&&(this.xScales().forEach(function(D){D=A._constrainedZoom(D,u,E);E=D.centerPoint;u=D.zoomAmount}),this.yScales().forEach(function(D){D=A._constrainedZoom(D,u,C);C=D.centerPoint;u=D.zoomAmount}))}this.xScales().forEach(function(D){var J=D.range();D.zoom(u,null==E?(J[1]+J[0])/
2:E)});this.yScales().forEach(function(D){var J=D.range();D.zoom(u,null==C?(J[1]+J[0])/2:C)});this._panZoomUpdateCallbacks.callCallbacks();return{zoomAmount:u,centerValue:{centerX:E,centerY:C}}};v.prototype._anchor=function(u){r.prototype._anchor.call(this,u);this._dragInteraction.attachTo(u);this._mouseDispatcher=h.Mouse.getDispatcher(this._componentAttachedTo);this._mouseDispatcher.onWheel(this._wheelCallback);this._touchDispatcher=h.Touch.getDispatcher(this._componentAttachedTo);this._touchDispatcher.onTouchStart(this._touchStartCallback);
this._touchDispatcher.onTouchMove(this._touchMoveCallback);this._touchDispatcher.onTouchEnd(this._touchEndCallback);this._touchDispatcher.onTouchCancel(this._touchCancelCallback)};v.prototype._unanchor=function(){r.prototype._unanchor.call(this);this._mouseDispatcher.offWheel(this._wheelCallback);this._mouseDispatcher=null;this._touchDispatcher.offTouchStart(this._touchStartCallback);this._touchDispatcher.offTouchMove(this._touchMoveCallback);this._touchDispatcher.offTouchEnd(this._touchEndCallback);
this._touchDispatcher.offTouchCancel(this._touchCancelCallback);this._touchDispatcher=null;this._dragInteraction.detach()};v.prototype._handleTouchStart=function(u,w){for(var z=0;z<u.length&&2>this._touchIds.size();z++){var A=u[z];this._touchIds.set(A.toString(),this._translateToComponentSpace(w[A]))}};v.prototype._handlePinch=function(u,w){var z=this;if(!(2>this._touchIds.size())){var A=this._touchIds.values();if(this._isInsideComponent(this._translateToComponentSpace(A[0]))&&this._isInsideComponent(this._translateToComponentSpace(A[1]))){var E=
v._pointDistance(A[0],A[1]);if(0!==E){u.forEach(function(H){z._touchIds.has(H.toString())&&z._touchIds.set(H.toString(),z._translateToComponentSpace(w[H]))});u=this._touchIds.values();var C=v._pointDistance(u[0],u[1]);if(0!==C){var D=E/C,J=u.map(function(H,K){return{x:(H.x-A[K].x)/D,y:(H.y-A[K].y)/D}});E=v.centerPoint(A[0],A[1]);E=this.zoom(D,E);u=E.centerValue;var M=E.zoomAmount;E=u.centerX;u=u.centerY;C=A.map(function(H,K){return{x:J[K].x*M+H.x,y:J[K].y*M+H.y}});this.pan({x:E-(C[0].x+C[1].x)/2,
y:u-(C[0].y+C[1].y)/2})}}}}};v.centerPoint=function(u,w){return{x:(Math.min(u.x,w.x)+Math.max(u.x,w.x))/2,y:(Math.max(u.y,w.y)+Math.min(u.y,w.y))/2}};v._pointDistance=function(u,w){return Math.sqrt(Math.pow(Math.max(u.x,w.x)-Math.min(u.x,w.x),2)+Math.pow(Math.max(u.y,w.y)-Math.min(u.y,w.y),2))};v.prototype._handleTouchEnd=function(u){var w=this;u.forEach(function(z){w._touchIds.remove(z.toString())});0<this._touchIds.size()&&this._zoomEndCallbacks.callCallbacks()};v.prototype._handleWheelEvent=function(u,
w){this._wheelFilter(w)&&(u=this._translateToComponentSpace(u),this._isInsideComponent(u)&&(w.preventDefault(),this.zoom(Math.pow(2,(0!==w.deltaY?w.deltaY:w.deltaX)*(w.deltaMode?v._PIXELS_PER_LINE:1)*.002),u),this._zoomEndCallbacks.callCallbacks()))};v.prototype._constrainedZoom=function(u,w,z){return q.constrainedZoom(u,w,z,this.minDomainExtent(u),this.maxDomainExtent(u),this.minDomainValue(u),this.maxDomainValue(u))};v.prototype._constrainedTranslation=function(u,w){return q.constrainedTranslation(u,
w,this.minDomainValue(u),this.maxDomainValue(u))};v.prototype._setupDragInteraction=function(){var u=this;this._dragInteraction.constrainedToComponent();var w;this._dragInteraction.onDragStart(function(){return w=null});this._dragInteraction.onDrag(function(z,A){2<=u._touchIds.size()||(u.pan({x:(null==w?z.x:w.x)-A.x,y:(null==w?z.y:w.y)-A.y}),w=A)});this._dragInteraction.onDragEnd(function(){return u._panEndCallbacks.callCallbacks()})};v.prototype._nonLinearScaleWithExtents=function(u){return null!=
this.minDomainExtent(u)&&null!=this.maxDomainExtent(u)&&!(u instanceof l.Linear)&&!(u instanceof l.Time)};v.prototype.xScales=function(){var u=[];this._xScales.forEach(function(w){u.push(w)});return u};v.prototype.yScales=function(){var u=[];this._yScales.forEach(function(w){u.push(w)});return u};v.prototype.addXScale=function(u){this._xScales.add(u)};v.prototype.removeXScale=function(u){this._xScales.delete(u);this._minDomainExtents.delete(u);this._maxDomainExtents.delete(u);this._minDomainValues.delete(u);
this._maxDomainValues.delete(u);return this};v.prototype.addYScale=function(u){this._yScales.add(u)};v.prototype.removeYScale=function(u){this._yScales.delete(u);this._minDomainExtents.delete(u);this._maxDomainExtents.delete(u);this._minDomainValues.delete(u);this._maxDomainValues.delete(u);return this};v.prototype.minDomainExtent=function(u){return this._minDomainExtents.get(u)};v.prototype.maxDomainExtent=function(u){return this._maxDomainExtents.get(u)};v.prototype.minDomainValue=function(u,w){if(null==
w)return this._minDomainValues.get(u);this._minDomainValues.set(u,w);return this};v.prototype.maxDomainValue=function(u,w){if(null==w)return this._maxDomainValues.get(u);this._maxDomainValues.set(u,w);return this};v.prototype.setMinMaxDomainValuesTo=function(u){this._minDomainValues.delete(u);this._maxDomainValues.delete(u);var w=u.getTransformationDomain(),z=w[1];this.minDomainValue(u,w[0]);this.maxDomainValue(u,z);return this};v.prototype.onPanEnd=function(u){this._panEndCallbacks.add(u)};v.prototype.offPanEnd=
function(u){this._panEndCallbacks.delete(u);return this};v.prototype.onZoomEnd=function(u){this._zoomEndCallbacks.add(u)};v.prototype.offZoomEnd=function(u){this._zoomEndCallbacks.delete(u);return this};v.prototype.onPanZoomUpdate=function(u){this._panZoomUpdateCallbacks.add(u);return this};v.prototype.offPanZoomUpdate=function(u){this._panZoomUpdateCallbacks.delete(u);return this};return v}(b.Interaction);e._PIXELS_PER_LINE=120;c.PanZoom=e},function(b,c,e){var f=this&&this.__extends||function(l,
n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(13),h=e(0);b=function(l){function n(){var m=null!==l&&l.apply(this,arguments)||this;m._overComponent=!1;m._pointerEnterCallbacks=new h.CallbackSet;m._pointerMoveCallbacks=new h.CallbackSet;m._pointerExitCallbacks=new h.CallbackSet;m._mouseMoveCallback=function(q,r){return m._handleMouseEvent(q,r)};m._touchStartCallback=function(q,r,v){return m._handleTouchEvent(r[q[0]],
v)};return m}f(n,l);n.prototype._anchor=function(m){l.prototype._anchor.call(this,m);this._mouseDispatcher=g.Mouse.getDispatcher(this._componentAttachedTo);this._mouseDispatcher.onMouseMove(this._mouseMoveCallback);this._touchDispatcher=g.Touch.getDispatcher(this._componentAttachedTo);this._touchDispatcher.onTouchStart(this._touchStartCallback)};n.prototype._unanchor=function(){l.prototype._unanchor.call(this);this._mouseDispatcher.offMouseMove(this._mouseMoveCallback);this._mouseDispatcher=null;
this._touchDispatcher.offTouchStart(this._touchStartCallback);this._touchDispatcher=null};n.prototype._handleMouseEvent=function(m,q){q=this._mouseDispatcher.eventInside(this._componentAttachedTo,q);this._handlePointerEvent(m,q)};n.prototype._handleTouchEvent=function(m,q){q=this._touchDispatcher.eventInside(this._componentAttachedTo,q);this._handlePointerEvent(m,q)};n.prototype._handlePointerEvent=function(m,q){m=this._translateToComponentSpace(m);var r=this._isInsideComponent(m);r&&q?(this._overComponent||
this._pointerEnterCallbacks.callCallbacks(m),this._pointerMoveCallbacks.callCallbacks(m)):this._overComponent&&this._pointerExitCallbacks.callCallbacks(m);this._overComponent=r&&q};n.prototype.onPointerEnter=function(m){this._pointerEnterCallbacks.add(m);return this};n.prototype.offPointerEnter=function(m){this._pointerEnterCallbacks.delete(m);return this};n.prototype.onPointerMove=function(m){this._pointerMoveCallbacks.add(m)};n.prototype.offPointerMove=function(m){this._pointerMoveCallbacks.delete(m)};
n.prototype.onPointerExit=function(m){this._pointerExitCallbacks.add(m)};n.prototype.offPointerExit=function(m){this._pointerExitCallbacks.delete(m);return this};return n}(e(15).Interaction);c.Pointer=b},function(b,c,e){var f=e(20);c.memThunk=function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];var l=g.slice(0,-1),n=f.memoize(g[g.length-1]);return function(){var m=this,q=l.map(function(r){return r.apply(m)});return n.apply(void 0,q)}}},function(b,c,e){var f=e(49);c.memoize=function(g){function h(){for(var r=
[],v=0;v<arguments.length;v++)r[v]=arguments[v];if(m)return n;v=f.signArray(r);void 0===l||l.isDifferent(v)?(q&&console.log("cache miss! computing"),l=v,n=g.apply(this,r)):q&&console.log("cache hit!");return n}var l=void 0,n,m=!1,q=!1;h.doLocked=function(r){if(m)throw Error("Locking an already locked memoize function!");m=!0;r=r.apply(this);m=!1;return r};h.logPerformance=function(r){void 0===r&&(r=!0);q=r;return this};return h}},function(b,c,e){var f=this&&this.__extends||function(m,q){function r(){this.constructor=
m}for(var v in q)q.hasOwnProperty(v)&&(m[v]=q[v]);m.prototype=null===q?Object.create(q):(r.prototype=q.prototype,new r)},g=e(3),h=e(0),l=e(27),n=e(2);b=function(m){function q(r){void 0===r&&(r="vertical");r=m.call(this,r)||this;r._clusterOffsets=new h.Map;return r}f(q,m);q.prototype._generateAttrToProjector=function(){function r(){return w.rangeBand()}var v=this,u=m.prototype._generateAttrToProjector.call(this),w=this._makeInnerScale();u.width=this._isVertical?r:u.width;u.height=this._isVertical?
u.height:r;var z=u.x,A=u.y;u.x=this._isVertical?function(E,C,D){return z(E,C,D)+v._clusterOffsets.get(D)}:function(E,C,D){return z(E,C,D)};u.y=this._isVertical?function(E,C,D){return A(E,C,D)}:function(E,C,D){return A(E,C,D)+v._clusterOffsets.get(D)};return u};q.prototype._updateClusterPosition=function(){var r=this,v=this._makeInnerScale();this.datasets().forEach(function(u,w){return r._clusterOffsets.set(u,v.scale(String(w))-v.rangeBand()/2)})};q.prototype._makeInnerScale=function(){var r=new g.Category;
r.domain(this.datasets().map(function(u,w){return String(w)}));var v=n.Plot._scaledAccessor(this.attr(l.Bar._BAR_THICKNESS_KEY));r.range([0,v(null,0,null)]);return r};q.prototype._getDataToDraw=function(){this._updateClusterPosition();return m.prototype._getDataToDraw.call(this)};return q}(l.Bar);c.ClusteredBar=b},function(b,c,e){var f=this&&this.__extends||function(A,E){function C(){this.constructor=A}for(var D in E)E.hasOwnProperty(D)&&(A[D]=E[D]);A.prototype=null===E?Object.create(E):(C.prototype=
E.prototype,new C)},g=e(1),h=e(5),l=e(7),n=e(8),m=e(3),q=e(0),r=e(44),v=e(45),u=e(6),w=e(35),z=e(2);b=function(A){function E(){var C=A.call(this)||this;C._startAngle=0;C._endAngle=2*Math.PI;C._labelFormatter=n.identity();C._labelsEnabled=!1;C.innerRadius(0);C.outerRadius(function(){var D=C._pieCenter();return Math.min(Math.max(C.width()-D.x,D.x),Math.max(C.height()-D.y,D.y))});C.addClass("pie-plot");C.attr("fill",function(D,J){return String(J)},new m.Color);C._strokeDrawers=new q.Map;return C}f(E,
A);E.prototype._setup=function(){var C=this;A.prototype._setup.call(this);this._strokeDrawers.forEach(function(D){return D.attachTo(C._renderArea)})};E.prototype.computeLayout=function(C,D,J){A.prototype.computeLayout.call(this,C,D,J);C=this._pieCenter();this._renderArea.attr("transform","translate("+C.x+","+C.y+")");C=Math.min(Math.max(this.width()-C.x,C.x),Math.max(this.height()-C.y,C.y));null!=this.innerRadius().scale&&this.innerRadius().scale.range([0,C]);null!=this.outerRadius().scale&&this.outerRadius().scale.range([0,
C]);return this};E.prototype.addDataset=function(C){A.prototype.addDataset.call(this,C);return this};E.prototype._addDataset=function(C){if(1===this.datasets().length)return q.Window.warn("Only one dataset is supported in Pie plots"),this;this._updatePieAngles();var D=new v.ArcOutlineSVGDrawer;this._isSetup&&D.attachTo(this._renderArea);this._strokeDrawers.set(C,D);A.prototype._addDataset.call(this,C);return this};E.prototype.removeDataset=function(C){A.prototype.removeDataset.call(this,C)};E.prototype._removeDatasetNodes=
function(C){A.prototype._removeDatasetNodes.call(this,C);this._strokeDrawers.get(C).remove()};E.prototype._removeDataset=function(C){A.prototype._removeDataset.call(this,C);this._startAngles=[];this._endAngles=[];return this};E.prototype.selections=function(C){var D=this;void 0===C&&(C=this.datasets());var J=A.prototype.selections.call(this,C).nodes();C.forEach(function(M){M=D._strokeDrawers.get(M);null!=M&&J.push.apply(J,M.getVisualPrimitives())});return g.selectAll(J)};E.prototype._onDatasetUpdate=
function(){A.prototype._onDatasetUpdate.call(this);this._updatePieAngles();this.render()};E.prototype._createDrawer=function(){return new u.ProxyDrawer(function(){return new r.ArcSVGDrawer},function(){w.warn("canvas renderer is not supported on Pie Plot!");return null})};E.prototype.entities=function(C){var D=this;void 0===C&&(C=this.datasets());return A.prototype.entities.call(this,C).map(function(J){J.position.x+=D.width()/2;J.position.y+=D.height()/2;var M=g.select(D._strokeDrawers.get(J.dataset).getVisualPrimitiveAtIndex(J.index));
J.strokeSelection=M;return J})};E.prototype.sectorValue=function(C){if(null==C)return this._propertyBindings.get(E._SECTOR_VALUE_KEY);this._bindProperty(E._SECTOR_VALUE_KEY,C,void 0);this._updatePieAngles();this.render();return this};E.prototype.innerRadius=function(C,D){if(null==C)return this._propertyBindings.get(E._INNER_RADIUS_KEY);this._bindProperty(E._INNER_RADIUS_KEY,C,D);this.render();return this};E.prototype.outerRadius=function(C,D){if(null==C)return this._propertyBindings.get(E._OUTER_RADIUS_KEY);
this._bindProperty(E._OUTER_RADIUS_KEY,C,D);this.render();return this};E.prototype.startAngle=function(C){if(null==C)return this._startAngle;this._startAngle=C;this._updatePieAngles();this.render();return this};E.prototype.endAngle=function(C){if(null==C)return this._endAngle;this._endAngle=C;this._updatePieAngles();this.render();return this};E.prototype.labelsEnabled=function(C){if(null==C)return this._labelsEnabled;this._labelsEnabled=C;this.render();return this};E.prototype.labelFormatter=function(C){if(null==
C)return this._labelFormatter;this._labelFormatter=C;this.render();return this};E.prototype.entitiesAt=function(C){var D=this.width()/2,J=this.height()/2;C=this._sliceIndexForPoint({x:C.x-D,y:C.y-J});return null==C?[]:[this.entities()[C]]};E.prototype._propertyProjectors=function(){var C=this,D=A.prototype._propertyProjectors.call(this),J=z.Plot._scaledAccessor(this.innerRadius()),M=z.Plot._scaledAccessor(this.outerRadius());D.d=function(H,K,L){return g.arc().innerRadius(J(H,K,L)).outerRadius(M(H,
K,L)).startAngle(C._startAngles[K]).endAngle(C._endAngles[K])(H,K)};return D};E.prototype._updatePieAngles=function(){if(null!=this.sectorValue()&&0!==this.datasets().length){var C=z.Plot._scaledAccessor(this.sectorValue()),D=this.datasets()[0],J=this._getDataToDraw().get(D);J=g.pie().sort(null).startAngle(this._startAngle).endAngle(this._endAngle).value(function(M,H){return C(M,H,D)})(J);this._startAngles=J.map(function(M){return M.startAngle});this._endAngles=J.map(function(M){return M.endAngle})}};
E.prototype._pieCenter=function(){var C=this._startAngle<this._endAngle?this._startAngle:this._endAngle,D=this._startAngle<this._endAngle?this._endAngle:this._startAngle,J=Math.sin(C);C=Math.cos(C);var M=Math.sin(D);D=Math.cos(D);var H;if(0<=J&&0<=M)if(0<=C&&0<=D){var K=C;var L=H=0;var P=M}else 0>C&&0>D?(K=0,H=-D,L=0,P=J):0<=C&&0>D?(K=C,H=-D,L=0,P=J):0>C&&0<=D&&(L=H=K=1,P=Math.max(J,M));else 0<=J&&0>M?0<=C&&0<=D?(K=Math.max(C,D),P=L=H=1):0>C&&0>D?(K=0,H=1,L=-M,P=J):0<=C&&0>D?(K=C,H=1,L=-M,P=1):0>
C&&0<=D&&(K=D,L=H=1,P=J):0>J&&0<=M?0<=C&&0<=D?(K=1,H=0,L=-J,P=M):0>C&&0>D?(K=1,H=Math.max(-C,-D),P=L=1):0<=C&&0>D?(K=1,H=-D,L=-J,P=1):0>C&&0<=D&&(K=1,H=-C,L=1,P=M):0>J&&0>M&&(0<=C&&0<=D?(K=D,H=0,L=-J,P=0):0>C&&0>D?(K=0,H=-C,L=-M,P=0):0<=C&&0>D?(H=K=1,L=Math.max(C,-D),P=1):0>C&&0<=D&&(K=D,H=-C,L=1,P=0));return{x:0==L+P?0:L/(L+P)*this.width(),y:0==K+H?0:K/(K+H)*this.height()}};E.prototype._getDataToDraw=function(){var C=A.prototype._getDataToDraw.call(this);if(0===this.datasets().length)return C;var D=
z.Plot._scaledAccessor(this.sectorValue()),J=this.datasets()[0],M=C.get(J).filter(function(H,K){return E._isValidData(D(H,K,J))});C.set(J,M);return C};E._isValidData=function(C){return q.Math.isValidNumber(C)&&0<=C};E.prototype._pixelPoint=function(C,D,J){var M=z.Plot._scaledAccessor(this.sectorValue());if(!E._isValidData(M(C,D,J)))return{x:NaN,y:NaN};var H=z.Plot._scaledAccessor(this.innerRadius())(C,D,J);C=z.Plot._scaledAccessor(this.outerRadius())(C,D,J);H=(H+C)/2;C=g.pie().sort(null).value(function(K,
L){K=M(K,L,J);return E._isValidData(K)?K:0}).startAngle(this._startAngle).endAngle(this._endAngle)(J.data());D=(C[D].startAngle+C[D].endAngle)/2;return{x:H*Math.sin(D),y:-H*Math.cos(D)}};E.prototype._additionalPaint=function(C){var D=this;this._renderArea.select(".label-area").remove();this._labelsEnabled&&q.Window.setTimeout(function(){return D._drawLabels()},C);var J=this._generateStrokeDrawSteps(),M=this._getDataToDraw();this.datasets().forEach(function(H){var K=z.Plot.applyDrawSteps(J,H);D._strokeDrawers.get(H).draw(M.get(H),
K)})};E.prototype._generateStrokeDrawSteps=function(){return[{attrToProjector:this._getAttrToProjector(),animator:new l.Null}]};E.prototype._sliceIndexForPoint=function(C){var D=Math.sqrt(Math.pow(C.x,2)+Math.pow(C.y,2)),J=Math.acos(-C.y/D);0>C.x&&(J=2*Math.PI-J);for(C=0;C<this._startAngles.length;C++)if(this._startAngles[C]<J&&this._endAngles[C]>J){var M=C;break}if(void 0!==M){C=this.datasets()[0];var H=C.data()[M];J=this.innerRadius().accessor(H,M,C);C=this.outerRadius().accessor(H,M,C);if(D>J&&
D<C)return M}return null};E.prototype._drawLabels=function(){var C=this,D=this._getAttrToProjector(),J=this._renderArea.append("g").classed("label-area",!0),M=new h.SvgContext(J.node()),H=new h.CacheMeasurer(M),K=new h.Writer(H,M),L=this.datasets()[0];this._getDataToDraw().get(L).forEach(function(P,S){var aa=C.sectorValue().accessor(P,S,L);if(q.Math.isValidNumber(aa)){aa=C._labelFormatter(aa,P,S,L);var R=H.measure(aa),Y=(C._endAngles[S]+C._startAngles[S])/2,W=C.outerRadius().accessor(P,S,L);C.outerRadius().scale&&
(W=C.outerRadius().scale.scale(W));var X=C.innerRadius().accessor(P,S,L);C.innerRadius().scale&&(X=C.innerRadius().scale.scale(X));X=(W+X)/2;W=Math.sin(Y)*X-R.width/2;X=-Math.cos(Y)*X-R.height/2;var ja=[{x:W,y:X},{x:W,y:X+R.height},{x:W+R.width,y:X},{x:W+R.width,y:X+R.height}];(Y=ja.every(function(pa){return Math.abs(pa.x)<=C.width()/2&&Math.abs(pa.y)<=C.height()/2}))&&(Y=ja.map(function(pa){return C._sliceIndexForPoint(pa)}).every(function(pa){return pa===S}));P=D.fill(P,S,L);P=1.6*q.Color.contrast("white",
P)<q.Color.contrast("black",P);W=J.append("g").attr("transform","translate("+W+","+X+")");W.classed(P?"dark-label":"light-label",!0);W.style("visibility",Y?"inherit":"hidden");K.write(aa,R.width,R.height,{xAlign:"center",yAlign:"center"},W.node())}})};return E}(z.Plot);b._INNER_RADIUS_KEY="inner-radius";b._OUTER_RADIUS_KEY="outer-radius";b._SECTOR_VALUE_KEY="sector-value";c.Pie=b},function(b,c,e){var f=this&&this.__extends||function(w,z){function A(){this.constructor=w}for(var E in z)z.hasOwnProperty(E)&&
(w[E]=z[E]);w.prototype=null===z?Object.create(z):(A.prototype=z.prototype,new A)},g=e(1),h=e(5),l=e(7),n=e(14),m=e(6),q=e(34),r=e(3),v=e(0),u=e(2);b=function(w){function z(){var A=w.call(this)||this;A._labelsEnabled=!1;A._label=null;A.animator("rectangles",new l.Null);A.addClass("rectangle-plot");A.attr("fill",(new r.Color).range()[0]);return A}f(z,w);z.prototype._createDrawer=function(){return new m.ProxyDrawer(function(){return new q.RectangleSVGDrawer},function(A){return new n.RectangleCanvasDrawer(A)})};
z.prototype._generateAttrToProjector=function(){var A=this,E=w.prototype._generateAttrToProjector.call(this),C=u.Plot._scaledAccessor(this.x()),D=E[z._X2_KEY],J=u.Plot._scaledAccessor(this.y()),M=E[z._Y2_KEY],H=this.x().scale,K=this.y().scale;null!=D?(E.width=function(L,P,S){return Math.abs(D(L,P,S)-C(L,P,S))},E.x=function(L,P,S){return Math.min(D(L,P,S),C(L,P,S))}):(E.width=function(){return A._rectangleWidth(H)},E.x=function(L,P,S){return C(L,P,S)-.5*E.width(L,P,S)});null!=M?(E.height=function(L,
P,S){return Math.abs(M(L,P,S)-J(L,P,S))},E.y=function(L,P,S){return Math.max(M(L,P,S),J(L,P,S))-E.height(L,P,S)}):(E.height=function(){return A._rectangleWidth(K)},E.y=function(L,P,S){return J(L,P,S)-.5*E.height(L,P,S)});delete E[z._X2_KEY];delete E[z._Y2_KEY];return E};z.prototype._generateDrawSteps=function(){return[{attrToProjector:this._getAttrToProjector(),animator:this._getAnimator("rectangles")}]};z.prototype._filterForProperty=function(A){return"x2"===A?w.prototype._filterForProperty.call(this,
"x"):"y2"===A?w.prototype._filterForProperty.call(this,"y"):w.prototype._filterForProperty.call(this,A)};z.prototype.x=function(A,E,C){if(null==A)return w.prototype.x.call(this);null==E?w.prototype.x.call(this,A):w.prototype.x.call(this,A,E,C);null!=E&&(C=(A=this.x2())&&A.accessor,null!=C&&this._bindProperty(z._X2_KEY,C,E,A.postScale));E instanceof r.Category&&E.innerPadding(0).outerPadding(0);return this};z.prototype.x2=function(A){if(null==A)return this._propertyBindings.get(z._X2_KEY);var E=this.x();
this._bindProperty(z._X2_KEY,A,E&&E.scale,void 0);this.render();return this};z.prototype.y=function(A,E,C){if(null==A)return w.prototype.y.call(this);null==E?w.prototype.y.call(this,A):w.prototype.y.call(this,A,E,C);null!=E&&(C=(A=this.y2())&&A.accessor,null!=C&&this._bindProperty(z._Y2_KEY,C,E,A.postScale));E instanceof r.Category&&E.innerPadding(0).outerPadding(0);return this};z.prototype.y2=function(A){if(null==A)return this._propertyBindings.get(z._Y2_KEY);var E=this.y();this._bindProperty(z._Y2_KEY,
A,E&&E.scale,void 0);this.render();return this};z.prototype.entitiesAt=function(A){var E=this._getAttrToProjector();return this.entities().filter(function(C){var D=C.datum,J=C.index,M=C.dataset;C=E.x(D,J,M);var H=E.y(D,J,M),K=E.width(D,J,M);D=E.height(D,J,M);return C<=A.x&&A.x<=C+K&&H<=A.y&&A.y<=H+D})};z.prototype._entityBounds=function(A){return this._entityBBox(A.datum,A.index,A.dataset,this._getAttrToProjector())};z.prototype._entityBBox=function(A,E,C,D){return{x:D.x(A,E,C),y:D.y(A,E,C),width:D.width(A,
E,C),height:D.height(A,E,C)}};z.prototype.label=function(A){if(null==A)return this._label;this._label=A;this.render();return this};z.prototype.labelsEnabled=function(A){if(null==A)return this._labelsEnabled;this._labelsEnabled=A;this.render();return this};z.prototype._propertyProjectors=function(){var A=w.prototype._propertyProjectors.call(this);null!=this.x2()&&(A.x2=u.Plot._scaledAccessor(this.x2()));null!=this.y2()&&(A.y2=u.Plot._scaledAccessor(this.y2()));return A};z.prototype._pixelPoint=function(A,
E,C){var D=this._getAttrToProjector(),J=D.x(A,E,C),M=D.y(A,E,C),H=D.width(A,E,C);A=D.height(A,E,C);return{x:J+H/2,y:M+A/2}};z.prototype._rectangleWidth=function(A){if(A instanceof r.Category)return A.rangeBand();var E=A===this.x().scale?this.x().accessor:this.y().accessor,C=g.set(v.Array.flatten(this.datasets().map(function(M){return M.data().map(function(H,K){return E(H,K,M).valueOf()})}))).values().map(function(M){return+M}),D=v.Math.min(C,0);C=v.Math.max(C,0);var J=A.scale(D);return(A.scale(C)-
J)/Math.abs(C-D)};z.prototype._getDataToDraw=function(){var A=new v.Map,E=this._getAttrToProjector();this.datasets().forEach(function(C){var D=C.data().map(function(J,M){return v.Math.isValidNumber(E.x(J,M,C))&&v.Math.isValidNumber(E.y(J,M,C))&&v.Math.isValidNumber(E.width(J,M,C))&&v.Math.isValidNumber(E.height(J,M,C))?J:null});A.set(C,D)});return A};z.prototype._additionalPaint=function(A){var E=this;this._renderArea.selectAll(".label-area").remove();this._labelsEnabled&&null!=this.label()&&v.Window.setTimeout(function(){return E._drawLabels()},
A)};z.prototype._drawLabels=function(){var A=this,E=this._getDataToDraw();this.datasets().forEach(function(C,D){return A._drawLabel(E,C,D)})};z.prototype._drawLabel=function(A,E,C){var D=this,J=this._getAttrToProjector(),M=this._renderArea.append("g").classed("label-area",!0),H=new h.SvgContext(M.node()),K=new h.CacheMeasurer(H),L=new h.Writer(K,H);H=this.x().scale.range();var P=this.y().scale.range(),S=Math.min.apply(null,H),aa=Math.max.apply(null,H),R=Math.min.apply(null,P),Y=Math.max.apply(null,
P);A.get(E).forEach(function(W,X){if(null!=W){var ja=""+D.label()(W,X,E),pa=K.measure(ja),ta=J.x(W,X,E),da=J.y(W,X,E),Aa=J.width(W,X,E),Ca=J.height(W,X,E);pa.height<=Ca&&pa.width<=Aa&&(Ca=(Ca-pa.height)/2,ta+=(Aa-pa.width)/2,da+=Ca,Aa={min:ta,max:ta+pa.width},Ca={min:da,max:da+pa.height},Aa.min<S||Aa.max>aa||Ca.min<R||Ca.max>Y||D._overlayLabel(Aa,Ca,X,C,A)||(W=J.fill(W,X,E),W=1.6*v.Color.contrast("white",W)<v.Color.contrast("black",W),ta=M.append("g").attr("transform","translate("+ta+","+da+")"),
ta.classed(W?"dark-label":"light-label",!0),L.write(ja,pa.width,pa.height,{xAlign:"center",yAlign:"center"},ta.node())))}})};z.prototype._overlayLabel=function(A,E,C,D,J){for(var M=this._getAttrToProjector(),H=this.datasets(),K=D;K<H.length;K++)for(var L=H[K],P=J.get(L),S=K===D?C+1:0;S<P.length;S++)if(v.DOM.intersectsBBox(A,E,this._entityBBox(P[S],S,L,M)))return!0;return!1};return z}(e(16).XYPlot);b._X2_KEY="x2";b._Y2_KEY="y2";c.Rectangle=b},function(b,c,e){var f=this&&this.__extends||function(w,
z){function A(){this.constructor=w}for(var E in z)z.hasOwnProperty(E)&&(w[E]=z[E]);w.prototype=null===z?Object.create(z):(A.prototype=z.prototype,new A)},g=e(31),h=e(6),l=e(48),n=e(7),m=e(14),q=e(3),r=e(0),v=e(19),u=e(2);b=function(w){function z(){var A=w.call(this)||this;A.addClass("scatter-plot");var E=new n.Easing;E.startDelay(5);E.stepDuration(250);E.maxTotalDuration(u.Plot._ANIMATION_MAX_DURATION);A.animator(v.Animator.MAIN,E);A.attr("opacity",.6);A.attr("fill",(new q.Color).range()[0]);A.size(6);
var C=g.circle();A.symbol(function(){return C});return A}f(z,w);z.prototype._buildLightweightPlotEntities=function(A){var E=this;return w.prototype._buildLightweightPlotEntities.call(this,A).map(function(C){var D=u.Plot._scaledAccessor(E.size())(C.datum,C.index,C.dataset);C.diameter=D;return C})};z.prototype._createDrawer=function(A){var E=this;return new h.ProxyDrawer(function(){return new l.SymbolSVGDrawer},function(C){return new m.CanvasDrawer(C,l.makeSymbolCanvasDrawStep(A,function(){return u.Plot._scaledAccessor(E.symbol())},
function(){return u.Plot._scaledAccessor(E.size())}))})};z.prototype.size=function(A,E){if(null==A)return this._propertyBindings.get(z._SIZE_KEY);this._bindProperty(z._SIZE_KEY,A,E);this.render();return this};z.prototype.symbol=function(A){if(null==A)return this._propertyBindings.get(z._SYMBOL_KEY);this._propertyBindings.set(z._SYMBOL_KEY,{accessor:A});this.render();return this};z.prototype._generateDrawSteps=function(){var A=[];if(this._animateOnNextRender()){var E=this._getAttrToProjector(),C=u.Plot._scaledAccessor(this.symbol());
E.d=function(D,J,M){return C(D,J,M)(0)(null)};A.push({attrToProjector:E,animator:this._getAnimator(v.Animator.RESET)})}A.push({attrToProjector:this._getAttrToProjector(),animator:this._getAnimator(v.Animator.MAIN)});return A};z.prototype._propertyProjectors=function(){var A=w.prototype._propertyProjectors.call(this),E=u.Plot._scaledAccessor(this.x()),C=u.Plot._scaledAccessor(this.y());A.x=E;A.y=C;A.transform=function(D,J,M){return"translate("+E(D,J,M)+","+C(D,J,M)+")"};A.d=this._constructSymbolGenerator();
return A};z.prototype._constructSymbolGenerator=function(){var A=u.Plot._scaledAccessor(this.symbol()),E=u.Plot._scaledAccessor(this.size());return function(C,D,J){return A(C,D,J)(E(C,D,J))(null)}};z.prototype._entityBounds=function(A){return{x:A.position.x-A.diameter/2,y:A.position.y-A.diameter/2,width:A.diameter,height:A.diameter}};z.prototype._entityVisibleOnPlot=function(A,E){var C={min:E.topLeft.x,max:E.bottomRight.x};E={min:E.topLeft.y,max:E.bottomRight.y};A=this._entityBounds(A);return r.DOM.intersectsBBox(C,
E,A)};z.prototype.entitiesAt=function(A){var E=u.Plot._scaledAccessor(this.x()),C=u.Plot._scaledAccessor(this.y()),D=u.Plot._scaledAccessor(this.size());return this.entities().filter(function(J){var M=J.datum,H=J.index,K=J.dataset;J=E(M,H,K);var L=C(M,H,K);M=D(M,H,K);return J-M/2<=A.x&&A.x<=J+M/2&&L-M/2<=A.y&&A.y<=L+M/2})};return z}(e(16).XYPlot);b._SIZE_KEY="size";b._SYMBOL_KEY="symbol";c.Scatter=b},function(b,c,e){var f=this&&this.__extends||function(r,v){function u(){this.constructor=r}for(var w in v)v.hasOwnProperty(w)&&
(r[w]=v[w]);r.prototype=null===v?Object.create(v):(u.prototype=v.prototype,new u)},g=e(7),h=e(6),l=e(47),n=e(3),m=e(35),q=e(2);b=function(r){function v(){var u=r.call(this)||this;u.addClass("segment-plot");u.attr("stroke",(new n.Color).range()[0]);u.attr("stroke-width","2px");return u}f(v,r);v.prototype._createDrawer=function(){return new h.ProxyDrawer(function(){return new l.SegmentSVGDrawer},function(){m.warn("canvas renderer is not supported on Segment Plot!");return null})};v.prototype._generateDrawSteps=
function(){return[{attrToProjector:this._getAttrToProjector(),animator:new g.Null}]};v.prototype._filterForProperty=function(u){return"x2"===u?r.prototype._filterForProperty.call(this,"x"):"y2"===u?r.prototype._filterForProperty.call(this,"y"):r.prototype._filterForProperty.call(this,u)};v.prototype.x=function(u,w){if(null==u)return r.prototype.x.call(this);null==w?r.prototype.x.call(this,u):(r.prototype.x.call(this,u,w),u=(u=this.x2())&&u.accessor,null!=u&&this._bindProperty(v._X2_KEY,u,w));return this};
v.prototype.x2=function(u){if(null==u)return this._propertyBindings.get(v._X2_KEY);var w=this.x();this._bindProperty(v._X2_KEY,u,w&&w.scale);this.render();return this};v.prototype.y=function(u,w){if(null==u)return r.prototype.y.call(this);null==w?r.prototype.y.call(this,u):(r.prototype.y.call(this,u,w),u=(u=this.y2())&&u.accessor,null!=u&&this._bindProperty(v._Y2_KEY,u,w));return this};v.prototype.y2=function(u){if(null==u)return this._propertyBindings.get(v._Y2_KEY);var w=this.y();this._bindProperty(v._Y2_KEY,
u,w&&w.scale);this.render();return this};v.prototype._propertyProjectors=function(){var u=r.prototype._propertyProjectors.call(this);u.x1=q.Plot._scaledAccessor(this.x());u.x2=null==this.x2()?q.Plot._scaledAccessor(this.x()):q.Plot._scaledAccessor(this.x2());u.y1=q.Plot._scaledAccessor(this.y());u.y2=null==this.y2()?q.Plot._scaledAccessor(this.y()):q.Plot._scaledAccessor(this.y2());return u};v.prototype.entitiesAt=function(u){u=this.entityNearest(u);return null!=u?[u]:[]};v.prototype.entitiesIn=function(u,
w){if(null==w){var z={min:u.topLeft.x,max:u.bottomRight.x};u={min:u.topLeft.y,max:u.bottomRight.y}}else z=u,u=w;return this._entitiesIntersecting(z,u)};v.prototype._entitiesIntersecting=function(u,w){var z=this,A=[],E=this._getAttrToProjector();this.entities().forEach(function(C){z._lineIntersectsBox(C,u,w,E)&&A.push(C)});return A};v.prototype._lineIntersectsBox=function(u,w,z,A){var E=this,C=A.x1(u.datum,u.index,u.dataset),D=A.x2(u.datum,u.index,u.dataset),J=A.y1(u.datum,u.index,u.dataset);u=A.y2(u.datum,
u.index,u.dataset);if(w.min<=C&&C<=w.max&&z.min<=J&&J<=z.max||w.min<=D&&D<=w.max&&z.min<=u&&u<=z.max)return!0;var M={x:C,y:J},H={x:D,y:u},K=[{x:w.min,y:z.min},{x:w.min,y:z.max},{x:w.max,y:z.max},{x:w.max,y:z.min}];return 0<K.filter(function(L,P){return 0!==P?E._lineIntersectsSegment(M,H,L,K[P-1])&&E._lineIntersectsSegment(L,K[P-1],M,H):!1}).length};v.prototype._lineIntersectsSegment=function(u,w,z,A){return 0>((w.x-u.x)*(z.y-w.y)-(w.y-u.y)*(z.x-w.x))*((w.x-u.x)*(A.y-w.y)-(w.y-u.y)*(A.x-w.x))};return v}(e(16).XYPlot);
b._X2_KEY="x2";b._Y2_KEY="y2";c.Segment=b},function(b,c,e){var f=this&&this.__extends||function(q,r){function v(){this.constructor=q}for(var u in r)r.hasOwnProperty(u)&&(q[u]=r[u]);q.prototype=null===r?Object.create(r):(v.prototype=r.prototype,new v)},g=e(1),h=e(7),l=e(20),n=e(0);b=e(50);var m=e(2);e=function(q){function r(){var v=q.call(this)||this;v._stackingResult=l.memThunk(function(){return v.datasets()},function(){return v.x().accessor},function(){return v.y().accessor},function(){return v._stackingOrder},
function(u,w,z,A){return n.Stacking.stack(u,w,z,A)});v._stackedExtent=l.memThunk(v._stackingResult,function(){return v.x().accessor},function(){return v._filterForProperty("y")},function(u,w,z){return n.Stacking.stackedExtent(u,w,z)});v._baselineValue=0;v._stackingOrder="bottomup";v.addClass("stacked-area-plot");v.attr("fill-opacity",1);v._baselineValueProvider=function(){return[v._baselineValue]};v.croppedRenderingEnabled(!1);return v}f(r,q);r.prototype.croppedRenderingEnabled=function(v){return null==
v?q.prototype.croppedRenderingEnabled.call(this):v?(n.Window.warn("Warning: Stacked Area Plot does not support cropped rendering."),this):q.prototype.croppedRenderingEnabled.call(this,v)};r.prototype._getAnimator=function(){return new h.Null};r.prototype._setup=function(){q.prototype._setup.call(this);this._baseline=this._renderArea.append("line").classed("baseline",!0)};r.prototype.x=function(v,u){if(null==v)return q.prototype.x.call(this);null==u?q.prototype.x.call(this,v):q.prototype.x.call(this,
v,u);this._checkSameDomain();return this};r.prototype.y=function(v,u){if(null==v)return q.prototype.y.call(this);null==u?q.prototype.y.call(this,v):q.prototype.y.call(this,v,u);this._checkSameDomain();return this};r.prototype.stackingOrder=function(v){if(null==v)return this._stackingOrder;this._stackingOrder=v;this._onDatasetUpdate();return this};r.prototype.downsamplingEnabled=function(){return q.prototype.downsamplingEnabled.call(this)};r.prototype._additionalPaint=function(){var v=this.y().scale.scale(this._baselineValue);
v={x1:0,y1:v,x2:this.width(),y2:v};this._getAnimator("baseline").animate(this._baseline,v)};r.prototype._updateYScale=function(){var v=this.y();v=v&&v.scale;null!=v&&(v.addPaddingExceptionsProvider(this._baselineValueProvider),v.addIncludedValuesProvider(this._baselineValueProvider))};r.prototype._onDatasetUpdate=function(){this._checkSameDomain();q.prototype._onDatasetUpdate.call(this);return this};r.prototype.getExtentsForProperty=function(v){return"y"===v?[this._stackedExtent()]:q.prototype.getExtentsForProperty.call(this,
v)};r.prototype._checkSameDomain=function(){if(this._projectorsReady()){var v=this.datasets(),u=this.x().accessor,w=v.map(function(A){return g.set(A.data().map(function(E,C){return u(E,C,A).toString()})).values()}),z=r._domainKeys(v,u);w.some(function(A){return A.length!==z.length})&&n.Window.warn("the domains across the datasets are not the same. Plot may produce unintended behavior.")}};r._domainKeys=function(v,u){var w=g.set();v.forEach(function(z){z.data().forEach(function(A,E){w.add(u(A,E,z))})});
return w.values()};r.prototype._propertyProjectors=function(){var v=this,u=q.prototype._propertyProjectors.call(this),w=this.y().accessor,z=this.x().accessor,A=this._stackingResult();u.d=this._constructAreaProjector(m.Plot._scaledAccessor(this.x()),function(E,C,D){return v.y().scale.scale(+w(E,C,D)+A.get(D).get(n.Stacking.normalizeKey(z(E,C,D))).offset)},function(E,C,D){return v.y().scale.scale(A.get(D).get(n.Stacking.normalizeKey(z(E,C,D))).offset)});return u};r.prototype._pixelPoint=function(v,
u,w){var z=q.prototype._pixelPoint.call(this,v,u,w),A=this.x().accessor(v,u,w);v=this.y().accessor(v,u,w);w=this.y().scale.scale(+v+this._stackingResult().get(w).get(n.Stacking.normalizeKey(A)).offset);return{x:z.x,y:w}};return r}(b.Area);c.StackedArea=e},function(b,c,e){var f=this&&this.__extends||function(r,v){function u(){this.constructor=r}for(var w in v)v.hasOwnProperty(w)&&(r[w]=v[w]);r.prototype=null===v?Object.create(v):(u.prototype=v.prototype,new u)},g=e(5),h=e(8),l=e(20),n=e(0),m=e(27),
q=e(2);b=function(r){function v(u){void 0===u&&(u="vertical");var w=r.call(this,u)||this;w._extremaFormatter=h.identity();w._stackingResult=l.memThunk(function(){return w.datasets()},function(){return w.position().accessor},function(){return w.length().accessor},function(){return w._stackingOrder},function(z,A,E,C){return n.Stacking.stack(z,A,E,C)});w._stackedExtent=l.memThunk(w._stackingResult,function(){return w.position().accessor},function(){return w._filterForProperty(w._isVertical?"y":"x")},
function(z,A,E){return n.Stacking.stackedExtent(z,A,E)});w.addClass("stacked-bar-plot");w._stackingOrder="bottomup";return w}f(v,r);v.prototype.stackingOrder=function(u){if(null==u)return this._stackingOrder;this._stackingOrder=u;this._onDatasetUpdate();return this};v.prototype.extremaFormatter=function(u){if(0===arguments.length)return this._extremaFormatter;this._extremaFormatter=u;this.render();return this};v.prototype._setup=function(){r.prototype._setup.call(this);this._labelArea=this._renderArea.append("g").classed(m.Bar._LABEL_AREA_CLASS,
!0);var u=new g.SvgContext(this._labelArea.node());this._measurer=new g.CacheMeasurer(u);this._writer=new g.Writer(this._measurer,u)};v.prototype._drawLabels=function(){function u(M,H){var K=w._generateAttrToProjector(),L=w.width(),P=w.height();M.forEach(function(S){if(S.extent!==z){var aa=w.extremaFormatter()(S.extent),R=w._measurer.measure(aa),Y=S.stackedDatum,W=Y.originalDatum,X=Y.originalIndex;Y=Y.originalDataset;if(w._isDatumOnScreen(K,L,P,W,X,Y)){W=q.Plot._scaledAccessor(w.attr(m.Bar._BAR_THICKNESS_KEY))(W,
X,Y);X=E.scale(S.extent);S=w._getPositionAttr(A.scale(S.axisValue),W)+W/2;var ja=H(w._isVertical?{x:S,y:X}:{x:X,y:S},R,W);X=ja.x;Y=ja.y;S=ja.x+R.width-ja.x;R=ja.y+R.height-ja.y;W=w._isVertical?S>W:R>W;W||(X=w._labelArea.append("g").attr("transform","translate("+X+", "+Y+")"),X.classed("stacked-bar-label",!0),w._writer.write(aa,S,R,{xAlign:"center",yAlign:"center"},X.node()));J.push(W)}}})}var w=this;r.prototype._drawLabels.call(this);this._labelArea.selectAll("g").remove();var z=+this.baselineValue(),
A=this.position().scale,E=this.length().scale,C=n.Stacking.stackedExtents(this._stackingResult()),D=C.minimumExtents,J=[];u(C.maximumExtents,function(M,H){var K=w._isVertical?H.width:H.height;H=w._isVertical?H.height:H.width;return{x:w._isVertical?M.x-K/2:M.x+v._EXTREMA_LABEL_MARGIN_FROM_BAR,y:w._isVertical?M.y-H:M.y-K/2}});u(D,function(M,H){var K=w._isVertical?H.width:H.height;H=w._isVertical?H.height:H.width;return{x:w._isVertical?M.x-K/2:M.x-H,y:w._isVertical?M.y+v._EXTREMA_LABEL_MARGIN_FROM_BAR:
M.y-K/2}});J.some(function(M){return M})&&this._labelArea.selectAll("g").remove()};v.prototype._generateAttrToProjector=function(){function u(L,P,S){return 0>+M(L,P,S)?A(L,P,S):z(L,P,S)}function w(L,P,S){return Math.abs(z(L,P,S)-A(L,P,S))}function z(L,P,S){return J.scale(+M(L,P,S)+K.get(S).get(n.Stacking.normalizeKey(H(L,P,S))).offset)}function A(L,P,S){return J.scale(K.get(S).get(n.Stacking.normalizeKey(H(L,P,S))).offset)}var E=this,C=r.prototype._generateAttrToProjector.call(this),D=this._isVertical?
"y":"x",J=this.length().scale,M=this.length().accessor,H=this.position().accessor,K=this._stackingResult();C[this._isVertical?"height":"width"]=w;C[D]=function(L,P,S){return E._isVertical?u(L,P,S):u(L,P,S)-w(L,P,S)};return C};v.prototype.getExtentsForProperty=function(u){return u===(this._isVertical?"y":"x")?[this._stackedExtent()]:r.prototype.getExtentsForProperty.call(this,u)};v.prototype.invalidateCache=function(){r.prototype.invalidateCache.call(this);this._measurer.reset()};return v}(m.Bar);
b._EXTREMA_LABEL_MARGIN_FROM_BAR=5;c.StackedBar=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(0);b=e(27);var h=e(2);e=function(l){function n(){var m=l.call(this)||this;m._connectorsEnabled=!1;m.addClass("waterfall-plot");return m}f(n,l);n.prototype.connectorsEnabled=function(m){if(null==m)return this._connectorsEnabled;this._connectorsEnabled=
m;return this};n.prototype.total=function(m){if(null==m)return this._propertyBindings.get(n._TOTAL_KEY);this._bindProperty(n._TOTAL_KEY,m,null);return this};n.prototype._additionalPaint=function(m){var q=this;this._connectorArea.selectAll("line").remove();this._connectorsEnabled&&g.Window.setTimeout(function(){return q._drawConnectors()},m)};n.prototype._createNodesForDataset=function(m){m=l.prototype._createNodesForDataset.call(this,m);this._connectorArea=this._renderArea.append("g").classed(n._CONNECTOR_AREA_CLASS,
!0);return m};n.prototype.getExtentsForProperty=function(m){return"y"===m?[this._extent]:l.prototype.getExtentsForProperty.call(this,m)};n.prototype._generateAttrToProjector=function(){var m=this,q=l.prototype._generateAttrToProjector.call(this),r=this.y().scale,v=h.Plot._scaledAccessor(this.total());null==this.attr("y")&&(q.y=function(u,w,z){var A=m.y().accessor(u,w,z);if(v(u,w,z))return Math.min(r.scale(A),r.scale(0));u=m._subtotals[w];if(0===w)return 0>A?r.scale(u-A):r.scale(u);w=m._subtotals[w-
1];return u>w?r.scale(u):r.scale(w)});null==this.attr("height")&&(q.height=function(u,w,z){var A=v(u,w,z);u=m.y().accessor(u,w,z);if(A)return Math.abs(r.scale(u)-r.scale(0));A=m._subtotals[w];if(0===w)return Math.abs(r.scale(A)-r.scale(A-u));w=m._subtotals[w-1];return Math.abs(r.scale(A)-r.scale(w))});q["class"]=function(u,w,z){var A="";null!=m.attr("class")&&(A=m.attr("class").accessor(u,w,z)+" ");if(v(u,w,z))return A+n._BAR_TOTAL_CLASS;u=m.y().accessor(u,w,z);return A+(0<u?n._BAR_GROWTH_CLASS:n._BAR_DECLINE_CLASS)};
return q};n.prototype._onDatasetUpdate=function(){this._updateSubtotals();l.prototype._onDatasetUpdate.call(this);return this};n.prototype._calculateSubtotalsAndExtent=function(m){var q=this,r=Number.MAX_VALUE,v=Number.MIN_VALUE,u=0,w=!1;m.data().forEach(function(z,A){var E=q.y().accessor(z,A,m);(z=q.total().accessor(z,A,m))&&0!==A||(u+=E);q._subtotals.push(u);u<r&&(r=u);u>v&&(v=u);z&&(E<r&&(r=E),E>v&&(v=E));if(!w&&z){A=E-u;for(E=0;E<q._subtotals.length;E++)q._subtotals[E]+=A;w=!0;u+=A;r+=A;v+=A}});
this._extent=[r,v]};n.prototype._drawConnectors=function(){for(var m=this._getAttrToProjector(),q=this.datasets()[0],r=1;r<q.data().length;r++){var v=r-1,u=q.data()[r],w=q.data()[v];w=m.x(w,v,q);var z=m.x(u,r,q)+m.width(u,r,q),A=m.y(u,r,q);if(0<this._subtotals[r]&&this._subtotals[r]>this._subtotals[v]||0>this._subtotals[r]&&this._subtotals[r]>=this._subtotals[v])A=m.y(u,r,q)+m.height(u,r,q);this._connectorArea.append("line").classed(n._CONNECTOR_CLASS,!0).attr("x1",w).attr("x2",z).attr("y1",A).attr("y2",
A)}};n.prototype._updateSubtotals=function(){var m=this.datasets();0<m.length&&(m=m[m.length-1],this._subtotals=[],this._calculateSubtotalsAndExtent(m))};return n}(b.Bar);e._BAR_DECLINE_CLASS="waterfall-decline";e._BAR_GROWTH_CLASS="waterfall-growth";e._BAR_TOTAL_CLASS="waterfall-total";e._CONNECTOR_CLASS="connector";e._CONNECTOR_AREA_CLASS="connector-area";e._TOTAL_KEY="total";c.Waterfall=e},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&
(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(1),h=e(0);b=function(l){function n(m){var q=l.call(this)||this;switch(m){case null:case void 0:null==n._plottableColorCache&&(n._plottableColorCache=n._getPlottableColors());m=g.scaleOrdinal().range(n._plottableColorCache);break;case "Category10":case "category10":case "10":m=g.scaleOrdinal(g.schemeCategory10);break;case "Category20":case "category20":case "20":m=g.scaleOrdinal(g.schemeCategory20);break;case "Category20b":case "category20b":case "20b":m=
g.scaleOrdinal(g.schemeCategory20b);break;case "Category20c":case "category20c":case "20c":m=g.scaleOrdinal(g.schemeCategory20c);break;default:throw Error("Unsupported ColorScale type");}q._d3Scale=m;return q}f(n,l);n.prototype.extentOfValues=function(m){return h.Array.uniq(m)};n.prototype._getExtent=function(){return h.Array.uniq(this._getAllIncludedValues())};n.invalidateColorCache=function(){n._plottableColorCache=null};n._getPlottableColors=function(){for(var m=[],q=g.select("body").append("plottable-color-tester"),
r=h.Color.colorTest(q,""),v=0,u=h.Color.colorTest(q,"plottable-colors-0");null!=u&&v<this._MAXIMUM_COLORS_FROM_CSS&&(u!==r||u!==m[m.length-1]);)m.push(u),v++,u=h.Color.colorTest(q,"plottable-colors-"+v);q.remove();return m};n.prototype.scale=function(m){var q=this._d3Scale(m);m=this.domain().indexOf(m);m=Math.floor(m/this.range().length);return h.Color.lightenColor(q,Math.log(m*n._LOOP_LIGHTEN_FACTOR+1))};n.prototype._getDomain=function(){return this._backingScaleDomain()};n.prototype._backingScaleDomain=
function(m){if(null==m)return this._d3Scale.domain();this._d3Scale.domain(m);return this};n.prototype._getRange=function(){return this._d3Scale.range()};n.prototype._setRange=function(m){this._d3Scale.range(m)};return n}(e(17).Scale);b._LOOP_LIGHTEN_FACTOR=1.6;b._MAXIMUM_COLORS_FROM_CSS=256;c.Color=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,
new m)},g=e(1),h=e(0);b=function(l){function n(m){void 0===m&&(m="linear");var q=l.call(this)||this;switch(m){case "linear":q._colorScale=g.scaleLinear();break;case "log":q._colorScale=g.scaleLog();break;case "sqrt":q._colorScale=g.scaleSqrt();break;case "pow":q._colorScale=g.scalePow()}if(null==q._colorScale)throw Error("unknown QuantitativeScale scale type "+m);q.range(n.REDS);return q}f(n,l);n.prototype.extentOfValues=function(m){m=g.extent(m);return null==m[0]||null==m[1]?[]:m};n.prototype._d3InterpolatedScale=
function(){return this._colorScale.range([0,1]).interpolate(this._interpolateColors())};n.prototype._interpolateColors=function(){var m=this._colorRange;if(2>m.length)throw Error("Color scale arrays must have at least two elements.");return function(){return function(q){q=Math.max(0,Math.min(1,q));q*=m.length-1;var r=Math.floor(q),v=q-r;return g.interpolateLab(m[r],m[Math.ceil(q)])(v)}}};n.prototype._resetScale=function(){this._d3Scale=this._d3InterpolatedScale();this._autoDomainIfAutomaticMode();
this._dispatchUpdate()};n.prototype.autoDomain=function(){var m=this._getAllIncludedValues();0<m.length&&this._setDomain([h.Math.min(m,0),h.Math.max(m,0)])};n.prototype.scale=function(m){return this._d3Scale(m)};n.prototype._getDomain=function(){return this._backingScaleDomain()};n.prototype._backingScaleDomain=function(m){if(null==m)return this._d3Scale.domain();this._d3Scale.domain(m);return this};n.prototype._getRange=function(){return this._colorRange};n.prototype._setRange=function(m){this._colorRange=
m;this._resetScale()};return n}(e(17).Scale);b.REDS="#FFFFFF #FFF6E1 #FEF4C0 #FED976 #FEB24C #FD8D3C #FC4E2A #E31A1C #B10026".split(" ");b.BLUES="#FFFFFF #CCFFFF #A5FFFD #85F7FB #6ED3EF #55A7E0 #417FD0 #2545D3 #0B02E1".split(" ");b.POSNEG="#0B02E1 #2545D3 #417FD0 #55A7E0 #6ED3EF #85F7FB #A5FFFD #CCFFFF #FFFFFF #FFF6E1 #FEF4C0 #FED976 #FEB24C #FD8D3C #FC4E2A #E31A1C #B10026".split(" ");c.InterpolatedColor=b},function(b,c,e){var f=this&&this.__extends||function(h,l){function n(){this.constructor=h}
for(var m in l)l.hasOwnProperty(m)&&(h[m]=l[m]);h.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)},g=e(1);b=function(h){function l(){var n=h.call(this)||this;n._d3Scale=g.scaleLinear();return n}f(l,h);l.prototype._defaultExtent=function(){return[0,1]};l.prototype._expandSingleValueDomain=function(n){return n[0]===n[1]?[n[0]-1,n[1]+1]:n};l.prototype.scale=function(n){return this._d3Scale(n)};l.prototype.scaleTransformation=function(n){return this.scale(n)};l.prototype.invertedTransformation=
function(n){return this.invert(n)};l.prototype.getTransformationExtent=function(){return this._getUnboundedExtent(!0)};l.prototype.getTransformationDomain=function(){return this.domain()};l.prototype.setTransformationDomain=function(n){this.domain(n)};l.prototype._getDomain=function(){return this._backingScaleDomain()};l.prototype._backingScaleDomain=function(n){if(null==n)return this._d3Scale.domain();this._d3Scale.domain(n);return this};l.prototype._getRange=function(){return this._d3Scale.range()};
l.prototype._setRange=function(n){this._d3Scale.range(n)};l.prototype.invert=function(n){return this._d3Scale.invert(n)};l.prototype.defaultTicks=function(){return this._d3Scale.ticks()};l.prototype._niceDomain=function(n,m){return this._d3Scale.copy().domain(n).nice(m).domain()};return l}(e(11).QuantitativeScale);c.Linear=b},function(b,c,e){var f=this&&this.__extends||function(n,m){function q(){this.constructor=n}for(var r in m)m.hasOwnProperty(r)&&(n[r]=m[r]);n.prototype=null===m?Object.create(m):
(q.prototype=m.prototype,new q)},g=e(1),h=e(0),l=e(3);b=function(n){function m(q){void 0===q&&(q=10);var r=n.call(this)||this;r._d3Scale=g.scaleLinear();r._base=q;r._pivot=r._base;r._setDomain(r._defaultExtent());if(1>=q)throw Error("ModifiedLogScale: The base must be \x3e 1");return r}f(m,n);m.prototype._adjustedLog=function(q){var r=0>q?-1:1;q*=r;q<this._pivot&&(q+=(this._pivot-q)/this._pivot);q=Math.log(q)/Math.log(this._base);return q*r};m.prototype._invertedAdjustedLog=function(q){var r=0>q?
-1:1;q=Math.pow(this._base,q*r);q<this._pivot&&(q=this._pivot*(q-1)/(this._pivot-1));return q*r};m.prototype.scale=function(q){return this._d3Scale(this._adjustedLog(q))};m.prototype.invert=function(q){return this._invertedAdjustedLog(this._d3Scale.invert(q))};m.prototype.scaleTransformation=function(q){return this.scale(q)};m.prototype.invertedTransformation=function(q){return this.invert(q)};m.prototype.getTransformationExtent=function(){return this._getUnboundedExtent(!0)};m.prototype.getTransformationDomain=
function(){return this.domain()};m.prototype.setTransformationDomain=function(q){this.domain(q)};m.prototype._getDomain=function(){return this._untransformedDomain};m.prototype._setDomain=function(q){this._untransformedDomain=q;n.prototype._setDomain.call(this,[this._adjustedLog(q[0]),this._adjustedLog(q[1])])};m.prototype._backingScaleDomain=function(q){if(null==q)return this._d3Scale.domain();this._d3Scale.domain(q);return this};m.prototype.ticks=function(){function q(E,C,D){return[E,C,D].sort(function(J,
M){return J-M})[1]}var r=h.Math.min(this._untransformedDomain,0),v=h.Math.max(this._untransformedDomain,0),u=q(r,v,-this._pivot),w=q(r,v,this._pivot);u=this._logTicks(-u,-r).map(function(E){return-E}).reverse();w=this._logTicks(w,v);var z=Math.max(r,-this._pivot),A=Math.min(v,this._pivot);z=g.scaleLinear().domain([z,A]).ticks(this._howManyTicks(z,A));u=u.concat(z).concat(w);1>=u.length&&(u=g.scaleLinear().domain([r,v]).ticks());return u};m.prototype._logTicks=function(q,r){var v=this,u=this._howManyTicks(q,
r);if(0===u)return[];var w=Math.floor(Math.log(q)/Math.log(this._base)),z=Math.ceil(Math.log(r)/Math.log(this._base));u=g.range(z,w,-Math.ceil((z-w)/u));w=g.range(this._base,1,-(this._base-1)).map(Math.floor);var A=h.Array.uniq(w);u=u.map(function(E){return A.map(function(C){return Math.pow(v._base,E-1)*C})});return h.Array.flatten(u).filter(function(E){return q<=E&&E<=r}).sort(function(E,C){return E-C})};m.prototype._howManyTicks=function(q,r){var v=this._adjustedLog(h.Math.min(this._untransformedDomain,
0)),u=this._adjustedLog(h.Math.max(this._untransformedDomain,0));return Math.ceil((this._adjustedLog(r)-this._adjustedLog(q))/(u-v)*l.ModifiedLog._DEFAULT_NUM_TICKS)};m.prototype._niceDomain=function(q){return q};m.prototype._defaultExtent=function(){return[0,this._base]};m.prototype._expandSingleValueDomain=function(q){return q[0]===q[1]?(q=q[0],0<q?[q/this._base,q*this._base]:0===q?[-this._base,this._base]:[q*this._base,q/this._base]):q};m.prototype._getRange=function(){return this._d3Scale.range()};
m.prototype._setRange=function(q){this._d3Scale.range(q)};m.prototype.defaultTicks=function(){return this._d3Scale.ticks()};return m}(e(11).QuantitativeScale);c.ModifiedLog=b},function(b,c,e){var f=e(0);c.intervalTickGenerator=function(g){if(0>=g)throw Error("interval must be positive number");return function(h){h=h.domain();var l=Math.min(h[0],h[1]);h=Math.max(h[0],h[1]);var n=Math.ceil(l/g)*g;l=0===l%g?[]:[l];var m=f.Math.range(0,Math.floor((h-n)/g)+1).map(function(q){return n+q*g});return l.concat(m).concat(0===
h%g?[]:[h])}};c.integerTickGenerator=function(){return function(g){var h=g.defaultTicks();return h.filter(function(l,n){return 0===l%1||0===n||n===h.length-1})}}},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(1),h=e(28);b=function(l){function n(){var m=l.call(this)||this;m._d3Scale=g.scaleTime();m.autoDomain();return m}f(n,l);n.prototype.tickInterval=
function(m,q){void 0===q&&(q=1);var r=g.scaleTime();n.timeIntervalToD3Time(m).every(q);r.domain(this.domain());r.range(this.range());return r.ticks()};n.prototype._setDomain=function(m){if(m[1]<m[0])throw Error("Scale.Time domain values must be in chronological order");return l.prototype._setDomain.call(this,m)};n.prototype._defaultExtent=function(){return[new Date("1970-01-01"),new Date("1970-01-02")]};n.prototype._expandSingleValueDomain=function(m){var q=m[0].getTime(),r=m[1].getTime();return q===
r?(m=new Date(q),m.setDate(m.getDate()-1),r=new Date(r),r.setDate(r.getDate()+1),[m,r]):m};n.prototype.scale=function(m){return this._d3Scale(m)};n.prototype.scaleTransformation=function(m){return this.scale(new Date(m))};n.prototype.invertedTransformation=function(m){return this.invert(m).getTime()};n.prototype.getTransformationExtent=function(){var m=this._getUnboundedExtent(!0);return[m[0].valueOf(),m[1].valueOf()]};n.prototype.getTransformationDomain=function(){var m=this.domain();return[m[0].valueOf(),
m[1].valueOf()]};n.prototype.setTransformationDomain=function(m){this.domain([new Date(m[0]),new Date(m[1])])};n.prototype._getDomain=function(){return this._backingScaleDomain()};n.prototype._backingScaleDomain=function(m){if(null==m)return this._d3Scale.domain();this._d3Scale.domain(m);return this};n.prototype._getRange=function(){return this._d3Scale.range()};n.prototype._setRange=function(m){this._d3Scale.range(m)};n.prototype.invert=function(m){return this._d3Scale.invert(m)};n.prototype.defaultTicks=
function(){return this._d3Scale.ticks()};n.prototype._niceDomain=function(m){return this._d3Scale.copy().domain(m).nice().domain()};n.timeIntervalToD3Time=function(m){switch(m){case h.TimeInterval.second:return g.timeSecond;case h.TimeInterval.minute:return g.timeMinute;case h.TimeInterval.hour:return g.timeHour;case h.TimeInterval.day:return g.timeDay;case h.TimeInterval.week:return g.timeWeek;case h.TimeInterval.month:return g.timeMonth;case h.TimeInterval.year:return g.timeYear;default:throw Error("TimeInterval specified does not exist: "+
m);}};return n}(e(11).QuantitativeScale);c.Time=b},function(b,c,e){var f=e(1),g=Array;c.add=function(h,l){if(h.length!==l.length)throw Error("attempted to add arrays of unequal length");return h.map(function(n,m){return h[m]+l[m]})};c.uniq=function(h){var l=f.set(),n=[];h.forEach(function(m){l.has(String(m))||(l.add(String(m)),n.push(m))});return n};c.flatten=function(h){return g.prototype.concat.apply([],h)};c.createFilledArray=function(h,l){for(var n=[],m=0;m<l;m++)n[m]="function"===typeof h?h(m):
h;return n}},function(b,c){b=function(){function e(f,g,h){this.maxIndex=this.minIndex=this.exitIndex=this.entryIndex=f;this.bucketValue=g;this.maxValue=this.minValue=h}e.prototype.isInBucket=function(f){return f==this.bucketValue};e.prototype.addToBucket=function(f,g){f<this.minValue&&(this.minValue=f,this.minIndex=g);f>this.maxValue&&(this.maxValue=f,this.maxIndex=g);this.exitIndex=g};e.prototype.getUniqueIndices=function(){var f=[this.entryIndex,this.maxIndex,this.minIndex,this.exitIndex];return f.filter(function(g,
h){return 0==h||g!=f[h-1]})};return e}();c.Bucket=b},function(b,c,e){var f=this&&this.__extends||function(g,h){function l(){this.constructor=g}for(var n in h)h.hasOwnProperty(n)&&(g[n]=h[n]);g.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)};b=function(g){function h(){return null!==g&&g.apply(this,arguments)||this}f(h,g);h.prototype.callCallbacks=function(){for(var l=this,n=[],m=0;m<arguments.length;m++)n[m]=arguments[m];this.forEach(function(q){q.apply(l,n)});return this};return h}(e(58).Set);
c.CallbackSet=b},function(b,c,e){function f(l){function n(r){r/=255;return.03928>=r?r/12.92:h.pow((r+.055)/1.055,2.4)}var m=g.rgb(l);l=n(m.r);var q=n(m.g);m=n(m.b);return.2126*l+.7152*q+.0722*m}var g=e(1),h=Math;c.contrast=function(l,n){l=f(l)+.05;n=f(n)+.05;return l>n?l/n:n/l};c.lightenColor=function(l,n){return g.color(l).brighter(n).rgb().toString()};c.colorTest=function(l,n){l.classed(n,!0);var m=l.style("background-color");if("transparent"===m)return null;m=/\((.+)\)/.exec(m);if(!m)return null;
m=m[1].split(",").map(function(q){q=+q;var r=q.toString(16);return 16>q?"0"+r:r});if(4===m.length&&"00"===m[3])return null;m="#"+m.join("");l.classed(n,!1);return m}},function(b,c,e){var f=e(1),g=e(57);b=function(){function h(){this._entities=[];this._rtree=new g.RTree;this._tree=f.quadtree().x(function(l){return Math.floor(l.position.x)}).y(function(l){return Math.floor(l.position.y)})}h.prototype.addAll=function(l,n,m){(v=this._entities).push.apply(v,l);if(void 0!==m)for(m=g.RTreeBounds.bounds(m),
v=0;v<l.length;v++){var q=l[v],r=g.RTreeBounds.entityBounds(n(q));g.RTreeBounds.isBoundsOverlapBounds(m,r)&&(this._tree.add(q),this._rtree.insert(r,q))}else for(this._tree.addAll(l),v=0;v<l.length;v++)q=l[v],r=g.RTreeBounds.entityBounds(n(q)),this._rtree.insert(r,q);var v};h.prototype.entityNearest=function(l){return this._tree.find(l.x,l.y)};h.prototype.entitiesInBounds=function(l){return this._rtree.intersect(g.RTreeBounds.entityBounds(l))};h.prototype.entitiesInXBounds=function(l){return this._rtree.intersectX(g.RTreeBounds.entityBounds(l))};
h.prototype.entitiesInYBounds=function(l){return this._rtree.intersectY(g.RTreeBounds.entityBounds(l))};h.prototype.entities=function(){return this._entities};return h}();c.EntityStore=b},function(b,c,e){var f=e(56);b=function(){function g(){"function"===typeof window.Map?this._es6Map=new window.Map:this._keyValuePairs=[]}g.prototype.set=function(h,l){if(f.isNaN(h))throw Error("NaN may not be used as a key to the Map");if(null!=this._es6Map)return this._es6Map.set(h,l),this;for(var n=0;n<this._keyValuePairs.length;n++)if(this._keyValuePairs[n].key===
h)return this._keyValuePairs[n].value=l,this;this._keyValuePairs.push({key:h,value:l});return this};g.prototype.get=function(h){if(null!=this._es6Map)return this._es6Map.get(h);for(var l=0;l<this._keyValuePairs.length;l++)if(this._keyValuePairs[l].key===h)return this._keyValuePairs[l].value};g.prototype.has=function(h){if(null!=this._es6Map)return this._es6Map.has(h);for(var l=0;l<this._keyValuePairs.length;l++)if(this._keyValuePairs[l].key===h)return!0;return!1};g.prototype.forEach=function(h,l){var n=
this;null!=this._es6Map?this._es6Map.forEach(function(m,q){return h.call(l,m,q,n)},l):this._keyValuePairs.forEach(function(m){h.call(l,m.value,m.key,n)})};g.prototype.delete=function(h){if(null!=this._es6Map)return this._es6Map.delete(h);for(var l=0;l<this._keyValuePairs.length;l++)if(this._keyValuePairs[l].key===h)return this._keyValuePairs.splice(l,1),!0;return!1};return g}();c.Map=b},function(b,c){c.assign=function(){for(var e=[],f=0;f<arguments.length;f++)e[f]=arguments[f];f={};for(var g=0;g<
e.length;g++)for(var h=e[g],l=0,n=Object.keys(h);l<n.length;l++){var m=n[l];f[m]=h[m]}return f}},function(b,c){b=function(){function e(){}e.prototype.split=function(f,g){for(var h=Math.ceil(f.length/2),l=0;l<h;l++)g[0].insert(f[l]);for(l=h;l<f.length;l++)g[1].insert(f[l])};return e}();c.SplitStrategyTrivial=b;b=function(){function e(){}e.prototype.split=function(f,g){f=f.slice();for(this.chooseFirstSplit(f,g);0<f.length;)this.addNext(f,g)};e.prototype.chooseFirstSplit=function(f,g){for(var h=0,l=
0,n=f.length-1,m=f.length-1,q=1;q<f.length-1;q++){var r=f[q];r.bounds.xl>f[n].bounds.xl?n=q:r.bounds.xh<f[h].bounds.xh&&(h=q);r.bounds.yl>f[m].bounds.yl?m=q:r.bounds.yh<f[l].bounds.yh&&(l=q)}l=Math.abs(f[h].bounds.xh-f[n].bounds.xl)>Math.abs(f[l].bounds.yh-f[m].bounds.yl)?[h,n]:[l,m];h=l[0];l=l[1];h===l&&(h=0,l=f.length-1);g[0].insert(f.splice(Math.max(h,l),1)[0]);g[1].insert(f.splice(Math.min(h,l),1)[0])};e.prototype.addNext=function(f,g){for(var h=null,l=null,n=null,m=0;m<f.length;m++){var q=f[m],
r=g[0].unionAreaDifference(q.bounds);q=g[1].unionAreaDifference(q.bounds);if(r<l||null==h)h=m,l=r,n=g[0];q<l&&(h=m,l=q,n=g[1])}n.insert(f.splice(h,1)[0])};return e}();c.SplitStrategyLinear=b},function(b,c,e){var f=e(1),g=e(0);b=e(10);c.IStackingOrder=b.makeEnum(["topdown","bottomup"]);var h=Math;c.stack=function(l,n,m,q){void 0===q&&(q="bottomup");var r=f.map(),v=f.map(),u=new g.Map;"topdown"===q&&(l=l.slice(),l.reverse());l.forEach(function(w){var z=new g.Map;w.data().forEach(function(A,E){var C=
String(n(A,E,w)),D=+m(A,E,w),J=0<=D?r:v;if(J.has(C)){var M=J.get(C);J.set(C,M+D)}else M=0,J.set(C,D);z.set(C,{offset:M,value:D,axisValue:n(A,E,w),originalDatum:A,originalDataset:w,originalIndex:E})});u.set(w,z)});return u};c.stackedExtents=function(l){var n=new g.Map,m=new g.Map;l.forEach(function(q){q.forEach(function(r,v){var u=g.Math.max([r.offset+r.value,r.offset],r.offset),w=g.Math.min([r.offset+r.value,r.offset],r.offset),z=r.axisValue;n.has(v)?n.get(v).extent<u&&n.set(v,{extent:u,axisValue:z,
stackedDatum:r}):n.set(v,{extent:u,axisValue:z,stackedDatum:r});m.has(v)?m.get(v).extent>w&&m.set(v,{extent:w,axisValue:z,stackedDatum:r}):m.set(v,{extent:w,axisValue:z,stackedDatum:r})})});return{maximumExtents:n,minimumExtents:m}};c.stackedExtent=function(l,n,m){var q=[];l.forEach(function(v,u){u.data().forEach(function(w,z){if(null==m||m(w,z,u))w=v.get(String(n(w,z,u))),q.push(w.value+w.offset)})});l=g.Math.max(q,0);var r=g.Math.min(q,0);return[h.min(r,0),h.max(0,l)]};c.normalizeKey=function(l){return String(l)}},
function(b,c,e){var f=e(0);c.getTranslator=function(h){h=h.root().rootElement().node();var l=h.__Plottable_ClientTranslator;null==l&&(l=new g(h),h.__Plottable_ClientTranslator=l);return l};var g=function(){function h(l){this._rootElement=l}h.prototype.computePosition=function(l,n){l={x:l,y:n};n=f.Math.getCumulativeTransform(this._rootElement);return null==n?l:f.Math.applyTransform(n,l)};h.isEventInside=function(l,n){return f.DOM.contains(l.root().rootElement().node(),n.target)};return h}();c.Translator=
g},function(b,c,e){Object.defineProperty(c,"__esModule",{value:!0});var f=e(124);e.d(c,"easeLinear",function(){return f.a});var g=e(126);e.d(c,"easeQuad",function(){return g.a});e.d(c,"easeQuadIn",function(){return g.b});e.d(c,"easeQuadOut",function(){return g.c});e.d(c,"easeQuadInOut",function(){return g.a});var h=e(121);e.d(c,"easeCubic",function(){return h.a});e.d(c,"easeCubicIn",function(){return h.b});e.d(c,"easeCubicOut",function(){return h.c});e.d(c,"easeCubicInOut",function(){return h.a});
var l=e(125);e.d(c,"easePoly",function(){return l.a});e.d(c,"easePolyIn",function(){return l.b});e.d(c,"easePolyOut",function(){return l.c});e.d(c,"easePolyInOut",function(){return l.a});var n=e(127);e.d(c,"easeSin",function(){return n.a});e.d(c,"easeSinIn",function(){return n.b});e.d(c,"easeSinOut",function(){return n.c});e.d(c,"easeSinInOut",function(){return n.a});var m=e(123);e.d(c,"easeExp",function(){return m.a});e.d(c,"easeExpIn",function(){return m.b});e.d(c,"easeExpOut",function(){return m.c});
e.d(c,"easeExpInOut",function(){return m.a});var q=e(120);e.d(c,"easeCircle",function(){return q.a});e.d(c,"easeCircleIn",function(){return q.b});e.d(c,"easeCircleOut",function(){return q.c});e.d(c,"easeCircleInOut",function(){return q.a});var r=e(119);e.d(c,"easeBounce",function(){return r.a});e.d(c,"easeBounceIn",function(){return r.b});e.d(c,"easeBounceOut",function(){return r.a});e.d(c,"easeBounceInOut",function(){return r.c});var v=e(118);e.d(c,"easeBack",function(){return v.a});e.d(c,"easeBackIn",
function(){return v.b});e.d(c,"easeBackOut",function(){return v.c});e.d(c,"easeBackInOut",function(){return v.a});var u=e(122);e.d(c,"easeElastic",function(){return u.a});e.d(c,"easeElasticIn",function(){return u.b});e.d(c,"easeElasticOut",function(){return u.a});e.d(c,"easeElasticInOut",function(){return u.c})},function(b,c,e){e.d(c,"b",function(){return f});e.d(c,"c",function(){return g});e.d(c,"a",function(){return h});var f=function m(n){function q(r){return r*r*((n+1)*r-n)}n=+n;q.overshoot=m;
return q}(1.70158),g=function q(m){function r(v){return--v*v*((m+1)*v+m)+1}m=+m;r.overshoot=q;return r}(1.70158),h=function r(q){function v(u){return(1>(u*=2)?u*u*((q+1)*u-q):(u-=2)*u*((q+1)*u+q)+2)/2}q=+q;v.overshoot=r;return v}(1.70158)},function(b,c){function e(w){return(w=+w)<f?u*w*w:w<h?u*(w-=g)*w+l:w<m?u*(w-=n)*w+q:u*(w-=r)*w+v}c.b=function(w){return 1-e(1-w)};c.a=e;c.c=function(w){return(1>=(w*=2)?1-e(1-w):e(w-1)+1)/2};var f=4/11,g=6/11,h=8/11,l=.75,n=9/11,m=10/11,q=.9375,r=21/22,v=.984375,
u=1/f/f},function(b,c){c.b=function(e){return 1-Math.sqrt(1-e*e)};c.c=function(e){return Math.sqrt(1- --e*e)};c.a=function(e){return(1>=(e*=2)?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}},function(b,c){c.b=function(e){return e*e*e};c.c=function(e){return--e*e*e+1};c.a=function(e){return(1>=(e*=2)?e*e*e:(e-=2)*e*e+2)/2}},function(b,c,e){e.d(c,"b",function(){return g});e.d(c,"a",function(){return h});e.d(c,"c",function(){return l});var f=2*Math.PI,g=function r(m,q){function v(w){return m*Math.pow(2,
10*--w)*Math.sin((u-w)/q)}var u=Math.asin(1/(m=Math.max(1,m)))*(q/=f);v.amplitude=function(w){return r(w,q*f)};v.period=function(w){return r(m,w)};return v}(1,.3),h=function v(q,r){function u(z){return 1-q*Math.pow(2,-10*(z=+z))*Math.sin((z+w)/r)}var w=Math.asin(1/(q=Math.max(1,q)))*(r/=f);u.amplitude=function(z){return v(z,r*f)};u.period=function(z){return v(q,z)};return u}(1,.3),l=function u(r,v){function w(A){return(0>(A=2*A-1)?r*Math.pow(2,10*A)*Math.sin((z-A)/v):2-r*Math.pow(2,-10*A)*Math.sin((z+
A)/v))/2}var z=Math.asin(1/(r=Math.max(1,r)))*(v/=f);w.amplitude=function(A){return u(A,v*f)};w.period=function(A){return u(r,A)};return w}(1,.3)},function(b,c){c.b=function(e){return Math.pow(2,10*e-10)};c.c=function(e){return 1-Math.pow(2,-10*e)};c.a=function(e){return(1>=(e*=2)?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}},function(b,c){c.a=function(e){return+e}},function(b,c,e){e.d(c,"b",function(){return f});e.d(c,"c",function(){return g});e.d(c,"a",function(){return h});var f=function m(n){function q(r){return Math.pow(r,
n)}n=+n;q.exponent=m;return q}(3),g=function q(m){function r(v){return 1-Math.pow(1-v,m)}m=+m;r.exponent=q;return r}(3),h=function r(q){function v(u){return(1>=(u*=2)?Math.pow(u,q):2-Math.pow(2-u,q))/2}q=+q;v.exponent=r;return v}(3)},function(b,c){c.b=function(e){return e*e};c.c=function(e){return e*(2-e)};c.a=function(e){return(1>=(e*=2)?e*e:--e*(2-e)+1)/2}},function(b,c){c.b=function(g){return 1-Math.cos(g*f)};c.c=function(g){return Math.sin(g*f)};c.a=function(g){return(1-Math.cos(e*g))/2};var e=
Math.PI,f=e/2},function(b,c,e){function f(h){return!0===g(h)&&"[object Object]"===Object.prototype.toString.call(h)}var g=e(129);b.exports=function(h){if(!1===f(h))return!1;h=h.constructor;if("function"!==typeof h)return!1;h=h.prototype;return!1===f(h)||!1===h.hasOwnProperty("isPrototypeOf")?!1:!0}},function(b){b.exports=function(c){return null!=c&&"object"===typeof c&&!1===Array.isArray(c)}},function(b,c){b=function(){function e(f,g,h){void 0===g&&(g=10);void 0===h&&(h={});var l=this;this.ctx=f;
this.lineHeight=g;this.style=h;this.createRuler=function(){return function(n){l.ctx.font=l.style.font;return{width:l.ctx.measureText(n).width,height:l.lineHeight}}};this.createPen=function(n,m,q){null==q&&(q=l.ctx);q.save();q.translate(m.translate[0],m.translate[1]);q.rotate(m.rotate*Math.PI/180);return l.createCanvasPen(q)};void 0===this.style.fill&&(this.style.fill="#444")}e.prototype.createCanvasPen=function(f){var g=this;return{destroy:function(){f.restore()},write:function(h,l,n,m){f.textAlign=
l;null!=g.style.font&&(f.font=g.style.font);null!=g.style.fill&&(f.fillStyle=g.style.fill,f.fillText(h,n,m));null!=g.style.stroke&&(f.strokeStyle=g.style.fill,f.strokeText(h,n,m))}}};return e}();c.CanvasContext=b},function(b,c){var e=function(){function f(){}f.append=function(g,h){for(var l=[],n=2;n<arguments.length;n++)l[n-2]=arguments[n];l=f.create.apply(f,[h].concat(l));g.appendChild(l);return l};f.create=function(g){for(var h=[],l=1;l<arguments.length;l++)h[l-1]=arguments[l];l=document.createElementNS(f.SVG_NS,
g);f.addClasses.apply(f,[l].concat(h));return l};f.addClasses=function(g){for(var h=[],l=1;l<arguments.length;l++)h[l-1]=arguments[l];h=h.filter(function(n){return null!=n});null!=g.classList?h.forEach(function(n){g.classList.add(n)}):g.setAttribute("class",h.join(" "))};f.getDimensions=function(g){if(g.getBBox)try{var h=g.getBBox();return{width:h.width,height:h.height}}catch(l){}return{height:0,width:0}};return f}();e.SVG_NS="http://www.w3.org/2000/svg";c.SvgUtils=e;b=function(){function f(g,h,l){void 0===
l&&(l=!1);var n=this;this.element=g;this.className=h;this.addTitleElement=l;this.createRuler=function(){var m=n.getTextElements(n.element),q=m.parentElement,r=m.containerElement,v=m.textElement;return function(u){q.appendChild(r);v.textContent=u;u=e.getDimensions(v);q.removeChild(r);return u}};this.createPen=function(m,q,r){null==r&&(r=n.element);r=e.append(r,"g","text-container",n.className);n.addTitleElement&&(e.append(r,"title").textContent=m,r.setAttribute("title",m));m=e.append(r,"g","text-area");
m.setAttribute("transform","translate("+q.translate[0]+","+q.translate[1]+")"+("rotate("+q.rotate+")"));return n.createSvgLinePen(m)}}f.prototype.setAddTitleElement=function(g){this.addTitleElement=g};f.prototype.createSvgLinePen=function(g){return{write:function(h,l,n,m){var q=e.append(g,"text","text-line");q.textContent=h;q.setAttribute("text-anchor",l);q.setAttribute("transform","translate("+n+","+m+")");q.setAttribute("y","-0.25em")}}};f.prototype.getTextElements=function(g){if("text"===g.tagName){var h=
g.parentElement;null==h&&(h=g.parentNode);h.removeChild(g);return{containerElement:g,parentElement:h,textElement:g}}var l=g.querySelector("text");if(null!=l)return h=g.parentElement,null==h&&(h=g.parentNode),h.removeChild(g),{containerElement:g,parentElement:h,textElement:l};h=e.create("text",this.className);return{containerElement:h,parentElement:g,textElement:h}};return f}();c.SvgContext=b},function(b,c,e){var f=this&&this.__extends||function(l,n){function m(){this.constructor=l}for(var q in n)n.hasOwnProperty(q)&&
(l[q]=n[q]);l.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)},g=e(21),h=e(36);b=function(l){function n(m){var q=l.call(this,m)||this;q.dimCache=new g.Cache(function(r){return q._measureNotFromCache(r)});return q}f(n,l);n.prototype._measureNotFromCache=function(m){return l.prototype.measure.call(this,m)};n.prototype.measure=function(m){void 0===m&&(m=h.AbstractMeasurer.HEIGHT_TEXT);return this.dimCache.get(m)};n.prototype.reset=function(){this.dimCache.clear();l.prototype.reset.call(this)};
return n}(e(60).CacheCharacterMeasurer);c.CacheMeasurer=b},function(b,c,e){var f=e(59),g=e(62),h=e(64),l=e(66);b=function(){function n(m){this.context=m;this.measurer=new g.CacheMeasurer(this.context);this.wrapper=new h.Wrapper;this.writer=new l.Writer(this.measurer,this.context,this.wrapper)}n.svg=function(m,q,r){return new n(new f.SvgContext(m,q,r))};n.canvas=function(m,q,r){return new n(new f.CanvasContext(m,q,r))};n.prototype.write=function(m,q,r,v,u){this.writer.write(m,q,r,v,u)};n.prototype.clearMeasurerCache=
function(){this.measurer.reset()};return n}();c.Typesetter=b},function(b,c){b=function(){function e(f){this.cache={};this.compute=f}e.prototype.get=function(f){this.cache.hasOwnProperty(f)||(this.cache[f]=this.compute(f));return this.cache[f]};e.prototype.clear=function(){this.cache={};return this};return e}();c.Cache=b},function(b,c){c.Methods=function(){function e(){}e.arrayEq=function(f,g){if(null==f||null==g)return f===g;if(f.length!==g.length)return!1;for(var h=0;h<f.length;h++)if(f[h]!==g[h])return!1;
return!0};e.objEq=function(f,g){if(null==f||null==g)return f===g;var h=Object.keys(f).sort(),l=Object.keys(g).sort(),n=h.map(function(q){return f[q]}),m=l.map(function(q){return g[q]});return e.arrayEq(h,l)&&e.arrayEq(n,m)};e.strictEq=function(f,g){return f===g};e.defaults=function(f){for(var g=[],h=1;h<arguments.length;h++)g[h-1]=arguments[h];if(null==f)throw new TypeError("Cannot convert undefined or null to object");var l=Object(f);g.forEach(function(n){if(null!=n)for(var m in n)Object.prototype.hasOwnProperty.call(n,
m)&&(l[m]=n[m])});return l};return e}()},function(b,c){c.StringMethods=function(){function e(){}e.combineWhitespace=function(f){return f.replace(/[ \t]+/g," ")};e.isNotEmptyString=function(f){return f&&""!==f.trim()};e.trimStart=function(f,g){if(!f)return f;f=f.split("");var h=g?function(l){return l.split(g).some(e.isNotEmptyString)}:e.isNotEmptyString;return f.reduce(function(l,n){return h(l+n)?l+n:l},"")};e.trimEnd=function(f,g){if(!f)return f;f=f.split("");f.reverse();f=e.trimStart(f.join(""),
g).split("");f.reverse();return f.join("")};return e}()},function(b,c){b=function(){function e(){this.WordDividerRegExp=/\W/;this.WhitespaceRegExp=/\s/}e.prototype.tokenize=function(f){var g=this;return f.split("").reduce(function(h,l){return h.slice(0,-1).concat(g.shouldCreateNewToken(h[h.length-1],l))},[""])};e.prototype.shouldCreateNewToken=function(f,g){if(!f)return[g];var h=f[f.length-1];return this.WhitespaceRegExp.test(h)&&this.WhitespaceRegExp.test(g)?[f+g]:this.WhitespaceRegExp.test(h)||
this.WhitespaceRegExp.test(g)?[f,g]:this.WordDividerRegExp.test(h)||this.WordDividerRegExp.test(g)?h===g?[f+g]:[f,g]:[f+g]};return e}();c.Tokenizer=b},function(b,c,e){var f=this&&this.__extends||function(g,h){function l(){this.constructor=g}for(var n in h)h.hasOwnProperty(n)&&(g[n]=h[n]);g.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)};b=function(g){function h(){return g.apply(this,arguments)||this}f(h,g);h.prototype.wrap=function(l,n,m,q){void 0===q&&(q=Infinity);if(1<l.split("\n").length)throw Error("SingleLineWrapper is designed to work only on single line");
var r=g.prototype.wrap.call(this,l,n,m,q);if(2>r.noLines)return r;for(var v=0,u=0;u<h.NO_WRAP_ITERATIONS&&m>v;++u){var w=(m+v)/2,z=g.prototype.wrap.call(this,l,n,w,q);this.areSameResults(r,z)?(m=w,r=z):v=w}return r};h.prototype.areSameResults=function(l,n){return l.noLines===n.noLines&&l.truncatedText===n.truncatedText};return h}(e(65).Wrapper);b.NO_WRAP_ITERATIONS=5;c.SingleLineWrapper=b},function(b,c,e){var f=e(21),g={textRotation:0,textShear:0,xAlign:"left",yAlign:"top"};b=function(){function h(l,
n,m){this._measurer=l;this._penFactory=n;this._wrapper=m}h.prototype.measurer=function(l){this._measurer=l;return this};h.prototype.wrapper=function(l){this._wrapper=l;return this};h.prototype.penFactory=function(l){this._penFactory=l;return this};h.prototype.write=function(l,n,m,q,r){void 0===q&&(q={});q=f.Methods.defaults({},g,q);if(-1===h.SupportedRotation.indexOf(q.textRotation))throw Error("unsupported rotation - "+q.textRotation+". Supported rotations are "+h.SupportedRotation.join(", "));if(null!=
q.textShear&&-80>q.textShear||80<q.textShear)throw Error("unsupported shear angle - "+q.textShear+". Must be between -80 and 80");var v=45<Math.abs(Math.abs(q.textRotation)-90),u=v?n:m,w=v?m:n,z=q.textShear,A=z*Math.PI/180;v=this._measurer.measure().height;var E=v*Math.tan(A);u=u/Math.cos(A)-Math.abs(E);var C=w*Math.cos(A);w=f.StringMethods.combineWhitespace(l);w=(this._wrapper?this._wrapper.wrap(w,this._measurer,u,C).wrappedText:w).split("\n");A=h.XOffsetFactor[q.xAlign]*u*Math.sin(A)-h.YOffsetFactor[q.yAlign]*
(C-w.length*v);z=q.textRotation+z;switch(q.textRotation){case 90:n=[n+A,0];break;case -90:n=[-A,m];break;case 180:n=[n,m+A];break;default:n=[0,-A]}l=this._penFactory.createPen(l,{translate:n,rotate:z},r);this.writeLines(w,l,u,v,E,q.xAlign);null!=l.destroy&&l.destroy()};h.prototype.writeLines=function(l,n,m,q,r,v){l.forEach(function(u,w){n.write(u,h.AnchorConverter[v],(0<r?(w+1)*r:w*r)+m*h.XOffsetFactor[v],(w+1)*q)})};return h}();b.SupportedRotation=[-90,0,180,90];b.AnchorConverter={center:"middle",
left:"start",right:"end"};b.XOffsetFactor={center:.5,left:0,right:1};b.YOffsetFactor={bottom:1,center:.5,top:0};c.Writer=b},function(b,c,e){function f(g){for(var h in g)c.hasOwnProperty(h)||(c[h]=g[h])}e(69);b=e(7);c.Animators=b;b=e(67);c.Axes=b;b=e(37);c.Components=b;b=e(23);c.Configs=b;b=e(8);c.Formatters=b;b=e(30);c.RenderController=b;b=e(39);c.RenderPolicies=b;b=e(31);c.SymbolFactories=b;b=e(13);c.Dispatchers=b;b=e(14);c.Drawers=b;b=e(25);c.Interactions=b;b=e(19);c.Plots=b;b=e(3);c.Scales=b;b=
e(0);c.Utils=b;f(e(22));b=e(28);c.TimeInterval=b.TimeInterval;f(e(4));f(e(29));f(e(38));b=e(68);c.version=b.version;f(e(24));f(e(6));f(e(15));f(e(40));f(e(16));f(e(2));f(e(11));f(e(17))}])}"object"===typeof exports&&"object"===typeof module?module.exports=bl(require("d3")):"function"===typeof define&&define.amd?define(["d3"],bl):"object"===typeof exports?exports.Plottable=bl(require("d3")):this.Plottable=bl(this.d3);
</script>
<style>
.plottable-colors-0 {
  background-color: #5279c7; /* INDIGO */
}

.plottable-colors-1 {
  background-color: #fd373e; /* CORAL_RED */
}

.plottable-colors-2 {
  background-color: #63c261; /* FERN */
}

.plottable-colors-3 {
  background-color: #fad419; /* BRIGHT_SUN */
}

.plottable-colors-4 {
  background-color: #2c2b6f; /* JACARTA */
}

.plottable-colors-5 {
  background-color: #ff7939; /* BURNING_ORANGE */
}

.plottable-colors-6 {
  background-color: #db2e65; /* CERISE_RED */
}

.plottable-colors-7 {
  background-color: #99ce50; /* CONIFER */
}

.plottable-colors-8 {
  background-color: #962565; /* ROYAL_HEATH */
}

.plottable-colors-9 {
  background-color: #06cccc; /* ROBINS_EGG_BLUE */
}

/**
 * User-supplied renderTo element.
 */
.plottable {
  display: block; /* must be block elements for width/height calculations to work in Firefox. */
  pointer-events: visibleFill;
  position: relative;
  /**
   * Pre 3.0, users could set the dimension of the root element in two ways: either using CSS
   * (inline or through a stylesheet), or using the SVG width/height attributes. By default, we
   * set the SVG width/height attributes to 100%.
   *
   * Post 3.0 the root element is always a normal div and the only way to set the dimensions is
   * to use CSS. To replicate the "100%-by-default" behavior, we apply width/height 100%.
   */
  width: 100%;
  height: 100%;
}

/**
 * The _element that roots each Component's DOM.
 */
.plottable .component {
  /* Allow components to be positioned with explicit left/top/width/height styles */
  position: absolute;
}

.plottable .background-container,
.plottable .content,
.plottable .foreground-container {
  position: absolute;
  width: 100%;
  height: 100%;
}

/**
 * Don't allow svg elements above the content to steal events
 */
.plottable .foreground-container {
  pointer-events: none;
}

.plottable .component-overflow-hidden {
  overflow: hidden;
}

.plottable .component-overflow-visible {
  overflow: visible;
}

.plottable .plot-canvas-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.plottable .plot-canvas {
  width: 100%;
  height: 100%;
  /**
   * Play well with deferred rendering.
   */
  transform-origin: 0px 0px 0px;
}

.plottable text {
  text-rendering: geometricPrecision;
}

.plottable .label text {
  font-family: "Helvetica Neue", sans-serif;
  fill: #32313F;
}

.plottable .bar-label-text-area text {
  font-family: "Helvetica Neue", sans-serif;
  font-size: 12px;
}

.plottable .label-area text {
  fill: #32313F;
  font-family: "Helvetica Neue", sans-serif;
  font-size: 14px;
}

.plottable .light-label text {
  fill: white;
}

.plottable .dark-label text {
  fill: #32313F;
}

.plottable .off-bar-label text {
  fill: #32313F;
}

.plottable .stacked-bar-label text {
  fill: #32313F;
  font-style: normal;
}

.plottable .stacked-bar-plot .off-bar-label {
  /* HACKHACK #2795: correct off-bar label logic to be implemented on StackedBar */
  visibility: hidden !important;
}

.plottable .axis-label text {
  font-size: 10px;
  font-weight: bold;
  letter-spacing: 1px;
  line-height: normal;
  text-transform: uppercase;
}

.plottable .title-label text {
  font-size: 20px;
  font-weight: bold;
}

.plottable .axis line.baseline {
  stroke: #CCC;
  stroke-width: 1px;
}

.plottable .axis line.tick-mark {
  stroke: #CCC;
  stroke-width: 1px;
}

.plottable .axis text {
  fill: #32313F;
  font-family: "Helvetica Neue", sans-serif;
  font-size: 12px;
  font-weight: 200;
  line-height: normal;
}

.plottable .axis .annotation-circle {
  fill: white;
  stroke-width: 1px;
  stroke: #CCC;
}

.plottable .axis .annotation-line {
  stroke: #CCC;
  stroke-width: 1px;
}

.plottable .axis .annotation-rect {
  stroke: #CCC;
  stroke-width: 1px;
  fill: white;
}

.plottable .bar-plot .baseline {
  stroke: #999;
}

.plottable .gridlines line {
  stroke: #3C3C3C; /* hackhack: gridlines should be solid; see #820 */
  opacity: 0.25;
  stroke-width: 1px;
}

.plottable .selection-box-layer .selection-area {
  fill: black;
  fill-opacity: 0.03;
  stroke: #CCC;
}
/* DragBoxLayer */
.plottable .drag-box-layer.x-resizable .drag-edge-lr {
  cursor: ew-resize;
}
.plottable .drag-box-layer.y-resizable .drag-edge-tb {
  cursor: ns-resize;
}

.plottable .drag-box-layer.x-resizable.y-resizable .drag-corner-tl {
  cursor: nwse-resize;
}
.plottable .drag-box-layer.x-resizable.y-resizable .drag-corner-tr {
  cursor: nesw-resize;
}
.plottable .drag-box-layer.x-resizable.y-resizable .drag-corner-bl {
  cursor: nesw-resize;
}
.plottable .drag-box-layer.x-resizable.y-resizable .drag-corner-br {
  cursor: nwse-resize;
}

.plottable .drag-box-layer.movable .selection-area {
  cursor: move; /* IE fallback */
  cursor: -moz-grab;
  cursor: -webkit-grab;
  cursor: grab;
}

.plottable .drag-box-layer.movable .selection-area:active {
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  cursor: grabbing;
}
/* /DragBoxLayer */

.plottable .guide-line-layer line.guide-line {
  stroke: #CCC;
  stroke-width: 1px;
}

.plottable .drag-line-layer.enabled.vertical line.drag-edge {
  cursor: ew-resize;
}

.plottable .drag-line-layer.enabled.horizontal line.drag-edge {
  cursor: ns-resize;
}

.plottable .legend text {
  fill: #32313F;
  font-family: "Helvetica Neue", sans-serif;
  font-size: 12px;
  font-weight: bold;
  line-height: normal;
}

.plottable .interpolated-color-legend rect.swatch-bounding-box {
  fill: none;
  stroke: #CCC;
  stroke-width: 1px;
  pointer-events: none;
}

.plottable .waterfall-plot line.connector {
  stroke: #CCC;
  stroke-width: 1px;
}

.plottable .pie-plot .arc.outline {
  stroke-linejoin: round;
}
</style>






<script>//~~WEBPATH~~/vz-chart-helpers/vz-chart-helpers.js
var cl;
(function(a){function b(){var g=new Plottable.Scales.Linear;g.tickGenerator();var h=new Plottable.Axes.Numeric(g,"bottom");h.formatter(a.stepFormatter);return{scale:g,axis:h,accessor:function(l){return l.step}}}function c(){var g=new Plottable.Scales.Time;return{scale:g,axis:new Plottable.Axes.Time(g,"bottom"),accessor:function(h){return h.wall_time}}}function e(){var g=new Plottable.Scales.Linear;return{scale:g,axis:new Plottable.Axes.Numeric(g,"bottom"),accessor:a.relativeAccessor}}a.SYMBOLS_LIST=[{character:"\u25fc",
method:Plottable.SymbolFactories.square},{character:"\u25c6",method:Plottable.SymbolFactories.diamond},{character:"\u25b2",method:Plottable.SymbolFactories.triangle},{character:"\u2605",method:Plottable.SymbolFactories.star},{character:"\u271a",method:Plottable.SymbolFactories.cross}];var f;(function(g){g.STEP="step";g.RELATIVE="relative";g.WALL_TIME="wall_time"})(f=a.XType||(a.XType={}));a.Y_TOOLTIP_FORMATTER_PRECISION=4;a.STEP_FORMATTER_PRECISION=4;a.Y_AXIS_FORMATTER_PRECISION=3;a.TOOLTIP_Y_PIXEL_OFFSET=
20;a.TOOLTIP_CIRCLE_SIZE=4;a.NAN_SYMBOL_SIZE=6;a.multiscaleFormatter=function(g){return function(h){var l=Math.abs(h);1E-15>l&&(l=0);return(1E4<=l?d3.format("."+g+"~e"):0<l&&.01>l?d3.format("."+g+"~e"):d3.format("."+g+"~g"))(h)}};a.computeDomain=function(g,h){g=g.filter(function(m){return isFinite(m)});if(0===g.length)return[-.1,1.1];h?(g=_.sortBy(g),h=d3.quantile(g,.05),g=d3.quantile(g,.95)):(h=d3.min(g),g=d3.max(g));var l=g-h;var n=0===l?1.1*Math.abs(h)+1.1:.2*l;h=[0<=h&&h<l?-.1*g:h-n,g+n];return h=
d3.scaleLinear().domain(h).nice().domain()};a.accessorize=function(g){return function(h){return h[g]}};a.stepFormatter=d3.format("."+a.STEP_FORMATTER_PRECISION+"~s");a.stepX=b;a.timeFormatter=Plottable.Formatters.time("%a %b %e, %H:%M:%S");a.wallX=c;a.relativeAccessor=function(g,h,l){if(null!=g.relative)return g.relative;h=l.data();return(+g.wall_time-(0<h.length?+h[0].wall_time:0))/36E5};a.relativeFormatter=function(g){var h="",l=Math.floor(g/24);g-=24*l;l&&(h+=l+"d ");var n=Math.floor(g);g=60*(g-
n);if(n||l)h+=n+"h ";var m=Math.floor(g);g=60*(g-m);if(m||n||l)h+=m+"m ";return h+Math.floor(g)+"s"};a.relativeX=e;a.getXComponents=function(g){switch(g){case f.STEP:return b();case f.WALL_TIME:return c();case f.RELATIVE:return e();default:throw Error("invalid xType: "+g);}}})(cl||(cl={}));
</script>





<dom-module id="vz-chart-tooltip">
  <template>
    <template id="template">
      <div class="content">
        <table>
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
    </template>
    <style>
    :host {
      pointer-events: none;
    }

    .content {
      background: rgba(0, 0, 0, .8);
      border-radius: 4px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, .3);
      color: #fff;
      opacity: 0;
      overflow: hidden;
      pointer-events: none;
      position: fixed;
      will-change: transform;
      z-index: 5;
    }

    table {
      font-size: 13px;
      line-height: 1.4em;
      margin-top: 10px;
      padding: 8px;
    }

    thead {
      font-size: 14px;
    }

    tbody {
      font-size: 13px;
      line-height: 21px;
      white-space: nowrap;
    }

    td {
      padding: 0 5px;
    }

    .swatch {
      border-radius: 50%;
      display: block;
      height: 18px;
      width: 18px;
    }

    .closest .swatch {
      box-shadow: inset 0 0 0 2px #fff;
    }

    th {
      padding: 0 5px;
      text-align: left;
    }

    .distant td:not(.swatch) {
      opacity: .8;
    }

    .ghost {
      opacity: .2;
      stroke-width: 1px;
    }
    </style>
  </template>
  <script>//~~WEBPATH~~/vz-chart-helpers/vz-chart-tooltip.js
var dl;
(function(a){var b;(function(c){c.AUTO="auto";c.BOTTOM="bottom";c.RIGHT="right"})(b=a.TooltipPosition||(a.TooltipPosition={}));Polymer({is:"vz-chart-tooltip",properties:{position:{type:String,value:b.AUTO},minDistFromEdge:{type:Number,value:15}},ready:function(){this._tunnel=this._raf=this._styleCache=null},attached:function(){this._tunnel=this._createTunnel()},detached:function(){this.hide();this._removeTunnel(this._tunnel);this._tunnel=null},hide:function(){window.cancelAnimationFrame(this._raf);this._styleCache=
null;this.content().style.opacity=0},content:function(){return this._tunnel.firstElementChild},updateAndPosition:function(c,e){var f=this;e.forEach(function(g){return f.scopeSubtree(g)});window.cancelAnimationFrame(this._raf);this._raf=window.requestAnimationFrame(function(){f.isAttached&&f._repositionImpl(c)})},_repositionImpl:function(c){var e=this.content();c=c.getBoundingClientRect();var f=e.getBoundingClientRect(),g=window.innerHeight,h=document.body.clientWidth,l=c.top,n=l+c.height,m=f.height+
cl.TOOLTIP_Y_PIXEL_OFFSET,q=null,r=Math.max(this.minDistFromEdge,c.left),v=null,u=l;this.position==b.RIGHT?r=c.right:(u=n+cl.TOOLTIP_Y_PIXEL_OFFSET,h<r+f.width+this.minDistFromEdge&&(r=null,v=this.minDistFromEdge));this.position==b.AUTO&&0<c.top-m&&g<c.top+c.height+m&&(u=null,q=g-l+cl.TOOLTIP_Y_PIXEL_OFFSET);c={opacity:1,left:r?r+"px":null,right:v?v+"px":null,top:u?u+"px":null,bottom:q?q+"px":null};_.isEqual(this._styleCache,c)||(Object.assign(e.style,c),this._styleCache=c)},_createTunnel:function(){var c=
document.createElement("div");c.classList.add(this.is+"-tunnel");var e=this.instanceTemplate(this.$.template);this.scopeSubtree(e);c.appendChild(e);document.body.appendChild(c);return c},_removeTunnel:function(c){document.body.removeChild(c)}})})(dl||(dl={}));
</script>
</dom-module>






<script>//~~WEBPATH~~/vz-line-chart/dragZoomInteraction.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();var el;
(function(a){var b=function(c){function e(f,g,h){var l=c.call(this)||this;l.easeFn=d3.easeCubicInOut;l._animationTime=750;l.xScale(f);l.yScale(g);l._dragInteraction=new Plottable.Interactions.Drag;l._doubleClickInteraction=new Plottable.Interactions.Click;l.setupCallbacks();l.unzoomMethod=h;l.onDetach(function(){l._doubleClickInteraction.detachFrom();l._dragInteraction.detachFrom()});l.onAnchor(function(){l._doubleClickInteraction.attachTo(l);l._dragInteraction.attachTo(l)});return l}Qk(e,c);e.prototype.interactionStart=
function(f){this.onStart=f};e.prototype.interactionEnd=function(f){this.onEnd=f};e.prototype.dragInteraction=function(){return this._dragInteraction};e.prototype.setupCallbacks=function(){var f=this,g=!1;this._dragInteraction.onDragStart(function(h){f.bounds({topLeft:h,bottomRight:h});f.onStart()});this._dragInteraction.onDrag(function(h,l){f.bounds({topLeft:h,bottomRight:l});f.boxVisible(!0);g=!0});this._dragInteraction.onDragEnd(function(h,l){f.boxVisible(!1);f.bounds({topLeft:h,bottomRight:l});
if(g)f.zoom();else f.onEnd();g=!1});this._doubleClickInteraction.onDoubleClick(this.unzoom.bind(this))};e.prototype.animationTime=function(f){if(null==f)return this._animationTime;if(0>f)throw Error("animationTime cannot be negative");this._animationTime=f;return this};e.prototype.ease=function(f){if("function"!==typeof f)throw Error("ease function must be a function");0===f(0)&&1===f(1)||Plottable.Utils.Window.warn("Easing function does not maintain invariant f(0)\x3d\x3d0 \x26\x26 f(1)\x3d\x3d1. Bad behavior may result.");
this.easeFn=f;return this};e.prototype.zoom=function(){var f=this.xExtent()[0].valueOf(),g=this.xExtent()[1].valueOf(),h=this.yExtent()[1].valueOf(),l=this.yExtent()[0].valueOf();f!==g&&h!==l&&this.interpolateZoom(f,g,h,l)};e.prototype.unzoom=function(){var f=this.xScale();f._domainMin=null;f._domainMax=null;f=f._getExtent();this.xScale().domain(f);this.unzoomMethod()};e.prototype.isZooming=function(f){this._dragInteraction.enabled(!f);this._doubleClickInteraction.enabled(!f)};e.prototype.interpolateZoom=
function(f,g,h,l){function n(){var E=Date.now()-A;E=0===q._animationTime?1:Math.min(1,E/q._animationTime);var C=m(r,f,E),D=m(v,g,E),J=m(u,h,E),M=m(w,l,E);q.xScale().domain([C,D]);q.yScale().domain([J,M]);1>E?Plottable.Utils.DOM.requestAnimationFramePolyfill(n):(q.onEnd(),q.isZooming(!1))}function m(E,C,D){return d3.interpolateNumber(E,C)(z(D))}var q=this,r=this.xScale().domain()[0].valueOf(),v=this.xScale().domain()[1].valueOf(),u=this.yScale().domain()[0].valueOf(),w=this.yScale().domain()[1].valueOf(),
z=this.easeFn;this.isZooming(!0);var A=Date.now();n()};return e}(Plottable.Components.SelectionBoxLayer);a.DragZoomLayer=b})(el||(el={}));
</script>


<script>//~~WEBPATH~~/vz-line-chart2/panZoomDragLayer.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();var fl;
(function(a){var b;(function(e){e[e.NONE=0]="NONE";e[e.DRAG_ZOOMING=1]="DRAG_ZOOMING";e[e.PANNING=2]="PANNING"})(b||(b={}));var c=function(e){function f(g,h,l){var n=e.call(this)||this;n.state=b.NONE;n.panStartCallback=new Plottable.Utils.CallbackSet;n.panEndCallback=new Plottable.Utils.CallbackSet;n.panZoom=new Plottable.Interactions.PanZoom(g,h);n.panZoom.dragInteraction().mouseFilter(function(q){return f.isPanKey(q)&&0===q.button});n.panZoom.wheelFilter(n.canScrollZoom);n.dragZoomLayer=new el.DragZoomLayer(g,
h,l);n.dragZoomLayer.dragInteraction().mouseFilter(function(q){return!f.isPanKey(q)&&0===q.button});n.append(n.dragZoomLayer);var m=n.onWheel.bind(n);n.onAnchor(function(){n._mouseDispatcher=Plottable.Dispatchers.Mouse.getDispatcher(n);n._mouseDispatcher.onWheel(m);n.panZoom.attachTo(n)});n.onDetach(function(){n.panZoom.detachFrom();n._mouseDispatcher&&(n._mouseDispatcher.offWheel(m),n._mouseDispatcher=null)});n.panZoom.dragInteraction().onDragStart(function(){n.state==b.NONE&&n.setState(b.PANNING)});
n.panZoom.dragInteraction().onDragEnd(function(){n.state==b.PANNING&&n.setState(b.NONE)});n.dragZoomLayer.dragInteraction().onDragStart(function(){n.state==b.NONE&&n.setState(b.DRAG_ZOOMING)});n.dragZoomLayer.dragInteraction().onDragEnd(function(){n.state==b.DRAG_ZOOMING&&n.setState(b.NONE)});return n}Qk(f,e);f.prototype.onWheel=function(g,h){this.canScrollZoom(h)||(g=this.element(),g.select(".help").empty()&&(g=g.append("div").classed("help",!0).style("background","rgba(30, 30, 30, .6)").style("color",
"#fff").style("pointer-events","none").style("opacity",1).style("position","absolute").style("top",0).style("bottom",0).style("left",0).style("right",0).style("display","flex").style("justify-content","center").style("padding","20px").style("align-items","center"),h=d3.transition().duration(2500),g.transition(h).style("opacity",0).remove(),g.append("span").text("Alt + Scroll to Zoom").style("white-space","normal")))};f.isPanKey=function(g){return!!g.altKey||!!g.shiftKey};f.prototype.canScrollZoom=
function(g){return g.altKey};f.prototype.setState=function(g){if(this.state!=g){var h=this.state;this.state=g;this.root().removeClass(this.stateClassName(h));this.root().addClass(this.stateClassName(g));h==b.PANNING&&this.panEndCallback.callCallbacks();g==b.PANNING&&this.panStartCallback.callCallbacks()}};f.prototype.stateClassName=function(g){switch(g){case b.PANNING:return"panning";case b.DRAG_ZOOMING:return"drag-zooming";default:return""}};f.prototype.onPanStart=function(g){this.panStartCallback.add(g)};
f.prototype.onPanEnd=function(g){this.panEndCallback.add(g)};f.prototype.onScrollZoom=function(g){this.panZoom.onZoomEnd(g)};f.prototype.onDragZoomStart=function(g){this.dragZoomLayer.interactionStart(g)};f.prototype.onDragZoomEnd=function(g){this.dragZoomLayer.interactionEnd(g)};return f}(Plottable.Components.Group);a.PanZoomDragLayer=c})(fl||(fl={}));
</script>



<dom-module id="vz-line-chart2">
  <template>
    <div id="chartdiv"></div>
    <vz-chart-tooltip id="tooltip" position="[[tooltipPosition]]">
    </vz-chart-tooltip>
    <style>
      :host {
        -moz-user-select: none;
        -webkit-user-select: none;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
        flex-shrink: 1;
        outline: none;
        position: relative;
        white-space: nowrap;
      }
      div {
        -webkit-user-select: none;
        -moz-user-select: none;
        flex-grow: 1;
        flex-shrink: 1;
      }

      #chartdiv .main {
        cursor: crosshair;
      }

      :host.pankey #chartdiv :not(.drag-zooming) .main {
        cursor: -webkit-grab;
        cursor: grab;
      }

      :host.mousedown #chartdiv .panning .main {
        cursor: -webkit-grabbing;
        cursor: grabbing;
      }

      #chartdiv line.guide-line {
        stroke: #999;
        stroke-width: 1.5px;
      }
      #chartdiv:hover {
        will-change: transform;
      }

      .ghost {
        opacity: .2;
        stroke-width: 1px;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/vz-line-chart2/tf-scale.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){var b=function(c){function e(){var f=null!==c&&c.apply(this,arguments)||this;f._ignoreOutlier=!1;return f}Qk(e,c);e.prototype.setValueProviderForDomain=function(f){this._valueProviderForDomain=f};e.prototype.ignoreOutlier=function(f){return"boolean"==typeof f?(this._ignoreOutlier=f,this):this._ignoreOutlier};e.prototype._getAllIncludedValues=function(){var f=this._valueProviderForDomain?this._valueProviderForDomain():[];return this.extentOfValues(f)};return e}(Plottable.QuantitativeScale);
a.TfScale=b})(fl||(fl={}));
</script>
  <script>//~~WEBPATH~~/vz-line-chart2/linear-scale.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){var b=function(c){function e(){var f=c.call(this)||this;f._ignoreOutlier=!1;f.padProportion(.2);return f}Qk(e,c);e.prototype.setValueProviderForDomain=function(f){this._valueProviderForDomain=f};e.prototype._niceDomain=function(f,g){var h=f[0];f=f[1];var l=f-h;var n=0===l?1.1*Math.abs(h)+1.1:l*this.padProportion();return c.prototype._niceDomain.call(this,[0<=h&&h<l?-.1*f:h-n,f+n],g)};e.prototype._getUnboundedExtent=function(f){f=this._getAllIncludedValues(f);var g=this._defaultExtent();
0!==f.length&&(f=[Plottable.Utils.Math.min(f,g[0]),Plottable.Utils.Math.max(f,g[1])],g=this._niceDomain(f));return g};e.prototype._getAllIncludedValues=function(){var f=this._valueProviderForDomain?this._valueProviderForDomain():[];return this.extentOfValues(f)};e.prototype.extentOfValues=function(f){var g=f=f.filter(function(n){return Plottable.Utils.Math.isValidNumber(n)});if(this.ignoreOutlier()){g=f.sort(function(n,m){return n-m});var h=d3.quantile(g,.05),l=d3.quantile(g,.95);g=f.filter(function(n){return n>=
h&&n<=l})}f=d3.extent(g);return null==f[0]||null==f[1]?[]:f};e.prototype.ignoreOutlier=function(f){return"boolean"==typeof f?(this._ignoreOutlier=f,this):this._ignoreOutlier};return e}(Plottable.Scales.Linear);a.LinearScale=b})(fl||(fl={}));
</script>
  <script>//~~WEBPATH~~/vz-line-chart2/log-scale.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){function b(f){return Math.log10(f)}function c(f){return Math.pow(10,f)}a.MIN_POSITIVE_VALUE=Math.pow(2,-1074);var e=function(f){function g(){var h=f.call(this)||this;h._d3LogScale=d3.scaleLog();h.padProportion(.2);return h}Qk(g,f);g.prototype.scale=function(h){return 0>=h?NaN:this._d3LogScale(h)};g.prototype.invert=function(h){return this._d3LogScale.invert(h)};g.prototype.scaleTransformation=function(h){return this.scale(h)};g.prototype.invertedTransformation=function(h){return this.invert(h)};
g.prototype.getTransformationDomain=function(){return this.domain()};g.prototype._getDomain=function(){return this._untransformedDomain};g.prototype._setDomain=function(h){this._untransformedDomain=h;f.prototype._setDomain.call(this,[Math.max(a.MIN_POSITIVE_VALUE,h[0]),h[1]])};g.prototype._niceDomain=function(h){var l=h[0];h=h[1];l=Math.max(b(a.MIN_POSITIVE_VALUE),b(l));h=b(h);var n=h-l;n=n?n*this.padProportion():1;return[c(Math.max(b(a.MIN_POSITIVE_VALUE),l-n)),c(h+n)]};g.prototype._getUnboundedExtent=
function(h){h=this._getAllIncludedValues(h);var l=this._defaultExtent();0!==h.length&&(h=[Plottable.Utils.Math.min(h,l[0]),Plottable.Utils.Math.max(h,l[1])],l=this._niceDomain(h));return l};g.prototype._getAllIncludedValues=function(h){void 0===h&&(h=!1);return f.prototype._getAllIncludedValues.call(this).map(function(l){return 0<l?l:a.MIN_POSITIVE_VALUE})};g.prototype._defaultExtent=function(){return[1,10]};g.prototype._backingScaleDomain=function(h){if(null==h)return this._d3LogScale.domain();this._d3LogScale.domain(h);
return this};g.prototype._getRange=function(){return this._d3LogScale.range()};g.prototype._setRange=function(h){this._d3LogScale.range(h)};g.prototype.defaultTicks=function(){return this._d3LogScale.ticks()};g.prototype.ticks=function(){return this._d3LogScale.ticks()};g.prototype.extentOfValues=function(h){var l=h=h.filter(function(q){return Plottable.Utils.Math.isValidNumber(q)&&0<q});if(this.ignoreOutlier()){h=h.map(b).sort(function(q,r){return q-r});var n=d3.quantile(h,.05),m=d3.quantile(h,.95);
l=h.filter(function(q){return q>=n&&q<=m}).map(c)}h=d3.extent(l);return null==h[0]||null==h[1]?[]:h};return g}(a.TfScale);a.LogScale=e})(fl||(fl={}));
</script>
  <script>//~~WEBPATH~~/vz-line-chart2/line-chart.js
(function(a){var b;(function(f){f[f.TEXT=0]="TEXT";f[f.DOM=1]="DOM"})(b||(b={}));var c;(function(f){f.LOG="log";f.LINEAR="linear"})(c||(c={}));var e=function(){function f(g,h,l,n,m,q,r,v,u,w,z){this.seriesNames=[];this.name2datasets={};this.colorScale=n;this.tooltip=m;this.datasets=[];this._ignoreYOutliers=!1;this.lastPointsDataset=new Plottable.Dataset;this.nanDataset=new Plottable.Dataset;this.yValueAccessor=h;this.symbolFunction=w;this.onDatasetChanged=this._onDatasetChanged.bind(this);this._defaultXRange=
v;this._defaultYRange=u;this.tooltipColumns=q;this.buildChart(g,h,l,r,z)}f.prototype.buildChart=function(g,h,l,n,m){var q=this;this.destroy();g=g();this.xAccessor=g.accessor;this.xScale=g.scale;this.xAxis=g.axis;this.xAxis.margin(0).tickLabelPadding(3);m&&this.xAxis.formatter(m);this.yScale=f.getYScaleFromType(l);this.yScale.setValueProviderForDomain(function(){return q.getValuesForYAxisDomainCompute()});this.yAxis=new Plottable.Axes.Numeric(this.yScale,"left");m=cl.multiscaleFormatter(cl.Y_AXIS_FORMATTER_PRECISION);
this.yAxis.margin(0).tickLabelPadding(5).formatter(m);this.yAxis.usesTextWidthApproximation();this.fillArea=n;m=new a.PanZoomDragLayer(this.xScale,this.yScale,function(){return q.resetDomain()});this.tooltipInteraction=this.createTooltipInteraction(m);this.tooltipPointsComponent=new Plottable.Component;n=this.buildPlot(this.xScale,this.yScale,n);this.gridlines=new Plottable.Components.Gridlines(this.xScale,this.yScale);g=null;l!==c.LOG&&(g=new Plottable.Components.GuideLineLayer("horizontal"),g.scale(this.yScale).value(0));
l=new Plottable.Components.GuideLineLayer("vertical");l.scale(this.xScale).value(0);this.center=new Plottable.Components.Group([this.gridlines,g,l,n,this.tooltipPointsComponent,m]);this.center.addClass("main");this.outer=new Plottable.Components.Table([[this.yAxis,this.center],[null,this.xAxis]])};f.prototype.buildPlot=function(g,h,l){var n=this;l&&(this.marginAreaPlot=new Plottable.Plots.Area,this.marginAreaPlot.x(this.xAccessor,g),this.marginAreaPlot.y(l.higherAccessor,h),this.marginAreaPlot.y0(l.lowerAccessor),
this.marginAreaPlot.attr("fill",function(v,u,w){return n.colorScale.scale(w.metadata().name)}),this.marginAreaPlot.attr("fill-opacity",.3),this.marginAreaPlot.attr("stroke-width",0));this.smoothedAccessor=function(v){return v.smoothed};l=new Plottable.Plots.Line;l.x(this.xAccessor,g);l.y(this.yValueAccessor,h);l.attr("stroke",function(v,u,w){return n.colorScale.scale(w.metadata().name)});this.linePlot=l;this.setupTooltips(l);var m=new Plottable.Plots.Line;m.x(this.xAccessor,g);m.y(this.smoothedAccessor,
h);m.attr("stroke",function(v,u,w){return n.colorScale.scale(w.metadata().name)});this.smoothLinePlot=m;if(this.symbolFunction){var q=new Plottable.Plots.Scatter;q.x(this.xAccessor,g);q.y(this.yValueAccessor,h);q.attr("fill",function(v,u,w){return n.colorScale.scale(w.metadata().name)});q.attr("opacity",1);q.size(2*cl.TOOLTIP_CIRCLE_SIZE);q.symbol(function(v,u,w){return n.symbolFunction(w.metadata().name)});this.markersScatterPlot=q}q=new Plottable.Plots.Scatter;q.x(this.xAccessor,g);q.y(this.yValueAccessor,
h);q.attr("fill",function(v){return n.colorScale.scale(v.name)});q.attr("opacity",1);q.size(2*cl.TOOLTIP_CIRCLE_SIZE);q.datasets([this.lastPointsDataset]);this.scatterPlot=q;var r=new Plottable.Plots.Scatter;r.x(this.xAccessor,g);r.y(function(v){return v.displayY},h);r.attr("fill",function(v){return n.colorScale.scale(v.name)});r.attr("opacity",1);r.size(2*cl.NAN_SYMBOL_SIZE);r.datasets([this.nanDataset]);r.symbol(Plottable.SymbolFactories.triangle);this.nanDisplay=r;g=[r,q,m,l];this.marginAreaPlot&&
g.push(this.marginAreaPlot);this.markersScatterPlot&&g.push(this.markersScatterPlot);return new Plottable.Components.Group(g)};f.prototype._onDatasetChanged=function(g){this.smoothingEnabled&&this.resmoothDataset(g);this.updateSpecialDatasets()};f.prototype.ignoreYOutliers=function(g){g!==this._ignoreYOutliers&&(this._ignoreYOutliers=g,this.updateSpecialDatasets(),this.yScale.ignoreOutlier(g),this.resetYDomain())};f.prototype.getValuesForYAxisDomainCompute=function(){var g=this.getAccessorsForComputingYRange();
return _.flattenDeep(this.datasets.map(function(h){return g.map(function(l){return h.data().map(function(n){return l(n,-1,h)})})})).filter(isFinite)};f.prototype.updateSpecialDatasets=function(){var g=this.getYAxisAccessor(),h=this.datasets.map(function(l){var n=null,m=l.data().filter(function(q){return!isNaN(g(q,-1,l))});0<m.length&&(n=m[m.length-1],n.name=l.metadata().name,n.relative=cl.relativeAccessor(n,-1,l));return n}).filter(function(l){return null!=l});this.lastPointsDataset.data(h);this.markersScatterPlot&&
this.markersScatterPlot.datasets(this.datasets.map(this.createSampledDatasetForMarkers));h=_.flatten(this.datasets.map(function(l){for(var n=null,m=l.data(),q=0;q<m.length&&null==n;)isNaN(g(m[q],-1,l))||(n=g(m[q],-1,l)),q++;null==n&&(n=0);var r=[];for(q=0;q<m.length;q++)isNaN(g(m[q],-1,l))?(m[q].name=l.metadata().name,m[q].displayY=n,m[q].relative=cl.relativeAccessor(m[q],-1,l),r.push(m[q])):n=g(m[q],-1,l);return r}));this.nanDataset.data(h)};f.prototype.resetDomain=function(){this.resetXDomain();
this.resetYDomain()};f.prototype.resetXDomain=function(){if(null!=this._defaultXRange)var g=this._defaultXRange;else g=this.xScale,g._domainMin=null,g._domainMax=null,g=g._getExtent();this.xScale.domain(g)};f.prototype.resetYDomain=function(){null!=this._defaultYRange?this.yScale.domain(this._defaultYRange):(this.yScale.autoDomain(),this.yScale.domain(this.yScale.domain()))};f.prototype.getAccessorsForComputingYRange=function(){var g=[this.getYAxisAccessor()];this.fillArea&&g.push(this.fillArea.lowerAccessor,
this.fillArea.higherAccessor);return g};f.prototype.getYAxisAccessor=function(){return this.smoothingEnabled?this.smoothedAccessor:this.yValueAccessor};f.prototype.createTooltipInteraction=function(g){function h(){return m.enabled(!0)}function l(){m.enabled(!1);n.hideTooltips()}var n=this,m=new Plottable.Interactions.Pointer;g.onPanStart(l);g.onDragZoomStart(l);g.onPanEnd(h);g.onDragZoomEnd(h);g.onScrollZoom(function(){return n.updateTooltipContent(n._lastMousePosition)});m.onPointerMove(function(q){n._lastMousePosition=
q;n.updateTooltipContent(q)});m.onPointerExit(function(){return n.hideTooltips()});return m};f.prototype.updateTooltipContent=function(g){var h=this;this.linePlot&&(window.cancelAnimationFrame(this._tooltipUpdateAnimationFrame),this._tooltipUpdateAnimationFrame=window.requestAnimationFrame(function(){var l={x:g.x,y:g.y,datum:null,dataset:null},n=h.gridlines.content().node().getBBox(),m=h.linePlot.datasets().map(function(u){return h.findClosestPoint(l,u)}).filter(Boolean),q=Plottable.Utils.DOM.intersectsBBox,
r=m.filter(function(u){return q(u.x,u.y,n)||isNaN(h.yValueAccessor(u.datum,0,u.dataset))}),v=r.filter(function(u){return!isNaN(h.yValueAccessor(u.datum,0,u.dataset))});0!==m.length?(h.scatterPlot.attr("display","none"),m=h.tooltipPointsComponent.content().selectAll(".point").data(v,function(u){return u.dataset.metadata().name}),m.enter().append("circle").classed("point",!0),m.attr("r",cl.TOOLTIP_CIRCLE_SIZE).attr("cx",function(u){return u.x}).attr("cy",function(u){return u.y}).style("stroke","none").attr("fill",
function(u){return h.colorScale.scale(u.dataset.metadata().name)}),m.exit().remove(),h.drawTooltips(r,l,h.tooltipColumns)):h.hideTooltips()}))};f.prototype.hideTooltips=function(){window.cancelAnimationFrame(this._tooltipUpdateAnimationFrame);this.tooltip.hide();this.scatterPlot.attr("display","block");this.tooltipPointsComponent.content().selectAll(".point").remove()};f.prototype.setupTooltips=function(g){var h=this;g.onDetach(function(){h.tooltipInteraction.detachFrom();h.tooltipInteraction.enabled(!1)});
g.onAnchor(function(){h.tooltipInteraction.attachTo(g);h.tooltipInteraction.enabled(!0)})};f.prototype.drawTooltips=function(g,h,l){var n=this;if(g.length){var m=this.colorScale;l=[{title:"",static:!1,evalType:b.DOM,evaluate:function(E){d3.select(this).select("span").style("background-color",function(){return m.scale(E.dataset.metadata().name)});return""},enter:function(E){d3.select(this).append("span").classed("swatch",!0).style("background-color",function(){return m.scale(E.dataset.metadata().name)})}}].concat(l);
var q=function(E){return Math.pow(E.x-h.x,2)+Math.pow(E.y-h.y,2)},r=_.min(g.map(q)),v=this.smoothingEnabled?this.smoothedAccessor:this.yValueAccessor;g="ascending"===this.tooltipSortingMethod?_.sortBy(g,function(E){return v(E.datum,-1,E.dataset)}):"descending"===this.tooltipSortingMethod?_.sortBy(g,function(E){return v(E.datum,-1,E.dataset)}).reverse():"nearest"===this.tooltipSortingMethod?_.sortBy(g,q):g.slice(0).reverse();var u=this,w=d3.select(this.tooltip.content()).select("table"),z=w.select("thead").selectAll("th").data(l,
function(E){return E.title}),A=z.enter().append("th").text(function(E){return E.title}).nodes();z.exit().remove();g=w.select("tbody").selectAll("tr").data(g,function(E){return E.dataset.metadata().name});g.classed("distant",function(E){var C=E.dataset.data()[0],D=_.last(E.dataset.data());C=n.xScale.scale(n.xAccessor(C,0,E.dataset));D=n.xScale.scale(n.xAccessor(D,0,E.dataset));E=n.smoothingEnabled?E.datum.smoothed:n.yValueAccessor(E.datum,0,E.dataset);return h.x<C||h.x>D||isNaN(E)}).classed("closest",
function(E){return q(E)===r}).each(function(E){u.drawTooltipRow(this,l,E)}).order();g.exit().remove();g=g.enter().append("tr").each(function(E){u.drawTooltipRow(this,l,E)}).nodes();A=A.concat(g);this.tooltip.updateAndPosition(this.targetSVG.node(),A)}else this.tooltip.hide()};f.prototype.drawTooltipRow=function(g,h,l){var n=this;g=d3.select(g).selectAll("td").data(h);g.each(function(m){m.static||n.drawTooltipColumn.call(n,this,m,l)});g.enter().append("td").each(function(m){m.enter&&m.enter.call(this,
l);n.drawTooltipColumn.call(n,this,m,l)})};f.prototype.drawTooltipColumn=function(g,h,l){var n=this.smoothingEnabled;h.evalType==b.DOM?h.evaluate.call(g,l,{smoothingEnabled:n}):d3.select(g).text(h.evaluate.call(g,l,{smoothingEnabled:n}))};f.prototype.findClosestPoint=function(g,h){var l=this,n=h.data().map(function(r,v){return l.xScale.scale(l.xAccessor(r,v,h))}),m=_.sortedIndex(n,g.x);if(0==n.length)return null;m===n.length?--m:0!==m&&(m=Math.abs(n[m-1]-g.x)<Math.abs(n[m]-g.x)?m-1:m);g=h.data()[m];
var q=this.smoothingEnabled?this.smoothedAccessor(g,m,h):this.yValueAccessor(g,m,h);return{x:n[m],y:this.yScale.scale(q),datum:g,dataset:h}};f.prototype.resmoothDataset=function(g){var h=this,l=g.data(),n=this.smoothingWeight,m=0<l.length?0:NaN,q=0,r=l.map(function(u,w){return h.yValueAccessor(u,w,g)}),v=r.every(function(u){return u==r[0]});l.forEach(function(u,w){w=r[w];v||!Number.isFinite(w)?u.smoothed=w:(m=m*n+(1-n)*w,q++,w=1,1!==n&&(w=1-Math.pow(n,q)),u.smoothed=m/w)})};f.prototype.getDataset=
function(g){void 0===this.name2datasets[g]&&(this.name2datasets[g]=new Plottable.Dataset([],{name:g,meta:null}));return this.name2datasets[g]};f.getYScaleFromType=function(g){if(g===c.LOG)return new a.LogScale;if(g===c.LINEAR)return new a.LinearScale;throw Error("Unrecognized yScale type "+g);};f.prototype.setVisibleSeries=function(g){var h=this;this.seriesNames=g=g.sort();g.reverse();this.datasets.forEach(function(l){return l.offUpdate(h.onDatasetChanged)});this.datasets=g.map(function(l){return h.getDataset(l)});
this.datasets.forEach(function(l){return l.onUpdate(h.onDatasetChanged)});this.linePlot.datasets(this.datasets);this.smoothingEnabled&&this.smoothLinePlot.datasets(this.datasets);this.marginAreaPlot&&this.marginAreaPlot.datasets(this.datasets);this.updateSpecialDatasets()};f.prototype.createSampledDatasetForMarkers=function(g){var h=g.data();if(20>=h.length)return g;for(var l=Math.ceil(h.length/20),n=Array(Math.floor(h.length/l)),m=0,q=0;m<n.length;m++,q+=l)n[m]=h[q];return new Plottable.Dataset(n,
g.metadata())};f.prototype.setSeriesData=function(g,h){this.getDataset(g).data(h);this.measureBBoxAndMaybeInvalidateLayoutInRaf()};f.prototype.setSeriesMetadata=function(g,h){h=Object.assign({},this.getDataset(g).metadata(),{meta:h});this.getDataset(g).metadata(h)};f.prototype.smoothingUpdate=function(g){var h=this;this.smoothingWeight=g;this.datasets.forEach(function(l){return h.resmoothDataset(l)});this.smoothingEnabled||(this.linePlot.addClass("ghost"),this.scatterPlot.y(this.smoothedAccessor,
this.yScale),this.smoothingEnabled=!0,this.smoothLinePlot.datasets(this.datasets));this.markersScatterPlot&&this.markersScatterPlot.y(this.getYAxisAccessor(),this.yScale);this.updateSpecialDatasets()};f.prototype.smoothingDisable=function(){this.smoothingEnabled&&(this.linePlot.removeClass("ghost"),this.scatterPlot.y(this.yValueAccessor,this.yScale),this.smoothLinePlot.datasets([]),this.smoothingEnabled=!1,this.updateSpecialDatasets());this.markersScatterPlot&&this.markersScatterPlot.y(this.getYAxisAccessor(),
this.yScale)};f.prototype.setTooltipSortingMethod=function(g){this.tooltipSortingMethod=g};f.prototype.renderTo=function(g){this.targetSVG=g;this.outer.renderTo(g);null!=this._defaultXRange&&this.resetXDomain();null!=this._defaultYRange&&this.resetYDomain();this.measureBBoxAndMaybeInvalidateLayoutInRaf()};f.prototype.redraw=function(){var g=this;window.cancelAnimationFrame(this._redrawRaf);this._redrawRaf=window.requestAnimationFrame(function(){g.measureBBoxAndMaybeInvalidateLayout();g.outer.redraw()})};
f.prototype.measureBBoxAndMaybeInvalidateLayoutInRaf=function(){var g=this;window.cancelAnimationFrame(this._invalidateLayoutRaf);this._invalidateLayoutRaf=window.requestAnimationFrame(function(){g.measureBBoxAndMaybeInvalidateLayout()})};f.prototype.measureBBoxAndMaybeInvalidateLayout=function(){if(this._lastDrawBBox){var g=this._lastDrawBBox.width,h=this.targetSVG.node().getBoundingClientRect().width;0==g&&g<h&&this.outer.invalidateCache()}this._lastDrawBBox=this.targetSVG.node().getBoundingClientRect()};
f.prototype.destroy=function(){window.cancelAnimationFrame(this._redrawRaf);window.cancelAnimationFrame(this._invalidateLayoutRaf);this.outer&&this.outer.destroy()};f.prototype.onAnchor=function(g){if(this.outer)this.outer.onAnchor(g)};return f}();a.LineChart=e})(fl||(fl={}));
</script>
  <script>//~~WEBPATH~~/vz-line-chart2/vz-line-chart2.js
(function(a){function b(e){return isNaN(e)?"NaN":c(e)}var c=cl.multiscaleFormatter(cl.Y_TOOLTIP_FORMATTER_PRECISION);a.DEFAULT_TOOLTIP_COLUMNS=[{title:"Name",evaluate:function(e){return e.dataset.metadata().name}},{title:"Smoothed",evaluate:function(e,f){return b(f.smoothingEnabled?e.datum.smoothed:e.datum.scalar)}},{title:"Value",evaluate:function(e){return b(e.datum.scalar)}},{title:"Step",evaluate:function(e){return cl.stepFormatter(e.datum.step)}},{title:"Time",evaluate:function(e){return cl.timeFormatter(e.datum.wall_time)}},
{title:"Relative",evaluate:function(e){return cl.relativeFormatter(cl.relativeAccessor(e.datum,-1,e.dataset))}}];Polymer({is:"vz-line-chart2",properties:{colorScale:{type:Object,value:function(){return(new Plottable.Scales.Color).range(d3.schemeCategory10)}},symbolFunction:Object,smoothingEnabled:{type:Boolean,notify:!0,value:!1},smoothingWeight:{type:Number,value:.6},xType:{type:String,value:""},xComponentsCreationMethod:{type:Object,value:""},xAxisFormatter:Object,yValueAccessor:{type:Object,value:function(){return function(e){return e.scalar}}},
tooltipColumns:{type:Array,value:function(){return a.DEFAULT_TOOLTIP_COLUMNS}},fillArea:Object,defaultXRange:Array,defaultYRange:Array,yScaleType:{type:String,value:"linear"},ignoreYOutliers:{type:Boolean,value:!1},tooltipSortingMethod:{type:String,value:"default"},tooltipPosition:{type:String,value:dl.TooltipPosition.BOTTOM},_chart:Object,_visibleSeriesCache:{type:Array,value:function(){return[]}},_seriesDataCache:{type:Object,value:function(){return{}}},_seriesMetadataCache:{type:Object,value:function(){return{}}},
_makeChartAsyncCallbackId:{type:Number,value:null}},observers:["_makeChart(xComponentsCreationMethod, xType, yValueAccessor, yScaleType, tooltipColumns, colorScale, isAttached)","_reloadFromCache(_chart, _visibleSeriesCache)","_smoothingChanged(smoothingEnabled, smoothingWeight, _chart)","_tooltipSortingMethodChanged(tooltipSortingMethod, _chart)","_outliersChanged(ignoreYOutliers, _chart)"],ready:function(){this.scopeSubtree(this.$.chartdiv,!0)},attached:function(){var e={capture:!0,passive:!0};
this._listen(this,"mousedown",this._onMouseDown.bind(this),e);this._listen(this,"mouseup",this._onMouseUp.bind(this),e);this._listen(window,"keydown",this._onKeyDown.bind(this),e);this._listen(window,"keyup",this._onKeyUp.bind(this),e)},detached:function(){this.cancelAsync(this._makeChartAsyncCallbackId);this._chart&&this._chart.destroy();this._listeners&&(this._listeners.forEach(function(e){e.node.removeEventListener(e.eventName,e.func,e.option)}),this._listeners.clear())},_listen:function(e,f,g,
h){void 0===h&&(h={});this._listeners||(this._listeners=new Set);this._listeners.add({node:e,eventName:f,func:g,option:h});e.addEventListener(f,g,h)},_onKeyDown:function(e){this.toggleClass("pankey",a.PanZoomDragLayer.isPanKey(e))},_onKeyUp:function(e){this.toggleClass("pankey",a.PanZoomDragLayer.isPanKey(e))},_onMouseDown:function(){this.toggleClass("mousedown",!0)},_onMouseUp:function(){this.toggleClass("mousedown",!1)},setVisibleSeries:function(e){_.isEqual(this._visibleSeriesCache,e)||(this._visibleSeriesCache=
e)},setSeriesData:function(e,f){this._seriesDataCache[e]=f;this._chart&&this._chart.setSeriesData(e,f)},setSeriesMetadata:function(e,f){this._seriesMetadataCache[e]=f;this._chart&&this._chart.setSeriesMetadata(e,f)},resetDomain:function(){this._chart&&this._chart.resetDomain()},redraw:function(){this._chart&&this._chart.redraw()},_makeChart:function(e,f,g,h,l,n){f||e?f&&(e=function(){return cl.getXComponents(f)}):e=cl.stepX;null!==this._makeChartAsyncCallbackId&&(this.cancelAsync(this._makeChartAsyncCallbackId),
this._makeChartAsyncCallbackId=null);this._makeChartAsyncCallbackId=this.async(function(){var m=this;this._makeChartAsyncCallbackId=null;if(e&&this.yValueAccessor&&this.tooltipColumns){var q=new a.LineChart(e,this.yValueAccessor,h,n,this.$.tooltip,this.tooltipColumns,this.fillArea,this.defaultXRange,this.defaultYRange,this.symbolFunction,this.xAxisFormatter),r=d3.select(this.$.chartdiv);q.renderTo(r);this._chart&&this._chart.destroy();this._chart=q;this._chart.onAnchor(function(){return m.fire("chart-attached")})}},
350)},_reloadFromCache:function(){var e=this;this._chart&&(this._visibleSeriesCache.forEach(function(f){e._chart.setSeriesData(f,e._seriesDataCache[f]||[])}),this._visibleSeriesCache.filter(function(f){return e._seriesMetadataCache[f]}).forEach(function(f){e._chart.setSeriesMetadata(f,e._seriesMetadataCache[f])}),this._chart.setVisibleSeries(this._visibleSeriesCache))},_smoothingChanged:function(){this._chart&&(this.smoothingEnabled?this._chart.smoothingUpdate(this.smoothingWeight):this._chart.smoothingDisable())},
_outliersChanged:function(){this._chart&&this._chart.ignoreYOutliers(this.ignoreYOutliers)},_tooltipSortingMethodChanged:function(){this._chart&&this._chart.setTooltipSortingMethod(this.tooltipSortingMethod)},getExporter:function(){return new a.LineChartExporter(this.$.chartdiv)}})})(fl||(fl={}));
</script>
</dom-module>



<dom-module id="tf-line-chart-data-loader">
  <template>
    <div id="chart-and-spinner-container">
      <vz-line-chart2 id="chart" color-scale="[[colorScale]]" default-x-range="[[defaultXRange]]" default-y-range="[[defaultYRange]]" fill-area="[[fillArea]]" ignore-y-outliers="[[ignoreYOutliers]]" on-chart-attached="_onChartAttached" smoothing-enabled="[[smoothingEnabled]]" smoothing-weight="[[smoothingWeight]]" style="[[_computeLineChartStyle(dataLoading)]]" symbol-function="[[symbolFunction]]" tooltip-columns="[[tooltipColumns]]" tooltip-position="[[tooltipPosition]]" tooltip-sorting-method="[[tooltipSortingMethod]]" x-components-creation-method="[[xComponentsCreationMethod]]" x-type="[[xType]]" y-value-accessor="[[yValueAccessor]]"></vz-line-chart2>
      <template is="dom-if" if="[[dataLoading]]">
        <div id="loading-spinner-container">
          <paper-spinner-lite active></paper-spinner-lite>
        </div>
      </template>
    </div>
    <style>
      :host {
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
      }

      :host[_maybe-rendered-in-bad-state] vz-line-chart {
        visibility: hidden;
      };

      #chart-and-spinner-container {
        display: flex;
        flex-grow: 1;
        position: relative;
      }

      #loading-spinner-container {
        align-items: center;
        bottom: 0;
        display: flex;
        display: flex;
        justify-content: center;
        left: 0;
        pointer-events: none;
        position: absolute;
        right: 0;
        top: 0;
      }

      vz-line-chart {
        -webkit-user-select: none;
        -moz-user-select: none;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/vz-line-chart2/line-chart-exporter.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){var b;(function(e){e.GROUP="G";e.DIV="DIV";e.SVG="SVG";e.TEXT="TEXT"})(b||(b={}));var c=function(){function e(f){this.uniqueId=0;this.root=f}e.prototype.exportAsString=function(){var f=this.convert(this.root);if(!f)return"";var g=this.createRootSvg();g.appendChild(f);return g.outerHTML};e.prototype.createUniqueId=function(){return"clip_"+this.uniqueId++};e.prototype.getSize=function(){return this.root.getBoundingClientRect()};e.prototype.createRootSvg=function(){var f=document.createElement("svg"),
g=this.getSize();f.setAttributeNS("svg","viewBox","0 0 "+g.width+" "+g.height);f.setAttribute("xmlns","http://www.w3.org/2000/svg");return f};e.prototype.convert=function(f){var g=this,h=null,l=f.nodeName.toUpperCase();if(f.nodeType!=Node.ELEMENT_NODE||l!=b.DIV&&l!=b.SVG)h=f.cloneNode();else{h=document.createElement(b.GROUP);var n=window.getComputedStyle(f),m=parseInt(n.left,10),q=parseInt(n.top,10);if(m||q)l=this.createUniqueId(),h.setAttribute("transform","translate("+m+", "+q+")"),h.setAttribute("clip-path",
"url(#"+l+")"),q=parseInt(n.height,10),m=document.createElement("rect"),m.setAttribute("width",String(parseInt(n.width,10))),m.setAttribute("height",String(q)),n=document.createElementNS("svg","clipPath"),n.id=l,n.appendChild(m),h.appendChild(n)}Array.from(f.childNodes).map(function(r){return g.convert(r)}).filter(Boolean).forEach(function(r){return h.appendChild(r)});return h.nodeName.toUpperCase()==b.GROUP&&!h.hasChildNodes()||this.shouldOmitNode(f)?null:this.stripClass(this.transferStyle(f,h))};
e.prototype.stripClass=function(f){f.nodeType==Node.ELEMENT_NODE&&f.removeAttribute("class");return f};e.prototype.transferStyle=function(f,g){if(g.nodeType!=Node.ELEMENT_NODE)return g;var h=g.nodeName.toUpperCase();f=window.getComputedStyle(f);h==b.TEXT&&Object.assign(g.style,{fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight});h!=b.GROUP&&(g.setAttribute("fill",f.fill),g.setAttribute("stroke",f.stroke),g.setAttribute("stroke-width",f.strokeWidth));"1"!=f.opacity&&g.setAttribute("opacity",
f.opacity);return g};e.prototype.shouldOmitNode=function(){return!1};return e}();a.PlottableExporter=c;c=function(e){function f(){return null!==e&&e.apply(this,arguments)||this}Qk(f,e);f.prototype.shouldOmitNode=function(g){return g.nodeType==Node.ELEMENT_NODE?g.classList.contains("scatter-plot"):!1};return f}(c);a.LineChartExporter=c})(fl||(fl={}));
</script>
  <script>//~~WEBPATH~~/tf-line-chart-data-loader/tf-line-chart-data-loader.html.js
(function(){var a=[],b=function(){return _.throttle(function e(){if(0!=a.length){var f=a.shift();f.active&&(f.redraw(),f._maybeRenderedInBadState=!1);window.cancelAnimationFrame(0);window.requestAnimationFrame(e)}},100)}();Polymer({is:"tf-line-chart-data-loader",properties:{active:{type:Boolean,observer:"_fixBadStateWhenActive"},dataSeries:Array,requestManager:Object,logScaleActive:{type:Boolean,observer:"_logScaleChanged"},xComponentsCreationMethod:Object,xType:String,yValueAccessor:Object,fillArea:Object,
smoothingEnabled:Boolean,smoothingWeight:Number,tooltipColumns:Array,tooltipSortingMethod:String,tooltipPosition:String,ignoreYOutliers:Boolean,defaultXRange:Array,defaultYRange:Array,symbolFunction:Object,colorScale:{type:Object,value:function(){return{scale:Yk.runsColorScale}}},_resetDomainOnNextLoad:{type:Boolean,value:!0},_maybeRenderedInBadState:{type:Boolean,value:!1,reflectToAttribute:!0}},behaviors:[Wk.DataLoaderBehavior],observers:["_dataSeriesChanged(dataSeries.*)","_loadKeyChanged(loadKey)"],
onLoadFinish:function(){0<this.dataToLoad.length&&this._resetDomainOnNextLoad&&(this._resetDomainOnNextLoad=!1,this.$.chart.resetDomain());this.redraw()},detached:function(){cancelAnimationFrame(this._redrawRaf)},exportAsSvgString:function(){return this.$.chart.getExporter().exportAsString()},resetDomain:function(){this.$.chart.resetDomain()},setSeriesData:function(c,e){this.$.chart.setSeriesData(c,e)},setSeriesMetadata:function(c,e){this.$.chart.setSeriesMetadata(c,e)},redraw:function(){var c=this;
cancelAnimationFrame(this._redrawRaf);this._redrawRaf=window.requestAnimationFrame(function(){c.active?c.$.chart.redraw():c._maybeRenderedInBadState=!0})},_loadKeyChanged:function(){this.reset();this._resetDomainOnNextLoad=!0},_dataSeriesChanged:function(){this.$.chart.setVisibleSeries(this.dataSeries)},_logScaleChanged:function(c){this.$.chart.yScaleType=c?"log":"linear";this.redraw()},_computeLineChartStyle:function(c){return c?"opacity: 0.3;":""},_fixBadStateWhenActive:function(){this.active&&
this._maybeRenderedInBadState&&(a.push(this),b())},_onChartAttached:function(){this.active||(this._maybeRenderedInBadState=!0)}})})();
</script>
</dom-module>










<dom-module id="paper-dialog-scrollable">

  <template>
    <style>

      :host {
        display: block;
        @apply --layout-relative;
      }

      :host(.is-scrolled:not(:first-child))::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--divider-color);
      }

      :host(.can-scroll:not(.scrolled-to-bottom):not(:last-child))::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--divider-color);
      }

      .scrollable {
        padding: 0 24px;

        @apply --layout-scroll;
        @apply --paper-dialog-scrollable;
      }

      .fit {
        @apply --layout-fit;
      }
    </style>

    <div id="scrollable" class="scrollable" on-scroll="updateScrollState">
      <slot></slot>
    </div>
  </template>

</dom-module>

<script>//~~WEBPATH~~/paper-dialog-scrollable/paper-dialog-scrollable.html.js
Polymer({is:"paper-dialog-scrollable",properties:{dialogElement:{type:Object}},get scrollTarget(){return this.$.scrollable},ready:function(){this._ensureTarget();this.classList.add("no-padding")},attached:function(){this._ensureTarget();requestAnimationFrame(this.updateScrollState.bind(this))},updateScrollState:function(){this.toggleClass("is-scrolled",0<this.scrollTarget.scrollTop);this.toggleClass("can-scroll",this.scrollTarget.offsetHeight<this.scrollTarget.scrollHeight);this.toggleClass("scrolled-to-bottom",
this.scrollTarget.scrollTop+this.scrollTarget.offsetHeight>=this.scrollTarget.scrollHeight)},_ensureTarget:function(){(this.dialogElement=this.dialogElement||this.parentElement)&&this.dialogElement.behaviors&&0<=this.dialogElement.behaviors.indexOf(Polymer.PaperDialogBehaviorImpl)?(this.dialogElement.sizingTarget=this.scrollTarget,this.scrollTarget.classList.remove("fit")):this.dialogElement&&this.scrollTarget.classList.add("fit")}});
</script>





<dom-module id="tf-markdown-view">
  <template>
    <div id="markdown" inner-h-t-m-l="[[html]]"></div>
    <style>
      /*
       * Reduce topmost and bottommost margins from 16px to 0.3em (renders
       * at about 4.8px) to keep the layout compact. This improves the
       * appearance when there is only one line of text; standard Markdown
       * renderers will still include a `<p>` element.
       *
       * By targeting only the top-level, extremal elements, we preserve any
       * actual paragraph breaks and only change the padding against the
       * component edges.
       */
      #markdown > p:first-child {
        margin-top: 0.3em;
      }
      #markdown > p:last-child {
        margin-bottom: 0.3em;
      }

      /* Pleasant styles for Markdown tables. */
      #markdown table {
        border-collapse: collapse;
      }
      #markdown table th {
        font-weight: 600;
      }
      #markdown table th,
      #markdown table td {
        padding: 6px 13px;
        border: 1px solid #dfe2e5;
      }
      #markdown table tr {
        background-color: #fff;
        border-top: 1px solid #c6cbd1;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-markdown-view/tf-markdown-view.html.js
Polymer({is:"tf-markdown-view",properties:{html:{type:String,value:""}},attached:function(){var a=this;window.requestAnimationFrame(function(){a.scopeSubtree(a.$.markdown,!0)})}});
</script>
</dom-module>

<dom-module id="tf-card-heading-style">
  <template>
    <style>

      figcaption {
        width: 100%;
      }

      /** Horizontal line of labels. */
      .heading-row {
        margin-top: -4px;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
      }

      /** Piece of text in the figure caption. */
      .heading-label {
        flex-grow: 1;
        margin-top: 4px;
        max-width: 100%;
        word-wrap: break-word;
      }

      /** Makes label show on the right. */
      .heading-right {
        flex-grow: 0;
      }
    </style>
  </template>
</dom-module>

<script>//~~WEBPATH~~/tf-card-heading/util.js
var gl;(function(a){a.formatDate=function(b){return b?b.toString().replace(/GMT-\d+ \(([^)]+)\)/,"$1"):""};a.pickTextColor=function(b){var c;if(b)if(c=b.match(/^#([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})$/)){if(4==b.length)for(b=1;3>=b;b++)c[b]+=c[b];c=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}else c=null;else c=null;return c?125<Math.round((299*c[0]+587*c[1]+114*c[2])/1E3)?"inherit":"#eee":"inherit"}})(gl||(gl={}));
</script>



<dom-module id="tf-card-heading">
  <template>
    <div class="container">
      <figcaption class="content">
        <div class="heading-row">
          <template is="dom-if" if="[[_nameLabel]]">
            <div itemprop="name" class="heading-label name">
              [[_nameLabel]]
            </div>
          </template>
          <template is="dom-if" if="[[run]]">
            
            
            <span>
              <span itemprop="run" class="heading-label heading-right run" style="background: [[_runBackground]]; color: [[_runColor]]">[[run]]</span>
            </span>
          </template>
        </div>
        <template is="dom-if" if="[[_tagLabel]]">
          <div class="heading-row">
            <div class="heading-label">
              tag: <span itemprop="tag">[[_tagLabel]]</span>
            </div>
          </div>
        </template>
        <slot></slot>
      </figcaption>
      <template is="dom-if" if="[[description]]">
        <paper-icon-button icon="info" on-tap="_toggleDescriptionDialog" title="Show summary description"></paper-icon-button>
      </template>
      <paper-dialog id="descriptionDialog" no-overlap horizontal-align="auto" vertical-align="auto">
        <paper-dialog-scrollable>
          <tf-markdown-view html="[[description]]"></tf-markdown-view>
        </paper-dialog-scrollable>
      </paper-dialog>
    </div>
    <style include="tf-card-heading-style">
      .container {
        display: flex;
      }
      .content {
        font-size: 12px;
        flex-grow: 1;
      }
      .name {
        font-size: 14px;
      }
      .run {
        font-size: 11px;
        width: auto;
        border-radius: 3px;
        font-weight: bold;
        padding: 1px 4px 2px;
      }
      paper-icon-button {
        flex-grow: 0;
      }
      paper-dialog-scrollable {
        max-width: 640px;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-card-heading/tf-card-heading.html.js
Polymer({is:"tf-card-heading",properties:{displayName:{type:String,value:null},tag:{type:String,value:null},run:{type:String,value:null},description:{type:String,value:null},color:{type:String,value:null},_runBackground:{type:String,computed:"_computeRunBackground(color)",readOnly:!0},_runColor:{type:String,computed:"_computeRunColor(color)",readOnly:!0},_nameLabel:{type:String,computed:"_computeNameLabel(displayName, tag)"},_tagLabel:{type:String,computed:"_computeTagLabel(displayName, tag)"}},_computeRunBackground:function(a){return a||
"none"},_computeRunColor:function(a){return gl.pickTextColor(a)},_computeNameLabel:function(a,b){return a||b||""},_computeTagLabel:function(a,b){return b&&b!==a?b:""},_toggleDescriptionDialog:function(a){this.$.descriptionDialog.positionTarget=a.target;this.$.descriptionDialog.toggle()}});
</script>
</dom-module>






<dom-module id="tf-downloader">
  <template>
    <paper-dropdown-menu no-label-float="true" label="run to download" selected-item-label="{{_run}}">
      <paper-menu class="dropdown-content" slot="dropdown-content">
        <template is="dom-repeat" items="[[runs]]">
          <paper-item no-label-float="true">[[item]]</paper-item>
        </template>
      </paper-menu>
    </paper-dropdown-menu>
    <a download="[[_csvName(tag, _run)]]" href="[[_csvUrl(tag, _run, urlFn)]]">CSV</a><a download="[[_jsonName(tag, _run)]]" href="[[_jsonUrl(tag, _run, urlFn)]]">JSON</a>
    <style>
      :host {
        display: flex;
        align-items: center;
        height: 32px;
      }
      paper-dropdown-menu {
        width: 100px;
        --paper-input-container-label: {
          font-size: 10px;
        }
        --paper-input-container-input: {
          font-size: 10px;
        }
      }
      a {
        font-size: 10px;
        margin: 0 0.2em;
      }
      paper-input {
        font-size: 22px;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-dashboard-common/tf-downloader.html.js
Polymer({is:"tf-downloader",properties:{_run:String,runs:Array,tag:String,urlFn:Function},_csvUrl:function(a,b,c){return Rk.addParams(c(a,b),{format:"csv"})},_jsonUrl:function(a,b,c){return c(a,b)},_csvName:function(a,b){return"run-"+b+"-tag-"+a+".csv"},_jsonName:function(a,b){return"run-"+b+"-tag-"+a+".json"}});
</script>
</dom-module>



<dom-module id="tf-scalar-card">
<template>
  <tf-card-heading tag="[[tag]]" display-name="[[tagMetadata.displayName]]" description="[[tagMetadata.description]]"></tf-card-heading>
  <div id="tf-line-chart-data-loader-container">
    <tf-line-chart-data-loader active="[[active]]" color-scale="[[_getColorScale(colorScale)]]" data-series="[[_getDataSeries(dataToLoad.*)]]" data-to-load="[[dataToLoad]]" get-data-load-name="[[_getDataLoadName]]" get-data-load-url="[[getDataLoadUrl]]" request-data="[[requestData]]" ignore-y-outliers="[[ignoreYOutliers]]" load-data-callback="[[_loadDataCallback]]" load-key="[[tag]]" log-scale-active="[[_logScaleActive]]" request-manager="[[requestManager]]" smoothing-enabled="[[smoothingEnabled]]" smoothing-weight="[[smoothingWeight]]" tag-metadata="[[tagMetadata]]" tooltip-columns="[[_tooltipColumns]]" tooltip-position="auto" tooltip-sorting-method="[[tooltipSortingMethod]]" x-type="[[xType]]">
    </tf-line-chart-data-loader>
  </div>
  <div id="buttons">
    <paper-icon-button selected$="[[_expanded]]" icon="fullscreen" on-tap="_toggleExpanded"></paper-icon-button>
    <paper-icon-button selected$="[[_logScaleActive]]" icon="line-weight" on-tap="_toggleLogScale" title="Toggle y-axis log scale"></paper-icon-button>
    <paper-icon-button icon="settings-overscan" on-tap="_resetDomain" title="Fit domain to data"></paper-icon-button>
    <template is="dom-if" if="[[showDownloadLinks]]">
      <paper-menu-button on-paper-dropdown-open="_updateDownloadLink">
        <paper-icon-button class="dropdown-trigger" slot="dropdown-trigger" icon="file-download"></paper-icon-button>
        <paper-listbox class="dropdown-content" slot="dropdown-content">
          <paper-item>
            <a id="svgLink" download="[[tag]].svg">
              Download Current Chart as SVG
            </a>
          </paper-item>
        </paper-listbox>
      </paper-menu-button>
    </template>
    <span style="flex-grow: 1"></span>
    <template is="dom-if" if="[[showDownloadLinks]]">
      <div class="download-links">
        <tf-downloader runs="[[_runsFromData(dataToLoad)]]" tag="[[tag]]" url-fn="[[_downloadUrlFn]]"></tf-downloader>
      </div>
    </template>
  </div>
  <style>
    :host {
      margin: 5px;
      display: block;
      width: 330px;
    }

    :host[_expanded] {
      width: 100%;
    }

    :host[_expanded] #tf-line-chart-data-loader-container {
      height: 400px;
    }

    #tf-line-chart-data-loader-container {
      height: 200px;
      width: 100%;
    }

    tf-card-heading {
      display: block;
      margin-bottom: 10px;
    }

    #buttons {
      display: flex;
      flex-direction: row;
    }

    paper-icon-button {
      color: #2196F3;
      border-radius: 100%;
      width: 32px;
      height: 32px;
      padding: 4px;
    }

    paper-icon-button[selected] {
      background: var(--tb-ui-light-accent);
    }

    .download-links {
      display: flex;
      height: 32px;
    }

    .download-links a {
      align-self: center;
      font-size: 10px;
      margin: 2px;
    }

    .download-links paper-dropdown-menu {
      width: 100px;
      --paper-input-container-label: {
        font-size: 10px;
      }
      --paper-input-container-input: {
        font-size: 10px;
      }
    }

    paper-menu-button {
      padding: 0;
    }
    paper-item a {
      color: inherit;
      text-decoration: none;
      white-space: nowrap;
    }
  </style>
</template>
<script>//~~WEBPATH~~/tf-scalar-dashboard/tf-scalar-card.html.js
Polymer({is:"tf-scalar-card",properties:{tag:String,dataToLoad:Array,xType:String,active:Boolean,ignoreYOutliers:Boolean,requestManager:Object,showDownLinks:Boolean,smoothingEnabled:Boolean,smoothingWeight:Number,tagMetadata:Object,colorScale:{type:Object,value:null},tooltipSortingMethod:String,_loadDataCallback:{type:Object,value:function(){var a=this;return function(b,c,e){e=e.map(function(g){return{wall_time:new Date(1E3*g[0]),step:g[1],scalar:g[2]}});var f=a._getSeriesNameFromDatum(c);b.setSeriesMetadata(f,
c);b.setSeriesData(f,e)}},readOnly:!0},getDataLoadUrl:{type:Function,value:function(){return function(a){var b=a.experiment;return Rk.getRouter().pluginRoute("scalars","/scalars",new URLSearchParams({tag:a.tag,run:a.run,experiment:b?b.id:""}))}}},_downloadUrlFn:{type:Function,value:function(){var a=this;return function(b,c){return a.getDataLoadUrl({tag:b,run:c})}}},requestData:Function,_getDataLoadName:{type:Function,value:function(){var a=this;return function(b){return a._getSeriesNameFromDatum(b)}}},
_expanded:{type:Boolean,value:!1,reflectToAttribute:!0},_logScaleActive:Boolean,_tooltipColumns:{type:Array,value:function(){var a=this,b=fl.DEFAULT_TOOLTIP_COLUMNS.slice(),c=b.findIndex(function(e){return"Name"==e.title});b.splice(c,1,{title:"Name",evaluate:function(e){e=e.dataset.metadata().meta;return a._getSeriesDisplayNameFromDatum(e)}});return b}}},reload:function(){this.$$("tf-line-chart-data-loader").reload()},redraw:function(){this.$$("tf-line-chart-data-loader").redraw()},_toggleExpanded:function(){this.set("_expanded",
!this._expanded);this.redraw()},_toggleLogScale:function(){this.set("_logScaleActive",!this._logScaleActive)},_resetDomain:function(){var a=this.$$("tf-line-chart-data-loader");a&&a.resetDomain()},_updateDownloadLink:function(){var a=this.$$("tf-line-chart-data-loader").exportAsSvgString();this.$$("#svgLink").href="data:image/svg+xml;base64,"+btoa(a)},_runsFromData:function(a){return a.map(function(b){return b.run})},_getDataSeries:function(){var a=this;return this.dataToLoad.map(function(b){return a._getSeriesNameFromDatum(b)})},
_getSeriesNameFromDatum:function(a){return JSON.stringify([(void 0===a.experiment?{name:"_default"}:a.experiment).name,a.run])},_getSeriesDisplayNameFromDatum:function(a){return a.run},_getColorScale:function(){return null!==this.colorScale?this.colorScale:{scale:function(a){a=za(JSON.parse(a));a.next();a=a.next().value;return Yk.runsColorScale(a)}}}});
</script>
</dom-module>









<script>//~~WEBPATH~~/iron-range-behavior/iron-range-behavior.html.js
Polymer.IronRangeBehavior={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:["_update(value, min, max, step)"],_calcRatio:function(a){return(this._clampValue(a)-this.min)/(this.max-this.min)},_clampValue:function(a){return Math.min(this.max,Math.max(this.min,this._calcStep(a)))},_calcStep:function(a){a=parseFloat(a);
if(!this.step)return a;a=Math.round((a-this.min)/this.step);return 1>this.step?a/(1/this.step)+this.min:a*this.step+this.min},_validateValue:function(){var a=this._clampValue(this.value);this.value=this.oldValue=isNaN(a)?this.oldValue:a;return this.value!==a},_update:function(){this._validateValue();this._setRatio(100*this._calcRatio(this.value))}};
</script>










<dom-module id="paper-progress">
  <template>
    <style>
      :host {
        display: block;
        width: 200px;
        position: relative;
        overflow: hidden;
      }

      :host([hidden]), [hidden] {
        display: none !important;
      }

      #progressContainer {
        @apply --paper-progress-container;
        position: relative;
      }

      #progressContainer,
      /* the stripe for the indeterminate animation*/
      .indeterminate::after {
        height: var(--paper-progress-height, 4px);
      }

      #primaryProgress,
      #secondaryProgress,
      .indeterminate::after {
        @apply --layout-fit;
      }

      #progressContainer,
      .indeterminate::after {
        background: var(--paper-progress-container-color, var(--google-grey-300));
      }

      :host(.transiting) #primaryProgress,
      :host(.transiting) #secondaryProgress {
        -webkit-transition-property: -webkit-transform;
        transition-property: transform;

        /* Duration */
        -webkit-transition-duration: var(--paper-progress-transition-duration, 0.08s);
        transition-duration: var(--paper-progress-transition-duration, 0.08s);

        /* Timing function */
        -webkit-transition-timing-function: var(--paper-progress-transition-timing-function, ease);
        transition-timing-function: var(--paper-progress-transition-timing-function, ease);

        /* Delay */
        -webkit-transition-delay: var(--paper-progress-transition-delay, 0s);
        transition-delay: var(--paper-progress-transition-delay, 0s);
      }

      #primaryProgress,
      #secondaryProgress {
        @apply --layout-fit;
        -webkit-transform-origin: left center;
        transform-origin: left center;
        -webkit-transform: scaleX(0);
        transform: scaleX(0);
        will-change: transform;
      }

      #primaryProgress {
        background: var(--paper-progress-active-color, var(--google-green-500));
      }

      #secondaryProgress {
        background: var(--paper-progress-secondary-color, var(--google-green-100));
      }

      :host([disabled]) #primaryProgress {
        background: var(--paper-progress-disabled-active-color, var(--google-grey-500));
      }

      :host([disabled]) #secondaryProgress {
        background: var(--paper-progress-disabled-secondary-color, var(--google-grey-300));
      }

      :host(:not([disabled])) #primaryProgress.indeterminate {
        -webkit-transform-origin: right center;
        transform-origin: right center;
        -webkit-animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      :host(:not([disabled])) #primaryProgress.indeterminate::after {
        content: "";
        -webkit-transform-origin: center center;
        transform-origin: center center;

        -webkit-animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      @-webkit-keyframes indeterminate-bar {
        0% {
          -webkit-transform: scaleX(1) translateX(-100%);
        }
        50% {
          -webkit-transform: scaleX(1) translateX(0%);
        }
        75% {
          -webkit-transform: scaleX(1) translateX(0%);
          -webkit-animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          -webkit-transform: scaleX(0) translateX(0%);
        }
      }

      @-webkit-keyframes indeterminate-splitter {
        0% {
          -webkit-transform: scaleX(.75) translateX(-125%);
        }
        30% {
          -webkit-transform: scaleX(.75) translateX(-125%);
          -webkit-animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
        100% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
      }

      @keyframes indeterminate-bar {
        0% {
          transform: scaleX(1) translateX(-100%);
        }
        50% {
          transform: scaleX(1) translateX(0%);
        }
        75% {
          transform: scaleX(1) translateX(0%);
          animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          transform: scaleX(0) translateX(0%);
        }
      }

      @keyframes indeterminate-splitter {
        0% {
          transform: scaleX(.75) translateX(-125%);
        }
        30% {
          transform: scaleX(.75) translateX(-125%);
          animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          transform: scaleX(.75) translateX(125%);
        }
        100% {
          transform: scaleX(.75) translateX(125%);
        }
      }
    </style>

    <div id="progressContainer">
      <div id="secondaryProgress" hidden$="[[_hideSecondaryProgress(secondaryRatio)]]"></div>
      <div id="primaryProgress"></div>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-progress/paper-progress.html.js
Polymer({is:"paper-progress",behaviors:[Polymer.IronRangeBehavior],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:"_toggleIndeterminate"},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_disabledChanged"}},observers:["_progressChanged(secondaryProgress, value, min, max, indeterminate)"],hostAttributes:{role:"progressbar"},_toggleIndeterminate:function(a){this.toggleClass("indeterminate",
a,this.$.primaryProgress)},_transformProgress:function(a,b){a.style.transform=a.style.webkitTransform="scaleX("+b/100+")"},_mainRatioChanged:function(a){this._transformProgress(this.$.primaryProgress,a)},_progressChanged:function(a,b,c,e,f){a=this._clampValue(a);b=this._clampValue(b);var g=100*this._calcRatio(a),h=100*this._calcRatio(b);this._setSecondaryRatio(g);this._transformProgress(this.$.secondaryProgress,g);this._transformProgress(this.$.primaryProgress,h);this.secondaryProgress=a;f?this.removeAttribute("aria-valuenow"):
this.setAttribute("aria-valuenow",b);this.setAttribute("aria-valuemin",c);this.setAttribute("aria-valuemax",e)},_disabledChanged:function(a){this.setAttribute("aria-disabled",a?"true":"false")},_hideSecondaryProgress:function(a){return 0===a}});
</script>





<dom-module id="paper-slider">
  <template strip-whitespace>
    <style>
      :host {
        @apply --layout;
        @apply --layout-justified;
        @apply --layout-center;
        width: 200px;
        cursor: default;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        --paper-progress-active-color: var(--paper-slider-active-color, var(--google-blue-700));
        --paper-progress-secondary-color: var(--paper-slider-secondary-color, var(--google-blue-300));
        --paper-progress-disabled-active-color: var(--paper-slider-disabled-active-color, var(--paper-grey-400));
        --paper-progress-disabled-secondary-color: var(--paper-slider-disabled-secondary-color, var(--paper-grey-400));
        --calculated-paper-slider-height: var(--paper-slider-height, 2px);
      }

      /* focus shows the ripple */
      :host(:focus) {
        outline: none;
      }

      /**
       * NOTE(keanulee): Though :host-context is not universally supported, some pages
       * still rely on paper-slider being flipped when dir="rtl" is set on body. For full
       * compatability, dir="rtl" must be explicitly set on paper-slider.
       */
      :dir(rtl) #sliderContainer {
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
      }

      /**
       * NOTE(keanulee): This is separate from the rule above because :host-context may
       * not be recognized.
       */
      :host([dir="rtl"]) #sliderContainer {
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
      }

      /**
       * NOTE(keanulee): Needed to override the :host-context rule (where supported)
       * to support LTR sliders in RTL pages.
       */
      :host([dir="ltr"]) #sliderContainer {
        -webkit-transform: scaleX(1);
        transform: scaleX(1);
      }

      #sliderContainer {
        position: relative;
        width: 100%;
        height: calc(30px + var(--calculated-paper-slider-height));
        margin-left: calc(15px + var(--calculated-paper-slider-height)/2);
        margin-right: calc(15px + var(--calculated-paper-slider-height)/2);
      }

      #sliderContainer:focus {
        outline: 0;
      }

      #sliderContainer.editable {
        margin-top: 12px;
        margin-bottom: 12px;
      }

      .bar-container {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        overflow: hidden;
      }

      .ring > .bar-container {
        left: calc(5px + var(--calculated-paper-slider-height)/2);
        transition: left 0.18s ease;
      }

      .ring.expand.dragging > .bar-container {
        transition: none;
      }

      .ring.expand:not(.pin) > .bar-container {
        left: calc(8px + var(--calculated-paper-slider-height)/2);
      }

      #sliderBar {
        padding: 15px 0;
        width: 100%;
        background-color: var(--paper-slider-bar-color, transparent);
        --paper-progress-container-color: var(--paper-slider-container-color, var(--paper-grey-400));
        --paper-progress-height: var(--calculated-paper-slider-height);
      }

      .slider-markers {
        position: absolute;
        top: calc(14px + var(--paper-slider-height,2px)/2);
        height: var(--calculated-paper-slider-height);
        left: 0;
        right: -1px;
        box-sizing: border-box;
        pointer-events: none;
        @apply --layout-horizontal;
      }

      .slider-marker {
        @apply --layout-flex;
      }
      .slider-markers::after,
      .slider-marker::after {
        content: "";
        display: block;
        margin-left: -1px;
        width: 2px;
        height: var(--calculated-paper-slider-height);
        border-radius: 50%;
        background-color: var(--paper-slider-markers-color, #000);
      }

      .slider-knob {
        position: absolute;
        left: 0;
        top: 0;
        margin-left: calc(-15px - var(--calculated-paper-slider-height)/2);
        width: calc(30px + var(--calculated-paper-slider-height));
        height: calc(30px + var(--calculated-paper-slider-height));
      }

      .transiting > .slider-knob {
        transition: left 0.08s ease;
      }

      .slider-knob:focus {
        outline: none;
      }

      .slider-knob.dragging {
        transition: none;
      }

      .snaps > .slider-knob.dragging {
        transition: -webkit-transform 0.08s ease;
        transition: transform 0.08s ease;
      }

      .slider-knob-inner {
        margin: 10px;
        width: calc(100% - 20px);
        height: calc(100% - 20px);
        background-color: var(--paper-slider-knob-color, var(--google-blue-700));
        border: 2px solid var(--paper-slider-knob-color, var(--google-blue-700));
        border-radius: 50%;

        -moz-box-sizing: border-box;
        box-sizing: border-box;

        transition-property: -webkit-transform, background-color, border;
        transition-property: transform, background-color, border;
        transition-duration: 0.18s;
        transition-timing-function: ease;
      }

      .expand:not(.pin) > .slider-knob > .slider-knob-inner {
        -webkit-transform: scale(1.5);
        transform: scale(1.5);
      }

      .ring > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-knob-start-color, transparent);
        border: 2px solid var(--paper-slider-knob-start-border-color, var(--paper-grey-400));
      }

      .slider-knob-inner::before {
        background-color: var(--paper-slider-pin-color, var(--google-blue-700));
      }

      .pin > .slider-knob > .slider-knob-inner::before {
        content: "";
        position: absolute;
        top: 0;
        left: 50%;
        margin-left: -13px;
        width: 26px;
        height: 26px;
        border-radius: 50% 50% 50% 0;

        -webkit-transform: rotate(-45deg) scale(0) translate(0);
        transform: rotate(-45deg) scale(0) translate(0);
      }

      .slider-knob-inner::before,
      .slider-knob-inner::after {
        transition: -webkit-transform .18s ease, background-color .18s ease;
        transition: transform .18s ease, background-color .18s ease;
      }

      .pin.ring > .slider-knob > .slider-knob-inner::before {
        background-color: var(--paper-slider-pin-start-color, var(--paper-grey-400));
      }

      .pin.expand > .slider-knob > .slider-knob-inner::before {
        -webkit-transform: rotate(-45deg) scale(1) translate(17px, -17px);
        transform: rotate(-45deg) scale(1) translate(17px, -17px);
      }

      .pin > .slider-knob > .slider-knob-inner::after {
        content: attr(value);
        position: absolute;
        top: 0;
        left: 50%;
        margin-left: -16px;
        width: 32px;
        height: 26px;
        text-align: center;
        color: var(--paper-slider-font-color, #fff);
        font-size: 10px;

        -webkit-transform: scale(0) translate(0);
        transform: scale(0) translate(0);
      }

      .pin.expand > .slider-knob > .slider-knob-inner::after {
        -webkit-transform: scale(1) translate(0, -17px);
        transform: scale(1) translate(0, -17px);
      }

      /* paper-input */
      .slider-input {
        width: 50px;
        overflow: hidden;
        --paper-input-container-input: {
          text-align: center;
          @apply --paper-slider-input-container-input;
        };
        @apply --paper-slider-input;
      }

      /* disabled state */
      #sliderContainer.disabled {
        pointer-events: none;
      }

      .disabled > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-disabled-knob-color, var(--paper-grey-400));
        border: 2px solid var(--paper-slider-disabled-knob-color, var(--paper-grey-400));
        -webkit-transform: scale3d(0.75, 0.75, 1);
        transform: scale3d(0.75, 0.75, 1);
      }

      .disabled.ring > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-knob-start-color, transparent);
        border: 2px solid var(--paper-slider-knob-start-border-color, var(--paper-grey-400));
      }

      paper-ripple {
        color: var(--paper-slider-knob-color, var(--google-blue-700));
      }
    </style>

    <div id="sliderContainer" class$="[[_getClassNames(disabled, pin, snaps, immediateValue, min, expand, dragging, transiting, editable)]]">
      <div class="bar-container">
        <paper-progress disabled$="[[disabled]]" id="sliderBar" aria-hidden="true" min="[[min]]" max="[[max]]" step="[[step]]" value="[[immediateValue]]" secondary-progress="[[secondaryProgress]]" on-down="_bardown" on-up="_resetKnob" on-track="_bartrack" on-tap="_barclick">
        </paper-progress>
      </div>

      <template is="dom-if" if="[[snaps]]">
        <div class="slider-markers">
          <template is="dom-repeat" items="[[markers]]">
            <div class="slider-marker"></div>
          </template>
        </div>
      </template>

      <div id="sliderKnob" class="slider-knob" on-down="_knobdown" on-up="_resetKnob" on-track="_onTrack" on-transitionend="_knobTransitionEnd">
          <div class="slider-knob-inner" value$="[[immediateValue]]"></div>
      </div>
    </div>

    <template is="dom-if" if="[[editable]]">
      <paper-input id="input" type="number" step="[[step]]" min="[[min]]" max="[[max]]" class="slider-input" disabled$="[[disabled]]" value="[[immediateValue]]" on-change="_changeValue" on-keydown="_inputKeyDown" no-label-float>
      </paper-input>
    </template>
  </template>

  <script>//~~WEBPATH~~/paper-slider/paper-slider.html.js
Polymer({is:"paper-slider",behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronFormElementBehavior,Polymer.PaperInkyFocusBehavior,Polymer.IronRangeBehavior],properties:{snaps:{type:Boolean,value:!1,notify:!0},pin:{type:Boolean,value:!1,notify:!0},secondaryProgress:{type:Number,value:0,notify:!0,observer:"_secondaryProgressChanged"},editable:{type:Boolean,value:!1},immediateValue:{type:Number,value:0,readOnly:!0,notify:!0},maxMarkers:{type:Number,value:0,notify:!0},expand:{type:Boolean,value:!1,readOnly:!0},
ignoreBarTouch:{type:Boolean,value:!1},dragging:{type:Boolean,value:!1,readOnly:!0,notify:!0},transiting:{type:Boolean,value:!1,readOnly:!0},markers:{type:Array,readOnly:!0,value:function(){return[]}}},observers:["_updateKnob(value, min, max, snaps, step)","_valueChanged(value)","_immediateValueChanged(immediateValue)","_updateMarkers(maxMarkers, min, max, snaps)"],hostAttributes:{role:"slider",tabindex:0},keyBindings:{left:"_leftKey",right:"_rightKey","down pagedown home":"_decrementKey","up pageup end":"_incrementKey"},
ready:function(){this.ignoreBarTouch&&Polymer.Gestures.setTouchAction(this.$.sliderBar,"auto")},increment:function(){this.value=this._clampValue(this.value+this.step)},decrement:function(){this.value=this._clampValue(this.value-this.step)},_updateKnob:function(a,b,c){this.setAttribute("aria-valuemin",b);this.setAttribute("aria-valuemax",c);this.setAttribute("aria-valuenow",a);this._positionKnob(100*this._calcRatio(a))},_valueChanged:function(){this.fire("value-change",{composed:!0})},_immediateValueChanged:function(){this.dragging?
this.fire("immediate-value-change",{composed:!0}):this.value=this.immediateValue},_secondaryProgressChanged:function(){this.secondaryProgress=this._clampValue(this.secondaryProgress)},_expandKnob:function(){this._setExpand(!0)},_resetKnob:function(){this.cancelDebouncer("expandKnob");this._setExpand(!1)},_positionKnob:function(a){this._setImmediateValue(this._calcStep(this._calcKnobPosition(a)));this._setRatio(100*this._calcRatio(this.immediateValue));this.$.sliderKnob.style.left=this.ratio+"%";this.dragging&&
(this._knobstartx=this.ratio*this._w/100,this.translate3d(0,0,0,this.$.sliderKnob))},_calcKnobPosition:function(a){return(this.max-this.min)*a/100+this.min},_onTrack:function(a){a.stopPropagation();switch(a.detail.state){case "start":this._trackStart(a);break;case "track":this._trackX(a);break;case "end":this._trackEnd()}},_trackStart:function(){this._setTransiting(!1);this._w=this.$.sliderBar.offsetWidth;this._knobstartx=this._startx=this._x=this.ratio*this._w/100;this._minx=-this._startx;this._maxx=
this._w-this._startx;this.$.sliderKnob.classList.add("dragging");this._setDragging(!0)},_trackX:function(a){this.dragging||this._trackStart(a);this._x=this._startx+Math.min(this._maxx,Math.max(this._minx,a.detail.dx*(this._isRTL?-1:1)));this._setImmediateValue(this._calcStep(this._calcKnobPosition(this._x/this._w*100)));this.translate3d(this._calcRatio(this.immediateValue)*this._w-this._knobstartx+"px",0,0,this.$.sliderKnob)},_trackEnd:function(){var a=this.$.sliderKnob.style;this.$.sliderKnob.classList.remove("dragging");
this._setDragging(!1);this._resetKnob();this.value=this.immediateValue;a.transform=a.webkitTransform="";this.fire("change",{composed:!0})},_knobdown:function(a){this._expandKnob();a.preventDefault();this.focus()},_bartrack:function(a){this._allowBarEvent(a)&&this._onTrack(a)},_barclick:function(a){this._w=this.$.sliderBar.offsetWidth;var b=this.$.sliderBar.getBoundingClientRect();b=(a.detail.x-b.left)/this._w*100;this._isRTL&&(b=100-b);var c=this.ratio;this._setTransiting(!0);this._positionKnob(b);
c===this.ratio&&this._setTransiting(!1);this.async(function(){this.fire("change",{composed:!0})});a.preventDefault();this.focus()},_bardown:function(a){this._allowBarEvent(a)&&(this.debounce("expandKnob",this._expandKnob,60),this._barclick(a))},_knobTransitionEnd:function(a){a.target===this.$.sliderKnob&&this._setTransiting(!1)},_updateMarkers:function(a,b,c,e){e||this._setMarkers([]);b=Math.round((c-b)/this.step);b>a&&(b=a);if(0>b||!isFinite(b))b=0;this._setMarkers(Array(b))},_mergeClasses:function(a){return Object.keys(a).filter(function(b){return a[b]}).join(" ")},
_getClassNames:function(){return this._mergeClasses({disabled:this.disabled,pin:this.pin,snaps:this.snaps,ring:this.immediateValue<=this.min,expand:this.expand,dragging:this.dragging,transiting:this.transiting,editable:this.editable})},_allowBarEvent:function(a){return!this.ignoreBarTouch||a.detail.sourceEvent instanceof MouseEvent},get _isRTL(){void 0===this.__isRTL&&(this.__isRTL="rtl"===window.getComputedStyle(this).direction);return this.__isRTL},_leftKey:function(a){this._isRTL?this._incrementKey(a):
this._decrementKey(a)},_rightKey:function(a){this._isRTL?this._decrementKey(a):this._incrementKey(a)},_incrementKey:function(a){this.disabled||("end"===a.detail.key?this.value=this.max:this.increment(),this.fire("change"),a.preventDefault())},_decrementKey:function(a){this.disabled||("home"===a.detail.key?this.value=this.min:this.decrement(),this.fire("change"),a.preventDefault())},_changeValue:function(a){this.value=a.target.value;this.fire("change",{composed:!0})},_inputKeyDown:function(a){a.stopPropagation()},
_createRipple:function(){this._rippleContainer=this.$.sliderKnob;return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)},_focusedChanged:function(a){a&&this.ensureRipple();this.hasRipple()&&(this._ripple.style.display=a?"":"none",this._ripple.holdDown=a)}});
</script>
</dom-module>





<dom-module id="tf-smoothing-input">
  <template>
    <h3 class="title">Smoothing</h3>
    <div class="smoothing-block">
      <paper-slider id="slider" immediate-value="{{_immediateWeightNumberForPaperSlider}}" max="[[max]]" min="[[min]]" pin step="[[step]]" type="number" value="{{weight}}"></paper-slider>
      <paper-input id="input" label="weight" no-label-float value="{{_inputWeightStringForPaperInput}}" type="number" step="[[step]]" min="[[min]]" max="[[max]]"></paper-input>
    </div>
    <style>
      .title {
        color: var(--paper-grey-800);
        margin: 0;
        font-weight: normal;
        font-size: 14px;
        margin-bottom: 5px;
      }

      .smoothing-block {
        display: flex;
      }

      paper-slider {
        --paper-slider-active-color: var(--tb-orange-strong);
        --paper-slider-knob-color: var(--tb-orange-strong);
        --paper-slider-knob-start-border-color: var(--tb-orange-strong);
        --paper-slider-knob-start-color: var(--tb-orange-strong);
        --paper-slider-markers-color: var(--tb-orange-strong);
        --paper-slider-pin-color: var(--tb-orange-strong);
        --paper-slider-pin-start-color: var(--tb-orange-strong);
        flex-grow: 2;
      }

      paper-input {
        --paper-input-container-focus-color: var(--tb-orange-strong);
        --paper-input-container-input: {
          font-size: 14px;
        };
        --paper-input-container-label: {
          font-size: 14px;
        };
        width: 60px;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-scalar-dashboard/tf-smoothing-input.html.js
Polymer({is:"tf-smoothing-input",properties:{step:Number,max:Number,min:Number,weight:{type:Number,value:.6,notify:!0},_immediateWeightNumberForPaperSlider:{type:Number,notify:!0,observer:"_immediateWeightNumberForPaperSliderChanged"},_inputWeightStringForPaperInput:{type:String,notify:!0,observer:"_inputWeightStringForPaperInputChanged"}},_updateWeight:_.debounce(function(a){this.weight=a},250),_immediateWeightNumberForPaperSliderChanged:function(){this._inputWeightStringForPaperInput=this._immediateWeightNumberForPaperSlider.toString();
this._updateWeight.call(this,this._immediateWeightNumberForPaperSlider)},_inputWeightStringForPaperInputChanged:function(){0>+this._inputWeightStringForPaperInput?this._inputWeightStringForPaperInput="0":1<+this._inputWeightStringForPaperInput&&(this._inputWeightStringForPaperInput="1");var a=+this._inputWeightStringForPaperInput;isNaN(a)||this._updateWeight.call(this,a)}});
</script>
</dom-module>



<dom-module id="tf-scalar-dashboard">
  <template>
    <tf-dashboard-layout>
      <div class="sidebar">
        <div class="sidebar-section">
          <div class="line-item">
            <paper-checkbox id="show-download-links" checked="{{_showDownloadLinks}}">Show data download links</paper-checkbox>
          </div>
          <div class="line-item">
            <paper-checkbox id="ignore-y-outlier" checked="{{_ignoreYOutliers}}">Ignore outliers in chart scaling</paper-checkbox>
          </div>
          <div id="tooltip-sorting">
            <div>Tooltip sorting method:</div>
            <paper-dropdown-menu no-label-float selected-item-label="{{_tooltipSortingMethod}}">
              <paper-menu class="dropdown-content" selected="0" slot="dropdown-content">
                <paper-item>default</paper-item>
                <paper-item>descending</paper-item>
                <paper-item>ascending</paper-item>
                <paper-item>nearest</paper-item>
              </paper-menu>
            </paper-dropdown-menu>
          </div>
        </div>
        <div class="sidebar-section">
          <tf-smoothing-input weight="{{_smoothingWeight}}" step="0.001" min="0" max="0.999"></tf-smoothing-input>
        </div>
        <div class="sidebar-section">
          <tf-option-selector id="x-type-selector" name="Horizontal Axis" selected-id="{{_xType}}">
            <paper-button id="step">step</paper-button><paper-button id="relative">relative</paper-button><paper-button id="wall_time">wall</paper-button>
          </tf-option-selector>
        </div>
        <div class="sidebar-section">
          <tf-runs-selector selected-runs="{{_selectedRuns}}">
          </tf-runs-selector>
        </div>
      </div>
      <div class="center">
        <template is="dom-if" if="[[_dataNotFound]]">
          <div class="no-data-warning">
            <h3>No scalar data was found.</h3>
            <p>Probable causes:
            <ul>
              <li>You havenât written any scalar data to your event files.
              <li>TensorBoard canât find your event files.
            </ul>
            <p>
            If youâre new to using TensorBoard, and want to find out how
            to add data and set up your event files, check out the
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
            and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
            <p>
            If you think TensorBoard is configured properly, please see
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
            and consider filing an issue on GitHub.
          </div>
        </template>
        <template is="dom-if" if="[[!_dataNotFound]]">
          <tf-tag-filterer tag-filter="{{_tagFilter}}"></tf-tag-filterer>
          <template is="dom-repeat" items="[[_categories]]" as="category">
            <tf-category-pane category="[[category]]" opened="[[_getPaneOpened(category)]]" on-opened-changed="_onPaneOpenChanged">
              <tf-paginated-view items="[[category.items]]" pages="{{category._pages}}">
                <template is="dom-repeat" items="[[category._pages]]" as="page">
                  <template is="dom-if" if="[[page.active]]">
                    <div class="layout horizontal wrap">
                      <template is="dom-repeat" items="[[page.items]]">
                        <tf-scalar-card active="[[page.active]]" data-to-load="[[item.series]]" ignore-y-outliers="[[_ignoreYOutliers]]" request-manager="[[_requestManager]]" show-download-links="[[_showDownloadLinks]]" smoothing-enabled="[[_smoothingEnabled]]" smoothing-weight="[[_smoothingWeight]]" tag-metadata="[[_tagMetadata(category, _runToTagInfo, item)]]" tag="[[item.tag]]" tooltip-sorting-method="[[_tooltipSortingMethod]]" x-type="[[_xType]]"></tf-scalar-card>
                      </template>
                    </div>
                  </template>
                </template>
              </tf-paginated-view>
            </tf-category-pane>
          </template>
        </template>
      </div>
    </tf-dashboard-layout>

    <style include="dashboard-style"></style>
    <style>
      #tooltip-sorting {
        align-items: center;
        display: flex;
        font-size: 14px;
        margin-top: 15px;
      }
      #tooltip-sorting paper-dropdown-menu {
        margin-left: 10px;
        --paper-input-container-focus-color: var(--tb-orange-strong);
        width: 105px;
      }
      .line-item {
        display: block;
        padding-top: 5px;
      }
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
      .center {
        overflow-x: hidden;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-scalar-dashboard/tf-scalar-dashboard.html.js
Polymer({is:"tf-scalar-dashboard",properties:{_showDownloadLinks:{type:Boolean,notify:!0,value:Uk.getBooleanInitializer("_showDownloadLinks",{defaultValue:!1,useLocalStorage:!0}),observer:"_showDownloadLinksObserver"},_smoothingWeight:{type:Number,notify:!0,value:Uk.getNumberInitializer("_smoothingWeight",{defaultValue:.6}),observer:"_smoothingWeightObserver"},_smoothingEnabled:{type:Boolean,computed:"_computeSmoothingEnabled(_smoothingWeight)"},_ignoreYOutliers:{type:Boolean,value:Uk.getBooleanInitializer("_ignoreYOutliers",
{defaultValue:!0,useLocalStorage:!0}),observer:"_ignoreYOutliersObserver"},_paneOpened:{type:Object,value:function(){return{}}},_xType:{type:String,value:cl.XType.STEP},_selectedRuns:{type:Array,value:function(){return[]}},_runToTagInfo:Object,_dataNotFound:Boolean,_tagFilter:{type:String,value:""},_categoriesDomReady:Boolean,_categories:{type:Array,value:function(){return[]}},_requestManager:{type:Object,value:function(){return new Rk.RequestManager(50)}}},behaviors:[Wk.ArrayUpdateHelper],observers:["_updateCategories(_runToTagInfo, _selectedRuns, _tagFilter, _categoriesDomReady)",
"_updatePaneOpened(_categories.*)"],_showDownloadLinksObserver:Uk.getBooleanObserver("_showDownloadLinks",{defaultValue:!1,useLocalStorage:!0}),_smoothingWeightObserver:Uk.getNumberObserver("_smoothingWeight",{defaultValue:.6}),_ignoreYOutliersObserver:Uk.getBooleanObserver("_ignoreYOutliers",{defaultValue:!0,useLocalStorage:!0}),_computeSmoothingEnabled:function(a){return 0<a},_getCategoryKey:function(a){return a.metadata.type==Sk.CategoryType.SEARCH_RESULTS?"":a.name},_updatePaneOpened:function(){var a=
this._paneOpened,b={};this._categories.map(this._getCategoryKey).filter(function(c){return null!=a[c]}).forEach(function(c){return b[c]=a[c]});0==Object.keys(b).length&&this._categories.slice(0,3).map(this._getCategoryKey).forEach(function(c){b[c]=!0});this._paneOpened=b},_getPaneOpened:function(a){return this._paneOpened[this._getCategoryKey(a)]},_onPaneOpenChanged:function(a){this.isAttached&&a.target.isAttached&&(this._paneOpened[this._getCategoryKey(a.target.category)]=a.detail.value)},ready:function(){this.reload()},
reload:function(){var a=this;this._fetchTags().then(function(){a._reloadCharts()})},_fetchTags:function(){var a=this,b=Rk.getRouter().pluginRoute("scalars","/tags");return this._requestManager.request(b).then(function(c){if(!_.isEqual(c,a._runToTagInfo)){var e=_.mapValues(c,function(f){return Object.keys(f)});e=Rk.getTags(e);a.set("_dataNotFound",0===e.length);a.set("_runToTagInfo",c);a.async(function(){a.set("_categoriesDomReady",!0)})}})},_reloadCharts:function(){this.querySelectorAll("tf-scalar-card").forEach(function(a){a.reload()})},
_updateCategories:function(a,b,c){a=_.mapValues(a,function(e){return Object.keys(e)});b=Sk.categorizeTags(a,b,c);b.forEach(function(e){e.items=e.items.map(function(f){return{tag:f.tag,series:f.runs.map(function(g){return{run:g,tag:f.tag}})}})});this.updateArrayProp("_categories",b,this._getCategoryKey)},_tagMetadata:function(a,b,c){var e=c.tag,f={};c.series.forEach(function(h){h=h.run;f[h]=b[h][e]});c=e.replace(/\/scalar_summary$/,"");var g=al.aggregateTagInfo(f,c);c=g.description;g=g.displayName;
a.metadata.type==Sk.CategoryType.PREFIX_GROUP&&g.startsWith(a.name+"/")&&(g=g.slice(a.name.length+1));return{description:c,displayName:g}}});
</script>
</dom-module>































<dom-module id="tf-custom-scalar-card-style">
  <template>
    <style>
      :host {
        margin: 5px 10px;
        display: inline-block;
        width: 330px;
        vertical-align: text-top;
      }

      :host[_expanded] {
        width: 100%;
      }

      :host[_expanded] #tf-line-chart-data-loader-container {
        height: 400px;
      }

      h1 {
        font-size: 19px;
        font-weight: normal;
      }

      #tf-line-chart-data-loader-container {
        height: 200px;
        width: 100%;
      }

      #buttons {
        display: flex;
        flex-direction: row;
      }

      paper-icon-button {
        color: #2196F3;
        border-radius: 100%;
        width: 32px;
        height: 32px;
        padding: 4px;
      }

      paper-icon-button[selected] {
        background: var(--tb-ui-light-accent);
      }

      .download-links {
        display: flex;
        height: 32px;
      }

      .download-links a {
        font-size: 10px;
        align-self: center;
        margin: 2px;
      }

      .download-links paper-dropdown-menu {
        width: 100px;
        --paper-input-container-label: {
          font-size: 10px;
        }
        --paper-input-container-input: {
          font-size: 10px;
        }
      }
    </style>
  </template>
</dom-module>

<script>//~~WEBPATH~~/tf-custom-scalar-dashboard/tf-custom-scalar-helpers.js
var hl;
(function(a){var b=function(){function c(e,f,g,h,l){this.run=e;this.tag=f;this.name=g;this.scalarData=h;this.symbol=l}c.prototype.getName=function(){return this.name};c.prototype.setData=function(e){this.scalarData=e};c.prototype.getData=function(){return this.scalarData};c.prototype.getRun=function(){return this.run};c.prototype.getTag=function(){return this.tag};c.prototype.getSymbol=function(){return this.symbol};return c}();a.DataSeries=b;a.generateDataSeriesName=function(c,e){return e+" ("+c+
")"};b=function(){function c(e){this.runBasedColorScale=e}c.prototype.scale=function(e){return this.runBasedColorScale.scale(this.parseRunName(e))};c.prototype.parseRunName=function(e){return(e=e.match(/\((.*)\)$/))?e[1]:""};return c}();a.DataSeriesColorScale=b})(hl||(hl={}));
</script>



<dom-module id="tf-custom-scalar-margin-chart-card">
<template>
  <tf-card-heading display-name="[[_titleDisplayString]]"></tf-card-heading>
  <div id="tf-line-chart-data-loader-container">
    <tf-line-chart-data-loader id="loader" active="[[active]]" color-scale="[[_colorScale]]" data-series="[[_seriesNames]]" get-data-load-url="[[_dataUrl]]" fill-area="[[_fillArea]]" ignore-y-outliers="[[ignoreYOutliers]]" load-key="[[_tagFilter]]" data-to-load="[[runs]]" log-scale-active="[[_logScaleActive]]" load-data-callback="[[_createProcessDataFunction(marginChartSeries)]]" request-manager="[[requestManager]]" symbol-function="[[_createSymbolFunction()]]" tooltip-columns="[[_tooltipColumns]]" tooltip-sorting-method="[[tooltipSortingMethod]]" x-type="[[xType]]">
    </tf-line-chart-data-loader>
  </div>
  <div id="buttons">
    <paper-icon-button selected$="[[_expanded]]" icon="fullscreen" on-tap="_toggleExpanded"></paper-icon-button>
    <paper-icon-button selected$="[[_logScaleActive]]" icon="line-weight" on-tap="_toggleLogScale" title="Toggle y-axis log scale"></paper-icon-button>
    <paper-icon-button icon="settings-overscan" on-tap="_resetDomain" title="Fit domain to data"></paper-icon-button>
    <span style="flex-grow: 1"></span>
    <template is="dom-if" if="[[showDownloadLinks]]">
      <div class="download-links">
        <paper-dropdown-menu no-label-float="true" label="series to download" selected-item-label="{{_dataSeriesNameToDownload}}">
          <paper-menu class="dropdown-content" slot="dropdown-content">
            <template is="dom-repeat" items="[[_seriesNames]]" as="dataSeriesName">
              <paper-item no-label-float="true">[[dataSeriesName]]</paper-item>
            </template>
          </paper-menu>
        </paper-dropdown-menu>
        <a download="[[_dataSeriesNameToDownload]].csv" href="[[_csvUrl(_nameToDataSeries, _dataSeriesNameToDownload)]]">CSV</a> <a download="[[_dataSeriesNameToDownload]].json" href="[[_jsonUrl(_nameToDataSeries, _dataSeriesNameToDownload)]]">JSON</a>
      </div>
    </template>
  </div>

  
  <template is="dom-if" if="[[_missingTags.length]]">
    <div class="collapsible-list-title">
      <paper-icon-button icon="[[_getToggleCollapsibleIcon(_missingTagsCollapsibleOpened)]]" on-click="_toggleMissingTagsCollapsibleOpen" class="toggle-collapsible-button">
      </paper-icon-button>
      <span class="collapsible-title-text">
        <iron-icon icon="icons:error"></iron-icon> Missing Tags
      </span>
    </div>
    <iron-collapse opened="[[_missingTagsCollapsibleOpened]]">
      <div class="error-content">
        <iron-icon class="error-icon" icon="icons:error"></iron-icon>
        <template is="dom-repeat" items="[[_missingTags]]" as="missingEntry">
          <div class="missing-tags-for-run-container">
            Run "[[missingEntry.run]]" lacks data for tags
            <ul>
              <template is="dom-repeat" items="[[missingEntry.tags]]" as="tag">
                <li>[[tag]]</li>
              </template>
            </ul>
          </div>
        </template>
      </div>
    </iron-collapse>
  </template>

  <template is="dom-if" if="[[_tagFilterInvalid]]">
    <div class="error-content">
      <iron-icon class="error-icon" icon="icons:error"></iron-icon>
      This regular expresion is invalid:<br>
      <span class="invalid-regex">[[_tagFilter]]</span>
    </div>
  </template>

  <template is="dom-if" if="[[_stepsMismatch]]">
    <div class="error-content">
      <iron-icon class="error-icon" icon="icons:error"></iron-icon>
      The steps for value, lower, and upper tags do not match:
      <ul>
        <li>
          <span class="tag-name">[[_stepsMismatch.seriesObject.value]]</span>:
          [[_separateWithCommas(_stepsMismatch.valueSteps)]]
        </li>
        <li>
          <span class="tag-name">[[_stepsMismatch.seriesObject.lower]]</span>:
          [[_separateWithCommas(_stepsMismatch.lowerSteps)]]
        </li>
        <li>
          <span class="tag-name">[[_stepsMismatch.seriesObject.upper]]</span>:
          [[_separateWithCommas(_stepsMismatch.upperSteps)]]
        </li>
      </ul>
    </div>
  </template>

  <div id="matches-container">
    <div class="collapsible-list-title">
      <template is="dom-if" if="[[_seriesNames.length]]">
        <paper-icon-button icon="[[_getToggleCollapsibleIcon(_matchesListOpened)]]" on-click="_toggleMatchesOpen" class="toggle-matches-button">
        </paper-icon-button>
      </template>

      <span class="collapsible-title-text">
        Matches ([[_seriesNames.length]])
      </span>
    </div>
    <template is="dom-if" if="[[_seriesNames.length]]">
      <iron-collapse opened="[[_matchesListOpened]]">
        <div id="matches-list">
          <template is="dom-repeat" items="[[_seriesNames]]" as="seriesName">
              <div class="match-list-entry" style="color: [[_determineColor(_colorScale, seriesName)]];">
                <span class="match-entry-symbol">
                  [[_determineSymbol(_nameToDataSeries, seriesName)]]
                </span>
                [[seriesName]]
              </div>
          </template>
        </div>
      </iron-collapse>
    </template>
  </div>

  
  <style include="tf-custom-scalar-card-style"></style>
  <style>
    .error-content {
      background: #f00;
      border-radius: 5px;
      color: #fff;
      margin: 10px 0 0 0;
      padding: 10px;
    }

    .error-icon {
      display: block;
      fill: #fff;
      margin: 0 auto 5px auto;
    }

    .invalid-regex {
      font-weight: bold;
    }

    .error-content ul {
      margin: 1px 0 0 0;
      padding: 0 0 0 19px;
    }

    .tag-name {
      font-weight: bold;
    }

    .collapsible-list-title {
      margin: 10px 0 5px 0;
    }

    .collapsible-title-text {
      vertical-align: middle;
    }

    #matches-list {
      max-height: 200px;
      overflow-y: auto;
    }

    .match-list-entry {
      margin: 0 0 5px 0;
    }

    .match-entry-symbol {
      font-family: arial, sans-serif;
      display: inline-block;
      width: 10px;
    }

    .missing-tags-for-run-container {
      margin: 8px 0 0 0;
    }
  </style>
</template>
<script>//~~WEBPATH~~/tf-custom-scalar-dashboard/tf-custom-scalar-margin-chart-card.html.js
Polymer({is:"tf-custom-scalar-margin-chart-card",properties:{runs:Array,xType:String,active:{type:Boolean,value:!0,readOnly:!0},title:String,marginChartSeries:Array,ignoreYOutliers:Boolean,requestManager:Object,showDownloadLinks:Boolean,tagMetadata:Object,tooltipSortingMethod:String,_colorScale:{type:Object,value:new hl.DataSeriesColorScale({scale:Yk.runsColorScale}),readOnly:!0},_tagFilter:{type:String,computed:"_computeTagFilter(marginChartSeries)"},_tagFilterInvalid:Boolean,_nameToDataSeries:{type:Object,
value:function(){return{}}},_seriesNames:{type:Object,computed:"_computeSeriesNames(_nameToDataSeries, runs)"},_expanded:{type:Boolean,value:!1,reflectToAttribute:!0},_logScaleActive:Boolean,_dataUrl:{type:Function,value:function(){var a=this;return function(b){var c=a._tagFilter;return Rk.addParams(Rk.getRouter().pluginRoute("custom_scalars","/scalars"),{tag:c,run:b})}}},_runToNextAvailableSymbolIndex:{type:Object,value:{}},_matchesListOpened:{type:Boolean,value:!1},_titleDisplayString:{type:String,
computed:"_computeTitleDisplayString(title)"},_fillArea:{type:Object,readOnly:!0,value:{lowerAccessor:function(a){return a.lower},higherAccessor:function(a){return a.upper}}},_tooltipColumns:{type:Array,value:function(){function a(c){return isNaN(c)?"NaN":b(c)}var b=cl.multiscaleFormatter(cl.Y_TOOLTIP_FORMATTER_PRECISION);return[{title:"Name",evaluate:function(c){return c.dataset.metadata().name}},{title:"Value",evaluate:function(c){return a(c.datum.scalar)}},{title:"Lower Margin",evaluate:function(c){return a(c.datum.lower)}},
{title:"Upper Margin",evaluate:function(c){return a(c.datum.upper)}},{title:"Step",evaluate:function(c){return cl.stepFormatter(c.datum.step)}},{title:"Time",evaluate:function(c){return cl.timeFormatter(c.datum.wall_time)}},{title:"Relative",evaluate:function(c){return cl.relativeFormatter(cl.relativeAccessor(c.datum,-1,c.dataset))}}]}},_missingTags:{type:Array,value:[]},_missingTagsCollapsibleOpened:{type:Boolean,value:!1},_stepsMismatch:Object},observers:["_updateChart(_nameToDataSeries)","_refreshDataSeries(_tagFilter)"],
reload:function(){this.$.loader.reload()},redraw:function(){this.$.loader.redraw()},_toggleExpanded:function(){this.set("_expanded",!this._expanded);this.redraw()},_toggleLogScale:function(){this.set("_logScaleActive",!this._logScaleActive)},_resetDomain:function(){var a=this.$.loader;a&&a.resetDomain()},_csvUrl:function(a,b){if(!b)return"";a=this._downloadDataUrl(a,b);return Rk.addParams(a,{format:"csv"})},_jsonUrl:function(a,b){if(!b)return"";a=this._downloadDataUrl(a,b);return Rk.addParams(a,{format:"json"})},
_downloadDataUrl:function(a,b){a=a[b];a={tag:a.getTag(),run:a.getRun()};return Rk.addParams(Rk.getRouter().pluginRoute("custom_scalars","/download_data"),a)},_createProcessDataFunction:function(a){var b=this;return function(c,e,f){if(f.regex_valid){var g=_.clone(b._nameToDataSeries),h=[];_.forEach(a,function(n){var m=!1,q=f.tag_to_events[n.value],r=f.tag_to_events[n.lower],v=f.tag_to_events[n.upper];_.isUndefined(q)&&(h.push(n.value),m=!0);_.isUndefined(r)&&(h.push(n.lower),m=!0);_.isUndefined(v)&&
(h.push(n.upper),m=!0);if(!m)if(m=function(w){return w[1]},m=b._findStepMismatch(n,q.map(m),r.map(m),v.map(m)))b.set("_stepsMismatch",m);else{m=q.map(function(w,z){return{wall_time:new Date(1E3*w[0]),step:w[1],scalar:w[2],lower:r[z][2],upper:v[z][2]}});q=hl.generateDataSeriesName(e,n.value);var u=g[q];u?u.setData(m):(n=b._createNewDataSeries(e,n.value,q,m),g[q]=n)}});b.set("_nameToDataSeries",g);c=_.findIndex(b._missingTags,function(n){return n.run===e});if(h.length&&3!=h.length){var l={run:e,tags:h};
0<=c?b.splice("_missingTags",c,1,l):b.push("_missingTags",l)}else 0<=c&&b.splice("_missingTags",c,1)}else b.set("_tagFilterInvalid",!0)}},_findStepMismatch:function(a,b,c,e){return _.isEqual(c,b)&&_.isEqual(e,b)?null:{seriesObject:a,valueSteps:b,lowerSteps:c,upperSteps:e}},_createNewDataSeries:function(a,b,c,e){this._runToNextAvailableSymbolIndex[a]|=0;b=new hl.DataSeries(a,b,c,e,cl.SYMBOLS_LIST[this._runToNextAvailableSymbolIndex[a]]);this._runToNextAvailableSymbolIndex[a]=(this._runToNextAvailableSymbolIndex[a]+
1)%cl.SYMBOLS_LIST.length;return b},_updateChart:function(a){var b=this;_.forOwn(a,function(c){b.$.loader.setSeriesData(c.getName(),c.getData())})},_computeSeriesNames:function(){var a=new Set(this.runs);return Object.entries(this._nameToDataSeries).filter(function(b){b=za(b);b.next();b=b.next().value;return a.has(b.run)}).map(function(b){return za(b).next().value})},_determineColor:function(a,b){return a.scale(b)},_refreshDataSeries:function(){this.set("_nameToDataSeries",{})},_createSymbolFunction:function(){var a=
this;return function(b){return a._nameToDataSeries[b].getSymbol().method()}},_determineSymbol:function(a,b){return a[b].getSymbol().character},_computeTagFilter:function(a){var b=this;return _.flatten(a.map(function(c){return[c.value,c.lower,c.upper]})).map(function(c){return"("+b._escapeRegexCharacters(c)+")"}).join("|")},_escapeRegexCharacters:function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")},_getToggleCollapsibleIcon:function(a){return a?"expand-less":"expand-more"},_toggleMatchesOpen:function(){this.set("_matchesListOpened",
!this._matchesListOpened)},_computeTitleDisplayString:function(a){return a||"untitled"},_separateWithCommas:function(a){return a.join(", ")},_toggleMissingTagsCollapsibleOpen:function(){this.set("_missingTagsCollapsibleOpened",!this._missingTagsCollapsibleOpened)}});
</script>
</dom-module>


















<dom-module id="tf-custom-scalar-multi-line-chart-card">
<template>
  <tf-card-heading display-name="[[_titleDisplayString]]"></tf-card-heading>
  <div id="tf-line-chart-data-loader-container">
    <tf-line-chart-data-loader id="loader" active="[[active]]" color-scale="[[_colorScale]]" data-series="[[_seriesNames]]" get-data-load-url="[[_dataUrl]]" ignore-y-outliers="[[ignoreYOutliers]]" load-key="[[_tagFilter]]" data-to-load="[[runs]]" log-scale-active="[[_logScaleActive]]" load-data-callback="[[_createProcessDataFunction()]]" request-manager="[[requestManager]]" smoothing-enabled="[[smoothingEnabled]]" smoothing-weight="[[smoothingWeight]]" symbol-function="[[_createSymbolFunction()]]" tooltip-sorting-method="[[tooltipSortingMethod]]" x-type="[[xType]]">
    </tf-line-chart-data-loader>
  </div>
  <div id="buttons">
    <paper-icon-button selected$="[[_expanded]]" icon="fullscreen" on-tap="_toggleExpanded"></paper-icon-button>
    <paper-icon-button selected$="[[_logScaleActive]]" icon="line-weight" on-tap="_toggleLogScale" title="Toggle y-axis log scale"></paper-icon-button>
    <paper-icon-button icon="settings-overscan" on-tap="_resetDomain" title="Fit domain to data"></paper-icon-button>
    <span style="flex-grow: 1"></span>
    <template is="dom-if" if="[[showDownloadLinks]]">
      <div class="download-links">
        <paper-dropdown-menu no-label-float="true" label="series to download" selected-item-label="{{_dataSeriesNameToDownload}}">
          <paper-menu class="dropdown-content" slot="dropdown-content">
            <template is="dom-repeat" items="[[_seriesNames]]" as="dataSeriesName">
              <paper-item no-label-float="true">[[dataSeriesName]]</paper-item>
            </template>
          </paper-menu>
        </paper-dropdown-menu>
        <a download="[[_dataSeriesNameToDownload]].csv" href="[[_csvUrl(_nameToDataSeries, _dataSeriesNameToDownload)]]">CSV</a> <a download="[[_dataSeriesNameToDownload]].json" href="[[_jsonUrl(_nameToDataSeries, _dataSeriesNameToDownload)]]">JSON</a>
      </div>
    </template>
  </div>
  <div id="matches-container">
    <div id="matches-list-title">
      <template is="dom-if" if="[[_seriesNames.length]]">
        <paper-icon-button icon="[[_getToggleMatchesIcon(_matchesListOpened)]]" on-click="_toggleMatchesOpen" class="toggle-matches-button">
        </paper-icon-button>
      </template>

      <span class="matches-text">
        Matches ([[_seriesNames.length]])
      </span>
    </div>
    <template is="dom-if" if="[[_seriesNames.length]]">
      <iron-collapse opened="[[_matchesListOpened]]">
        <div id="matches-list">
          <template is="dom-repeat" items="[[_seriesNames]]" as="seriesName">
              <div class="match-list-entry" style="color: [[_determineColor(_colorScale, seriesName)]];">
                <span class="match-entry-symbol">
                  [[_determineSymbol(_nameToDataSeries, seriesName)]]
                </span>
                [[seriesName]]
              </div>
          </template>
        </div>
      </iron-collapse>
    </template>
  </div>

  
  <style include="tf-custom-scalar-card-style"></style>
  <style>
    #matches-list-title {
      margin: 10px 0 5px 0;
    }

    #matches-list {
      max-height: 200px;
      overflow-y: auto;
    }

    .match-list-entry {
      margin: 0 0 5px 0;
    }

    .match-entry-symbol {
      font-family: arial, sans-serif;
      display: inline-block;
      width: 10px;
    }

    .matches-text {
      vertical-align: middle;
    }
  </style>
</template>
<script>//~~WEBPATH~~/tf-custom-scalar-dashboard/tf-custom-scalar-multi-line-chart-card.html.js
Polymer({is:"tf-custom-scalar-multi-line-chart-card",properties:{runs:Array,xType:String,active:{type:Boolean,value:!0,readOnly:!0},title:String,tagRegexes:Array,ignoreYOutliers:Boolean,requestManager:Object,showDownloadLinks:Boolean,smoothingEnabled:Boolean,smoothingWeight:Number,tagMetadata:Object,tooltipSortingMethod:String,_colorScale:{type:Object,value:new hl.DataSeriesColorScale({scale:Yk.runsColorScale}),readOnly:!0},_tagFilter:{type:String,computed:"_computeTagFilter(tagRegexes)"},_nameToDataSeries:{type:Object,
value:function(){return{}}},_seriesNames:{type:Object,computed:"_computeSeriesNames(_nameToDataSeries, runs)"},_expanded:{type:Boolean,value:!1,reflectToAttribute:!0},_logScaleActive:Boolean,_dataUrl:{type:Function,value:function(){var a=this;return function(b){var c=a._tagFilter;return Rk.addParams(Rk.getRouter().pluginRoute("custom_scalars","/scalars"),{tag:c,run:b})}}},_runToNextAvailableSymbolIndex:{type:Object,value:{}},_matchesListOpened:{type:Boolean,value:!1},_titleDisplayString:{type:String,
computed:"_computeTitleDisplayString(title)"}},observers:["_updateChart(_nameToDataSeries)","_refreshDataSeries(_tagFilter)"],reload:function(){this.$.loader.reload()},redraw:function(){this.$.loader.redraw()},_toggleExpanded:function(){this.set("_expanded",!this._expanded);this.redraw()},_toggleLogScale:function(){this.set("_logScaleActive",!this._logScaleActive)},_resetDomain:function(){var a=this.$.loader;a&&a.resetDomain()},_csvUrl:function(a,b){if(!b)return"";a=this._downloadDataUrl(a,b);return Rk.addParams(a,
{format:"csv"})},_jsonUrl:function(a,b){if(!b)return"";a=this._downloadDataUrl(a,b);return Rk.addParams(a,{format:"json"})},_downloadDataUrl:function(a,b){a=a[b];a={tag:a.getTag(),run:a.getRun()};return Rk.addParams(Rk.getRouter().pluginRoute("custom_scalars","/download_data"),a)},_createProcessDataFunction:function(){var a=this;return function(b,c,e){if(e.regex_valid){var f=_.clone(a._nameToDataSeries);_.forOwn(e.tag_to_events,function(g,h){var l=g.map(function(m){return{wall_time:new Date(1E3*m[0]),
step:m[1],scalar:m[2]}});g=hl.generateDataSeriesName(c,h);var n=f[g];n?n.setData(l):(_.isUndefined(a._runToNextAvailableSymbolIndex[c])&&(a._runToNextAvailableSymbolIndex[c]=0),h=new hl.DataSeries(c,h,g,l,cl.SYMBOLS_LIST[a._runToNextAvailableSymbolIndex[c]]),f[g]=h,a._runToNextAvailableSymbolIndex[c]=(a._runToNextAvailableSymbolIndex[c]+1)%cl.SYMBOLS_LIST.length)});a.set("_nameToDataSeries",f)}}},_updateChart:function(a){var b=this;Object.entries(a).forEach(function(c){var e=za(c);c=e.next().value;
e=e.next().value;b.$.loader.setSeriesData(c,e.getData())})},_computeSelectedRunsSet:function(a){var b={};_.forEach(a,function(c){b[c]=1});return b},_computeSeriesNames:function(){var a=new Set(this.runs);return Object.entries(this._nameToDataSeries).filter(function(b){b=za(b);b.next();b=b.next().value;return a.has(b.run)}).map(function(b){return za(b).next().value})},_determineColor:function(a,b){return a.scale(b)},_refreshDataSeries:function(){this.set("_nameToDataSeries",{})},_createSymbolFunction:function(){var a=
this;return function(b){return a._nameToDataSeries[b].getSymbol().method()}},_determineSymbol:function(a,b){return a[b].getSymbol().character},_computeTagFilter:function(a){return 1===a.length?a[0]:a.map(function(b){return"("+b+")"}).join("|")},_getToggleMatchesIcon:function(a){return a?"expand-less":"expand-more"},_toggleMatchesOpen:function(){this.set("_matchesListOpened",!this._matchesListOpened)},_computeTitleDisplayString:function(a){return a||"untitled"}});
</script>
</dom-module>



<dom-module id="tf-custom-scalar-dashboard">
  <template>
    <tf-dashboard-layout>
      <div class="sidebar">
        <div class="sidebar-section">
          <div class="line-item">
            <paper-checkbox checked="{{_showDownloadLinks}}">Show data download links</paper-checkbox>
          </div>
          <div class="line-item">
            <paper-checkbox checked="{{_ignoreYOutliers}}">Ignore outliers in chart scaling</paper-checkbox>
          </div>
          <div id="tooltip-sorting">
            <div id="tooltip-sorting-label">Tooltip sorting method:</div>
            <paper-dropdown-menu no-label-float selected-item-label="{{_tooltipSortingMethod}}">
              <paper-menu class="dropdown-content" selected="0" slot="dropdown-content">
                <paper-item>default</paper-item>
                <paper-item>descending</paper-item>
                <paper-item>ascending</paper-item>
                <paper-item>nearest</paper-item>
              </paper-menu>
            </paper-dropdown-menu>
          </div>
        </div>
        <div class="sidebar-section">
          <tf-smoothing-input weight="{{_smoothingWeight}}" step="0.001" min="0" max="1"></tf-smoothing-input>
        </div>
        <div class="sidebar-section">
          <tf-option-selector id="x-type-selector" name="Horizontal Axis" selected-id="{{_xType}}">
            <paper-button id="step">step</paper-button><paper-button id="relative">relative</paper-button><paper-button id="wall_time">wall</paper-button>
          </tf-option-selector>
        </div>
        <div class="sidebar-section">
          <tf-runs-selector selected-runs="{{_selectedRuns}}">
          </tf-runs-selector>
        </div>
      </div>
      <div class="center" id="categories-container">
        <template is="dom-if" if="[[_dataNotFound]]">
          <div class="no-data-warning">
            <h3>The custom scalars dashboard is inactive.</h3>
            <p>Probable causes:
            <ol>
              <li>You haven't laid out the dashboard.
              <li>You havenât written any scalar data to your event files.
            </ol>
            <p>
              To lay out the dashboard, pass a <code>Layout</code> protobuffer
              to the <code>set_layout</code> method. For example,
            
<pre>from tensorboard import summary
from tensorboard.plugins.custom_scalar import layout_pb2
...
# This action does not have to be performed at every step, so the action is not
# taken care of by an op in the graph. We only need to specify the layout once.
# We only need to specify the layout once (instead of per step).
layout_summary = summary_lib.custom_scalar_pb(layout_pb2.Layout(
  category=[
    layout_pb2.Category(
      title='losses',
      chart=[
          layout_pb2.Chart(
              title='losses',
              multiline=layout_pb2.MultilineChartContent(
                tag=[r'loss.*'],
              )),
          layout_pb2.Chart(
              title='baz',
              margin=layout_pb2.MarginChartContent(
                series=[
                  layout_pb2.MarginChartContent.Series(
                    value='loss/baz/scalar_summary',
                    lower='baz_lower/baz/scalar_summary',
                    upper='baz_upper/baz/scalar_summary'),
                ],
              )),
      ]),
    layout_pb2.Category(
      title='trig functions',
      chart=[
          layout_pb2.Chart(
              title='wave trig functions',
              multiline=layout_pb2.MultilineChartContent(
                tag=[r'trigFunctions/cosine', r'trigFunctions/sine'],
              )),
          # The range of tangent is different. Let's give it its own chart.
          layout_pb2.Chart(
              title='tan',
              multiline=layout_pb2.MultilineChartContent(
                tag=[r'trigFunctions/tangent'],
              )),
      ],
      # This category we care less about. Let's make it initially closed.
      closed=True),
  ]))
writer.add_summary(layout_summary)
</pre>
        <p>
        If youâre new to using TensorBoard, and want to find out how
        to add data and set up your event files, check out the
        <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
        and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
        
         </div>
        </template>
        <template is="dom-if" if="[[!_dataNotFound]]">
          <template is="dom-repeat" items="[[_categories]]" as="category">
            <tf-category-pane category="[[category]]" opened="[[category.metadata.opened]]" on-opened-changed="_categoryOpenedToggled">
              <template is="dom-repeat" items="[[category.items]]" as="chart">
                <template is="dom-if" if="[[chart.multiline]]">
                  <tf-custom-scalar-multi-line-chart-card active="[[_active]]" request-manager="[[_requestManager]]" runs="[[_selectedRuns]]" title="[[chart.title]]" x-type="[[_xType]]" smoothing-enabled="[[_smoothingEnabled]]" smoothing-weight="[[_smoothingWeight]]" tooltip-sorting-method="[[tooltipSortingMethod]]" ignore-y-outliers="[[_ignoreYOutliers]]" show-download-links="[[_showDownloadLinks]]" tag-regexes="[[chart.multiline.tag]]"></tf-custom-scalar-multi-line-chart-card>
                </template>
                <template is="dom-if" if="[[chart.margin]]">
                  <tf-custom-scalar-margin-chart-card active="[[_active]]" request-manager="[[_requestManager]]" runs="[[_selectedRuns]]" title="[[chart.title]]" x-type="[[_xType]]" tooltip-sorting-method="[[tooltipSortingMethod]]" ignore-y-outliers="[[_ignoreYOutliers]]" show-download-links="[[_showDownloadLinks]]" margin-chart-series="[[chart.margin.series]]"></tf-custom-scalar-margin-chart-card>
                </template>
              </template>
            </tf-category-pane>
          </template>
        </template>
      </div>
    </tf-dashboard-layout>

    <style include="dashboard-style"></style>
    <style>
      #tooltip-sorting {
        align-items: center;
        display: flex;
        font-size: 14px;
        margin-top: 15px;
      }
      #tooltip-sorting paper-dropdown-menu {
        margin-left: 10px;
        --paper-input-container-focus-color: var(--tb-orange-strong);
        width: 105px;
      }
      .line-item {
        display: block;
        padding-top: 5px;
      }
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-custom-scalar-dashboard/tf-custom-scalar-dashboard.html.js
Polymer({is:"tf-custom-scalar-dashboard",properties:{_requestManager:{type:Object,value:function(){return new Rk.RequestManager(50)}},_canceller:{type:Object,value:function(){return new Rk.Canceller}},_selectedRuns:Array,_showDownloadLinks:{type:Boolean,notify:!0,value:Uk.getBooleanInitializer("_showDownloadLinks",{defaultValue:!1,useLocalStorage:!0}),observer:"_showDownloadLinksObserver"},_smoothingEnabled:{type:Boolean,computed:"_computeSmoothingEnabled(_smoothingWeight)"},_smoothingWeight:{type:Number,
notify:!0,value:Uk.getNumberInitializer("_smoothingWeight",{defaultValue:.6}),observer:"_smoothingWeightObserver"},_ignoreYOutliers:{type:Boolean,value:Uk.getBooleanInitializer("_ignoreYOutliers",{defaultValue:!0,useLocalStorage:!0}),observer:"_ignoreYOutliersObserver"},_xType:{type:String,value:"step"},_layout:Object,_dataNotFound:Boolean,_categories:{type:Array,computed:"_makeCategories(_layout)"},_openedCategories:{type:Object},_active:{type:Boolean,value:!0,readOnly:!0}},ready:function(){this.reload()},
reload:function(){var a=this,b=Rk.getRouter().pluginsListing(),c=this._canceller.cancellable(function(e){e.cancelled||(a.set("_dataNotFound",!e.value.custom_scalars),a._dataNotFound||a._retrieveLayoutAndData())});this._requestManager.request(b).then(c)},_reloadCharts:function(){this.querySelectorAll("tf-custom-scalar-margin-chart-card, tf-custom-scalar-multi-line-chart-card").forEach(function(a){a.reload()})},_retrieveLayoutAndData:function(){var a=this,b=Rk.getRouter().pluginRoute("custom_scalars",
"/layout"),c=this._canceller.cancellable(function(e){e.cancelled||(a.set("_layout",e.value),a._dataNotFound||a._reloadCharts())});this._requestManager.request(b).then(c)},_showDownloadLinksObserver:Uk.getBooleanObserver("_showDownloadLinks",{defaultValue:!1,useLocalStorage:!0}),_smoothingWeightObserver:Uk.getNumberObserver("_smoothingWeight",{defaultValue:.6}),_ignoreYOutliersObserver:Uk.getBooleanObserver("_ignoreYOutliers",{defaultValue:!0,useLocalStorage:!0}),_computeSmoothingEnabled:function(a){return 0<
a},_makeCategories:function(a){var b=this;if(!a.category)return[];var c=!1;this._openedCategories||(c=!0,this._openedCategories={});return a.category.map(function(e){c&&!e.closed&&(b._openedCategories[e.title]=!0);return{name:e.title,items:e.chart,metadata:{opened:!!b._openedCategories[e.title]}}})},_categoryOpenedToggled:function(a){a=a.target;a.opened?this._openedCategories[a.category.name]=!0:delete this._openedCategories[a.category.name]}});
</script>
</dom-module>





























<dom-module id="tf-image-loader">
  <template>
    <tf-card-heading tag="[[tag]]" run="[[run]]" display-name="[[tagMetadata.displayName]]" description="[[tagMetadata.description]]" color="[[_runColor]]">
      <template is="dom-if" if="[[_hasMultipleSamples]]">
        <div>sample: [[_sampleText]] of [[ofSamples]]</div>
      </template>
      <template is="dom-if" if="[[_hasAtLeastOneStep]]">
        <div class="heading-row">
          <div class="heading-label">
            step <span style="font-weight: bold">[[_toLocaleString(_stepValue)]]</span>
          </div>
          <div class="heading-label heading-right datetime">
            <template is="dom-if" if="[[_currentWallTime]]">
              [[_currentWallTime]]
            </template>
          </div>
          <div class="label right">
            <paper-spinner-lite active hidden$="[[!_isImageLoading]]">
            </paper-spinner-lite>
          </div>
        </div>
      </template>
      <template is="dom-if" if="[[_hasMultipleSteps]]">
        <div>
          <paper-slider id="steps" immediate-value="{{_stepIndex}}" max="[[_maxStepIndex]]" max-markers="[[_maxStepIndex]]" snaps step="1" value="{{_stepIndex}}"></paper-slider>
        </div>
      </template>
    </tf-card-heading>

    
    <a id="main-image-container" role="button" aria-label="Toggle actual size" aria-expanded$="[[_getAriaExpanded(actualSize)]]" on-tap="_handleTap"></a>

    <style include="tf-card-heading-style">
      /** Make button a div. */
      button {
        width: 100%;
        display: block;
        background: none;
        border: 0;
        padding: 0;
      }

      /** Firefox: Get rid of dotted line inside button. */
      button::-moz-focus-inner {
        border: 0;
        padding: 0;
      }

      /** Firefox: Simulate Chrome's outer glow on button when focused. */
      button:-moz-focusring {
        outline: none;
        box-shadow: 0px 0px 1px 2px Highlight;
      }

      :host {
        display: block;
        width: 350px;
        height: auto;
        position: relative;
        margin: 0 15px 40px 0;
        overflow-x: auto;
      }

      /** When actual size shown is on, use the actual image width. */
      :host[actual-size] {
        max-width: 100%;
        width: auto;
      }

      :host[actual-size] #main-image-container {
        max-height: none;
        width: auto;
      }

      :host[actual-size] #main-image-container img {
        width: auto;
      }

      paper-spinner-lite {
        width: 14px;
        height: 14px;
        vertical-align: text-bottom;
        --paper-spinner-color: var(--tb-orange-strong);
      }

      #steps {
        height: 15px;
        margin: 0 0 0 -15px;
        /*
         * 31 comes from adding a padding of 15px from both sides of the
         * paper-slider, subtracting 1px so that the slider width aligns
         * with the image (the last slider marker takes up 1px), and
         * adding 2px to account for a border of 1px on both sides of
         * the image. 30 - 1 + 2.
         */
        width: calc(100% + 31px);
        --paper-slider-active-color: var(--tb-orange-strong);
        --paper-slider-knob-color: var(--tb-orange-strong);
        --paper-slider-knob-start-border-color: var(--tb-orange-strong);
        --paper-slider-knob-start-color: var(--tb-orange-strong);
        --paper-slider-markers-color: var(--tb-orange-strong);
        --paper-slider-pin-color: var(--tb-orange-strong);
        --paper-slider-pin-start-color: var(--tb-orange-strong);
      }

      #main-image-container {
        max-height: 1024px;
        overflow: auto;
      }

      #main-image-container img {
        cursor: pointer;
        display: block;
        image-rendering: -moz-crisp-edges;
        image-rendering: pixelated;
        width: 100%;
        height: auto;
      }

      paper-icon-button {
        color: #2196F3;
        border-radius: 100%;
        width: 32px;
        height: 32px;
        padding: 4px;
      }
      paper-icon-button[selected] {
        background: var(--tb-ui-light-accent);
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-image-dashboard/tf-image-loader.html.js
Polymer({is:"tf-image-loader",properties:{run:String,tag:String,sample:Number,ofSamples:Number,tagMetadata:Object,_runColor:{type:String,computed:"_computeRunColor(run)"},actualSize:{type:Boolean,value:!1,reflectToAttribute:!0},brightnessAdjustment:{type:Number,value:.5},contrastPercentage:{type:Number,value:0},requestManager:Object,_metadataCanceller:{type:Object,value:function(){return new Rk.Canceller}},_imageCanceller:{type:Object,value:function(){return new Rk.Canceller}},_steps:{type:Array,
value:[],notify:!0},_stepIndex:{type:Number,notify:!0},_currentStep:{type:Object,computed:"_computeCurrentStep(_steps, _stepIndex)"},_hasAtLeastOneStep:{type:Boolean,computed:"_computeHasAtLeastOneStep(_steps)"},_hasMultipleSteps:{type:Boolean,computed:"_computeHasMultipleSteps(_steps)"},_stepValue:{type:Number,computed:"_computeStepValue(_currentStep)"},_currentWallTime:{type:String,computed:"_computeCurrentWallTime(_currentStep)"},_maxStepIndex:{type:Number,computed:"_computeMaxStepIndex(_steps)"},
_sampleText:{type:String,computed:"_computeSampleText(sample)"},_hasMultipleSamples:{type:Boolean,computed:"_computeHasMultipleSamples(ofSamples)"},_isImageLoading:{type:Boolean,value:!1}},observers:["reload(run, tag)","_updateImageUrl(_currentStep, brightnessAdjustment, contrastPercentage)"],_computeRunColor:function(a){return Yk.runsColorScale(a)},_computeHasAtLeastOneStep:function(a){return!!a&&0<a.length},_computeHasMultipleSteps:function(a){return!!a&&1<a.length},_computeCurrentStep:function(a,
b){return a[b]||null},_computeStepValue:function(a){return a?a.step:0},_computeCurrentWallTime:function(a){return a?gl.formatDate(a.wall_time):""},_computeMaxStepIndex:function(a){return a.length-1},_computeSampleText:function(a){return""+(a+1)},_computeHasMultipleSamples:function(a){return 1<a},_getAriaExpanded:function(){return this.actualSize?"true":"false"},attached:function(){this._attached=!0;this.reload()},reload:function(){var a=this;if(this._attached){this._metadataCanceller.cancelAll();
var b=Rk.addParams(Rk.getRouter().pluginRoute("images","/images"),{tag:this.tag,run:this.run,sample:this.sample}),c=this._metadataCanceller.cancellable(function(e){e.cancelled||(e=e.value.map(a._createStepDatum.bind(a)),a.set("_steps",e),a.set("_stepIndex",e.length-1))});this.requestManager.request(b).then(c)}},_createStepDatum:function(a){var b=Rk.getRouter().pluginRoute("images","/individualImage");b=Rk.addParams(b,{ts:a.wall_time});b+="\x26"+a.query;return{width:a.width,height:a.height,wall_time:new Date(1E3*
a.wall_time),step:a.step,url:b}},_updateImageUrl:function(a,b,c){var e=this;if(a){var f=new Image;this._imageCanceller.cancelAll();f.onload=f.onerror=this._imageCanceller.cancellable(function(g){g.cancelled||(g=e.$$("#main-image-container"),g.innerHTML="",Polymer.dom(g).appendChild(f),e.set("_isImageLoading",!1))}).bind(this);f.style.filter="contrast("+c+"%) ";f.style.filter+="brightness("+b+")";this.set("_isImageLoading",!0);f.src=a.url}},_handleTap:function(){this.set("actualSize",!this.actualSize)},
_toLocaleString:function(a){return a.toLocaleString()}});
</script>
</dom-module>



<dom-module id="tf-image-dashboard">
  <template>
    <tf-dashboard-layout>
      <div class="sidebar">
        <div class="sidebar-section">
          <div class="line-item">
            <paper-checkbox checked="{{_actualSize}}">Show actual image size</paper-checkbox>
          </div>
        </div>
        <div class="sidebar-section">
          <h3 class="tooltip-container">Brightness adjustment</h3>
          <div class="resettable-slider-container">
            <paper-slider min="0" max="2" snaps pin step="0.01" value="{{_brightnessAdjustment}}" immediate-value="{{_brightnessAdjustment}}"></paper-slider>
            <paper-button class="x-button" on-tap="_resetBrightness" disabled="[[_brightnessIsDefault]]">Reset</paper-button>
          </div>
        </div>
        <div class="sidebar-section">
        <h3 class="tooltip-container">Contrast adjustment</h3>
          <div class="resettable-slider-container">
            <paper-slider min="0" max="500" snaps pin step="1" value="{{_contrastPercentage}}" immediate-value="{{_contrastPercentage}}"></paper-slider>
            <paper-button class="x-button" on-tap="_resetContrast" disabled="[[_contrastIsDefault]]">Reset</paper-button>
          </div>
        </div>
        <div class="sidebar-section">
          <tf-runs-selector id="runs-selector" selected-runs="{{_selectedRuns}}"></tf-runs-selector>
        </div>
      </div>
      <div class="center">
        <template is="dom-if" if="[[_dataNotFound]]">
          <div class="no-data-warning">
            <h3>No image data was found.</h3>
            <p>Probable causes:
            <ul>
              <li>You havenât written any image data to your event files.
              <li>TensorBoard canât find your event files.
            </ul>
            <p>
            If youâre new to using TensorBoard, and want to find out how
            to add data and set up your event files, check out the
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
            and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
            <p>
            If you think TensorBoard is configured properly, please see
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
            and consider filing an issue on GitHub.
          </div>
        </template>
        <template is="dom-if" if="[[!_dataNotFound]]">
          <tf-tag-filterer tag-filter="{{_tagFilter}}"></tf-tag-filterer>
          <template is="dom-repeat" items="[[_categories]]" as="category">
            <tf-category-pane category="[[category]]" opened="[[_shouldOpen(index)]]">
              <tf-paginated-view items="[[category.items]]" pages="{{category._pages}}">
                <template is="dom-repeat" items="[[category._pages]]" as="page">
                  <template is="dom-if" if="[[page.active]]">
                    <div class="layout horizontal wrap">
                      <template is="dom-repeat" items="[[page.items]]">
                        <tf-image-loader run="[[item.run]]" tag="[[item.tag]]" sample="[[item.sample]]" of-samples="[[item.ofSamples]]" tag-metadata="[[_tagMetadata(_runToTagInfo, item.run, item.tag)]]" request-manager="[[_requestManager]]" actual-size="[[_actualSize]]" brightness-adjustment="[[_brightnessAdjustment]]" contrast-percentage="[[_contrastPercentage]]"></tf-image-loader>
                      </template>
                    </div>
                  </template>
                </template>
              </tf-paginated-view>
            </tf-category-pane>
          </template>
        </template>
      </div>
    </tf-dashboard-layout>
    <style include="dashboard-style"></style>
    <style>
      .resettable-slider-container {
        display: flex;
      }
      .resettable-slider-container paper-slider {
        flex-grow: 1;
      }
      .resettable-slider-container paper-button {
        flex-grow: 0;
      }
      .resettable-slider-container paper-button[disabled] {
        background-color: unset;
      }
      .x-button {
        font-size: 13px;
        background-color: var(--tb-ui-light-accent);
        color: var(--tb-ui-dark-accent);
      }
      h3 {
        color: var(--paper-grey-800);
        margin: 0;
        font-weight: normal;
        font-size: 14px;
        margin-bottom: 5px;
        display: block;
        pointer-events: none;
      }
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
      paper-slider {
        --paper-slider-active-color: var(--tb-orange-strong);
        --paper-slider-knob-color: var(--tb-orange-strong);
        --paper-slider-knob-start-border-color: var(--tb-orange-strong);
        --paper-slider-knob-start-color: var(--tb-orange-strong);
        --paper-slider-markers-color: var(--tb-orange-strong);
        --paper-slider-pin-color: var(--tb-orange-strong);
        --paper-slider-pin-start-color: var(--tb-orange-strong);
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-image-dashboard/tf-image-dashboard.html.js
Polymer({is:"tf-image-dashboard",properties:{_selectedRuns:Array,_runToTagInfo:Object,_dataNotFound:Boolean,_actualSize:Boolean,_defaultBrightnessAdjustment:{type:Number,value:1,readOnly:!0},_defaultContrastPercentage:{type:Number,value:100,readOnly:!0},_brightnessAdjustment:{type:Number,value:1},_contrastPercentage:{type:Number,value:100},_tagFilter:String,_brightnessIsDefault:{type:Boolean,computed:"_computeBrightnessIsDefault(_brightnessAdjustment)"},_contrastIsDefault:{type:Boolean,computed:"_computeContrastIsDefault(_contrastPercentage)"},
_categoriesDomReady:Boolean,_categories:{type:Array,computed:"_makeCategories(_runToTagInfo, _selectedRuns, _tagFilter, _categoriesDomReady)"},_requestManager:{type:Object,value:function(){return new Rk.RequestManager}}},ready:function(){this.reload()},reload:function(){var a=this;this._fetchTags().then(function(){a._reloadImages()})},_fetchTags:function(){var a=this,b=Rk.getRouter().pluginRoute("images","/tags");return this._requestManager.request(b).then(function(c){if(!_.isEqual(c,a._runToTagInfo)){var e=
_.mapValues(c,function(f){return Object.keys(f)});e=Rk.getTags(e);a.set("_dataNotFound",0===e.length);a.set("_runToTagInfo",c);a.async(function(){a.set("_categoriesDomReady",!0)})}})},_reloadImages:function(){this.querySelectorAll("tf-image-loader").forEach(function(a){a.reload()})},_shouldOpen:function(a){return 2>=a},_resetBrightness:function(){this._brightnessAdjustment=this._defaultBrightnessAdjustment},_resetContrast:function(){this._contrastPercentage=this._defaultContrastPercentage},_computeBrightnessIsDefault:function(a){return a===
this._defaultBrightnessAdjustment},_computeContrastIsDefault:function(a){return a===this._defaultContrastPercentage},_makeCategories:function(a,b,c){function e(g){var h=a[g.run][g.tag].samples;return _.range(h).map(function(l){return Object.assign({},g,{sample:l,ofSamples:h})})}var f=_.mapValues(a,function(g){return Object.keys(g)});return Sk.categorizeRunTagCombinations(f,b,c).map(function(g){return Object.assign({},g,{items:[].concat.apply([],g.items.map(e))})})},_tagMetadata:function(a,b,c){return a[b][c]}});
</script>
</dom-module>
























<dom-module id="tf-audio-loader">
  <template>
    <tf-card-heading tag="[[tag]]" run="[[run]]" display-name="[[tagMetadata.displayName]]" description="[[tagMetadata.description]]" color="[[_runColor]]">
      <template is="dom-if" if="[[_hasMultipleSamples]]">
        <div class="heading-row">
          <div class="heading-label">
            sample: [[_sampleText]] of [[totalSamples]]
          </div>
        </div>
      </template>
      <template is="dom-if" if="[[_hasAtLeastOneStep]]">
        <div class="heading-row">
          <div class="heading-label">
            step <strong>[[_currentDatum.step]]</strong>
          </div>
          <template is="dom-if" if="[[_currentDatum.wall_time]]">
            <div class="heading-label heading-right">
              [[_currentDatum.wall_time]]
            </div>
          </template>
        </div>
      </template>
      <template is="dom-if" if="[[_hasMultipleSteps]]">
        <div class="heading-row">
          <paper-slider id="steps" immediate-value="{{_stepIndex}}" max="[[_maxStepIndex]]" max-markers="[[_maxStepIndex]]" snaps step="1" value="{{_stepIndex}}"></paper-slider>
        </div>
      </template>
    </tf-card-heading>
    <template is="dom-if" if="[[_hasAtLeastOneStep]]">
      <audio controls src$="[[_currentDatum.url]]" type$="[[_currentDatum.contentType]]"></audio>
      <tf-markdown-view html="[[_currentDatum.label]]"></tf-markdown-view>
    </template>
    <div id="main-audio-container">
    </div>

    <style include="tf-card-heading-style">
      :host {
        display: block;
        width: 350px;
        height: auto;
        position: relative;
        --step-slider-knob-color: #424242;
        margin-right: 15px;
        margin-bottom: 15px;
      }

      #steps {
        height: 15px;
        margin: 0 0 0 -15px;
        width: 100%;
        box-sizing: border-box;
        padding: 0 5px;  /* so the slider knob doesn't butt out */
        margin-top: 5px;
        --paper-slider-active-color: var(--step-slider-knob-color);
        --paper-slider-knob-color: var(--step-slider-knob-color);
        --paper-slider-pin-color: var(--step-slider-knob-color);
        --paper-slider-knob-start-color: var(--step-slider-knob-color);
        --paper-slider-knob-start-border-color: var(--step-slider-knob-color);
        --paper-slider-pin-start-color: var(--step-slider-knob-color);
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-audio-dashboard/tf-audio-loader.html.js
Polymer({is:"tf-audio-loader",properties:{run:String,tag:String,sample:Number,totalSamples:Number,tagMetadata:Object,_runColor:{type:String,computed:"_computeRunColor(run)"},requestManager:Object,_metadataCanceller:{type:Object,value:function(){return new Rk.Canceller}},_steps:{type:Array,value:function(){return[]}},_stepIndex:Number,_hasAtLeastOneStep:{type:Boolean,computed:"_computeHasAtLeastOneStep(_steps)"},_hasMultipleSteps:{type:Boolean,computed:"_computeHasMultipleSteps(_steps)"},_currentDatum:{type:Object,
computed:"_computeCurrentDatum(_steps, _stepIndex)"},_maxStepIndex:{type:Number,computed:"_computeMaxStepIndex(_steps)"},_sampleText:{type:String,computed:"_computeSampleText(sample)"},_hasMultipleSamples:{type:Boolean,computed:"_computeHasMultipleSamples(totalSamples)"}},observers:["reload(run, tag)"],_computeRunColor:function(a){return Yk.runsColorScale(a)},_computeHasAtLeastOneStep:function(a){return!!a&&0<a.length},_computeHasMultipleSteps:function(a){return!!a&&1<a.length},_computeMaxStepIndex:function(a){return a.length-
1},_computeCurrentDatum:function(a,b){return a[b]},_computeSampleText:function(a){return""+(a+1)},_computeHasMultipleSamples:function(a){return 1<a},attached:function(){this._attached=!0;this.reload()},reload:function(){var a=this;if(this._attached){this._metadataCanceller.cancelAll();var b=Rk.getRouter().pluginRoute("audio","/audio",new URLSearchParams({tag:this.tag,run:this.run,sample:this.sample})),c=this._metadataCanceller.cancellable(function(e){e.cancelled||(e=e.value.map(a._createStepDatum.bind(a)),
a.set("_steps",e),a.set("_stepIndex",e.length-1))});this.requestManager.request(b).then(c)}},_createStepDatum:function(a){var b=new URLSearchParams(a.query);b.append("ts",a.wall_time);b=Rk.getRouter().pluginRoute("audio","/individualAudio",b);return{wall_time:gl.formatDate(new Date(1E3*a.wall_time)),step:a.step,label:a.label,contentType:a.contentType,url:b}}});
</script>
</dom-module>



<dom-module id="tf-audio-dashboard">
  <template>
    <tf-dashboard-layout>
      <div class="sidebar">
        <div class="sidebar-section">
          <tf-runs-selector id="runs-selector" selected-runs="{{_selectedRuns}}"></tf-runs-selector>
        </div>
      </div>
      <div class="center">
        <template is="dom-if" if="[[_dataNotFound]]">
          <div class="no-data-warning">
            <h3>No audio data was found.</h3>
            <p>Probable causes:
            <ul>
              <li>You havenât written any audio data to your event files.
              <li>TensorBoard canât find your event files.
            </ul>
            <p>
            If youâre new to using TensorBoard, and want to find out how
            to add data and set up your event files, check out the
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
            and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
            <p>
            If you think TensorBoard is configured properly, please see
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
            and consider filing an issue on GitHub.
          </div>
        </template>
        <template is="dom-if" if="[[!_dataNotFound]]">
          <tf-tag-filterer tag-filter="{{_tagFilter}}"></tf-tag-filterer>
          <template is="dom-repeat" items="[[_categories]]" as="category">
            <tf-category-pane category="[[category]]" opened="[[_shouldOpen(index)]]">
              <tf-paginated-view items="[[category.items]]" pages="{{category._pages}}">
                <template is="dom-repeat" items="[[category._pages]]" as="page">
                  <template is="dom-if" if="[[page.active]]">
                    <div class="layout horizontal wrap">
                      <template is="dom-repeat" items="[[page.items]]">
                        <tf-audio-loader run="[[item.run]]" tag="[[item.tag]]" sample="[[item.sample]]" total-samples="[[item.totalSamples]]" tag-metadata="[[_tagMetadata(_runToTagInfo, item.run, item.tag)]]" request-manager="[[_requestManager]]"></tf-audio-loader>
                      </template>
                    </div>
                  </template>
                </template>
              </tf-paginated-view>
            </tf-category-pane>
          </template>
        </template>
      </div>
    </tf-dashboard-layout>
    <style include="dashboard-style"></style>
    <style>
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-audio-dashboard/tf-audio-dashboard.html.js
Polymer({is:"tf-audio-dashboard",properties:{_selectedRuns:Array,_runToTagInfo:Object,_dataNotFound:Boolean,_tagFilter:{type:String,value:""},_categories:{type:Array,computed:"_makeCategories(_runToTagInfo, _selectedRuns, _tagFilter)"},_requestManager:{type:Object,value:function(){return new Rk.RequestManager}}},ready:function(){this.reload()},reload:function(){var a=this;this._fetchTags().then(function(){a._reloadAudio()})},_fetchTags:function(){var a=this,b=Rk.getRouter().pluginRoute("audio","/tags");
return this._requestManager.request(b).then(function(c){if(!_.isEqual(c,a._runToTagInfo)){var e=_.mapValues(c,function(f){return Object.keys(f)});e=Rk.getTags(e);a.set("_dataNotFound",0===e.length);a.set("_runToTagInfo",c)}})},_reloadAudio:function(){this.querySelectorAll("tf-audio-loader").forEach(function(a){a.reload()})},_shouldOpen:function(a){return 2>=a},_makeCategories:function(a,b,c){function e(g){var h=a[g.run][g.tag].samples;return _.range(h).map(function(l){return Object.assign({},g,{sample:l,
totalSamples:h})})}var f=_.mapValues(a,function(g){return Object.keys(g)});return Sk.categorizeRunTagCombinations(f,b,c).map(function(g){return Object.assign({},g,{items:[].concat.apply([],g.items.map(e))})})},_tagMetadata:function(a,b,c){return a[b][c]}});
</script>
</dom-module>













<dom-module id="iron-autogrow-textarea">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        width: 400px;
        border: 1px solid;
        padding: 2px;
        -moz-appearance: textarea;
        -webkit-appearance: textarea;
        overflow: hidden;
      }

      .mirror-text {
        visibility: hidden;
        word-wrap: break-word;
        @apply --iron-autogrow-textarea;
      }

      .fit {
        @apply --layout-fit;
      }

      textarea {
        position: relative;
        outline: none;
        border: none;
        resize: none;
        background: inherit;
        color: inherit;
        /* see comments in template */
        width: 100%;
        height: 100%;
        font-size: inherit;
        font-family: inherit;
        line-height: inherit;
        text-align: inherit;
        @apply --iron-autogrow-textarea;
      }

      textarea::-webkit-input-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }

      textarea:-moz-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }

      textarea::-moz-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }

      textarea:-ms-input-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }
    </style>

    
    
    <div id="mirror" class="mirror-text" aria-hidden="true">&nbsp;</div>

    
    <div class="textarea-container fit">
      <textarea id="textarea" name$="[[name]]" aria-label$="[[label]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" disabled$="[[disabled]]" rows$="[[rows]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]"></textarea>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/iron-autogrow-textarea/iron-autogrow-textarea.html.js
Polymer({is:"iron-autogrow-textarea",behaviors:[Polymer.IronValidatableBehavior,Polymer.IronControlState],properties:{value:{observer:"_valueChanged",type:String,notify:!0},bindValue:{observer:"_bindValueChanged",type:String,notify:!0},rows:{type:Number,value:1,observer:"_updateCached"},maxRows:{type:Number,value:0,observer:"_updateCached"},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},
minlength:{type:Number},maxlength:{type:Number},label:{type:String}},listeners:{input:"_onInput"},get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(a){this.$.textarea.selectionStart=a},set selectionEnd(a){this.$.textarea.selectionEnd=a},attached:function(){navigator.userAgent.match(/iP(?:[oa]d|hone)/)&&(this.$.textarea.style.marginLeft="-3px")},validate:function(){var a=this.$.textarea.validity.valid;
a&&(this.required&&""===this.value?a=!1:this.hasValidator()&&(a=Polymer.IronValidatableBehavior.validate.call(this,this.value)));this.invalid=!a;this.fire("iron-input-validate");return a},_bindValueChanged:function(a){this.value=a},_valueChanged:function(a){var b=this.textarea;b&&(b.value!==a&&(b.value=a||0===a?a:""),this.bindValue=a,this.$.mirror.innerHTML=this._valueForMirror(),this.fire("bind-value-changed",{value:this.bindValue}))},_onInput:function(a){var b=Polymer.dom(a).path;this.value=b?b[0].value:
a.target.value},_constrain:function(a){a=a||[""];for(a=0<this.maxRows&&a.length>this.maxRows?a.slice(0,this.maxRows):a.slice(0);0<this.rows&&a.length<this.rows;)a.push("");return a.join("\x3cbr/\x3e")+"\x26#160;"},_valueForMirror:function(){var a=this.textarea;if(a)return this.tokens=a&&a.value?a.value.replace(/&/gm,"\x26amp;").replace(/"/gm,"\x26quot;").replace(/'/gm,"\x26#39;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").split("\n"):[""],this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=
this._constrain(this.tokens)}});
</script>









<dom-module id="paper-textarea">
  <template>
    <style>
      :host {
        display: block;
      }

      :host([hidden]) {
        display: none !important;
      }

      label {
        pointer-events: none;
      }
    </style>

    <paper-input-container no-label-float$="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]">[[label]]</label>

      <iron-autogrow-textarea class="input-element paper-input-input" id$="[[_inputId]]" bind-value="{{value}}" invalid="{{invalid}}" validator$="[[validator]]" disabled$="[[disabled]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" autocapitalize$="[[autocapitalize]]" rows$="[[rows]]" max-rows$="[[maxRows]]" on-change="_onChange"></iron-autogrow-textarea>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error>[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter></paper-input-char-counter>
      </template>

    </paper-input-container>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-textarea.html.js
Polymer({is:"paper-textarea",behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],properties:{_ariaLabelledBy:{observer:"_ariaLabelledByChanged",type:String},_ariaDescribedBy:{observer:"_ariaDescribedByChanged",type:String},rows:{type:Number,value:1},maxRows:{type:Number,value:0}},_ariaLabelledByChanged:function(a){this._focusableElement.setAttribute("aria-labelledby",a)},_ariaDescribedByChanged:function(a){this._focusableElement.setAttribute("aria-describedby",a)},get _focusableElement(){return this.inputElement.textarea}});
</script>











<dom-module id="paper-toast">
  <template>
    <style>
      :host {
        display: block;
        position: fixed;
        background-color: var(--paper-toast-background-color, #323232);
        color: var(--paper-toast-color, #f1f1f1);
        min-height: 48px;
        min-width: 288px;
        padding: 16px 24px;
        box-sizing: border-box;
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
        border-radius: 2px;
        margin: 12px;
        font-size: 14px;
        cursor: default;
        -webkit-transition: -webkit-transform 0.3s, opacity 0.3s;
        transition: transform 0.3s, opacity 0.3s;
        opacity: 0;
        -webkit-transform: translateY(100px);
        transform: translateY(100px);
        @apply --paper-font-common-base;
      }

      :host(.capsule) {
        border-radius: 24px;
      }

      :host(.fit-bottom) {
        width: 100%;
        min-width: 0;
        border-radius: 0;
        margin: 0;
      }

      :host(.paper-toast-open) {
        opacity: 1;
        -webkit-transform: translateY(0px);
        transform: translateY(0px);
      }
    </style>

    <span id="label">{{text}}</span>
    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-toast/paper-toast.html.js
(function(){var a=null;Polymer({is:"paper-toast",behaviors:[Polymer.IronOverlayBehavior],properties:{fitInto:{type:Object,value:window,observer:"_onFitIntoChanged"},horizontalAlign:{type:String,value:"left"},verticalAlign:{type:String,value:"bottom"},duration:{type:Number,value:3E3},text:{type:String,value:""},noCancelOnOutsideClick:{type:Boolean,value:!0},noAutoFocus:{type:Boolean,value:!0}},listeners:{transitionend:"__onTransitionEnd"},get visible(){Polymer.Base._warn("`visible` is deprecated, use `opened` instead");
return this.opened},get _canAutoClose(){return 0<this.duration&&Infinity!==this.duration},created:function(){this._autoClose=null;Polymer.IronA11yAnnouncer.requestAvailability()},show:function(b){"string"==typeof b&&(b={text:b});for(var c in b)0===c.indexOf("_")?Polymer.Base._warn('The property "'+c+'" is private and was not set.'):c in this?this[c]=b[c]:Polymer.Base._warn('The property "'+c+'" is not valid.');this.open()},hide:function(){this.close()},__onTransitionEnd:function(b){b&&b.target===
this&&"opacity"===b.propertyName&&(this.opened?this._finishRenderOpened():this._finishRenderClosed())},_openedChanged:function(){null!==this._autoClose&&(this.cancelAsync(this._autoClose),this._autoClose=null);this.opened?(a&&a!==this&&a.close(),a=this,this.fire("iron-announce",{text:this.text}),this._canAutoClose&&(this._autoClose=this.async(this.close,this.duration))):a===this&&(a=null);Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments)},_renderOpened:function(){this.classList.add("paper-toast-open")},
_renderClosed:function(){this.classList.remove("paper-toast-open")},_onFitIntoChanged:function(b){this.positionTarget=b}})})();
</script>
</dom-module>

















<dom-module id="paper-toggle-button">
  <template strip-whitespace>

    <style>
      :host {
        display: inline-block;
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--paper-font-common-base);
      }

      :host([disabled]) {
        pointer-events: none;
      }

      :host(:focus) {
        outline:none;
      }

      .toggle-bar {
        position: absolute;
        height: 100%;
        width: 100%;
        border-radius: 8px;
        pointer-events: none;
        opacity: 0.4;
        transition: background-color linear .08s;
        background-color: var(--paper-toggle-button-unchecked-bar-color, #000000);

        @apply(--paper-toggle-button-unchecked-bar);
      }

      .toggle-button {
        position: absolute;
        top: -3px;
        left: 0;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);
        transition: -webkit-transform linear .08s, background-color linear .08s;
        transition: transform linear .08s, background-color linear .08s;
        will-change: transform;
        background-color: var(--paper-toggle-button-unchecked-button-color, --paper-grey-50);

        @apply(--paper-toggle-button-unchecked-button);
      }

      .toggle-button.dragging {
        -webkit-transition: none;
        transition: none;
      }

      :host([checked]:not([disabled])) .toggle-bar {
        opacity: 0.5;
        background-color: var(--paper-toggle-button-checked-bar-color, --primary-color);

        @apply(--paper-toggle-button-checked-bar);
      }

      :host([disabled]) .toggle-bar {
        background-color: #000;
        opacity: 0.12;
      }

      :host([checked]) .toggle-button {
        -webkit-transform: translate(16px, 0);
        transform: translate(16px, 0);
      }

      :host([checked]:not([disabled])) .toggle-button {
        background-color: var(--paper-toggle-button-checked-button-color, --primary-color);

        @apply(--paper-toggle-button-checked-button);
      }

      :host([disabled]) .toggle-button {
        background-color: #bdbdbd;
        opacity: 1;
      }

      .toggle-ink {
        position: absolute;
        top: -14px;
        left: -14px;
        right: auto;
        bottom: auto;
        width: 48px;
        height: 48px;
        opacity: 0.5;
        pointer-events: none;
        color: var(--paper-toggle-button-unchecked-ink-color, --primary-text-color);

        @apply(--paper-toggle-button-unchecked-ink);
      }

      :host([checked]) .toggle-ink {
        color: var(--paper-toggle-button-checked-ink-color, --primary-color);

        @apply(--paper-toggle-button-checked-ink);
      }

      .toggle-container {
        display: inline-block;
        position: relative;
        width: 36px;
        height: 14px;
        /* The toggle button has an absolute position of -3px; The extra 1px
        /* accounts for the toggle button shadow box. */
        margin: 4px 1px;
      }

      .toggle-label {
        position: relative;
        display: inline-block;
        vertical-align: middle;
        padding-left: var(--paper-toggle-button-label-spacing, 8px);
        pointer-events: none;
        color: var(--paper-toggle-button-label-color, --primary-text-color);
      }

      /* invalid state */
      :host([invalid]) .toggle-bar {
        background-color: var(--paper-toggle-button-invalid-bar-color, --error-color);
      }

      :host([invalid]) .toggle-button {
        background-color: var(--paper-toggle-button-invalid-button-color, --error-color);
      }

      :host([invalid]) .toggle-ink {
        color: var(--paper-toggle-button-invalid-ink-color, --error-color);
      }
    </style>

    <div class="toggle-container">
      <div id="toggleBar" class="toggle-bar"></div>
      <div id="toggleButton" class="toggle-button"></div>
    </div>

    <div class="toggle-label"><content></content></div>

  </template>

  <script>//~~WEBPATH~~/paper-toggle-button/paper-toggle-button.html.js
Polymer({is:"paper-toggle-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"button","aria-pressed":"false",tabindex:0},properties:{},listeners:{track:"_ontrack"},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){this.setScrollDirection("y")})},_ontrack:function(a){a=a.detail;"start"===a.state?this._trackStart(a):"track"===a.state?this._trackMove(a):"end"===a.state&&this._trackEnd(a)},_trackStart:function(){this._width=this.$.toggleBar.offsetWidth/
2;this._trackChecked=this.checked;this.$.toggleButton.classList.add("dragging")},_trackMove:function(a){a=a.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+a:a));this.translate3d(this._x+"px",0,0,this.$.toggleButton);this._userActivate(this._x>this._width/2)},_trackEnd:function(){this.$.toggleButton.classList.remove("dragging");this.transform("",this.$.toggleButton)},_createRipple:function(){this._rippleContainer=this.$.toggleButton;var a=Polymer.PaperRippleBehavior._createRipple();
a.id="ink";a.setAttribute("recenters","");a.classList.add("circle","toggle-ink");return a}});
</script>
</dom-module>














<script>//~~WEBPATH~~/tf-graph-common/annotation.js
var tf;
(function(a){(function(b){(function(c){(function(e){function f(l,n,m,q){var r=c.Class.Annotation.LABEL;q&&(r+=" "+q);l=l.append("text").attr("class",r).attr("dy",".35em").attr("text-anchor",m.isIn?"end":"start").text(n);return a.graph.scene.node.enforceLabelWidth(l,-1)}function g(l,n,m,q){l.on("mouseover",function(r){q.fire("annotation-highlight",{name:r.node.name,hostName:n.node.name})}).on("mouseout",function(r){q.fire("annotation-unhighlight",{name:r.node.name,hostName:n.node.name})}).on("click",function(r){d3.event.stopPropagation();
q.fire("annotation-select",{name:r.node.name,hostName:n.node.name})});if(m.annotationType!==b.render.AnnotationType.SUMMARY&&m.annotationType!==b.render.AnnotationType.CONSTANT)l.on("contextmenu",c.contextmenu.getMenu(q,c.node.getContextMenu(m.node,q)))}function h(l,n,m,q){var r=b.layout.computeCXPositionOfNodeShape(n);m.renderNodeInfo&&m.annotationType!==b.render.AnnotationType.ELLIPSIS&&c.node.stylize(l,m.renderNodeInfo,q,c.Class.Annotation.NODE);m.annotationType===b.render.AnnotationType.SUMMARY&&
(m.width+=10);l.select("text."+c.Class.Annotation.LABEL).transition().attr("x",r+m.dx+(m.isIn?-1:1)*(m.width/2+m.labelOffset)).attr("y",n.y+m.dy);l.select("use.summary").transition().attr("x",r+m.dx-3).attr("y",n.y+m.dy-6);c.positionEllipse(l.select("."+c.Class.Annotation.NODE+" ellipse"),r+m.dx,n.y+m.dy,m.width,m.height);c.positionRect(l.select("."+c.Class.Annotation.NODE+" rect"),r+m.dx,n.y+m.dy,m.width,m.height);c.positionRect(l.select("."+c.Class.Annotation.NODE+" use"),r+m.dx,n.y+m.dy,m.width,
m.height);l.select("path."+c.Class.Annotation.EDGE).transition().attr("d",function(v){v=v.points.map(function(u){return{x:u.dx+r,y:u.dy+n.y}});return c.edge.interpolate(v)})}e.buildGroup=function(l,n,m,q){l=l.selectAll(function(){return this.childNodes}).data(n.list,function(r){return r.node.name});l.enter().append("g").attr("data-name",function(r){return r.node.name}).each(function(r){var v=d3.select(this);q.addAnnotationGroup(r,m,v);var u=c.Class.Annotation.EDGE,w=r.renderMetaedgeInfo&&r.renderMetaedgeInfo.metaedge;
w&&!w.numRegularEdges&&(u+=" "+c.Class.Annotation.CONTROL_EDGE);w&&w.numRefEdges&&(u+=" "+c.Class.Edge.REF_LINE);c.edge.appendEdge(v,r,q,u);r.annotationType!==b.render.AnnotationType.ELLIPSIS?(u=r.node.name.split("/"),f(v,u[u.length-1],r,null),r.annotationType===b.render.AnnotationType.SUMMARY?c.selectOrCreateChild(v,"use").attr("class","summary").attr("xlink:href","#summary-icon").attr("cursor","pointer"):(v=c.node.buildShape(v,r,c.Class.Annotation.NODE),c.selectOrCreateChild(v,"title").text(r.node.name))):
f(v,r.node.name,r,c.Class.Annotation.ELLIPSIS)}).merge(l).attr("class",function(r){return c.Class.Annotation.GROUP+" "+((b.render.AnnotationType[r.annotationType]||"").toLowerCase()||null)+" "+c.node.nodeClass(r)}).each(function(r){var v=d3.select(this);h(v,m,r,q);r.annotationType!==b.render.AnnotationType.ELLIPSIS&&g(v,m,r,q)});l.exit().each(function(r){var v=d3.select(this);q.removeAnnotationGroup(r,m,v)}).remove()}})(c.annotation||(c.annotation={}))})(b.scene||(b.scene={}))})(a.graph||(a.graph=
{}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/colors.js
(function(a){a.COLORS=[{name:"Google Blue",color:"#4184f3",active:"#3a53c5",disabled:"#cad8fc"},{name:"Google Red",color:"#db4437",active:"#8f2a0c",disabled:"#e8c6c1"},{name:"Google Yellow",color:"#f4b400",active:"#db9200",disabled:"#f7e8b0"},{name:"Google Green",color:"#0f9d58",active:"#488046",disabled:"#c2e1cc"},{name:"Purple",color:"#aa46bb",active:"#5c1398",disabled:"#d7bce6"},{name:"Teal",color:"#00abc0",active:"#47828e",disabled:"#c2eaf2"},{name:"Deep Orange",color:"#ff6f42",active:"#ca4a06",
disabled:"#f2cbba"},{name:"Lime",color:"#9d9c23",active:"#7f771d",disabled:"#f1f4c2"},{name:"Indigo",color:"#5b6abf",active:"#3e47a9",disabled:"#c5c8e8"},{name:"Pink",color:"#ef6191",active:"#ca1c60",disabled:"#e9b9ce"},{name:"Deep Teal",color:"#00786a",active:"#2b4f43",disabled:"#bededa"},{name:"Deep Pink",color:"#c1175a",active:"#75084f",disabled:"#de8cae"},{name:"Gray",color:"#9E9E9E",active:"#424242",disabled:"F5F5F5"}].reduce(function(b,c){b[c.name]=c;return b},{});a.OP_GROUP_COLORS=[{color:"Google Red",
groups:"gen_legacy_ops legacy_ops legacy_flogs_input legacy_image_input legacy_input_example_input legacy_sequence_input legacy_seti_input_input".split(" ")},{color:"Deep Orange",groups:["constant_ops"]},{color:"Indigo",groups:["state_ops"]},{color:"Purple",groups:["nn_ops","nn"]},{color:"Google Green",groups:["math_ops"]},{color:"Lime",groups:["array_ops"]},{color:"Teal",groups:["control_flow_ops","data_flow_ops"]},{color:"Pink",groups:["summary_ops"]},{color:"Deep Pink",groups:["io_ops"]}].reduce(function(b,
c){c.groups.forEach(function(e){b[e]=c.color});return b},{})})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/common.js
var il=tf||(tf={}),jl=il.graph||(il.graph={}),kl=jl.SelectionType||(jl.SelectionType={});kl.OP_GRAPH="op_graph";kl.CONCEPTUAL_GRAPH="conceptual_graph";kl.PROFILE="profile";
</script>
<script>//~~WEBPATH~~/tf-graph-common/contextmenu.js
(function(a){(function(b){(function(c){(function(e){function f(g){for(var h=0,l=0;g&&0<=g.offsetLeft&&0<=g.offsetTop;)h+=g.offsetLeft-g.scrollLeft,l+=g.offsetTop-g.scrollTop,g=g.offsetParent;return{left:h,top:l}}e.getMenu=function(g,h){var l=d3.select(".context-menu");d3.select("body").on("click.context",function(){l.style("display","none")});return function(n,m){var q=this,r=d3.event,v=f(g);l.style("display","block").style("left",r.clientX-v.left+1+"px").style("top",r.clientY-v.top+1+"px");r.preventDefault();
r.stopPropagation();l.html("");l.append("ul").selectAll("li").data(h).enter().append("li").html(function(u){return u.title(n)}).on("click",function(u){u.action(q,n,m);l.style("display","none")})}}})(c.contextmenu||(c.contextmenu={}))})(b.scene||(b.scene={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/edge.js
(function(a){(function(b){(function(c){(function(e){function f(u){return u.v+b.EDGE_KEY_DELIM+u.w}function g(u,w){w=w.getNodeByName(u.v);if(null==w.outputShapes||_.isEmpty(w.outputShapes))return null;u=w.outputShapes[u.outputTensorKey];return null==u?null:0===u.length?"scalar":u.map(function(z){return-1===z?"?":z}).join("\u00d7")}function h(u,w){return w.edgeLabelFunction?w.edgeLabelFunction(u,w):1<u.baseEdgeList.length?u.baseEdgeList.length+" tensors":g(u.baseEdgeList[0],w)}function l(u,w,z){for(var A=
document.createElementNS(a.graph.scene.SVG_NAMESPACE,"path"),E=1;E<u.length;E++)if(A.setAttribute("d",z(u.slice(0,E))),A.getTotalLength()>w)return E-1;return u.length-1}function n(u,w,z){var A=d3.line().x(function(J){return J.x}).y(function(J){return J.y}),E=d3.select(document.createElementNS("http://www.w3.org/2000/svg","path")).attr("d",A(u)),C=+w.attr("markerWidth"),D=w.attr("viewBox").split(" ").map(Number);D=D[2]-D[0];w=+w.attr("refX");E=E.node();if(z)return z=C*(1-w/D),C=E.getPointAtLength(z),
A=l(u,z,A),u[A-1]={x:C.x,y:C.y},u.slice(A-1);z=1-w/D;z=E.getTotalLength()-C*z;C=E.getPointAtLength(z);A=l(u,z,A);u[A]={x:C.x,y:C.y};return u.slice(0,A+1)}function m(u,w,z,A){A=A||c.Class.Edge.LINE;w.label&&w.label.structural&&(A+=" "+c.Class.Edge.STRUCTURAL);w.label&&w.label.metaedge&&w.label.metaedge.numRefEdges&&(A+=" "+c.Class.Edge.REFERENCE_EDGE);z.handleEdgeSelected&&(A+=" "+c.Class.Edge.SELECTABLE);var E="path_"+f(w);if(z.renderHierarchy.edgeWidthFunction)var C=z.renderHierarchy.edgeWidthFunction(w,
A);else C=1,null!=w.label&&null!=w.label.metaedge&&(C=w.label.metaedge.totalSize),C=z.renderHierarchy.edgeWidthSizedBasedScale(C);A=u.append("path").attr("id",E).attr("class",A).style("stroke-width",C+"px");w.label&&w.label.metaedge&&(w.label.metaedge.numRefEdges?(C="reference-arrowhead-"+v(C),A.style("marker-start","url(#"+C+")"),w.label.startMarkerId=C):(C="dataflow-arrowhead-"+v(C),A.style("marker-end","url(#"+C+")"),w.label.endMarkerId=C));null!=w.label&&null!=w.label.metaedge&&(w=h(w.label.metaedge,
z.renderHierarchy),null!=w&&u.append("text").append("textPath").attr("xlink:href","#"+E).attr("startOffset","50%").attr("text-anchor","middle").attr("dominant-baseline","central").text(w))}function q(u,w,z){w=u.label;var A=w.adjoiningMetaedge,E=w.points;u.label.startMarkerId&&(E=n(E,d3.select("#"+u.label.startMarkerId),!0));u.label.endMarkerId&&(E=n(E,d3.select("#"+u.label.endMarkerId),!1));if(!A)return d3.interpolate(z,e.interpolate(E));var C=this,D=A.edgeGroup.node().firstChild,J=w.metaedge.inbound;
return function(){var M=D.getPointAtLength(J?D.getTotalLength():0).matrixTransform(D.getCTM()).matrixTransform(C.getCTM().inverse()),H=J?0:E.length-1;E[H].x=M.x;E[H].y=M.y;return e.interpolate(E)}}function r(){d3.select(this).select("path."+c.Class.Edge.LINE).transition().attrTween("d",q)}e.MIN_EDGE_WIDTH=.75;e.MAX_EDGE_WIDTH=12;e.EDGE_WIDTH_SIZE_BASED_SCALE=d3.scalePow().exponent(.3).domain([1,5E6]).range([e.MIN_EDGE_WIDTH,e.MAX_EDGE_WIDTH]).clamp(!0);var v=d3.scaleQuantize().domain([e.MIN_EDGE_WIDTH,
e.MAX_EDGE_WIDTH]).range(["small","medium","large","xlarge"]);e.getEdgeKey=f;e.buildGroup=function(u,w,z){var A=[];A=_.reduce(w.edges(),function(E,C){var D=w.edge(C);E.push({v:C.v,w:C.w,label:D});return E},A);u=c.selectOrCreateChild(u,"g",c.Class.Edge.CONTAINER).selectAll(function(){return this.childNodes}).data(A,f);u.enter().append("g").attr("class",c.Class.Edge.GROUP).attr("data-edge",f).each(function(E){var C=d3.select(this);E.label.edgeGroup=C;z._edgeGroupIndex[f(E)]=C;if(z.handleEdgeSelected)C.on("click",
function(D){d3.event.stopPropagation();z.fire("edge-select",{edgeData:D,edgeGroup:C})});m(C,E,z)}).merge(u).each(r).each(function(E){var C=d3.select(this);C.classed("faded",E.label.isFadedOut);E=E.label.metaedge;C.select("path."+c.Class.Edge.LINE).classed("control-dep",E&&!E.numRegularEdges)});u.exit().each(function(E){delete z._edgeGroupIndex[f(E)]}).remove()};e.getLabelForBaseEdge=g;e.getLabelForEdge=h;e.appendEdge=m;e.interpolate=d3.line().curve(d3.curveBasis).x(function(u){return u.x}).y(function(u){return u.y})})(c.edge||
(c.edge={}))})(b.scene||(b.scene={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/externs.js
</script>
<script>//~~WEBPATH~~/tf-graph-common/graph.js
(function(a){(function(b){function c(H,K,L,P,S){return(L?L+"/":"")+(H+("undefined"!==typeof P&&"undefined"!==typeof S?"["+P+"-"+S+"]":"#")+K)}function e(H){if(!H)return null;for(var K=0;K<H.length;K++){var L=H[K],P=L.value;if("_output_shapes"===L.key){if(!P.list.shape)break;L=P.list.shape.map(function(S){return S.unknown_rank?null:null==S.dim||1===S.dim.length&&null==S.dim[0].size?[]:S.dim.map(function(aa){return aa.size})});H.splice(K,1);return L}}return null}function f(H){var K=[];_.each(H,function(L){var P=
"^"===L[0];P&&(L=L.substring(1));var S=L,aa="0",R=L.match(/(.*):(\w+:\d+)$/);if(R)S=R[1],aa=R[2];else if(R=L.match(/(.*):(\d+)$/))S=R[1],aa=R[2];0!==K.length&&S===K[K.length-1].name||K.push({name:S,outputTensorKey:aa,isControlDependency:P})});return K}function g(H,K,L,P,S,aa){K!==L.name&&H.edges.push({v:K,w:L.name,outputTensorKey:P.outputTensorKey,isControlDependency:P.isControlDependency,isReferenceEdge:!0===S.refEdges[L.op+" "+aa]})}function h(H,K,L){L=L||{};var P=new graphlib.Graph(L);P.setGraph({name:H,
rankdir:L.rankdir||"BT",type:K});return P}function l(H){return function(K){for(var L=0;L<H.length;L++){var P=new RegExp(H[L]);if("string"===typeof K.op&&K.op.match(P))return!0}return!1}}function n(H){var K=H.split(b.NAMESPACE_DELIM);return H+b.NAMESPACE_DELIM+"("+K[K.length-1]+")"}function m(H,K){var L={},P={};H.sort();for(var S=0;S<H.length-1;++S){var aa=H[S];_.each(r(aa).slice(0,-1),function(W){P[W]=!0});for(var R=S+1;R<H.length;++R){var Y=H[R];if(_.startsWith(Y,aa)){if(Y.length>aa.length&&Y.charAt(aa.length)===
b.NAMESPACE_DELIM){L[aa]=n(aa);break}}else break}}_.each(K,function(W){W in P&&(L[W]=n(W))});return L}function q(H){var K=H.nodes().map(function(L){return H.neighbors(L).length});K.sort();return K}function r(H,K){for(var L=[],P=H.indexOf(b.NAMESPACE_DELIM);0<=P;)L.push(H.substring(0,P)),P=H.indexOf(b.NAMESPACE_DELIM,P+1);K&&(K=K[H])&&L.push(K);L.push(H);return L}b.NAMESPACE_DELIM="/";b.ROOT_NAME="__root__";b.FUNCTION_LIBRARY_NODE_PREFIX="__function_library__";b.LARGE_ATTRS_KEY="_too_large_attrs";
b.LIMIT_ATTR_SIZE=1024;b.EDGE_KEY_DELIM="--";var v;(function(H){H[H.FULL=0]="FULL";H[H.EMBEDDED=1]="EMBEDDED";H[H.META=2]="META";H[H.SERIES=3]="SERIES";H[H.CORE=4]="CORE";H[H.SHADOW=5]="SHADOW";H[H.BRIDGE=6]="BRIDGE";H[H.EDGE=7]="EDGE"})(v=b.GraphType||(b.GraphType={}));var u;(function(H){H[H.META=0]="META";H[H.OP=1]="OP";H[H.SERIES=2]="SERIES";H[H.BRIDGE=3]="BRIDGE";H[H.ELLIPSIS=4]="ELLIPSIS"})(u=b.NodeType||(b.NodeType={}));var w;(function(H){H[H.INCLUDE=0]="INCLUDE";H[H.EXCLUDE=1]="EXCLUDE";H[H.UNSPECIFIED=
2]="UNSPECIFIED"})(w=b.InclusionType||(b.InclusionType={}));(function(H){H[H.GROUP=0]="GROUP";H[H.UNGROUP=1]="UNGROUP"})(b.SeriesGroupingType||(b.SeriesGroupingType={}));var z=function(){return function(){this.nodes={};this.edges=[]}}();b.SlimGraph=z;var A=function(){function H(K){this.type=u.ELLIPSIS;this.isGroupNode=!1;this.cardinality=1;this.stats=this.parentNode=null;this.setNumMoreNodes(K);this.include=w.UNSPECIFIED}H.prototype.setNumMoreNodes=function(K){this.numMoreNodes=K;this.name="... "+
K+" more"};return H}();b.EllipsisNodeImpl=A;var E=function(){return function(H){this.op=H.op;this.name=H.name;this.device=H.device;this.attr=H.attr;this.inputs=f(H.input);this.outputShapes=e(H.attr);a:{if(H=H.attr)for(var K=0;K<H.length;K++)if("_XlaCluster"===H[K].key){H=H[K].value.s||null;break a}H=null}this.xlaCluster=H;this.compatible=!1;this.type=u.OP;this.isGroupNode=!1;this.cardinality=1;this.inEmbeddings=[];this.outEmbeddings=[];this.parentNode=null;this.include=w.UNSPECIFIED;this.owningSeries=
null}}();b.OpNodeImpl=E;b.createMetanode=function(H,K){void 0===K&&(K={});return new D(H,K)};b.joinStatsInfoWithGraph=function(H,K,L){_.each(H.nodes,function(P){P.stats=null});_.each(K.dev_stats,function(P){L&&!L[P.device]||_.each(P.node_stats,function(S){var aa=S.node_name in H.nodes?S.node_name:n(S.node_name);if(aa in H.nodes){var R=0;S.memory&&_.each(S.memory,function(W){W.total_bytes&&(0<W.total_bytes?R+=Number(W.total_bytes):console.log("ignoring negative memory allocation for "+aa))});var Y=
null;S.output&&(Y=_.map(S.output,function(W){return _.map(W.tensor_description.shape.dim,function(X){return Number(X.size)})}));H.nodes[aa].device=P.device;null==H.nodes[aa].stats&&(H.nodes[aa].stats=new C(Y));H.nodes[aa].stats.addBytesAllocation(R);S.all_end_rel_micros&&(0<S.all_end_rel_micros?H.nodes[aa].stats.addExecutionTime(S.all_start_micros,S.all_start_micros+S.all_end_rel_micros):console.log("ignoring negative runtime for "+aa))}})})};var C=function(){function H(K){this.totalBytes=0;this.outputSize=
K}H.prototype.addExecutionTime=function(K,L){this.startTime=null!=this.startTime?Math.min(this.startTime,K):K;this.endTime=null!=this.endTime?Math.max(this.endTime,L):L};H.prototype.addBytesAllocation=function(K){this.totalBytes=null!=this.totalBytes?Math.max(this.totalBytes,K):K};H.prototype.combine=function(K){null!=K.totalBytes&&(this.totalBytes+=K.totalBytes);null!=K.getTotalMicros()&&this.addExecutionTime(K.startTime,K.endTime)};H.prototype.getTotalMicros=function(){return null==this.startTime||
null==this.endTime?null:this.endTime-this.startTime};return H}();b.NodeStats=C;var D=function(){function H(K,L){void 0===L&&(L={});this.name=K;this.type=u.META;this.depth=1;this.isGroupNode=!0;this.cardinality=0;this.metagraph=h(K,v.META,L);this.bridgegraph=null;this.opHistogram={};this.deviceHistogram={};this.xlaClusterHistogram={};this.compatibilityHistogram={compatible:0,incompatible:0};this.parentNode=this.templateId=null;this.hasNonControlEdges=!1;this.include=w.UNSPECIFIED;this.associatedFunction=
""}H.prototype.getFirstChild=function(){return this.metagraph.node(this.metagraph.nodes()[0])};H.prototype.getRootOp=function(){var K=this.name.split("/");return this.metagraph.node(this.name+"/("+K[K.length-1]+")")};H.prototype.leaves=function(){for(var K=[],L=[this],P;L.length;){var S=L.shift();S.isGroupNode?(P=S.metagraph,_.each(P.nodes(),function(aa){return L.push(P.node(aa))})):K.push(S.name)}return K};return H}();b.MetanodeImpl=D;b.createMetaedge=function(H,K){return new J(H,K)};var J=function(){function H(K,
L){this.v=K;this.w=L;this.baseEdgeList=[];this.inbound=null;this.totalSize=this.numRefEdges=this.numControlEdges=this.numRegularEdges=0}H.prototype.addBaseEdge=function(K,L){this.baseEdgeList.push(K);K.isControlDependency?this.numControlEdges+=1:this.numRegularEdges+=1;K.isReferenceEdge&&(this.numRefEdges+=1);this.totalSize+=H.computeSizeOfEdge(K,L);L.maxMetaEdgeSize=Math.max(L.maxMetaEdgeSize,this.totalSize)};H.computeSizeOfEdge=function(K,L){var P=L.node(K.v);if(!P.outputShapes)return 1;L.hasShapeInfo=
!0;K=Object.keys(P.outputShapes).map(function(S){return P.outputShapes[S]}).map(function(S){return null==S?1:S.reduce(function(aa,R){-1===R&&(R=1);return aa*R},1)});return _.sum(K)};return H}();b.MetaedgeImpl=J;b.createSeriesNode=function(H,K,L,P,S,aa){return new M(H,K,L,P,S,aa)};b.getSeriesNodeName=c;var M=function(){return function(H,K,L,P,S,aa){this.name=S||c(H,K,L);this.type=u.SERIES;this.hasLoop=!1;this.prefix=H;this.suffix=K;this.clusterId=P;this.ids=[];this.parent=L;this.isGroupNode=!0;this.cardinality=
0;this.metagraph=h(S,v.SERIES,aa);this.parentNode=this.bridgegraph=null;this.deviceHistogram={};this.xlaClusterHistogram={};this.compatibilityHistogram={compatible:0,incompatible:0};this.hasNonControlEdges=!1;this.include=w.UNSPECIFIED}}();b.DefaultBuildParams={enableEmbedding:!0,inEmbeddingTypes:["Const"],outEmbeddingTypes:["^[a-zA-Z]+Summary$"],refEdges:{"Assign 0":!0,"AssignAdd 0":!0,"AssignSub 0":!0,"assign 0":!0,"assign_add 0":!0,"assign_sub 0":!0,"count_up_to 0":!0,"ScatterAdd 0":!0,"ScatterSub 0":!0,
"ScatterUpdate 0":!0,"scatter_add 0":!0,"scatter_sub 0":!0,"scatter_update 0":!0}};b.build=function(H,K,L){var P={},S={},aa={},R=l(K.inEmbeddingTypes),Y=l(K.outEmbeddingTypes),W=[],X=H.node,ja=Array(X.length);return a.graph.util.runAsyncTask("Normalizing names",30,function(){function pa(Ca){var oa=b.FUNCTION_LIBRARY_NODE_PREFIX+Ca.signature.name;ta({name:oa,input:[],device:"",op:"",attr:[]});if(Ca.signature.input_arg){var ka=0,Da=function(La){ta({name:oa+b.NAMESPACE_DELIM+La.name,input:[],device:"",
op:"input_arg",attr:[{key:"T",value:{type:La.type}}]}).functionInputIndex=ka;ka++};Ca.signature.input_arg.name?Da(Ca.signature.input_arg):_.each(Ca.signature.input_arg,Da)}var Oa=0,Ea={};Ca.signature.output_arg&&(Da=function(La){Ea[oa+b.NAMESPACE_DELIM+La.name]=Oa;Oa++},Ca.signature.output_arg.name?Da(Ca.signature.output_arg):_.each(Ca.signature.output_arg,Da));_.each(Ca.node_def,function(La){La.name=oa+"/"+La.name;"string"===typeof La.input&&(La.input=[La.input]);var Ka=ta(La);_.isNumber(Ea[La.name])&&
(Ka.functionOutputIndex=Ea[La.name]);_.each(Ka.inputs,function(vb){vb.name=oa+b.NAMESPACE_DELIM+vb.name})})}function ta(Ca){var oa=new E(Ca);if(R(oa))return W.push(oa.name),P[oa.name]=oa;if(Y(oa))return W.push(oa.name),S[oa.name]=oa,_.each(oa.inputs,function(ka){ka=ka.name;aa[ka]=aa[ka]||[];aa[ka].push(oa)}),oa;da[Aa]=oa;ja[Aa]=oa.name;Aa++;return oa}var da=Array(X.length),Aa=0;_.each(X,ta);H.library&&H.library.function&&_.each(H.library.function,pa);da.splice(Aa);ja.splice(Aa);return da},L).then(function(pa){return a.graph.util.runAsyncTask("Building the data structure",
70,function(){var ta=m(ja,W),da=new z;_.each(pa,function(Aa){var Ca=ta[Aa.name]||Aa.name;da.nodes[Ca]=Aa;Aa.name in aa&&(Aa.outEmbeddings=aa[Aa.name],_.each(Aa.outEmbeddings,function(oa){oa.name=ta[oa.name]||oa.name}));Aa.name=Ca});_.each(pa,function(Aa){_.each(Aa.inputs,function(Ca,oa){var ka=Ca.name;if(ka in P){ka=P[ka];Aa.inEmbeddings.push(ka);Ca=0;for(var Da=ka.inputs;Ca<Da.length;Ca++)ka=Da[Ca],g(da,ta[ka.name]||ka.name,Aa,ka,K,oa)}else if(ka in S){Da=0;for(var Oa=S[ka].inputs;Da<Oa.length;Da++)ka=
Oa[Da],g(da,ta[ka.name]||ka.name,Aa,Ca,K,oa)}else g(da,ta[ka]||ka,Aa,Ca,K,oa)})});_.each(P,function(Aa){Aa.name=ta[Aa.name]||Aa.name});return da},L)})};b.createGraph=h;b.getStrictName=n;b.hasSimilarDegreeSequence=function(H,K){H=q(H);K=q(K);for(var L=0;L<H.length;L++)if(H[L]!==K[L])return!1;return!0};b.getHierarchicalPath=r;b.getIncludeNodeButtonString=function(H){return H===a.graph.InclusionType.EXCLUDE?"Add to main graph":"Remove from main graph"};b.getGroupSeriesNodeButtonString=function(H){return H===
a.graph.SeriesGroupingType.GROUP?"Ungroup this series of nodes":"Group this series of nodes"};b.toggleNodeSeriesGroup=function(H,K){H[K]=K in H&&H[K]!==a.graph.SeriesGroupingType.GROUP?a.graph.SeriesGroupingType.GROUP:a.graph.SeriesGroupingType.UNGROUP}})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/hierarchy.js
(function(a){(function(b){(function(c){function e(v,u,w,z){u=w?v.inEdges(u.name):v.outEdges(u.name);_.each(u,function(A){A=v.edge(A);(A.numRegularEdges?z.regular:z.control).push(A)})}function f(v,u){var w={};_.each(u.nodes,function(z){var A=b.getHierarchicalPath(z.name),E=v.root;E.depth=Math.max(A.length,E.depth);w[z.op]||(w[z.op]=[]);w[z.op].push(z);for(var C=0;C<A.length;C++){E.depth=Math.max(E.depth,A.length-C);E.cardinality+=z.cardinality;E.opHistogram[z.op]=(E.opHistogram[z.op]||0)+1;null!=z.device&&
(E.deviceHistogram[z.device]=(E.deviceHistogram[z.device]||0)+1);null!=z.xlaCluster&&(E.xlaClusterHistogram[z.xlaCluster]=(E.xlaClusterHistogram[z.xlaCluster]||0)+1);z.compatible?E.compatibilityHistogram.compatible=(E.compatibilityHistogram.compatible||0)+1:E.compatibilityHistogram.incompatible=(E.compatibilityHistogram.incompatible||0)+1;_.each(z.inEmbeddings,function(M){M.compatible?E.compatibilityHistogram.compatible=(E.compatibilityHistogram.compatible||0)+1:E.compatibilityHistogram.incompatible=
(E.compatibilityHistogram.incompatible||0)+1});_.each(z.outEmbeddings,function(M){M.compatible?E.compatibilityHistogram.compatible=(E.compatibilityHistogram.compatible||0)+1:E.compatibilityHistogram.incompatible=(E.compatibilityHistogram.incompatible||0)+1});if(C===A.length-1)break;var D=A[C],J=v.node(D);J||(J=b.createMetanode(D,v.graphOptions),J.parentNode=E,v.setNode(D,J),E.metagraph.setNode(D,J),0===D.indexOf(a.graph.FUNCTION_LIBRARY_NODE_PREFIX)&&E.name===a.graph.ROOT_NAME&&(D=D.substring(a.graph.FUNCTION_LIBRARY_NODE_PREFIX.length),
w[D]||(w[D]=[]),v.libraryFunctions[D]={node:J,usages:w[D]},J.associatedFunction=D));E=J}v.setNode(z.name,z);z.parentNode=E;E.metagraph.setNode(z.name,z);_.each(z.inEmbeddings,function(M){v.setNode(M.name,M);M.parentNode=z});_.each(z.outEmbeddings,function(M){v.setNode(M.name,M);M.parentNode=z})})}function g(v,u){function w(C,D){for(var J=0;C;)D[J++]=C.name,C=C.parentNode;return J-1}var z=v.getNodeMap(),A=[],E=[];_.each(u.edges,function(C){var D=w(u.nodes[C.v],A),J=w(u.nodes[C.w],E);if(-1!==D&&-1!==
J){for(;A[D]===E[J];)if(D--,J--,0>D||0>J)throw Error("No difference found between ancestor paths.");var M=z[A[D+1]];D=A[D];J=E[J];var H=M.metagraph.edge(D,J);H||(H=b.createMetaedge(D,J),M.metagraph.setEdge(D,J,H));M.hasNonControlEdges||C.isControlDependency||(M.hasNonControlEdges=!0);H.addBaseEdge(C,v)}})}function h(v,u,w,z,A,E){var C=v.metagraph;_.each(C.nodes(),function(D){D=C.node(D);D.type===a.graph.NodeType.META&&h(D,u,w,z,A,E)});v=l(C);v=(E?m:n)(v,C,u.graphOptions);_.each(v,function(D,J){var M=
D.metagraph.nodes();_.each(M,function(H){H=C.node(H);H.owningSeries||(H.owningSeries=J)});M.length<z&&!(D.name in A)&&(A[D.name]=a.graph.SeriesGroupingType.UNGROUP);D.name in A&&A[D.name]===a.graph.SeriesGroupingType.UNGROUP||(u.setNode(J,D),C.setNode(J,D),_.each(M,function(H){var K=C.node(H);D.metagraph.setNode(H,K);D.parentNode=K.parentNode;D.cardinality++;null!=K.device&&(D.deviceHistogram[K.device]=(D.deviceHistogram[K.device]||0)+1);null!=K.xlaCluster&&(D.xlaClusterHistogram[K.xlaCluster]=(D.xlaClusterHistogram[K.xlaCluster]||
0)+1);K.compatible?D.compatibilityHistogram.compatible=(D.compatibilityHistogram.compatible||0)+1:D.compatibilityHistogram.incompatible=(D.compatibilityHistogram.incompatible||0)+1;_.each(K.inEmbeddings,function(L){L.compatible?D.compatibilityHistogram.compatible=(D.compatibilityHistogram.compatible||0)+1:D.compatibilityHistogram.incompatible=(D.compatibilityHistogram.incompatible||0)+1});_.each(K.outEmbeddings,function(L){L.compatible?D.compatibilityHistogram.compatible=(D.compatibilityHistogram.compatible||
0)+1:D.compatibilityHistogram.incompatible=(D.compatibilityHistogram.incompatible||0)+1});K.parentNode=D;w[H]=J;C.removeNode(H)}))})}function l(v){return _.reduce(v.nodes(),function(u,w){w=v.node(w);if(w.type===b.NodeType.META)return u;var z=w.op;z&&(u[z]=u[z]||[],u[z].push(w.name));return u},{})}function n(v,u,w){var z={};_.each(v,function(A,E){if(!(1>=A.length)){var C={};_.each(A,function(D){var J="*"===D.charAt(D.length-1),M=D.split("/"),H=M[M.length-1];M=M.slice(0,M.length-1).join("/");var K=
H.match(/^(\D*)_(\d+)$/),L="";K?(H=K[1],K=K[2]):(H=J?H.substr(0,H.length-1):H,K=0,L=J?"*":"");J=b.getSeriesNodeName(H,L,M);C[J]=C[J]||[];D=b.createSeriesNode(H,L,M,+K,D,w);C[J].push(D)});_.each(C,function(D){if(!(2>D.length)){D.sort(function(K,L){return+K.clusterId-+L.clusterId});for(var J=[D[0]],M=1;M<D.length;M++){var H=D[M];H.clusterId===J[J.length-1].clusterId+1?J.push(H):(q(J,z,+E,u,w),J=[H])}q(J,z,+E,u,w)}})}});return z}function m(v,u,w){var z={};_.each(v,function(A,E){if(!(1>=A.length)){var C=
{},D={};_.each(A,function(M){var H="*"===M.charAt(M.length-1),K=M.split("/"),L=K[K.length-1];K=K.slice(0,K.length-1).join("/");for(var P=/(\d+)/g,S,aa,R,Y,W=0;S=P.exec(L);)++W,aa=L.slice(0,S.index),R=S[0],S=L.slice(S.index+S[0].length),Y=b.getSeriesNodeName(aa,S,K),C[Y]=C[Y],C[Y]||(C[Y]=b.createSeriesNode(aa,S,K,+R,M,w)),C[Y].ids.push(R),D[M]=D[M]||[],D[M].push([Y,R]);1>W&&(aa=H?L.substr(0,L.length-1):L,R=0,S=H?"*":"",Y=b.getSeriesNodeName(aa,S,K),C[Y]=C[Y],C[Y]||(C[Y]=b.createSeriesNode(aa,S,K,+R,
M,w)),C[Y].ids.push(R),D[M]=D[M]||[],D[M].push([Y,R]))});var J={};_.each(D,function(M,H){M.sort(function(P,S){return C[S[0]].ids.length-C[P[0]].ids.length});var K=M[0][0];M=M[0][1];J[K]=J[K]||[];var L=H.split("/");H=b.createSeriesNode(C[K].prefix,C[K].suffix,L.slice(0,L.length-1).join("/"),+M,H,w);J[K].push(H)});_.each(J,function(M){if(!(2>M.length)){M.sort(function(P,S){return+P.clusterId-+S.clusterId});for(var H=[M[0]],K=1;K<M.length;K++){var L=M[K];L.clusterId===H[H.length-1].clusterId+1?H.push(L):
(q(H,z,+E,u,w),H=[L])}q(H,z,+E,u,w)}})}});return z}function q(v,u,w,z,A){if(1<v.length){var E=b.getSeriesNodeName(v[0].prefix,v[0].suffix,v[0].parent,v[0].clusterId,v[v.length-1].clusterId),C=b.createSeriesNode(v[0].prefix,v[0].suffix,v[0].parent,w,E,A);_.each(v,function(D){C.ids.push(D.clusterId);C.metagraph.setNode(D.name,z.node(D.name))});u[E]=C}}var r=function(){function v(u){this.hasShapeInfo=!1;this.maxMetaEdgeSize=1;this.graphOptions=u||{};this.graphOptions.compound=!0;this.root=b.createMetanode(b.ROOT_NAME,
this.graphOptions);this.libraryFunctions={};this.xlaClusters=this.devices=this.templates=null;this.index={};this.index[b.ROOT_NAME]=this.root;this.orderings={}}v.prototype.getNodeMap=function(){return this.index};v.prototype.node=function(u){return this.index[u]};v.prototype.setNode=function(u,w){this.index[u]=w};v.prototype.getBridgegraph=function(u){var w=this,z=this.index[u];if(!z)throw Error("Could not find node in hierarchy: "+u);if(!("metagraph"in z))return null;if(z.bridgegraph)return z.bridgegraph;
var A=z.bridgegraph=b.createGraph("BRIDGEGRAPH",b.GraphType.BRIDGE,this.graphOptions);if(!(z.parentNode&&"metagraph"in z.parentNode))return A;var E=z.parentNode;z=E.metagraph;E=this.getBridgegraph(E.name);_.each([z,E],function(C){C.edges().filter(function(D){return D.v===u||D.w===u}).forEach(function(D){var J=D.w===u,M=C.edge(D);_.each(M.baseEdgeList,function(H){var K=J?[H.w,D.v]:[H.v,D.w],L=K[1];K=w.getChildName(u,K[0]);L={v:J?L:K,w:J?K:L};K=A.edge(L);K||(K=b.createMetaedge(L.v,L.w),K.inbound=J,
A.setEdge(L.v,L.w,K));K.addBaseEdge(H,w)})})});return A};v.prototype.getChildName=function(u,w){for(var z=this.index[w];z;){if(z.parentNode&&z.parentNode.name===u)return z.name;z=z.parentNode}throw Error("Could not find immediate child for descendant: "+w);};v.prototype.getPredecessors=function(u){var w=this,z=this.index[u];if(!z)throw Error("Could not find node with name: "+u);var A=this.getOneWayEdges(z,!0);z.isGroupNode||_.each(z.inEmbeddings,function(E){_.each(z.inputs,function(C){if(C.name===
E.name){var D=new b.MetaedgeImpl(E.name,u);D.addBaseEdge({isControlDependency:C.isControlDependency,outputTensorKey:C.outputTensorKey,isReferenceEdge:!1,v:E.name,w:u},w);A.regular.push(D)}})});return A};v.prototype.getSuccessors=function(u){var w=this,z=this.index[u];if(!z)throw Error("Could not find node with name: "+u);var A=this.getOneWayEdges(z,!1);z.isGroupNode||_.each(z.outEmbeddings,function(E){_.each(E.inputs,function(C){if(C.name===u){var D=new b.MetaedgeImpl(u,E.name);D.addBaseEdge({isControlDependency:C.isControlDependency,
outputTensorKey:C.outputTensorKey,isReferenceEdge:!1,v:u,w:E.name},w);A.regular.push(D)}})});return A};v.prototype.getOneWayEdges=function(u,w){var z={control:[],regular:[]};if(!u.parentNode||!u.parentNode.isGroupNode)return z;var A=u.parentNode,E=A.metagraph;A=this.getBridgegraph(A.name);e(E,u,w,z);e(A,u,w,z);return z};v.prototype.getTopologicalOrdering=function(u){var w=this.index[u];if(!w)throw Error("Could not find node with name: "+u);if(!w.isGroupNode)return null;if(u in this.orderings)return this.orderings[u];
var z={},A={},E=w.metagraph;_.each(E.edges(),function(J){E.edge(J).numRegularEdges&&(J.v in z||(z[J.v]=[]),z[J.v].push(J.w),A[J.w]=!0)});var C=_.difference(_.keys(z),_.keys(A));u=this.orderings[u]={};for(w=0;C.length;){var D=C.shift();u[D]=w++;_.each(z[D],function(J){return C.push(J)});delete z[D]}return u};v.prototype.getTemplateIndex=function(){var u=d3.keys(this.templates),w=d3.scaleOrdinal().domain(u).range(d3.range(0,u.length));return function(z){return w(z)}};return v}();c.DefaultHierarchyParams=
{verifyTemplate:!0,seriesNodeMinSize:5,seriesMap:{},rankDirection:"BT",useGeneralizedSeriesPatterns:!1};c.build=function(v,u,w){var z=new r({rankdir:u.rankDirection}),A={};return a.graph.util.runAsyncTask("Adding nodes",20,function(){var E={},C={};_.each(v.nodes,function(D){D.device&&(E[D.device]=!0);D.xlaCluster&&(C[D.xlaCluster]=!0)});z.devices=_.keys(E);z.xlaClusters=_.keys(C);f(z,v)},w).then(function(){return a.graph.util.runAsyncTask("Detect series",20,function(){0<u.seriesNodeMinSize&&h(z.root,
z,A,u.seriesNodeMinSize,u.seriesMap,u.useGeneralizedSeriesPatterns)},w)}).then(function(){return a.graph.util.runAsyncTask("Adding edges",30,function(){g(z,v,A)},w)}).then(function(){return a.graph.util.runAsyncTask("Finding similar subgraphs",30,function(){z.templates=b.template.detect(z,u.verifyTemplate)},w)}).then(function(){return z})};c.joinAndAggregateStats=function(v){var u={},w={};_.each(v.root.leaves(),function(z){z=v.node(z);null!=z.device&&(u[z.device]=!0);null!=z.xlaCluster&&(w[z.xlaCluster]=
!0)});v.devices=_.keys(u);v.xlaClusters=_.keys(w);_.each(v.getNodeMap(),function(z){z.isGroupNode&&(z.stats=new b.NodeStats(null),z.deviceHistogram={})});_.each(v.root.leaves(),function(z){for(var A=z=v.node(z);null!=A.parentNode;){if(null!=z.device){var E=A.parentNode.deviceHistogram;E[z.device]=(E[z.device]||0)+1}null!=z.xlaCluster&&(E=A.parentNode.xlaClusterHistogram,E[z.xlaCluster]=(E[z.xlaCluster]||0)+1);null!=z.stats&&A.parentNode.stats.combine(z.stats);A=A.parentNode}})};c.getIncompatibleOps=
function(v,u){var w=[],z={};_.each(v.root.leaves(),function(A){A=v.node(A);if(A.type==b.NodeType.OP){if(!A.compatible)if(A.owningSeries)if(u&&u.seriesMap[A.owningSeries]===a.graph.SeriesGroupingType.UNGROUP)w.push(A);else{if(!z[A.owningSeries]){var E=v.node(A.owningSeries);E&&(z[A.owningSeries]=E,w.push(E))}}else w.push(A);_.each(A.inEmbeddings,function(C){C.compatible||w.push(C)});_.each(A.outEmbeddings,function(C){C.compatible||w.push(C)})}});return w}})(b.hierarchy||(b.hierarchy={}))})(a.graph||
(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/layout.js
(function(a){(function(b){(function(c){function e(w){w.node.isGroupNode&&f(w);w.node.type===b.NodeType.META?h(w):w.node.type===b.NodeType.SERIES&&l(w)}function f(w){var z=w.coreGraph.nodes().map(function(A){return w.coreGraph.node(A)}).concat(w.isolatedInExtract,w.isolatedOutExtract,w.libraryFunctionsExtract);_.each(z,function(A){switch(A.node.type){case b.NodeType.OP:_.extend(A,c.PARAMS.nodeSize.op);break;case b.NodeType.BRIDGE:_.extend(A,c.PARAMS.nodeSize.bridge);break;case b.NodeType.META:A.expanded?
e(A):(_.extend(A,c.PARAMS.nodeSize.meta),A.height=c.PARAMS.nodeSize.meta.height(A.node.cardinality));break;case b.NodeType.SERIES:A.expanded?(_.extend(A,c.PARAMS.nodeSize.series.expanded),e(A)):_.extend(A,A.node.hasNonControlEdges?c.PARAMS.nodeSize.series.vertical:c.PARAMS.nodeSize.series.horizontal);break;default:throw Error("Unrecognized node type: "+A.node.type);}A.expanded||(A.inboxWidth=0<A.inAnnotations.list.length?c.PARAMS.annotations.inboxWidth:0,A.outboxWidth=0<A.outAnnotations.list.length?
c.PARAMS.annotations.outboxWidth:0,A.coreBox.width=A.width,A.coreBox.height=A.height,A.width=Math.max(A.coreBox.width+A.inboxWidth+A.outboxWidth,3*A.displayName.length));n(A)})}function g(w,z){_.extend(w.graph(),{nodesep:z.nodeSep,ranksep:z.rankSep,edgesep:z.edgeSep});var A=[],E=[];_.each(w.nodes(),function(H){w.node(H).node.type===b.NodeType.BRIDGE?A.push(H):E.push(H)});if(!E.length)return{width:0,height:0};dagre.layout(w);var C=Infinity,D=Infinity,J=-Infinity,M=-Infinity;_.each(E,function(H){H=
w.node(H);var K=.5*H.width,L=H.x-K;K=H.x+K;C=L<C?L:C;J=K>J?K:J;K=.5*H.height;L=H.y-K;H=H.y+K;D=L<D?L:D;M=H>M?H:M});_.each(w.edges(),function(H){H=w.edge(H);if(!H.structural){var K=w.node(H.metaedge.v),L=w.node(H.metaedge.w);if(3===H.points.length&&v(H.points)){if(null!=K){var P=K.expanded?K.x:q(K);H.points[0].x=P}null!=L&&(P=L.expanded?L.x:q(L),H.points[2].x=P);H.points=[H.points[0],H.points[1]]}P=H.points[H.points.length-2];null!=L&&(H.points[H.points.length-1]=u(P,L));L=H.points[1];null!=K&&(H.points[0]=
u(L,K));_.each(H.points,function(S){C=S.x<C?S.x:C;J=S.x>J?S.x:J;D=S.y<D?S.y:D;M=S.y>M?S.y:M})}});_.each(w.nodes(),function(H){H=w.node(H);H.x-=C;H.y-=D});_.each(w.edges(),function(H){_.each(w.edge(H).points,function(K){K.x-=C;K.y-=D})});return{width:J-C,height:M-D}}function h(w){var z=c.PARAMS.subscene.meta;_.extend(w,z);_.extend(w.coreBox,g(w.coreGraph,c.PARAMS.graph.meta));var A=w.isolatedInExtract.length?_.max(w.isolatedInExtract,function(C){return C.width}).width:null;w.inExtractBox.width=null!=
A?A:0;w.inExtractBox.height=_.reduce(w.isolatedInExtract,function(C,D,J){J=0<J?z.extractYOffset:0;D.x=0;D.y=C+J+D.height/2;return C+J+D.height},0);A=w.isolatedOutExtract.length?_.max(w.isolatedOutExtract,function(C){return C.width}).width:null;w.outExtractBox.width=null!=A?A:0;w.outExtractBox.height=_.reduce(w.isolatedOutExtract,function(C,D,J){J=0<J?z.extractYOffset:0;D.x=0;D.y=C+J+D.height/2;return C+J+D.height},0);A=w.libraryFunctionsExtract.length?_.max(w.libraryFunctionsExtract,function(C){return C.width}).width:
null;w.libraryFunctionsBox.width=null!=A?A:0;w.libraryFunctionsBox.height=_.reduce(w.libraryFunctionsExtract,function(C,D,J){J=0<J?z.extractYOffset:0;D.x=0;D.y=C+J+D.height/2;return C+J+D.height},0);A=0;0<w.isolatedInExtract.length&&A++;0<w.isolatedOutExtract.length&&A++;0<w.libraryFunctionsExtract.length&&A++;0<w.coreGraph.nodeCount()&&A++;var E=c.PARAMS.subscene.meta.extractXOffset;A=1>=A?0:A*E;w.coreBox.width+=Math.max(c.MIN_AUX_WIDTH,w.inExtractBox.width+w.outExtractBox.width)+A+w.libraryFunctionsBox.width+
A;w.coreBox.height=z.labelHeight+Math.max(w.inExtractBox.height,w.coreBox.height,w.libraryFunctionsBox.height,w.outExtractBox.height);w.width=w.coreBox.width+z.paddingLeft+z.paddingRight;w.height=w.paddingTop+w.coreBox.height+w.paddingBottom}function l(w){var z=w.coreGraph,A=c.PARAMS.subscene.series;_.extend(w,A);_.extend(w.coreBox,g(w.coreGraph,c.PARAMS.graph.series));_.each(z.nodes(),function(E){z.node(E).excluded=!1});w.width=w.coreBox.width+A.paddingLeft+A.paddingRight;w.height=w.coreBox.height+
A.paddingTop+A.paddingBottom}function n(w){if(!w.expanded){var z=w.inAnnotations.list,A=w.outAnnotations.list;_.each(z,function(K){return m(K)});_.each(A,function(K){return m(K)});var E=c.PARAMS.annotations,C=_.reduce(z,function(K,L,P){P=0<P?E.yOffset:0;L.dx=-(w.coreBox.width+L.width)/2-E.xOffset;L.dy=K+P+L.height/2;return K+P+L.height},0);_.each(z,function(K){K.dy-=C/2;K.labelOffset=E.labelOffset});var D=_.reduce(A,function(K,L,P){P=0<P?E.yOffset:0;L.dx=(w.coreBox.width+L.width)/2+E.xOffset;L.dy=
K+P+L.height/2;return K+P+L.height},0);_.each(A,function(K){K.dy-=D/2;K.labelOffset=E.labelOffset});var J=Math.min(w.height/2-w.radius,C/2);J=0>J?0:J;var M=d3.scaleLinear().domain([0,z.length-1]).range([-J,J]);_.each(z,function(K,L){K.points=[{dx:K.dx+K.width/2,dy:K.dy},{dx:-w.coreBox.width/2,dy:1<z.length?M(L):0}]});J=Math.min(w.height/2-w.radius,D/2);J=0>J?0:J;var H=d3.scaleLinear().domain([0,A.length-1]).range([-J,J]);_.each(A,function(K,L){K.points=[{dx:w.coreBox.width/2,dy:1<A.length?H(L):0},
{dx:K.dx-K.width/2,dy:K.dy}]});w.height=Math.max(w.height,C,D)}}function m(w){switch(w.annotationType){case b.render.AnnotationType.CONSTANT:_.extend(w,c.PARAMS.constant.size);break;case b.render.AnnotationType.SHORTCUT:if(w.node.type===b.NodeType.OP)_.extend(w,c.PARAMS.shortcutSize.op);else if(w.node.type===b.NodeType.META)_.extend(w,c.PARAMS.shortcutSize.meta);else if(w.node.type===b.NodeType.SERIES)_.extend(w,c.PARAMS.shortcutSize.series);else throw Error("Invalid node type: "+w.node.type);break;
case b.render.AnnotationType.SUMMARY:_.extend(w,c.PARAMS.constant.size)}}function q(w){return w.expanded?w.x:w.x-w.width/2+(w.inAnnotations.list.length?w.inboxWidth:0)+w.coreBox.width/2}function r(w,z){return 180*Math.atan((z.y-w.y)/(z.x-w.x))/Math.PI}function v(w){for(var z=r(w[0],w[1]),A=1;A<w.length-1;A++){var E=r(w[A],w[A+1]);if(1<Math.abs(E-z))return!1;z=E}return!0}function u(w,z){var A=z.expanded?z.x:q(z),E=z.y,C=w.x-A;w=w.y-E;var D=z.expanded?z.width:z.coreBox.width,J=z.expanded?z.height:z.coreBox.height;
Math.abs(w)*D/2>Math.abs(C)*J/2?(0>w&&(J=-J),z=0===w?0:J/2*C/w,C=J/2):(0>C&&(D=-D),z=D/2,C=0===C?0:D/2*w/C);return{x:A+z,y:E+C}}c.PARAMS={animation:{duration:250},graph:{meta:{nodeSep:5,rankSep:25,edgeSep:5},series:{nodeSep:5,rankSep:25,edgeSep:5},padding:{paddingTop:40,paddingLeft:20}},subscene:{meta:{paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,labelHeight:20,extractXOffset:15,extractYOffset:20},series:{paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,labelHeight:10}},
nodeSize:{meta:{radius:5,width:60,maxLabelWidth:52,height:d3.scaleLinear().domain([1,200]).range([15,60]).clamp(!0),expandButtonRadius:3},op:{width:15,height:6,radius:3,labelOffset:-8,maxLabelWidth:30},series:{expanded:{radius:10,labelOffset:0},vertical:{width:16,height:13,labelOffset:-13},horizontal:{width:24,height:8,radius:10,labelOffset:-10}},bridge:{width:20,height:20,radius:2,labelOffset:0}},shortcutSize:{op:{width:10,height:4},meta:{width:12,height:4,radius:1},series:{width:14,height:4}},annotations:{inboxWidth:50,
outboxWidth:50,xOffset:10,yOffset:3,labelOffset:2,maxLabelWidth:120},constant:{size:{width:4,height:4}},series:{maxStackCount:3,parallelStackOffsetRatio:.2,towerStackOffsetRatio:.5},minimap:{size:150}};c.MIN_AUX_WIDTH=140;c.layoutScene=e;c.computeCXPositionOfNodeShape=q})(b.layout||(b.layout={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/loader.js
var ll=this&&this.__awaiter||function(a,b,c,e){return new (c||(c=Promise))(function(f,g){function h(m){try{n(e.next(m))}catch(q){g(q)}}function l(m){try{n(e["throw"](m))}catch(q){g(q)}}function n(m){m.done?f(m.value):(new c(function(q){q(m.value)})).then(h,l)}n((e=e.apply(a,b||[])).next())})},ml=this&&this.__generator||function(a,b){function c(m){return function(q){return e([m,q])}}function e(m){if(g)throw new TypeError("Generator is already executing.");for(;f;)try{if(g=1,h&&(l=m[0]&2?h["return"]:
m[0]?h["throw"]||((l=h["return"])&&l.call(h),0):h.next)&&!(l=l.call(h,m[1])).done)return l;if(h=0,l)m=[m[0]&2,l.value];switch(m[0]){case 0:case 1:l=m;break;case 4:return f.label++,{value:m[1],done:!1};case 5:f.label++;h=m[1];m=[0];continue;case 7:m=f.ops.pop();f.trys.pop();continue;default:if(!(l=f.trys,l=0<l.length&&l[l.length-1])&&(6===m[0]||2===m[0])){f=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3]))f.label=m[1];else if(6===m[0]&&f.label<l[1])f.label=l[1],l=m;else if(l&&f.label<l[2])f.label=
l[2],f.ops.push(m);else{l[2]&&f.ops.pop();f.trys.pop();continue}}m=b.call(a,f)}catch(q){m=[6,q],h=0}finally{g=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}var f={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},g,h,l,n;return n={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n};
(function(a){(function(b){(function(c){c.fetchAndConstructHierarchicalGraph=function(e,f,g,h,l){var n=this;void 0===h&&(h=new b.op.TpuCompatibilityProvider);void 0===l&&(l=b.hierarchy.DefaultHierarchyParams);var m=b.util.getSubtaskTracker(e,20,"Graph"),q=b.util.getSubtaskTracker(e,50,"Namespace hierarchy");return b.parser.fetchAndParseGraphData(f,g,b.util.getSubtaskTracker(e,30,"Data")).then(function(r){if(!r.node)throw Error("The graph is empty. This can happen when TensorFlow could not trace any graph. Please refer to https://github.com/tensorflow/tensorboard/issues/1961 for more information.");
return b.build(r,b.DefaultBuildParams,m)},function(){throw Error("Malformed GraphDef. This can sometimes be caused by a bad network connection or difficulty reconciling multiple GraphDefs; for the latter case, please refer to https://github.com/tensorflow/tensorboard/issues/1929.");}).then(function(r){return ll(n,void 0,void 0,function(){var v;return ml(this,function(u){switch(u.label){case 0:return b.op.checkOpsForCompatibility(r,h),[4,b.hierarchy.build(r,l,q)];case 1:return v=u.sent(),[2,{graph:r,
graphHierarchy:v}]}})})}).catch(function(r){e.reportError("Graph visualization failed.\n\n"+r,r);throw r;})}})(b.loader||(b.loader={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/node.js
(function(a){(function(b){(function(c){(function(e){function f(R,Y){var W=Y.x-Y.width/2+Y.paddingLeft;Y=Y.y-Y.height/2+Y.paddingTop;R=c.selectChild(R,"g",c.Class.Subscene.GROUP);c.translate(R,W,Y)}function g(R,Y,W){R=c.selectOrCreateChild(R,"g",c.Class.Node.BUTTON_CONTAINER);c.selectOrCreateChild(R,"circle",c.Class.Node.BUTTON_CIRCLE);c.selectOrCreateChild(R,"path",c.Class.Node.EXPAND_BUTTON).attr("d","M0,-2.2 V2.2 M-2.2,0 H2.2");c.selectOrCreateChild(R,"path",c.Class.Node.COLLAPSE_BUTTON).attr("d",
"M-2.2,0 H2.2");R.on("click",function(X){d3.event.stopPropagation();W.fire("node-toggle-expand",{name:X.node.name})});c.positionButton(R,Y)}function h(R,Y,W,X){if(X)R.attr("pointer-events","none");else{var ja=c.contextmenu.getMenu(W,l(Y.node,W));R.on("dblclick",function(pa){W.fire("node-toggle-expand",{name:pa.node.name})}).on("mouseover",function(pa){W.isNodeExpanded(pa)||W.fire("node-highlight",{name:pa.node.name})}).on("mouseout",function(pa){W.isNodeExpanded(pa)||W.fire("node-unhighlight",{name:pa.node.name})}).on("click",
function(pa){d3.event.stopPropagation();W.fire("node-select",{name:pa.node.name})}).on("contextmenu",function(pa,ta){W.fire("node-select",{name:pa.node.name});ja.call(pa,ta)})}}function l(R,Y){var W=[{title:function(){return b.getIncludeNodeButtonString(R.include)},action:function(){Y.fire("node-toggle-extract",{name:R.name})}}];Y.nodeContextMenuItems&&(W=W.concat(Y.nodeContextMenuItems));n(R)&&W.push({title:function(){return r(R)},action:function(){Y.fire("node-toggle-seriesgroup",{name:m(R)})}});
return W}function n(R){return null!==m(R)}function m(R){return R?R.type===b.NodeType.SERIES?R.name:R.type===b.NodeType.OP?R.owningSeries:null:null}function q(R){var Y=null;if(!R)return null;R.type===b.NodeType.SERIES?Y=R:R.parentNode&&R.parentNode.type===b.NodeType.SERIES&&(Y=R.parentNode);return Y}function r(R){return a.graph.getGroupSeriesNodeButtonString(null!==q(R)?a.graph.SeriesGroupingType.GROUP:a.graph.SeriesGroupingType.UNGROUP)}function v(R,Y,W){var X=R.node(),ja=X.getComputedTextLength(),
pa=X.textContent,ta=null;switch(Y){case b.NodeType.META:W&&!W.expanded&&(ta=b.layout.PARAMS.nodeSize.meta.maxLabelWidth);break;case b.NodeType.OP:ta=b.layout.PARAMS.nodeSize.op.maxLabelWidth;break;case -1:ta=b.layout.PARAMS.annotations.maxLabelWidth}if(!(null===ta||ja<=ta)){for(ja=1;X.getSubStringLength(0,ja)<ta;)ja++;Y=X.textContent.substr(0,ja);do Y=Y.substr(0,Y.length-1),X.textContent=Y+"...",ja=X.getComputedTextLength();while(ja>ta&&0<Y.length);return R.append("title").text(pa)}}function u(R,
Y,W,X){c.selectChild(R,"text",c.Class.Node.LABEL).transition().attr("x",Y).attr("y",W+X)}function w(R,Y,W){R=c.selectOrCreateChild(R,"g",W);switch(Y.node.type){case b.NodeType.OP:Y=Y.node;if(_.isNumber(Y.functionInputIndex)||_.isNumber(Y.functionOutputIndex)){c.selectOrCreateChild(R,"polygon",c.Class.Node.COLOR_TARGET);break}c.selectOrCreateChild(R,"ellipse",c.Class.Node.COLOR_TARGET);break;case b.NodeType.SERIES:W="annotation";Y.coreGraph&&(W=Y.node.hasNonControlEdges?"vertical":"horizontal");var X=
[c.Class.Node.COLOR_TARGET];Y.isFadedOut&&X.push("faded-ellipse");c.selectOrCreateChild(R,"use",X).attr("xlink:href","#op-series-"+W+"-stamp");c.selectOrCreateChild(R,"rect",c.Class.Node.COLOR_TARGET).attr("rx",Y.radius).attr("ry",Y.radius);break;case b.NodeType.BRIDGE:c.selectOrCreateChild(R,"rect",c.Class.Node.COLOR_TARGET).attr("rx",Y.radius).attr("ry",Y.radius);break;case b.NodeType.META:c.selectOrCreateChild(R,"rect",c.Class.Node.COLOR_TARGET).attr("rx",Y.radius).attr("ry",Y.radius);break;default:throw Error("Unrecognized node type: "+
Y.node.type);}return R}function z(R){switch(R.node.type){case b.NodeType.OP:return c.Class.OPNODE;case b.NodeType.META:return c.Class.METANODE;case b.NodeType.SERIES:return c.Class.SERIESNODE;case b.NodeType.BRIDGE:return c.Class.BRIDGENODE;case b.NodeType.ELLIPSIS:return c.Class.ELLIPSISNODE}throw Error("Unrecognized node type: "+R.node.type);}function A(R,Y){var W=a.graph.util.escapeQuerySelector(R),X=d3.select("svg#svg defs #linearGradients"),ja=X.select("linearGradient#"+W);if(0===ja.size()){ja=
X.append("linearGradient").attr("id",R);ja.selectAll("*").remove();var pa=0;_.each(Y,function(ta){var da=ta.color;ja.append("stop").attr("offset",pa).attr("stop-color",da);ja.append("stop").attr("offset",pa+ta.proportion).attr("stop-color",da);pa+=ta.proportion})}return"url(#"+W+")"}function E(R,Y,W,X){var ja=b.render.MetanodeColors;switch(Y){case aa.STRUCTURE:return W.node.type===b.NodeType.META?(Y=W.node.templateId,null===Y?ja.UNKNOWN:ja.STRUCTURE_PALETTE(R(Y),X)):W.node.type===b.NodeType.SERIES?
X?ja.EXPANDED_COLOR:"white":W.node.type===b.NodeType.BRIDGE?W.structural?"#f0e":W.node.inbound?"#0ef":"#fe0":_.isNumber(W.node.functionInputIndex)?"#795548":_.isNumber(W.node.functionOutputIndex)?"#009688":"white";case aa.DEVICE:return null==W.deviceColors?ja.UNKNOWN:X?ja.EXPANDED_COLOR:A("device-"+W.node.name,W.deviceColors);case aa.XLA_CLUSTER:return null==W.xlaClusterColors?ja.UNKNOWN:X?ja.EXPANDED_COLOR:A("xla-"+W.node.name,W.xlaClusterColors);case aa.COMPUTE_TIME:return X?ja.EXPANDED_COLOR:W.computeTimeColor||
ja.UNKNOWN;case aa.MEMORY:return X?ja.EXPANDED_COLOR:W.memoryColor||ja.UNKNOWN;case aa.OP_COMPATIBILITY:return null==W.compatibilityColors?ja.UNKNOWN:X?ja.EXPANDED_COLOR:A("op-compat-"+W.node.name,W.compatibilityColors);default:throw Error("Unknown case to color nodes by");}}function C(R,Y,W,X){X=X||c.Class.Node.SHAPE;var ja=W.isNodeSelected(Y.node.name),pa=Y.isInExtract||Y.isOutExtract||Y.isLibraryFunction,ta=Y.expanded&&X!==c.Class.Annotation.NODE,da=Y.isFadedOut;R.classed("highlighted",W.isNodeHighlighted(Y.node.name));
R.classed("selected",ja);R.classed("extract",pa);R.classed("expanded",ta);R.classed("faded",da);R=R.select("."+X+" ."+c.Class.Node.COLOR_TARGET);Y=E(W.templateIndex,aa[W.colorBy.toUpperCase()],Y,ta);R.style("fill",Y);R.style("stroke",ja?null:D(Y))}function D(R){return"url"===R.substring(0,3)?b.render.MetanodeColors.GRADIENT_OUTLINE:d3.rgb(R).darker().toString()}function J(R,Y){var W=[];R=Y.getNodeByName(R);if(R instanceof a.graph.OpNodeImpl)return[R].concat(R.inEmbeddings);R=R.metagraph.nodes();_.each(R,
function(X){W=W.concat(J(X,Y))});return W}function M(R,Y,W){if(W[Y.name])return W;W[Y.name]=!0;var X=Y.inputs,ja=P(R,Y);d3.select('.node[data-name\x3d"'+ja.name+'"]').classed("input-highlight",!0);var pa={};_.each(X,function(Aa){Aa=R.getNodeByName(Aa.name);if(void 0!==Aa){Aa instanceof b.MetanodeImpl&&(Aa=a.graph.getStrictName(Aa.name),Aa=R.getNodeByName(Aa));var Ca=P(R,Aa),oa=pa[Ca.name];oa?oa.opNodes.push(Aa):pa[Ca.name]={visibleParent:Ca,opNodes:[Aa]}}});var ta={},da=[ja];ta[ja.name]={traced:!1,
index:0,connectionEndpoints:[]};Y=ja;for(X=1;Y.name!==a.graph.ROOT_NAME;X++)Y=Y.parentNode,ta[Y.name]={traced:!1,index:X,connectionEndpoints:[]},da[X]=Y;_.forOwn(pa,function(Aa){var Ca=Aa.visibleParent;_.each(Aa.opNodes,function(oa){W=M(R,oa,W)});Ca.name!==ja.name&&H(Ca,ta,da)});return W}function H(R,Y,W){for(var X=R,ja=[];!Y[X.name];)R.name!==X.name&&ja.push([R,X]),R=X,X=X.parentNode;Y=Y[X.name].index;var pa=W[Math.max(Y-1,0)].name;X=R.name;d3.selectAll('[data-edge\x3d"'+R.name+"--"+pa+'"]').classed("input-edge-highlight",
!0);_.each(ja,function(ta){d3.selectAll('[data-edge\x3d"'+ta[0].name+"--"+pa+("~~"+ta[1].name+'~~OUT"]')).classed("input-edge-highlight",!0)});for(R=1;R<Y;R++)d3.selectAll('[data-edge\x3d"'+X+"~~"+W[R].name+("~~IN--"+W[R-1].name+'"]')).classed("input-edge-highlight",!0)}function K(R,Y){var W={};_.each(Y,function(X){X=R.getNodeByName(X);X=P(R,X);W[X.name]=X});return W}function L(R){_.forOwn(R,function(Y){for(;Y.name!==a.graph.ROOT_NAME;){var W=d3.select('.node[data-name\x3d"'+Y.name+'"]');!W.nodes().length||
W.classed("input-highlight")||W.classed("selected")||W.classed("op")||W.classed("input-parent",!0);Y=Y.parentNode}})}function P(R,Y){for(var W=!1,X=Y;!W;)if(Y=X,X=Y.parentNode,void 0===X)W=!0;else{var ja=R.getRenderNodeByName(X.name);ja&&(ja.expanded||X instanceof b.OpNodeImpl)&&(W=!0)}return Y}e.buildGroup=function(R,Y,W){R=c.selectOrCreateChild(R,"g",c.Class.Node.CONTAINER).selectAll(function(){return this.childNodes}).data(Y,function(X){return X.node.name+":"+X.node.type});R.enter().append("g").attr("data-name",
function(X){return X.node.name}).each(function(X){var ja=d3.select(this);W.addNodeGroup(X.node.name,ja)}).merge(R).attr("class",function(X){return c.Class.Node.GROUP+" "+z(X)}).each(function(X){var ja=d3.select(this),pa=c.selectOrCreateChild(ja,"g",c.Class.Annotation.INBOX);c.annotation.buildGroup(pa,X.inAnnotations,X,W);pa=c.selectOrCreateChild(ja,"g",c.Class.Annotation.OUTBOX);c.annotation.buildGroup(pa,X.outAnnotations,X,W);pa=w(ja,X,c.Class.Node.SHAPE);X.node.isGroupNode&&g(pa,X,W);h(pa,X,W);
X.node.isGroupNode&&(X.expanded?c.buildGroup(ja,X,W,c.Class.Subscene.GROUP):c.selectChild(ja,"g",c.Class.Subscene.GROUP).remove());var ta=X.displayName,da=X.node.type===b.NodeType.META&&!X.expanded;pa=c.selectOrCreateChild(ja,"text",c.Class.Node.LABEL);var Aa=pa.node();Aa.parentNode.appendChild(Aa);pa.attr("dy",".35em").attr("text-anchor","middle");da&&(ta.length>W.maxMetanodeLabelLength&&(ta=ta.substr(0,W.maxMetanodeLabelLength-2)+"..."),S||(S=d3.scaleLinear().domain([W.maxMetanodeLabelLengthLargeFont,
W.maxMetanodeLabelLength]).range([W.maxMetanodeLabelLengthFontSize,W.minMetanodeLabelLengthFontSize]).clamp(!0)),pa.attr("font-size",S(ta.length)+"px"));ta=pa.text(ta);v(ta,X.node.type,X);h(pa,X,W,X.node.type===b.NodeType.META);C(ja,X,W);ta=c.selectChild(ja,"g",c.Class.Node.SHAPE);pa=b.layout.computeCXPositionOfNodeShape(X);switch(X.node.type){case b.NodeType.OP:da=X.node;_.isNumber(da.functionInputIndex)||_.isNumber(da.functionOutputIndex)?(ta=c.selectChild(ta,"polygon"),c.positionTriangle(ta,X.x,
X.y,X.coreBox.width,X.coreBox.height)):(ta=c.selectChild(ta,"ellipse"),c.positionEllipse(ta,pa,X.y,X.coreBox.width,X.coreBox.height));u(ja,pa,X.y,X.labelOffset);break;case b.NodeType.META:ta=ta.selectAll("rect");X.expanded?(c.positionRect(ta,X.x,X.y,X.width,X.height),f(ja,X),u(ja,pa,X.y,-X.height/2+X.labelHeight/2)):(c.positionRect(ta,pa,X.y,X.coreBox.width,X.coreBox.height),u(ja,pa,X.y,0));break;case b.NodeType.SERIES:ta=c.selectChild(ta,"use");X.expanded?(c.positionRect(ta,X.x,X.y,X.width,X.height),
f(ja,X),u(ja,pa,X.y,-X.height/2+X.labelHeight/2)):(c.positionRect(ta,pa,X.y,X.coreBox.width,X.coreBox.height),u(ja,pa,X.y,X.labelOffset));break;case b.NodeType.BRIDGE:ta=c.selectChild(ta,"rect");c.positionRect(ta,X.x,X.y,X.width,X.height);break;default:throw Error("Unrecognized node type: "+X.node.type);}});R.exit().each(function(X){W.removeNodeGroup(X.node.name);var ja=d3.select(this);0<X.inAnnotations.list.length&&ja.select("."+c.Class.Annotation.INBOX).selectAll("."+c.Class.Annotation.GROUP).each(function(pa){W.removeAnnotationGroup(pa,
X)});0<X.outAnnotations.list.length&&ja.select("."+c.Class.Annotation.OUTBOX).selectAll("."+c.Class.Annotation.GROUP).each(function(pa){W.removeAnnotationGroup(pa,X)})}).remove()};e.getContextMenu=l;e.canBeInSeries=n;e.getSeriesName=m;e.getGroupSettingLabel=r;e.enforceLabelWidth=v;var S=null;e.buildShape=w;e.nodeClass=z;var aa;(function(R){R[R.STRUCTURE=0]="STRUCTURE";R[R.DEVICE=1]="DEVICE";R[R.XLA_CLUSTER=2]="XLA_CLUSTER";R[R.COMPUTE_TIME=3]="COMPUTE_TIME";R[R.MEMORY=4]="MEMORY";R[R.OP_COMPATIBILITY=
5]="OP_COMPATIBILITY"})(aa=e.ColorBy||(e.ColorBy={}));e.getFillForNode=E;e.stylize=C;e.getStrokeForFill=D;e.traceInputs=function(R){d3.selectAll(".input-highlight").classed("input-highlight",!1);d3.selectAll(".non-input").classed("non-input",!1);d3.selectAll(".input-parent").classed("input-parent",!1);d3.selectAll(".input-child").classed("input-child",!1);d3.selectAll(".input-edge-highlight").classed("input-edge-highlight",!1);d3.selectAll(".non-input-edge-highlight").classed("non-input-edge-highlight",
!1);d3.selectAll(".input-highlight-selected").classed("input-highlight-selected",!1);var Y=d3.select("g.node.selected,g.op.selected"),W=void 0;if(R&&R.traceInputs&&Y.nodes().length){W=Y.nodes()[0];Y=W.getAttribute("data-name");Y=J(Y,R);var X={};_.each(Y,function(ja){X=M(R,ja,X)});d3.selectAll("g.node.selected,g.op.selected").classed("input-highlight",!1).classed("input-highlight-selected",!0);Y=Object.keys(X);Y=K(R,Y);L(Y);d3.selectAll("g.node:not(.selected):not(.input-highlight):not(.input-parent):not(.input-children)").classed("non-input",
!0).each(function(ja){d3.selectAll('[data-name\x3d"'+ja.node.name+'"]').classed("non-input",!0)});d3.selectAll("g.edge:not(.input-edge-highlight)").classed("non-input-edge-highlight",!0)}};e._getAllContainedOpNodes=J;e.traceAllInputsOfOpNode=M;e.getVisibleParent=P})(c.node||(c.node={}))})(b.scene||(b.scene={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/op.js
(function(a){(function(b){(function(c){var e=function(){function f(){}f.prototype.isNotTpuOp=function(g){return-1!=g.toLowerCase().search("cpu:")||-1!=g.toLowerCase().search("gpu:")?!0:-1==g.toLowerCase().search("tpu")};f.prototype.opValid=function(g){return 0==g.name.search(b.FUNCTION_LIBRARY_NODE_PREFIX)||!g.op||g.device&&this.isNotTpuOp(g.device)||g.device&&-1!=g.device.search("TPU_SYSTEM")?!0:_.includes(f.WHITELIST,g.op)};f.WHITELIST="Abs Acos Acosh Add AddN AdjustContrastv2 AdjustHue AdjustSaturation All Angle Any ApproximateEqual ArgMax ArgMin Asin Asinh Assert AssignAddVariableOp AssignSubVariableOp AssignVariableOp Atan Atan2 Atanh AvgPool AvgPool3D AvgPool3DGrad AvgPoolGrad BatchMatMul BatchToSpace BatchToSpaceND BiasAdd BiasAddGrad BiasAddV1 Bitcast BitwiseAnd BitwiseOr BitwiseXor BroadcastArgs BroadcastGradientArgs Bucketize Cast Ceil CheckNumerics Cholesky ClipByValue Complex ComplexAbs Concat ConcatOffset ConcatV2 Conj ConjugateTranspose Const ControlTrigger Conv2D Conv2DBackpropFilter Conv2DBackpropInput Conv3D Conv3DBackpropFilterV2 Conv3DBackpropInputV2 Cos Cosh Cross CrossReplicaSum Cumprod Cumsum DepthToSpace DepthwiseConv2dNative DepthwiseConv2dNativeBackpropFilter DepthwiseConv2dNativeBackpropInput Diag DiagPart Digamma Div DynamicStitch Elu EluGrad Empty Equal Erf Erfc Exp ExpandDims Expm1 ExtractImagePatches FFT FFT2D FFT3D FakeQuantWithMinMaxArgs FakeQuantWithMinMaxArgsGradient FakeQuantWithMinMaxVars FakeQuantWithMinMaxVarsGradient Fill Floor FloorDiv FloorMod FusedBatchNorm FusedBatchNormGrad FusedBatchNormGradV2 FusedBatchNormV2 Gather GatherNd GatherV2 GetItem Greater GreaterEqual HSVToRGB IFFT IFFT2D IFFT3D IRFFT IRFFT2D IRFFT3D Identity IdentityN If Imag InfeedDequeue InfeedDequeueTuple InplaceAdd InplaceUpdate Inv Invert InvertPermutation IsFinite IsInf IsNan L2Loss LRN LRNGrad LeftShift Less LessEqual Lgamma LinSpace ListDiff Log Log1p LogSoftmax LogicalAnd LogicalNot LogicalOr MatMul MatrixBandPart MatrixDiag MatrixDiagPart MatrixSetDiag MatrixTriangularSolve Max MaxPool MaxPool3D MaxPool3DGrad MaxPool3DGradGrad MaxPoolGrad MaxPoolGradGrad MaxPoolGradGradV2 MaxPoolGradV2 MaxPoolV2 Maximum Mean Min Minimum MirrorPad Mod Mul Multinomial Neg NoOp NonMaxSuppressionV4 NotEqual OneHot OnesLike OutfeedEnqueue OutfeedEnqueueTuple Pack Pad PadV2 ParallelDynamicStitch PlaceholderWithDefault Pow PreventGradient Prod Qr QuantizeAndDequantizeV2 QuantizeAndDequantizeV3 RFFT RFFT2D RFFT3D RGBToHSV RandomShuffle RandomStandardNormal RandomUniform RandomUniformInt Range Rank ReadVariableOp Real RealDiv Reciprocal ReciprocalGrad RecvTPUEmbeddingActivations Relu Relu6 Relu6Grad ReluGrad Reshape ResizeBilinear ResizeBilinearGrad ResourceApplyAdaMax ResourceApplyAdadelta ResourceApplyAdagrad ResourceApplyAdagradDA ResourceApplyAdam ResourceApplyAddSign ResourceApplyCenteredRMSProp ResourceApplyFtrl ResourceApplyFtrlV2 ResourceApplyGradientDescent ResourceApplyMomentum ResourceApplyPowerSign ResourceApplyProximalAdagrad ResourceApplyProximalGradientDescent ResourceApplyRMSProp ResourceGather ResourceScatterAdd ResourceScatterDiv ResourceScatterMax ResourceScatterMin ResourceScatterMul ResourceScatterNdAdd ResourceScatterNdUpdate ResourceScatterSub ResourceScatterUpdate ResourceStridedSliceAssign Reverse ReverseSequence ReverseV2 RightShift Rint Round Rsqrt RsqrtGrad ScatterNd Select Selu SeluGrad SendTPUEmbeddingGradients Shape ShapeN Sigmoid SigmoidGrad Sign Sin Sinh Size Slice Snapshot Softmax SoftmaxCrossEntropyWithLogits Softplus SoftplusGrad Softsign SoftsignGrad SpaceToBatch SpaceToBatchND SpaceToDepth SparseMatMul SparseSoftmaxCrossEntropyWithLogits SparseToDense Split SplitV Sqrt SqrtGrad Square SquaredDifference Squeeze StackCloseV2 StackPopV2 StackPushV2 StackV2 StatelessIf StatelessRandomNormal StatelessRandomUniform StatelessTruncatedNormal StatelessWhile StopGradient StridedSlice StridedSliceGrad Sub Sum SymbolicGradient TPUEmbeddingActivations Tan Tanh TanhGrad TensorArrayCloseV3 TensorArrayConcatV3 TensorArrayGatherV3 TensorArrayGradV3 TensorArrayReadV3 TensorArrayScatterV3 TensorArraySizeV3 TensorArraySplitV3 TensorArrayV3 TensorArrayWriteV3 Tile TopKV2 Transpose TruncateDiv TruncateMod TruncatedNormal Unpack UnsortedSegmentMax UnsortedSegmentMin UnsortedSegmentProd UnsortedSegmentSum VarIsInitializedOp VariableShape While XlaDynamicUpdateSlice XlaHostCompute XlaIf XlaRecv XlaReduceWindow XlaSend XlaSort XlaWhile ZerosLike Enter Exit LoopCond Merge NextIteration Switch _Arg _ParallelConcatUpdate _Retval _TPUCompile _TPUExecute TPUCompilationResult TPUReplicatedInput TPUReplicatedOutput TPUReplicateMetadata MergeV2Checkpoints RestoreV2 SaveV2 Abort Assert Assign Placeholder PlaceholderV2 ShardedFilename StringJoin Variable VariableV2 VarHandleOp AudioSummary AudioSummaryV2 DebugNumericSummary HistogramSummary ImageSummary MergeSummary ScalarSummary StatsAggregatorSummary".split(" ");
return f}();c.TpuCompatibilityProvider=e;c.checkOpsForCompatibility=function(f,g){if(null===g)throw Error("Compatibility provider required, but got: "+g);_.each(f.nodes,function(h){h.compatible=g.opValid(h);_.each(h.inEmbeddings,function(l){l.compatible=g.opValid(l)});_.each(h.outEmbeddings,function(l){l.compatible=g.opValid(l)})})}})(b.op||(b.op={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/parser.js
(function(a){(function(b){(function(c){function e(r){if("true"===r)return!0;if("false"===r)return!1;if('"'===r[0])return r.substring(1,r.length-1);var v=parseFloat(r);return isNaN(v)?r:v}function f(r){return new Promise(function(v,u){fetch(r).then(function(w){w.ok?w.arrayBuffer().then(v,u):w.text().then(u,u)})})}function g(r,v,u,w){void 0===u&&(u=1E6);void 0===w&&(w="\n");return new Promise(function(z,A){function E(C,D,J){var M=J>=r.byteLength;D=D.split(w);D[0]=C+D[0];var H=M?"":D.pop();for(C=0;C<
D.length;C++){var K=D[C];try{v(K)}catch(L){A(L);return}}M?z(!0):(M=new Blob([r.slice(J,J+u)]),D=new FileReader,D.onload=function(L){E(H,L.target.result,J+u)},D.readAsText(M))}E("","",0)})}function h(r){return n(r,m)}function l(r){return n(r,q).then(function(v){return v.step_stats})}function n(r,v){function u(C,D,J,M){var H=C[D];null==H?C[D]=M.join(".")in v?[J]:J:Array.isArray(H)?H.push(J):C[D]=[H,J]}var w={},z=[],A=[],E=w;return g(r,function(C){if(C)switch(C=C.trim(),C[C.length-1]){case "{":C=C.substring(0,
C.length-2).trim();var D={};z.push(E);A.push(C);u(E,C,D,A);E=D;break;case "}":E=z.pop();A.pop();break;default:D=C;var J=D.indexOf(":");C=D.substring(0,J).trim();D=e(D.substring(J+2).trim());u(E,C,D,A.concat(C))}}).then(function(){return w})}c.fetchPbTxt=f;c.fetchAndParseMetadata=function(r,v){return a.graph.util.runTask("Reading metadata pbtxt",40,function(){return null==r?Promise.resolve(null):f(r)},v).then(function(u){return a.graph.util.runAsyncPromiseTask("Parsing metadata.pbtxt",60,function(){return null!=
u?l(u):Promise.resolve(null)},v)})};c.fetchAndParseGraphData=function(r,v,u){return a.graph.util.runAsyncPromiseTask("Reading graph pbtxt",40,function(){return v?new Promise(function(w,z){var A=new FileReader;A.onload=function(){return w(A.result)};A.onerror=function(){return z(A.error)};A.readAsArrayBuffer(v)}):f(r)},u).then(function(w){return a.graph.util.runAsyncPromiseTask("Parsing graph.pbtxt",60,function(){return h(w)},u)})};c.streamParse=g;var m={"library.function":!0,"library.function.node_def":!0,
"library.function.node_def.input":!0,"library.function.node_def.attr":!0,"library.function.node_def.attr.value.list.b":!0,"library.function.node_def.attr.value.list.f":!0,"library.function.node_def.attr.value.list.func":!0,"library.function.node_def.attr.value.list.i":!0,"library.function.node_def.attr.value.list.s":!0,"library.function.node_def.attr.value.list.shape":!0,"library.function.node_def.attr.value.list.shape.dim":!0,"library.function.node_def.attr.value.list.tensor":!0,"library.function.node_def.attr.value.list.type":!0,
"library.function.node_def.attr.value.shape.dim":!0,"library.function.node_def.attr.value.tensor.string_val":!0,"library.function.node_def.attr.value.tensor.tensor_shape.dim":!0,"library.function.signature.input_arg":!0,"library.function.signature.output_arg":!0,"library.versions":!0,node:!0,"node.input":!0,"node.attr":!0,"node.attr.value.list.b":!0,"node.attr.value.list.f":!0,"node.attr.value.list.func":!0,"node.attr.value.list.i":!0,"node.attr.value.list.s":!0,"node.attr.value.list.shape":!0,"node.attr.value.list.shape.dim":!0,
"node.attr.value.list.tensor":!0,"node.attr.value.list.type":!0,"node.attr.value.shape.dim":!0,"node.attr.value.tensor.string_val":!0,"node.attr.value.tensor.tensor_shape.dim":!0},q={"step_stats.dev_stats":!0,"step_stats.dev_stats.node_stats":!0,"step_stats.dev_stats.node_stats.output":!0,"step_stats.dev_stats.node_stats.memory":!0,"step_stats.dev_stats.node_stats.output.tensor_description.shape.dim":!0};c.parseGraphPbTxt=h;c.parseStatsPbTxt=l})(b.parser||(b.parser={}))})(a.graph||(a.graph={}))})(tf||
(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/proto.js
var nl=tf||(tf={}),ol=nl.graph||(nl.graph={});ol.proto||(ol.proto={});
</script>
<script>//~~WEBPATH~~/tf-graph-common/render.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){(function(b){(function(c){function e(K,L){_.each(K.nodes(),function(P){P=K.node(P);P.expanded=1<L;if(0<L)switch(P.node.type){case b.NodeType.META:case b.NodeType.SERIES:P.coreGraph&&e(P.coreGraph,L-1)}})}function f(K,L,P){var S=K.node(L),aa=K.node(P),R=K.edge(L,P);if(S.node.include!==b.InclusionType.INCLUDE&&aa.node.include!==b.InclusionType.INCLUDE||S.node.include===b.InclusionType.EXCLUDE||aa.node.include===b.InclusionType.EXCLUDE){var Y=new E(aa.node,aa,R,C.SHORTCUT,!1);S.outAnnotations.push(Y);
S=new E(S.node,S,R,C.SHORTCUT,!0);aa.inAnnotations.push(S);K.removeEdge(L,P)}}function g(K,L,P){var S=K.coreGraph,aa=S.node(L);aa.isOutExtract=!0;_.each(S.predecessors(L),function(R){f(S,R,L)});(w.detachAllEdgesForHighDegree||P)&&_.each(S.successors(L),function(R){f(S,L,R)});0===S.neighbors(L).length&&(aa.node.include=b.InclusionType.EXCLUDE,K.isolatedOutExtract.push(aa),S.removeNode(L))}function h(K,L,P){var S=K.coreGraph,aa=S.node(L);aa.isInExtract=!0;_.each(S.successors(L),function(R){f(S,L,R)});
(w.detachAllEdgesForHighDegree||P)&&_.each(S.predecessors(L),function(R){f(S,R,L)});0===S.neighbors(L).length&&(aa.node.include=b.InclusionType.EXCLUDE,K.isolatedInExtract.push(aa),S.removeNode(L))}function l(K,L){if(K.type===b.NodeType.OP)for(var P=0;P<L.length;P++){if(K.op===L[P])return!0}else if(K.type===b.NodeType.META&&(K=K.getRootOp()))for(P=0;P<L.length;P++)if(K.op===L[P])return!0;return!1}function n(K){var L=K.coreGraph;_.each(L.nodes(),function(P){L.node(P).node.include!==b.InclusionType.EXCLUDE||
P.startsWith(a.graph.FUNCTION_LIBRARY_NODE_PREFIX)||(K.coreGraph.outEdges(P).length>K.coreGraph.inEdges(P).length?g(K,P,!0):h(K,P,!0))})}function m(K){var L=K.coreGraph;_.each(L.nodes(),function(P){var S=L.node(P);S.node.include===b.InclusionType.UNSPECIFIED&&l(S.node,w.outExtractTypes)&&g(K,P)})}function q(K){var L=K.coreGraph;_.each(L.nodes(),function(P){var S=L.node(P);S.node.include===b.InclusionType.UNSPECIFIED&&l(S.node,w.inExtractTypes)&&h(K,P)})}function r(K){var L=K.coreGraph,P={},S={},aa=
0;_.each(L.nodes(),function(ta){if(L.node(ta).node.include===b.InclusionType.UNSPECIFIED){var da=_.reduce(L.predecessors(ta),function(Ca,oa){oa=L.edge(oa,ta).metaedge;return Ca+(oa.numRegularEdges?1:0)},0);0===da&&0<L.predecessors(ta).length&&(da=L.predecessors(ta).length);var Aa=_.reduce(L.successors(ta),function(Ca,oa){oa=L.edge(ta,oa).metaedge;return Ca+(oa.numRegularEdges?1:0)},0);0===Aa&&0<L.successors(ta).length&&(Aa=L.successors(ta).length);P[ta]=da;S[ta]=Aa;aa++}});if(!(aa<w.minNodeCountForExtraction)){var R=
w.minDegreeForExtraction-1,Y=Math.round(.75*aa),W=Math.round(.25*aa),X=Object.keys(P).sort(function(ta,da){return P[ta]-P[da]}),ja=P[X[Y]],pa=ja+ja-P[X[W]];pa=Math.max(pa,R);for(ja=aa-1;P[X[ja]]>pa;ja--)h(K,X[ja]);X=Object.keys(S).sort(function(ta,da){return S[ta]-S[da]});ja=S[X[Y]];W=ja+4*(ja-S[X[W]]);W=Math.max(W,R);for(ja=aa-1;S[X[ja]]>W;ja--)(R=L.node(X[ja]))&&!R.isInExtract&&g(K,X[ja])}}function v(K){var L=K.coreGraph,P={};_.each(L.edges(),function(S){L.edge(S).metaedge.numRegularEdges||((P[S.v]=
P[S.v]||[]).push(S),(P[S.w]=P[S.w]||[]).push(S))});_.each(P,function(S){S.length>w.maxControlDegree&&_.each(S,function(aa){return f(L,aa.v,aa.w)})})}function u(K){n(K);w.outExtractTypes&&m(K);w.inExtractTypes&&q(K);r(K);w.maxControlDegree&&v(K);var L=K.coreGraph;_.each(L.nodes(),function(P){var S=L.node(P),aa=L.neighbors(P).length;if(S.node.include===b.InclusionType.UNSPECIFIED&&0===aa){aa=0<S.outAnnotations.list.length;var R=0<S.inAnnotations.list.length;S.isInExtract?(K.isolatedInExtract.push(S),
S.node.include=b.InclusionType.EXCLUDE,L.removeNode(P)):S.isOutExtract?(K.isolatedOutExtract.push(S),S.node.include=b.InclusionType.EXCLUDE,L.removeNode(P)):w.extractIsolatedNodesWithAnnotationsOnOneSide&&(aa&&!R?(S.isInExtract=!0,K.isolatedInExtract.push(S),S.node.include=b.InclusionType.EXCLUDE,L.removeNode(P)):R&&!aa&&(S.isOutExtract=!0,K.isolatedOutExtract.push(S),S.node.include=b.InclusionType.EXCLUDE,L.removeNode(P)))}})}c.OpNodeColors={DEFAULT_FILL:"#ffffff",DEFAULT_STROKE:"#b2b2b2",COMPATIBLE:"#0f9d58",
INCOMPATIBLE:"#db4437"};c.MetanodeColors={DEFAULT_FILL:"#d9d9d9",DEFAULT_STROKE:"#a6a6a6",SATURATION:.6,LIGHTNESS:.85,EXPANDED_COLOR:"#f0f0f0",HUES:[220,100,180,40,20,340,260,300,140,60],STRUCTURE_PALETTE:function(K,L){var P=c.MetanodeColors.HUES;K=P[K%P.length];P=Math.sin(K*Math.PI/360);return d3.hsl(K,.01*(L?30:90-60*P),.01*(L?95:80)).toString()},DEVICE_PALETTE:function(K){return c.MetanodeColors.STRUCTURE_PALETTE(K)},XLA_CLUSTER_PALETTE:function(K){return c.MetanodeColors.STRUCTURE_PALETTE(K)},
UNKNOWN:"#eee",GRADIENT_OUTLINE:"#888"};c.SeriesNodeColors={DEFAULT_FILL:"white",DEFAULT_STROKE:"#b2b2b2"};var w={enableExtraction:!0,minNodeCountForExtraction:15,minDegreeForExtraction:5,maxControlDegree:4,maxBridgePathDegree:4,outExtractTypes:["NoOp"],inExtractTypes:[],detachAllEdgesForHighDegree:!0,extractIsolatedNodesWithAnnotationsOnOneSide:!0,enableBridgegraph:!0,minMaxColors:["#fff5f0","#fb6a4a"],maxAnnotations:5},z=new RegExp("^(?:"+a.graph.FUNCTION_LIBRARY_NODE_PREFIX+")?(\\w+)_[a-z0-9]{8}(?:_\\d+)?$"),
A=function(){function K(L,P){this.hierarchy=L;this.displayingStats=P;this.index={};this.renderedOpNames=[];this.computeScales();this.hasSubhierarchy={};this.root=new H(L.root,L.graphOptions);this.index[L.root.name]=this.root;this.renderedOpNames.push(L.root.name);this.buildSubhierarchy(L.root.name);this.root.expanded=!0;this.traceInputs=!1}K.prototype.computeScales=function(){this.deviceColorMap=d3.scaleOrdinal().domain(this.hierarchy.devices).range(_.map(d3.range(this.hierarchy.devices.length),c.MetanodeColors.DEVICE_PALETTE));
this.xlaClusterColorMap=d3.scaleOrdinal().domain(this.hierarchy.xlaClusters).range(_.map(d3.range(this.hierarchy.xlaClusters.length),c.MetanodeColors.XLA_CLUSTER_PALETTE));var L=this.hierarchy.root.metagraph,P=d3.max(L.nodes(),function(S){S=L.node(S);if(null!=S.stats)return S.stats.totalBytes});this.memoryUsageScale=d3.scaleLinear().domain([0,P]).range(w.minMaxColors);P=d3.max(L.nodes(),function(S){S=L.node(S);if(null!=S.stats)return S.stats.getTotalMicros()});this.computeTimeScale=d3.scaleLinear().domain([0,
P]).range(w.minMaxColors);this.edgeWidthSizedBasedScale=this.hierarchy.hasShapeInfo?b.scene.edge.EDGE_WIDTH_SIZE_BASED_SCALE:d3.scaleLinear().domain([1,this.hierarchy.maxMetaEdgeSize]).range([b.scene.edge.MIN_EDGE_WIDTH,b.scene.edge.MAX_EDGE_WIDTH])};K.prototype.getRenderNodeByName=function(L){return this.index[L]};K.prototype.getNodeByName=function(L){return this.hierarchy.node(L)};K.prototype.colorHistogram=function(L,P){if(0<Object.keys(L).length){var S=_.sum(Object.keys(L).map(function(aa){return L[aa]}));
return Object.keys(L).map(function(aa){return{color:P(aa),proportion:L[aa]/S}})}console.info("no pairs found!");return null};K.prototype.getOrCreateRenderNodeByName=function(L){if(!L)return null;if(L in this.index)return this.index[L];var P=this.hierarchy.node(L);if(!P)return null;var S=P.isGroupNode?new H(P,this.hierarchy.graphOptions):new J(P);this.index[L]=S;this.renderedOpNames.push(L);P.stats&&(S.memoryColor=this.memoryUsageScale(P.stats.totalBytes),S.computeTimeColor=this.computeTimeScale(P.stats.getTotalMicros()));
S.isFadedOut=this.displayingStats&&!a.graph.util.hasDisplayableNodeStats(P.stats);var aa=null,R=null,Y=null;if(P.isGroupNode){aa=P.deviceHistogram;R=P.xlaClusterHistogram;var W=P.compatibilityHistogram.compatible;var X=P.compatibilityHistogram.incompatible;if(0!=W||0!=X)Y=W/(W+X)}else(P=S.node.device)&&(aa=(X={},X[P]=1,X)),(X=S.node.xlaCluster)&&(R=(W={},W[X]=1,W)),S.node.type===b.NodeType.OP&&(Y=S.node.compatible?1:0);aa&&(S.deviceColors=this.colorHistogram(aa,this.deviceColorMap));R&&(S.xlaClusterColors=
this.colorHistogram(R,this.xlaClusterColorMap));null!=Y&&(S.compatibilityColors=[{color:a.graph.render.OpNodeColors.COMPATIBLE,proportion:Y},{color:a.graph.render.OpNodeColors.INCOMPATIBLE,proportion:1-Y}]);return this.index[L]};K.prototype.getNearestVisibleAncestor=function(L){for(var P=b.getHierarchicalPath(L),S=0,aa=null;S<P.length&&(L=P[S],aa=this.getRenderNodeByName(L),aa.expanded);S++);return S==P.length-2&&(P=P[S+1],aa.inAnnotations.nodeNames[P]||aa.outAnnotations.nodeNames[P])?P:L};K.prototype.setDepth=
function(L){var P=this.root;P.coreGraph&&e(P.coreGraph,+L)};K.prototype.isNodeAuxiliary=function(L){var P=this.getRenderNodeByName(L.node.parentNode.name),S=_.find(P.isolatedInExtract,function(aa){return aa.node.name===L.node.name});if(S)return!0;S=_.find(P.isolatedOutExtract,function(aa){return aa.node.name===L.node.name});return!!S};K.prototype.getNamesOfRenderedOps=function(){return this.renderedOpNames};K.prototype.cloneAndAddFunctionOpNode=function(L,P,S,aa){function R(ja){return Y.cloneAndAddFunctionOpNode(L,
P,ja,aa)}var Y=this,W=S.name.replace(P,aa),X=L.metagraph.node(W);if(X)return X;X=new b.OpNodeImpl({name:W,input:[],device:S.device,op:S.op,attr:_.cloneDeep(S.attr)});X.cardinality=S.cardinality;X.include=S.include;X.outputShapes=_.cloneDeep(S.outputShapes);X.xlaCluster=S.xlaCluster;X.functionInputIndex=S.functionInputIndex;X.functionOutputIndex=S.functionOutputIndex;X.inputs=S.inputs.map(function(ja){var pa=_.clone(ja);pa.name=ja.name.replace(P,aa);return pa});X.parentNode=L;L.metagraph.setNode(X.name,
X);this.hierarchy.setNode(X.name,X);X.inEmbeddings=S.inEmbeddings.map(R);X.outEmbeddings=S.outEmbeddings.map(R);return X};K.prototype.cloneFunctionLibraryMetanode=function(L,P,S,aa,R){var Y={};L=this.cloneFunctionLibraryMetanodeHelper(L,P,S,aa,R,Y);_.isEmpty(Y)||this.patchEdgesFromFunctionOutputs(P,Y);return L};K.prototype.cloneFunctionLibraryMetanodeHelper=function(L,P,S,aa,R,Y){var W=this,X=a.graph.createMetanode(S.name.replace(aa,R));X.depth=S.depth;X.cardinality=S.cardinality;X.templateId=S.templateId;
X.opHistogram=_.clone(S.opHistogram);X.deviceHistogram=_.clone(S.deviceHistogram);X.xlaClusterHistogram=_.clone(S.xlaClusterHistogram);X.hasNonControlEdges=S.hasNonControlEdges;X.include=S.include;X.nodeAttributes=_.clone(S.nodeAttributes);X.associatedFunction=S.associatedFunction;_.each(S.metagraph.nodes(),function(ja){ja=S.metagraph.node(ja);switch(ja.type){case b.NodeType.META:ja=W.cloneFunctionLibraryMetanodeHelper(L,P,ja,aa,R,Y);ja.parentNode=X;X.metagraph.setNode(ja.name,ja);W.hierarchy.setNode(ja.name,
ja);break;case b.NodeType.OP:ja=W.cloneAndAddFunctionOpNode(X,aa,ja,R);_.isNumber(ja.functionInputIndex)&&W.patchEdgesIntoFunctionInputs(P,ja);_.isNumber(ja.functionOutputIndex)&&(Y[ja.functionOutputIndex]=ja);break;default:console.warn(ja.name+" is oddly neither a metanode nor an opnode.")}});this.cloneLibraryMetanodeEdges(S,X,aa,R);return X};K.prototype.cloneLibraryMetanodeEdges=function(L,P,S,aa){_.each(L.metagraph.edges(),function(R){R=L.metagraph.edge(R);var Y=R.v.replace(S,aa),W=R.w.replace(S,
aa),X=new b.MetaedgeImpl(Y,W);X.inbound=R.inbound;X.numRegularEdges=R.numRegularEdges;X.numControlEdges=R.numControlEdges;X.numRefEdges=R.numRefEdges;X.totalSize=R.totalSize;R.baseEdgeList&&(X.baseEdgeList=R.baseEdgeList.map(function(ja){var pa=_.clone(ja);pa.v=ja.v.replace(S,aa);pa.w=ja.w.replace(S,aa);return pa}));P.metagraph.node(W)?P.metagraph.setEdge(Y,W,X):P.metagraph.setEdge(W,Y,X)})};K.prototype.patchEdgesIntoFunctionInputs=function(L,P){for(var S=Math.min(P.functionInputIndex,L.inputs.length-
1),aa=_.clone(L.inputs[S]);aa.isControlDependency;)S++,aa=L.inputs[S];P.inputs.push(aa);aa=this.hierarchy.getPredecessors(L.name);var R,Y=0;_.each(aa.regular,function(W){Y+=W.numRegularEdges;if(Y>S)return R=W,!1});_.each(R.baseEdgeList,function(W){W.w===L.name&&(W.w=P.name);W.v===L.name&&(W.v=P.name)})};K.prototype.patchEdgesFromFunctionOutputs=function(L,P){var S=this,aa=this.hierarchy.getSuccessors(L.name);_.each(aa.regular,function(R){_.each(R.baseEdgeList,function(Y){var W=S.hierarchy.node(Y.w);
_.each(W.inputs,function(X){X.name===L.name&&(X.name=P[X.outputTensorKey].name,X.outputTensorKey=Y.outputTensorKey)})});_.each(R.baseEdgeList,function(Y){Y.v=P[Y.outputTensorKey].name;Y.outputTensorKey="0"})})};K.prototype.buildSubhierarchy=function(L){var P=this;if(!(L in this.hasSubhierarchy)){this.hasSubhierarchy[L]=!0;var S=this.index[L];if(S.node.type===b.NodeType.META||S.node.type===b.NodeType.SERIES){var aa=S.node.metagraph,R=S.coreGraph,Y=[],W=[];_.isEmpty(this.hierarchy.libraryFunctions)||
(_.each(aa.nodes(),function(ka){var Da=aa.node(ka),Oa=P.hierarchy.libraryFunctions[Da.op];Oa&&0!==ka.indexOf(a.graph.FUNCTION_LIBRARY_NODE_PREFIX)&&(ka=P.cloneFunctionLibraryMetanode(aa,Da,Oa.node,Oa.node.name,Da.name),Y.push(Da),W.push(ka))}),_.each(W,function(ka,Da){Da=Y[Da];ka.parentNode=Da.parentNode;aa.setNode(Da.name,ka);P.hierarchy.setNode(Da.name,ka)}));_.each(aa.nodes(),function(ka){var Da=P.getOrCreateRenderNodeByName(ka),Oa=Da.node;R.setNode(ka,Da);Oa.isGroupNode||(_.each(Oa.inEmbeddings,
function(Ea){var La=new M(null),Ka=new J(Ea);La=new E(Ea,Ka,La,C.CONSTANT,!0);Da.inAnnotations.push(La);P.index[Ea.name]=Ka}),_.each(Oa.outEmbeddings,function(Ea){var La=new M(null),Ka=new J(Ea);La=new E(Ea,Ka,La,C.SUMMARY,!1);Da.outAnnotations.push(La);P.index[Ea.name]=Ka}))});_.each(aa.edges(),function(ka){var Da=aa.edge(ka);Da=new M(Da);Da.isFadedOut=P.index[ka.v].isFadedOut||P.index[ka.w].isFadedOut;R.setEdge(ka.v,ka.w,Da)});w.enableExtraction&&S.node.type===b.NodeType.META&&u(S);_.isEmpty(this.hierarchy.libraryFunctions)||
this.buildSubhierarchiesForNeededFunctions(aa);L===a.graph.ROOT_NAME&&_.forOwn(this.hierarchy.libraryFunctions,function(ka){ka=ka.node;var Da=P.getOrCreateRenderNodeByName(ka.name);S.libraryFunctionsExtract.push(Da);Da.node.include=b.InclusionType.EXCLUDE;R.removeNode(ka.name)});var X=S.node.parentNode;if(X){var ja=this.index[X.name],pa=function(ka){for(var Da=[],Oa=1;Oa<arguments.length;Oa++)Da[Oa-1]=arguments[Oa];return Da.concat([ka?"IN":"OUT"]).join("~~")},ta=this.hierarchy.getBridgegraph(L),
da={},Aa={},Ca={};_.each(ta.edges(),function(ka){var Da=!!aa.node(ka.w),Oa=Da?ka.v:ka.w;ta.edge(ka).numRegularEdges?Da?Aa[Oa]=(Aa[Oa]||0)+1:da[Oa]=(da[Oa]||0)+1:Ca[Oa]=(Ca[Oa]||0)+1});var oa=this.hierarchy.getNodeMap();_.each(ta.edges(),function(ka){var Da=ta.edge(ka),Oa=!!aa.node(ka.w),Ea=Oa?[ka.w,ka.v]:[ka.v,ka.w];ka=Ea[0];var La=Ea[1],Ka=P.index[ka],vb=P.index[La],jc=vb?vb.node:oa[La],sb=!Da.numRegularEdges&&Ca[La]>w.maxControlDegree,tb=(Oa?[S.inAnnotations,Ka.inAnnotations]:[S.outAnnotations,
Ka.outAnnotations])[1],ac=(Oa?Aa:da)[La]>w.maxBridgePathDegree;Ea=null;var yd=!1;w.enableBridgegraph&&!ac&&!sb&&Ka.isInCore()&&(yd=function(Ce){return ja.coreGraph.edge(Oa?{v:Ce,w:L}:{v:L,w:Ce})},(Ea=yd(La))||(Ea=yd(pa(Oa,La,X.name))),yd=!!Ea);Ka=!1;if(Ea&&!Da.numRegularEdges){Ka=Ea;for(sb=ja.node;Ka.adjoiningMetaedge;)Ka=Ka.adjoiningMetaedge,sb=sb.parentNode;sb=P.hierarchy.getTopologicalOrdering(sb.name);Ka=Ka.metaedge;Ka=sb[Ka.v]>sb[Ka.w]}yd&&!Ka?(vb=pa(Oa,L),La=pa(Oa,La,L),jc=R.node(La),jc||(tb=
R.node(vb),tb||(tb=new J({name:vb,type:b.NodeType.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,stats:null,include:b.InclusionType.UNSPECIFIED,inbound:Oa,nodeAttributes:{}}),P.index[vb]=tb,R.setNode(vb,tb)),jc=new J({name:La,type:b.NodeType.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,stats:null,include:b.InclusionType.UNSPECIFIED,inbound:Oa,nodeAttributes:{}}),P.index[La]=jc,R.setNode(La,jc),R.setParent(La,vb),tb.node.cardinality++),Da=new M(Da),Da.adjoiningMetaedge=Ea,Oa?R.setEdge(La,
ka,Da):R.setEdge(ka,La,Da)):tb.push(new E(jc,vb,new M(Da),C.SHORTCUT,Oa))});_.each([!0,!1],function(ka){var Da=pa(ka,L),Oa=R.node(Da);Oa&&_.each(R.nodes(),function(Ea){if(R.node(Ea).node.type!==b.NodeType.BRIDGE&&(ka?!R.predecessors(Ea).length:!R.successors(Ea).length)){var La=pa(ka,L,"STRUCTURAL_TARGET"),Ka=R.node(La);Ka||(Ka=new J({name:La,type:b.NodeType.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,stats:null,include:b.InclusionType.UNSPECIFIED,inbound:ka,nodeAttributes:{}}),Ka.structural=
!0,P.index[La]=Ka,R.setNode(La,Ka),Oa.node.cardinality++,R.setParent(La,Da));Ka=new M(null);Ka.structural=!0;Ka.weight--;ka?R.setEdge(La,Ea,Ka):R.setEdge(Ea,La,Ka)}})})}}}};K.prototype.buildSubhierarchiesForNeededFunctions=function(L){var P=this;_.each(L.edges(),function(S){S=L.edge(S);S=new M(S);_.forEach(S.metaedge.baseEdgeList,function(aa){for(var R=aa.v.split(a.graph.NAMESPACE_DELIM),Y=R.length;0<=Y;Y--){aa=R.slice(0,Y);var W=P.hierarchy.node(aa.join(a.graph.NAMESPACE_DELIM));if(W){if(W.type===
b.NodeType.OP&&P.hierarchy.libraryFunctions[W.op])for(R=1;R<aa.length;R++)(Y=aa.slice(0,R).join(a.graph.NAMESPACE_DELIM))&&P.buildSubhierarchy(Y);break}}})})};return K}();c.RenderGraphInfo=A;var E=function(){return function(K,L,P,S,aa){this.node=K;this.renderNodeInfo=L;this.renderMetaedgeInfo=P;this.annotationType=S;this.height=this.width=this.dy=this.dx=0;P&&P.metaedge&&(this.v=P.metaedge.v,this.w=P.metaedge.w);this.isIn=aa;this.points=[]}}();c.Annotation=E;var C;(function(K){K[K.SHORTCUT=0]="SHORTCUT";
K[K.CONSTANT=1]="CONSTANT";K[K.SUMMARY=2]="SUMMARY";K[K.ELLIPSIS=3]="ELLIPSIS"})(C=c.AnnotationType||(c.AnnotationType={}));var D=function(){function K(){this.list=[];this.nodeNames={}}K.prototype.push=function(L){if(!(L.node.name in this.nodeNames))if(this.nodeNames[L.node.name]=!0,this.list.length<w.maxAnnotations)this.list.push(L);else{var P=this.list[this.list.length-1];P.annotationType===C.ELLIPSIS?(L=P.node,L.setNumMoreNodes(++L.numMoreNodes)):(P=new a.graph.EllipsisNodeImpl(1),this.list.push(new E(P,
new J(P),null,C.ELLIPSIS,L.isIn)))}};return K}();c.AnnotationList=D;var J=function(){function K(L){this.node=L;this.expanded=!1;this.inAnnotations=new D;this.outAnnotations=new D;this.outboxWidth=this.inboxWidth=this.height=this.width=this.y=this.x=0;this.structural=this.excluded=!1;this.paddingBottom=this.paddingRight=this.paddingLeft=this.paddingTop=this.labelHeight=this.radius=this.labelOffset=0;this.isOutExtract=this.isInExtract=!1;this.coreBox={width:0,height:0};this.isFadedOut=!1;this.displayName=
L.name.substring(L.name.lastIndexOf(a.graph.NAMESPACE_DELIM)+1);L.type===b.NodeType.META&&L.associatedFunction&&((L=this.displayName.match(z))?this.displayName=L[1]:_.startsWith(this.displayName,a.graph.FUNCTION_LIBRARY_NODE_PREFIX)&&(this.displayName=this.displayName.substring(a.graph.FUNCTION_LIBRARY_NODE_PREFIX.length)))}K.prototype.isInCore=function(){return!this.isInExtract&&!this.isOutExtract&&!this.isLibraryFunction};return K}();c.RenderNodeInfo=J;var M=function(){return function(K){this.metaedge=
K;this.adjoiningMetaedge=null;this.structural=!1;this.weight=1;this.isFadedOut=!1}}();c.RenderMetaedgeInfo=M;var H=function(K){function L(P,S){var aa=K.call(this,P)||this;P=P.metagraph.graph();S.compound=!0;aa.coreGraph=b.createGraph(P.name,b.GraphType.CORE,S);aa.inExtractBox={width:0,height:0};aa.outExtractBox={width:0,height:0};aa.libraryFunctionsBox={width:0,height:0};aa.isolatedInExtract=[];aa.isolatedOutExtract=[];aa.libraryFunctionsExtract=[];return aa}Qk(L,K);return L}(J);c.RenderGroupNodeInfo=
H;c.makeInExtract=h;c.mapIndexToHue=function(K){return 1+579.2561679725*K%358};c.expandUntilNodeIsShown=function(K,L){var P=document.getElementById("scene");L=L.split("/");var S=L[L.length-1].match(/(.*):\w+/);2===S.length&&(L[L.length-1]=S[1]);S=L[0];for(var aa=K.getRenderNodeByName(S),R=1;R<L.length&&aa.node.type!==a.graph.NodeType.OP;R++)K.buildSubhierarchy(S),aa.expanded=!0,P.setNodeExpanded(aa),S+="/"+L[R],aa=K.getRenderNodeByName(S);return aa.node.name}})(b.render||(b.render={}))})(a.graph||
(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/scene.js
(function(a){(function(b){(function(c){function e(m,q,r,v){var u=f(m,q,r);if(!u.empty())return u;q=document.createElementNS("http://www.w3.org/2000/svg",q);if(r instanceof Array)for(u=0;u<r.length;u++)q.classList.add(r[u]);else q.classList.add(r);v?m.node().insertBefore(q,v):m.node().appendChild(q);return d3.select(q).datum(m.datum())}function f(m,q,r){m=m.node().childNodes;for(var v=0;v<m.length;v++){var u=m[v];if(u.tagName===q)if(r instanceof Array){for(var w=!0,z=0;z<r.length;z++)w=w&&u.classList.contains(r[z]);
if(w)return d3.select(u)}else if(!r||u.classList.contains(r))return d3.select(u)}return d3.select(null)}function g(m,q){var r=q.node.type===b.NodeType.SERIES?0:b.layout.PARAMS.subscene.meta.labelHeight;h(f(m,"g",c.Class.Scene.CORE),0,r);var v=0<q.isolatedInExtract.length,u=0<q.isolatedOutExtract.length,w=0<q.libraryFunctionsExtract.length,z=b.layout.PARAMS.subscene.meta.extractXOffset,A=0;v&&(A+=q.outExtractBox.width);u&&(A+=q.outExtractBox.width);v&&(v=q.coreBox.width,v=A<b.layout.MIN_AUX_WIDTH?
v-b.layout.MIN_AUX_WIDTH+q.inExtractBox.width/2:v-q.inExtractBox.width/2-q.outExtractBox.width-(u?z:0),v=v-q.libraryFunctionsBox.width-(w?z:0),h(f(m,"g",c.Class.Scene.INEXTRACT),v,r));u&&(u=q.coreBox.width,u=A<b.layout.MIN_AUX_WIDTH?u-b.layout.MIN_AUX_WIDTH+q.outExtractBox.width/2:u-q.outExtractBox.width/2,u=u-q.libraryFunctionsBox.width-(w?z:0),h(f(m,"g",c.Class.Scene.OUTEXTRACT),u,r));w&&(q=q.coreBox.width-q.libraryFunctionsBox.width/2,h(f(m,"g",c.Class.Scene.FUNCTION_LIBRARY),q,r))}function h(m,
q,r){null!=m.attr("transform")&&(m=m.transition("position"));m.attr("transform","translate("+q+","+r+")")}function l(m,q){return q?m.toFixed(0):1<=Math.abs(m)?m.toFixed(1):m.toExponential(1)}function n(m,q,r,v,u,w,z,A){void 0===u&&(u=60);void 0===w&&(w=10);void 0===z&&(z=0);d3.select(m.parentNode).selectAll(".health-pill").remove();if(q){var E=q.value,C=E.slice(2,8),D=C[0],J=C[1],M=C[5],H=E[1],K=E[8],L=E[9],P=E[10],S=Math.sqrt(E[11]);null==u&&(u=60);null==w&&(w=10);null==z&&(z=0);null!=r&&r.node.type===
a.graph.NodeType.OP&&(u/=2,w/=2);E=document.createElementNS(c.SVG_NAMESPACE,"g");E.classList.add("health-pill");var aa=document.createElementNS(c.SVG_NAMESPACE,"defs");E.appendChild(aa);var R=document.createElementNS(c.SVG_NAMESPACE,"linearGradient"),Y="health-pill-gradient-"+v;R.setAttribute("id",Y);var W=0,X="0%";for(v=0;v<C.length;v++)if(C[v]){W+=C[v];var ja=document.createElementNS(c.SVG_NAMESPACE,"stop");ja.setAttribute("offset",X);ja.setAttribute("stop-color",c.healthPillEntries[v].background_color);
R.appendChild(ja);X=document.createElementNS(c.SVG_NAMESPACE,"stop");ja=100*W/H+"%";X.setAttribute("offset",ja);X.setAttribute("stop-color",c.healthPillEntries[v].background_color);R.appendChild(X);X=ja}aa.appendChild(R);v=document.createElementNS(c.SVG_NAMESPACE,"rect");v.setAttribute("fill","url(#"+Y+")");v.setAttribute("width",String(u));v.setAttribute("height",String(w));v.setAttribute("y",String(z));E.appendChild(v);v=document.createElementNS(c.SVG_NAMESPACE,"title");aa="Device: "+q.device_name+
"\n";aa+="dtype: "+q.dtype+"\n";R="(scalar)";0<q.shape.length&&(R="("+q.shape.join(",")+")");aa=aa+("\nshape: "+R+"\n\n")+("#(elements): "+H+"\n");q=[];for(R=0;R<C.length;R++)0<C[R]&&q.push("#("+c.healthPillEntries[R].label+"): "+C[R]);aa+=q.join(", ")+"\n\n";L>=K&&(aa=aa+("min: "+K+", max: "+L+"\n")+("mean: "+P+", stddev: "+S));v.textContent=aa;E.appendChild(v);P=!1;if(null!=r&&(S=r.x-u/2,w=r.y-w-r.height/2-2,0>r.labelOffset&&(w+=r.labelOffset),E.setAttribute("transform","translate("+S+", "+w+")"),
(C[2]||C[3]||C[4])&&(r=r.node.attr)&&r.length))for(v=0;v<r.length;v++)if("T"===r[v].key){P=(r=r[v].value.type)&&/^DT_(BOOL|INT|UINT)/.test(r);break}r=document.createElementNS(c.SVG_NAMESPACE,"text");if(Number.isFinite(K)&&Number.isFinite(L)){if(K=l(K,P),L=l(L,P),r.textContent=1<H?K+" ~ "+L:K,0<D||0<J||0<M)r.textContent+=" (",H=[],0<D&&H.push("NaN\u00d7"+D),0<J&&H.push("-\u221e\u00d7"+J),0<M&&H.push("+\u221e\u00d7"+M),r.textContent+=H.join("; ")+")"}else r.textContent="(No finite elements)";r.classList.add("health-pill-stats");
null==A&&(A=u/2);r.setAttribute("x",String(A));r.setAttribute("y",String(z-2));E.appendChild(r);Polymer.dom(m.parentNode).appendChild(E)}}c.SVG_NAMESPACE="http://www.w3.org/2000/svg";c.Class={Node:{CONTAINER:"nodes",GROUP:"node",SHAPE:"nodeshape",COLOR_TARGET:"nodecolortarget",LABEL:"nodelabel",BUTTON_CONTAINER:"buttoncontainer",BUTTON_CIRCLE:"buttoncircle",EXPAND_BUTTON:"expandbutton",COLLAPSE_BUTTON:"collapsebutton"},Edge:{CONTAINER:"edges",GROUP:"edge",LINE:"edgeline",REFERENCE_EDGE:"referenceedge",
REF_LINE:"refline",SELECTABLE:"selectableedge",SELECTED:"selectededge",STRUCTURAL:"structural"},Annotation:{OUTBOX:"out-annotations",INBOX:"in-annotations",GROUP:"annotation",NODE:"annotation-node",EDGE:"annotation-edge",CONTROL_EDGE:"annotation-control-edge",LABEL:"annotation-label",ELLIPSIS:"annotation-ellipsis"},Scene:{GROUP:"scene",CORE:"core",FUNCTION_LIBRARY:"function-library",INEXTRACT:"in-extract",OUTEXTRACT:"out-extract"},Subscene:{GROUP:"subscene"},OPNODE:"op",METANODE:"meta",SERIESNODE:"series",
BRIDGENODE:"bridge",ELLIPSISNODE:"ellipsis"};c.healthPillEntries=[{background_color:"#CC2F2C",label:"NaN"},{background_color:"#FF8D00",label:"-\u221e"},{background_color:"#EAEAEA",label:"-"},{background_color:"#A5A5A5",label:"0"},{background_color:"#262626",label:"+"},{background_color:"#003ED4",label:"+\u221e"}];c.fit=function(m,q,r,v){var u=m.getBoundingClientRect(),w=null;try{if(w=q.getBBox(),0===w.width)return}catch(z){return}q=b.layout.PARAMS.graph;u=d3.zoomIdentity.scale(.9*Math.min(u.width/
w.width,u.height/w.height,2)).translate(q.padding.paddingLeft,q.padding.paddingTop);d3.select(m).transition().duration(500).call(r.transform,u).on("end.fitted",function(){r.on("end.fitted",null);v()})};c.panToNode=function(m,q,r,v){m=d3.select('[data-name\x3d"'+m+'"].'+c.Class.Node.GROUP).node();if(!m)return!1;var u=m.getBBox(),w=m.getScreenCTM();m=q.createSVGPoint();r=q.createSVGPoint();m.x=u.x;m.y=u.y;r.x=u.x+u.width;r.y=u.y+u.height;m=m.matrixTransform(w);r=r.matrixTransform(w);w=q.getBoundingClientRect();
u=w.top+w.height-150;return m.x>w.left&&r.x<w.left+w.width-320&&m.y>w.top&&r.y<u?!1:(u=w.left+w.width/2-(m.x+r.x)/2,m=w.top+w.height/2-(m.y+r.y)/2,r=d3.zoomTransform(q),d3.select(q).transition().duration(500).call(v.translateBy,u/r.k,m/r.k),!0)};c.selectOrCreateChild=e;c.selectChild=f;c.buildGroup=function(m,q,r,v){v=v||c.Class.Scene.GROUP;var u=f(m,"g",v).empty();m=e(m,"g",v);v=e(m,"g",c.Class.Scene.CORE);var w=_.reduce(q.coreGraph.nodes(),function(z,A){A=q.coreGraph.node(A);A.excluded||z.push(A);
return z},[]);q.node.type===b.NodeType.SERIES&&w.reverse();c.edge.buildGroup(v,q.coreGraph,r);c.node.buildGroup(v,w,r);0<q.isolatedInExtract.length?(v=e(m,"g",c.Class.Scene.INEXTRACT),c.node.buildGroup(v,q.isolatedInExtract,r)):f(m,"g",c.Class.Scene.INEXTRACT).remove();0<q.isolatedOutExtract.length?(v=e(m,"g",c.Class.Scene.OUTEXTRACT),c.node.buildGroup(v,q.isolatedOutExtract,r)):f(m,"g",c.Class.Scene.OUTEXTRACT).remove();0<q.libraryFunctionsExtract.length?(v=e(m,"g",c.Class.Scene.FUNCTION_LIBRARY),
c.node.buildGroup(v,q.libraryFunctionsExtract,r)):f(m,"g",c.Class.Scene.FUNCTION_LIBRARY).remove();g(m,q);u&&m.attr("opacity",0).transition().attr("opacity",1)};c.addGraphClickListener=function(m,q){d3.select(m).on("click",function(){q.fire("graph-select")})};c.translate=h;c.positionRect=function(m,q,r,v,u){m.transition().attr("x",q-v/2).attr("y",r-u/2).attr("width",v).attr("height",u)};c.positionTriangle=function(m,q,r,v,u){u/=2;v/=2;q=[[q,r-u],[q+v,r+u],[q-v,r+u]];m.transition().attr("points",q.map(function(w){return w.join(",")}).join(" "))};
c.positionButton=function(m,q){var r=b.layout.computeCXPositionOfNodeShape(q)+(q.expanded?q.width:q.coreBox.width)/2-6,v=q.y-(q.expanded?q.height:q.coreBox.height)/2+6;q.node.type!==b.NodeType.SERIES||q.expanded||(r+=10,v-=2);q="translate("+r+","+v+")";m.selectAll("path").transition().attr("transform",q);m.select("circle").transition().attr({cx:r,cy:v,r:b.layout.PARAMS.nodeSize.meta.expandButtonRadius})};c.positionEllipse=function(m,q,r,v,u){m.transition().attr("cx",q).attr("cy",r).attr("rx",v/2).attr("ry",
u/2)};c.humanizeHealthPillStat=l;c.addHealthPill=n;c.addHealthPills=function(m,q,r){if(q){var v=1;d3.select(m).selectAll("g.nodeshape").each(function(u){var w=q[u.node.name];n(this,w?w[r]:null,u,v++)})}}})(b.scene||(b.scene={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/template.js
(function(a){(function(b){(function(c){function e(m){var q=_.map({depth:m.depth,"|V|":m.metagraph.nodes().length,"|E|":m.metagraph.edges().length},function(r,v){return v+"\x3d"+r}).join(" ");m=_.map(m.opHistogram,function(r,v){return v+"\x3d"+r}).join(",");return q+" [ops] "+m}function f(m){var q=m.getNodeMap(),r=Object.keys(q).reduce(function(v,u){var w=q[u];if(w.type!==b.NodeType.META)return v;u=u.split("/").length-1;var z=e(w),A=v[z]||{nodes:[],level:u};v[z]=A;A.nodes.push(w);A.level>u&&(A.level=
u);return v},{});return Object.keys(r).map(function(v){return[v,r[v]]}).filter(function(v){v=v[1].nodes;if(1<v.length)return!0;v=v[0];return v.type===b.NodeType.META&&v.associatedFunction}).sort(function(v){return v[1].nodes[0].depth})}function g(m,q){return _.reduce(m,function(r,v){var u=v[0],w=[];v[1].nodes.forEach(function(z){for(var A=0;A<w.length;A++)if(!q||l(w[A].metanode.metagraph,z.metagraph)){z.templateId=w[A].metanode.templateId;w[A].members.push(z.name);return}z.templateId=u+"["+w.length+
"]";w.push({metanode:z,members:[z.name]})});w.forEach(function(z){r[z.metanode.templateId]={level:v[1].level,nodes:z.members}});return r},{})}function h(m,q,r){return _.sortBy(m,[function(v){return q.node(v).op},function(v){return q.node(v).templateId},function(v){return q.neighbors(v).length},function(v){return q.predecessors(v).length},function(v){return q.successors(v).length},function(v){return v.substr(r.length)}])}function l(m,q){function r(M,H){var K=M.substr(v.length),L=H.substr(u.length);
if(w[K]^z[L])return console.warn("different visit pattern","["+v+"]",K,"["+u+"]",L),!0;w[K]||(w[K]=z[L]=!0,A.push({n1:M,n2:H}));return!1}if(!a.graph.hasSimilarDegreeSequence(m,q))return!1;var v=m.graph().name,u=q.graph().name,w={},z={},A=[],E=m.sources(),C=q.sources();if(E.length!==C.length)return console.log("different source length"),!1;E=h(E,m,v);C=h(C,q,u);for(var D=0;D<E.length;D++){var J=r(E[D],C[D]);if(J)return!1}for(;0<A.length;){J=A.pop();if(!n(m.node(J.n1),q.node(J.n2)))return!1;E=m.successors(J.n1);
C=q.successors(J.n2);if(E.length!==C.length)return console.log("# of successors mismatch",E,C),!1;E=h(E,m,v);C=h(C,q,u);for(D=0;D<E.length;D++)if(J=r(E[D],C[D]))return!1}return!0}function n(m,q){if(m.type===b.NodeType.META)return m.templateId&&q.templateId&&m.templateId===q.templateId;if(m.type===b.NodeType.OP&&q.type===b.NodeType.OP)return m.op===q.op;if(m.type===b.NodeType.SERIES&&q.type===b.NodeType.SERIES){var r=m.metagraph.nodeCount();return r===q.metagraph.nodeCount()&&(0===r||m.metagraph.node(m.metagraph.nodes()[0]).op===
q.metagraph.node(q.metagraph.nodes()[0]).op)}return!1}c.detect=function(m,q){m=f(m);var r=g(m,q);return Object.keys(r).sort(function(v){return r[v].level}).reduce(function(v,u){v[u]=r[u];return v},{})}})(b.template||(b.template={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>
<script>//~~WEBPATH~~/tf-graph-common/util.js
(function(a){(function(b){(function(c){c.time=function(e,f){var g=Date.now();f=f();console.log(e,":",Date.now()-g,"ms");return f};c.getTracker=function(e){return{setMessage:function(f){e.set("progress",{value:e.progress.value,msg:f})},updateProgress:function(f){e.set("progress",{value:e.progress.value+f,msg:e.progress.msg})},reportError:function(f,g){console.error(g.stack);e.set("progress",{value:e.progress.value,msg:f,error:!0})}}};c.getSubtaskTracker=function(e,f,g){return{setMessage:function(h){e.setMessage(g+
": "+h)},updateProgress:function(h){e.updateProgress(h*f/100)},reportError:function(h,l){e.reportError(g+": "+h,l)}}};c.runTask=function(e,f,g,h){h.setMessage(e);try{var l=a.graph.util.time(e,g);h.updateProgress(f);return l}catch(n){h.reportError("Failed "+e,n)}};c.runAsyncTask=function(e,f,g,h){return new Promise(function(l){h.setMessage(e);setTimeout(function(){try{var n=a.graph.util.time(e,g);h.updateProgress(f);l(n)}catch(m){h.reportError("Failed "+e,m)}},20)})};c.runAsyncPromiseTask=function(e,
f,g,h){return new Promise(function(l,n){function m(q){h.reportError("Failed "+e,q);n(q)}h.setMessage(e);setTimeout(function(){try{var q=Date.now();g().then(function(r){console.log(e,":",Date.now()-q,"ms");h.updateProgress(f);l(r)}).catch(m)}catch(r){m(r)}},20)})};c.escapeQuerySelector=function(e){return e.replace(/([:.\[\],/\\\(\)])/g,"\\$1")};c.MEMORY_UNITS=[{symbol:"B"},{symbol:"KB",numUnits:1024},{symbol:"MB",numUnits:1024},{symbol:"GB",numUnits:1024},{symbol:"TB",numUnits:1024},{symbol:"PB",numUnits:1024}];
c.TIME_UNITS=[{symbol:"\u00b5s"},{symbol:"ms",numUnits:1E3},{symbol:"s",numUnits:1E3},{symbol:"min",numUnits:60},{symbol:"hr",numUnits:60},{symbol:"days",numUnits:24}];c.convertUnitsToHumanReadable=function(e,f,g){void 0===g&&(g=0);return g+1<f.length&&e>=f[g+1].numUnits?a.graph.util.convertUnitsToHumanReadable(e/f[g+1].numUnits,f,g+1):Number(e.toPrecision(3))+" "+f[g].symbol};c.hasDisplayableNodeStats=function(e){return e&&(0<e.totalBytes||0<e.getTotalMicros()||e.outputSize)?!0:!1};c.removeCommonPrefix=
function(e){function f(){g++;var m=_.map(e,function(q){return q.substring(0,g)});if(m.every(function(q,r){return 0===r?!0:q===m[r-1]})){if(g>=l)return{value:e};h=g}else return"break"}if(2>e.length)return e;for(var g=0,h=0,l=_.min(_.map(e,function(m){return m.length}));;){var n=f();if("object"===typeof n)return n.value;if("break"===n)break}return _.map(e,function(m){return m.substring(h)})};c.computeHumanFriendlyTime=function(e){e=+new Date-+new Date(e/1E3);return 3E4>e?"just now":6E4>e?Math.floor(e/
1E3)+" seconds ago":12E4>e?"a minute ago":36E5>e?Math.floor(e/6E4)+" minutes ago":1==Math.floor(e/36E5)?"an hour ago":864E5>e?Math.floor(e/36E5)+" hours ago":1728E5>e?"yesterday":Math.floor(e/864E5)+" days ago"}})(b.util||(b.util={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>






<script>//~~WEBPATH~~/tf-graph-common/minimap.js
(function(a){(function(b){var c=function(){function e(f,g,h,l,n,m){var q=this;this.svg=f;this.labelPadding=m;this.zoomG=g;this.mainZoom=h;this.maxWandH=n;f=d3.select(l);var r=f.select("svg"),v=r.select("rect");this.viewpointCoord={x:0,y:0};g=d3.drag().subject(Object).on("drag",function(){q.viewpointCoord.x=d3.event.x;q.viewpointCoord.y=d3.event.y;q.updateViewpoint()});v.datum(this.viewpointCoord).call(g);r.on("click",function(){if(!d3.event.defaultPrevented){var u=Number(v.attr("width")),w=Number(v.attr("height")),
z=d3.mouse(r.node());q.viewpointCoord.x=z[0]-u/2;q.viewpointCoord.y=z[1]-w/2;q.updateViewpoint()}});this.viewpoint=v.node();this.minimapSvg=r.node();this.minimap=l;this.canvas=f.select("canvas.first").node();this.canvasBuffer=f.select("canvas.second").node();this.downloadCanvas=f.select("canvas.download").node();d3.select(this.downloadCanvas).style("display","none");this.update()}e.prototype.updateViewpoint=function(){d3.select(this.viewpoint).attr("x",this.viewpointCoord.x).attr("y",this.viewpointCoord.y);
var f=-this.viewpointCoord.x*this.scaleMain/this.scaleMinimap,g=-this.viewpointCoord.y*this.scaleMain/this.scaleMinimap;d3.select(this.svg).call(this.mainZoom.transform,d3.zoomIdentity.translate(f,g).scale(this.scaleMain))};e.prototype.update=function(){var f=this,g=null;try{if(g=this.zoomG.getBBox(),0===g.width)return}catch(u){return}var h=d3.select("#graphdownload");this.download=h.node();h.on("click",function(){URL.revokeObjectURL(f.download.href);var u=f.downloadCanvas.toDataURL("image/png"),
w=u.slice(0,u.indexOf(","));if(w.endsWith(";base64")){var z=atob(u.slice(u.indexOf(",")+1));u=(new Uint8Array(z.length)).map(function(A,E){return z.charCodeAt(E)});f.download.href=URL.createObjectURL(new Blob([u],{type:"image/png"}))}else console.warn("non-base64 data URL ("+w+"); cannot use blob download"),f.download.href=u});h=d3.select(this.svg);for(var l="",n=0;n<document.styleSheets.length;n++)try{var m=document.styleSheets[n].cssRules||document.styleSheets[n].rules;if(null!=m)for(var q=0;q<
m.length;q++)l+=m[q].cssText.replace(/ ?tf-[\w-]+ ?/g,"")+"\n"}catch(u){if("SecurityError"!==u.name)throw u;}m=h.append("style");m.text(l);l=d3.select(this.zoomG);n=l.attr("transform");l.attr("transform",null);g.height+=g.y;g.width+=g.x;g.height+=2*this.labelPadding;g.width+=2*this.labelPadding;h.attr("width",g.width).attr("height",g.height);this.scaleMinimap=this.maxWandH/Math.max(g.width,g.height);this.minimapSize={width:g.width*this.scaleMinimap,height:g.height*this.scaleMinimap};d3.select(this.minimapSvg).attr(this.minimapSize);
d3.select(this.canvasBuffer).attr(this.minimapSize);q=d3.select(this.downloadCanvas);q.style("width",g.width);q.style("height",g.height);q.attr("width",3*g.width);q.attr("height",3*g.height);null!=this.translate&&null!=this.zoom&&requestAnimationFrame(function(){return f.zoom()});var r=(new XMLSerializer).serializeToString(this.svg);m.remove();h.attr("width",null).attr("height",null);l.attr("transform",n);var v=new Image;v.onload=function(){var u=f.canvasBuffer.getContext("2d");u.clearRect(0,0,f.canvasBuffer.width,
f.canvasBuffer.height);u.drawImage(v,0,0,f.minimapSize.width,f.minimapSize.height);requestAnimationFrame(function(){d3.select(f.canvasBuffer).style("display",null);d3.select(f.canvas).style("display","none");var w=[f.canvasBuffer,f.canvas];f.canvas=w[0];f.canvasBuffer=w[1]});u=f.downloadCanvas.getContext("2d");u.clearRect(0,0,f.downloadCanvas.width,f.downloadCanvas.height);u.drawImage(v,0,0,f.downloadCanvas.width,f.downloadCanvas.height)};v.onerror=function(){v.src=URL.createObjectURL(new Blob([r],
{type:"image/svg+xml;charset\x3dutf-8"}))};v.src="data:image/svg+xml;charset\x3dutf-8,"+encodeURIComponent(r)};e.prototype.zoom=function(f){if(null!=this.scaleMinimap){f&&(this.translate=[f.x,f.y],this.scaleMain=f.k);var g=this.svg.getBoundingClientRect(),h=d3.select(this.viewpoint);this.viewpointCoord.x=-this.translate[0]*this.scaleMinimap/this.scaleMain;this.viewpointCoord.y=-this.translate[1]*this.scaleMinimap/this.scaleMain;f=g.width*this.scaleMinimap/this.scaleMain;g=g.height*this.scaleMinimap/
this.scaleMain;h.attr("x",this.viewpointCoord.x).attr("y",this.viewpointCoord.y).attr("width",f).attr("height",g);h=this.minimapSize.width;var l=this.minimapSize.height,n=this.viewpointCoord.x,m=this.viewpointCoord.y;.8>(Math.min(Math.max(0,n+f),h)-Math.min(Math.max(0,n),h))*(Math.min(Math.max(0,m+g),l)-Math.min(Math.max(0,m),l))/(h*l)?this.minimap.classList.remove("hidden"):this.minimap.classList.add("hidden")}};return e}();b.Minimap=c})(a.scene||(a.scene={}))})(tf||(tf={}));
</script>

<dom-module id="tf-graph-minimap">
<template>
<style>
:host {
  background-color:white;
  transition: opacity .3s linear;
  pointer-events: auto;
}

:host.hidden {
  opacity: 0;
  pointer-events: none;
}

canvas {
  border: 1px solid #999;
}

rect {
  fill: white;
  stroke: #111111;
  stroke-width: 1px;
  fill-opacity: 0;
  filter: url(#minimapDropShadow);
  cursor: move;
}

svg {
  position: absolute;
}
</style>
<svg>
  <defs>
    <filter id="minimapDropShadow" x="-20%" y="-20%" width="150%" height="150%">
      <feoffset result="offOut" in="SourceGraphic" dx="1" dy="1"></feoffset>
      <fecolormatrix result="matrixOut" in="offOut" type="matrix" values="0.1 0 0 0 0 0 0.1 0 0 0 0 0 0.1 0 0 0 0 0 0.5 0"></fecolormatrix>
      <fegaussianblur result="blurOut" in="matrixOut" stddeviation="2"></fegaussianblur>
      <feblend in="SourceGraphic" in2="blurOut" mode="normal"></feblend>
    </filter>
  </defs>
  <rect></rect>
</svg>
<canvas class="first"></canvas>

<canvas class="second"></canvas>
<canvas class="download"></canvas>
</template>
<script>//~~WEBPATH~~/tf-graph/tf-graph-minimap.html.js
Polymer({is:"tf-graph-minimap",init:function(a,b,c,e,f){return new tf.scene.Minimap(a,b,c,this,e,f)}});
</script>
</dom-module>



<dom-module id="tf-graph-scene">
<template>
<style>
:host {
  display: flex;
  width: 100%;
  font-size: 20px;
}

::content #svg {
  overflow: hidden;
  flex: 1;
  height: 100%;
  width: 100%;
}

::content #hidden {
  position: fixed;
  top: 0px;
  visibility: hidden;
}

/* --- Node and annotation-node for Metanode --- */

::content .meta > .nodeshape > rect,
::content .meta > .annotation-node > rect {
  cursor: pointer;
  fill: hsl(0, 0%, 70%);
}
::content .node.meta.highlighted > .nodeshape > rect,
::content .node.meta.highlighted > .annotation-node > rect {
  stroke-width: 2;
}
::content .annotation.meta.highlighted > .nodeshape > rect,
::content .annotation.meta.highlighted > .annotation-node > rect {
  stroke-width: 1;
}
::content .meta.selected > .nodeshape > rect,
::content .meta.selected > .annotation-node > rect {
  stroke: red;
  stroke-width: 2;
}
::content .node.meta.selected.expanded > .nodeshape > rect,
::content .node.meta.selected.expanded > .annotation-node > rect {
  stroke: red;
  stroke-width: 3;
}
::content .annotation.meta.selected > .nodeshape > rect,
::content .annotation.meta.selected > .annotation-node > rect {
  stroke: red;
  stroke-width: 2;
}
::content .node.meta.selected.expanded.highlighted > .nodeshape > rect,
::content .node.meta.selected.expanded.highlighted > .annotation-node > rect {
  stroke: red;
  stroke-width: 4;
}

::content .faded,
::content .faded rect,
::content .faded ellipse,
::content .faded path,
::content .faded use,
::content #rectHatch line,
::content #ellipseHatch line {
  color: #e0d4b3 !important;
  fill: white;
  stroke: #e0d4b3 !important;
}

::content .faded path {
  stroke-width: 1px !important;
}

::content .faded rect {
  fill: url(#rectHatch) !important;
}

::content .faded ellipse,
::content .faded use {
  fill: url(#ellipseHatch) !important;
}

::content .faded text {
  opacity: 0;
}

/* Rules used for input-tracing. */
::content .input-highlight > * > rect,
::content .input-highlight > * > ellipse,
::content .input-highlight > * > use
{
  fill: white;
  stroke: #ff9800 !important;
}

/*  - Faded non-input styling */
::content .non-input > * > rect,
::content .non-input > * > ellipse,
::content .non-input > * > use,
/* For Const nodes. */
::content .non-input > * > .constant:not([class*="input-highlight"]) >
  .annotation-node > ellipse,
/* For styling of annotation nodes of non-input nodes. */
::content .non-input > g > .annotation > .annotation-node > rect {
  stroke: #e0d4b3 !important;
  stroke-width: inherit;
  stroke-dasharray: inherit;
}


::content .non-input path {
  visibility: hidden;
}

::content .non-input > .nodeshape > rect,
::content .non-input > .annotation-node > rect,
/* For styling of annotation nodes of non-input nodes. */
::content .non-input > g > .annotation > .annotation-node > rect
{
  fill: url(#rectHatch) !important;
}

::content .non-input ellipse,
::content .non-input use {
  fill: url(#ellipseHatch) !important;
}

::content .non-input > text {
  opacity: 0;
}

::content .non-input .annotation > .annotation-edge {
  marker-end: url(#annotation-arrowhead-faded);
}

::content .non-input .annotation > .annotation-edge.refline {
  marker-start: url(#ref-annotation-arrowhead-faded);
}

/* Input edges. */
::content .input-edge-highlight > text {
  fill: black !important;
}
::content .input-highlight > .in-annotations > .annotation > .annotation-edge,
::content .input-highlight-selected > .in-annotations > .annotation >
.annotation-edge {
  stroke: #999 !important;
}

/* Non-input edges. */
::content .non-input-edge-highlight,
::content .non-input > g > .annotation > path,
/* Annotation styles (label and edges respectively). */
::content .non-input > g >
.annotation:not(.input-highlight):not(.input-highlight-selected) >
.annotation-label
/*.annotation-edge*/
{
  visibility: hidden;
}

/* --- Op Node --- */

::content .op > .nodeshape > .nodecolortarget,
::content .op > .annotation-node > .nodecolortarget {
  cursor: pointer;
  fill: #fff;
  stroke: #ccc;
}

::content .op.selected > .nodeshape > .nodecolortarget,
::content .op.selected > .annotation-node > .nodecolortarget {
  stroke: red;
  stroke-width: 2;
}

::content .op.highlighted > .nodeshape > .nodecolortarget,
::content .op.highlighted > .annotation-node > .nodecolortarget {
  stroke-width: 2;
}

/* --- Series Node --- */

/* By default, don't show the series background <rect>. */
::content .series > .nodeshape > rect {
  fill: hsl(0, 0%, 70%);
  fill-opacity: 0;
  stroke-dasharray: 5, 5;
  stroke-opacity: 0;
  cursor: pointer;
}

/* Once expanded, show the series background <rect> and hide the <use>. */
::content .series.expanded > .nodeshape > rect {
  fill-opacity: 0.15;
  stroke: hsl(0, 0%, 70%);
  stroke-opacity: 1;
}
::content .series.expanded > .nodeshape > use {
  visibility: hidden;
}

/**
 * TODO: Simplify this by applying a stable class name to all <g>
 * elements that currently have either the nodeshape or annotation-node classes.
 */
::content .series > .nodeshape > use ,
::content .series > .annotation-node > use {
  stroke: #ccc;
}
::content .series.highlighted > .nodeshape > use ,
::content .series.highlighted > .annotation-node > use {
  stroke-width: 2;
}
::content .series.selected > .nodeshape > use ,
::content .series.selected > .annotation-node > use {
  stroke: red;
  stroke-width: 2;
}

::content .series.selected > .nodeshape > rect {
  stroke: red;
  stroke-width: 2;
}

::content .annotation.series.selected > .annotation-node > use {
  stroke: red;
  stroke-width: 2;
}

/* --- Bridge Node --- */
::content .bridge > .nodeshape > rect {
  stroke: #f0f;
  opacity: 0.2;
  display: none;
}

/* --- Structural Elements --- */
::content .edge > path.edgeline.structural {
  stroke: #f0f;
  opacity: 0.2;
  display: none;
}

/* Reference Edge */
::content .edge > path.edgeline.referenceedge {
  stroke: #FFB74D;
  opacity: 1;
}

/* --- Series Nodes --- */

/* Hide the rect for a series' annotation. */
::content .series > .annotation-node > rect {
  display: none;
}

/* --- Node label --- */


::content .node > text.nodelabel {
  cursor: pointer;
  fill: #444;
}

::content .meta.expanded > text.nodelabel {
  font-size: 9px;
}

::content .series > text.nodelabel {
  font-size: 8px;
}

::content .op > text.nodelabel {
  font-size: 6px;
}

::content .bridge > text.nodelabel {
  display: none;
}

::content .node.meta.expanded > text.nodelabel{
  cursor: normal;
}

::content .annotation.meta.highlighted > text.annotation-label {
  fill: #50A3F7;
}

::content .annotation.meta.selected > text.annotation-label {
  fill: #4285F4;
}

/* --- Annotation --- */

/* only applied for annotations that are not summary or constant.
(.summary, .constant gets overridden below) */
::content .annotation > .annotation-node > * {
  stroke-width: 0.5;
  stroke-dasharray: 1, 1;
}

::content .annotation.summary > .annotation-node > *,
::content .annotation.constant > .annotation-node > * {
  stroke-width: 1;
  stroke-dasharray: none;
}

::content .annotation > .annotation-edge {
  fill: none;
  stroke: #aaa;
  stroke-width: 0.5;
  marker-end: url(#annotation-arrowhead);
}

::content .faded .annotation > .annotation-edge {
  marker-end: url(#annotation-arrowhead-faded);
}

::content .annotation > .annotation-edge.refline {
  marker-start: url(#ref-annotation-arrowhead);
}

::content .faded .annotation > .annotation-edge.refline {
  marker-start: url(#ref-annotation-arrowhead-faded);
}

::content .annotation > .annotation-control-edge {
  stroke-dasharray: 1, 1;
}

::content #annotation-arrowhead {
  fill: #aaa;
}

::content #annotation-arrowhead-faded {
  fill: #e0d4b3;
}

::content #ref-annotation-arrowhead {
  fill: #aaa;
}

::content #ref-annotation-arrowhead-faded {
  fill: #e0d4b3;
}

::content .annotation > .annotation-label {
  font-size: 5px;
  cursor: pointer;
}
::content .annotation > .annotation-label.annotation-ellipsis {
  cursor: default;
}

/* Hide annotations on expanded meta nodes since they're redundant. */
::content .expanded > .in-annotations,
::content .expanded > .out-annotations {
  display: none;
}

/* --- Annotation: Constant --- */

::content .constant > .annotation-node > ellipse {
  cursor: pointer;
  fill: white;
  stroke: #848484;
}

::content .constant.selected > .annotation-node > ellipse {
  fill: white;
  stroke: red;
}

::content .constant.highlighted > .annotation-node > ellipse {
  stroke-width: 1.5;
}

/* --- Annotation: Summary --- */

::content .summary > .annotation-node > ellipse {
  cursor: pointer;
  fill: #DB4437;
  stroke: #DB4437;
}

::content .summary.selected > .annotation-node > ellipse {
  fill: #A52714;
  stroke: #A52714;
}

::content .summary.highlighted > .annotation-node > ellipse {
  stroke-width: 1.5;
}

/* --- Edge --- */

::content .edge > path.edgeline {
  fill: none;
  stroke: #bbb;
  stroke-linecap: round;
  stroke-width: 0.75;
}

::content .edge .selectableedge {
  cursor: pointer;
}

::content .selectededge > path.edgeline {
  cursor: default;
  stroke: #f00;
}

::content .edge.selectededge text {
  fill: #000;
}

/* Labels showing tensor shapes on edges */
::content .edge > text {
  font-size: 3.5px;
  fill: #666;
}

::content .dataflow-arrowhead {
  fill: #bbb;
}

::content .reference-arrowhead {
  fill: #FFB74D;
}

::content .selected-arrowhead {
  fill: #f00;
}

::content .edge .control-dep {
  stroke-dasharray: 2, 2;
}

/* --- Group node expand/collapse button --- */

/* Hides expand/collapse buttons when a node isn't expanded or highlighted. Using
   incredibly small opacity so that the bounding box of the <g> parent still takes
   this container into account even when it isn't visible */
::content .node:not(.highlighted):not(.expanded) > .nodeshape > .buttoncontainer {
  opacity: 0.01;
}
::content .node.highlighted > .nodeshape > .buttoncontainer {
  cursor: pointer;
}
::content .buttoncircle {
  fill: #E7811D;
}
::content .buttoncircle:hover {
  fill: #B96717;
}
::content .expandbutton,
::content .collapsebutton {
  stroke: white;
}
/* Do not let the path elements in the button take pointer focus */
::content .node > .nodeshape > .buttoncontainer > .expandbutton,
::content .node > .nodeshape > .buttoncontainer > .collapsebutton {
  pointer-events: none;
}
/* Only show the expand button when a node is collapsed and only show the
   collapse button when a node is expanded. */
::content .node.expanded > .nodeshape > .buttoncontainer > .expandbutton {
  display: none;
}
::content .node:not(.expanded) > .nodeshape > .buttoncontainer > .collapsebutton {
  display: none;
}

::content .health-pill-stats {
  font-size: 4px;
  text-anchor: middle;
}

::content .health-pill rect {
  filter: url(#health-pill-shadow);
  rx: 3;
  ry: 3;
}

.titleContainer {
  position: relative;
  top: 20px;
}

.title, .auxTitle, .functionLibraryTitle {
  position: absolute;
}

#minimap {
  position: absolute;
  right: 20px;
  bottom: 20px;
}
</style>
<div class="titleContainer">
  <div id="title" class="title">Main Graph</div>
  <div id="auxTitle" class="auxTitle">Auxiliary Nodes</div>
  <div id="functionLibraryTitle" class="functionLibraryTitle">Functions</div>
</div>
<svg id="svg">
  <defs>

    
    <path id="reference-arrowhead-path" d="M 0,0 L 10,5 L 0,10 C 3,7 3,3 0,0" />
    <marker class="reference-arrowhead" id="reference-arrowhead-small" viewbox="0 0 10 10" markerwidth="5" markerheight="5" refx="2" refy="5" orient="auto-start-reverse" markerunits="userSpaceOnUse">
      <use xlink:href="#reference-arrowhead-path" />
    </marker>
    <marker class="reference-arrowhead" id="reference-arrowhead-medium" viewbox="0 0 10 10" markerwidth="13" markerheight="13" refx="2" refy="5" orient="auto-start-reverse" markerunits="userSpaceOnUse">
      <use xlink:href="#reference-arrowhead-path" />
    </marker>
    <marker class="reference-arrowhead" id="reference-arrowhead-large" viewbox="0 0 10 10" markerwidth="16" markerheight="16" refx="2" refy="5" orient="auto-start-reverse" markerunits="userSpaceOnUse">
      <use xlink:href="#reference-arrowhead-path" />
    </marker>
    <marker class="reference-arrowhead" id="reference-arrowhead-xlarge" viewbox="0 0 10 10" markerwidth="20" markerheight="20" refx="2" refy="5" orient="auto-start-reverse" markerunits="userSpaceOnUse">
      <use xlink:href="#reference-arrowhead-path" />
    </marker>

    
    <path id="dataflow-arrowhead-path" d="M 0,0 L 10,5 L 0,10 C 3,7 3,3 0,0" />
    <marker class="dataflow-arrowhead" id="dataflow-arrowhead-small" viewbox="0 0 10 10" markerwidth="5" markerheight="5" refx="2" refy="5" orient="auto-start-reverse" markerunits="userSpaceOnUse">
      <use xlink:href="#dataflow-arrowhead-path" />
    </marker>
    <marker class="dataflow-arrowhead" id="dataflow-arrowhead-medium" viewbox="0 0 10 10" markerwidth="13" markerheight="13" refx="2" refy="5" orient="auto-start-reverse" markerunits="userSpaceOnUse">
      <use xlink:href="#dataflow-arrowhead-path" />
    </marker>
    <marker class="dataflow-arrowhead" id="dataflow-arrowhead-large" viewbox="0 0 10 10" markerwidth="16" markerheight="16" refx="2" refy="5" orient="auto-start-reverse" markerunits="userSpaceOnUse">
      <use xlink:href="#dataflow-arrowhead-path" />
    </marker>
    <marker class="dataflow-arrowhead" id="dataflow-arrowhead-xlarge" viewbox="0 0 10 10" markerwidth="20" markerheight="20" refx="2" refy="5" orient="auto-start-reverse" markerunits="userSpaceOnUse">
      <use xlink:href="#dataflow-arrowhead-path" />
    </marker>

    
    <marker id="annotation-arrowhead" markerwidth="5" markerheight="5" refx="5" refy="2.5" orient="auto">
      <path d="M 0,0 L 5,2.5 L 0,5 L 0,0" />
    </marker>
    <marker id="annotation-arrowhead-faded" markerwidth="5" markerheight="5" refx="5" refy="2.5" orient="auto">
      <path d="M 0,0 L 5,2.5 L 0,5 L 0,0" />
    </marker>
    <marker id="ref-annotation-arrowhead" markerwidth="5" markerheight="5" refx="0" refy="2.5" orient="auto">
      <path d="M 5,0 L 0,2.5 L 5,5 L 5,0" />
    </marker>
    <marker id="ref-annotation-arrowhead-faded" markerwidth="5" markerheight="5" refx="0" refy="2.5" orient="auto">
      <path d="M 5,0 L 0,2.5 L 5,5 L 5,0" />
    </marker>
    
    <ellipse id="op-node-stamp" rx="7.5" ry="3" stroke="inherit" fill="inherit" />
    
    <ellipse id="op-node-annotation-stamp" rx="5" ry="2" stroke="inherit" fill="inherit" />
    
    <g id="op-series-vertical-stamp">
      <use xlink:href="#op-node-stamp" x="8" y="9" />
      <use xlink:href="#op-node-stamp" x="8" y="6" />
      <use xlink:href="#op-node-stamp" x="8" y="3" />
    </g>
    
    <g id="op-series-horizontal-stamp">
      <use xlink:href="#op-node-stamp" x="16" y="4" />
      <use xlink:href="#op-node-stamp" x="12" y="4" />
      <use xlink:href="#op-node-stamp" x="8" y="4" />
    </g>
    
    <g id="op-series-annotation-stamp">
      <use xlink:href="#op-node-annotation-stamp" x="9" y="2" />
      <use xlink:href="#op-node-annotation-stamp" x="7" y="2" />
      <use xlink:href="#op-node-annotation-stamp" x="5" y="2" />
    </g>
    <svg id="summary-icon" fill="#848484" height="12" viewbox="0 0 24 24" width="12">
      <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" />
    </svg>
    
    <g id="linearGradients"></g>

    
    <pattern id="rectHatch" patterntransform="rotate(45 0 0)" width="5" height="5" patternunits="userSpaceOnUse">
      <line x1="0" y1="0" x2="0" y2="5" style="stroke-width: 1" />
    </pattern>
    <pattern id="ellipseHatch" patterntransform="rotate(45 0 0)" width="2" height="2" patternunits="userSpaceOnUse">
      <line x1="0" y1="0" x2="0" y2="2" style="stroke-width: 1" />
    </pattern>

    
    <filter id="health-pill-shadow" x="-40%" y="-40%" width="180%" height="180%">
      <fegaussianblur in="SourceAlpha" stdDeviation="0.8" />
      <feoffset dx="0" dy="0" result="offsetblur" />
      <feflood flood-color="#000000" />
      <fecomposite in2="offsetblur" operator="in" />
      <femerge>
        <femergenode />
        <femergenode in="SourceGraphic" />
      </femerge>
    </filter>
  </defs>
  
  <rect fill="white" width="10000" height="10000"></rect>
  <g id="root"></g>
</svg>
<tf-graph-minimap id="minimap"></tf-graph-minimap>
</template>
<script>//~~WEBPATH~~/tf-graph/tf-graph-scene.html.js
Polymer({is:"tf-graph-scene",properties:{renderHierarchy:Object,name:String,colorBy:String,_hasRenderHierarchyBeenFitOnce:Boolean,_isAttached:Boolean,_zoom:Object,highlightedNode:{type:String,observer:"_highlightedNodeChanged"},selectedNode:{type:String,observer:"_selectedNodeChanged"},handleEdgeSelected:Object,_zoomed:{type:Boolean,observer:"_onZoomChanged",value:!1},_zoomStartCoords:{type:Object,value:null},_zoomTransform:{type:Object,value:null},_maxZoomDistanceForClick:{type:Number,value:20},
templateIndex:Function,minimap:Object,_nodeGroupIndex:{type:Object,value:function(){return{}}},_annotationGroupIndex:{type:Object,value:function(){return{}}},_edgeGroupIndex:{type:Object,value:function(){return{}}},maxMetanodeLabelLengthFontSize:{type:Number,value:9},minMetanodeLabelLengthFontSize:{type:Number,value:6},maxMetanodeLabelLengthLargeFont:{type:Number,value:11},maxMetanodeLabelLength:{type:Number,value:18},progress:Object,nodeContextMenuItems:Array,nodeNamesToHealthPills:Object,healthPillStepIndex:Number},
observers:["_colorByChanged(colorBy)","_renderHierarchyChanged(renderHierarchy)","_animateAndFit(_isAttached, renderHierarchy)","_updateHealthPills(nodeNamesToHealthPills, healthPillStepIndex)"],getNode:function(a){return this.renderHierarchy.getRenderNodeByName(a)},isNodeExpanded:function(a){return a.expanded},setNodeExpanded:function(){this._build(this.renderHierarchy);this._updateLabels(!this._zoomed)},panToNode:function(a){tf.graph.scene.panToNode(a,this.$.svg,this.$.root,this._zoom)&&(this._zoomed=
!0)},_resetState:function(){this._nodeGroupIndex={};this._annotationGroupIndex={};this._edgeGroupIndex={};this._updateLabels(!1);d3.select(this.$.svg).select("#root").selectAll("*").remove();d3.select(this.$.svg).select("defs #linearGradients").selectAll("*").remove()},_build:function(a){this.templateIndex=a.hierarchy.getTemplateIndex();tf.graph.util.time("tf-graph-scene (layout):",function(){tf.graph.layout.layoutScene(a.root,this)}.bind(this));tf.graph.util.time("tf-graph-scene (build scene):",
function(){tf.graph.scene.buildGroup(d3.select(this.$.root),a.root,this);tf.graph.scene.addGraphClickListener(this.$.svg,this);tf.graph.scene.node.traceInputs(a)}.bind(this));setTimeout(function(){this._updateHealthPills(this.nodeNamesToHealthPills,this.healthPillStepIndex);this.minimap.update()}.bind(this),tf.graph.layout.PARAMS.animation.duration)},ready:function(){this._zoom=d3.zoom().on("end",function(){this._zoomStartCoords&&(Math.sqrt(Math.pow(this._zoomStartCoords.x-this._zoomTransform.x,2)+
Math.pow(this._zoomStartCoords.y-this._zoomTransform.y,2))<this._maxZoomDistanceForClick?this._fireEnableClick():setTimeout(this._fireEnableClick.bind(this),50));this._zoomStartCoords=null}.bind(this)).on("zoom",function(){this._zoomTransform=d3.event.transform;this._zoomStartCoords||(this._zoomStartCoords=this._zoomTransform,this.fire("disable-click"));this._zoomed=!0;d3.select(this.$.root).attr("transform",d3.event.transform);this.minimap.zoom(d3.event.transform)}.bind(this));d3.select(this.$.svg).call(this._zoom).on("dblclick.zoom",
null);d3.select(window).on("resize",function(){this.minimap.zoom()}.bind(this));this.minimap=this.$.minimap.init(this.$.svg,this.$.root,this._zoom,tf.graph.layout.PARAMS.minimap.size,tf.graph.layout.PARAMS.subscene.meta.labelHeight)},attached:function(){this.set("_isAttached",!0)},detached:function(){this.set("_isAttached",!1)},_renderHierarchyChanged:function(a){this._hasRenderHierarchyBeenFitOnce=!1;this._resetState();this._build(a)},_animateAndFit:function(a){!this._hasRenderHierarchyBeenFitOnce&&
a&&setTimeout(this.fit.bind(this),tf.graph.layout.PARAMS.animation.duration)},_updateLabels:function(a){var b=this.getElementsByClassName("title")[0],c=b.style,e=this.getElementsByClassName("auxTitle")[0],f=e.style,g=this.getElementsByClassName("functionLibraryTitle")[0].style,h=d3.select("."+tf.graph.scene.Class.Scene.GROUP+"\x3e."+tf.graph.scene.Class.Scene.CORE).node();if(a&&h&&this.progress&&100===this.progress.value){a=d3.select("."+tf.graph.scene.Class.Scene.GROUP+"\x3e."+tf.graph.scene.Class.Scene.INEXTRACT).node()||
d3.select("."+tf.graph.scene.Class.Scene.GROUP+"\x3e."+tf.graph.scene.Class.Scene.OUTEXTRACT).node();var l=h.getCTM().e;h=a?a.getCTM().e:null;c.display="inline";c.left=l+"px";null!==h&&h!==l?(f.display="inline",h=Math.max(l+b.getBoundingClientRect().width,h),f.left=h+"px"):f.display="none";b=(b=d3.select("."+tf.graph.scene.Class.Scene.GROUP+"\x3e."+tf.graph.scene.Class.Scene.FUNCTION_LIBRARY).node())?b.getCTM().e:null;null!==b&&b!==h?(g.display="inline",b=Math.max(h+e.getBoundingClientRect().width,
b),g.left=b+"px"):g.display="none"}else c.display="none",f.display="none",g.display="none"},_colorByChanged:function(){var a=this;null!=this.renderHierarchy&&(_.each(this._nodeGroupIndex,function(b,c){a._updateNodeState(c)}),this.minimap.update())},fit:function(){this._hasRenderHierarchyBeenFitOnce=!0;tf.graph.scene.fit(this.$.svg,this.$.root,this._zoom,function(){this._zoomed=!1}.bind(this))},isNodeSelected:function(a){return a===this.selectedNode},isNodeHighlighted:function(a){return a===this.highlightedNode},
addAnnotationGroup:function(a,b,c){a=a.node.name;this._annotationGroupIndex[a]=this._annotationGroupIndex[a]||{};this._annotationGroupIndex[a][b.node.name]=c},getAnnotationGroupsIndex:function(a){return this._annotationGroupIndex[a]},removeAnnotationGroup:function(a,b){delete this._annotationGroupIndex[a.node.name][b.node.name]},addNodeGroup:function(a,b){this._nodeGroupIndex[a]=b},getNodeGroup:function(a){return this._nodeGroupIndex[a]},removeNodeGroup:function(a){delete this._nodeGroupIndex[a]},
addEdgeGroup:function(a,b){this._edgeGroupIndex[a]=b},getEdgeGroup:function(a){return this._edgeGroupIndex[a]},_updateHealthPills:function(a,b){tf.graph.scene.addHealthPills(this.$.svg,a,b)},_updateNodeState:function(a){var b=this,c=this.getNode(a),e=this.getNodeGroup(a);e&&tf.graph.scene.node.stylize(e,c,this);c.node.type===tf.graph.NodeType.META&&c.node.associatedFunction&&!c.isLibraryFunction&&(e=d3.select("."+tf.graph.scene.Class.Scene.GROUP+"\x3e."+tf.graph.scene.Class.Scene.FUNCTION_LIBRARY+
' g[data-name\x3d"'+(tf.graph.FUNCTION_LIBRARY_NODE_PREFIX+c.node.associatedFunction)+'"]'),tf.graph.scene.node.stylize(e,c,this));_.each(this.getAnnotationGroupsIndex(a),function(f){tf.graph.scene.node.stylize(f,c,b,tf.graph.scene.Class.Annotation.NODE)})},_selectedNodeChanged:function(a,b){var c=this;if(a!==b&&(b&&this._updateNodeState(b),tf.graph.scene.node.traceInputs(this.renderHierarchy),a)){this.minimap.update();b=this.renderHierarchy.hierarchy.node(a);for(var e=[];null!=b.parentNode&&b.parentNode.name!=
tf.graph.ROOT_NAME;)b=b.parentNode,e.push(b.name);var f;_.forEachRight(e,function(g){c.renderHierarchy.buildSubhierarchy(g);g=c.renderHierarchy.getRenderNodeByName(g);g.node.isGroupNode&&!g.expanded&&(g.expanded=!0,f||(f=g))});f&&(this.setNodeExpanded(f),this._zoomed=!0);a&&this._updateNodeState(a);setTimeout(function(){c.panToNode(a)},tf.graph.layout.PARAMS.animation.duration)}},_highlightedNodeChanged:function(a,b){a!==b&&(a&&this._updateNodeState(a),b&&this._updateNodeState(b))},_onZoomChanged:function(){this._updateLabels(!this._zoomed)},
_fireEnableClick:function(){this.fire("enable-click")}});
</script>
</dom-module>


<dom-module id="tf-graph">
<template>
<style>
.container {
  width: 100%;
  height: 100%;
  background: white;
  box-shadow: 0 1px 5px rgba(0,0,0,0.2);
}

.vertical {
  width:100%;
  height:100%;
  @apply --layout-vertical;
}

.auto {
  @apply --layout-flex-auto;
  @apply --layout-vertical;
}

h2 {
  text-align: center;
}

paper-button {
  text-transform: none;
}
</style>
<div class="container">
  <div class="vertical">
    <template is="dom-if" if="[[title]]">
      <h2>[[title]]</h2>
    </template>
    <tf-graph-scene id="scene" class="auto" render-hierarchy="[[renderHierarchy]]" highlighted-node="[[_getVisible(highlightedNode)]]" selected-node="{{selectedNode}}" selected-edge="{{selectedEdge}}" color-by="[[colorBy]]" progress="[[progress]]" node-context-menu-items="[[nodeContextMenuItems]]" node-names-to-health-pills="[[nodeNamesToHealthPills]]" health-pill-step-index="{{healthPillStepIndex}}" handle-edge-selected="[[handleEdgeSelected]]"></tf-graph-scene>
  </div>
</div>
</template>
</dom-module>

<script>//~~WEBPATH~~/tf-graph/tf-graph.html.js
Polymer({is:"tf-graph",properties:{graphHierarchy:{type:Object,notify:!0,observer:"_graphChanged"},basicGraph:Object,stats:Object,devicesForStats:Object,hierarchyParams:Object,progress:{type:Object,notify:!0},title:String,selectedNode:{type:String,notify:!0},selectedEdge:{type:Object,notify:!0},_lastSelectedEdgeGroup:Object,highlightedNode:{type:String,notify:!0},colorBy:String,colorByParams:{type:Object,notify:!0,readOnly:!0},renderHierarchy:{type:Object,readOnly:!0,notify:!0},nodeContextMenuItems:Array,
_renderDepth:{type:Number,value:1},_allowGraphSelect:{type:Boolean,value:!0},nodeNamesToHealthPills:Object,healthPillStepIndex:Number,edgeWidthFunction:{type:Object,value:""},handleNodeSelected:{type:Object,value:""},edgeLabelFunction:{type:Object,value:""},handleEdgeSelected:{type:Object,value:""}},observers:["_statsChanged(stats, devicesForStats)","_buildNewRenderHierarchy(graphHierarchy, edgeWidthFunction, handleNodeSelected, edgeLabelFunction, handleEdgeSelected)","_selectedNodeChanged(selectedNode)",
"_selectedEdgeChanged(selectedEdge)"],panToNode:function(a){this.$$("tf-graph-scene").panToNode(a)},_buildNewRenderHierarchy:function(a){this._buildRenderHierarchy(a)},_statsChanged:function(a,b){this.graphHierarchy&&(a&&b&&(tf.graph.joinStatsInfoWithGraph(this.basicGraph,a,b),tf.graph.hierarchy.joinAndAggregateStats(this.graphHierarchy)),this._buildRenderHierarchy(this.graphHierarchy))},_buildRenderHierarchy:function(a){tf.graph.util.time("new tf.graph.render.Hierarchy",function(){function b(e){return{minValue:e.domain()[0],
maxValue:e.domain()[1],startColor:e.range()[0],endColor:e.range()[1]}}if(a.root.type===tf.graph.NodeType.META){var c=new tf.graph.render.RenderGraphInfo(a,!!this.stats);c.edgeLabelFunction=this.edgeLabelFunction;c.edgeWidthFunction=this.edgeWidthFunction;this._setColorByParams({compute_time:b(c.computeTimeScale),memory:b(c.memoryUsageScale),device:_.map(c.deviceColorMap.domain(),function(e){return{device:e,color:c.deviceColorMap(e)}}),xla_cluster:_.map(c.xlaClusterColorMap.domain(),function(e){return{xla_cluster:e,
color:c.xlaClusterColorMap(e)}})});this._setRenderHierarchy(c);this.async(function(){this.fire("rendered")})}}.bind(this))},_getVisible:function(a){return a?this.renderHierarchy.getNearestVisibleAncestor(a):a},listeners:{"graph-select":"_graphSelected","disable-click":"_disableClick","enable-click":"_enableClick","node-toggle-expand":"_nodeToggleExpand","node-select":"_nodeSelected","node-highlight":"_nodeHighlighted","node-unhighlight":"_nodeUnhighlighted","node-toggle-extract":"_nodeToggleExtract",
"node-toggle-seriesgroup":"_nodeToggleSeriesGroup","edge-select":"_edgeSelected","annotation-select":"_nodeSelected","annotation-highlight":"_nodeHighlighted","annotation-unhighlight":"_nodeUnhighlighted"},_graphChanged:function(){this.fire("graph-select")},_graphSelected:function(){this._allowGraphSelect&&(this.set("selectedNode",null),this.set("selectedEdge",null));this._allowGraphSelect=!0},_disableClick:function(){this._allowGraphSelect=!1},_enableClick:function(){this._allowGraphSelect=!0},_selectedNodeChanged:function(a){this.handleNodeSelected&&
this.handleNodeSelected(a)},_selectedEdgeChanged:function(a){this._deselectPreviousEdge();a&&(this._lastSelectedEdgeGroup.classed(tf.graph.scene.Class.Edge.SELECTED,!0),this._updateMarkerOfSelectedEdge(a));this.handleEdgeSelected&&this.handleEdgeSelected(a)},_nodeSelected:function(a){this._allowGraphSelect&&this.set("selectedNode",a.detail.name);this._allowGraphSelect=!0},_edgeSelected:function(a){this._allowGraphSelect&&(this.set("_lastSelectedEdgeGroup",a.detail.edgeGroup),this.set("selectedEdge",
a.detail.edgeData));this._allowGraphSelect=!0},_nodeHighlighted:function(a){this.set("highlightedNode",a.detail.name)},_nodeUnhighlighted:function(){this.set("highlightedNode",null)},_nodeToggleExpand:function(a){this._nodeSelected(a);a=a.detail.name;var b=this.renderHierarchy.getRenderNodeByName(a);b.node.type!==tf.graph.NodeType.OP&&(this.renderHierarchy.buildSubhierarchy(a),b.expanded=!b.expanded,this.async(function(){this.querySelector("#scene").setNodeExpanded(b)},75))},_nodeToggleExtract:function(a){a=
this.renderHierarchy.getRenderNodeByName(a.detail.name);a.node.include=a.node.include==tf.graph.InclusionType.INCLUDE?tf.graph.InclusionType.EXCLUDE:a.node.include==tf.graph.InclusionType.EXCLUDE?tf.graph.InclusionType.INCLUDE:this.renderHierarchy.isNodeAuxiliary(a)?tf.graph.InclusionType.INCLUDE:tf.graph.InclusionType.EXCLUDE;this._buildRenderHierarchy(this.graphHierarchy)},_nodeToggleSeriesGroup:function(a){tf.graph.toggleNodeSeriesGroup(this.hierarchyParams.seriesMap,a.detail.name);this.set("progress",
{value:0,msg:""});tf.graph.hierarchy.build(this.basicGraph,this.hierarchyParams,tf.graph.util.getSubtaskTracker(tf.graph.util.getTracker(this),100,"Namespace hierarchy")).then(function(b){this.set("graphHierarchy",b);this._buildRenderHierarchy(this.graphHierarchy)}.bind(this))},_deselectPreviousEdge:function(){var a=this;d3.select("."+tf.graph.scene.Class.Edge.SELECTED).classed(tf.graph.scene.Class.Edge.SELECTED,!1).each(function(b){if(b.label){var c=d3.select(a).selectAll("path.edgeline");b.label.startMarkerId&&
c.style("marker-start","url(#"+b.label.startMarkerId+")");b.label.endMarkerId&&c.style("marker-end","url(#"+b.label.endMarkerId+")")}})},_updateMarkerOfSelectedEdge:function(a){if(a.label){var b=a.label.startMarkerId||a.label.endMarkerId;if(b){var c=b.replace("dataflow-","selected-"),e=this.$$("#"+c);e||(b=this.$$("tf-graph-scene").querySelector("#"+b),e=b.cloneNode(!0),e.setAttribute("id",c),e.classList.add("selected-arrowhead"),b.parentNode.appendChild(e));a=a.label.startMarkerId?"marker-start":
"marker-end";this._lastSelectedEdgeGroup.selectAll("path.edgeline").style(a,"url(#"+c+")")}}},not:function(a){return!a}});
</script>




<dom-module id="tf-graph-loader">
</dom-module>

<script>//~~WEBPATH~~/tf-graph-loader/tf-graph-loader.js
(function(a){(function(b){(function(){Polymer({is:"tf-graph-loader",properties:{datasets:Array,selectedData:{type:Number,value:0},selectedFile:Object,compatibilityProvider:{type:Object,value:function(){return new a.graph.op.TpuCompatibilityProvider}},overridingHierarchyParams:{type:Object,value:function(){return{}}},progress:{type:Object,notify:!0},outGraphHierarchy:{type:Object,readOnly:!0,notify:!0},outGraph:{type:Object,readOnly:!0,notify:!0},outHierarchyParams:{type:Object,readOnly:!0,notify:!0}},
observers:["_loadData(datasets, selectedData, overridingHierarchyParams, compatibilityProvider)","_loadFile(selectedFile, overridingHierarchyParams, compatibilityProvider)"],_loadData:function(){var c=this;this.debounce("load",function(){var e=c.datasets[c.selectedData];e&&c._parseAndConstructHierarchicalGraph(e.path)})},_parseAndConstructHierarchicalGraph:function(c,e){var f=this,g=this.overridingHierarchyParams,h=this.compatibilityProvider;this.progress={value:0,msg:""};var l=a.graph.util.getTracker(this),
n=Object.assign({},a.graph.hierarchy.DefaultHierarchyParams,g);a.graph.loader.fetchAndConstructHierarchicalGraph(l,c,e,h,n).then(function(m){var q=m.graph;m=m.graphHierarchy;f._setOutHierarchyParams(n);f._setOutGraph(q);f._setOutGraphHierarchy(m)})},_loadFile:function(c){if(c){c=c.target;var e=c.files[0];e&&(c.value="",this._parseAndConstructHierarchicalGraph(null,e))}}})})(b.loader||(b.loader={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>






<script>//~~WEBPATH~~/tf-debugger-dashboard/health-pills.js
var pl;
(function(a){function b(e,f){if(null==e)throw Error("Missing refValue for condition ("+f+").");}var c={INF_OR_NAN:{description:"Contains +/-\u221e or NaN",predicate:function(e){return 0<e[2]||0<e[3]||0<e[7]}},INF:{description:"Contains +/-\u221e",predicate:function(e){return 0<e[3]||0<e[7]}},NAN:{description:"Contains NaN",predicate:function(e){return 0<e[2]}},MAX_GT:{description:"Max \x3e",predicate:function(e,f){b(f,"MAX_GT");return e[9]>f}},MAX_LT:{description:"Max \x3c",predicate:function(e,f){b(f,
"MAX_LT");return e[9]<f}},MIN_GT:{description:"Min \x3e",predicate:function(e,f){b(f,"MIN_GT");return e[8]>f}},MIN_LT:{description:"Min \x3c",predicate:function(e,f){b(f,"MIN_LT");return e[8]<f}},MEAN_GT:{description:"Mean \x3e",predicate:function(e,f){b(f,"MEAN_GT");return e[10]>f}},MEAN_LT:{description:"Mean \x3c",predicate:function(e,f){b(f,"MEAN_LT");return e[10]<f}},RANGE_GT:{description:"Max - Min \x3e",predicate:function(e,f){b(f,"RANGE_GT");return e[9]-e[8]>f}},RANGE_LT:{description:"Max - Min \x3c",
predicate:function(e,f){b(f,"RANGE_LT");return e[9]-e[8]<f}},STDDEV_GT:{description:"Standard deviation \x3e",predicate:function(e,f){b(f,"STDDEV_GT");return Math.sqrt(e[11])>f}},STDDEV_LT:{description:"Standard deviation \x3c",predicate:function(e,f){b(f,"STDDEV_LT");return Math.sqrt(e[11])<f}}};a.tensorConditionDescription2Key=function(e){for(var f in c)if(c.hasOwnProperty(f)&&c[f].description===e)return f;return null};a.checkHealthPillAgainstTensorConditionKey=function(e,f,g){if(null==f||0==f.length||
1!==f[0])return!1;e=c[e].predicate;return e(f,g)}})(pl||(pl={}));
</script>







<dom-module id="tf-debugger-continue-dialog">
  <template>
    <paper-button raised class="continue-button" on-click="_continueButtonCallback">
      <span>[[_continueButtonText]]</span>
    </paper-button>
    <paper-dialog with-backdrop id="continueDialog">
      <h2>Continue...</h2>
      <div class="continue-to-type">
        <div class="continue-to-type-name">
          Over Session Runs:
        </div>
        <paper-input id="continueNum" class="input-box" label="Number of Session Runs (including the current one):" always-float-label type="number" min="1" step="1" value="{{continueNum}}"></paper-input>
        <paper-icon-button class="go-button" icon="arrow-forward" title="Session Runs Go" on-tap="_sessionRunGoButtonCallback">
        </paper-icon-button>
      </div>
      <div class="continue-to-type">
        <div class="continue-to-type-name">
          Till Condition Met by Watched Tensor
        </div>
        <paper-dropdown-menu id="tensorConditionDropdown" class="input-box" no-label-float="true" label="Tensor Condition" selected-item-label="{{_selectedTensorCondition}}">
          
          <paper-menu id="tensorConditionMenu" class="dropdown-content" slot="dropdown-content">
            <paper-item no-label-float="true">Contains +/-â or NaN</paper-item>
            <paper-item no-label-float="true">Contains +/-â</paper-item>
            <paper-item no-label-float="true">Contains NaN</paper-item>
            <paper-item no-label-float="true">Max &gt;</paper-item>
            <paper-item no-label-float="true">Max &lt;</paper-item>
            <paper-item no-label-float="true">Min &gt;</paper-item>
            <paper-item no-label-float="true">Min &lt;</paper-item>
            <paper-item no-label-float="true">Max - Min &gt;</paper-item>
            <paper-item no-label-float="true">Max - Min &lt;</paper-item>
            <paper-item no-label-float="true">Mean &gt;</paper-item>
            <paper-item no-label-float="true">Mean &lt;</paper-item>
            <paper-item no-label-float="true">Standard deviation &gt;</paper-item>
            <paper-item no-label-float="true">Standard deviation &lt;</paper-item>
          </paper-menu>
        </paper-dropdown-menu>
        <paper-icon-button class="go-button" icon="arrow-forward" title="Tensor Condition Go" on-tap="_tensorContinueGoButtonCallback">
        </paper-icon-button>
        <paper-input id="ref-value" class="input-box" label="Reference value to compare to" type="number" value="{{_tensorConditionRefValue}}" hidden="[[_isRefValueInputHidden]]">
        </paper-input>
      </div>
    </paper-dialog>
    <style include="dashboard-style"></style>
    <style>
      :host .continue-to-type-name {
        font-weight: bold;
      }
      :host paper-dialog {
        width: 36vw;
      }
      :host .input-box {
        display: inline-block;
        position: relative;
        width: 80%;
        font-size: 110%;
      }
      :host .go-button {
        position: relative;
        width: 15%;
        display: inline-block;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-debugger-continue-dialog.html.js
Polymer({is:"tf-debugger-continue-dialog",properties:{continueNum:{type:Number,value:5},sessionRunGo:Function,tensorConditionGo:Function,forceContinuationStop:Function,_continueButtonText:{type:String,value:"Continue..."},_continueButtonContinueText:{type:String,value:"Continue...",readonly:!0},_continueButtonStopText:{type:String,value:"Stop Continuation",readonly:!0},_selectedTensorCondition:String,_tensorConditionRefValue:{type:Number,value:0,notify:!0},_isRefValueInputHidden:{type:Boolean,value:!0,
notify:!0}},observers:["_onSelectedTensorConditionChanged(_selectedTensorCondition)"],notifyContinuationStop:function(){this.updateContinueButtonText(!1)},_openDialog:function(){this.$.continueDialog.open()},_closeDialog:function(){this.$.continueDialog.close()},_continueButtonCallback:function(){this._continueButtonText===this._continueButtonStopText?this.forceContinuationStop():this._openDialog()},updateContinueButtonText:function(a){this.set("_continueButtonText",a?this._continueButtonStopText:
this._continueButtonContinueText)},_sessionRunGoButtonCallback:function(){0<this.continueNum?(this.sessionRunGo(this.continueNum),this.updateContinueButtonText(!0),this._closeDialog()):this.set("continueNum",1)},_tensorContinueGoButtonCallback:function(){if(null!=this._selectedTensorCondition){var a=pl.tensorConditionDescription2Key(this._selectedTensorCondition);null==a&&console.error("Invalid Tensor Condition name:"+this._selectedTensorCondition);var b=Number(this._tensorConditionRefValue);Number.isFinite(b)?
(this.tensorConditionGo(a,b),this.updateContinueButtonText(!0),this._closeDialog()):this.set("_tensorConditionRefValue",0)}},_onSelectedTensorConditionChanged:function(a){a=pl.tensorConditionDescription2Key(a);this.set("_isRefValueInputHidden",-1!==["INF_OR_NAN","INF","NAN"].indexOf(a))}});
</script>
</dom-module>





<dom-module id="tf-debugger-initial-dialog">
  <template>
    
    <template is="dom-if" if="[[_open]]">
      <div id="dashboard-backdrop"></div>
    </template>
    <paper-dialog id="dialog" modal opened="{{_open}}" with-backdrop="[[_useNativeBackdrop]]">
      <h2 id="dialog-title">[[_title]]</h2>
      <template is="dom-if" if="[[_hasCustomMessage]]">
        <div class="custom-message">[[_customMessage]]</div>
      </template>
      <template is="dom-if" if="[[!_hasCustomMessage]]">
        <div class="code-example">
          <div class="code-example-section">
            <div class="code-example-section-title">
              <a href="https://www.tensorflow.org/api_docs/python/tf/Session" target="_blank">tf.Session</a>:
            </div>
            <pre class="code-snippet">import tensorflow as tf
from tensorflow.python import debug as tf_debug

sess = tf.Session()
sess = tf_debug.TensorBoardDebugWrapperSession(sess, "[[_host]]:[[_port]]")
sess.run(my_fetches)
          </pre>
          </div>
          <div class="code-example-section">
            <div class="code-example-section-title">
              <a href="https://www.tensorflow.org/programmers_guide/estimators" target="_blank">Estimator</a>
              |
              <a href="https://www.tensorflow.org/api_docs/python/tf/train/MonitoredSession" target="_blank">MonitoredSession</a>:
            </div>
            <pre class="code-snippet">import tensorflow as tf
from tensorflow.python import debug as tf_debug

hook = tf_debug.TensorBoardDebugHook("[[_host]]:[[_port]]")
my_estimator.fit(x=x_data, y=y_data, steps=1000, monitors=[hook])
            </pre>
          </div>
          <div class="code-example-section">
            <div class="code-example-section-title">
              <a href="https://keras.io/models/model/" target="_blank">Keras Model</a>:
            </div>
            <pre class="code-snippet">import tensorflow as tf
from tensorflow.python import debug as tf_debug
import keras

keras.backend.set_session(
    tf_debug.TensorBoardDebugWrapperSession(tf.Session(), "[[_host]]:[[_port]]"))
# Define your keras model, called "model".
model.fit(...)
            </pre>
          </div>
        </div>
      </template>
    </paper-dialog>
  </template>
  <style>
    /** We rely on a separate `_hidden` property instead of directly making use
        of the `_open` attribute because this CSS specification may strangely
        affect other elements throughout TensorBoard. See #899. */
    :host[_hidden] {
      display: none;
    }

    :host, #dashboard-backdrop {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
    }

    #dashboard-backdrop {
      background: rgba(0, 0, 0, 0.6);
    }

    .code-example {
      margin: 10px;
      font-family: monospace;
    }
    .code-example-section {
      padding-bottom: 15px;
    }
    .code-example-section-title {
      font-weight: bold;
    }
    .code-snippet {
      padding-left: 1em;
    }

    #dialog-title {
      padding-bottom: 15px;
    }

    .custom-message {
      margin-top: 0;
      margin-bottom: 15px;
    }
  </style>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-debugger-initial-dialog.html.js
Polymer({is:"tf-debugger-initial-dialog",properties:{_title:{type:String,value:null},_customMessage:{type:String,value:null},_hasCustomMessage:{type:Boolean,computed:"_computeHasCustomMessage(_customMessage)"},_host:{type:String,value:null},_port:{type:String,value:null},_open:{type:Boolean},_hidden:{type:Boolean,computed:"_computeHidden(_open)",reflectToAttribute:!0},_useNativeBackdrop:{type:Boolean,value:!1,readOnly:!0}},openDialog:function(a,b){this.set("_title","Debugger is waiting for Session.run() connections...");
this.set("_customMessage",null);this.$.dialog.open();null!=a&&null!=b&&(this.set("_host",a),this.set("_port",b))},closeDialog:function(){this.$.dialog.close()},openDisabledDialog:function(){this.set("_title","Debugger is not enabled in this TensorBoard instance");this.set("_customMessage","To enable the debugger in TensorBoard, use the flag: --debugger_port \x3cport_number\x3e");this.$.dialog.open()},_computeHidden:function(a){return!a},_computeHasCustomMessage:function(a){return!_.isEmpty(a)}});
</script>
</dom-module>





<dom-module id="tf-debugger-resizer">
  <template>
    <div class="bars">
      <div class="bars-rotator">
        <span class="bars-text">| |</span>
      </div>
    </div>
  </template>
  <style>
    :host[_resizer-identifier] {
      position: absolute;
      background: #ccc;
      user-select: none;
    }

    :host[is-horizontal] {
      cursor: row-resize;
      height: 10px;
      left: 0;
      right: 0;
    }

    :host[_is-vertical] {
      cursor: col-resize;
      right: -15px;
      top: 0;
      bottom: 0;
      width: 10px;
    }

    .bars {
      width: 80%;
      text-align: center;
      position: absolute;
      top: 50%;
      left: 50%;
      font-size: 5px;
      transform: translate(-50%, -50%);
    }

    /** This block prevents the bars rotator from having a height that is 
        the entire viewport, thus occluding it and giving it an undesired cursor
        value. */
    .bars-rotator {
      display: inline-block;
    }

    :host[is-horizontal] .bars-rotator {
      transform: rotate(90deg);
    }

    .bars-text {
      transform: scaleY(15);
      white-space: nowrap;
      display: block;
      font-weight: 400;
    }
  </style>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-debugger-resizer.html.js
Polymer({is:"tf-debugger-resizer",properties:{currentLength:{type:Number,notify:!0},minLength:Number,maxLength:Number,isHorizontal:{type:Boolean,value:!1,reflectToAttribute:!0},_resizerIdentifier:{type:Boolean,value:!0,readOnly:!0,reflectToAttribute:!0},_isVertical:{type:Boolean,computed:"_computeIsVertical(isHorizontal)",reflectToAttribute:!0,readOnly:!0},_dragStartPosition:Number,_dragStartLength:Number,_previousMouseMoveCallback:Object,_previousMouseUpCallback:Object},listeners:{mousedown:"_handleMouseDown"},
_handleMouseDown:function(a){var b=this;a.preventDefault();this._endDrag();this._previousMouseMoveCallback=function(c){c.preventDefault();c=b._dragStartLength+(b._getPositionRelativeToViewport(c)-b._dragStartPosition);c=Math.max(c,b.minLength);c=Math.min(c,b.maxLength);b.set("currentLength",c)};this._previousMouseUpCallback=function(c){c.preventDefault();b._endDrag()};this.set("_dragStartPosition",this._getPositionRelativeToViewport(a));this.set("_dragStartLength",this.currentLength);window.addEventListener("mouseup",
this._previousMouseUpCallback,!1);window.addEventListener("mousemove",this._previousMouseMoveCallback,!1)},_getPositionRelativeToViewport:function(a){return this.isHorizontal?a.clientY:a.clientX},_endDrag:function(){window.removeEventListener("mousemove",this._previousMouseMoveCallback,!1);this._previousMouseMoveCallback=null;window.removeEventListener("mouseup",this._previousMouseUpCallback,!1);this._previousMouseUpCallback=null},_computeIsVertical:function(a){return!a}});
</script>
</dom-module>











<dom-module id="tf-op-selector">
  <template>
    <div>
      <paper-dropdown-menu id="filter-mode" no-label-float="true" label="Filter Mode" selected-item-label="{{_filterMode}}">
        <paper-menu class="dropdown-content" slot="dropdown-content">
          <paper-item no-label-float="true">Node Name</paper-item>
          <paper-item no-label-float="true">Op Type</paper-item>
        </paper-menu>
      </paper-dropdown-menu>
      <paper-input id="filter-input" label="Filter Regex" always-float-label value="{{_filterInput}}"></paper-input>
    </div>
    <paper-spinner-lite active class="spinner" id="loading-spinner" hidden="[[!_isLoading]]">
    </paper-spinner-lite>
    <div id="selector-hierarchy">
    </div>
    <style>
      :host .indented-level-container .content-container {
        margin: 0 0 0 20px;
      }

      :host .level-container iron-collapse {
        padding: 0 0 0 20px;
      }

      :host paper-checkbox {
        display: inline-block;
        width: 18px;
        height: 18px;
        margin: 0 8px 0 0;
      }

      :host .op-type {
        padding-right: 10px;
        color: #444;
      }

      :host .op-title-leaf {
        text-decoration: underline;
        cursor: pointer;
      }

      :host .op-title-leaf:hover {
        color: blue;
      }

      :host .partial-checkbox {
        background: #f57c00;
      }

      :host .node-expand-button {
        margin: 0 0 0 -13px;
      }

      :host .level-title-text {
        display: inline-block;
        font-weight: 800;
        margin: 0 0 0 -1px;
      }

      :host .op-description {
        font-weight: 300;
        margin: 0 0 0 27px;
        padding: 10px 0;
      }

      :host .spinner {
        width: 20px;
        height: 20px;
        vertical-align: middle;
      }

      :host #filter-mode {
        width: 150px;
        display: inline-block;
      }

      :host #filter-input {
        width: 250px;
        display: inline-block;
      }

      :host .highlighted {
        color: red;
      }
      :host .highlighted > .op-type {
        color: red;
      }

      #selector-hierarchy {
        width: 100%;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/selection-tree-node.js
(function(a){a.NODE_NAME_SEPARATOR="/";a.DEVICE_NAME_PATTERN=/^\/job:[A-Za-z0-9_]+\/replica:[0-9_]+\/task:[0-9]+\/device:[A-Za-z0-9_]+:[0-9]+/;var b;(function(f){f[f.EMPTY=0]="EMPTY";f[f.CHECKED=1]="CHECKED";f[f.PARTIAL=2]="PARTIAL"})(b=a.CheckboxState||(a.CheckboxState={}));a.splitNodeName=function(f){var g=[],h=f.match(a.DEVICE_NAME_PATTERN);null!=h&&(g.push(h[0]),"/"!==f[h[0].length]&&console.error('No slash ("/") after device name in node name:',f),f=f.slice(h[0].length+1));return g.concat(f.split(a.NODE_NAME_SEPARATOR))};
a.getCleanNodeName=function(f){var g=f,h=f.match(a.DEVICE_NAME_PATTERN);null!=h?(g.length>h[0].length&&"/"!=g[h[0].length]&&console.error('No slash ("/") after device name in node name:',f),g=g.slice(h[0].length+1)):"/"===g[0]&&(g=g.slice(1));g.indexOf(")")===g.length-1&&(g=g.slice(0,g.indexOf("/(")));return g};a.sortAndBaseExpandDebugWatches=function(f){f.sort(function(m,q){return m.node_name<q.node_name?-1:m.node_name>q.node_name?1:m.output_slot-q.output_slot});for(var g=0;g<f.length;++g){for(var h=
f[g].node_name+"/",l=!1,n=g+1;n<f.length;++n)if(0===f[n].node_name.indexOf(h)){l=!0;break}l&&(h=f[g].node_name.split("/"),f[g].node_name+="/("+h[h.length-1]+")")}};a.removeNodeNameBaseExpansion=function(f){return f.endsWith(")")?f.slice(0,f.lastIndexOf("/(")):f};a.assembleDeviceAndNodeNames=function(f){var g=[null,null];if(f[0].match(a.DEVICE_NAME_PATTERN)){var h=f[0];"/"===h[h.length-1]&&(h=h.slice(0,h.length-1));g[0]=h;g[1]=f.slice(1).join("/")}else g[1]=f.join("/");return g};var c;(function(f){f[f.NodeName=
0]="NodeName";f[f.OpType=1]="OpType"})(c=a.DebugWatchFilterMode||(a.DebugWatchFilterMode={}));a.filterDebugWatches=function(f,g,h){if(g===c.NodeName)return f.filter(function(l){return l.node_name.match(h)});if(g===c.OpType)return f.filter(function(l){return l.op_type.match(h)})};var e=function(){function f(g,h,l,n){var m=this;this.debugWatchChange=h;this.debugWatch=n;this.name=g;this.debugWatch=n;this.checkboxState=b.EMPTY;this.parent=l;this.children={};this.checkbox=document.createElement("paper-checkbox");
this.checkbox.addEventListener("change",function(){m._handleChange()},!1)}f.prototype._handleChange=function(){if(this.avoidPropagation)this.debugWatch&&this.debugWatchChange(this.debugWatch,this.isCheckboxChecked());else if(this.debugWatch)this.setCheckboxState(this.isCheckboxChecked()?b.CHECKED:b.EMPTY,!0),this.isCheckboxChecked()?this.setNodesAboveToChecked():this.setNodesAboveToEmpty(),this.debugWatchChange(this.debugWatch,this.isCheckboxChecked());else if(this.setCheckboxState(this.isCheckboxChecked()?
b.CHECKED:b.EMPTY,!0),this.isCheckboxChecked()){for(var g=_.values(this.children);g.length;){var h=g.pop();_.forEach(h.children,function(n){return g.push(n)});h.setCheckboxState(b.CHECKED,!0)}this.setNodesAboveToChecked()}else{for(var l=_.values(this.children);l.length;)h=l.pop(),_.forEach(h.children,function(n){return l.push(n)}),h.setCheckboxState(b.EMPTY,!0);this.setNodesAboveToEmpty()}};f.prototype.isLeaf=function(){return!!this.debugWatch};f.prototype.setToAllCheckedExternally=function(){this.setCheckboxState(b.CHECKED);
this._handleChange()};f.prototype.setCheckboxState=function(g,h){this.avoidPropagation=h;this.checkboxState=g;this.checkbox.classList.toggle("partial-checkbox",g===b.PARTIAL);g===b.CHECKED?this.checkbox.setAttribute("checked","checked"):this.checkbox.removeAttribute("checked");this.avoidPropagation=!1};f.prototype.isCheckboxChecked=function(){return this.checkbox.hasAttribute("checked")};f.prototype.setNodesAboveToChecked=function(){for(var g=this.parent,h=!1;g;)h?g.setCheckboxState(b.PARTIAL,!0):
(h=-1!==_.findIndex(_.values(g.children),function(l){return l.checkboxState!==b.CHECKED}),g.setCheckboxState(h?b.PARTIAL:b.CHECKED,!0)),g=g.parent};f.prototype.setNodesAboveToEmpty=function(){for(var g=this.parent,h=!1;g;)h?g.setCheckboxState(b.PARTIAL,!0):(h=-1!==_.findIndex(_.values(g.children),function(l){return l.checkboxState!==b.EMPTY}),g.setCheckboxState(h?b.PARTIAL:b.EMPTY,!0)),g=g.parent};f.prototype.setLevelDom=function(g){this.levelDom=g};return f}();a.SelectionTreeNode=e})(pl||(pl={}));
</script>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-op-selector.html.js
Polymer({is:"tf-op-selector",properties:{debugWatches:Array,debugWatchChange:Object,nodeClicked:Function,forceExpandAndCheckNodeName:{type:String,value:null},forceExpandNodeName:{type:String,value:null},_selectedDebugWatchMapping:{type:Object,value:function(){return{}}},_levelName2Container:{type:Object,value:null},_levelName2Node:{type:Object,value:null},_watchHierarchy:{type:Object,computed:"_computeWatchHierarchy(debugWatches, debugWatchChange, _filterMode, _filterInput)"},_filterMode:{type:String,
value:"Node Name",notify:!0},_filterInput:{type:String,value:"",notify:!0},_isLoading:{type:Boolean,value:!1},_highlightedLevelDom:{type:Object,value:null}},observers:["_renderHierarchyWithTimeout(_watchHierarchy, debugWatchChange)","_handleForceNodeExpandAndCheck(forceExpandAndCheckNodeName)","_handleForceNodeExpand(forceExpandNodeName)"],_computeWatchHierarchy:function(a,b,c,e){e=e.trim();var f=a;null!=c&&0<e.length&&(f=pl.filterDebugWatches(a,pl.DebugWatchFilterMode[c.replace(/\s/g,"")],new RegExp(e)));
var g=new pl.SelectionTreeNode("",b);g.isRoot=!0;_.forEach(f,function(h){var l=pl.splitNodeName(h.device_name+"/"+h.node_name),n=g;_.forEach(l,function(m,q){q===l.length-1?(q=new pl.SelectionTreeNode(m,b,n,h),n.children[m]=q):(n.children[m]||(n.children[m]=new pl.SelectionTreeNode(m,b,n)),n=n.children[m])})});return g},_clearSelectorHierarchy:function(){for(var a=this.$$("#selector-hierarchy");a.firstChild;)a.removeChild(a.firstChild)},_renderHierarchyWithTimeout:function(a,b,c,e){var f=this;this._isLoading||
(this.set("_isLoading",!0),this._clearSelectorHierarchy(),setTimeout(function(){f._renderHierarchy(a,b,c,e)},10))},_renderHierarchy:function(a,b){this.set("_levelName2Container",{});this.set("_levelName2Node",{});a=this._renderLevel(null,null,a,b);Polymer.dom(this.$$("#selector-hierarchy")).appendChild(a);this.set("_isLoading",!1)},_renderLevel:function(a,b,c,e){function f(w){Polymer.dom(n).appendChild(w)}var g=this,h=document.createElement("div");null!=a&&h.setAttribute("level-name",a);var l=null==
b?a:b+"/"+a;Polymer.dom(h).classList.add("level-container");var n=document.createElement("iron-collapse");if(a){this._levelName2Container[l]=n;n.removeAttribute("opened");Polymer.dom(h).classList.add("indented-level-container");b=document.createElement("div");Polymer.dom(b).classList.add("level-title");var m=document.createElement("paper-icon-button");Polymer.dom(m).classList.add("node-expand-button");var q=function(){m.setAttribute("icon",n.hasAttribute("opened")?"expand-less":"expand-more")};m.addEventListener("click",
function(){n.hasAttribute("opened")?n.removeAttribute("opened"):n.setAttribute("opened",!0);q()},!1);q();Polymer.dom(b).appendChild(m);Polymer.dom(b).appendChild(c.checkbox);c.setLevelDom(b);var r=document.createElement("span");Polymer.dom(r).classList.add("level-title-text");r.textContent=a;Polymer.dom(b).appendChild(r);Polymer.dom(h).appendChild(b);(a.match(pl.DEVICE_NAME_PATTERN)||1===Object.keys(c.children).length)&&n.setAttribute("opened",!0)}else n.setAttribute("opened",!0);var v=[],u=[];Polymer.dom(n).classList.add("content-container");
_.forEach(c.children,function(w,z){var A=w.debugWatch,E=l;null==l&&(E="");E+="/"+z;g._levelName2Node[E]=w;null!=g._selectedDebugWatchMapping[E]&&(w.setCheckboxState(pl.CheckboxState.CHECKED),w.setNodesAboveToChecked());if(A){E=document.createElement("div");Polymer.dom(E).classList.add("op-description");w.checkbox.addEventListener("change",function(D){g._handleLeafNodeSelected(e,A,D.target.checked)},!1);Polymer.dom(E).appendChild(w.checkbox);w.setLevelDom(E);var C=document.createElement("span");C.textContent=
"["+A.op_type+"]";C.setAttribute("class","op-type");Polymer.dom(E).appendChild(C);C=document.createElement("span");C.textContent=z;C.setAttribute("class","op-title-leaf");C.addEventListener("click",function(){var D=g._getDeviceAndNodeNames(z,h);g.nodeClicked(D[0],D[1])},!1);Polymer.dom(E).appendChild(C);u.push(E)}else w.checkbox.addEventListener("change",function(D){g._handleMetaNodeChange(w,e,D.target.checked)}),v.push(g._renderLevel(z,l,w,e))});_.forEach(u,f);_.forEach(v,f);Polymer.dom(h).appendChild(n);
return h},_getLeafDebugWatches:function(a,b){var c=this;a.debugWatch?b.push(a.debugWatch):_.forEach(a.children,function(e){c._getLeafDebugWatches(e,b)})},_getDeviceAndNodeNames:function(a,b){for(a=[a];;){var c=b.getAttribute("level-name");if(null==c)break;else a.push(c);b=Polymer.dom(b).parentNode.parentNode}a.reverse();return pl.assembleDeviceAndNodeNames(a)},_handleMetaNodeChange:function(a,b,c){var e=this,f=[];this._getLeafDebugWatches(a,f);_.forEach(f,function(g){e._handleLeafNodeSelected(b,g,
c)})},_handleLeafNodeSelected:function(a,b,c){var e=b.device_name+"/"+b.node_name;c?this._selectedDebugWatchMapping[e]=b:delete this._selectedDebugWatchMapping[e];a(b,c)},_handleForceNode:function(a,b){var c=this;this.set("_filterInput","");setTimeout(function(){if(null!=a&&null!=c._levelName2Container)for(var e=pl.splitNodeName(a),f=1;f<=e.length;++f){var g=e.slice(0,f).join("/"),h=c._levelName2Node[g];null!=h&&null!=h.levelDom&&h.levelDom.scrollIntoView({block:"center",behaviour:"smooth"});f<e.length?
null!=c._levelName2Container[g]&&c._levelName2Container[g].setAttribute("opened",!0):(h.debugWatch||c._handleMetaNodeChange(h,h.debugWatchChange,!0),b&&(h.setToAllCheckedExternally(),(g=h.debugWatch)&&null==c._selectedDebugWatchMapping[g.node_name]&&(c._selectedDebugWatchMapping[a]=g)),null!=c._highlightedLevelDom&&c._highlightedLevelDom.classList.remove("highlighted"),h.levelDom.classList.add("highlighted"),c.set("_highlightedLevelDom",h.levelDom))}},20)},_handleForceNodeExpandAndCheck:function(a){this._handleForceNode(a,
!0)},_handleForceNodeExpand:function(a){this._handleForceNode(a,!1)}});
</script>
</dom-module>





<dom-module id="tf-session-runs-view">
  <template>
    <div class="session-runs-div">
      <div class="section-title">Session Runs</div>
      <table id="session-runs-table" align="left" class="session-runs-table">
        <tr align="left">
          <th>Feeds</th>
          <th>Fetches</th>
          <th>Targets</th>
          <th>#(Devices)</th>
          <th>Count</th>
        </tr>
      </table>
    </div>
    <style>
      :host {
        display: block;
        padding: 20px 0;
      }

      .section-title {
        font-size: 110%;
        font-weight: bold;
      }
      :host .indented-level-container .content-container {
        margin: 0 0 0 10px;
      }

      /* TODO(cais): This needs work: the table shouldn't get too wide when
         there are many feeds/fetches/targte names. */
      .session-runs-table {
        align-content: left;
        align-items: left;
        text-align: left;
        font-size: 90%;
        border-style: solid 1px black;
        table-layout: fixed;
        width: 100%;
        word-break: break-all;
        padding-top: 3px;
        padding-left: 3px;
        padding-right: 3px;
        box-shadow: 3px 3px #ddd;
      }
      .active-session-run {
        background-color: #FFFFE0;
        font-weight: bold;
      }
      .sole-active-session-run {
        background-color: rgb(172, 232, 188);
        font-weight: bold;
      }

      .node-or-tensor-element {
        text-decoration: underline;
        cursor: pointer;
      }

      .node-or-tensor-element:hover {
        color: blue;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-session-runs-view.html.js
Polymer({is:"tf-session-runs-view",properties:{latestSessionRun:Object,sessionRunKeyToDeviceNames:Object,soleActive:Boolean,nodeOrTensorClicked:Function,_runKey2Count:{type:Object,value:{}},_runKey2NumDevices:{type:Object,value:{}},_activeRunKey:String},observers:["renderLatest(latestSessionRun)","setSoleActiveStatus(soleActive)"],renderLatest:function(a){a=JSON.stringify(a);this._runKey2Count[a]=void 0===this._runKey2Count[a]?1:this._runKey2Count[a]+1;void 0===this._runKey2NumDevices[a]&&(this._runKey2NumDevices[a]=
0);this._activeRunKey=a;this._renderSessionRunTable()},updateNumDevices:function(a){null!=this._activeRunKey&&(this._runKey2NumDevices[this._activeRunKey]=a,this._renderSessionRunTable())},setSoleActiveStatus:function(){this._renderSessionRunTable()},_renderSessionRunTable:function(){this._clearTable();this._renderHeader();var a,b;for(b in this._runKey2Count)if(this._runKey2Count.hasOwnProperty(b)){var c=JSON.parse(b);(c=this._renderRow(c,this._runKey2NumDevices[b],this._runKey2Count[b],this._activeRunKey===
b,this.soleActive))&&(a=c)}a&&(Polymer.dom(this.$$("#session-runs-table")).parentNode.parentNode.scrollTop=a.offsetTop)},_clearTable:function(){for(var a=this.$$("#session-runs-table");a.firstChild;)a.removeChild(a.firstChild)},_renderHeader:function(){var a=document.createElement("tr"),b=document.createElement("th");b.textContent="Feeds";var c=document.createElement("th");c.textContent="Fetches";var e=document.createElement("th");e.textContent="Targets";var f=document.createElement("th");f.textContent=
"#(Devices)";var g=document.createElement("th");g.textContent="Count";a.appendChild(b);a.appendChild(c);a.appendChild(e);a.appendChild(f);a.appendChild(g);Polymer.dom(this.$$("#session-runs-table")).appendChild(a)},_renderRow:function(a,b,c,e,f){var g=document.createElement("tr"),h=this._renderGraphElements(a.feeds),l=this._renderGraphElements(a.fetches);a=this._renderGraphElements(a.targets);var n=document.createElement("td");n.textContent=b;b=document.createElement("td");b.textContent=c;g.appendChild(h);
g.appendChild(l);g.appendChild(a);g.appendChild(n);g.appendChild(b);e&&(f?g.setAttribute("class","sole-active-session-run"):g.setAttribute("class","active-session-run"));Polymer.dom(this.$$("#session-runs-table")).appendChild(g);if(e)return g},_renderGraphElements:function(a){var b=this,c=document.createElement("td");_.forEach(a,function(e){var f=document.createElement("div");f.textContent=e;f.setAttribute("class","node-or-tensor-element");f.addEventListener("click",function(){b.nodeOrTensorClicked(e)});
c.appendChild(f)});return c}});
</script>
</dom-module>





<dom-module id="tf-source-code-view">
  <template>
    <div id="fullStackDialog" hidden$="[[!_fullStackShown]]">
      <div id="full-stack-title">
        <paper-icon-button icon="filter-list" disabled="true">
        </paper-icon-button>
        Full Stack Trace of Node:
        <div id="full-stack-node-name">"[[_fullStackNodeName]]"</div>
        <paper-icon-button icon="close" id="close-full-stack-button" title="Close Full Stack" on-tap="_closeFullStackDialog">
        </paper-icon-button>
      </div>
      <ul id="full-stack-content"></ul>
    </div>
    <paper-tabs id="source-files-tabs" selected="{{_filePathSelected}}">
      <template is="dom-repeat" items="[[_shortFilePaths]]">
        <paper-tab id="[[item.id]]">[[item.name]]</paper-tab>
      </template>
    </paper-tabs>
    <div id="source-file-content" class="source-content">
      <template is="dom-repeat" items="[[_fileLines]]">
        <div class$="{{item.sourceClass}}" id="source-line-[[item.lineno]]">
          <span class="source-line-number" id="source-lineno-[[item.lineno]]">
            [[item.lineno]]
          </span>
          <span class="source-line-node-toggle" id="source-line-node-toggle-[[item.lineno]]">
            [[item.numNodes]]
          </span>
          <span class="source-line-text" id="source-line-text-[[item.lineno]]">
            [[item.text]]
          </span>
          <div class="source-line-nodes" id="source-line-nodes-[[item.lineno]]">
          </div>
        </div>
      </template>
    </div>
    <style>
      #source-files-tabs {
        position: relative;
        height: 8%;
      }
      .source-content {
        position: relative;
        height: 90%;
        font-family: monospace;
        font-size: 90%;
        overflow-x: scroll;
        overflow-y: scroll;
      }
      .source-content :hover {
        background-color: #FFFF00;
      }
      .highlighted-source-line {
        background-color: #FFFFE0;
      }
      .source-line-number {
        display: inline-block;
        color: lightblue;
        width: 2em;
        text-align: right;
        padding-right: 1em;
      }
      .source-line-node-toggle {
        display: inline-block;
        color: blue;
        width: 5em;
        text-align: right;
        padding-right: 1em;
        text-decoration: underline;
        cursor: pointer;
      }
      .source-line-nodes {
        padding-left: 4em;
        text-decoration: underline;
        cursor: pointer;
        color: blue;
        margin-top: 0em;
        margin-bottom: 0em;
        margin-right: 1em;
      }
      .source-line-node-entry {
        margin-right: 1em;
        background-color: yellow;
      }
      .source-line-nodes span {
        text-decoration: none;
        background-color: yellow;
      }
      .source-line-text {
        display: inline;
        word-wrap: break-word;
      }
      #fullStackDialog {
        z-index: 1000;
        position: absolute;
        top:  10%;
        left: 50%;
        width: 45%;
        height: 85%;
        background-color: white;
        border: 1px solid gray;
        font-family: monospace;
        box-shadow: 3px 3px #ddd;
        overflow-y: auto;
      }
      #full-stack-title {
        font-size: 110%;
        position: relative;
        width: 100%;
        background-color: #eee;
        text-align: center;
        font-weight: bold;
      }
      #full-stack-node-name {
        color: blue;
      }
      :host #full-stack-content {
        padding-top: 1em;
        padding-right: 0.5em;
        margin-top: 0.5em;
        font-size: 90%;
        word-wrap: break-word;
        overflow: auto;
      }
      .stack-frame-clickable {
        color: blue;
        text-decoration: underline;
        cursor: pointer;
      }
      .stack-frame-nonclickable {
        color: #555;
      }
      #close-full-stack-button {
        float: right;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-source-code-view.html.js
Polymer({is:"tf-source-code-view",properties:{requestManager:{type:Object,value:null},focusNodeName:{type:String,value:null},_oldFocusNodeName:{type:String,value:null},debugWatches:{type:Array,value:[]},nodeClicked:{type:Function,value:null},continueToNode:{type:Function,value:null},_highlightedElements:{type:Array,value:[]},_filePathSelected:Number,_fullFilePaths:{type:Array,value:null},_shortFilePaths:{type:Array,value:null},_fileLines:{type:Array,value:null},_nodeName2DeviceName:{type:Object,value:null},
_nodeName2BaseExpandedNodeName:{type:Object,value:null},_nodeName2NodeElements:{type:Object,value:null},_nodeName2StackTopNodeElement:{type:Object,value:null},_setHightlightOriginNodeElement:{type:Object,value:null},_fullStackShown:{type:Boolean,value:!1},_fullStackNodeName:{type:String,value:null},_renderDelayMillis:{type:Number,value:50,readonly:!0}},observers:["_renderFile(_filePathSelected)","_focusOnNode(focusNodeName)"],render:function(a){var b=this;null!=a&&this.set("_debugWatches",a);this._querySourceCodeEndPoint({mode:"paths"}).then(function(c){b.set("_fullFilePaths",
c.paths);var e=c.paths.map(function(f){return{id:f,name:b._shortenPath(f,c.paths)}});b.set("_shortFilePaths",e);0<e.length&&b.set("_filePathSelected",0)})},_shortenPath:function(a){a=a.replace(/\\/g,"/");a=a.split("/");return a[a.length-1]},_renderFile:function(a){var b=this;if(null!=a){var c=this._shortFilePaths[a].id;this._querySourceCodeEndPoint({mode:"content",file_path:c}).then(function(e){var f=[],g=e.content[c],h=e.lineno_to_op_name_and_stack_pos;e={};for(var l in h)h.hasOwnProperty(l)&&(e[l]=
h[l].length);b._filterFileTracebacksByDebugWatches(h);for(l=0;l<g.length;++l){var n=l+1;f.push({lineno:n,numNodes:null!=h[n]?String(h[n].length)+"/"+String(e[n])+" \u25bc":"",text:b._htmlEscape(g[l])})}b.set("_fileLines",f);setTimeout(function(){var m={},q={},r={},v;for(v in h){r.$jscomp$loop$prop$lineno$21$76=v;if(h.hasOwnProperty(r.$jscomp$loop$prop$lineno$21$76)){for(var u=b.$$("#source-line-nodes-"+r.$jscomp$loop$prop$lineno$21$76);u.firstChild;)u.removeChild(u.firstChild);var w=h[r.$jscomp$loop$prop$lineno$21$76];
w.sort(function(H,K){return H[0]<K[0]?-1:H[0]>K[0]?1:0});for(var z={},A=0;A<w.length;z={$jscomp$loop$prop$nodeName$74:z.$jscomp$loop$prop$nodeName$74,$jscomp$loop$prop$nodeElement$75:z.$jscomp$loop$prop$nodeElement$75},++A){z.$jscomp$loop$prop$nodeName$74=w[A][0];var E=w[A][1],C=document.createElement("div");z.$jscomp$loop$prop$nodeElement$75=document.createElement("span");z.$jscomp$loop$prop$nodeElement$75.setAttribute("class","source-line-node-enttry");z.$jscomp$loop$prop$nodeElement$75.setAttribute("sourceLineno",
r.$jscomp$loop$prop$lineno$21$76);z.$jscomp$loop$prop$nodeElement$75.textContent=z.$jscomp$loop$prop$nodeName$74;z.$jscomp$loop$prop$nodeElement$75.addEventListener("tap",function(H){return function(){b.nodeClicked(b._nodeName2DeviceName[H.$jscomp$loop$prop$nodeName$74],b._nodeName2BaseExpandedNodeName[H.$jscomp$loop$prop$nodeName$74],!0)}}(z));var D=document.createElement("paper-icon-button");D.setAttribute("icon","filter-list");D.setAttribute("title","Show stack");D.addEventListener("tap",function(H,
K){return function(){b._highlightNodeElements(H.$jscomp$loop$prop$nodeName$74);b.set("_fullStackNodeName",H.$jscomp$loop$prop$nodeName$74);b.set("_fullStackShown",!0);b._populateFullStack(H.$jscomp$loop$prop$nodeName$74,b._fullFilePaths[b._filePathSelected],Number(K.$jscomp$loop$prop$lineno$21$76))}}(z,r));var J=document.createElement("paper-icon-button");J.setAttribute("icon","forward");J.setAttribute("title","Continue to");J.addEventListener("tap",function(H){return function(){b.nodeClicked(b._nodeName2DeviceName[H.$jscomp$loop$prop$nodeName$74],
b._nodeName2BaseExpandedNodeName[H.$jscomp$loop$prop$nodeName$74],!0);var K=b._nodeName2DeviceName[H.$jscomp$loop$prop$nodeName$74],L=b._nodeName2BaseExpandedNodeName[H.$jscomp$loop$prop$nodeName$74];b.set("_setHightlightOriginNodeElement",H.$jscomp$loop$prop$nodeElement$75);b.continueToNode(K,L)}}(z));C.appendChild(D);C.appendChild(J);C.appendChild(z.$jscomp$loop$prop$nodeElement$75);u.appendChild(C);m.hasOwnProperty(z.$jscomp$loop$prop$nodeName$74)||(m[z.$jscomp$loop$prop$nodeName$74]=[]);m[z.$jscomp$loop$prop$nodeName$74].push(z.$jscomp$loop$prop$nodeElement$75);
q.hasOwnProperty(z.$jscomp$loop$prop$nodeName$74)||(q[z.$jscomp$loop$prop$nodeName$74]=[z.$jscomp$loop$prop$nodeElement$75,E]);E>q[z.$jscomp$loop$prop$nodeName$74][1]&&(q[z.$jscomp$loop$prop$nodeName$74]=[z.$jscomp$loop$prop$nodeElement$75,E])}u.setAttribute("hidden",!0);u=b.$$("#source-line-node-toggle-"+r.$jscomp$loop$prop$lineno$21$76);null==u.getAttribute("tapCallbackSet")&&(u.addEventListener("tap",function(H){return function(){b._toggleLineNodes(Number(H.$jscomp$loop$prop$lineno$21$76))}}(r)),
u.setAttribute("tapCallbackSet",!0))}r={$jscomp$loop$prop$lineno$21$76:r.$jscomp$loop$prop$lineno$21$76}}b.set("_nodeName2NodeElements",m);for(var M in q)q.hasOwnProperty(M)&&(q[M]=q[M][0]);b.set("_nodeName2StackTopNodeElement",q)},b._renderDelayMillis)})}},_toggleLineNodes:function(a,b){b=void 0===b?!1:b;a=this.$$("#source-line-nodes-"+a);null==a.getAttribute("hidden")&&!0!==b?a.setAttribute("hidden",!0):a.removeAttribute("hidden")},_filterFileTracebacksByDebugWatches:function(a){for(var b=this.debugWatches.map(function(n){return pl.removeNodeNameBaseExpansion(n.node_name)}),
c={},e={},f=za(this.debugWatches),g=f.next();!g.done;g=f.next()){g=g.value;var h=pl.removeNodeNameBaseExpansion(g.node_name);c[h]=g.device_name;e[h]=g.node_name}this.set("_nodeName2DeviceName",c);this.set("_nodeName2BaseExpandedNodeName",e);for(var l in a)a.hasOwnProperty(l)&&(a[l]=a[l].filter(function(n){return _.includes(b,n[0])}))},_querySourceCodeEndPoint:function(a){var b=Rk.getRouter().pluginRoute("debugger","/source_code");a=Rk.addParams(b,a);return this.requestManager.request(a)},_htmlEscape:function(a){return a.replace(/ /g,
"\u00a0")},_focusOnNode:function(a){var b=this;if(null!=a){var c=this._shortFilePaths[this._filePathSelected].id,e=this;this._querySourceCodeEndPoint({mode:"op_traceback",op_name:a}).then(function(f){var g=f.op_traceback[a];f=[];for(var h=0;h<g.length;++h){var l=g[h][1];g[h][0]===c&&f.push(l)}g=za(e._highlightedElements);for(h=g.next();!h.done;h=g.next())h.value.classList.remove("highlighted-source-line");g=[];f=za(f);for(h=f.next();!h.done;h=f.next())h=h.value,l=b.$$("#source-line-"+h),g.push(l),
l.classList.add("highlighted-source-line"),e._toggleLineNodes(h,!0);e.set("_highlightedElements",g);b._highlightNodeElements(a)})}},_highlightNodeElements:function(a){if(null!=this._oldFocusNodeName)for(var b=za(this._nodeName2NodeElements[this._oldFocusNodeName]),c=b.next();!c.done;c=b.next())c.value.style["font-weight"]="normal";b=za(this._nodeName2NodeElements[a]);for(c=b.next();!c.done;c=b.next())c.value.style["font-weight"]="bold";null==this._setHightlightOriginNodeElement?this._nodeName2StackTopNodeElement[a].scrollIntoView({block:"center",
behaviour:"smooth"}):this.set("_setHightlightOriginNodeElement",null);this.set("_oldFocusNodeName",a)},_populateFullStack:function(a,b,c){var e=this;this._querySourceCodeEndPoint({mode:"op_traceback",op_name:a}).then(function(f){for(var g=e.$$("#full-stack-content");g.firstChild;)g.removeChild(g.firstChild);var h={};f=za(f.op_traceback[a]);for(var l=f.next();!l.done;h={$jscomp$loop$prop$fullFilePath$78:h.$jscomp$loop$prop$fullFilePath$78,$jscomp$loop$prop$lineno$79:h.$jscomp$loop$prop$lineno$79,$jscomp$loop$prop$frameElement$80:h.$jscomp$loop$prop$frameElement$80},
l=f.next())l=l.value,h.$jscomp$loop$prop$frameElement$80=document.createElement("li"),h.$jscomp$loop$prop$fullFilePath$78=l[0],h.$jscomp$loop$prop$lineno$79=Number(l[1]),h.$jscomp$loop$prop$frameElement$80.textContent=h.$jscomp$loop$prop$fullFilePath$78+": "+String(h.$jscomp$loop$prop$lineno$79),_.includes(e._fullFilePaths,h.$jscomp$loop$prop$fullFilePath$78)?(h.$jscomp$loop$prop$frameElement$80.classList.add("stack-frame-clickable"),h.$jscomp$loop$prop$frameElement$80.style.color="blue",h.$jscomp$loop$prop$frameElement$80.style["text-decoration"]=
"underline",h.$jscomp$loop$prop$frameElement$80.style.cursor="pointer",h.$jscomp$loop$prop$fullFilePath$78===b&&h.$jscomp$loop$prop$lineno$79===c&&(h.$jscomp$loop$prop$frameElement$80.style["font-weight"]="bold"),h.$jscomp$loop$prop$frameElement$80.addEventListener("tap",function(n){return function(){e.set("_filePathSelected",e._fullFilePaths.indexOf(n.$jscomp$loop$prop$fullFilePath$78));setTimeout(function(){e._toggleLineNodes(n.$jscomp$loop$prop$lineno$79,!0);for(var m=za(e._nodeName2NodeElements[a]),
q=m.next();!q.done;q=m.next())q=q.value,Number(q.getAttribute("sourceLineno"))===Number(n.$jscomp$loop$prop$lineno$79)&&(q.scrollIntoView({block:"center",behaviour:"smooth"}),e.set("_setHightlightOriginNodeElement",n.$jscomp$loop$prop$frameElement$80),e._highlightNodeElements(a),b===n.$jscomp$loop$prop$fullFilePath$78&&c===n.$jscomp$loop$prop$lineno$79||e._populateFullStack(a,n.$jscomp$loop$prop$fullFilePath$78,n.$jscomp$loop$prop$lineno$79))},2*e._renderDelayMillis)}}(h))):(h.$jscomp$loop$prop$frameElement$80.classList.add("stack-frame-nonclickable"),
h.$jscomp$loop$prop$frameElement$80.style.color="#555"),g.appendChild(h.$jscomp$loop$prop$frameElement$80)})},_closeFullStackDialog:function(){this.set("_fullStackShown",!1)}});
</script>
</dom-module>





<dom-module id="tf-tensor-data-summary">
  <template>
    <span class="section-title">Tensor Value Overview</span>
    <div id="tensor-data-div" class="tensor-data-div">
      <table id="tensor-data-table" align="left" class="tensor-data-table">
        <thead>
          <tr align="left">
            <th>Tensor</th>
            <th>Count</th>
            <th>DType</th>
            <th>Shape</th>
            <th width="25%">Value</th>
            <th width="25%">
              Health Pill
              <paper-toggle-button id="show-health-pills" checked="{{_healthPillsEnabled}}">
              </paper-toggle-button>
              <paper-card>
                <div class="health-pill-legend" id="health-pill-legend"></div>
              </paper-card>
            </th>
            <th width="5%"></th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    <style>
        :host #tensor-data-div {
          height: 100%;
          overflow-y: auto;
        }
        .section-title {
          font-size: 110%;
          font-weight: bold;
        }
        :host .indented-level-container .content-container {
          margin: 0 0 0 10px;
        }
        :host .tensor-data-table {
          align-content: left;
          align-items: left;
          display: block;
          text-align: left;
          vertical-align: middle;
          width: 100%;
          padding-top: 3px;
          padding-left: 3px;
          padding-right: 3px;
          box-shadow: 3px 3px #ddd;
        }
        :host #tensor-data-table th {
          vertical-align: top;
        }
        :host .active-tensor {
          background-color: #FFFFE0;
          font-weight: bold;
          border: solid 1px #888;
        }
        :host .highlighted {
          color: red;
        }
        :host .health-pill-legend {
          float: right;
          font-weight: normal;
        }
        :host #show-health-pills {
          display: inline-block;
        }
        .value-expansion-link {
          text-decoration: underline;
          cursor: pointer;
        }
        .value-expansion-link :hover {
          color: blue;
        }
        .health-pill :hover {
          cursor: pointer;
        }
        .tensor-name {
          text-decoration: underline;
          cursor: pointer;
        }
        .tensor-name :hover {
          color: blue;
        }
      </style>
  </template>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-tensor-data-summary.html.js
Polymer({is:"tf-tensor-data-summary",properties:{latestTensorData:Object,expandHandler:Object,continueToCallback:Function,highlightedNodeName:{type:String,value:null},tensorNameClicked:{type:Function,value:null},getHealthPill:Function,_healthPillsEnabled:{type:Boolean,value:!0,notify:!0},_watchKeys:{type:Array,value:[]},_watchKey2Data:{type:Object,value:{}},_watchKey2Count:{type:Object,value:{}},_watchKey2ExpandHandler:{type:Object,value:{}},_watchKey2ValueShort:{type:Object,value:{}},_watchKey2Row:{type:Object,
value:{}},_activeWatchKey:String,_healthPillWidth:{type:Number,value:200,readonly:!0},_healthPillHeight:{type:Number,value:32,readonly:!0}},observers:["_renderLatest(latestTensorData, expandHandler)","_highlight(highlightedNodeName)"],listeners:{"show-health-pills.change":"_showHealthPillsChanged"},ready:function(){this._renderHealthPillLegend()},enableHealthPills:function(){this.set("_healthPillsEnabled",!0);this._renderHealthPillLegend()},_showHealthPillsChanged:function(){this._healthPillsEnabled?
this._renderHealthPillLegend():this._clearHealthPillLegend();this._renderAll()},_renderAll:function(){this._clearTensorDataTable();for(var a=za(this._watchKeys),b=a.next();!b.done;b=a.next())b=b.value,this._renderLatest(this._watchKey2Data[b],this._watchKey2ExpandHandler[b])},_tensorData2WatchKey:function(a){return a.deviceName+"/"+a.tensorName+":"+a.debugOp},_renderLatest:function(a,b){var c=this._tensorData2WatchKey(a),e=null;"Uninitialized"!==a.dtype&&"Unsupported"!==a.dtype&&(e=function(){return b(a)});
var f=null!=a.value?JSON.stringify(a.value,function(g,h){return h.toFixed?Number(h.toFixed(3)):h}):"(Click to view)";this._watchKey2Data[c]=a;-1===this._watchKeys.indexOf(c)?(this._watchKeys.push(c),this._watchKey2Count[c]=1):this._watchKey2Count[c]+=1;this._watchKey2ExpandHandler[c]=e;this._watchKey2ValueShort[c]=f;this._activeWatchKey=c;this._removeActiveStatusFromAllRows();this._renderRow(c)},_clearTensorDataTable:function(){for(var a in this._watchKey2Row)this._watchKey2Row.hasOwnProperty(a)&&
(this._watchKey2Row[a].remove(),delete this._watchKey2Row[a])},_clearTensorDataRow:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},_clearHealthPillLegend:function(){for(var a=this.$$("#health-pill-legend");a.firstChild;)a.removeChild(a.firstChild)},_renderHealthPillLegend:function(){this._clearHealthPillLegend();var a=this.$$("#health-pill-legend"),b=document.createElement("div");b.textContent="Legend:";a.appendChild(b);b.style["margin-right"]="0.5em";b.style.display="inline-block";for(b=
0;b<tf.graph.scene.healthPillEntries.length;++b){var c=tf.graph.scene.healthPillEntries[b],e=document.createElement("div");e.style.display="inline-block";e.style["margin-right"]="0.25em";var f=document.createElement("span");f.textContent="\u25a0";f.style.color=c.background_color;var g=document.createElement("span");g.textContent=c.label;g.style.color=c.background_color;e.appendChild(f);e.appendChild(g);a.appendChild(e)}},_removeActiveStatusFromAllRows:function(){for(var a in this._watchKey2Row)if(this._watchKey2Row.hasOwnProperty(a)){var b=
this._watchKey2Row[a];Polymer.dom(b).classList.remove("active-tensor");Polymer.dom(b).classList.remove("highlighted")}},_renderRow:function(a){var b=this,c=!1;if(null!=this._watchKey2Row[a]){var e=this._watchKey2Row[a];this._clearTensorDataRow(e);c=!1}else e=document.createElement("tr"),c=!0;var f=this._watchKey2Data[a].deviceName,g=this._watchKey2Data[a].maybeBaseExpandedNodeName,h=f+"/"+g,l=this._watchKey2Count[a],n=this._watchKey2Data[a].tensorName,m=this._watchKey2Data[a].debugOp,q=this._watchKey2ValueShort[a],
r=this._watchKey2ExpandHandler[a],v=a===this._activeWatchKey,u=document.createElement("td");Polymer.dom(u).classList.add("tensor-name");u.style["text-decoration"]="underline";u.style.cursor="pointer";u.textContent=n;u.addEventListener("tap",function(){null!=b.tensorNameClicked&&b.tensorNameClicked(f,g)});var w=document.createElement("td");w.textContent=l;var z=this._watchKey2Data[a].dtype;l=document.createElement("td");var A=this._watchKey2Data[a].shape;l.textContent=z;var E=document.createElement("td");
E.textContent=JSON.stringify(A);var C=document.createElement("td");C.textContent=q;Polymer.dom(C).classList.add("value-expansion-link");null!=r&&(C.addEventListener("tap",r,!1),C.style["text-decoration"]="underline",C.style.cursor="pointer");q=null;q=this._healthPillsEnabled?this._renderHealthPill(n+":"+m,{device_name:f,node_name:g,dtype:z,shape:A,value:null},r):document.createElement("td");n=document.createElement("td");m=document.createElement("paper-icon-button");m.setAttribute("icon","forward");
m.setAttribute("title","Continue to");m.addEventListener("click",function(){b.continueToCallback(f,g)});n.appendChild(m);e.appendChild(u);e.appendChild(w);e.appendChild(l);e.appendChild(E);e.appendChild(C);e.appendChild(q);e.appendChild(n);e.setAttribute("nodeNameWithDevice",h);v&&(Polymer.dom(e).classList.add("active-tensor"),Polymer.dom(e).classList.add("highlighted"));this._watchKey2Row[a]=e;c&&Polymer.dom(this.$$("#tensor-data-table tbody")).appendChild(e);e.scrollIntoView({block:"end",inline:"nearest",
behaviour:"smooth"})},_renderHealthPill:function(a,b,c){var e=this,f=document.createElement("td");Polymer.dom(f).classList.add("health-pill");null!=c&&f.addEventListener("tap",c,!1);c=document.createElementNS(tf.graph.scene.SVG_NAMESPACE,"svg");c.setAttribute("width",this._healthPillWidth);c.setAttribute("height",this._healthPillHeight);var g=document.createElementNS(tf.graph.scene.SVG_NAMESPACE,"g");c.appendChild(g);f.appendChild(c);var h="tdp/"+a;this.getHealthPill(a,b.device_name,b.node_name,function(l){null==
l?(f.textContent="N/A",f.style.color="gray"):(b.value=l,tf.graph.scene.addHealthPill(g,b,null,h,e._healthPillWidth,e._healthPillHeight/2,e._healthPillHeight/2,0))});return f},_highlight:function(a){Polymer.dom(this.$$("#tensor-data-table"));var b=[],c;for(c in this._watchKey2Row)if(this._watchKey2Row.hasOwnProperty(c)){var e=this._watchKey2Row[c];null!=e.getAttribute&&(e.getAttribute("nodeNameWithDevice")===a?b.push(e):Polymer.dom(e).classList.remove("highlighted"))}if(null!=a)for(a=0;a<b.length;++a)Polymer.dom(b[a]).classList.add("highlighted"),
b[a].scrollIntoView({block:"end",inline:"nearest",behaviour:"smooth"})}});
</script>
</dom-module>















<dom-module id="vz-line-chart">
  <template>
    <div id="tooltip">
      <table>
        <thead>
          
          <tr id="tooltip-table-header-row" inner-h-t-m-l="[[_tooltipTableHeaderHtml]]"></tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    <div id="chartdiv"></div>
    <style>
      :host {
        -webkit-user-select: none;
        -moz-user-select: none;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
        flex-shrink: 1;
        position: relative;
        outline: none;
      }
      div {
        -webkit-user-select: none;
        -moz-user-select: none;
        flex-grow: 1;
        flex-shrink: 1;
      }
      td {
        padding-left: 5px;
        padding-right: 5px;
        font-size: 13px;
        opacity: 1;
      }
      #tooltip {
        pointer-events: none;
        position: absolute;
        opacity: 0;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
        font-size: 14px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        border-radius: 4px;
        line-height: 1.4em;
        padding: 8px;
        z-index: 5;
        cursor: none;
        margin-top: 10px;
      }
      .swatch {
        border-radius: 50%;
        width: 14px;
        height: 14px;
        display: block;
        border: 2px solid rgba(0,0,0,0);
      }
      .closest .swatch {
        border: 2px solid white;
      }
      th {
        padding-left: 5px;
        padding-right: 5px;
        text-align: left;
      }
      .distant td {
        opacity: 0.8;
      }

      .distant td.swatch {
        opacity: 1;
      }

      .ghost {
        opacity: 0.2;
        stroke-width: 1px;
      }

      #chartdiv line.guide-line {
        stroke: #999;
        stroke-width: 1.5px;
      }

    </style>
  </template>
  <script>//~~WEBPATH~~/vz-line-chart/vz-line-chart.js
(function(a){function b(e,f,g){f=g(f);for(var h=0,l=e.length;h<l;){var n=Math.floor((h+l)/2);g(e[n])<f?h=n+1:l=n}return l}Polymer({is:"vz-line-chart",properties:{colorScale:{type:Object,value:function(){return(new Plottable.Scales.Color).range(d3.schemeCategory10)}},symbolFunction:Object,smoothingEnabled:{type:Boolean,notify:!0,value:!1},smoothingWeight:{type:Number,value:.6},xType:{type:String,value:""},xComponentsCreationMethod:{type:Object,value:""},xAxisFormatter:Object,yAxisFormatter:Object,
yValueAccessor:{type:Object,value:function(){return function(e){return e.scalar}}},tooltipColumns:{type:Array,value:function(){function e(g){return isNaN(g)?"NaN":f(g)}var f=cl.multiscaleFormatter(cl.Y_TOOLTIP_FORMATTER_PRECISION);return[{title:"Name",evaluate:function(g){return g.dataset.metadata().name}},{title:"Smoothed",evaluate:function(g,h){return e(h&&h.smoothingEnabled?g.datum.smoothed:g.datum.scalar)}},{title:"Value",evaluate:function(g){return e(g.datum.scalar)}},{title:"Step",evaluate:function(g){return cl.stepFormatter(g.datum.step)}},
{title:"Time",evaluate:function(g){return cl.timeFormatter(g.datum.wall_time)}},{title:"Relative",evaluate:function(g){return cl.relativeFormatter(cl.relativeAccessor(g.datum,-1,g.dataset))}}]}},fillArea:Object,defaultXRange:Array,defaultYRange:Array,_tooltipTableHeaderHtml:{type:String,computed:"_computeTooltipTableHeaderHtml(tooltipColumns)"},yScaleType:{type:String,value:"linear"},ignoreYOutliers:{type:Boolean,value:!1},tooltipSortingMethod:{type:String,value:"default"},tooltipPosition:{type:String,
value:"bottom"},seriesWithoutTooltips:{type:Array,value:function(){return[]}},_attached:Boolean,_chart:Object,_visibleSeriesCache:{type:Array,value:function(){return[]}},_seriesDataCache:{type:Object,value:function(){return{}}},_makeChartAsyncCallbackId:{type:Number,value:null}},observers:"_makeChart(xComponentsCreationMethod, xType, yValueAccessor, yScaleType, tooltipColumns, colorScale, seriesWithoutTooltips, _attached);_reloadFromCache(_chart);_smoothingChanged(smoothingEnabled, smoothingWeight, _chart);_tooltipSortingMethodChanged(tooltipSortingMethod, _chart);_tooltipPositionChanged(tooltipPosition, _chart);_outliersChanged(ignoreYOutliers, _chart)".split(";"),
setVisibleSeries:function(e){this._visibleSeriesCache=e;this._chart&&(this._chart.setVisibleSeries(e),this.redraw())},setSeriesData:function(e,f){this._seriesDataCache[e]=f;this._chart&&this._chart.setSeriesData(e,f)},resetDomain:function(){this._chart&&this._chart.resetDomain()},redraw:function(){this._chart&&this._chart.redraw()},attached:function(){this._attached=!0},detached:function(){this._chart&&this._chart.destroy();this._attached=!1},ready:function(){this.scopeSubtree(this.$.tooltip,!0);
this.scopeSubtree(this.$.chartdiv,!0)},_makeChart:function(e,f,g,h,l,n){f||e?f&&(e=function(){return cl.getXComponents(f)}):e=cl.stepX;null!==this._makeChartAsyncCallbackId&&(this.cancelAsync(this._makeChartAsyncCallbackId),this._makeChartAsyncCallbackId=null);this._makeChartAsyncCallbackId=this.async(function(){this._makeChartAsyncCallbackId=null;if(this._attached&&e&&this.yValueAccessor&&this.tooltipColumns){var m=d3.select(this.$.tooltip);m=new c(e,this.yValueAccessor,h,n,m,this.tooltipColumns,
this.fillArea,this.defaultXRange,this.defaultYRange,this.symbolFunction,this.xAxisFormatter,this.yAxisFormatter,this.seriesWithoutTooltips);var q=d3.select(this.$.chartdiv);m.renderTo(q);this._chart&&this._chart.destroy();this._chart=m}},350)},_reloadFromCache:function(){this._chart&&(this._chart.setVisibleSeries(this._visibleSeriesCache),this._visibleSeriesCache.forEach(function(e){this._chart.setSeriesData(e,this._seriesDataCache[e]||[])}.bind(this)))},_smoothingChanged:function(){this._chart&&
(this.smoothingEnabled?this._chart.smoothingUpdate(this.smoothingWeight):this._chart.smoothingDisable())},_outliersChanged:function(){this._chart&&this._chart.ignoreYOutliers(this.ignoreYOutliers)},_tooltipSortingMethodChanged:function(){this._chart&&this._chart.setTooltipSortingMethod(this.tooltipSortingMethod)},_tooltipPositionChanged:function(){this._chart&&this._chart.setTooltipPosition(this.tooltipPosition)},_computeTooltipTableHeaderHtml:function(e){var f=this;return[""].concat(_.map(e,"title")).map(function(g){return"\x3cth\x3e"+
f._sanitize(g)+"\x3c/th\x3e"}).join("")},_sanitize:function(e){return e.replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/&/g,"\x26amp;")}});var c=function(){function e(f,g,h,l,n,m,q,r,v,u,w,z,A){this.seriesNames=[];this.name2datasets={};this.colorScale=l;this.tooltip=n;this.datasets=[];this._ignoreYOutliers=!1;this.lastPointsDataset=new Plottable.Dataset;this.nanDataset=new Plottable.Dataset;this.yValueAccessor=g;this.symbolFunction=u;this.onDatasetChanged=this._onDatasetChanged.bind(this);
this._defaultXRange=r;this._defaultYRange=v;this.tooltipColumns=m;this.seriesWithoutTooltips=A;this.buildChart(f,g,h,q,w,z)}e.prototype.buildChart=function(f,g,h,l,n,m){this.outer&&this.outer.destroy();f=f();this.xAccessor=f.accessor;this.xScale=f.scale;this.xAxis=f.axis;this.xAxis.margin(0).tickLabelPadding(3);n&&this.xAxis.formatter(n);this.yScale=e.getYScaleFromType(h);this.yAxis=new Plottable.Axes.Numeric(this.yScale,"left");this.yAxis.margin(0).tickLabelPadding(5);this.yAxis.formatter(m?m:cl.multiscaleFormatter(cl.Y_AXIS_FORMATTER_PRECISION));
this.yAxis.usesTextWidthApproximation();this.fillArea=l;this.dzl=new a.DragZoomLayer(this.xScale,this.yScale,this.resetYDomain.bind(this));this.tooltipInteraction=this.createTooltipInteraction(this.dzl);this.tooltipPointsComponent=new Plottable.Component;h=this.buildPlot(this.xScale,this.yScale,l);this.gridlines=new Plottable.Components.Gridlines(this.xScale,this.yScale);l=new Plottable.Components.GuideLineLayer("horizontal");l.scale(this.yScale).value(0);n=new Plottable.Components.GuideLineLayer("vertical");
n.scale(this.xScale).value(0);this.center=new Plottable.Components.Group([this.gridlines,l,n,h,this.dzl,this.tooltipPointsComponent]);this.outer=new Plottable.Components.Table([[this.yAxis,this.center],[null,this.xAxis]])};e.prototype.buildPlot=function(f,g,h){var l=this;h&&(this.marginAreaPlot=new Plottable.Plots.Area,this.marginAreaPlot.x(this.xAccessor,f),this.marginAreaPlot.y(h.higherAccessor,g),this.marginAreaPlot.y0(h.lowerAccessor),this.marginAreaPlot.attr("fill",function(r,v,u){return l.colorScale.scale(u.metadata().name)}),
this.marginAreaPlot.attr("fill-opacity",.3),this.marginAreaPlot.attr("stroke-width",0));this.smoothedAccessor=function(r){return r.smoothed};h=new Plottable.Plots.Line;h.x(this.xAccessor,f);h.y(this.yValueAccessor,g);h.attr("stroke",function(r,v,u){return l.colorScale.scale(u.metadata().name)});this.linePlot=h;this.setupTooltips(h);var n=new Plottable.Plots.Line;n.x(this.xAccessor,f);n.y(this.smoothedAccessor,g);n.attr("stroke",function(r,v,u){return l.colorScale.scale(u.metadata().name)});this.smoothLinePlot=
n;if(this.symbolFunction){var m=new Plottable.Plots.Scatter;m.x(this.xAccessor,f);m.y(this.yValueAccessor,g);m.attr("fill",function(r,v,u){return l.colorScale.scale(u.metadata().name)});m.attr("opacity",1);m.size(2*cl.TOOLTIP_CIRCLE_SIZE);m.symbol(function(r,v,u){return l.symbolFunction(u.metadata().name)});this.markersScatterPlot=m}m=new Plottable.Plots.Scatter;m.x(this.xAccessor,f);m.y(this.yValueAccessor,g);m.attr("fill",function(r){return l.colorScale.scale(r.name)});m.attr("opacity",1);m.size(2*
cl.TOOLTIP_CIRCLE_SIZE);m.datasets([this.lastPointsDataset]);this.scatterPlot=m;var q=new Plottable.Plots.Scatter;q.x(this.xAccessor,f);q.y(function(r){return r.displayY},g);q.attr("fill",function(r){return l.colorScale.scale(r.name)});q.attr("opacity",1);q.size(2*cl.NAN_SYMBOL_SIZE);q.datasets([this.nanDataset]);q.symbol(Plottable.SymbolFactories.triangle);this.nanDisplay=q;f=[q,m,n,h];this.marginAreaPlot&&f.push(this.marginAreaPlot);this.markersScatterPlot&&f.push(this.markersScatterPlot);return new Plottable.Components.Group(f)};
e.prototype._onDatasetChanged=function(f){this.smoothingEnabled&&this.resmoothDataset(f);this.updateSpecialDatasets()};e.prototype.ignoreYOutliers=function(f){f!==this._ignoreYOutliers&&(this._ignoreYOutliers=f,this.updateSpecialDatasets(),this.resetYDomain())};e.prototype.updateSpecialDatasets=function(){var f=this.getYAxisAccessor(),g=this.datasets.map(function(h){var l=null,n=h.data().filter(function(m){return!isNaN(f(m,-1,h))});0<n.length&&(l=n[n.length-1],l.name=h.metadata().name,l.relative=
cl.relativeAccessor(l,-1,h));return l}).filter(function(h){return null!=h});this.lastPointsDataset.data(g);this.markersScatterPlot&&this.markersScatterPlot.datasets(this.datasets.map(this.createSampledDatasetForMarkers));g=_.flatten(this.datasets.map(function(h){for(var l=null,n=h.data(),m=0;m<n.length&&null==l;)isNaN(f(n[m],-1,h))||(l=f(n[m],-1,h)),m++;null==l&&(l=0);var q=[];for(m=0;m<n.length;m++)isNaN(f(n[m],-1,h))?(n[m].name=h.metadata().name,n[m].displayY=l,n[m].relative=cl.relativeAccessor(n[m],
-1,h),q.push(n[m])):l=f(n[m],-1,h);return q}));this.nanDataset.data(g)};e.prototype.resetDomain=function(){this.resetXDomain();this.resetYDomain()};e.prototype.resetXDomain=function(){if(null!=this._defaultXRange)var f=this._defaultXRange;else f=this.xScale,f._domainMin=null,f._domainMax=null,f=f._getExtent();this.xScale.domain(f)};e.prototype.resetYDomain=function(){if(null!=this._defaultYRange)var f=this._defaultYRange;else{var g=this.getAccessorsForComputingYRange();f=_.flattenDeep(this.datasets.map(function(h){return g.map(function(l){return h.data().map(function(n){return l(n,
-1,h)})})})).filter(isFinite);f=cl.computeDomain(f,this._ignoreYOutliers)}this.yScale.domain(f)};e.prototype.getAccessorsForComputingYRange=function(){var f=[this.getYAxisAccessor()];this.fillArea&&f.push(this.fillArea.lowerAccessor,this.fillArea.higherAccessor);return f};e.prototype.getYAxisAccessor=function(){return this.smoothingEnabled?this.smoothedAccessor:this.yValueAccessor};e.prototype.createTooltipInteraction=function(f){var g=this,h=new Plottable.Interactions.Pointer;f.interactionStart(function(){h.enabled(!1);
g.hideTooltips()});f.interactionEnd(function(){return h.enabled(!0)});h.onPointerMove(function(l){if(g.linePlot){var n={x:l.x,y:l.y,datum:null,dataset:null},m=g.gridlines.content().node().getBBox();l=g.linePlot.datasets().map(function(u){return g.findClosestPoint(n,u)}).filter(Boolean);var q=Plottable.Utils.DOM.intersectsBBox,r=l.filter(function(u){return(q(u.x,u.y,m)||isNaN(g.yValueAccessor(u.datum,0,u.dataset)))&&(!g.seriesWithoutTooltips||-1==g.seriesWithoutTooltips.indexOf(u.dataset.metadata().name))}),
v=r.filter(function(u){return!isNaN(g.yValueAccessor(u.datum,0,u.dataset))});v=g.tooltipPointsComponent.content().selectAll(".point").data(v,function(u){return u.dataset.metadata().name});0!==l.length?(v.enter().append("circle").classed("point",!0),v.attr("r",cl.TOOLTIP_CIRCLE_SIZE).attr("cx",function(u){return u.x}).attr("cy",function(u){return u.y}).style("stroke","none").attr("fill",function(u){return g.colorScale.scale(u.dataset.metadata().name)}),v.exit().remove(),g.drawTooltips(r,n,g.tooltipColumns)):
g.hideTooltips()}});h.onPointerExit(function(){return g.hideTooltips()});return h};e.prototype.hideTooltips=function(){this.tooltip.style("opacity",0);this.scatterPlot.attr("opacity",1);this.tooltipPointsComponent.content().selectAll(".point").remove()};e.prototype.setupTooltips=function(f){var g=this;f.onDetach(function(){g.tooltipInteraction.detachFrom();g.tooltipInteraction.enabled(!1)});f.onAnchor(function(){g.tooltipInteraction.attachTo(f);g.tooltipInteraction.enabled(!0)})};e.prototype.drawTooltips=
function(f,g,h){function l(u){return Math.pow(u.x-g.x,2)+Math.pow(u.y-g.y,2)}var n=this;this.scatterPlot.attr("opacity",0);var m=_.min(f.map(l)),q=this.yValueAccessor;this.smoothingEnabled&&(q=this.smoothedAccessor);f="ascending"===this.tooltipSortingMethod?_.sortBy(f,function(u){return q(u.datum,-1,u.dataset)}):"descending"===this.tooltipSortingMethod?_.sortBy(f,function(u){return q(u.datum,-1,u.dataset)}).reverse():"nearest"===this.tooltipSortingMethod?_.sortBy(f,l):f.slice(0).reverse();var r=this.tooltip.select("tbody").html("").selectAll("tr").data(f).enter().append("tr");
r.classed("distant",function(u){var w=u.dataset.data()[0],z=_.last(u.dataset.data());w=n.xScale.scale(n.xAccessor(w,0,u.dataset));z=n.xScale.scale(n.xAccessor(z,0,u.dataset));u=n.smoothingEnabled?u.datum.smoothed:n.yValueAccessor(u.datum,0,u.dataset);return g.x<w||g.x>z||isNaN(u)});r.classed("closest",function(u){return l(u)===m});r.style("white-space","nowrap");r.append("td").append("span").classed("swatch",!0).style("background-color",function(u){return n.colorScale.scale(u.dataset.metadata().name)});
_.each(h,function(u){r.append("td").text(function(w){return u.evaluate(w,{smoothingEnabled:n.smoothingEnabled})})});h=document.body.clientWidth;var v=this.tooltip.node();f=v.parentElement.getBoundingClientRect();v=v.getBoundingClientRect();h=h-f.left-v.width-60;v=0;"right"===this.tooltipPosition?h=Math.min(f.width,h):(h=Math.min(0,h),v=f.height+cl.TOOLTIP_Y_PIXEL_OFFSET);this.tooltip.style("transform","translate("+h+"px,"+v+"px)");this.tooltip.style("opacity",1)};e.prototype.findClosestPoint=function(f,
g){var h=this,l=g.data().map(function(q,r){var v=h.xAccessor(q,r,g);r=h.smoothingEnabled?h.smoothedAccessor(q,r,g):h.yValueAccessor(q,r,g);return{x:h.xScale.scale(v),y:h.yScale.scale(r),datum:q,dataset:g}}),n=b(l,f,function(q){return q.x});if(n===l.length)return l[l.length-1];if(0===n)return l[0];var m=l[n-1];l=l[n];return Math.abs(m.x-f.x)<Math.abs(l.x-f.x)?m:l};e.prototype.resmoothDataset=function(f){var g=this,h=f.data(),l=this.smoothingWeight,n=0<h.length?0:NaN,m=0,q=h.map(function(v,u){return g.yValueAccessor(v,
u,f)}),r=q.every(function(v){return v==q[0]});h.forEach(function(v,u){u=q[u];r||!Number.isFinite(u)?v.smoothed=u:(n=n*l+(1-l)*u,m++,u=1,1!==l&&(u=1-Math.pow(l,m)),v.smoothed=n/u)})};e.prototype.getDataset=function(f){void 0===this.name2datasets[f]&&(this.name2datasets[f]=new Plottable.Dataset([],{name:f}));return this.name2datasets[f]};e.getYScaleFromType=function(f){if("log"===f)return new Plottable.Scales.ModifiedLog;if("linear"===f)return new Plottable.Scales.Linear;throw Error("Unrecognized yScale type "+
f);};e.prototype.setVisibleSeries=function(f){var g=this;this.seriesNames=f=f.sort();f.reverse();this.datasets.forEach(function(h){return h.offUpdate(g.onDatasetChanged)});this.datasets=f.map(function(h){return g.getDataset(h)});this.datasets.forEach(function(h){return h.onUpdate(g.onDatasetChanged)});this.linePlot.datasets(this.datasets);this.smoothingEnabled&&this.smoothLinePlot.datasets(this.datasets);this.marginAreaPlot&&this.marginAreaPlot.datasets(this.datasets);this.updateSpecialDatasets()};
e.prototype.createSampledDatasetForMarkers=function(f){var g=f.data();if(20>=g.length)return f;for(var h=Math.ceil(g.length/20),l=Array(Math.floor(g.length/h)),n=0,m=0;n<l.length;n++,m+=h)l[n]=g[m];return new Plottable.Dataset(l,f.metadata())};e.prototype.setSeriesData=function(f,g){this.getDataset(f).data(g)};e.prototype.smoothingUpdate=function(f){var g=this;this.smoothingWeight=f;this.datasets.forEach(function(h){return g.resmoothDataset(h)});this.smoothingEnabled||(this.linePlot.addClass("ghost"),
this.scatterPlot.y(this.smoothedAccessor,this.yScale),this.smoothingEnabled=!0,this.smoothLinePlot.datasets(this.datasets));this.markersScatterPlot&&this.markersScatterPlot.y(this.getYAxisAccessor(),this.yScale);this.updateSpecialDatasets()};e.prototype.smoothingDisable=function(){this.smoothingEnabled&&(this.linePlot.removeClass("ghost"),this.scatterPlot.y(this.yValueAccessor,this.yScale),this.smoothLinePlot.datasets([]),this.smoothingEnabled=!1,this.updateSpecialDatasets());this.markersScatterPlot&&
this.markersScatterPlot.y(this.getYAxisAccessor(),this.yScale)};e.prototype.setTooltipSortingMethod=function(f){this.tooltipSortingMethod=f};e.prototype.setTooltipPosition=function(f){this.tooltipPosition=f};e.prototype.renderTo=function(f){this.targetSVG=f;this.outer.renderTo(f);null!=this._defaultXRange&&this.resetXDomain();null!=this._defaultYRange&&this.resetYDomain()};e.prototype.redraw=function(){this.outer.redraw()};e.prototype.destroy=function(){this.outer&&this.outer.destroy()};return e}()})(el||
(el={}));
</script>
</dom-module>


<dom-module id="tf-debugger-line-chart">
  <template>
    <vz-line-chart x-components-creation-method="[[_lineChartXComponentsCreationMethod]]" y-value-accessor="[[_lineChartYValueAccessor]]" tooltip-columns="[[_lineChartTooltipColumns]]" smoothing-enabled="[[_lineChartSmoothingEnabled]]"></vz-line-chart>
    <style>
      vz-line-chart {
        height: 300px;
        position: relative;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-debugger-line-chart.html.js
Polymer({is:"tf-debugger-line-chart",properties:{data:{type:Object,value:null},_defaultSeriesName:{type:String,value:"__debugger_data__",readonly:!0},_lineChartXComponentsCreationMethod:{type:Object,readOnly:!0,value:function(){return function(){var a=new Plottable.Scales.Linear;return{scale:a,axis:new Plottable.Axes.Numeric(a,"bottom"),accessor:function(b){return b.step}}}}},_lineChartYValueAccessor:{type:Object,readOnly:!0,value:function(){return function(a){return a.scalar}}},_lineChartTooltipColumns:{type:Array,
readOnly:!0,value:function(){return[{title:"Name",evaluate:function(a){return"step\x3d"+a.datum.step+"; scalar\x3d "+a.datum.scalar}}]}},_lineChartSmoothingEnabled:{type:Boolean,value:!1,readOnly:!0}},observers:["render(data)"],render:function(a){if(null!=a){this.$$("vz-line-chart").setVisibleSeries([this._defaultSeriesName]);var b=[],c=a.x;a=a.y;for(var e=0;e<c.length;++e)b.push({step:c[e],scalar:a[e]});this.$$("vz-line-chart").setSeriesData(this._defaultSeriesName,b)}}});
</script>

</dom-module>



<dom-module id="tf-tensor-value-view">
  <template>
    <paper-toast id="tensorValueToast" text="" always-on-top></paper-toast>
    <table class="tensor-value-view-table">
      <tr>
        <td colspan="2">
          <div>
            <paper-item id="tensor-name" on-tap="tensorNameCallback">[[tensorName]]
            </paper-item>
            <paper-icon-button icon="close" class="value-view-icon-button" id="value-view-icon-button" title="Close" on-tap="closeButtonCallback"></paper-icon-button>
            <paper-icon-button icon="forward" class="value-view-icon-button" id="value-view-icon-button" title="Continue to" on-tap="continueToButtonCallback"></paper-icon-button>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div>
            <paper-item id="debug-op"></paper-item>
            <paper-input class="inline value-card-input" label="Slicing" id="slicing" value="{{slicing}}" on-change="refresh">
            </paper-input>
          </div>
          <div>
            <paper-input class="inline value-card-input" label="Time Indices" id="time-indices" value="{{timeIndices}}" on-change="refresh">
            </paper-input>
            <paper-button raised id="time-indices-toggle-button" class="tensor-value-buttons" on-click="_timeIndicesToggleButtonCallback">Full History</paper-button>
          </div>
        </td>
        <td class="tensor-value-view-td">
          <template is="dom-if" if="[[_isValueScalar]]">
            <paper-input class="inline" label="Scalar Value" id="value-scalar" value="[[_dataScalar]]">
            </paper-input>
          </template>
          <template is="dom-if" if="[[_isValueLineChart]]">
            <tf-debugger-line-chart data="[[_lineChartData]]"></tf-debugger-line-chart>
          </template>
          <template is="dom-if" if="[[_isValueImage]]">
            <img class="value-image" height="250px" width="250px" src$="[[_dataImageSrc]]">
          </template>
        </td>
      </tr>
    </table>
  </template>
  <style>
    .tensor-value-buttons {
      height: 75%;
      font-size: 10px;
    }
    .tensor-value-view-table {
      width: 500px;
      display: inline-table;
      border-spacing: 5px;
      padding-top: 3px;
      padding-bottom: 3px;
      padding-left: 3px;
      padding-right: 3px;
      background-color: #f8f8f8;
      box-shadow: 3px 3px 1px 1px #d8d8d8;
    }
    .tensor-value-view-td {
      width: 350px;
    }
    .value-card-input {
      width: 150px;
    }
    #tensor-name {
      display: inline-block;
      position: relative;
      width: 50%;
      cursor: pointer;
      color: blue;
      text-decoration: underline;
    }
    #debug-op {
      font-size: 90%;
    }
    .value-image {
      image-rendering: pixelated;
    }
    .value-view-icon-button {
      display: inline-block;
      float: right;
      text-align: right;
      width: 20%;
      text-decoration: underline;
      cursor: pointer;
      font-size: 90%;
      color: blue;
    }
    #slicing, #time-indices {
      --paper-input-container-input: {
        font-family: monospace;
      };
    }
  </style>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-tensor-value-view.html.js
Polymer({is:"tf-tensor-value-view",properties:{viewId:String,tensorName:String,debugOp:String,slicing:String,timeIndices:String,continueToButtonCallback:Object,closeButtonCallback:Object,tensorNameCallback:Object,_isTensorValueScalar:{type:Boolean,value:!1},_isTensorValueLineChart:{type:Boolean,value:!1},_isTensorValueImage:{type:Boolean,value:!1},_dataScalar:{type:Number,value:null},_lineChartData:{type:Array,value:null},_dataImageSrc:{type:String,value:null},_requestManager:{type:Object,value:function(){return new Rk.RequestManager(10)}}},
observers:["_updateTimeIndicesToggle(timeIndices)"],ready:function(){this.renderTensorValue()},renderTensorValue:function(){var a=this;if(this.tensorName){this.$$("#debug-op").textContent=this._calculateDebugOpToDisplay();var b=this._rankFromSlicing(this.slicing.trim()),c=this._isTimeIndicesSingleStep(this.timeIndices),e=b;if(!c){if(1<b){this._showToast("History for tensors \x3e 1D is not yet supported.");return}e+=1}b={watch_key:this.tensorName+":"+this.debugOp,slicing:this.slicing,time_indices:this.timeIndices,
mapping:2<=e?"image/png":"none"};var f=Rk.getRouter().pluginRoute("debugger","/tensor_data");b=Rk.addParams(f,b);this._requestManager.request(b).then(function(g){if(null!=g.error)a._showToast(g.error.type+": "+g.error.message);else if(g=c?g.tensor_data[0]:g.tensor_data,0===e)a._setVisualizationType("scalar"),a.set("_dataScalar",g);else if(1===e){a._setVisualizationType("lineChart");for(var h={x:[],y:g},l=0;l<g.length;++l)h.x.push(l+1);a.set("_lineChartData",h)}else 2<=e?(a._setVisualizationType("image"),
a.set("_dataImageSrc","data:image/png;base64,"+g)):a._showToast("Visualization of rank-"+e+" tensors is not yet supported.")})}},refresh:function(){this.tensorName.trim()&&this.renderTensorValue()},_rankFromSlicing:function(a){a.startsWith("[")&&(a=a.slice(1,a.length-1));if(0===a.length)return 0;var b=a.split(",");a=b.length;b=za(b);for(var c=b.next();!c.done;c=b.next())isNaN(Number(c.value))||a--;return a},_setVisualizationType:function(a){"scalar"===a?(this.set("_isValueScalar",!0),this.set("_isValueLineChart",
!1),this.set("_isValueImage",!1)):"lineChart"===a?(this.set("_isValueScalar",!1),this.set("_isValueLineChart",!0),this.set("_isValueImage",!1)):"image"===a?(this.set("_isValueScalar",!1),this.set("_isValueLineChart",!1),this.set("_isValueImage",!0)):console.error("Invalid visualizationType:",a)},_timeIndicesToggleButtonCallback:function(){"full history"===Polymer.dom(this.$$("#time-indices-toggle-button")).textContent.toLowerCase()?this.set("timeIndices",":"):this.set("timeIndices","-1");this.renderTensorValue()},
_updateTimeIndicesToggle:function(a){this._isTimeIndicesSingleStep(a)?Polymer.dom(this.$$("#time-indices-toggle-button")).textContent="Full History":Polymer.dom(this.$$("#time-indices-toggle-button")).textContent="Latest Time Point"},_isTimeIndicesSingleStep:function(a){a.startsWith("[")&&(a=a.slice(1,a.length-1));return!isNaN(Number(a))},_calculateDebugOpToDisplay:function(){return"DebugIdentity"===this.debugOp?"":this.debugOp},_showToast:function(a){this.$.tensorValueToast.setAttribute("text",a);
this.$.tensorValueToast.open()}});
</script>
</dom-module>


<dom-module id="tf-tensor-value-multi-view">
  <template>
    <div id="multiView">
      <div class="section-title">Tensor Values</div>
      <div id="multi-tensor-view-container">
      </div>
    </div>
  </template>
  <style>
    .section-title {
      font-size: 110%;
      font-weight: bold;
    }
    #multiView{
      background-color: #fff;
      padding-top: 3px;
      padding-left: 3px;
      padding-right: 3px;
      box-shadow: 3px 3px #eee;
    }
  </style>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-tensor-value-multi-view.html.js
Polymer({is:"tf-tensor-value-multi-view",properties:{continueToCallback:Function,tensorNameClicked:Function,_tensorViewCounter:{type:Number,value:0}},addView:function(a){var b=this,c=this.$$("#multi-tensor-view-container"),e=document.createElement("tf-tensor-value-view");e.setAttribute("class","debugger-tensor-view");e.viewId=a.viewId;e.tensorName=a.tensorName;e.debugOp=a.debugOp;e.slicing=a.slicing;e.timeIndices=a.timeIndices;e.closeButtonCallback=this._createCloseButtonCallback(a.viewId);e.continueToButtonCallback=
function(){b.continueToCallback(a.deviceName,a.maybeBaseExpandedNodeName)};e.tensorNameCallback=function(){b.tensorNameClicked(a.deviceName,a.maybeBaseExpandedNodeName)};c.appendChild(e);e.refresh()},getViews:function(){var a=this.querySelectorAll(".debugger-tensor-view"),b=[];_.forEach(a,function(c){b.push({viewId:c.viewId,tensorName:c.tensorName,debugOp:c.debugOp,slicing:c.slicing,timeIndices:c.timeIndices})});return b},renderTensorValues:function(){var a=this.querySelectorAll(".debugger-tensor-view");
_.forEach(a,function(b){b.renderTensorValue()})},_redrawViews:function(a){var b=this,c=this.$$("#multi-tensor-view-container"),e=this.querySelectorAll(".debugger-tensor-view");_.forEach(e,function(f){c.removeChild(f)});_.forEach(a,function(f){b.addView(f)})},_createCloseButtonCallback:function(a){var b=this;return function(){for(var c=[],e=b.querySelectorAll(".debugger-tensor-view"),f=0;f<e.length;++f){var g=e[f];g.viewId!==a&&c.push({viewId:g.viewId,tensorName:g.tensorName,debugOp:g.debugOp,slicing:g.slicing,
timeIndices:g.timeIndices})}b._redrawViews(c)}}});
</script>
</dom-module>


<dom-module id="tf-debugger-dashboard">
  <template>
    <paper-toast id="toast" text="" always-on-top></paper-toast>
    <tf-debugger-initial-dialog id="initialDialog"></tf-debugger-initial-dialog>
    
    <tf-dashboard-layout>
      <div class="sidebar" id="left-pane">
        <div id="node-entries" class="node-entries">
          <div class="debugger-section-title">Runtime Node List</div>
          <div class="toggle-source-code">
            Show Code:
            <paper-toggle-button class="toggle-source-code" id="show-source-code">
            </paper-toggle-button>
          </div>
          <tf-op-selector debug-watches="[[_debugWatches]]" debug-watch-change="[[_createDebugWatchChangeHandler()]]" node-clicked="[[_createNodeClickedHandler()]]" force-expand-and-check-node-name="[[_forceExpandAndCheckNodeName]]" force-expand-node-name="[[_forceExpandNodeName]]">
          </tf-op-selector>
        </div>
        <div id="source-code-view-div" class="source-code-view-div" hidden$="{{!_sourceCodeShown}}">
          <div class="debugger-section-title">Source Code</div>
          <tf-source-code-view id="sourceCodeView" request-manager="[[_requestManager]]" debug-watches="[[_debugWatches]]" focus-node-name="[[_sourceFocusNodeName]]" node-clicked="[[_createNodeClickedHandler()]]" continue-to-node="[[_createContinueToNodeHandler()]]"></tf-source-code-view>
        </div>
        <tf-debugger-resizer current-length="{{_leftPaneWidth}}" min-length="[[_minleftPaneWidth]]" max-length="[[_maxleftPaneWidth]]">
        </tf-debugger-resizer>
        <div>
          <tf-session-runs-view id="sessionRunsView" latest-session-run="[[_latestSessionRun]]" session-run-key-to-device-names="[[_sessionRunKey2DeviceNames]]" sole-active="[[_sessionRunSoleActive]]" node-or-tensor-clicked="[[_createFeedFetchTargetClickedHandler()]]">
          </tf-session-runs-view>
        </div>
        <div class="buttons-container">
          <paper-button raised class="continue-button" on-click="_step">
              <span>[[_stepButtonText]]</span>
          </paper-button>
          <tf-debugger-continue-dialog id="continueDialog" session-run-go="[[_createSessionRunGo()]]" tensor-condition-go="[[_createTensorConditionGo()]]" force-continuation-stop="[[_createForceContinuationStop()]]">
          </tf-debugger-continue-dialog>
        </div>
        <div class="container">
          <tf-graph-loader id="loader" out-graph-hierarchy="{{graphHierarchy}}" out-graph="{{graph}}" out-stats="{{stats}}" progress="{{_graphProgress}}"></tf-graph-loader>
        </div>
      </div>
      <div class="center" id="center-content">
        <div id="top-right-quadrant">
          <paper-tabs selected="{{_topRightSelected}}">
            <template is="dom-repeat" items="[[_topRightTabs]]">
              <paper-tab id="[[item.id]]">[[item.name]]</paper-tab>
            </template>
          </paper-tabs>
          <span id="runtime-graph-device-name">
          </span>
          <paper-dropdown-menu id="active-runtime-graph-device-name" no-label-float="true" label="Device name" selected-item-label="{{_activeRuntimeGraphDeviceName}}">
            <paper-menu class="dropdown-content" slot="dropdown-content">
              <template is="dom-repeat" items="[[_activeSessionRunDevices]]">
                <paper-item no-label-float="true">[[item]]</paper-item>
              </template>
            </paper-menu>
          </paper-dropdown-menu>
          <paper-spinner-lite class="spinner" id="top-right-spinner" hidden="[[!_busy]]" active="[[_busy]]">
          </paper-spinner-lite>
          <paper-progress id="top-right-progress-bar" value="0"></paper-progress>
          <template is="dom-if" if="[[_isTopRightRuntimeGraphsActive]]">
            <div id="graph-container">
              <tf-graph id="graph" graph-hierarchy="[[graphHierarchy]]" basic-graph="[[graph]]" stats="[[stats]]" progress="{{_graphProgress}}" color-by="structure" color-by-params="{{colorByParams}}" render-hierarchy="{{_renderHierarchy}}" node-context-menu-items="[[_createNodeContextMenuItems()]]"></tf-graph>
              <div class="context-menu"></div>
            </div>
          </template>
          <template is="dom-if" if="[[_isTopRightTensorValuesActive]]">
            <tf-tensor-value-multi-view id="tensorValueMultiView" continue-to-callback="[[_createContinueToCallback()]]" tensor-name-clicked="[[_createNodeClickedHandler()]]">
            </tf-tensor-value-multi-view>
          </template>
        </div>

        <tf-debugger-resizer is-horizontal="true" current-length="{{_topRightQuadrantHeight}}" min-length="[[_minTopRightQuadrantHeight]]" max-length="[[_maxTopRightQuadrantHeight]]">
        </tf-debugger-resizer>

        <div id="tensor-data" class="tensor-data">
          <tf-tensor-data-summary id="tensorDataSummary" latest-tensor-data="[[_latestTensorData]]" expand-handler="[[_createTensorDataExpandHandler()]]" continue-to-callback="[[_createContinueToCallback()]]" highlighted-node-name="[[_highlightNodeName]]" tensor-name-clicked="[[_createNodeClickedHandler()]]" get-health-pill="[[_createGetHealthPill()]]">
          </tf-tensor-data-summary>
        </div>
      </div>
    </tf-dashboard-layout>

    <style include="dashboard-style"></style>
    <style>
      :host {
        display: block;
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        overflow: hidden;
      }
      :host paper-toast {
        text-align: center;
        font-size: 110%;
        width: 40vw;
        margin-left: 30vw;
      }
      tf-dashboard-layout {
        --tf-dashboard-layout-sidebar-basis: auto;
        --tf-dashboard-layout-sidebar-max-width: unset;
        --tf-dashboard-layout-sidebar-min-width: unset;
      }
      .debugger-section-title {
        font-size: 110%;
        font-weight: bold;
      }
      paper-tabs {
        color: #555;
        font-weight: normal;
      }
      paper-tab.iron-selected {
        color: black;
        font-weight: bold;
      }
      #initialDialog {
        /** This matches the default z-index of paper-dialog backdrops. */
        z-index: 102;
      }
      /** Resize the region for the graph as the user resizes the region. */
      #graph-container {
        height: calc(100% - 120px);
        /** Clip the minimap if the height of the graph container is small. */
        overflow: hidden;
        position: relative;
      }
      #graph {
        position: relative;
        display: block;
        width: 100%;
        height: 100%;
      }
      #tooltip-sorting {
        display: flex;
        font-size: 14px;
        margin-top: 5px;
      }
      #tooltip-sorting-label {
        margin-top: 13px;
      }
      #tooltip-sorting paper-dropdown-menu {
        margin-left: 10px;
        --paper-input-container-focus-color: var(--tb-orange-strong);
        width: 105px;
      }
      #x-type-selector paper-button {
        margin: 5px 3px;
      }
      #runtime-graph-device-name {
        font-size: 85%;
        word-break: break-all;
        display: inline-block;
      }
      #active-runtime-graph-device-name {
        font-size: 85%;
        width: 350px;
        display: inline-block;
      }
      #top-right-progress-bar {
        width: 100%;
        display: inline-block;
        vertical-align: middle;
      }
      .line-item {
        display: block;
        padding-top: 5px;
      }
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
      .sidebar {
        height: 100%;
        overflow-x: visible;
        position: relative;
      }
      .center {
        position: relative;
        height: 100%;
      }
      tf-debugger-resizer {
        right: -10px;
      }
      #center-content {
        position: absolute;
        right: 0;
      }
      /** The resizer should have no space to the left of it. */
      #center-content tf-debugger-resizer[is-horizontal] {
        margin-left: -23px;
      }
      .context-menu {
        position: absolute;
        display: none;
        background-color: #e2e2e2;
        border-radius: 2px;
        font-size: 14px;
        min-width: 150px;
        border: 1px solid #d4d4d4;
      }
      .spinner {
        width: 20px;
        height: 20px;
        vertical-align: middle;
      }
      .node-entries {
        box-shadow: 3px 3px #ddd;
        box-sizing: border-box;
        height: 80%;
        overflow: auto;
        padding-left: 3px;
        padding-right: 3px;
        padding-top: 3px;
        position: relative;
        vertical-align: top;
        width: 100%;
      }
      .source-code-view-div {
        position: relative;
        height: 40%;
        width: 100%;
        vertical-align: top;
        overflow: hidden;
        padding-top: 3px;
        padding-left: 3px;
        padding-right: 3px;
        box-shadow: 3px 3px #ddd;
      }
      #sessionRunsView {
        position: relative;
        width: 100%;
        overflow: auto;
        max-height: 25vh;
      }
      .buttons-container {
        padding: 20px 0;
      }
      #tensor-data {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 20px 0;
        margin: 0 0 20px 0;
      }
      #tensorDataSummary {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
      #top-right-quadrant {
        height: 66%;
        overflow: auto;
      }
      .toggle-source-code {
        margin-right: 1em;
        font-size: 80%;
        float: right;
      }
      /deep/ .context-menu ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
        cursor: default;
      }
      /deep/ .context-menu ul li {
        padding: 4px 16px;
      }
      /deep/ .context-menu ul li:hover {
        background-color: #f3913e;
        color: white;
      }

      paper-input {
        width: 200px;
      }
      .inline, paper-item {
        display: inline;
      }

      vz-line-chart {
        height: 300px;
        position: relative;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tensor-shape-helper.js
(function(a){function b(c,e){return c<=e?"::":"::"+Math.ceil(c/e)}a.getDefaultSlicing=function(c){if(0===c.length)return"";if(1===c.length)return"["+b(c[0],1E3)+"]";if(2===c.length)return"["+b(c[0],250)+", "+b(c[1],250)+"]";if(3===c.length)return"[0, "+b(c[1],250)+", "+b(c[2],250)+"]";if(4===c.length)return"[0, "+b(c[1],250)+", "+b(c[2],250)+", 0]";for(var e="[",f=0;f<c.length;++f)e=f<c.length-2?e+"0":e+b(c[f],250),f<c.length-1&&(e+=", ");return e+"]"};a.rankFromSlicing=function(c){c.startsWith("[")&&
(c=c.slice(1,c.length-1));if(0===c.length)return 0;c=c.split(",");for(var e=c.length,f=0;f<c.length;f++)isNaN(Number(c[f]))||e--;return e}})(pl||(pl={}));
</script>
  <script>//~~WEBPATH~~/tf-debugger-dashboard/tf-debugger-dashboard.html.js
var ql=((window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-70)/2;
Polymer({is:"tf-debugger-dashboard",properties:{_topRightTabs:{type:Array,value:[{id:"tab-runtime-graphs",name:"Runtime Graphs"},{id:"tab-tensor-values",name:"Tensor Values"}],readonly:!0},_isTopRightRuntimeGraphsActive:{type:Boolean,value:!0},_isTopRightTensorValuesActive:{type:Boolean,value:!1},_topRightSelected:{type:String,value:"0",observer:"_topRightSelectedChanged"},_longPollCount:{type:Number,value:0},_stepButtonText:{type:String,value:"Step"},_continueButtonText:{type:String,value:"Continue..."},
_tensorViewIdCounter:{type:Number,value:0},isReloadDisabled:{type:Boolean,value:!0,readOnly:!0},alreadyStarted:{type:Boolean,value:!1},_currentSessionRunInfo:{type:String,value:null},_sessionRunTotalCounter:{type:Number,value:0},_sessionRunCounters:{type:Object,value:{}},_sessionRunKey2DeviceNames:{type:Object,value:{}},_activeSessionRunKey:{type:String,value:null},_activeSessionRunDevices:{type:Array,value:[]},_activeSessionRunNumDevices:{type:Number,value:-1},_activeRuntimeGraphDeviceName:{type:String,
value:null,notify:!0},_highlightNodeName:{type:String,value:null},_continueToType:{type:String,value:""},_continueToCounter:{type:Number,value:0},_continueStop:{type:Boolean,value:!1},_continueToTarget:{type:String,value:""},_continueToCounterTarget:{type:Number,value:-1},_forceExpandAndCheckNodeName:String,_forceExpandNodeName:String,_sourceFocusNodeName:String,_sourceCodeShown:{type:Boolean,value:!1},_graphProgress:{type:Object},_requestManager:{type:Object,value:function(){return new Rk.RequestManager(50)}},
_busy:{type:Boolean,value:!1},_leftPaneWidth:{type:Number,value:Uk.getNumberInitializer("_leftPaneWidth",{defaultValue:450}),observer:"_leftPaneWidthObserver"},_minleftPaneWidth:{type:Number,value:450,readOnly:!0},_maxleftPaneWidth:{type:Number,computed:"_computeMaxleftPaneWidth(_windowWidth, _maxMainContentWidth, _resizerWidth)"},_maxMainContentWidth:{type:Number,value:350,readOnly:!0},_topRightQuadrantHeight:{type:Number,value:Uk.getNumberInitializer("_topRightQuadrantHeight",{defaultValue:ql}),
observer:"_topRightQuadrantHeightObserver"},_minTopRightQuadrantHeight:{type:Number,value:200,readOnly:!0},_maxTopRightQuadrantHeight:{type:Number,computed:"_computeMaxTopRightQuadrantHeight(_windowHeight, _resizerWidth)"},_resizerWidth:{type:Number,value:30,readOnly:!0},_windowWidth:Number,_windowHeight:Number,_debugWatches:Array,_latestSessionRun:Object},observers:["_onActiveRuntimeGraphDeviceNameChange(_activeRuntimeGraphDeviceName)","_sizeDashboardRegions(_leftPaneWidth, _topRightQuadrantHeight, _windowWidth)",
"_graphProgressUpdated(_graphProgress)"],listeners:{"show-source-code.change":"_showSourceCodeChanged"},ready:function(){var a=this;this._handleWindowResize();window.addEventListener("resize",function(){a._handleWindowResize()},!1);this.reload()},long_poll:function(){var a=this,b={pos:++this._longPollCount},c=Rk.getRouter().pluginRoute("debugger","/comm");c=Rk.addParams(c,b);this._requestManager.request(c).then(function(e){var f=e.type;e=e.data;if("meta"===f){var g=e.run_key,h=g[0].split(","),l=g[1].split(","),
n=g[2].split(","),m=a._activeSessionRunKey;a.set("_activeSessionRunKey",g);a.set("_latestSessionRun",{feeds:h,fetches:l,targets:n});a.set("_sessionRunSoleActive",!0);void 0===a._sessionRunKey2DeviceNames[g]?(a._sessionRunKey2DeviceNames[g]=[],a.set("_activeSessionRunDevices",[])):a.set("_activeSessionRunDevices",a._sessionRunKey2DeviceNames[g]);h="Feeds: "+h+"; Fetches: "+l+"; Targets: "+n;a._currentSessionRunInfo=h;a._sessionRunCounters.hasOwnProperty(h)?a._sessionRunCounters[h]+=1:a._sessionRunCounters[h]=
1;a._sessionRunTotalCounter++;a.$.initialDialog.closeDialog();a._continueToType&&_.isEqual(m,g)||(a._processGatedGrpcDebugOps(g,!1),a._announceNewSessionRun())}else"tensor"===f?(g=e.device_name,m=e.node_name,h=e.maybe_base_expanded_node_name,a._activeRuntimeGraphDeviceName!=g?a.set("_activeRuntimeGraphDeviceName",g):!a._continueToType&&a._isTopRightRuntimeGraphsActive&&(a._focusOnGraphNode(g,h),a.set("_forceExpandNodeName",g+"/"+h)),a.set("_sessionRunSoleActive",!1),l=m+":"+e.output_slot,a.set("_latestTensorData",
{deviceName:g,tensorName:l,nodeName:m,maybeBaseExpandedNodeName:h,debugOp:e.debug_op,dtype:e.dtype,shape:e.shape,value:e.values}),a._maybeUpdateTensorValueViews(l,e.debug_op),a.set("_busy",!1)):console.error("Invalid long-polling response type: ",f);null!=a._continueToType&&a._processContinueTo(f,e);a.long_poll()})},_processContinueTo:function(a,b){this._continueStop?this._clearContinueTo():"SessionRun"===this._continueToType?this._processContinueToSessionRun("meta"===a):"TensorCondition"===this._continueToType?
this._step():"op"===this._continueToType?this._processContinueToOp("meta"===a,b):null!=this._continueToType&&""!==this._continueToType&&console.error("Invalid _continueToType:",this._continueToType)},_processContinueToSessionRun:function(a){a&&this.set("_continueToCounter",this._continueToCounter+1);this._continueToCounter<this._continueToCounterTarget?this._step():this._clearContinueTo()},_processContinueToOp:function(a,b){a&&this._announceNewSessionRun();a=b.device_name;b=b.maybe_base_expanded_node_name;
var c=null==b?null:pl.removeNodeNameBaseExpansion(b);a+"/"+b===this._continueToTarget||a+"/"+c===this._continueToTarget?(this._clearContinueTo(),this._sourceCodeShown&&this.set("_sourceFocusNodeName",c)):this._step()},_maybeUpdateTensorValueViews:function(a,b){var c=this.$$("#tensorValueMultiView");if(null!=c){var e=!1;_.forEach(c.getViews(),function(f){if(f.tensorName===a&&f.debugOp===b)return e=!0,!1});e&&c.renderTensorValues()}},reload:function(){var a=this;if(!this.alreadyStarted){this.set("alreadyStarted",
!0);var b=Rk.getRouter().pluginRoute("debugger","/debugger_grpc_host_port");this._requestManager.request(b).then(function(c){a.$.initialDialog.openDialog(c.host,c.port)}).catch(function(){a.$.initialDialog.openDisabledDialog()}).then(function(){a.long_poll()})}},_showSourceCodeChanged:function(a){this.set("_sourceCodeShown",a.target.active);this._sourceCodeShown?(this.$$("#node-entries").style.height="40%",this.$.sourceCodeView.render()):this.$$("#node-entries").style.height="80%"},_showToast:function(a){this.$.toast.setAttribute("text",
a);this.$.toast.open()},_announceNewSessionRun:function(){this._showToast("Session.run() #"+this._sessionRunTotalCounter+" is starting.")},_displayGraph:function(a,b){a={run_key:JSON.stringify(a),device_name:b};a=Rk.addParams("/data/plugin/debugger/debugger_graph",a);this.$.loader.datasets=[{name:"/debugger_graph",path:a}];this.$.loader.set("selectedDataset",0)},_processGatedGrpcDebugOps:function(a,b){var c=this;b?console.log("Polling for first GraphDef for run key:",a):this.set("_activeRuntimeGraphDeviceName",
null);var e={mode:"retrieve_all",run_key:JSON.stringify(a)},f=Rk.getRouter().pluginRoute("debugger","/gated_grpc");e=Rk.addParams(f,e);var g=[];this._requestManager.request(e).then(function(h){if(0==h.device_names.length)b||c._step(),c._processGatedGrpcDebugOps(a,!0);else{var l=null,n;for(n in h.gated_grpc_tensors)if(h.gated_grpc_tensors.hasOwnProperty(n)){-1===c._sessionRunKey2DeviceNames[a].indexOf(n)&&(c._sessionRunKey2DeviceNames[a].push(n),c.$.sessionRunsView.updateNumDevices(c._sessionRunKey2DeviceNames[a].length));
c.set("_activeSessionRunDevices",c._sessionRunKey2DeviceNames[a].slice());l=c._activeSessionRunDevices[c._activeSessionRunDevices.length-1];for(var m=h.gated_grpc_tensors[n],q=0;q<m.length;++q)g.push({device_name:n,node_name:m[q][0],op_type:m[q][1],output_slot:m[q][2],debug_op:m[q][3]})}null!=l&&(c.set("_activeRuntimeGraphDeviceName",l),h=Polymer.dom(c.$$("#active-runtime-graph-device-name")),null!=h&&h.setAttribute("selected",l));pl.sortAndBaseExpandDebugWatches(g);c.set("_debugWatches",g);c.$.sourceCodeView.render(g)}})},
_createDebugWatchChangeHandler:function(){var a=this;return function(b,c){c=c?"break":"disable";a._requestBreakpointStateChange(pl.getCleanNodeName(b.device_name+"/"+b.node_name),b.output_slot,b.debug_op,c)}},_focusOnGraphNode:function(a,b){null!=a&&this._activeRuntimeGraphDeviceName!==a&&this.set("_activeRuntimeGraphDeviceName",a);this._setTopRightRuntimeGraphsToActive();var c=this.$$("#graph");if(c.selectedNode===b)c.panToNode(b);else{var e=c.get("renderHierarchy").hierarchy.getNodeMap();null==
e[b]&&(b=pl.removeNodeNameBaseExpansion(b));null!=e[b]&&c.set("selectedNode",b)}this.set("_highlightNodeName",a+"/"+b)},_createNodeClickedHandler:function(){var a=this;return function(b,c,e){a._sourceCodeShown&&!0!==e&&a.set("_sourceFocusNodeName",pl.removeNodeNameBaseExpansion(c));a._focusOnGraphNode(b,c);a.set("_forceExpandNodeName",b+"/"+c)}},_createFeedFetchTargetClickedHandler:function(){var a=this;return function(b){var c=b;-1!==c.indexOf(":")&&(c=c.slice(0,c.indexOf(":")));b=_.find(a._debugWatches,
function(e){return e.node_name===c||0===e.node_name.indexOf(c)&&"("===e.node_name[c.length]});null==b?a._showToast("Node '"+c+"' is not in the runtime graph of the current Session.run or does not have a debug op attached."):a._focusOnGraphNode(b.device_name,c)}},_createTensorDataExpandHandler:function(){var a=this;return function(b){a._setTopRightTensorValuesToActive();setTimeout(function(){a.$$("#tensorValueMultiView").addView({viewId:a._createTensorViewId(),deviceName:b.deviceName,tensorName:b.tensorName,
nodeName:b.nodeName,maybeBaseExpandedNodeName:b.maybeBaseExpandedNodeName,debugOp:b.debugOp,slicing:pl.getDefaultSlicing(b.shape),timeIndices:"-1"})},10)}},_createTensorViewId:function(){var a="debugger-tensor-view-"+this._tensorViewIdCounter;this._tensorViewIdCounter++;return a},_createNodeContextMenuItems:function(){var a=this;return[{title:function(){return"Expand and highlight"},action:function(b){var c=pl.getCleanNodeName(b.node.name);b=a._activeRuntimeGraphDeviceName+"/"+b.node.name;a.set("_forceExpandNodeName",
b);a.set("_highlightNodeName",b);a._sourceCodeShown&&a.set("_sourceFocusNodeName",pl.removeNodeNameBaseExpansion(c))}},{title:function(){return"Add breakpoint"},action:function(b){var c=pl.getCleanNodeName(b.node.name);a.set("_forceExpandAndCheckNodeName",a._activeRuntimeGraphDeviceName+"/"+b.node.name);a._sourceCodeShown&&a.set("_sourceFocusNodeName",pl.removeNodeNameBaseExpansion(c))}},{title:function(){return"Continue to"},action:function(b){-1!==["_Arg","_Retval"].indexOf(b.node.op)?a._showToast('Cannot continue to node "'+
b.node.name+'", due to op type "'+b.node.op+'".'):a._continueToNode(a._activeRuntimeGraphDeviceName,b.node.name)}}]},_createGetHealthPill:function(){var a=this;return function(b,c,e,f){var g={watch_key:b,time_indices:"-1",mapping:"health-pill"},h=Rk.getRouter().pluginRoute("debugger","/tensor_data");g=Rk.addParams(h,g);a._requestManager.request(g).then(function(l){l=l.tensor_data[0];f(l);a._conditionalHealthPillStop(b,c,e,l)})}},_conditionalHealthPillStop:function(a,b,c,e){var f=this;if("TensorCondition"===
this._continueToType&&pl.checkHealthPillAgainstTensorConditionKey(this._continueToTarget,e,this._continueToCounterTarget)){this.set("_continueStop",!0);e=pl.removeNodeNameBaseExpansion(c);this._sourceCodeShown&&this.set("_sourceFocusNodeName",e);this._focusOnGraphNode(b,c);var g=b+"/"+c;this.set("_forceExpandNodeName",g);setTimeout(function(){f.set("_highlightNodeName",null);f.set("_highlightNodeName",g)},100);this._showToast('Tensor condition "'+this._continueToTarget+'" is met by watch key: "'+
a+'".\nStopping continuation.')}},_continueToNode:function(a,b){var c=pl.getCleanNodeName(b);a=a+"/"+b;this._requestBreakpointStateChange(c,0,"DebugIdentity","break");this.set("_forceExpandAndCheckNodeName",a);this._sourceCodeShown&&this.set("_sourceFocusNodeName",pl.removeNodeNameBaseExpansion(c));this._setContinueTo("op",a);this.$.continueDialog.updateContinueButtonText(!0);this._step()},_createContinueToNodeHandler:function(){var a=this;return function(b,c){a._continueToNode(b,c)}},_onActiveRuntimeGraphDeviceNameChange:function(a){var b=
Polymer.dom(this.$$("#runtime-graph-device-name"));if(0<this._activeSessionRunDevices.length){var c=a+(" (device "+(this._activeSessionRunDevices.indexOf(a)+1)+" of "+this._activeSessionRunDevices.length+")");this._isTopRightRuntimeGraphsActive&&null!=b&&(b.textContent=c)}else this._isTopRightRuntimeGraphsActive&&null!=b&&(b.textContent="Waiting for device...");null!=a&&this._displayGraph(this._activeSessionRunKey,a)},_step:function(){var a=this;if(null!=this._activeSessionRunKey){this.set("_busy",
!0);var b={mode:"retrieve_device_names",run_key:JSON.stringify(this._activeSessionRunKey)},c=Rk.getRouter().pluginRoute("debugger","/gated_grpc");b=Rk.addParams(c,b);this._requestManager.request(b).then(function(e){for(var f=!1,g=0;g<e.device_names.length;++g)if(-1===a._activeSessionRunDevices.indexOf(e.device_names[g])){f=!0;break}e=Rk.getRouter().pluginRoute("debugger","/ack");a._requestManager.request(e).then(function(){f&&a._processGatedGrpcDebugOps(a._activeSessionRunKey,!1)})})}},_createSessionRunGo:function(){var a=
this;return function(b){a._setContinueTo("SessionRun",a._currentSessionRunInfo,b);a._step()}},_createTensorConditionGo:function(){var a=this;return function(b,c){a._setContinueTo("TensorCondition",b,c);a.$.tensorDataSummary.enableHealthPills();a._step()}},_createForceContinuationStop:function(){var a=this;return function(){a._showToast('Continuation of type "'+a._continueToType+'" was interrupted by user.');a.set("_continueStop",!0)}},_setContinueTo:function(a,b,c){this._continueToType=a;this._continueToTarget=
b;this._continueToCounterTarget=void 0===c?-1:c;this._continueToCounter=0;this._continueStop=!1},_clearContinueTo:function(){this.$.continueDialog.notifyContinuationStop();this._continueToTarget=this._continueToType="";this._continueToCounterTarget=-1;this._continueToCounter=0;this._continueStop=!1;this.set("_busy",!1)},_createContinueToCallback:function(){var a=this;return function(b,c){a._setContinueTo("op",b+"/"+c);a._step();a._isTopRightRuntimeGraphsActive&&a._focusOnGraphNode(b,c);a.set("_forceExpandNodeName",
b+"/"+c)}},_topRightSelectedChanged:function(a){a=this._topRightTabs[a].id;this.set("_isTopRightRuntimeGraphsActive","tab-runtime-graphs"===a);this.set("_isTopRightTensorValuesActive","tab-tensor-values"===a)},_setTopRightRuntimeGraphsToActive:function(){this.set("_topRightSelected","0");this.set("_isTopRightRuntimeGraphsActive",!0);this.set("_isTopRightTensorValuesActive",!1)},_setTopRightTensorValuesToActive:function(){this.set("_topRightSelected","1");this.set("_isTopRightRuntimeGraphsActive",
!1);this.set("_isTopRightTensorValuesActive",!0)},_requestBreakpointStateChange:function(a,b,c,e){var f=this;a={mode:"set_state",node_name:a,output_slot:b,debug_op:c,state:e};b=Rk.getRouter().pluginRoute("debugger","/gated_grpc");a=Rk.addParams(b,a);this.set("_busy",!0);this._requestManager.request(a).then(function(g){f.set("_busy",!1);console.log("Breakpoint set_state response: ",g)})},_graphProgressUpdated:function(a){var b=this.$$("#top-right-progress-bar");null==this._latestSessionRun?(b.setAttribute("value",
0),this.set("_busy",!1)):(b.setAttribute("value",a.value),this.set("_busy",100>a.value))},_handleWindowResize:function(){this.set("_windowWidth",window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth);this.set("_windowHeight",window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);this._sizeDashboardRegions(this._leftPaneWidth,this._topRightQuadrantHeight,this._windowWidth)},_computeMaxleftPaneWidth:function(a,b,c){return a-b-c},_computeMaxTopRightQuadrantHeight:function(a,
b){return a-b-70},_sizeDashboardRegions:function(a,b,c){this.$$("#left-pane").style.width=a+"px";a=c-a-this._resizerWidth-8;this.$$("#center-content").style.width=a+"px";a=b-this._resizerWidth;this.$$("#top-right-quadrant").style.height=a+"px";this.$$("#tensor-data").style.top=b+"px"},_leftPaneWidthObserver:Uk.getNumberObserver("_leftPaneWidth",{defaultValue:450}),_topRightQuadrantHeightObserver:Uk.getNumberObserver("_topRightQuadrantHeight",{defaultValue:ql})});
$k.registerDashboard({plugin:"debugger",elementName:"tf-debugger-dashboard"});
</script>
</dom-module>











<dom-module id="paper-material-shared-styles">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
      }

      :host([elevation="1"]) {
        @apply --shadow-elevation-2dp;
      }

      :host([elevation="2"]) {
        @apply --shadow-elevation-4dp;
      }

      :host([elevation="3"]) {
        @apply --shadow-elevation-6dp;
      }

      :host([elevation="4"]) {
        @apply --shadow-elevation-8dp;
      }

      :host([elevation="5"]) {
        @apply --shadow-elevation-16dp;
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-material">
  <template>
    <style include="paper-material-shared-styles"></style>
    <style>
      :host([animated]) {
        @apply --shadow-transition;
      }
      :host {
        @apply --paper-material;
      }
    </style>

    <slot></slot>
  </template>
</dom-module>
<script>//~~WEBPATH~~/paper-material/paper-material.html.js
Polymer({is:"paper-material",properties:{elevation:{type:Number,reflectToAttribute:!0,value:1},animated:{type:Boolean,reflectToAttribute:!0,value:!1}}});
</script>












<dom-module id="tf-graph-debugger-data-card">
<template>
<style>
:host {
  font-size: 12px;
  margin: 0;
  padding: 0;
  display: block;
}

h2 {
  padding: 0;
  text-align: center;
  margin: 0;
}

.health-pill-legend {
  padding: 15px;
}

.health-pill-legend h2 {
  text-align: left;
}

.health-pill-entry {
  margin: 10px 10px 10px 0;
}

.health-pill-entry .color-preview {
  width: 26px;
  height: 26px;
  border-radius: 3px;
  display: inline-block;
  margin: 0 10px 0 0;
}

.health-pill-entry .color-label, .health-pill-entry .tensor-count {
  color: #777;
  display: inline-block;
  height: 26px;
  font-size: 22px;
  line-height: 26px;
  vertical-align: top;
}

.health-pill-entry .tensor-count {
  float: right;
}

#health-pill-step-slider {
  width: 100%;
  margin: 0 0 0 -15px;
  /* 31 comes from adding a padding of 15px from both sides of the paper-slider, subtracting
   * 1px so that the slider width aligns with the image (the last slider marker takes up 1px),
   * and adding 2px to account for a border of 1px on both sides of the image. 30 - 1 + 2.
   * Apparently, the paper-slider lacks a mixin for those padding values. */
  width: calc(100% + 31px);
}

#health-pills-loading-spinner {
  width: 20px;
  height: 20px;
  vertical-align: top;
}

#health-pill-step-number-input {
  text-align: center;
  vertical-align: top;
}

#numeric-alerts-table-container {
  max-height: 400px;
  overflow-x: hidden;
  overflow-y: auto;
}

#numeric-alerts-table {
  text-align: left;
}

#numeric-alerts-table td {
  vertical-align: top;
}

#numeric-alerts-table .first-offense-td {
  display: inline-block;
}

.first-offense-td {
  width: 80px;
}

.tensor-device-td {
  max-width: 140px;
  word-wrap : break-word;
}

.tensor-section-within-table {
  color: #266236;
  cursor: pointer;
  opacity: 0.8;
  text-decoration: underline;
}

.tensor-section-within-table:hover {
  opacity: 1;
}

.device-section-within-table {
  color: #666;
}

.mini-health-pill {
  width: 130px;
}

.mini-health-pill > div {
  height: 100%;
  width: 60px;
  border-radius: 3px;
}

#event-counts-th {
  padding: 0 0 0 10px;
}

.negative-inf-mini-health-pill-section {
  background: rgb(255, 141, 0);
  width: 20px;
}

.positive-inf-mini-health-pill-section {
  background: rgb(0, 62, 212);
  width: 20px;
}

.nan-mini-health-pill-section {
  background: rgb(204, 47, 44);
  width: 20px;
}

.negative-inf-mini-health-pill-section,
.positive-inf-mini-health-pill-section,
.nan-mini-health-pill-section {
  color: #fff;
  display: inline-block;
  height: 100%;
  line-height: 20px;
  margin: 0 0 0 10px;
  text-align: center;
}

.no-numeric-alerts-notification {
  margin: 0;
}
</style>
<paper-material elevation="1" class="card health-pill-legend">
  <div class="title">
    Enable all (not just sampled) steps. Requires slow disk read.
  </div>
  <paper-toggle-button id="enableAllStepsModeToggle" checked="{{allStepsModeEnabled}}">
  </paper-toggle-button>
  <h2>
    Step of Health Pills:
    <template is="dom-if" if="[[allStepsModeEnabled]]">
      <input type="number" id="health-pill-step-number-input" min="0" max="[[_biggestStepEverSeen]]" value="{{specificHealthPillStep::input}}">
    </template>
    <template is="dom-if" if="[[!allStepsModeEnabled]]">
      [[_currentStepDisplayValue]]
    </template>
    <paper-spinner-lite active hidden$="[[!areHealthPillsLoading]]" id="health-pills-loading-spinner"></paper-spinner-lite>
  </h2>
  <template is="dom-if" if="[[allStepsModeEnabled]]">
    <paper-slider id="health-pill-step-slider" immediate-value="{{specificHealthPillStep}}" max="[[_biggestStepEverSeen]]" snaps step="1" value="{{specificHealthPillStep}}"></paper-slider>
  </template>
  <template is="dom-if" if="[[!allStepsModeEnabled]]">
    <template is="dom-if" if="[[_maxStepIndex]]">
      <paper-slider id="health-pill-step-slider" immediate-value="{{healthPillStepIndex}}" max="[[_maxStepIndex]]" snaps step="1" value="{{healthPillStepIndex}}"></paper-slider>
    </template>
  </template>
  <h2>
    Health Pill
    <template is="dom-if" if="[[healthPillValuesForSelectedNode]]">
      Counts for Selected Node
    </template>
    <template is="dom-if" if="[[!healthPillValuesForSelectedNode]]">
      Legend
    </template>
  </h2>
  <template is="dom-repeat" items="[[healthPillEntries]]">
    <div class="health-pill-entry">
      <div class="color-preview" style="background:[[item.background_color]]"></div>
      <div class="color-label">[[item.label]]</div>
      <div class="tensor-count">
        [[_computeTensorCountString(healthPillValuesForSelectedNode, index)]]
      </div>
    </div>
  </template>
  <div hidden$="[[!_hasDebuggerNumericAlerts(debuggerNumericAlerts)]]">
    <h2 id="numeric-alerts-header">Numeric Alerts</h2>
    <p>
      Alerts are sorted from top to bottom by increasing timestamp.
    
    <div id="numeric-alerts-table-container">
      <table id="numeric-alerts-table">
        <thead>
          <tr>
            <th>First Offense</th>
            <th>Tensor (Device)</th>
            <th id="event-counts-th">Event Counts</th>
          </tr>
        </thead>
        <tbody id="numeric-alerts-body">
        </tbody>
      </table>
    </div>
  </div>
  <template is="dom-if" if="[[!_hasDebuggerNumericAlerts(debuggerNumericAlerts)]]">
    <p class="no-numeric-alerts-notification">
      No numeric alerts so far. That is likely good. Alerts indicate the presence of NaN
      or (+/-) Infinity values, which may be concerning.
    
  </template>
</paper-material>
</template>
<script>//~~WEBPATH~~/tf-graph-debugger-data-card/tf-graph-debugger-data-card.html.js
Polymer({is:"tf-graph-debugger-data-card",properties:{renderHierarchy:Object,debuggerNumericAlerts:{type:Array,notify:!0},nodeNamesToHealthPills:Object,healthPillStepIndex:{type:Number,notify:!0},specificHealthPillStep:{type:Number,value:0,notify:!0},selectedNode:{type:String,notify:!0},highlightedNode:{type:String,notify:!0},selectedNodeInclude:{type:Number,notify:!0},areHealthPillsLoading:Boolean,healthPillEntries:{type:Array,value:tf.graph.scene.healthPillEntries,readOnly:!0},healthPillValuesForSelectedNode:{type:Array,
computed:"_computeHealthPillForNode(nodeNamesToHealthPills, healthPillStepIndex, selectedNode, allStepsModeEnabled, areHealthPillsLoading)"},allStepsModeEnabled:{type:Boolean,notify:!0},_biggestStepEverSeen:{type:Number,computed:"_computeBiggestStepEverSeen(nodeNamesToHealthPills)"},_maxStepIndex:{type:Number,computed:"_computeMaxStepIndex(nodeNamesToHealthPills)"},_currentStepDisplayValue:{type:String,computed:"_computeCurrentStepDisplayValue(nodeNamesToHealthPills, healthPillStepIndex, allStepsModeEnabled, specificHealthPillStep, areHealthPillsLoading)"}},
observers:["_updateAlertsList(debuggerNumericAlerts)"],ready:function(){var a=document.getElementById("mainContainer"),b=document.querySelector("tf-dashboard-layout .scrollbar");a&&b&&(a.style.overflow="hidden",b.style.overflow="hidden")},_healthPillsAvailable:function(a,b){return a&&b},_computeTensorCountString:function(a,b){return a?a[b].toFixed(0):""},_computeHealthPillForNode:function(a,b,c,e,f){if(f||!c)return null;a=a[c];return a?(b=a[e?0:b])?b.value.slice(2,8):null:null},_computeCurrentStepDisplayValue:function(a,
b,c,e,f){if(c)return e.toFixed(0);if(f)return 0;for(var g in a)return a[g][b].step.toFixed(0);return 0},_computeBiggestStepEverSeen:function(a){for(var b in a)return a=a[b],Math.max(this._biggestStepEverSeen,a[a.length-1].step);return this._biggestStepEverSeen||0},_computeMaxStepIndex:function(a){for(var b in a)return a[b].length-1;return 0},_hasDebuggerNumericAlerts:function(a){return a&&a.length},_updateAlertsList:function(a){var b=this.$$("#numeric-alerts-body");if(b){b.innerHTML="";for(var c=
0;c<a.length;c++){var e=a[c],f=document.createElement("tr"),g=document.createElement("td");g.innerHTML=tf.graph.util.computeHumanFriendlyTime(e.first_timestamp);g.classList.add("first-offense-td");f.appendChild(g);g=document.createElement("td");g.classList.add("tensor-device-td");var h=document.createElement("div");h.classList.add("tensor-section-within-table");h.innerHTML=e.tensor_name;this._addOpExpansionListener(h,e.tensor_name);g.appendChild(h);h=document.createElement("div");h.classList.add("device-section-within-table");
h.innerHTML="("+e.device_name+")";g.appendChild(h);f.appendChild(g);g=document.createElement("div");g.classList.add("mini-health-pill");h=document.createElement("td");h.classList.add("mini-health-pill-td");h.appendChild(g);f.appendChild(h);e.neg_inf_event_count&&(h=document.createElement("div"),h.classList.add("negative-inf-mini-health-pill-section"),h.innerHTML=e.neg_inf_event_count,h.setAttribute("title",e.neg_inf_event_count+" events with -\u221e"),g.appendChild(h));e.pos_inf_event_count&&(h=document.createElement("div"),
h.classList.add("positive-inf-mini-health-pill-section"),h.innerHTML=e.pos_inf_event_count,h.setAttribute("title",e.pos_inf_event_count+" events with +\u221e"),g.appendChild(h));e.nan_event_count&&(h=document.createElement("div"),h.classList.add("nan-mini-health-pill-section"),h.innerHTML=e.nan_event_count,h.setAttribute("title",e.nan_event_count+" events with NaN"),g.appendChild(h));Polymer.dom(b).appendChild(f)}}},_addOpExpansionListener:function(a,b){var c=this;a.addEventListener("click",function(){function e(){h.scrollTop=
h.scrollHeight-g}var f=tf.graph.render.expandUntilNodeIsShown(c.renderHierarchy,b),g,h=document.querySelector("tf-graph-info#graph-info");h&&(g=h.scrollHeight-h.scrollTop);var l=c.selectedNode;c.set("selectedNode",f);h&&(l?e():window.setTimeout(e,20))})}});
</script>
</dom-module>







<script>//~~WEBPATH~~/iron-scroll-target-behavior/iron-scroll-target-behavior.html.js
Polymer.IronScrollTargetBehavior={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:["_scrollTargetChanged(scrollTarget, isAttached)"],_shouldHaveListener:!0,_scrollTargetChanged:function(a,b){this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null);b&&("document"===a?this.scrollTarget=this._doc:"string"===typeof a?this.scrollTarget=(b=this.domHost)&&b.$?b.$[a]:Polymer.dom(this.ownerDocument).querySelector("#"+
a):this._isValidScrollTarget()&&(this._oldScrollTarget=a,this._toggleScrollListener(this._shouldHaveListener,a)))},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:
0},set _scrollTop(a){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,a):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=a)},set _scrollLeft(a){this.scrollTarget===this._doc?window.scrollTo(a,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=a)},scroll:function(a,b){this.scrollTarget===this._doc?window.scrollTo(a,b):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=a,this.scrollTarget.scrollTop=b)},get _scrollTargetWidth(){return this._isValidScrollTarget()?
this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(a,b){b=b===this._doc?window:b;a?this._boundScrollHandler||(this._boundScrollHandler=this._scrollHandler.bind(this),b.addEventListener("scroll",this._boundScrollHandler)):
this._boundScrollHandler&&(b.removeEventListener("scroll",this._boundScrollHandler),this._boundScrollHandler=null)},toggleScrollListener:function(a){this._shouldHaveListener=a;this._toggleScrollListener(a,this.scrollTarget)}};
</script>




<dom-module id="iron-list">
  <template>
    <style>
      :host {
        display: block;
      }

      @media only screen and (-webkit-max-device-pixel-ratio: 1) {
        :host {
          will-change: transform;
        }
      }

      #items {
        @apply --iron-list-items-container;
        position: relative;
      }

      :host(:not([grid])) #items > ::slotted(*) {
        width: 100%;
      }

      #items > ::slotted(*) {
        box-sizing: border-box;
        margin: 0;
        position: absolute;
        top: 0;
        will-change: transform;
      }
    </style>

    <array-selector id="selector" items="{{items}}" selected="{{selectedItems}}" selected-item="{{selectedItem}}"></array-selector>

    <div id="items">
      <slot></slot>
    </div>

  </template>
</dom-module>

<script>//~~WEBPATH~~/iron-list/iron-list.html.js
(function(){var a=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),b=a&&8<=a[1],c=null!=Polymer.flush,e=c?Polymer.Async.animationFrame:0,f=c?Polymer.Async.idlePeriod:1,g=c?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={});Polymer({is:"iron-list",properties:{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},selectedAs:{type:String,value:"selected"},grid:{type:Boolean,value:!1,reflectToAttribute:!0,
observer:"_gridChanged"},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1},scrollOffset:{type:Number,value:0}},observers:["_itemsChanged(items.*)","_selectionEnabledChanged(selectionEnabled)","_multiSelectionChanged(multiSelection)","_setOverflow(scrollTarget, scrollOffset)"],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],
_ratio:.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,
_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return(this.grid?this._physicalRows*this._rowHeight:this._physicalSize)-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},
get _maxVirtualStart(){var h=this._convertIndexToCompleteRow(this._virtualCount);return Math.max(0,h-this._physicalCount)},set _virtualStart(h){h=this._clamp(h,0,this._maxVirtualStart);this.grid&&(h-=h%this._itemsPerRow);this._virtualStartVal=h},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(h){h%=this._physicalCount;0>h&&(h=this._physicalCount+h);this.grid&&(h-=h%this._itemsPerRow);this._physicalStartVal=h},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+
this._physicalCount-1)%this._physicalCount},set _physicalCount(h){this._physicalCountVal=h},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return 0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!(!this.offsetWidth&&!this.offsetHeight)},get firstVisibleIndex(){var h=this._firstVisibleIndexVal;if(null==h){var l=this._physicalTop+this._scrollOffset;this._firstVisibleIndexVal=h=this._iterateItems(function(n,m){l+=this._getPhysicalSizeIncrement(n);
if(l>this._scrollPosition)return this.grid?m-m%this._itemsPerRow:m;if(this.grid&&this._virtualCount-1===m)return m-m%this._itemsPerRow})||0}return h},get lastVisibleIndex(){var h=this._lastVisibleIndexVal;if(null==h){if(this.grid)h=Math.min(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var l=this._physicalTop+this._scrollOffset;this._iterateItems(function(n,m){l<this._scrollBottom&&(h=m);l+=this._getPhysicalSizeIncrement(n)})}this._lastVisibleIndexVal=h}return h},
get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)},get _scrollOffset(){return this._scrollerPaddingTop+this.scrollOffset},ready:function(){this.addEventListener("focus",this._didFocus.bind(this),!0)},attached:function(){this._debounce("_render",this._render,e);this.listen(this,"iron-resize",
"_resizeHandler");this.listen(this,"keydown","_keydownHandler")},detached:function(){this.unlisten(this,"iron-resize","_resizeHandler");this.unlisten(this,"keydown","_keydownHandler")},_setOverflow:function(h){this.style.webkitOverflowScrolling=h===this?"touch":"";this.style.overflowY=h===this?"auto":"";this._firstVisibleIndexVal=this._lastVisibleIndexVal=null;this._debounce("_render",this._render,e)},updateViewportBoundaries:function(){var h=window.getComputedStyle(this);this._scrollerPaddingTop=
this.scrollTarget===this?0:parseInt(h["padding-top"],10);this._isRTL="rtl"===h.direction;this._viewportWidth=this.$.items.offsetWidth;this._viewportHeight=this._scrollTargetHeight;this.grid&&this._updateGridMetrics()},_scrollHandler:function(){var h=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),l=h-this._scrollPosition,n=0<=l;this._scrollPosition=h;this._lastVisibleIndexVal=this._firstVisibleIndexVal=null;Math.abs(l)>this._physicalSize&&0<this._physicalSize?(l-=this._scrollOffset,n=Math.round(l/
this._physicalAverage)*this._itemsPerRow,this._virtualStart+=n,this._physicalStart+=n,this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()):0<this._physicalCount&&(h=this._getReusables(n),n?(this._physicalTop=h.physicalTop,this._virtualStart+=h.indexes.length,this._physicalStart+=h.indexes.length):(this._virtualStart-=h.indexes.length,this._physicalStart-=h.indexes.length),this._update(h.indexes,n?null:h.indexes),this._debounce("_increasePoolIfNeeded",
this._increasePoolIfNeeded.bind(this,0),g))},_getReusables:function(h){var l=[],n=this._hiddenContentSize*this._ratio,m=this._virtualStart,q=this._virtualEnd,r=this._physicalCount,v=this._physicalTop+this._scrollOffset;var u=this._physicalBottom+this._scrollOffset;var w=this._scrollTop,z=this._scrollBottom;if(h){var A=this._physicalStart;u=w-v}else A=this._physicalEnd,u-=z;for(;;){var E=this._getPhysicalSizeIncrement(A);u-=E;if(l.length>=r||u<=n)break;if(h){if(q+l.length+1>=this._virtualCount)break;
if(v+E>=w-this._scrollOffset)break;l.push(A);v+=E;A=(A+1)%r}else{if(0>=m-l.length)break;if(v+this._physicalSize-E<=z)break;l.push(A);v-=E;A=0===A?r-1:A-1}}return{indexes:l,physicalTop:v-this._scrollOffset}},_update:function(h,l){if(!(h&&0===h.length||0===this._physicalCount)){this._manageFocus();this._assignModels(h);this._updateMetrics(h);if(l)for(;l.length;)h=l.pop(),this._physicalTop-=this._getPhysicalSizeIncrement(h);this._positionItems();this._updateScrollerSize()}},_createPool:function(h){this._ensureTemplatized();
var l,n=Array(h);for(l=0;l<h;l++){var m=this.stamp(null);n[l]=m.root.querySelector("*");this._itemsParent.appendChild(m.root)}return n},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(h){h=this._clamp(this._physicalCount+h,3,this._virtualCount-this._virtualStart);h=this._convertIndexToCompleteRow(h);if(this.grid){var l=h%this._itemsPerRow;l&&h-l<=this._physicalCount&&(h+=this._itemsPerRow);
h-=l}h-=this._physicalCount;l=Math.round(.5*this._physicalCount);if(!(0>h)){if(0<h){l=window.performance.now();[].push.apply(this._physicalItems,this._createPool(h));for(var n=0;n<h;n++)this._physicalSizes.push(0);this._physicalCount+=h;this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=h);this._update();this._templateCost=(window.performance.now()-l)/h;l=Math.round(.5*
this._physicalCount)}this._virtualEnd>=this._virtualCount-1||0===l||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,l)),f):this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,l),g))}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var h=this._getReusables(!0);this._physicalTop=h.physicalTop;this._virtualStart+=
h.indexes.length;this._physicalStart+=h.indexes.length;this._update(h.indexes);this._update();this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(3))},_ensureTemplatized:function(){if(!this.ctor){(this._userTemplate=this.queryEffectiveChildren("template"))||console.warn("iron-list requires a template to be provided in light-dom");var h={__key__:!0};h[this.as]=!0;h[this.indexAs]=!0;h[this.selectedAs]=!0;h.tabIndex=!0;this._instanceProps=
h;this.templatize(this._userTemplate,this.mutableData)}},_gridChanged:function(h,l){"undefined"!==typeof l&&(this.notifyResize(),Polymer.flush?Polymer.flush():Polymer.dom.flush(),h&&this._updateGridMetrics())},_itemsChanged:function(h){if("items"===h.path)this._physicalTop=this._virtualStart=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._lastVisibleIndexVal=this._firstVisibleIndexVal=
null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounce("_render",this._render,e);else if("items.splices"===h.path){this._adjustVirtualIndex(h.value.indexSplices);this._virtualCount=this.items?this.items.length:0;var l=this._getActiveElement();this.contains(l)&&l.blur();h=h.value.indexSplices.some(function(n){return n.index+
n.addedCount>=this._virtualStart&&n.index<=this._virtualEnd},this);this._isClientFull()&&!h||this._debounce("_render",this._render,e)}else"items.length"!==h.path&&this._forwardItemPath(h.path,h.value)},_forwardItemPath:function(h,l){h=h.slice(6);var n=h.indexOf(".");-1===n&&(n=h.length);var m,q=this.modelForElement(this._offscreenFocusedItem);if(c){var r=parseInt(h.substring(0,n),10);if(m=this._isIndexRendered(r)){var v=this._getPhysicalIndex(r);var u=this.modelForElement(this._physicalItems[v])}else q&&
(u=q);if(!u||u[this.indexAs]!==r)return}else if(r=h.substring(0,n),q&&q.__key__===r)u=q;else if(v=this._physicalIndexForKey[r],u=this.modelForElement(this._physicalItems[v]),!u||u.__key__!==r)return;h=h.substring(n+1);h=this.as+(h?"."+h:"");c?u._setPendingPropertyOrPath(h,l,!1,!0):u.notifyPath(h,l,!0);u._flushProperties&&u._flushProperties(!0);m&&(this._updateMetrics([v]),this._positionItems(),this._updateScrollerSize())},_adjustVirtualIndex:function(h){h.forEach(function(l){l.removed.forEach(this._removeItem,
this);l.index<this._virtualStart&&(l=Math.max(l.addedCount-l.removed.length,l.index-this._virtualStart),this._virtualStart+=l,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=l))},this)},_removeItem:function(h){this.$.selector.deselect(h);this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===h&&this._removeFocusedItem()},_iterateItems:function(h,l){var n,m;if(2===arguments.length&&l)for(m=0;m<l.length;m++){var q=l[m];var r=this._computeVidx(q);if(null!=(n=h.call(this,q,r)))return n}else{q=
this._physicalStart;for(r=this._virtualStart;q<this._physicalCount;q++,r++)if(null!=(n=h.call(this,q,r)))return n;for(q=0;q<this._physicalStart;q++,r++)if(null!=(n=h.call(this,q,r)))return n}},_computeVidx:function(h){return h>=this._physicalStart?this._virtualStart+(h-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+h},_assignModels:function(h){this._iterateItems(function(l,n){var m=this._physicalItems[l],q=this.items&&this.items[n];if(null!=q){var r=this.modelForElement(m);
r.__key__=this._collection?this._collection.getKey(q):null;this._forwardProperty(r,this.as,q);this._forwardProperty(r,this.selectedAs,this.$.selector.isSelected(q));this._forwardProperty(r,this.indexAs,n);this._forwardProperty(r,"tabIndex",this._focusedVirtualIndex===n?0:-1);this._physicalIndexForKey[r.__key__]=l;r._flushProperties&&r._flushProperties(!0);m.removeAttribute("hidden")}else m.setAttribute("hidden","")},h)},_updateMetrics:function(h){Polymer.flush?Polymer.flush():Polymer.dom.flush();
var l=0,n=0,m=this._physicalAverageCount,q=this._physicalAverage;this._iterateItems(function(r){n+=this._physicalSizes[r];this._physicalSizes[r]=this._physicalItems[r].offsetHeight;l+=this._physicalSizes[r];this._physicalAverageCount+=this._physicalSizes[r]?1:0},h);this.grid?(this._updateGridMetrics(),this._physicalSize=Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight):(n=1===this._itemsPerRow?n:Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight,this._physicalSize=this._physicalSize+
l-n,this._itemsPerRow=1);this._physicalAverageCount!==m&&(this._physicalAverage=Math.round((q*m+l)/this._physicalAverageCount))},_updateGridMetrics:function(){this._itemWidth=0<this._physicalCount?this._physicalItems[0].getBoundingClientRect().width:200;this._rowHeight=0<this._physicalCount?this._physicalItems[0].offsetHeight:200;this._itemsPerRow=this._itemWidth?Math.floor(this._viewportWidth/this._itemWidth):this._itemsPerRow},_positionItems:function(){this._adjustScrollPosition();var h=this._physicalTop;
if(this.grid){var l=(this._viewportWidth-this._itemsPerRow*this._itemWidth)/2;this._iterateItems(function(n,m){var q=Math.floor(m%this._itemsPerRow*this._itemWidth+l);this._isRTL&&(q*=-1);this.translate3d(q+"px",h+"px",0,this._physicalItems[n]);this._shouldRenderNextRow(m)&&(h+=this._rowHeight)})}else this._iterateItems(function(n){this.translate3d(0,h+"px",0,this._physicalItems[n]);h+=this._physicalSizes[n]})},_getPhysicalSizeIncrement:function(h){return this.grid?this._computeVidx(h)%this._itemsPerRow!==
this._itemsPerRow-1?0:this._rowHeight:this._physicalSizes[h]},_shouldRenderNextRow:function(h){return h%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var h=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==h){this._physicalTop-=h;var l=this._scrollTop;!b&&0<l&&this._resetScrollPosition(l-h)}},_resetScrollPosition:function(h){this.scrollTarget&&0<=h&&(this._scrollPosition=this._scrollTop=h)},_updateScrollerSize:function(h){this._estScrollHeight=
this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage;if((h=(h=(h=h||0===this._scrollHeight)||this._scrollPosition>=this._estScrollHeight-this._physicalSize)||this.grid&&this.$.items.style.height<this._estScrollHeight)||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight},scrollToItem:function(h){return this.scrollToIndex(this.items.indexOf(h))},
scrollToIndex:function(h){if(!("number"!==typeof h||0>h||h>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){h=this._clamp(h,0,this._virtualCount-1);if(!this._isIndexRendered(h)||h>=this._maxVirtualStart)this._virtualStart=this.grid?h-2*this._itemsPerRow:h-1;this._manageFocus();this._assignModels();this._updateMetrics();this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var l=this._physicalStart,n=this._virtualStart,
m=0,q=this._hiddenContentSize;n<h&&m<=q;)m+=this._getPhysicalSizeIncrement(l),l=(l+1)%this._physicalCount,n++;this._updateScrollerSize(!0);this._positionItems();this._resetScrollPosition(this._physicalTop+this._scrollOffset+m);this._increasePoolIfNeeded(0);this._lastVisibleIndexVal=this._firstVisibleIndexVal=null}},_resetAverage:function(){this._physicalAverageCount=this._physicalAverage=0},_resizeHandler:function(){this._debounce("_render",function(){this._lastVisibleIndexVal=this._firstVisibleIndexVal=
null;this.updateViewportBoundaries();this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},e)},selectItem:function(h){return this.selectIndex(this.items.indexOf(h))},selectIndex:function(h){if(!(0>h||h>=this._virtualCount)){!this.multiSelection&&this.selectedItem&&this.clearSelection();if(this._isIndexRendered(h)){var l=this.modelForElement(this._physicalItems[this._getPhysicalIndex(h)]);l&&(l[this.selectedAs]=!0);this.updateSizeForIndex(h)}this.$.selector.selectIndex?
this.$.selector.selectIndex(h):this.$.selector.select(this.items[h])}},deselectItem:function(h){return this.deselectIndex(this.items.indexOf(h))},deselectIndex:function(h){0>h||h>=this._virtualCount||(this._isIndexRendered(h)&&(this.modelForElement(this._physicalItems[this._getPhysicalIndex(h)])[this.selectedAs]=!1,this.updateSizeForIndex(h)),this.$.selector.deselectIndex?this.$.selector.deselectIndex(h):this.$.selector.deselect(this.items[h]))},toggleSelectionForItem:function(h){return this.toggleSelectionForIndex(this.items.indexOf(h))},
toggleSelectionForIndex:function(h){(this.$.selector.isIndexSelected?this.$.selector.isIndexSelected(h):this.$.selector.isSelected(this.items[h]))?this.deselectIndex(h):this.selectIndex(h)},clearSelection:function(){this._iterateItems(function(h){this.modelForElement(this._physicalItems[h])[this.selectedAs]=!1});this.$.selector.clearSelection()},_selectionEnabledChanged:function(h){(h?this.listen:this.unlisten).call(this,this,"tap","_selectionHandler")},_selectionHandler:function(h){var l=this.modelForElement(h.target);
if(l){var n=Polymer.dom(h).path[0];h=this._getActiveElement();var m=this._physicalItems[this._getPhysicalIndex(l[this.indexAs])];if("input"!==n.localName&&"button"!==n.localName&&"select"!==n.localName){n=l.tabIndex;l.tabIndex=-100;var q=h?h.tabIndex:-1;l.tabIndex=n;h&&m!==h&&m.contains(h)&&-100!==q||this.toggleSelectionForItem(l[this.as])}}},_multiSelectionChanged:function(h){this.clearSelection();this.$.selector.multi=h},updateSizeForItem:function(h){return this.updateSizeForIndex(this.items.indexOf(h))},
updateSizeForIndex:function(h){if(!this._isIndexRendered(h))return null;this._updateMetrics([this._getPhysicalIndex(h)]);this._positionItems();return null},_manageFocus:function(){var h=this._focusedVirtualIndex;0<=h&&h<this._virtualCount?this._isIndexRendered(h)?this._restoreFocusedItem():this._createFocusBackfillItem():0<this._virtualCount&&0<this._physicalCount&&(this._focusedPhysicalIndex=this._physicalStart,this._focusedVirtualIndex=this._virtualStart,this._focusedItem=this._physicalItems[this._physicalStart])},
_convertIndexToCompleteRow:function(h){this._itemsPerRow=this._itemsPerRow||1;return this.grid?Math.ceil(h/this._itemsPerRow)*this._itemsPerRow:h},_isIndexRendered:function(h){return h>=this._virtualStart&&h<=this._virtualEnd},_isIndexVisible:function(h){return h>=this.firstVisibleIndex&&h<=this.lastVisibleIndex},_getPhysicalIndex:function(h){return c?(this._physicalStart+(h-this._virtualStart))%this._physicalCount:this._physicalIndexForKey[this._collection.getKey(this.items[h])]},focusItem:function(h){this._focusPhysicalItem(h)},
_focusPhysicalItem:function(h){if(!(0>h||h>=this._virtualCount)){this._restoreFocusedItem();this._isIndexRendered(h)||this.scrollToIndex(h);var l=this._physicalItems[this._getPhysicalIndex(h)],n=this.modelForElement(l),m;n.tabIndex=-100;-100===l.tabIndex&&(m=l);m||(m=Polymer.dom(l).querySelector('[tabindex\x3d"-100"]'));n.tabIndex=0;this._focusedVirtualIndex=h;m&&m.focus()}},_removeFocusedItem:function(){this._offscreenFocusedItem&&this._itemsParent.removeChild(this._offscreenFocusedItem);this._focusedItem=
this._focusBackfillItem=this._offscreenFocusedItem=null;this._focusedPhysicalIndex=this._focusedVirtualIndex=-1},_createFocusBackfillItem:function(){var h=this._focusedPhysicalIndex;if(!(this._offscreenFocusedItem||0>this._focusedVirtualIndex)){if(!this._focusBackfillItem){var l=this.stamp(null);this._focusBackfillItem=l.root.querySelector("*");this._itemsParent.appendChild(l.root)}this._offscreenFocusedItem=this._physicalItems[h];this.modelForElement(this._offscreenFocusedItem).tabIndex=0;this._physicalItems[h]=
this._focusBackfillItem;this._focusedPhysicalIndex=h;this.translate3d(0,"-10000px",0,this._offscreenFocusedItem)}},_restoreFocusedItem:function(){if(this._offscreenFocusedItem&&!(0>this._focusedVirtualIndex)){this._assignModels();var h=this._focusedPhysicalIndex,l=this._physicalItems[h];if(l){var n=this.modelForElement(l),m=this.modelForElement(this._offscreenFocusedItem);n[this.as]===m[this.as]?(this._focusBackfillItem=l,n.tabIndex=-1,this._physicalItems[h]=this._offscreenFocusedItem,this.translate3d(0,
"-10000px",0,this._focusBackfillItem)):(this._removeFocusedItem(),this._focusBackfillItem=null);this._offscreenFocusedItem=null}}},_didFocus:function(h){h=this.modelForElement(h.target);var l=this.modelForElement(this._focusedItem),n=null!==this._offscreenFocusedItem,m=this._focusedVirtualIndex;h&&(l===h?this._isIndexVisible(m)||this.scrollToIndex(m):(this._restoreFocusedItem(),l&&(l.tabIndex=-1),h.tabIndex=0,this._focusedVirtualIndex=m=h[this.indexAs],this._focusedPhysicalIndex=this._getPhysicalIndex(m),
this._focusedItem=this._physicalItems[this._focusedPhysicalIndex],n&&!this._offscreenFocusedItem&&this._update()))},_keydownHandler:function(h){switch(h.keyCode){case 40:h.preventDefault();this._focusPhysicalItem(this._focusedVirtualIndex+(this.grid?this._itemsPerRow:1));break;case 39:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?-1:1));break;case 38:this._focusPhysicalItem(this._focusedVirtualIndex-(this.grid?this._itemsPerRow:1));break;case 37:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+
(this._isRTL?1:-1));break;case 13:this._focusPhysicalItem(this._focusedVirtualIndex),this._selectionHandler(h)}},_clamp:function(h,l,n){return Math.min(n,Math.max(l,h))},_debounce:function(h,l,n){c?(this._debouncers=this._debouncers||{},this._debouncers[h]=Polymer.Debouncer.debounce(this._debouncers[h],n,l.bind(this)),Polymer.enqueueDebouncer(this._debouncers[h])):Polymer.dom.addDebouncer(this.debounce(h,l))},_forwardProperty:function(h,l,n){c?h._setPendingProperty(l,n):h[l]=n},_forwardHostPropV2:function(h,
l){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(n){n&&this.modelForElement(n).forwardHostProp(h,l)},this)},_notifyInstancePropV2:function(h,l,n){Polymer.Path.matches(this.as,l)&&(h=h[this.indexAs],l==this.as&&(this.items[h]=n),this.notifyPath(Polymer.Path.translate(this.as,"items."+h,l),n))},_getStampedChildren:function(){return this._physicalItems},_forwardInstancePath:function(h,l,n){0===l.indexOf(this.as+".")&&this.notifyPath("items."+
h.__key__+"."+l.slice(this.as.length+1),n)},_forwardParentPath:function(h,l){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(n){n&&this.modelForElement(n).notifyPath(h,l,!0)},this)},_forwardParentProp:function(h,l){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(n){n&&(this.modelForElement(n)[h]=l)},this)},_getActiveElement:function(){var h=this._itemsParent.node.domHost;return Polymer.dom(h?
h.root:document).activeElement}})})();
</script>











<dom-module id="paper-item-body">
  <template>
    <style>
      :host {
        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */
        @apply --layout-vertical;
        @apply --layout-center-justified;
        @apply --layout-flex;
      }

      :host([two-line]) {
        min-height: var(--paper-item-body-two-line-min-height, 72px);
      }

      :host([three-line]) {
        min-height: var(--paper-item-body-three-line-min-height, 88px);
      }

      :host > ::slotted(*) {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      :host > ::slotted([secondary]) {
        @apply --paper-font-body1;

        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));

        @apply --paper-item-body-secondary;
      }
    </style>

    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-item/paper-item-body.html.js
Polymer({is:"paper-item-body"});
</script>
</dom-module>







<dom-module id="tf-graph-icon">
  <style>
    .faded-rect {
      fill: url(#rectHatch);
    }

    .faded-ellipse {
      fill: url(#ellipseHatch);
    }

    .faded-rect, .faded-ellipse, .faded-series {
      stroke:   var(--tb-graph-faded) !important;
    }
  </style>
  <template>
    <template is="dom-if" if="[[_isType(node, type, 'OP')]]">
      <template is="dom-if" if="[[_isConst(node, const)]]">
        <svg height$="[[height]]" preserveaspectratio="xMinYMid meet" viewbox="0 0 10 10">
          <circle cx="5" cy="5" r="3" fill$="[[_getFill(_computedFill, 'OP')]]" stroke$="[[_getStroke(_computedFill, 'OP')]]" />
        </svg>
      </template>
      <template is="dom-if" if="[[_isSummary(node, summary)]]">
        <svg width$="[[height]]" height$="[[height]]" viewbox="0 0 12 12">
          <use x="0" y="0" xlink:href="#summary-icon" />
        </svg>
      </template>
      <template is="dom-if" if="[[_isRegularOp(node, const, summary)]]">
        <svg height$="[[height]]" preserveaspectratio="xMinYMid meet" viewbox="0 0 16 8">
          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#op-node-stamp" fill$="[[_getFill(_computedFill, 'OP')]]" stroke$="[[_getStroke(_computedFill, 'OP')]]" class$="{{_fadedClass(renderInfo, 'ellipse')}}" x="8" y="4" />
        </svg>
      </template>
    </template>
    <template is="dom-if" if="[[_isType(node, type, 'META')]]">
      <svg height$="[[height]]" preserveaspectratio="xMinYMid meet" viewbox="0 0 37 16">
        <rect x="1" y="1" fill$="[[_getFill(_computedFill, 'META')]]" stroke$="[[_getStroke(_computedFill, 'META')]]" class$="{{_fadedClass(renderInfo, 'rect')}}" stroke-width="2px" height="14" width="35" rx="5" ry="5" />
      </svg>
    </template>
    <template is="dom-if" if="[[_isType(node, type, 'SERIES')]]">
      <template is="dom-if" if="[[_isVertical(node, vertical)]]">
        <svg height$="[[height]]" preserveaspectratio="xMinYMid meet" viewbox="0 0 16 15">
          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#op-series-vertical-stamp" fill$="[[_getFill(_computedFill, 'SERIES')]]" stroke$="[[_getStroke(_computedFill, 'SERIES')]]" class$="{{_fadedClass(renderInfo, 'series')}}" x="0" y="2" />
        </svg>
      </template>
      <template is="dom-if" if="[[!_isVertical(node, vertical)]]">
        <svg height$="[[height]]" preserveaspectratio="xMinYMid meet" viewbox="0 0 24 10">
          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#op-series-horizontal-stamp" fill$="[[_getFill(_computedFill, 'SERIES')]]" stroke$="[[_getStroke(_computedFill, 'SERIES')]]" class$="{{_fadedClass(renderInfo, 'series')}}" x="0" y="1" />
        </svg>
      </template>
    </template>
  </template>

  <script>//~~WEBPATH~~/tf-graph-info/tf-graph-icon.html.js
Polymer({is:"tf-graph-icon",properties:{node:{type:Object,value:null},renderInfo:{type:Object,value:null},colorBy:{type:Object,value:"structural"},templateIndex:{type:Function,value:null},type:{type:String,value:null},vertical:{type:Boolean,value:!1},const:{type:Boolean,value:!1},summary:{type:Boolean,value:!1},fill:{type:String,value:null},height:{type:Number,value:20},_computedFill:{type:String,computed:"_getComputedFill(node, renderInfo, colorBy, templateIndex, fill)"}},_getComputedFill:function(a,
b,c,e,f){return a&&b&&c&&e?(a=tf.graph.scene.node,a.getFillForNode(e,a.ColorBy[c.toUpperCase()],b,!1)):f},_getFill:function(a,b){return a||{OP:tf.graph.render.OpNodeColors.DEFAULT_FILL,META:tf.graph.render.MetanodeColors.DEFAULT_FILL,SERIES:tf.graph.render.SeriesNodeColors.DEFAULT_FILL}[b]},_getStroke:function(a,b){return a?tf.graph.scene.node.getStrokeForFill(a):{OP:tf.graph.render.OpNodeColors.DEFAULT_STROKE,META:tf.graph.render.MetanodeColors.DEFAULT_STROKE,SERIES:tf.graph.render.SeriesNodeColors.DEFAULT_STROKE}[b]},
_isType:function(a,b,c){return a?tf.graph.NodeType[a.type]===c:b===c},_isVertical:function(a,b){return a?a.hasNonControlEdges:!!b},_isConst:function(a,b){return a?"Const"===a.op:!!b},_isSummary:function(a,b){return a?this._isType(a,null,"OP")&&"string"===typeof a.op&&"Summary"===a.op.substr(-7):!!b},_isRegularOp:function(a,b,c){return!this._isConst(a,b)&&!this._isSummary(a,c)},_fadedClass:function(a,b){return a&&a.isFadedOut?"faded-"+b:""}});
</script>
</dom-module>


<dom-module id="tf-graph-op-compat-list-item">
<template>
<style>
#list-item {
  width: 100%;
  color: #565656;
  font-size: 11pt;
  font-weight: 400;
  position: relative;
  display: inline-block;
}

#list-item:hover {
  background-color: var(--google-yellow-100);
}

.clickable {
  cursor: pointer;
}

#list-item span {
  margin-left: 40px;
}

#list-item.excluded span {
  color: #999;
}

#list-item span.edge-label {
  float: right;
  font-size: 10px;
  margin-left: 3px;
  margin-right: 5px;
}

.node-icon {
  position: absolute;
  top: 1px;
  left: 2px;
}

.faded span {
  color: var(--tb-graph-faded);
}
</style>

<div id="list-item" on-mouseover="_nodeListener" on-mouseout="_nodeListener" on-click="_nodeListener">
  <div class$="{{_fadedClass(itemRenderInfo)}}">
    <tf-graph-icon class="node-icon" height="12" color-by="[[colorBy]]" color-by-params="[[colorByParams]]" node="[[itemNode]]" render-info="[[itemRenderInfo]]" template-index="[[templateIndex]]">
    </tf-graph-icon>
    <span title$="[[name]]">[[name]]</span>
  </div>
</div>
</template>

<script>//~~WEBPATH~~/tf-graph-op-compat-card/tf-graph-op-compat-list-item.html.js
Polymer({is:"tf-graph-op-compat-list-item",properties:{cardNode:Object,itemNode:Object,edgeLabel:String,itemRenderInfo:Object,name:String,itemType:{type:String,observer:"_itemTypeChanged"},colorBy:String,colorByParams:Object,templateIndex:Function},_itemTypeChanged:function(){"subnode"!==this.itemType?this.$["list-item"].classList.add("clickable"):this.$["list-item"].classList.remove("clickable")},_nodeListener:function(a){this.fire("node-list-item-"+a.type,{nodeName:this.name,type:this.itemType})},
_fadedClass:function(a){return a&&a.isFadedOut?"faded":""}});
</script>
</dom-module>


<dom-module id="tf-graph-op-compat-card">
<template>
<style>
:host {
  max-height: 500px;
}

.incompatible-ops-list {
  height: 350px;
  max-height: 400px;
  overflow-y: scroll;
  display: flex;
  flex-direction: column;
}

iron-list {
  flex: 1 1 auto;
}

paper-item {
  padding: 0;
  background: #e9e9e9;
}

paper-item-body[two-line] {
  min-height: 0;
  padding: 8px 12px 4px;
}

.expandedInfo {
  padding: 8px 12px;
  font-weight: 500;
  font-size: 12pt;
  width: 100%;
}

.node-name {
  white-space: normal;
  word-wrap: break-word;
  font-size: 14pt;
  font-weight: 500;
}

.subtitle {
  font-size: 12pt;
  color: #5e5e5e;
}

.toggle-button {
  float: right;
  max-height: 20px;
  max-width: 20px;
  padding: 0;
}

.non-control-list-item {
  padding-left: 10px;
}

div.op-compat-display {
  margin-top: 10px;
  display: inline-block;
}

svg.op-compat {
  width: 250px;
  height: 25px;
  float: left;
}

div.op-compat-value {
  float: right;
  height: 100%;
  font-size: 14px;
  color: black;
  margin-left: 10px;
}
</style>

<paper-item>
  <paper-item-body two-line>
    <div>
      <paper-icon-button icon="{{_getToggleIcon(_expanded)}}" on-click="_toggleExpanded" class="toggle-button">
      </paper-icon-button>
      <div class="node-name" id="nodetitle">[[nodeTitle]]</div>
    </div>
    <div secondary>
      <div class="subtitle">
        <div class="op-compat-display">
          <svg class="op-compat" preserveaspectratio="xMinYMid meet" viewbox="0 0 250 25">
            <defs>
              <lineargradient id="op-compat-fill">
                <stop offset="0" stop-color$="[[_opCompatColor]]"></stop>
                <stop offset$="[[_opCompatScore]]" stop-color$="[[_opCompatColor]]"></stop>
                <stop offset$="[[_opCompatScore]]" stop-color$="[[_opIncompatColor]]"></stop>
                <stop offset="1" stop-color$="[[_opIncompatColor ]]"></stop>
              </lineargradient>
            </defs>
            <rect height="25" width="250" rx="5" ry="5" style="fill: url('#op-compat-fill');" />
          </svg>
          <div class="op-compat-value">[[_opCompatScoreLabel]]</div>
        </div>
      </div>
    </div>
  </paper-item-body>
</paper-item>

<iron-collapse opened="{{_expanded}}">
<template is="dom-if" if="{{_expanded}}" restamp="true">
  <div class="expandedInfo">
    Incompatible Operations:
    (<span>[[_totalIncompatOps]]</span>)
    <iron-list class="incompatible-ops-list" id="incompatibleOpsList" items="[[_incompatibleOpNodes]]">
      <template>
        <tf-graph-op-compat-list-item class="non-control-list-item" item-node="[[item]]" item-render-info="[[_getRenderInfo(item.name, renderHierarchy)]]" name="[[item.name]]" template-index="[[_templateIndex]]" color-by="[[colorBy]]" item-type="incompatible-ops">
        </tf-graph-op-compat-list-item>
      </template>
    </iron-list>
  </div>
</template>
</iron-collapse>

</template>

<script>//~~WEBPATH~~/tf-graph-op-compat-card/tf-graph-op-compat-card.html.js
Polymer({is:"tf-graph-op-compat-card",properties:{graphHierarchy:Object,hierarchyParams:Object,renderHierarchy:Object,nodeTitle:String,_templateIndex:{type:Function,computed:"_getTemplateIndex(graphHierarchy)"},_incompatibleOpNodes:{type:Object,computed:"_getIncompatibleOpNodes(graphHierarchy, hierarchyParams)"},_expanded:{type:Boolean,value:!0},_opCompatScore:{type:Number,computed:"_computeOpCompatScore(graphHierarchy)"},_opCompatScoreLabel:{type:String,computed:"_getOpCompatScoreLabel(_opCompatScore)"},
_opCompatColor:{type:String,value:tf.graph.render.OpNodeColors.COMPATIBLE},_opIncompatColor:{type:String,value:tf.graph.render.OpNodeColors.INCOMPATIBLE},_totalIncompatOps:{type:Number,computed:"_getTotalIncompatibleOps(graphHierarchy)"}},_getTemplateIndex:function(a){return a.getTemplateIndex()},_getNode:function(a,b){return b.node(a)},_getPrintableHTMLNodeName:function(a){return(a||"").replace(/\//g,"\x3cwbr\x3e/")},_getRenderInfo:function(a){return this.renderHierarchy.getOrCreateRenderNodeByName(a)},
_toggleExpanded:function(){this._expanded=!this._expanded},_getToggleIcon:function(a){return a?"expand-less":"expand-more"},_resizeList:function(a){(a=document.querySelector(a))&&a.fire("iron-resize")},_getIncompatibleOpNodes:function(a,b){if(a&&a.root)return this.async(this._resizeList.bind(this,"#incompatibleOpsList")),tf.graph.hierarchy.getIncompatibleOps(a,b)},_computeOpCompatScore:function(a){if(a&&a.root){var b=a.root;a=b.compatibilityHistogram.compatible;b=b.compatibilityHistogram.incompatible;
return 0==a&&0==b?0:Math.floor(100*a/(a+b))/100}return 0},_getOpCompatScoreLabel:function(a){return d3.format(".0%")(a)},_getTotalIncompatibleOps:function(a){return a&&a.root?a.root.compatibilityHistogram.incompatible:0}});
</script>
</dom-module>














<dom-module id="tf-node-list-item">
  <style>
  #list-item {
    width: 100%;
    color: #565656;
    font-size: 11pt;
    font-weight: 400;
    position: relative;
    display: inline-block;
  }

  #list-item:hover {
    background-color: var(--google-yellow-100);
  }

  .clickable {
    cursor: pointer;
  }

  #list-item span {
    margin-left: 40px;
  }

  #list-item.excluded span {
    color: #999;
  }

  #list-item span.edge-label {
    float: right;
    font-size: 10px;
    margin-left: 3px;
    margin-right: 5px;
  }

  .node-icon {
    position: absolute;
    top: 1px;
    left: 2px;
  }

  .faded span {
    color: var(--tb-graph-faded);
  }
  </style>
  <template>
    <div id="list-item" on-mouseover="_nodeListener" on-mouseout="_nodeListener" on-click="_nodeListener">
      <div class$="{{_fadedClass(itemRenderInfo)}}">
        <tf-graph-icon class="node-icon" height="12" color-by="[[colorBy]]" color-by-params="[[colorByParams]]" node="[[itemNode]]" render-info="[[itemRenderInfo]]" template-index="[[templateIndex]]"></tf-graph-icon>
        <span title$="[[name]]">[[name]]</span>
        <span class="edge-label">[[edgeLabel]]</span>
      </div>
    </div>
  </template>

  <script>//~~WEBPATH~~/tf-graph-info/tf-node-list-item.html.js
Polymer({is:"tf-node-list-item",properties:{cardNode:Object,itemNode:Object,edgeLabel:String,itemRenderInfo:Object,name:String,itemType:{type:String,observer:"_itemTypeChanged"},colorBy:String,colorByParams:Object,templateIndex:Function},_itemTypeChanged:function(){"subnode"!==this.itemType?this.$["list-item"].classList.add("clickable"):this.$["list-item"].classList.remove("clickable")},_nodeListener:function(a){this.fire("node-list-item-"+a.type,{cardNode:this.cardNode.name,nodeName:this.name,type:this.itemType})},
_fadedClass:function(a){return a&&a.isFadedOut?"faded":""}});
</script>
</dom-module>


<dom-module id="tf-node-info">
  <style>
  .sub-list-group {
    font-weight: 500;
    font-size: 12pt;
    padding-bottom: 8px;
    width: 100%;
  }

  .sub-list {
    max-height: 300px;
    overflow-y: scroll;
  }

  .attr-left {
    float: left;
    width: 30%;
    word-wrap: break-word;
    color: #565656;
    font-size: 11pt;
    font-weight: 400;
  }

  .attr-right {
    margin-left: 30%;
    word-wrap: break-word;
    color: #565656;
    font-weight: 400;
  }

  .sub-list-table {
    display: table;
    width: 100%;
  }

  .sub-list-table-row {
    display: table-row;
  }

  .sub-list-table-row .sub-list-table-cell:last-child {
    text-align: right;
  }

  .sub-list-table-cell {
    color: #565656;
    display: table-cell;
    font-size: 11pt;
    font-weight: 400;
    max-width: 200px;
    padding: 0 4px;
  }

  paper-item {
    padding: 0;
    background: #e9e9e9;
  }

  paper-item-body[two-line] {
    min-height: 0;
    padding: 8px 12px 4px;
  }

  .expandedInfo {
    padding: 8px 12px;
  }

  .controlDeps {
    padding: 0 0 0 8px;
  }

  .node-name {
    white-space: normal;
    word-wrap: break-word;
    font-size: 14pt;
    font-weight: 500;
  }

  .node-icon {
    float: right;
  }

  .subtitle {
    font-size: 12pt;
    color: #5e5e5e;
  }

  .controlLine {
    font-size: 11pt;
    font-weight: 400;
  }

  .toggle-button {
    float: right;
    max-height: 20px;
    max-width: 20px;
    padding: 0;
  }

  .control-toggle-button {
    float: left;
    max-height: 20px;
    max-width: 20px;
    padding: 0;
  }

  .toggle-include-group {
    padding-top: 4px;
  }

  .toggle-include {
    margin: 5px 6px;
    text-transform: none;
    padding: 4px 6px;
    font-size: 10pt;
    background-color: #fafafa;
    color: #666;
  }

  .toggle-include:hover {
    background-color: var(--google-yellow-100);
  }

  .non-control-list-item {
    padding-left: 10px;
  }
  </style>
  <template>
    <paper-item>
      <paper-item-body two-line>
        <div>
          <paper-icon-button icon="{{_getToggleIcon(_expanded)}}" on-click="_toggleExpanded" class="toggle-button">
          </paper-icon-button>
          <div class="node-name" id="nodetitle"></div>
        </div>
        <div secondary>
          <tf-graph-icon class="node-icon" node="[[_node]]" render-info="[[_getRenderInfo(nodeName, renderHierarchy)]]" color-by="[[colorBy]]" template-index="[[_templateIndex]]"></tf-graph-icon>
          <template is="dom-if" if="{{_node.op}}">
            <div class="subtitle">
              Operation:
              <span>[[_node.op]]</span>
            </div>
          </template>
          <template is="dom-if" if="{{_node.metagraph}}">
            <div class="subtitle">
              Subgraph:
              <span>[[_node.cardinality]]</span> nodes
            </div>
          </template>
        </div>
      </paper-item-body>
    </paper-item>
    <iron-collapse opened="{{_expanded}}">
    <template is="dom-if" if="{{_expanded}}" restamp="true">
      <div class="expandedInfo">
        <div class="sub-list-group attributes">
          Attributes
          (<span>[[_attributes.length]]</span>)
          <iron-list class="sub-list" id="attributesList" items="[[_attributes]]">
            <template>
              <div>
                <div class="attr-left">[[item.key]]</div>
                <div class="attr-right">[[item.value]]</div>
              </div>
            </template>
          </iron-list>
        </div>

        <template is="dom-if" if="{{_device}}">
          <div class="sub-list-group device">
            <div class="attr-left">Device</div>
            <div class="attr-right">[[_device]]</div>
          </div>
        </template>

        <div class="sub-list-group predecessors">
          Inputs
          (<span>[[_totalPredecessors]]</span>)
          <iron-list class="sub-list" id="inputsList" items="[[_predecessors.regular]]">
            <template>
              <tf-node-list-item class="non-control-list-item" card-node="[[_node]]" item-node="[[item.node]]" edge-label="[[item.edgeLabel]]" item-render-info="[[item.renderInfo]]" name="[[item.name]]" item-type="predecessors" color-by="[[colorBy]]" template-index="[[_templateIndex]]">
              </tf-node-list-item>
            </template>
          </iron-list>
          <template is="dom-if" if="[[_predecessors.control.length]]">
            <div class="controlDeps">
              <div class="controlLine">
                <paper-icon-button icon="{{_getToggleIcon(_openedControlPred)}}" on-click="_toggleControlPred" class="control-toggle-button">
                </paper-icon-button>
                Control dependencies
              </div>
              <iron-collapse opened="{{_openedControlPred}}" no-animation>
                <template is="dom-if" if="{{_openedControlPred}}" restamp="true">
                  <iron-list class="sub-list" items="[[_predecessors.control]]">
                    <template>
                      <tf-node-list-item card-node="[[_node]]" item-node="[[item.node]]" item-render-info="[[item.renderInfo]]" name="[[item.name]]" item-type="predecessors" color-by="[[colorBy]]" template-index="[[_templateIndex]]">
                      </tf-node-list-item>
                    </template>
                  </iron-list>
                </template>
              </iron-collapse>
            </div>
          </template>
        </div>

        <div class="sub-list-group successors">
          Outputs
          (<span>[[_totalSuccessors]]</span>)
          <iron-list class="sub-list" id="outputsList" items="[[_successors.regular]]">
            <template>
              <tf-node-list-item class="non-control-list-item" card-node="[[_node]]" item-node="[[item.node]]" edge-label="[[item.edgeLabel]]" item-render-info="[[item.renderInfo]]" name="[[item.name]]" item-type="successor" color-by="[[colorBy]]" template-index="[[_templateIndex]]">
              </tf-node-list-item>
            </template>
          </iron-list>
          <template is="dom-if" if="[[_successors.control.length]]">
            <div class="controlDeps">
              <div class="controlLine">
                <paper-icon-button icon="{{_getToggleIcon(_openedControlSucc)}}" on-click="_toggleControlSucc" class="control-toggle-button">
                </paper-icon-button>
                Control dependencies
              </div>
              <iron-collapse opened="{{_openedControlSucc}}" no-animation>
                <template is="dom-if" if="{{_openedControlSucc}}" restamp="true">
                  <iron-list class="sub-list" items="[[_successors.control]]">
                    <template>
                      <tf-node-list-item card-node="[[_node]]" item-node="[[item.node]]" item-render-info="[[item.renderInfo]]" name="[[item.name]]" item-type="successors" color-by="[[colorBy]]" template-index="[[_templateIndex]]">
                      </tf-node-list-item>
                    </template>
                  </iron-list>
                </template>
              </iron-collapse>
            </div>
          </template>
        </div>
        <template is="dom-if" if="{{_hasDisplayableNodeStats}}">
          <div class="sub-list-group node-stats">
            Node Stats
            <div class="sub-list-table">
              <template is="dom-if" if="{{_nodeStats.totalBytes}}">
                <div class="sub-list-table-row">
                  <div class="sub-list-table-cell">Memory</div>
                  <div class="sub-list-table-cell">[[_nodeStatsFormattedBytes]]</div>
                </div>
              </template>
              <template is="dom-if" if="{{_getTotalMicros(_nodeStats)}}">
                <div class="sub-list-table-row">
                  <div class="sub-list-table-cell">Compute Time</div>
                  <div class="sub-list-table-cell">[[_nodeStatsFormattedComputeTime]]</div>
                </div>
              </template>
              <template is="dom-if" if="{{_nodeStats.outputSize}}">
                <div class="sub-list-table-row">
                  <div class="sub-list-table-cell">Tensor Output Sizes</div>
                  <div class="sub-list-table-cell">
                    <template is="dom-repeat" items="{{_nodeStatsFormattedOutputSizes}}">
                      [[item]] <br>
                    </template>
                  </div>
                </div>
              </template>
            </div>
          </div>
        </template>

        <template is="dom-if" if="[[_functionUsages.length]]">
          <div class="sub-list-group predecessors">
            Usages of the Function
            (<span>[[_functionUsages.length]]</span>)
            <iron-list class="sub-list" id="functionUsagesList" items="[[_functionUsages]]">
              <template>
                <tf-node-list-item class="non-control-list-item" card-node="[[_node]]" item-node="[[item]]" name="[[item.name]]" item-type="functionUsages" color-by="[[colorBy]]" template-index="[[_templateIndex]]">
                </tf-node-list-item>
              </template>
            </iron-list>
          </div>
        </template>

        <template is="dom-if" if="[[!_isLibraryFunction(_node)]]">
          <div class="toggle-include-group">
            <paper-button raised class="toggle-include" on-click="_toggleInclude">
              <span>[[_auxButtonText]]</span>
            </paper-button>
          </div>
        </template>

        <template is="dom-if" if="{{_isInSeries(_node)}}">
          <div class="toggle-include-group">
            <paper-button raised class="toggle-include" on-click="_toggleGroup">
              <span>[[_groupButtonText]]</span>
            </paper-button>
          </div>
        </template>
      </div>
    </template>
    </iron-collapse>
  </template>

  <script>//~~WEBPATH~~/tf-graph-info/tf-node-info.html.js
Polymer({is:"tf-node-info",properties:{nodeName:String,graphHierarchy:Object,renderHierarchy:Object,colorBy:String,_templateIndex:{type:Function,computed:"_getTemplateIndex(graphHierarchy)"},_node:{type:Object,computed:"_getNode(nodeName, graphHierarchy)",observer:"_resetState"},_nodeStats:{type:Object,computed:"_getNodeStats(nodeName, graphHierarchy)",observer:"_resetState"},_hasDisplayableNodeStats:{type:Object,computed:"_getHasDisplayableNodeStats(_nodeStats)"},_nodeStatsFormattedBytes:{type:String,
computed:"_getNodeStatsFormattedBytes(_nodeStats)"},_nodeStatsFormattedComputeTime:{type:String,computed:"_getNodeStatsFormattedComputeTime(_nodeStats)"},_nodeStatsFormattedOutputSizes:{type:Array,computed:"_getNodeStatsFormattedOutputSizes(_nodeStats)"},nodeInclude:{type:Number,observer:"_nodeIncludeStateChanged"},_attributes:{type:Array,computed:"_getAttributes(_node)"},_device:{type:String,computed:"_getDevice(_node)"},_successors:{type:Object,computed:"_getSuccessors(_node, graphHierarchy)"},
_predecessors:{type:Object,computed:"_getPredecessors(_node, graphHierarchy)"},_functionUsages:{type:Array,computed:"_getFunctionUsages(_node, graphHierarchy)"},_subnodes:{type:Array,computed:"_getSubnodes(_node)"},_expanded:{type:Boolean,value:!0},_totalPredecessors:{type:Number,computed:"_getTotalPred(_predecessors)"},_totalSuccessors:{type:Number,computed:"_getTotalSucc(_successors)"},_openedControlPred:{type:Boolean,value:!1},_openedControlSucc:{type:Boolean,value:!1},_auxButtonText:String,_groupButtonText:String},
expandNode:function(){this.fire("_node.expand",this.node)},_getTemplateIndex:function(a){return a.getTemplateIndex()},_getNode:function(a,b){return b.node(a)},_getNodeStats:function(a,b){return(a=this._getNode(a,b))?a.stats:null},_getTotalMicros:function(a){return a?a.getTotalMicros():0},_getHasDisplayableNodeStats:function(a){return tf.graph.util.hasDisplayableNodeStats(a)},_getNodeStatsFormattedBytes:function(a){if(a&&a.totalBytes)return tf.graph.util.convertUnitsToHumanReadable(a.totalBytes,tf.graph.util.MEMORY_UNITS)},
_getNodeStatsFormattedComputeTime:function(a){if(a&&a.getTotalMicros())return tf.graph.util.convertUnitsToHumanReadable(a.getTotalMicros(),tf.graph.util.TIME_UNITS)},_getNodeStatsFormattedOutputSizes:function(a){if(a&&a.outputSize&&a.outputSize.length)return _.map(a.outputSize,function(b){return 0===b.length?"scalar":"["+b.join(", ")+"]"})},_getPrintableHTMLNodeName:function(a){return(a||"").replace(/\//g,"\x3cwbr\x3e/")},_getRenderInfo:function(a){return this.renderHierarchy.getOrCreateRenderNodeByName(a)},
_getAttributes:function(a){this.async(this._resizeList.bind(this,"#attributesList"));if(!a||!a.attr)return[];var b=[];_.each(a.attr,function(c){c.key===tf.graph.LARGE_ATTRS_KEY?b=b.concat(c.value.list.s.map(function(e){return{key:e,value:"Too large to show..."}})):b.push({key:c.key,value:JSON.stringify(c.value)})});return b},_getDevice:function(a){return a?a.device:null},_getSuccessors:function(a,b){this._refreshNodeItemList("inputsList");return a?this._convertEdgeListToEdgeInfoList(b.getSuccessors(a.name),
!1,a.isGroupNode):{regular:[],control:[]}},_getPredecessors:function(a,b){this._refreshNodeItemList("outputsList");return a?this._convertEdgeListToEdgeInfoList(b.getPredecessors(a.name),!0,a.isGroupNode):{regular:[],control:[]}},_getFunctionUsages:function(a,b){this._refreshNodeItemList("functionUsagesList");return a&&a.type===tf.graph.NodeType.META?(a=b.libraryFunctions[a.associatedFunction])?a.usages:[]:[]},_refreshNodeItemList:function(a){this.async(this._resizeList.bind(this,"#"+a))},_convertEdgeListToEdgeInfoList:function(a,
b,c){function e(h){return _.map(h.baseEdgeList,function(l){var n=b?l.v:l.w;return{name:n,node:f._getNode(n,f.graphHierarchy),edgeLabel:tf.graph.scene.edge.getLabelForBaseEdge(l,f.renderHierarchy),renderInfo:f._getRenderInfo(n,f.renderHierarchy)}})}var f=this,g=function(h){var l=this,n=[];_.each(h,function(m){var q=b?m.v:m.w;c&&1!=m.baseEdgeList.length?n.push({name:q,node:l._getNode(q,l.graphHierarchy),edgeLabel:tf.graph.scene.edge.getLabelForEdge(m,l.renderHierarchy),renderInfo:l._getRenderInfo(q,
l.renderHierarchy)}):n=n.concat(e(m))});return n}.bind(this);return{regular:g(a.regular),control:g(a.control)}},_getSubnodes:function(a){return a&&a.metagraph?a.metagraph.nodes():null},_getTotalPred:function(a){return a.regular.length+a.control.length},_getTotalSucc:function(a){return a.regular.length+a.control.length},_toggleControlPred:function(){this._openedControlPred=!this._openedControlPred},_toggleControlSucc:function(){this._openedControlSucc=!this._openedControlSucc},_toggleExpanded:function(){this._expanded=
!this._expanded},_getToggleIcon:function(a){return a?"expand-less":"expand-more"},_resetState:function(){this._openedControlSucc=this._openedControlPred=!1;this.set("_groupButtonText",tf.graph.scene.node.getGroupSettingLabel(this._node));this._node&&(Polymer.dom(this.$.nodetitle).innerHTML=this._getPrintableHTMLNodeName(this._node.name))},_resizeList:function(a){(a=document.querySelector(a))&&a.fire("iron-resize")},_toggleInclude:function(){document.querySelector("#graph").fire("node-toggle-extract",
{name:this.nodeName});document.querySelector("#graphboard").fire("node-toggle-extract")},_nodeIncludeStateChanged:function(a){this.set("_auxButtonText",tf.graph.getIncludeNodeButtonString(a))},_toggleGroup:function(){var a=document.querySelector("#graph"),b=tf.graph.scene.node.getSeriesName(this._node);a.fire("node-toggle-seriesgroup",{name:b})},_isLibraryFunction:function(a){return a&&a.name.startsWith(tf.graph.FUNCTION_LIBRARY_NODE_PREFIX)},_isInSeries:function(a){return tf.graph.scene.node.canBeInSeries(a)}});
</script>
</dom-module>


<dom-module id="tf-graph-info">
<template>
<style>
:host {
  font-size: 12px;
  margin: 0;
  padding: 0;
  display: block;
  max-height: 650px;
  overflow-x: hidden;
  overflow-y: auto;
}

h2 {
  padding: 0;
  text-align: center;
  margin: 0;
}
</style>
<template is="dom-if" if="{{selectedNode}}">
  <paper-material elevation="1" class="card">
    <tf-node-info graph-hierarchy="[[graphHierarchy]]" render-hierarchy="[[renderHierarchy]]" flat-graph="[[graph]]" node-name="[[selectedNode]]" node-include="[[selectedNodeInclude]]" highlighted-node="{{highlightedNode}}" color-by="[[colorBy]]">
    </tf-node-info>
  </paper-material>
</template>
<template is="dom-if" if="[[_equals(colorBy, 'op_compatibility')]]">
  <tf-graph-op-compat-card graph-hierarchy="[[graphHierarchy]]" hierarchy-params="[[hierarchyParams]]" render-hierarchy="[[renderHierarchy]]" color-by="[[colorBy]]" node-title="[[compatNodeTitle]]">
  </tf-graph-op-compat-card>
</template>
<template is="dom-if" if="[[_healthPillsAvailable(debuggerDataEnabled, nodeNamesToHealthPills)]]">
  <tf-graph-debugger-data-card render-hierarchy="[[renderHierarchy]]" debugger-numeric-alerts="[[debuggerNumericAlerts]]" node-names-to-health-pills="[[nodeNamesToHealthPills]]" selected-node="{{selectedNode}}" highlighted-node="{{highlightedNode}}" are-health-pills-loading="[[areHealthPillsLoading]]" all-steps-mode-enabled="{{allStepsModeEnabled}}" specific-health-pill-step="{{specificHealthPillStep}}" health-pill-step-index="{{healthPillStepIndex}}">
  </tf-graph-debugger-data-card>
</template>
</template>
<script>//~~WEBPATH~~/tf-graph-info/tf-graph-info.html.js
Polymer({is:"tf-graph-info",properties:{title:String,graphHierarchy:Object,graph:Object,renderHierarchy:Object,nodeNamesToHealthPills:Object,healthPillStepIndex:{type:Number,notify:!0},colorBy:String,compatNodeTitle:String,selectedNode:{type:String,notify:!0},highlightedNode:{type:String,notify:!0},selectedNodeInclude:{type:Number,notify:!0},debuggerDataEnabled:Boolean},listeners:{"node-list-item-click":"_nodeListItemClicked","node-list-item-mouseover":"_nodeListItemMouseover","node-list-item-mouseout":"_nodeListItemMouseout"},
_nodeListItemClicked:function(a){this.selectedNode=a.detail.nodeName},_nodeListItemMouseover:function(a){this.highlightedNode=a.detail.nodeName},_nodeListItemMouseout:function(){this.highlightedNode=null},_healthPillsAvailable:function(a,b){return a&&b},_equals:function(a,b){return a===b}});
</script>
</dom-module>




<dom-module id="tf-graph-board">
<template>
<style>
::host {
  display: block;
}

/deep/ .close {
  position: absolute;
  cursor: pointer;
  left: 15px;
  bottom: 15px;
}

.container {
  width: 100%;
  height: 100%;
  opacity: 1;
}

.container.loading {
  cursor: progress;
  opacity: 0.1;
}

.container.loading.error {
  cursor: auto;
}

#info {
  position: absolute;
  right: 5px;
  top: 5px;
  padding: 0px;
  max-width: 380px;
  min-width: 320px;
  background-color: rgba(255,255,255,0.9);
  @apply --shadow-elevation-2dp;
}

#main {
  width: 100%;
  height: 100%;
}

#progress-bar {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  position: absolute;
  top: 40px;
  left: 0;
  font-size: 13px;
}

#progress-msg {
  margin-bottom: 5px;
  white-space: pre-wrap;
  width: 400px;
}

paper-progress {
  width: 400px;
  --paper-progress-height: 6px;
  --paper-progress-active-color: #f3913e;
}

.context-menu {
  position: absolute;
  display: none;
  background-color: #e2e2e2;
  border-radius: 2px;
  font-size: 14px;
  min-width: 150px;
  border: 1px solid #d4d4d4;
}

/deep/ .context-menu ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
  cursor: default;
}

/deep/ .context-menu ul li {
  padding: 4px 16px;
}

/deep/ .context-menu ul li:hover {
  background-color: #f3913e;
  color: white;
}
</style>
<template is="dom-if" if="[[_isNotComplete(progress)]]">
  <div id="progress-bar">
    <div id="progress-msg">[[progress.msg]]</div>
    <paper-progress value="[[progress.value]]"></paper-progress>
  </div>
</template>
<div class$="[[_getContainerClass(progress)]]">
  <div id="main">
    <tf-graph id="graph" graph-hierarchy="{{graphHierarchy}}" basic-graph="[[graph]]" hierarchy-params="[[hierarchyParams]]" render-hierarchy="{{renderHierarchy}}" devices-for-stats="[[devicesForStats]]" stats="[[stats]]" selected-node="{{selectedNode}}" highlighted-node="{{_highlightedNode}}" color-by="[[colorBy]]" color-by-params="{{colorByParams}}" progress="{{progress}}" edge-label-function="[[edgeLabelFunction]]" edge-width-function="[[edgeWidthFunction]]" node-names-to-health-pills="[[nodeNamesToHealthPills]]" health-pill-step-index="[[healthPillStepIndex]]" handle-node-selected="[[handleNodeSelected]]" handle-edge-selected="[[handleEdgeSelected]]"></tf-graph>
  </div>
  <div id="info">
    <tf-graph-info id="graph-info" title="selected" graph-hierarchy="[[graphHierarchy]]" hierarchy-params="[[hierarchyParams]]" render-hierarchy="[[renderHierarchy]]" graph="[[graph]]" selected-node="{{selectedNode}}" selected-node-include="{{_selectedNodeInclude}}" highlighted-node="{{_highlightedNode}}" color-by="[[colorBy]]" color-by-params="[[colorByParams]]" debugger-data-enabled="[[debuggerDataEnabled]]" are-health-pills-loading="[[areHealthPillsLoading]]" debugger-numeric-alerts="[[debuggerNumericAlerts]]" node-names-to-health-pills="[[nodeNamesToHealthPills]]" all-steps-mode-enabled="{{allStepsModeEnabled}}" specific-health-pill-step="{{specificHealthPillStep}}" health-pill-step-index="{{healthPillStepIndex}}" compat-node-title="[[compatNodeTitle]]"></tf-graph-info>
  </div>
  <div class="context-menu"></div>
</div>
</template>
</dom-module>

<script>//~~WEBPATH~~/tf-graph-board/tf-graph-board.html.js
Polymer({is:"tf-graph-board",properties:{graphHierarchy:Object,graph:Object,stats:Object,progress:Object,colorBy:String,colorByParams:{type:Object,notify:!0},renderHierarchy:{type:Object,notify:!0},debuggerDataEnabled:Boolean,areHealthPillsLoading:Boolean,debuggerNumericAlerts:{type:Array,notify:!0},nodeNamesToHealthPills:Object,allStepsModeEnabled:{type:Boolean,notify:!0,value:!1},specificHealthPillStep:{type:Number,notify:!0,value:0},healthPillStepIndex:Number,selectedNode:{type:String,notify:!0},
compatNodeTitle:String,edgeWidthFunction:Object,_selectedNodeInclude:Number,_highlightedNode:String,handleNodeSelected:Object,edgeLabelFunction:Object,handleEdgeSelected:Object},listeners:{"node-toggle-extract":"_nodeToggleExtract"},observers:["_updateNodeInclude(selectedNode)"],_isNotComplete:function(a){return 100>a.value},_getContainerClass:function(a){var b="container";a.error&&(b+=" error");this._isNotComplete(a)&&(b+=" loading");return b},_updateNodeInclude:function(a){a=this.graphHierarchy.node(a);
this.set("_selectedNodeInclude",a?a.include:tf.graph.InclusionType.UNSPECIFIED)},_nodeToggleExtract:function(){this._updateNodeInclude(this.selectedNode)}});
</script>












<script>//~~WEBPATH~~/iron-menu-behavior/iron-menubar-behavior.html.js
Polymer.IronMenubarBehaviorImpl={hostAttributes:{role:"menubar"},keyBindings:{left:"_onLeftKey",right:"_onRightKey"},_onUpKey:function(a){this.focusedItem.click();a.detail.keyboardEvent.preventDefault()},_onDownKey:function(a){this.focusedItem.click();a.detail.keyboardEvent.preventDefault()},get _isRTL(){return"rtl"===window.getComputedStyle(this).direction},_onLeftKey:function(a){this._isRTL?this._focusNext():this._focusPrevious();a.detail.keyboardEvent.preventDefault()},_onRightKey:function(a){this._isRTL?
this._focusPrevious():this._focusNext();a.detail.keyboardEvent.preventDefault()},_onKeydown:function(a){this.keyboardEventMatchesKeys(a,"up down left right esc")||this._focusWithKeyboardEvent(a)}};Polymer.IronMenubarBehavior=[Polymer.IronMenuBehavior,Polymer.IronMenubarBehaviorImpl];
</script>








<dom-module id="paper-radio-button">
  <template strip-whitespace>
    <style>
      :host {
        display: inline-block;
        line-height: 0;
        white-space: nowrap;
        cursor: pointer;
        @apply --paper-font-common-base;
        --calculated-paper-radio-button-size: var(--paper-radio-button-size, 16px);
        /* -1px is a sentinel for the default and is replace in `attached`. */
        --calculated-paper-radio-button-ink-size: var(--paper-radio-button-ink-size, -1px);
      }

      :host(:focus) {
        outline: none;
      }

      #radioContainer {
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;
        width: var(--calculated-paper-radio-button-size);
        height: var(--calculated-paper-radio-button-size);
        vertical-align: middle;

        @apply --paper-radio-button-radio-container;
      }

      #ink {
        position: absolute;
        top: 50%;
        left: 50%;
        right: auto;
        width: var(--calculated-paper-radio-button-ink-size);
        height: var(--calculated-paper-radio-button-ink-size);
        color: var(--paper-radio-button-unchecked-ink-color, var(--primary-text-color));
        opacity: 0.6;
        pointer-events: none;
        -webkit-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
      }

      #ink[checked] {
        color: var(--paper-radio-button-checked-ink-color, var(--primary-color));
      }

      #offRadio, #onRadio {
        position: absolute;
        box-sizing: border-box;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 50%;
      }

      #offRadio {
        border: 2px solid var(--paper-radio-button-unchecked-color, var(--primary-text-color));
        background-color: var(--paper-radio-button-unchecked-background-color, transparent);
        transition: border-color 0.28s;
      }

      #onRadio {
        background-color: var(--paper-radio-button-checked-color, var(--primary-color));
        -webkit-transform: scale(0);
        transform: scale(0);
        transition: -webkit-transform ease 0.28s;
        transition: transform ease 0.28s;
        will-change: transform;
      }

      :host([checked]) #offRadio {
        border-color: var(--paper-radio-button-checked-color, var(--primary-color));
      }

      :host([checked]) #onRadio {
        -webkit-transform: scale(0.5);
        transform: scale(0.5);
      }

      #radioLabel {
        line-height: normal;
        position: relative;
        display: inline-block;
        vertical-align: middle;
        margin-left: var(--paper-radio-button-label-spacing, 10px);
        white-space: normal;
        color: var(--paper-radio-button-label-color, var(--primary-text-color));

        @apply --paper-radio-button-label;
      }

      :host([checked]) #radioLabel {
        @apply --paper-radio-button-label-checked;
      }

      #radioLabel:dir(rtl) {
        margin-left: 0;
        margin-right: var(--paper-radio-button-label-spacing, 10px);
      }

      #radioLabel[hidden] {
        display: none;
      }

      /* disabled state */

      :host([disabled]) #offRadio {
        border-color: var(--paper-radio-button-unchecked-color, var(--primary-text-color));
        opacity: 0.5;
      }

      :host([disabled][checked]) #onRadio {
        background-color: var(--paper-radio-button-unchecked-color, var(--primary-text-color));
        opacity: 0.5;
      }

      :host([disabled]) #radioLabel {
        /* slightly darker than the button, so that it's readable */
        opacity: 0.65;
      }
    </style>

    <div id="radioContainer">
      <div id="offRadio"></div>
      <div id="onRadio"></div>
    </div>

    <div id="radioLabel"><slot></slot></div>
  </template>

  <script>//~~WEBPATH~~/paper-radio-button/paper-radio-button.html.js
Polymer({is:"paper-radio-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"radio","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},ready:function(){this._rippleContainer=this.$.radioContainer},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-radio-button-ink-size").trim()){var a=parseFloat(this.getComputedStyleValue("--calculated-paper-radio-button-size").trim()),
b=Math.floor(3*a);b%2!==a%2&&b++;this.updateStyles({"--paper-radio-button-ink-size":b+"px"})}})}});
</script>
</dom-module>




<dom-module id="paper-radio-group">
  <template>
    <style>
      :host {
        display: inline-block;
      }

      :host ::slotted(*) {
        padding: var(--paper-radio-group-item-padding, 12px);
      }
    </style>

    <slot></slot>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-radio-group/paper-radio-group.html.js
Polymer({is:"paper-radio-group",behaviors:[Polymer.IronMenubarBehavior],hostAttributes:{role:"radiogroup"},properties:{attrForSelected:{type:String,value:"name"},selectedAttribute:{type:String,value:"checked"},selectable:{type:String,value:"paper-radio-button"},allowEmptySelection:{type:Boolean,value:!1}},select:function(a){var b=this._valueToItem(a);if(!b||!b.hasAttribute("disabled")){if(this.selected){b=this._valueToItem(this.selected);if(this.selected==a)if(this.allowEmptySelection)a="";else{b&&
(b.checked=!0);return}b&&(b.checked=!1)}Polymer.IronSelectableBehavior.select.apply(this,[a]);this.fire("paper-radio-group-changed")}},_activateFocusedItem:function(){this._itemActivate(this._valueForItem(this.focusedItem),this.focusedItem)},_onUpKey:function(a){this._focusPrevious();a.preventDefault();this._activateFocusedItem()},_onDownKey:function(a){this._focusNext();a.preventDefault();this._activateFocusedItem()},_onLeftKey:function(a){Polymer.IronMenubarBehaviorImpl._onLeftKey.apply(this,arguments);
this._activateFocusedItem()},_onRightKey:function(a){Polymer.IronMenubarBehaviorImpl._onRightKey.apply(this,arguments);this._activateFocusedItem()}});
</script>







<dom-module id="paper-tooltip">
  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        outline: none;
        z-index: 1002;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: default;
      }

      #tooltip {
        display: block;
        outline: none;
        @apply --paper-font-common-base;
        font-size: 10px;
        line-height: 1;
        background-color: var(--paper-tooltip-background, #616161);
        color: var(--paper-tooltip-text-color, white);
        padding: 8px;
        border-radius: 2px;
        @apply --paper-tooltip;
      }

      @keyframes keyFrameScaleUp {
        0% {
          transform: scale(0.0);
        }
        100% {
          transform: scale(1.0);
        }
      }

      @keyframes keyFrameScaleDown {
        0% {
          transform: scale(1.0);
        }
        100% {
          transform: scale(0.0);
        }
      }

      @keyframes keyFrameFadeInOpacity {
        0% {
          opacity: 0;
        }
        100% {
          opacity: var(--paper-tooltip-opacity, 0.9);
        }
      }

      @keyframes keyFrameFadeOutOpacity {
        0% {
          opacity: var(--paper-tooltip-opacity, 0.9);
        }
        100% {
          opacity: 0;
        }
      }

      @keyframes keyFrameSlideDownIn {
        0% {
          transform: translateY(-2000px);
          opacity: 0;
        }
        10% {
          opacity: 0.2;
        }
        100% {
          transform: translateY(0);
          opacity: var(--paper-tooltip-opacity, 0.9);
        }
      }

      @keyframes keyFrameSlideDownOut {
        0% {
          transform: translateY(0);
          opacity: var(--paper-tooltip-opacity, 0.9);
        }
        10% {
          opacity: 0.2;
        }
        100% {
          transform: translateY(-2000px);
          opacity: 0;
        }
      }

      .fade-in-animation {
        opacity: 0;
        animation-delay: var(--paper-tooltip-delay-in, 500ms);
        animation-name: keyFrameFadeInOpacity;
        animation-iteration-count: 1;
        animation-timing-function: ease-in;
        animation-duration: var(--paper-tooltip-duration-in, 500ms);
        animation-fill-mode: forwards;
        @apply --paper-tooltip-animation;
      }

      .fade-out-animation {
        opacity: var(--paper-tooltip-opacity, 0.9);
        animation-delay: var(--paper-tooltip-delay-out, 0ms);
        animation-name: keyFrameFadeOutOpacity;
        animation-iteration-count: 1;
        animation-timing-function: ease-in;
        animation-duration: var(--paper-tooltip-duration-out, 500ms);
        animation-fill-mode: forwards;
        @apply --paper-tooltip-animation;
      }

      .scale-up-animation {
        transform: scale(0);
        opacity: var(--paper-tooltip-opacity, 0.9);
        animation-delay: var(--paper-tooltip-delay-in, 500ms);
        animation-name: keyFrameScaleUp;
        animation-iteration-count: 1;
        animation-timing-function: ease-in;
        animation-duration: var(--paper-tooltip-duration-in, 500ms);
        animation-fill-mode: forwards;
        @apply --paper-tooltip-animation;
      }

      .scale-down-animation {
        transform: scale(1);
        opacity: var(--paper-tooltip-opacity, 0.9);
        animation-delay: var(--paper-tooltip-delay-out, 500ms);
        animation-name: keyFrameScaleDown;
        animation-iteration-count: 1;
        animation-timing-function: ease-in;
        animation-duration: var(--paper-tooltip-duration-out, 500ms);
        animation-fill-mode: forwards;
        @apply --paper-tooltip-animation;
      }

      .slide-down-animation {
        transform: translateY(-2000px);
        opacity: 0;
        animation-delay: var(--paper-tooltip-delay-out, 500ms);
        animation-name: keyFrameSlideDownIn;
        animation-iteration-count: 1;
        animation-timing-function: cubic-bezier(0.0, 0.0, 0.2, 1);
        animation-duration: var(--paper-tooltip-duration-out, 500ms);
        animation-fill-mode: forwards;
        @apply --paper-tooltip-animation;
      }

      .slide-down-animation-out {
        transform: translateY(0);
        opacity: var(--paper-tooltip-opacity, 0.9);
        animation-delay: var(--paper-tooltip-delay-out, 500ms);
        animation-name: keyFrameSlideDownOut;
        animation-iteration-count: 1;
        animation-timing-function: cubic-bezier(0.4, 0.0, 1, 1);
        animation-duration: var(--paper-tooltip-duration-out, 500ms);
        animation-fill-mode: forwards;
        @apply --paper-tooltip-animation;
      }

      .cancel-animation {
        animation-delay: -30s !important;
      }

      /* Thanks IE 10. */

      .hidden {
        display: none !important;
      }
    </style>

    <div id="tooltip" class="hidden">
      <slot></slot>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-tooltip/paper-tooltip.html.js
Polymer({is:"paper-tooltip",hostAttributes:{role:"tooltip",tabindex:-1},properties:{for:{type:String,observer:"_findTarget"},manualMode:{type:Boolean,value:!1,observer:"_manualModeChanged"},position:{type:String,value:"bottom"},fitToVisibleBounds:{type:Boolean,value:!1},offset:{type:Number,value:14},marginTop:{type:Number,value:14},animationDelay:{type:Number,value:500,observer:"_delayChange"},animationEntry:{type:String,value:""},animationExit:{type:String,value:""},animationConfig:{type:Object,
value:function(){return{entry:[{name:"fade-in-animation",node:this,timing:{delay:0}}],exit:[{name:"fade-out-animation",node:this}]}}},_showing:{type:Boolean,value:!1}},listeners:{webkitAnimationEnd:"_onAnimationEnd"},get target(){var a=Polymer.dom(this).parentNode,b=Polymer.dom(this).getOwnerRoot();return this.for?Polymer.dom(b).querySelector("#"+this.for):a.nodeType==Node.DOCUMENT_FRAGMENT_NODE?b.host:a},attached:function(){this._findTarget()},detached:function(){this.manualMode||this._removeListeners()},
playAnimation:function(a){"entry"===a?this.show():"exit"===a&&this.hide()},cancelAnimation:function(){this.$.tooltip.classList.add("cancel-animation")},show:function(){if(!this._showing){if(""===Polymer.dom(this).textContent.trim()){for(var a=!0,b=Polymer.dom(this).getEffectiveChildNodes(),c=0;c<b.length;c++)if(""!==b[c].textContent.trim()){a=!1;break}if(a)return}this._showing=!0;this.$.tooltip.classList.remove("hidden");this.$.tooltip.classList.remove("cancel-animation");this.$.tooltip.classList.remove(this._getAnimationType("exit"));
this.updatePosition();this._animationPlaying=!0;this.$.tooltip.classList.add(this._getAnimationType("entry"))}},hide:function(){this._showing&&(this._animationPlaying?(this._showing=!1,this._cancelAnimation()):(this._onAnimationFinish(),this._showing=!1,this._animationPlaying=!0))},updatePosition:function(){if(this._target&&this.offsetParent){var a=this.offset;14!=this.marginTop&&14==this.offset&&(a=this.marginTop);var b=this.offsetParent.getBoundingClientRect(),c=this._target.getBoundingClientRect(),
e=this.getBoundingClientRect(),f=(c.width-e.width)/2,g=(c.height-e.height)/2,h=c.left-b.left,l=c.top-b.top;switch(this.position){case "top":var n=h+f;var m=l-e.height-a;break;case "bottom":n=h+f;m=l+c.height+a;break;case "left":n=h-e.width-a;m=l+g;break;case "right":n=h+c.width+a,m=l+g}this.fitToVisibleBounds?(b.left+n+e.width>window.innerWidth?(this.style.right="0px",this.style.left="auto"):(this.style.left=Math.max(0,n)+"px",this.style.right="auto"),b.top+m+e.height>window.innerHeight?(this.style.bottom=
b.height+"px",this.style.top="auto"):(this.style.top=Math.max(-b.top,m)+"px",this.style.bottom="auto")):(this.style.left=n+"px",this.style.top=m+"px")}},_addListeners:function(){this._target&&(this.listen(this._target,"mouseenter","show"),this.listen(this._target,"focus","show"),this.listen(this._target,"mouseleave","hide"),this.listen(this._target,"blur","hide"),this.listen(this._target,"tap","hide"));this.listen(this.$.tooltip,"animationend","_onAnimationEnd");this.listen(this,"mouseenter","hide")},
_findTarget:function(){this.manualMode||this._removeListeners();this._target=this.target;this.manualMode||this._addListeners()},_delayChange:function(a){500!==a&&this.updateStyles({"--paper-tooltip-delay-in":a+"ms"})},_manualModeChanged:function(){this.manualMode?this._removeListeners():this._addListeners()},_cancelAnimation:function(){this.$.tooltip.classList.remove(this._getAnimationType("entry"));this.$.tooltip.classList.remove(this._getAnimationType("exit"));this.$.tooltip.classList.remove("cancel-animation");
this.$.tooltip.classList.add("hidden")},_onAnimationFinish:function(){this._showing&&(this.$.tooltip.classList.remove(this._getAnimationType("entry")),this.$.tooltip.classList.remove("cancel-animation"),this.$.tooltip.classList.add(this._getAnimationType("exit")))},_onAnimationEnd:function(){this._animationPlaying=!1;this._showing||(this.$.tooltip.classList.remove(this._getAnimationType("exit")),this.$.tooltip.classList.add("hidden"))},_getAnimationType:function(a){if("entry"===a&&""!==this.animationEntry)return this.animationEntry;
if("exit"===a&&""!==this.animationExit)return this.animationExit;if(this.animationConfig[a]&&"string"===typeof this.animationConfig[a][0].name){if(this.animationConfig[a][0].timing&&this.animationConfig[a][0].timing.delay&&0!==this.animationConfig[a][0].timing.delay){var b=this.animationConfig[a][0].timing.delay;"entry"===a?this.updateStyles({"--paper-tooltip-delay-in":b+"ms"}):"exit"===a&&this.updateStyles({"--paper-tooltip-delay-out":b+"ms"})}return this.animationConfig[a][0].name}},_removeListeners:function(){this._target&&
(this.unlisten(this._target,"mouseenter","show"),this.unlisten(this._target,"focus","show"),this.unlisten(this._target,"mouseleave","hide"),this.unlisten(this._target,"blur","hide"),this.unlisten(this._target,"tap","hide"));this.unlisten(this.$.tooltip,"animationend","_onAnimationEnd");this.unlisten(this,"mouseenter","hide")}});
</script>
</dom-module>









<dom-module id="tf-graph-node-search">
<template>
<div id="search-container">
  <paper-input id="runs-regex" label="Search nodes. Regexes supported." value="{{_rawRegexInput}}">
  </paper-input>
  <div id="search-results-anchor">
    <div id="search-results">
      <template is="dom-repeat" items="[[_regexMatches]]">
        <div id="search-match" on-click="_matchClicked">[[item]]</div>
      </template>
    </div>
  </div>
</div>
<style>
#search-container {
  width: 100%;
  overflow: visible;
}

#runs-regex {
  width: 100%;
}

#search-results-anchor {
  position: relative;
}

#search-results {
  color: #fff;
  position: absolute;
  max-height: 200px;
  overflow-x: hidden;
  overflow-y: auto;
  text-align: right;
  max-width: 100%;
  box-sizing: border-box;
}

#search-match {
  background: var(--tb-orange-strong);
  padding: 3px;
  float: right;
  width: 100%;
  box-sizing: border-box;
  direction: rtl;
}

#search-match:hover {
  background: var(--tb-orange-weak);
  cursor: pointer;
}
</style>
</template>
<script>//~~WEBPATH~~/tf-graph-node-search/tf-graph-node-search.html.js
Polymer({is:"tf-graph-node-search",properties:{renderHierarchy:Object,selectedNode:{type:String,notify:!0},_rawRegexInput:{type:String,value:""},_regexInput:{type:String,computed:"_computeRegexInput(renderHierarchy, _rawRegexInput)"},_previousRegexInput:{type:String,value:""},_searchTimeoutDelay:{type:Number,value:150,readOnly:!0},_searchPending:Boolean,_maxRegexResults:{type:Number,value:42},_regexMatches:Array},observers:["_regexInputChanged(_regexInput)"],_computeRegexInput:function(a,b){return b.trim()},
_regexInputChanged:function(){this._requestSearch()},_clearSearchResults:function(){this.set("_regexMatches",[])},_requestSearch:function(){var a=this;this._searchPending||(this._regexInput===this._previousRegexInput?this._searchPending=!1:(this._searchPending=!0,this._executeSearch(),this.async(function(){a._searchPending=!1;a._requestSearch()},this._searchTimeoutDelay)))},_executeSearch:function(){var a=this;if(this._previousRegexInput=this._regexInput){try{var b=new RegExp(this._regexInput)}catch(e){this._clearSearchResults();
return}var c=[];_.each(this.renderHierarchy.hierarchy.getNodeMap(),function(e,f){if(c.length>=a._maxRegexResults)return!1;b.test(f)&&c.push(f)});this.set("_regexMatches",c)}else this._clearSearchResults()},_matchClicked:function(a){this.set("selectedNode",a.model.item)}});
</script>
</dom-module>


<dom-module id="tf-graph-controls">
<template>
<style>
:host {
  color: gray;
  display: flex;
  flex-direction: column;
  font-size: 12px;
  width: 100%;

  --paper-font-subhead: {
    font-size: 14px;
    color: gray;
  };
  --paper-dropdown-menu-icon: {
    width: 15px;
    height: 15px;
  };
  --paper-dropdown-menu-button: {
    padding: 0;
  };
  --paper-dropdown-menu-input: {
    padding: 0;
  };
  --paper-item-min-height: 30px;
}

paper-button[raised].keyboard-focus {
  font-weight: normal;
}

.run-dropdown {
  --paper-input-container: {
    padding: 8px 0 8px 10px;
  };
}

.color-dropdown {
  --paper-input-container: {
    padding: 9px 0 0 13px;
  };
}

table {
  border-collapse: collapse;
  border-spacing: 0;
}

table td {
  padding: 0;
  margin: 0;
}

.allcontrols {
  padding: 0 20px 20px;
  flex-grow: 1;
  overflow-y: auto;
}

.legend-holder {
  background: #e9e9e9;
  border-top: 1px solid #ccc;
  box-sizing: border-box;
  color: #555;
  padding: 15px 20px;
  width: 100%;
}

.toggle-legend-button {
  max-height: 20px;
  max-width: 20px;
  padding: 0;
}

.toggle-legend-text {
  vertical-align: middle;
}

paper-radio-button {
  display: block;
  padding: 5px;
}
svg.icon {
  width: 60px;
  height: 18px;
}
.icon ellipse {
  rx: 10px;
  ry: 5px;
  stroke: #CCC;
  stroke-width: 1px;
  fill: #FFFFFF;
  cy: 10px;
}
.icon rect {
  height: 14px;
  width: 35px;
  rx: 5px;
  ry: 5px;
  stroke: #CCC;
  stroke-width: 2px;
  fill: #D9D9D9;
}
.domainValues {
  margin-bottom: 10px;
  width: 165px;
}
.domainStart {
  float: left;
}
.domainEnd {
  float: right;
}
.colorBox {
  width: 20px;
}

.image-icon {
  width: 24px;
  height: 24px;
}

.help-icon {
  height: 15px;
  margin: 0;
  padding: 0;
}

.gray {
  color: #666;
}

.title {
  font-size: 16px;
  margin: 8px 5px 8px 0;
  color: black;
}
.title small {
  font-weight: normal;
}
.deviceList, .xlaClusterList {
  max-height: 200px;
  overflow-y: auto;
}

#file {
  padding: 8px 0;
}

.color-legend-row {
  clear: both;
  height: 20px;
  margin-top: 5px;
  position: relative;
}

.color-legend-row svg {
  position: absolute;
  top: -1px;
  width: 40px;
}

.color-legend-row span.color-legend-value {
  margin-left: 60px;
}

#grey-rect {
  fill: #eee;
  stroke: #a6a6a6;
}

#faded-rect {
  fill: url(#rectHatch);
  stroke: var(--tb-graph-faded);
}

#unfilled-rect {
  stroke: #a6a6a6;
}

.devices-checkbox input {
  text-align: left;
  vertical-align: middle
}

.control-holder .icon-button {
  font-size: 14px;
  margin: 0 -5px;
  padding: 5px;
}

.button-text {
  padding-left: 20px;
  text-transform: none;
}

.upload-button {
  width: 165px;
  height: 25px;
  text-transform: none;
  margin-top: 4px;
}

.button-icon {
  width: 26px;
  height: 26px;
  color: var(--paper-orange-500);
}

.hidden-input {
  height: 0px;
  width: 0px;
  overflow:hidden;
}

.allcontrols .control-holder {
  clear: both;
  display: flex;
  justify-content: space-between;
}

.allcontrols .control-holder paper-radio-group {
  margin-top: 5px;
}

span.counter {
  font-size: 13px;
  color: gray;
}

.runs paper-item {
  --paper-item: {
    white-space: nowrap;
  }
}

table.control-holder {
  border: 0;
  border-collapse: collapse;
}

table.tf-graph-controls td.input-element-table-data {
  padding: 0 0 0 20px;
}

.spacer {
  flex-grow: 1;
}

.color-text {
  overflow: hidden;
}

/** Override inline styles that suppress pointer events for disabled buttons. Otherwise, the */
/*  tooltips do not appear. */
paper-radio-group paper-radio-button {
  pointer-events: auto !important;
}

.legend-clarifier {
  color: #266236;
  cursor: help;
  display: inline-block;
  text-decoration: underline;
}

.legend-clarifier paper-tooltip {
  width: 150px;
}

/** Otherwise, polymer UI controls appear atop node search. */
tf-graph-node-search {
  z-index: 1;
  width: 100%;
}

paper-dropdown-menu {
  flex-grow: 1;
}
</style>
<svg width="0" height="0">
  <defs>
    <g id="legend-rect">
      <rect x="1" y="1" stroke-width="2px" height="14" width="35" rx="5" ry="5"></rect>
    </g>
    <g id="grey-rect">
       <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#legend-rect" />
     </g>
     <g id="faded-rect">
       <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#legend-rect" />
     </g>
     <g id="unfilled-rect">
       <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#legend-rect" />
     </g>
  </defs>
</svg>
<div class="allcontrols">
  <div class="control-holder">
    <tf-graph-node-search selected-node="{{selectedNode}}" render-hierarchy="[[renderHierarchy]]"></tf-graph-node-search>
  </div>
  <div class="control-holder">
    <paper-button class="icon-button" on-click="fit" alt="Fit to screen">
      <iron-icon icon="aspect-ratio" class="button-icon"></iron-icon>
      <span class="button-text">Fit to Screen</span>
    </paper-button>
  </div>
  <div class="control-holder">
    <paper-button class="icon-button" on-click="download" alt="Download PNG">
      <iron-icon icon="file-download" class="button-icon"></iron-icon>
      <span class="button-text">Download PNG</span>
    </paper-button>
    <a href="#" id="graphdownload" class="title" download="graph.png"></a>
  </div>
  <div class="control-holder runs">
    <div class="title">Run <span class="counter">([[datasets.length]])</span></div>
    <paper-dropdown-menu no-label-float no-animations noink horizontal-align="left" class="run-dropdown">
      <paper-menu class="dropdown-content" selected="{{_selectedRunIndex}}" slot="dropdown-content">
        <template is="dom-repeat" items="[[datasets]]">
          <paper-item>[[item.name]]</paper-item>
        </template>
      </paper-menu>
    </paper-dropdown-menu>
  </div>
  <template is="dom-if" if="[[showSessionRunsDropdown]]">
    <div class="control-holder">
      <div class="title">Tag <span class="counter">([[_numTags(datasets, _selectedRunIndex)]])</span></div>
      <paper-dropdown-menu no-label-float no-animations horizontal-align="left" noink class="run-dropdown">
        <paper-menu class="dropdown-content" selected="{{_selectedTagIndex}}" slot="dropdown-content">
          <template is="dom-repeat" items="[[_getTags(datasets, _selectedRunIndex)]]">
            <paper-item>[[item.displayName]]</paper-item>
          </template>
        </paper-menu>
      </paper-dropdown-menu>
    </div>
  </template>
  <template is="dom-if" if="[[showUploadButton]]">
    <div class="control-holder">
      <div class="title">Upload</div>
      <paper-button raised class="upload-button" on-click="_getFile" title="Upload a graph pbtxt file to view the graph">
        Choose File
      </paper-button>
      <div class="hidden-input">
        <input type="file" id="file" name="file" on-change="_updateFileInput" accept=".pbtxt">
      </div>
    </div>
  </template>
  <div class="control-holder">
    <paper-radio-group selected="{{_selectedGraphType}}">
      
      <paper-radio-button name="op_graph" disabled="[[_getSelectionOpGraphDisabled(datasets, _selectedRunIndex, _selectedTagIndex)]]">Graph</paper-radio-button>
      <paper-radio-button name="conceptual_graph" disabled="[[_getSelectionConceptualGraphDisabled(datasets, _selectedRunIndex, _selectedTagIndex)]]">Conceptual Graph</paper-radio-button>
      <paper-radio-button name="profile" disabled="[[_getSelectionProfileDisabled(datasets, _selectedRunIndex, _selectedTagIndex)]]">Profile</paper-radio-button>
    </paper-radio-group>
  </div>
  <div class="control-holder">
    <div>
      <paper-toggle-button id="trace-inputs" class="title">
        Trace inputs
      </paper-toggle-button>
    </div>
  </div>
  <template is="dom-if" if="[[healthPillsFeatureEnabled]]">
    <div class="control-holder">
      <paper-toggle-button checked="{{healthPillsToggledOn}}"></paper-toggle-button>
      <div class="title">Show health pills</div>
    </div>
  </template>
  <div class="control-holder">
    <div class="title">Color</div>
    <paper-radio-group selected="{{colorBy}}">
      <paper-radio-button name="structure">Structure</paper-radio-button>

      <paper-radio-button name="device">Device</paper-radio-button>

      <paper-radio-button id="xla-cluster-radio-button" name="xla_cluster" disabled="[[!_xlaClustersProvided(renderHierarchy)]]">
        XLA Cluster
      </paper-radio-button>
      <paper-tooltip animation-delay="0" for="xla-cluster-radio-button" position="right" offset="0">
        Coloring by XLA cluster is only enabled if at least 1 op specifies an XLA cluster.
      </paper-tooltip>

      <paper-radio-button id="compute-time-radio-button" name="compute_time" disabled="[[!stats]]">
        Compute time
      </paper-radio-button>
      <paper-tooltip animation-delay="0" for="compute-time-radio-button" position="right" offset="0">
        Coloring by compute time is only enabled if the RunMetadata proto is passed to the
        FileWriter when a specific session is run.
      </paper-tooltip>

      <paper-radio-button id="memory-radio-button" name="memory" disabled="[[!stats]]">
        Memory
      </paper-radio-button>
      <paper-tooltip animation-delay="0" for="memory-radio-button" position="right" offset="0">
        Coloring by memory is only enabled if the RunMetadata proto is passed to the
        FileWriter when a specific session is run.
      </paper-tooltip>

      <paper-radio-button id="tpu-compatibility-radio-button" name="op_compatibility">
        TPU Compatibility
      </paper-radio-button>
      <paper-tooltip animation-delay="0" for="tpu-compatibility-radio-button" position="right" offset="0">
        Coloring by whether an operation is compatible for the TPU device.
      </paper-tooltip>

    </paper-radio-group>
    <span class="spacer"></span>
  </div>
  <div>
    <template is="dom-if" if="[[_isGradientColoring(stats, colorBy)]]">
      <svg width="140" height="20" style="margin: 0 5px" class="color-text">
        <defs>
          <lineargradient id="linearGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop class="start" offset="0%" stop-color$="[[_currentGradientParams.startColor]]" />
            <stop class="end" offset="100%" stop-color$="[[_currentGradientParams.endColor]]" />
          </lineargradient>
        </defs>
        <rect x="0" y="0" width="135" height="20" fill="url(#linearGradient)" stroke="black" />
      </svg>
      <div class="domainValues color-text">
        <div class="domainStart">[[_currentGradientParams.minValue]]</div>
        <div class="domainEnd">[[_currentGradientParams.maxValue]]</div>
      </div>
      <br style="clear: both">
      <div>Devices included in stats:</div>
      <div class="deviceList">
        <template is="dom-repeat" items="[[_currentDevices]]">
          <div class="color-legend-row devices-checkbox">
            <span><input type="checkbox" value$="[[item.device]]" checked$="[[item.used]]" on-click="_deviceCheckboxClicked"></span>
            <span>[[item.suffix]]</span>
            <template is="dom-if" if="[[item.ignoredMsg]]">
              <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
              <paper-tooltip position="right" offset="0" animation-delay="0">[[item.ignoredMsg]]</paper-tooltip>
            </template>
          </div>
        </template>
      </div>
    </template>
    <template is="dom-if" if="[[_equals(colorBy, 'structure')]]">
      <div class="color-text">
        <div class="color-legend-row">
          <div style="position: absolute;">
            colors
          </div>
          <span class="color-legend-value">same substructure</span>
        </div>
        <div class="color-legend-row">
          <svg>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#grey-rect" x="0" y="0" />
          </svg>
          <span class="color-legend-value">unique substructure</span>
        </div>
      </div>
    </template>
    <template is="dom-if" if="[[_equals(colorBy, 'device')]]">
      <div>
        <template is="dom-repeat" items="[[_currentDeviceParams]]">
          <div class="color-legend-row">
            <svg>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#unfilled-rect" x="0" y="0" style="fill:[[item.color]]" />
            </svg>
            <span class="color-legend-value">[[item.device]]</span>
          </div>
        </template>
        <div class="color-legend-row">
          <svg>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#grey-rect" x="0" y="0" />
          </svg>
          <span class="color-legend-value">unknown device</span>
        </div>
      </div>
    </template>
    <template is="dom-if" if="[[_equals(colorBy, 'xla_cluster')]]">
      <div>
        <template is="dom-repeat" items="[[_currentXlaClusterParams]]">
          <div class="color-legend-row">
            <svg>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#unfilled-rect" x="0" y="0" style="fill:[[item.color]]" />
            </svg>
            <span class="color-legend-value">[[item.xla_cluster]]</span>
          </div>
        </template>
        <div class="color-legend-row">
          <svg>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#grey-rect" x="0" y="0" />
          </svg>
          <span class="color-legend-value">unknown XLA cluster</span>
        </div>
      </div>
    </template>
    <template is="dom-if" if="[[_equals(colorBy, 'op_compatibility')]]">
      <div class="color-text">
        <div class="color-legend-row">
          <svg class="icon" preserveaspectratio="xMinYMid meet" viewbox="0 0 10 10">
            <use xlink:href="#op-node-stamp" fill="#0f9d58" stroke="#ccc" x="9.5" y="6" />
          </svg>
          <span class="color-legend-value">Valid Op</span>
        </div>
        <div class="color-legend-row">
          <svg class="icon" preserveaspectratio="xMinYMid meet" viewbox="0 0 10 10">
            <use xlink:href="#op-node-stamp" fill="#db4437" stroke="#ccc" x="9.5" y="6" />
          </svg>
          <span class="color-legend-value">Invalid Op</span>
        </div>
      </div>
    </template>
    <template is="dom-if" if="[[_statsNotNull(stats)]]">
      <div class="color-legend-row">
        <svg>
          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#faded-rect" x="0" y="0" />
        </svg>
        <span class="color-legend-value">unused substructure</span>
      </div>
    </template>
  </div>
</div>
<div class="legend-holder">
  <paper-icon-button icon="[[_getToggleLegendIcon(_legendOpened)]]" on-click="_toggleLegendOpen" class="toggle-legend-button">
  </paper-icon-button>
  <span class="toggle-legend-text">
    [[_getToggleText(_legendOpened)]]
  </span>
  <iron-collapse opened="[[_legendOpened]]">
    <div>
      <table>
        <tr>
          <td><div class="title">Graph</div></td>
          <td>(* = expandable)</td>
        </tr>
        <tr>
          <td>
            <svg class="icon">
              <rect transform="translate(3, 1)" height="14" width="35" rx="5" ry="5" />
            </svg>
          </td>
          <td>
            Namespace<span class="gray">*</span>
            <div class="legend-clarifier">
              <span>?</span>
              <paper-tooltip animation-delay="0" position="right" offset="0">
                Encapsulates a set of nodes. Namespace is hierarchical and based on scope.
              </paper-tooltip>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <svg class="icon" preserveaspectratio="xMinYMid meet" viewbox="0 0 10 10">
              <use xlink:href="#op-node-stamp" fill="white" stroke="#ccc" x="9.5" y="6" />
            </svg>
          </td>
          <td>
            OpNode
            <div class="legend-clarifier">
              <span>?</span>
              <paper-tooltip animation-delay="0" position="right" offset="0">
                Node that performs an operation. These nodes cannot expand.
              </paper-tooltip>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <svg class="icon" height="15px" preserveaspectratio="xMinYMid meet" viewbox="0 0 12 12">
              <use xlink:href="#op-series-horizontal-stamp" fill="white" stroke="#ccc" x="2" y="2" />
            </svg>
          </td>
          <td>
            Unconnected series<span class="gray">*</span>
            <div class="legend-clarifier">
              <span>?</span>
              <paper-tooltip animation-delay="0" position="right" offset="0">
                Sequence of numbered nodes that are not connected to each other.
              </paper-tooltip>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <svg class="icon" height="15px" preserveaspectratio="xMinYMid meet" viewbox="0 0 15 15">
              <use xlink:href="#op-series-vertical-stamp" fill="white" stroke="#ccc" x="2" y="2" />
            </svg>
          </td>
          <td>
            Connected series<span class="gray">*</span>
            <div class="legend-clarifier">
              <span>?</span>
              <paper-tooltip animation-delay="0" position="right" offset="0">
                Sequence of numbered nodes that are connected to each other.
              </paper-tooltip>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <svg class="icon">
              <circle fill="white" stroke="#848484" cx="10" cy="10" r="5" />
            </svg>
          </td>
          <td>
            Constant
            <div class="legend-clarifier">
              <span>?</span>
              <paper-tooltip animation-delay="0" position="right" offset="0">
                Node that outputs a constant value.
              </paper-tooltip>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <svg class="image-icon" viewbox="0 0 12 12" width="24" height="24">
              <use x="0" y="0" class="image-icon" xlink:href="#summary-icon" />
            </svg>
          </td>
          <td>
            Summary
            <div class="legend-clarifier">
              <span>?</span>
              <paper-tooltip animation-delay="0" position="right" offset="0">
                Node that collects data for visualization within TensorBoard.
              </paper-tooltip>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <svg class="icon" height="15px" preserveaspectratio="xMinYMid meet" viewbox="0 0 15 15">
              <defs>
                <marker id="dataflow-arrowhead-legend" fill="#bbb" markerwidth="10" markerheight="10" refx="9" refy="5" orient="auto-start-reverse">
                  <path d="M 0,0 L 10,5 L 0,10 C 3,7 3,3 0,0" />
                </marker>
              </defs>
              <path marker-end="url(#dataflow-arrowhead-legend)" stroke="#bbb" d="M2 9 l 29 0" stroke-linecap="round" />
            </svg>
          </td>
          <td>
            Dataflow edge
            <div class="legend-clarifier">
              <span>?</span>
              <paper-tooltip animation-delay="0" position="right" offset="0">
                Edge showing the data flow between operations. Edges flow upwards unless arrowheads specify otherwise.
              </paper-tooltip>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <svg class="icon" height="15px" preserveaspectratio="xMinYMid meet" viewbox="0 0 15 15">
              <path stroke="#bbb" d="M2 9 l 29 0" stroke-linecap="round" stroke-dasharray="2, 2" />
            </svg>
          </td>
          <td>
            Control dependency edge
            <div class="legend-clarifier">
              <span>?</span>
              <paper-tooltip animation-delay="0" position="right" offset="0">
                Edge showing the control dependency between operations.
              </paper-tooltip>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <svg class="icon" height="15px" preserveaspectratio="xMinYMid meet" viewbox="0 0 15 15">
              <defs>
                <marker id="reference-arrowhead-legend" fill="#FFB74D" markerwidth="10" markerheight="10" refx="9" refy="5" orient="auto-start-reverse">
                  <path d="M 0,0 L 10,5 L 0,10 C 3,7 3,3 0,0" />
                </marker>
              </defs>
              <path marker-end="url(#reference-arrowhead-legend)" stroke="#FFB74D" d="M2 9 l 29 0" stroke-linecap="round" />
            </svg>
          </td>
          <td>
            Reference edge
            <div class="legend-clarifier">
              <span>?</span>
              <paper-tooltip animation-delay="0" position="right" offset="0">
                Edge showing that the outgoing operation node can mutate the incoming tensor.
              </paper-tooltip>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </iron-collapse>
</div>
</template>
</dom-module>

<script>//~~WEBPATH~~/tf-graph-controls/tf-graph-controls.js
(function(a){(function(b){(function(c){var e=/device:([^:]+:[0-9]+)$/,f=[{regex:e}],g=[],h;(function(n){n.COMPUTE_TIME="compute_time";n.MEMORY="memory";n.STRUCTURE="structure";n.XLA_CLUSTER="xla_cluster";n.OP_COMPATIBILITY="op_compatibility"})(h=c.ColorBy||(c.ColorBy={}));var l=new Set([h.COMPUTE_TIME,h.MEMORY]);Polymer({is:"tf-graph-controls",properties:{stats:{value:null,type:Object,observer:"_statsChanged"},devicesForStats:{value:null,type:Object,notify:!0,readonly:!0},colorBy:{type:String,value:h.STRUCTURE,
notify:!0},colorByParams:{type:Object,notify:!0,readonly:!0},datasets:{type:Array,observer:"_datasetsChanged",value:function(){return[]}},renderHierarchy:{type:Object,notify:!0},selection:{type:Object,notify:!0,readOnly:!0,computed:"_computeSelection(datasets, _selectedRunIndex, _selectedTagIndex, _selectedGraphType)"},selectedFile:{type:Object,notify:!0},_selectedRunIndex:{type:Number,value:0,observer:"_selectedRunIndexChanged"},_selectedTagIndex:{type:Number,value:0,observer:"_selectedTagIndexChanged"},
_selectedGraphType:{type:String,value:a.graph.SelectionType.OP_GRAPH},selectedNode:{type:String,notify:!0},_currentDevices:{type:Array,computed:"_getCurrentDevices(devicesForStats)"},_currentDeviceParams:{type:Array,computed:"_getCurrentDeviceParams(colorByParams)"},_currentXlaClusterParams:{type:Array,computed:"_getCurrentXlaClusterParams(colorByParams)"},_currentGradientParams:{type:Object,computed:"_getCurrentGradientParams(colorByParams, colorBy)"},showSessionRunsDropdown:{type:Boolean,value:!0},
showUploadButton:{type:Boolean,value:!0},healthPillsFeatureEnabled:Boolean,healthPillsToggledOn:{type:Boolean,notify:!0},_legendOpened:{type:Boolean,value:!0}},listeners:{"trace-inputs.change":"_traceInputToggleChanged"},_traceInputToggleChanged:function(n){this.renderHierarchy.traceInputs=n.target.active;a.graph.scene.node.traceInputs(this.renderHierarchy)},_xlaClustersProvided:function(n){return n&&n.hierarchy&&0<n.hierarchy.xlaClusters.length},_statsChanged:function(n){if(null!=n){var m={};_.each(n.dev_stats,
function(q){var r=_.some(f,function(u){return u.regex.test(q.device)}),v=_.some(g,function(u){return u.regex.test(q.device)});r&&!v&&(m[q.device]=!0)});this.set("devicesForStats",m)}},_getCurrentDevices:function(n){var m=this.stats;m=(m?m.dev_stats:[]).map(function(v){return v.device}).filter(function(v){return f.some(function(u){return u.regex.test(v)})});var q=a.graph.util.removeCommonPrefix(m);if(1==q.length){var r=q[0].match(e);r&&(q[0]=r[1])}return m.map(function(v,u){var w=null;g.forEach(function(z){z.regex.test(v)&&
(w=z.msg)});return{device:v,suffix:q[u],used:n[v],ignoredMsg:w}})},_deviceCheckboxClicked:function(n){n=n.target;var m=Object.assign({},this.devicesForStats),q=n.value;n.checked?m[q]=!0:delete m[q];this.set("devicesForStats",m)},_numTags:function(n,m){return this._getTags(n,m).length},_getTags:function(n,m){return n&&n[m]?n[m].tags:[]},fit:function(){document.querySelector("#scene").fit()},_isGradientColoring:function(n,m){return l.has(m)&&null!=n},_equals:function(n,m){return n===m},_getCurrentDeviceParams:function(n){n=
n.device.filter(function(r){return f.some(function(v){return v.regex.test(r.device)})});var m=a.graph.util.removeCommonPrefix(n.map(function(r){return r.device}));if(1==m.length){var q=m[0].match(e);q&&(m[0]=q[1])}return n.map(function(r,v){return{device:m[v],color:r.color}})},_getCurrentXlaClusterParams:function(n){return n.xla_cluster},_getCurrentGradientParams:function(n,m){if(this._isGradientColoring(this.stats,m)){n=n[m];var q=n.minValue,r=n.maxValue;m===h.MEMORY?(q=a.graph.util.convertUnitsToHumanReadable(q,
a.graph.util.MEMORY_UNITS),r=a.graph.util.convertUnitsToHumanReadable(r,a.graph.util.MEMORY_UNITS)):m===h.COMPUTE_TIME&&(q=a.graph.util.convertUnitsToHumanReadable(q,a.graph.util.TIME_UNITS),r=a.graph.util.convertUnitsToHumanReadable(r,a.graph.util.TIME_UNITS));return{minValue:q,maxValue:r,startColor:n.startColor,endColor:n.endColor}}},download:function(){this.$.graphdownload.click()},_updateFileInput:function(n){var m=n.target.files[0];if(m){m=m.name;var q=m.lastIndexOf(".");0<=q&&(m=m.substring(0,
q));q=m.lastIndexOf("/");0<=q&&(m=m.substring(q+1));this._setDownloadFilename(m);this.set("selectedFile",n)}},_datasetsChanged:function(n,m){null!=m&&(this._selectedRunIndex=0)},_computeSelection:function(n,m,q,r){return n[m]&&n[m].tags[q]?{run:n[m].name,tag:n[m].tags[q].tag,type:r}:null},_selectedRunIndexChanged:function(n){this.datasets&&(this.colorBy=h.STRUCTURE,this._selectedTagIndex=0,this._selectedGraphType=this._getDefaultSelectionType(),this.$["trace-inputs"].active=!1,this._setDownloadFilename(this.datasets[n]?
this.datasets[n].name:""))},_selectedTagIndexChanged:function(){this._selectedGraphType=this._getDefaultSelectionType()},_getDefaultSelectionType:function(){var n=this.datasets,m=this._selectedRunIndex,q=this._selectedTagIndex;return n&&n[m]&&n[m].tags[q]&&!n[m].tags[q].opGraph?n[m].tags[q].profile?a.graph.SelectionType.PROFILE:n[m].tags[q].conceptualGraph?a.graph.SelectionType.CONCEPTUAL_GRAPH:a.graph.SelectionType.OP_GRAPH:a.graph.SelectionType.OP_GRAPH},_getFile:function(){this.$$("#file").click()},
_setDownloadFilename:function(n){this.$.graphdownload.setAttribute("download",n+".png")},_statsNotNull:function(n){return null!==n},_toggleLegendOpen:function(){this.set("_legendOpened",!this._legendOpened)},_getToggleText:function(n){return n?"Close legend.":"Expand legend."},_getToggleLegendIcon:function(n){return n?"expand-more":"expand-less"},_getSelectionOpGraphDisabled:function(n,m,q){return!n[m]||!n[m].tags[q]||!n[m].tags[q].opGraph},_getSelectionProfileDisabled:function(n,m,q){return!n[m]||
!n[m].tags[q]||!n[m].tags[q].profile},_getSelectionConceptualGraphDisabled:function(n,m,q){return!n[m]||!n[m].tags[q]||!n[m].tags[q].conceptualGraph}})})(b.controls||(b.controls={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>






<dom-module id="tf-graph-dashboard-loader">
</dom-module>

<script>//~~WEBPATH~~/tf-graph-loader/tf-graph-dashboard-loader.js
ll=this&&this.__awaiter||function(a,b,c,e){return new (c||(c=Promise))(function(f,g){function h(m){try{n(e.next(m))}catch(q){g(q)}}function l(m){try{n(e["throw"](m))}catch(q){g(q)}}function n(m){m.done?f(m.value):(new c(function(q){q(m.value)})).then(h,l)}n((e=e.apply(a,b||[])).next())})};
ml=this&&this.__generator||function(a,b){function c(m){return function(q){return e([m,q])}}function e(m){if(g)throw new TypeError("Generator is already executing.");for(;f;)try{if(g=1,h&&(l=m[0]&2?h["return"]:m[0]?h["throw"]||((l=h["return"])&&l.call(h),0):h.next)&&!(l=l.call(h,m[1])).done)return l;if(h=0,l)m=[m[0]&2,l.value];switch(m[0]){case 0:case 1:l=m;break;case 4:return f.label++,{value:m[1],done:!1};case 5:f.label++;h=m[1];m=[0];continue;case 7:m=f.ops.pop();f.trys.pop();continue;default:if(!(l=
f.trys,l=0<l.length&&l[l.length-1])&&(6===m[0]||2===m[0])){f=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3]))f.label=m[1];else if(6===m[0]&&f.label<l[1])f.label=l[1],l=m;else if(l&&f.label<l[2])f.label=l[2],f.ops.push(m);else{l[2]&&f.ops.pop();f.trys.pop();continue}}m=b.call(a,f)}catch(q){m=[6,q],h=0}finally{g=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}var f={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},g,h,l,n;return n={next:c(0),"throw":c(1),
"return":c(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n};
(function(a){(function(b){(function(){Polymer({is:"tf-graph-dashboard-loader",properties:{datasets:Array,progress:{type:Object,notify:!0},selection:Object,selectedFile:Object,compatibilityProvider:{type:Object,value:function(){return new a.graph.op.TpuCompatibilityProvider}},hierarchyParams:{type:Object,value:function(){return a.graph.hierarchy.DefaultHierarchyParams}},outGraphHierarchy:{type:Object,readOnly:!0,notify:!0},outGraph:{type:Object,readOnly:!0,notify:!0},outStats:{type:Object,readOnly:!0,
notify:!0},_graphRunTag:Object},observers:["_selectionChanged(selection, compatibilityProvider)","_selectedFileChanged(selectedFile, compatibilityProvider)"],_selectionChanged:function(){var c=this;this.debounce("selectionchange",function(){c._load(c.selection)})},_load:function(c){var e=this,f=c.run,g=c.tag,h=c.type;switch(h){case a.graph.SelectionType.OP_GRAPH:case a.graph.SelectionType.CONCEPTUAL_GRAPH:return this._setOutStats(null),c=new URLSearchParams,c.set("run",f),c.set("conceptual",String(h===
a.graph.SelectionType.CONCEPTUAL_GRAPH)),g&&c.set("tag",g),c=Rk.getRouter().pluginRoute("graphs","/graph",c),this._fetchAndConstructHierarchicalGraph(c).then(function(){e._graphRunTag={run:f,tag:g}});case a.graph.SelectionType.PROFILE:c=this.datasets.find(function(m){return m.name===f}).tags;var l=c.find(function(m){return m.tag===g}).opGraph?g:null;console.assert(c.find(function(m){return m.tag===l}),"Required tag ("+l+") is missing.");h=this._graphRunTag&&this._graphRunTag.run===f&&this._graphRunTag.tag===
l?Promise.resolve():this._load({run:f,tag:l,type:a.graph.SelectionType.OP_GRAPH});c=new URLSearchParams;c.set("tag",g);c.set("run",f);var n=Rk.getRouter().pluginRoute("graphs","/run_metadata",c);return h.then(function(){return e._readAndParseMetadata(n)});default:return Promise.reject(Error("Unknown selection type: "+h))}},_readAndParseMetadata:function(c){var e=this;this.set("progress",{value:0,msg:""});a.graph.parser.fetchAndParseMetadata(c,a.graph.util.getTracker(this)).then(function(f){e._setOutStats(f)})},
_fetchAndConstructHierarchicalGraph:function(c,e){return ll(this,void 0,void 0,function(){var f,g=this;return ml(this,function(){this.set("progress",{value:0,msg:""});f=a.graph.util.getTracker(this);return[2,a.graph.loader.fetchAndConstructHierarchicalGraph(f,c,e,this.compatibilityProvider,this.hierarchyParams).then(function(h){var l=h.graphHierarchy;g._setOutGraph(h.graph);g._setOutGraphHierarchy(l)})]})})},_selectedFileChanged:function(c){if(c){c=c.target;var e=c.files[0];e&&(c.value="",this._fetchAndConstructHierarchicalGraph(null,
e))}}})})(b.loader||(b.loader={}))})(a.graph||(a.graph={}))})(tf||(tf={}));
</script>







<dom-module id="tf-graph-dashboard">
<template>
<paper-dialog id="error-dialog" with-backdrop></paper-dialog>
<template is="dom-if" if="[[_datasetsEmpty(_datasets)]]">
  <div style="max-width: 540px; margin: 80px auto 0 auto;">
    <h3>No graph definition files were found.</h3>
    <p>
    To store a graph, create a
    <code>tf.summary.FileWriter</code>
    and pass the graph either via the constructor, or by calling its
    <code>add_graph()</code> method.
    You may want to check out the
    <a href="https://www.tensorflow.org/get_started/graph_viz">graph visualizer tutorial</a>.
    <p>
    If youâre new to using TensorBoard, and want to find out how
    to add data and set up your event files, check out the
    <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
    and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
    <p>
    If you think TensorBoard is configured properly, please see
    <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
    and consider filing an issue on GitHub.
  </div>
</template>
<template is="dom-if" if="[[!_datasetsEmpty(_datasets)]]">
<tf-dashboard-layout>
  <tf-graph-controls id="controls" class="sidebar" devices-for-stats="{{_devicesForStats}}" color-by-params="[[_colorByParams]]" stats="[[_stats]]" color-by="{{_colorBy}}" datasets="[[_datasets]]" render-hierarchy="[[_renderHierarchy]]" selection="{{_selection}}" selected-file="{{_selectedFile}}" selected-node="{{_selectedNode}}" health-pills-feature-enabled="[[_debuggerDataEnabled]]" health-pills-toggled-on="{{healthPillsToggledOn}}"></tf-graph-controls>
  <div class="center">
    <tf-graph-dashboard-loader id="loader" datasets="[[_datasets]]" selection="[[_selection]]" selected-file="[[_selectedFile]]" out-graph-hierarchy="{{_graphHierarchy}}" out-graph="{{_graph}}" out-stats="{{_stats}}" progress="{{_progress}}" hierarchy-params="[[_hierarchyParams]]" compatibility-provider="[[_compatibilityProvider]]"></tf-graph-dashboard-loader>
    <tf-graph-board id="graphboard" devices-for-stats="[[_devicesForStats]]" color-by="[[_colorBy]]" color-by-params="{{_colorByParams}}" graph-hierarchy="[[_graphHierarchy]]" graph="[[_graph]]" hierarchy-params="[[_hierarchyParams]]" progress="[[_progress]]" debugger-data-enabled="[[_debuggerDataEnabled]]" are-health-pills-loading="[[_areHealthPillsLoading]]" debugger-numeric-alerts="[[_debuggerNumericAlerts]]" node-names-to-health-pills="[[_nodeNamesToHealthPills]]" all-steps-mode-enabled="{{allStepsModeEnabled}}" specific-health-pill-step="{{specificHealthPillStep}}" health-pill-step-index="[[_healthPillStepIndex]]" render-hierarchy="{{_renderHierarchy}}" selected-node="{{_selectedNode}}" stats="[[_stats]]" compat-node-title="TPU Compatibility"></tf-graph-board>
  </div>
</tf-dashboard-layout>
</template>
<style>

:host /deep/ {
  font-family: 'Roboto', sans-serif;
}

.sidebar {
  display: flex;
  height: 100%;
}

.center {
  position: relative;
  height: 100%;
}

paper-dialog {
  padding: 20px;
}

</style>
</template>
</dom-module>

<script>//~~WEBPATH~~/tf-graph-dashboard/tf-graph-dashboard.html.js
Polymer({is:"tf-graph-dashboard",properties:{_datasets:Array,_renderHierarchy:{type:Object,observer:"_renderHierarchyChanged"},_requestManager:{type:Object,value:function(){return new Rk.RequestManager}},_canceller:{type:Object,value:function(){return new Rk.Canceller}},_debuggerDataEnabled:Boolean,allStepsModeEnabled:Boolean,specificHealthPillStep:{type:Number,value:0},healthPillsToggledOn:{type:Boolean,value:!0,observer:"_healthPillsToggledOnChanged"},selectedNode:{type:String,notify:!0},_isAttached:Boolean,
_initialized:Boolean,_areHealthPillsLoading:Boolean,_debuggerNumericAlerts:{type:Array,value:[],notify:!0},_nodeNamesToHealthPills:{type:Object,value:{}},_healthPillStepIndex:Number,_healthPillRequestId:{type:Number,value:1},_healthPillStepRequestTimerId:Number,_healthPillStepRequestTimerDelay:{type:Number,value:500,readOnly:!0},runs:Array,run:{type:String,notify:!0,value:Uk.getStringInitializer("run",{defaultValue:"",useLocalStorage:!1}),observer:"_runObserver"},_selection:{type:Object},_compatibilityProvider:Object,
_hierarchyParams:{type:Object,value:function(){return tf.graph.hierarchy.DefaultHierarchyParams}}},listeners:{"node-toggle-expand":"_handleNodeToggleExpand"},observers:["_maybeFetchHealthPills(_debuggerDataEnabled, allStepsModeEnabled, specificHealthPillStep, _selectedNode)","_maybeInitializeDashboard(_isAttached)","_determineSelectedDataset(_datasets, run)","_updateSelectedDatasetName(_datasets, _selectedDataset)"],attached:function(){this.set("_isAttached",!0)},detached:function(){this.set("_isAttached",
!1)},reload:function(){var a=this;this._debuggerDataEnabled||this._requestManager.request(Rk.getRouter().pluginsListing()).then(this._canceller.cancellable(function(b){b.cancelled||b.value["debugger"]&&a.set("_debuggerDataEnabled",!0)}));this._maybeFetchHealthPills()},_runObserver:Uk.getStringObserver("run",{defaultValue:"",polymerProperty:"run",useLocalStorage:!1}),_fetchDataset:function(){return this._requestManager.request(Rk.getRouter().pluginRoute("graphs","/info"))},_fetchHealthPills:function(a,
b){a={node_names:JSON.stringify(a),run:"__debugger_data__"};void 0!==b&&(a.step=b);b=Rk.getRouter().pluginRoute("debugger","/health_pills");return this._requestManager.request(b,a)},_fetchDebuggerNumericsAlerts:function(){return this._requestManager.request(Rk.getRouter().pluginRoute("debugger","/numerics_alert_report"))},_graphUrl:function(a,b,c){return Rk.getRouter().pluginRoute("graphs","/graph",new URLSearchParams({run:a,limit_attr_size:b,large_attrs_key:c}))},_shouldRequestHealthPills:function(){return this._debuggerDataEnabled&&
this.healthPillsToggledOn&&this._renderHierarchy&&!this._datasetsEmpty(this._datasets)},_maybeInitializeDashboard:function(a){var b=this;!this._initialized&&a&&(this.set("_compatibilityProvider",new tf.graph.op.TpuCompatibilityProvider),this._initialized=!0,this._fetchDataset().then(function(c){var e=Object.keys(c);b._datasets=e.sort(Pk.compareTagNames).map(function(f){var g=c[f],h=Object.keys(g.tags).sort(Pk.compareTagNames).map(function(l){return g.tags[l]}).map(function(l){var n=l.tag;return{tag:n,
displayName:n,conceptualGraph:l.conceptual_graph,opGraph:l.op_graph,profile:l.profile}});h=g.run_graph?[{tag:null,displayName:"Default",conceptualGraph:!1,opGraph:!0,profile:!1}].concat(Ra(h)):h;return{name:f,tags:h}})}))},_determineSelectedDataset:function(a,b){b?(a=a.findIndex(function(c){return c.name===b}),-1===a?(a=this.$$("#error-dialog"),a.textContent='No dataset named "'+b+'" could be found.',a.open()):this.set("_selectedDataset",a)):this.set("_selectedDataset",0)},_updateSelectedDatasetName:function(a,
b){a.length<=b||this.set("run",a[b].name)},_requestHealthPills:function(){this.set("_areHealthPillsLoading",!0);var a=++this._healthPillRequestId;null!==this._healthPillStepRequestTimerId&&(window.clearTimeout(this._healthPillStepRequestTimerId),this._healthPillStepRequestTimerId=null);this.allStepsModeEnabled?this._healthPillStepRequestTimerId=setTimeout(function(){this._healthPillStepRequestTimerId=null;this._initiateNetworkRequestForHealthPills(a)}.bind(this),this._healthPillStepRequestTimerDelay):
this._initiateNetworkRequestForHealthPills(a)},_initiateNetworkRequestForHealthPills:function(a){if(this._healthPillRequestId===a){var b=this._fetchHealthPills(this._renderHierarchy.getNamesOfRenderedOps(),this.allStepsModeEnabled?this.specificHealthPillStep:void 0),c=this._fetchDebuggerNumericsAlerts();Promise.all([b,c]).then(function(e){var f=e[0];e=e[1];if(this.healthPillsToggledOn&&a===this._healthPillRequestId){for(var g in f){this.set("_healthPillStepIndex",f[g].length-1);break}this.set("_debuggerNumericAlerts",
e);this.set("_nodeNamesToHealthPills",f);this.set("_areHealthPillsLoading",!1);this.set("_healthPillStepRequestTimerId",null)}}.bind(this))}},_datasetsEmpty:function(a){return!a||!a.length},_renderHierarchyChanged:function(){this.reload()},_handleNodeToggleExpand:function(){this._maybeFetchHealthPills()},_healthPillsToggledOnChanged:function(a){a?this.reload():this.set("_nodeNamesToHealthPills",{})},_maybeFetchHealthPills:function(){this._shouldRequestHealthPills()&&this._requestHealthPills()}});
</script>


























<dom-module id="vz-distribution-chart">
  <template>
    <div id="chartdiv"></div>
    <style>
      :host {
        -webkit-user-select: none;
        -moz-user-select: none;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
        flex-shrink: 1;
        position: relative;
      }
      #chartdiv {
        -webkit-user-select: none;
        -moz-user-select: none;
        flex-grow: 1;
        flex-shrink: 1;
      }

    </style>
  </template>
  <script>//~~WEBPATH~~/vz-distribution-chart/vz-distribution-chart.js
var rl;
(function(a){var b=function(){function c(e,f){this.run2datasets={};this.colorScale=f;this.buildChart(e)}c.prototype.getDataset=function(e){void 0===this.run2datasets[e]&&(this.run2datasets[e]=new Plottable.Dataset([],{run:e}));return this.run2datasets[e]};c.prototype.buildChart=function(e){this.outer&&this.outer.destroy();e=cl.getXComponents(e);this.xAccessor=e.accessor;this.xScale=e.scale;this.xAxis=e.axis;this.xAxis.margin(0).tickLabelPadding(3);this.yScale=new Plottable.Scales.Linear;this.yAxis=new Plottable.Axes.Numeric(this.yScale,
"left");e=cl.multiscaleFormatter(cl.Y_AXIS_FORMATTER_PRECISION);this.yAxis.margin(0).tickLabelPadding(5).formatter(e);this.yAxis.usesTextWidthApproximation();e=this.buildPlot(this.xAccessor,this.xScale,this.yScale);this.gridlines=new Plottable.Components.Gridlines(this.xScale,this.yScale);this.center=new Plottable.Components.Group([this.gridlines,e]);this.outer=new Plottable.Components.Table([[this.yAxis,this.center],[null,this.xAxis]])};c.prototype.buildPlot=function(e,f,g){var h=this,l=[0,228,1587,
3085,5E3,6915,8413,9772,1E4],n=_.range(l.length-1).map(function(u){return(l[u+1]-l[u])/2500}),m=l.map(function(u,w){return function(z){return z[w][1]}}),q=m[4],r=_.range(m.length-1).map(function(u){var w=new Plottable.Plots.Area;w.x(e,f);var z=4<u?m[u]:m[u+1];w.y(4<u?m[u+1]:m[u],g);w.y0(z);w.attr("fill",function(A,E,C){return h.colorScale.scale(C.metadata().run)});w.attr("stroke",function(A,E,C){return h.colorScale.scale(C.metadata().run)});w.attr("stroke-weight",function(){return"0.5px"});w.attr("stroke-opacity",
function(){return n[u]});w.attr("fill-opacity",function(){return n[u]});return w}),v=new Plottable.Plots.Line;v.x(e,f);v.y(q,g);v.attr("stroke",function(u,w,z){return h.colorScale.scale(z.run)});this.plots=r;return new Plottable.Components.Group(r)};c.prototype.setVisibleSeries=function(e){var f=this;this.runs=e;var g=e.map(function(h){return f.getDataset(h)});this.plots.forEach(function(h){return h.datasets(g)})};c.prototype.setSeriesData=function(e,f){this.getDataset(e).data(f)};c.prototype.renderTo=
function(e){this.targetSVG=e;this.outer.renderTo(e)};c.prototype.redraw=function(){this.outer.redraw()};c.prototype.destroy=function(){this.outer.destroy()};return c}();a.DistributionChart=b;Polymer({is:"vz-distribution-chart",properties:{colorScale:{type:Object,value:function(){return(new Plottable.Scales.Color).range(d3.schemeCategory10)}},xType:{type:String,value:"step"},_attached:Boolean,_chart:Object,_visibleSeriesCache:{type:Array,value:function(){return[]}},_seriesDataCache:{type:Object,value:function(){return{}}},
_makeChartAsyncCallbackId:{type:Number,value:null}},observers:["_makeChart(xType, colorScale, _attached)","_reloadFromCache(_chart)"],setVisibleSeries:function(c){this._visibleSeriesCache=c;this._chart&&(this._chart.setVisibleSeries(c),this.redraw())},setSeriesData:function(c,e){this._seriesDataCache[c]=e;this._chart&&this._chart.setSeriesData(c,e)},redraw:function(){this._chart.redraw()},ready:function(){this.scopeSubtree(this.$.chartdiv,!0)},_makeChart:function(c,e,f){null===this._makeChartAsyncCallbackId&&
this.cancelAsync(this._makeChartAsyncCallbackId);this._makeChartAsyncCallbackId=this.async(function(){this._makeChartAsyncCallbackId=null;if(f){this._chart&&this._chart.destroy();var g=new b(c,e),h=d3.select(this.$.chartdiv);g.renderTo(h);this._chart=g}},350)},_reloadFromCache:function(){this._chart&&(this._chart.setVisibleSeries(this._visibleSeriesCache),this._visibleSeriesCache.forEach(function(c){this._chart.setSeriesData(c,this._seriesDataCache[c]||[])}.bind(this)))},attached:function(){this._attached=
!0},detached:function(){this._attached=!1}})})(rl||(rl={}));
</script>
</dom-module>



<dom-module id="tf-distribution-loader">
  <template>
    <tf-card-heading tag="[[tag]]" run="[[run]]" display-name="[[tagMetadata.displayName]]" description="[[tagMetadata.description]]" color="[[_runColor]]"></tf-card-heading>
    
    <vz-distribution-chart id="chart" x-type="[[xType]]" color-scale="[[_colorScale]]"></vz-distribution-chart>
    <div style="display: flex; flex-direction: row;">
      <paper-icon-button selected$="[[_expanded]]" icon="fullscreen" on-tap="_toggleExpanded"></paper-icon-button>
    </div>
    <style>
      :host {
        display: flex;
        flex-direction: column;
        width: 330px;
        height: 235px;
        margin-right: 10px;
        margin-bottom: 15px;
      }
      :host[_expanded] {
        width: 700px;
        height: 500px;
      }

      vz-histogram-timeseries {
        -moz-user-select: none;
        -webkit-user-select: none;
      }

      paper-icon-button {
        color: #2196F3;
        border-radius: 100%;
        width: 32px;
        height: 32px;
        padding: 4px;
      }
      paper-icon-button[selected] {
        background: var(--tb-ui-light-accent);
      }

      tf-card-heading {
        margin-bottom: 10px;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-distribution-dashboard/tf-distribution-loader.html.js
Polymer({is:"tf-distribution-loader",properties:{run:String,tag:String,tagMetadata:Object,xType:String,dataToLoad:{type:Array,computed:"_computeDataToLoad(run, tag)"},getDataLoadName:{type:Function,value:function(){return function(a){return a.run}}},getDataLoadUrl:{type:Function,value:function(){return function(a){var b=a.tag;a=a.run;return Rk.addParams(Rk.getRouter().pluginRoute("distributions","/distributions"),{tag:b,run:a})}}},loadDataCallback:{type:Function,value:function(){var a=this;return function(b,
c,e){b=e.map(function(f){var g=za(f);f=g.next().value;var h=g.next().value;g=g.next().value;g.wall_time=new Date(1E3*f);g.step=h;return g});c=a.getDataLoadName(c);a.$.chart.setSeriesData(c,b);a.$.chart.setVisibleSeries([c])}}},_colorScale:{type:Object,value:function(){return{scale:Yk.runsColorScale}},readOnly:!0},_runColor:{type:String,computed:"_computeRunColor(run)"},_expanded:{type:Boolean,value:!1,reflectToAttribute:!0},requestManager:Object,_canceller:{type:Object,value:function(){return new Rk.Canceller}}},
observers:["reload(run, tag)"],behaviors:[Wk.DataLoaderBehavior],_computeDataToLoad:function(a,b){return[{run:a,tag:b}]},_computeRunColor:function(a){return this._colorScale.scale(a)},redraw:function(){this.$.chart.redraw()},_toggleExpanded:function(){this.set("_expanded",!this._expanded);this.redraw()}});
</script>
</dom-module>



<dom-module id="tf-distribution-dashboard">
  <template>
    <tf-dashboard-layout>
      <div class="sidebar">
        <div class="sidebar-section">
          <tf-option-selector id="xTypeSelector" name="Horizontal axis" selected-id="{{_xType}}">
            <paper-button id="step">step</paper-button>
            <paper-button id="relative">relative</paper-button>
            <paper-button id="wall_time">wall</paper-button>
          </tf-option-selector>
        </div>
        <div class="sidebar-section">
          <tf-runs-selector selected-runs="{{_selectedRuns}}">
          </tf-runs-selector>
        </div>
      </div>

      <div class="center">
        <template is="dom-if" if="[[_dataNotFound]]">
          <div class="no-data-warning">
            <h3>No distribution data was found.</h3>
            <p>Probable causes:
            <ul>
              <li>You havenât written any histogram data to your event
              files. (Histograms and distributions both use the
              histogram summary operation.)
              <li>TensorBoard canât find your event files.
            </ul>
            <p>
            If youâre new to using TensorBoard, and want to find out how
            to add data and set up your event files, check out the
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
            and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
            <p>
            If you think TensorBoard is configured properly, please see
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
            and consider filing an issue on GitHub.
          </div>
        </template>
        <template is="dom-if" if="[[!_dataNotFound]]">
          <tf-tag-filterer tag-filter="{{_tagFilter}}"></tf-tag-filterer>
          <template is="dom-repeat" items="[[_categories]]" as="category">
            <tf-category-pane category="[[category]]" opened="[[_shouldOpen(index)]]">
              <tf-paginated-view items="[[category.items]]" pages="{{category._pages}}">
                <template is="dom-repeat" items="[[category._pages]]" as="page">
                  <template is="dom-if" if="[[page.active]]">
                    <div class="layout horizontal wrap">
                      <template is="dom-repeat" items="[[page.items]]">
                        <tf-distribution-loader run="[[item.run]]" tag="[[item.tag]]" tag-metadata="[[_tagMetadata(_runToTagInfo, item.run, item.tag)]]" x-type="[[_xType]]" request-manager="[[_requestManager]]"></tf-distribution-loader>
                      </template>
                    </div>
                  </template>
                </template>
              </tf-paginated-view>
            </tf-category-pane>
          </template>
        </template>
      </div>
    </tf-dashboard-layout>

    <style include="dashboard-style"></style>
    <style>
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-distribution-dashboard/tf-distribution-dashboard.html.js
Polymer({is:"tf-distribution-dashboard",properties:{_xType:{type:String,value:"step"},_selectedRuns:Array,_runToTag:Object,_runToTagInfo:Object,_dataNotFound:Boolean,_tagFilter:String,_categoriesDomReady:Boolean,_categories:{type:Array,computed:"_makeCategories(_runToTag, _selectedRuns, _tagFilter, _categoriesDomReady)"},_requestManager:{type:Object,value:function(){return new Rk.RequestManager}}},ready:function(){this.reload()},reload:function(){var a=this;this._fetchTags().then(function(){a._reloadDistributions()})},
_fetchTags:function(){var a=this,b=Rk.getRouter().pluginRoute("distributions","/tags");return this._requestManager.request(b).then(function(c){if(!_.isEqual(c,a._runToTagInfo)){var e=_.mapValues(c,function(g){return Object.keys(g)}),f=Rk.getTags(e);a.set("_dataNotFound",0===f.length);a.set("_runToTag",e);a.set("_runToTagInfo",c);a.async(function(){a.set("_categoriesDomReady",!0)})}})},_reloadDistributions:function(){this.querySelectorAll("tf-distribution-loader").forEach(function(a){a.reload()})},
_shouldOpen:function(a){return 2>=a},_makeCategories:function(a,b,c){return Sk.categorizeRunTagCombinations(a,b,c)},_tagMetadata:function(a,b,c){return a[b][c]}});
</script>
</dom-module>




















<dom-module id="tf-paginated-view2">
  <template>
    <span id="top-of-container"></span>
    <template is="dom-if" if="[[_multiplePagesExist]]">
      <div class="big-page-buttons" style="margin-bottom: 10px;">
        <paper-button on-tap="_performPreviousPage" disabled$="[[!_hasPreviousPage]]">Previous page</paper-button><paper-button on-tap="_performNextPage" disabled$="[[!_hasNextPage]]">Next page</paper-button>
      </div>
    </template>
    <div id="template"><slot></slot></div>
    <div id="items"></div>
    <template is="dom-if" if="[[_multiplePagesExist]]">
      <div id="controls-container">
        <div style="display: inline-block; padding: 0 5px">
          Page
          <paper-input id="page-input" type="number" no-label-float min="1" max="[[_pageCount]]" value="[[_pageInputValue]]" style="display: inline-block; width: [[_inputWidth]];" on-input="_handlePageInputEvent" on-change="_handlePageChangeEvent" on-focus="_handlePageFocusEvent" on-blur="_handlePageBlurEvent"></paper-input>
          of [[_pageCount]]
        </div>
      </div>
      <div class="big-page-buttons" style="margin-top: 10px;">
        <paper-button on-tap="_performPreviousPage" disabled$="[[!_hasPreviousPage]]">Previous page</paper-button><paper-button on-tap="_performNextPageAndJumpToTop" disabled$="[[!_hasNextPage]]">Next page</paper-button>
      </div>
    </template>
    <style>
      :host {
        display: flex;
        flex-direction: column;
      }
      #controls-container {
        justify-content: center;
        display: flex;
        flex-direction: row;
        flex-grow: 0;
        flex-shrink: 0;
        width: 100%;
      }
      #controls-container paper-button {
        display: inline-block;
      }
      .big-page-buttons {
        display: flex;
      }
      .big-page-buttons paper-button {
        background-color: var(--tb-ui-light-accent);
        color: var(--tb-ui-dark-accent);
        display: inline-block;
        flex-basis: 0;
        flex-grow: 1;
        flex-shrink: 1;
        font-size: 13px;
      }
      .big-page-buttons paper-button[disabled] {
        background: none;
      }
      #items {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-paginated-view/tf-paginated-view2.html.js
Polymer({is:"tf-paginated-view2",properties:{items:{type:Array,value:function(){return[]}},getItemKey:{type:Function,value:function(){return function(a,b){return b}}},as:{type:String,value:"item"},_renderedItems:{type:Array,value:function(){return[]}},_renderedTemplateInst:{type:Object,value:function(){return new Map}},_lruCachedItems:{type:Object,value:function(){return new Map}},_limit:{type:Number,value:12},_activeIndex:{type:Number,value:0},_currentPage:{type:Number,computed:"_computeCurrentPage(_limit, _activeIndex)"},
_pageCount:{type:Number,computed:"_computePageCount(items, _limit)"},_multiplePagesExist:{type:Boolean,computed:"_computeMultiplePagesExist(_pageCount)"},_hasPreviousPage:{type:Boolean,computed:"_computeHasPreviousPage(_currentPage)"},_hasNextPage:{type:Boolean,computed:"_computeHasNextPage(_currentPage, _pageCount)"},_inputWidth:{type:String,computed:"_computeInputWidth(_pageCount)"},_pageInputValue:{type:String,computed:"_computePageInputValue(_pageInputFocused, _pageInputRawValue, _currentPage)",
observer:"_updatePageInputValue"},_pageInputRawValue:{type:String,value:""},_pageInputFocused:{type:Boolean,value:!1},_bootstrapped:{type:Boolean,value:!1}},observers:["_clampActiveIndex(items)","_updateRenderedItems(items, _limit, _activeIndex, _pageCount)","_updateDom(_renderedItems.*)","_trimCache(_limit)"],behaviors:[Wk.ArrayUpdateHelper,Polymer.Templatizer],ready:function(){var a={};this._instanceProps=(a[this.as]=!0,a);this.templatize(this.$.template.querySelector("template"))},attached:function(){var a=
this;this._limitListener=function(){a.set("_limit",Xk.getLimit())};Xk.addLimitListener(this._limitListener);this._limitListener();this._bootstrapDom();this._bootstrapped=!0},detached:function(){Xk.removeLimitListener(this._limitListener);this._bootstrapped=!1},_updateRenderedItems:function(a,b,c){c=Math.floor(c/b);this.updateArrayProp("_renderedItems",(a||[]).slice(c*b,(c+1)*b),this.getItemKey)},_bootstrapDom:function(){var a=this;Array.from(this.$.items.children).forEach(function(b){return Polymer.dom(a.$.items).removeChild(b)});
this._lruCachedItems.clear();this._renderedItems.forEach(function(b,c){return a._insertItem(b,c)})},_updateDom:function(a){var b=this;if(this._bootstrapped&&"_renderedItems"!=a.path&&"_renderedItems.length"!=a.path)if("_renderedItems.splices"===a.path)a.value.indexSplices.forEach(function(e){var f=e.index,g=e.addedCount,h=e.object;e.removed.forEach(function(l){b._removeItem(l,b.$.items.children[f])});h.slice(f,f+g).forEach(function(l,n){return b._insertItem(l,f+n)});b._trimCache()});else{var c=this.getItemKey(a.value);
this._renderedTemplateInst.has(c)?this._renderedTemplateInst.get(c).notifyPath(this.as,a.value,!0):console.warn("Expected '"+c+"' to exist in the DOM but could not find one.")}},_trimCache:function(){for(;this._lruCachedItems.size>2*this._limit;){var a=za(this._lruCachedItems.keys()).next().value;this._lruCachedItems.delete(a);this._renderedTemplateInst.delete(a)}},_removeItem:function(a,b){Polymer.dom(b.parentNode).removeChild(b);this._lruCachedItems.set(this.getItemKey(a),b)},_insertItem:function(a,
b){var c=this.getItemKey(a);if(this._lruCachedItems.has(c))a=this._lruCachedItems.get(c),this._lruCachedItems.delete(c);else{var e={};e=this.stamp((e[this.as]=a,e));a=e.root;this._renderedTemplateInst.set(c,e)}this.$.items.children[b]?Polymer.dom(this.$.items).insertBefore(a,this.$.items.children[b]):Polymer.dom(this.$.items).appendChild(a)},_computeCurrentPage:function(a,b){return Math.floor(b/a)+1},_computePageCount:function(a,b){return Math.ceil((a||[]).length/b)},_computeMultiplePagesExist:function(a){return 1<
a},_computeHasPreviousPage:function(a){return 1<a},_computeHasNextPage:function(a,b){return a<b},_computeInputWidth:function(a){return"calc("+a.toString().length+"em + 20px)"},_setActiveIndex:function(a){var b=(this.items||[]).length-1;a>b&&(a=b);0>a&&(a=0);this.set("_activeIndex",a)},_clampActiveIndex:function(){this._setActiveIndex(this._activeIndex)},_performPreviousPage:function(){this._setActiveIndex(this._activeIndex-this._limit)},_performNextPage:function(){this._setActiveIndex(this._activeIndex+
this._limit)},_performNextPageAndJumpToTop:function(){var a=this.$$("#top-of-container");0>a.getBoundingClientRect().top&&a.scrollIntoView();this._performNextPage()},_computePageInputValue:function(a,b,c){return a?b:c.toString()},_handlePageInputEvent:function(a){this.set("_pageInputRawValue",a.target.value);a=a.target.valueAsNumber;isNaN(a)||this._setActiveIndex(this._limit*(Math.max(1,Math.min(a,this._pageCount))-1))},_handlePageChangeEvent:function(){this.set("_pageInputRawValue",this._currentPage.toString())},
_handlePageFocusEvent:function(){this.set("_pageInputRawValue",this._pageInputValue);this.set("_pageInputFocused",!0)},_handlePageBlurEvent:function(){this.set("_pageInputFocused",!1)},_updatePageInputValue:function(a){var b=this.$$("#page-input input");b&&(b.value=a)},_forwardParentProp:function(a,b){this._renderedTemplateInst.forEach(function(c){c.notifyPath(a,b,!0)})},_forwardParentPath:function(a,b){this._renderedTemplateInst.forEach(function(c){c.notifyPath(a,b,!0)})}});
</script>
</dom-module>














<dom-module id="vz-histogram-timeseries">
    <template>
      <div id="tooltip"><span></span></div>
      <svg id="svg">
        <g>
          <g class="axis x"></g>
          <g class="axis y"></g>
          <g class="axis y slice"></g>
          <g class="stage">
            <rect class="background"></rect>
          </g>
          <g class="x-axis-hover"></g>
          <g class="y-axis-hover"></g>
          <g class="y-slice-axis-hover"></g>
        </g>
      </svg>

      <style>
        :host {
          display: flex;
          flex-direction: column;
          flex-grow: 1;
          flex-shrink: 1;
          position: relative;
        }

        svg {
          font-family: roboto, sans-serif;
          overflow: visible;
          display: block;
          width: 100%;
          flex-grow: 1;
          flex-shrink: 1;
        }

        #tooltip {
          position: absolute;
          display: block;
          opacity: 0;
          font-weight: bold;
          font-size: 11px;
        }

        .background {
          fill-opacity: 0;
          fill: red;
        }

        .histogram {
          pointer-events: none;
        }

        .hover {
          font-size: 9px;
          dominant-baseline: middle;
          opacity: 0;
        }

        .hover circle {
          stroke: white;
          stroke-opacity: 0.5;
          stroke-width: 1px;
        }

        .hover text {
          fill: black;
          opacity: 0;
        }

        .hover.hover-closest circle {
          fill: black!important;
        }

        .hover.hover-closest text {
          opacity: 1;
        }

        .baseline {
          stroke: black;
          stroke-opacity: 0.1;
        }

        .outline {
          fill: none;
          stroke: white;
          stroke-opacity: 0.5;
        }

        .outline.outline-hover {
          stroke: black!important;
          stroke-opacity: 1;
        }

        .x-axis-hover,
        .y-axis-hover,
        .y-slice-axis-hover {
          pointer-events: none;
        }

        .x-axis-hover .label,
        .y-axis-hover .label,
        .y-slice-axis-hover .label {
          opacity: 0;
          font-weight: bold;
          font-size: 11px;
          text-anchor: end;
        }

        .x-axis-hover text {
          text-anchor: middle;
        }

        .y-axis-hover text,
        .y-slice-axis-hover text {
          text-anchor: start;
        }

        .x-axis-hover line,
        .y-axis-hover line,
        .y-slice-axis-hover line {
          stroke: black;
        }

        .x-axis-hover rect,
        .y-axis-hover rect,
        .y-slice-axis-hover rect {
          fill: white;
        }

        .axis {
          font-size: 11px;
        }

        .axis path.domain {
          fill: none;
        }

        .axis .tick line {
          stroke: #ddd;
        }

        .axis.slice {
          opacity: 0;
        }

        .axis.slice .tick line {
          stroke-dasharray: 2;
        }

        .small .axis text { display: none; }
        .small .axis .tick:first-of-type text { display: block; }
        .small .axis .tick:last-of-type text { display: block; }
        .medium .axis text { display: none; }
        .medium .axis .tick:nth-child(2n + 1) text { display: block; }
        .large .axis text { display: none; }
        .large .axis .tick:nth-child(2n + 1) text { display: block; }

      </style>
    </template>

    <script>//~~WEBPATH~~/vz-histogram-timeseries/vz-histogram-timeseries.html.js
Polymer({is:"vz-histogram-timeseries",properties:{mode:{type:String,value:"offset"},timeProperty:{type:String,value:"step"},bins:{type:String,value:"bins"},x:{type:String,value:"x"},dx:{type:String,value:"dx"},y:{type:String,value:"y"},colorScale:{type:Object,value:function(){return d3.scaleOrdinal(d3.schemeCategory10)}},modeTransitionDuration:{type:Number,value:500},_attached:Boolean,_name:{type:String,value:null},_data:{type:Array,value:null}},observers:["redraw(timeProperty, _attached)","_modeRedraw(mode)"],
ready:function(){this.scopeSubtree(this.$.svg,!0)},attached:function(){this._attached=!0},detached:function(){this._attached=!1},setSeriesData:function(a,b){this._name=a;this._data=b;this.redraw()},redraw:function(){this._draw(0)},_modeRedraw:function(){this._draw(this.modeTransitionDuration)},_draw:function(a){if(this._attached&&this._data){if(void 0===a)throw Error("vz-histogram-timeseries _draw needs duration");if(0>=this._data.length)throw Error("Not enough steps in the data");if(!this._data[0].hasOwnProperty(this.bins))throw Error("No bins property of '"+
this.bins+"' in data");if(0>=this._data[0][this.bins].length)throw Error("Must have at least one bin in bins in data");if(!this._data[0][this.bins][0].hasOwnProperty(this.x))throw Error("No x property '"+this.x+"' on bins data");if(!this._data[0][this.bins][0].hasOwnProperty(this.dx))throw Error("No dx property '"+this.dx+"' on bins data");if(!this._data[0][this.bins][0].hasOwnProperty(this.y))throw Error("No y property '"+this.y+"' on bins data");var b=this.timeProperty,c=this.x,e=this.bins,f=this.dx,
g=this.y,h=this._data,l=this.mode,n=d3.hcl(this.colorScale(this._name)),m=d3.select(this.$.tooltip),q=function(Ea){return Ea[c]},r=function(Ea){return Ea[g]},v=function(Ea){return Ea[c]+Ea[f]},u=function(Ea){return Ea[b]};"relative"===b&&(u=function(Ea){return Ea.wall_time-h[0].wall_time});var w=this.$.svg.getBoundingClientRect(),z=w.width,A=w.height,E=5;if("offset"===l){var C=A/2.5;E=C+5}else C=A-E-20;var D=z-24-60,J=A-E-20;d3.min(h,q);d3.max(h,v);var M=d3.format(".3n");w=d3.format(".0f");"wall_time"===
b?w=d3.timeFormat("%m/%d %X"):"relative"===b&&(w=function(Ea){return d3.format(".1r")(Ea/36E5)+"h"});var H=h.map(function(Ea){return[d3.min(Ea[e],q),d3.max(Ea[e],v)]}),K=h.map(function(Ea){return d3.extent(Ea[e],r)}),L=d3.extent(h,u),P=("wall_time"===b?d3.scaleTime():d3.scaleLinear()).domain(L).range([0,"offset"===l?J:0]),S=d3.scaleLinear().domain([0,d3.max(h,function(Ea,La){return K[La][1]})]).range([C,0]),aa=d3.scaleLinear().domain(S.domain()).range([500,0]),R=d3.scaleLinear().domain([d3.min(h,
function(Ea,La){return H[La][0]}),d3.max(h,function(Ea,La){return H[La][1]})]).nice().range([0,D]),Y=d3.scaleLinear().domain(R.domain()).range([0,500]),W=d3.scaleLinear().domain(d3.extent(h,u)).range([n.darker(),n.brighter()]).interpolate(d3.interpolateHcl);n=d3.axisBottom(R).ticks();var X=d3.axisRight(P).ticks().tickFormat(w),ja=d3.axisRight(S).ticks().tickSize(D+5).tickFormat(M),pa=function(Ea){return Ea[c]+Ea[f]/2},ta=d3.line().x(function(Ea){return Y(pa(Ea))}).y(function(Ea){return aa(Ea[g])}),
da=this.$.svg;w=d3.select(da);a=w.transition().duration(a);w=w.select("g").classed("small",function(){return 0<D&&150>=D}).classed("medium",function(){return 150<D&&300>=D}).classed("large",function(){return 300<D});a=a.select("g").attr("transform","translate(24,"+E+")");var Aa=d3.bisector(v).left;L=w.select(".stage").on("mouseover",function(){oa.style("opacity",1);ka.style("opacity",1);Da.style("opacity",1);Oa.style("opacity",1);m.style("opacity",1)}).on("mouseout",function(){oa.style("opacity",
0);ka.style("opacity",0);Da.style("opacity",0);Oa.style("opacity",0);oa.classed("hover-closest",!1);Ca.classed("outline-hover",!1);m.style("opacity",0)}).on("mousemove",function(){function Ea(nc){return Math.min(nc[e].length-1,Aa(nc[e],Ka))}var La=d3.mouse(this),Ka=R.invert(La[0]);P.invert(La[1]);var vb,jc=Infinity,sb;oa.attr("transform",function(nc){var id=Ea(nc);sb=nc;var Ui=R(nc[e][id][c]+nc[e][id][f]/2);id=S(nc[e][id][g]);var nf="offset"===l?P(u(nc))-(C-id):id;nf=Math.abs(La[1]-nf);nf<jc&&(jc=
nf,vb=nc);return"translate("+Ui+","+id+")"});oa.select("text").text(function(nc){var id=Ea(nc);return nc[e][id][g]});oa.classed("hover-closest",function(nc){return nc===vb});Ca.classed("outline-hover",function(nc){return nc===vb});var tb=Ea(sb);ka.attr("transform",function(){return"translate("+R(sb[e][tb][c]+sb[e][tb][f]/2)+", "+J+")"}).select("text").text(function(){return M(sb[e][tb][c]+sb[e][tb][f]/2)});var ac=X.tickFormat();Da.attr("transform",function(){return"translate("+D+", "+("offset"===
l?P(u(vb)):0)+")"}).style("display","offset"===l?"":"none").select("text").text(function(){return ac(u(vb))});var yd=ja.tickFormat();Oa.attr("transform",function(){return"translate("+D+", "+("offset"===l?0:S(vb[e][tb][g]))+")"}).style("display","offset"===l?"none":"").select("text").text(function(){return yd(vb[e][tb][g])});var Ce=d3.mouse(da);m.style("transform","translate("+(Ce[0]+15)+"px,"+(Ce[1]-15)+"px)").select("span").text("offset"===l?yd(vb[e][tb][g]):("step"===b?"step ":"")+ac(u(vb)))});
L.select(".background").attr("transform","translate(-24,"+-E+")").attr("width",z).attr("height",A);A=L.selectAll(".histogram").data(h);A.exit().remove();z=A.enter().append("g").attr("class","histogram");A=z.merge(A).sort(function(Ea,La){return u(Ea)-u(La)});E=a.selectAll(".histogram").attr("transform",function(Ea){return"translate(0, "+("offset"===l?P(u(Ea))-C:0)+")"});z.append("line").attr("class","baseline");E.select(".baseline").style("stroke-opacity",function(){return"offset"===l?.1:0}).attr("y1",
C).attr("y2",C).attr("x2",D);z.append("path").attr("class","outline");var Ca=A.select(".outline").attr("vector-effect","non-scaling-stroke").attr("d",function(Ea){Ea=Ea[e];return"M"+Y(pa(Ea[0]))+","+aa(0)+"L"+ta(Ea).slice(1)+"L"+Y(pa(Ea[Ea.length-1]))+","+aa(0)}).style("stroke-width",1);E.select(".outline").attr("transform","scale("+D/500+", "+C/500+")").style("stroke",function(Ea){return"offset"===l?"white":W(u(Ea))}).style("fill-opacity",function(){return"offset"===l?1:0}).style("fill",function(Ea){return W(u(Ea))});
z=z.append("g").attr("class","hover").style("fill",function(Ea){return W(u(Ea))});var oa=A.select(".hover");z.append("circle").attr("r",2);z.append("text").style("display","none").attr("dx",4);z=w.select(".x-axis-hover").selectAll(".label").data(["x"]);A=z.enter().append("g").attr("class","label");var ka=z.merge(A);A.append("rect").attr("x",-20).attr("y",6).attr("width",40).attr("height",14);A.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",6);A.append("text").attr("dy",18);z=w.select(".y-axis-hover").selectAll(".label").data(["y"]);
A=z.enter().append("g").attr("class","label");var Da=z.merge(A);A.append("rect").attr("x",8).attr("y",-6).attr("width",40).attr("height",14);A.append("line").attr("x1",0).attr("x2",6).attr("y1",0).attr("y2",0);A.append("text").attr("dx",8).attr("dy",4);w=w.select(".y-slice-axis-hover").selectAll(".label").data(["y"]);z=w.enter().append("g").attr("class","label");var Oa=w.merge(z);z.append("rect").attr("x",8).attr("y",-6).attr("width",40).attr("height",14);z.append("line").attr("x1",0).attr("x2",6).attr("y1",
0).attr("y2",0);z.append("text").attr("dx",8).attr("dy",4);a.select(".y.axis.slice").style("opacity","offset"===l?0:1).attr("transform","translate(0, "+("offset"===l?-C:0)+")").call(ja);a.select(".x.axis").attr("transform","translate(0, "+J+")").call(n);a.select(".y.axis").style("opacity","offset"===l?1:0).attr("transform","translate("+D+", "+("offset"===l?0:J)+")").call(X);a.selectAll(".tick text").attr("fill","#aaa");a.selectAll(".axis path.domain").attr("stroke","none")}}});
</script>

  </dom-module>



<script>//~~WEBPATH~~/tf-histogram-dashboard/histogramCore.js
var sl;
(function(a){function b(e){var f=e[2];return{wall_time:e[0],step:e[1],min:d3.min(f.map(function(g){return g[0]})),max:d3.max(f.map(function(g){return g[1]})),buckets:f.map(function(g){return{left:g[0],right:g[1],count:g[2]}})}}function c(e,f,g,h){void 0===h&&(h=30);g===f&&(g=1.1*f+1,f=f/1.1-1);var l=(g-f)/h,n=0;return d3.range(f,g,l).map(function(m){for(var q=m+l,r=0;n<e.buckets.length;){var v=Math.min(g,e.buckets[n].right),u=Math.max(f,e.buckets[n].left),w=Math.min(v,q)-Math.max(u,m);u=w/(v-u)*e.buckets[n].count;
r+=0<w?u:0;if(v>q)break;n++}return{x:m,dx:l,y:r}})}a.backendToIntermediate=b;a.intermediateToD3=c;a.backendToVz=function(e){e=e.map(b);var f=d3.min(e,function(h){return h.min}),g=d3.max(e,function(h){return h.max});return e.map(function(h){return{wall_time:h.wall_time,step:h.step,bins:c(h,f,g)}})}})(sl||(sl={}));
</script>



<dom-module id="tf-histogram-loader">
  <template>
    <tf-card-heading tag="[[tag]]" run="[[run]]" display-name="[[tagMetadata.displayName]]" description="[[tagMetadata.description]]" color="[[_runColor]]"></tf-card-heading>
    
    <vz-histogram-timeseries id="chart" time-property="[[timeProperty]]" mode="[[histogramMode]]" color-scale="[[_colorScaleFunction]]"></vz-histogram-timeseries>
    <div style="display: flex; flex-direction: row;">
      <paper-icon-button selected$="[[_expanded]]" icon="fullscreen" on-tap="_toggleExpanded"></paper-icon-button>
    </div>
    <style>
      :host {
        display: flex;
        flex-direction: column;
        width: 330px;
        height: 235px;
        margin-right: 10px;
        margin-bottom: 15px;
      }
      :host[_expanded] {
        width: 700px;
        height: 500px;
      }

      vz-histogram-timeseries {
        -moz-user-select: none;
        -webkit-user-select: none;
        will-change: transform;
      }

      paper-icon-button {
        color: #2196F3;
        border-radius: 100%;
        width: 32px;
        height: 32px;
        padding: 4px;
      }

      paper-icon-button[selected] {
        background: var(--tb-ui-light-accent);
      }

      tf-card-heading {
        margin-bottom: 10px;
        width: 90%;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-histogram-dashboard/tf-histogram-loader.html.js
Polymer({is:"tf-histogram-loader",properties:{run:String,tag:String,dataToLoad:{type:Array,computed:"_computeDataToLoad(run, tag)"},getDataLoadName:{type:Function,value:function(){return function(a){return a.run}}},getDataLoadUrl:{type:Function,value:function(){return function(a){var b=a.tag;a=a.run;return Rk.addParams(Rk.getRouter().pluginRoute("histograms","/histograms"),{tag:b,run:a})}}},loadDataCallback:{type:Function,value:function(){var a=this;return function(b,c,e){b=sl.backendToVz(e);c=a.getDataLoadName(c);
a.$.chart.setSeriesData(c,b)}}},tagMetadata:Object,timeProperty:String,histogramMode:String,_colorScaleFunction:{type:Object,value:function(){return Yk.runsColorScale}},_runColor:{type:String,computed:"_computeRunColor(run)"},_expanded:{type:Boolean,value:!1,reflectToAttribute:!0}},observers:["reload(run, tag, requestManager)"],behaviors:[Wk.DataLoaderBehavior],_computeDataToLoad:function(a,b){return[{run:a,tag:b}]},_computeRunColor:function(a){return this._colorScaleFunction(a)},redraw:function(){this.$.chart.redraw()},
_toggleExpanded:function(){this.set("_expanded",!this._expanded);this.redraw()}});
</script>
</dom-module>



<dom-module id="tf-histogram-dashboard">
  <template>
    <tf-dashboard-layout>
      <div class="sidebar">
        <div class="sidebar-section">
          <tf-option-selector id="histogramModeSelector" name="Histogram mode" selected-id="{{_histogramMode}}">
            <paper-button id="overlay">overlay</paper-button>
            <paper-button id="offset">offset</paper-button>
          </tf-option-selector>
        </div>
        <div class="sidebar-section">
          <tf-option-selector id="timePropertySelector" name="Offset time axis" selected-id="{{_timeProperty}}">
            <paper-button id="step">step</paper-button>
            <paper-button id="relative">relative</paper-button>
            <paper-button id="wall_time">wall</paper-button>
          </tf-option-selector>
        </div>
        <div class="sidebar-section">
          <tf-runs-selector selected-runs="{{_selectedRuns}}">
          </tf-runs-selector>
        </div>
       </div>
      
      <div class="center">
        <template is="dom-if" if="[[_dataNotFound]]">
          <div class="no-data-warning">
            <h3>No histogram data was found.</h3>
            <p>Probable causes:
            <ul>
              <li>You havenât written any histogram data to your event files.
              <li>TensorBoard canât find your event files.
            </ul>
            <p>
            If youâre new to using TensorBoard, and want to find out how
            to add data and set up your event files, check out the
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
            and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
            <p>
            If you think TensorBoard is configured properly, please see
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
            and consider filing an issue on GitHub.
          </div>
        </template>
        <template is="dom-if" if="[[!_dataNotFound]]">
          <tf-tag-filterer tag-filter="{{_tagFilter}}"></tf-tag-filterer>
          <template is="dom-repeat" items="[[_categories]]" as="category">
            <tf-category-pane category="[[category]]" opened="[[_shouldOpen(index)]]" restamp="[[_restamp]]">
              <tf-paginated-view2 items="[[category.items]]" get-item-key="[[_getItemKey]]" pages="{{category._pages}}">
                <template>
                  <tf-histogram-loader run="[[item.run]]" tag="[[item.tag]]" tag-metadata="[[_tagMetadata(_runToTagInfo, item.run, item.tag)]]" time-property="[[_timeProperty]]" histogram-mode="[[_histogramMode]]" request-manager="[[_requestManager]]"></tf-histogram-loader>
                </template>
              </tf-paginated-view2>
            </tf-category-pane>
          </template>
        </template>
      </div>
    </tf-dashboard-layout>

    <style include="dashboard-style"></style>
    <style>
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-histogram-dashboard/tf-histogram-dashboard.html.js
Polymer({is:"tf-histogram-dashboard",properties:{_histogramMode:{type:String,value:"offset"},_timeProperty:{type:String,value:"step"},_selectedRuns:Array,_runToTag:Object,_runToTagInfo:Object,_dataNotFound:Boolean,_tagFilter:String,_restamp:{type:Boolean,value:!1},_categoriesDomReady:Boolean,_categories:{type:Array,computed:"_makeCategories(_runToTag, _selectedRuns, _tagFilter, _categoriesDomReady)"},_requestManager:{type:Object,value:function(){return new Rk.RequestManager}},_getItemKey:{type:Function,
value:function(){return function(a){return JSON.stringify([a.run,a.tag])}}}},listeners:{"content-visibility-changed":"_redrawCategoryPane"},_redrawCategoryPane:function(a,b){b&&a.target.querySelectorAll("tf-histogram-loader").forEach(function(c){return c.redraw()})},ready:function(){this.reload()},reload:function(){var a=this;this._fetchTags().then(function(){a._reloadHistograms()})},_fetchTags:function(){var a=this,b=Rk.getRouter().pluginRoute("histograms","/tags");return this._requestManager.request(b).then(function(c){if(!_.isEqual(c,
a._runToTagInfo)){var e=_.mapValues(c,function(g){return Object.keys(g)}),f=Rk.getTags(e);a.set("_dataNotFound",0===f.length);a.set("_runToTag",e);a.set("_runToTagInfo",c);a.async(function(){a.set("_categoriesDomReady",!0)})}})},_reloadHistograms:function(){this.querySelectorAll("tf-histogram-loader").forEach(function(a){a.reload()})},_shouldOpen:function(a){return 2>=a},_makeCategories:function(a,b,c){return Sk.categorizeRunTagCombinations(a,b,c)},_tagMetadata:function(a,b,c){return a[b][c]}});
</script>
</dom-module>






<dom-module id="tf-no-data-warning">
  <template>
    <template is="dom-if" if="[[showWarning]]">
      <div class="warning">
        <h3>
          No <span>[[dataType]]</span> data was found.
        </h3>
        <p>
          Probable causes:
          <ul>
            <li>
              You haven't written any <span>[[dataType]]</span> data
              to your event files.
            </li>
            <li>
              TensorBoard can't find your event files.
            </li>
          </ul>
        <p>
        <p>
          If you're new to using TensorBoard, and want to find out how to add
          data and set up your event files, check out the
          <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">
            README
          </a>
          and perhaps the
          <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">
            TensorBoard tutorial
          </a>.
        

        <p>
          If you think TensorBoard is configured properly, please see the
          <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">
            section of the README devoted to missing data problems
          </a>
          and consider filing an issue on GitHub.
        
      </div>
    </template>
    <style>
      .warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-dashboard-common/tf-no-data-warning.html.js
Polymer({is:"tf-no-data-warning",properties:{dataType:String,showWarning:Boolean}});
</script>
</dom-module>





<iron-iconset-svg name="image" size="24">
<svg><defs>
<g id="add-a-photo"><path d="M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z" /></g>
<g id="add-to-photos"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z" /></g>
<g id="adjust"><path d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z" /></g>
<g id="assistant"><path d="M19 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5.12 10.88L12 17l-1.88-4.12L6 11l4.12-1.88L12 5l1.88 4.12L18 11l-4.12 1.88z" /></g>
<g id="assistant-photo"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z" /></g>
<g id="audiotrack"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z" /></g>
<g id="blur-circular"><path d="M10 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zM7 9.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm3 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm-3-3c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm3-6c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM14 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-1.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm3 6c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-4c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm2-3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-3.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" /></g>
<g id="blur-linear"><path d="M5 17.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM9 13c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zM3 21h18v-2H3v2zM5 9.5c.83 0 1.5-.67 1.5-1.5S5.83 6.5 5 6.5 3.5 7.17 3.5 8 4.17 9.5 5 9.5zm0 4c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM9 17c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm8-.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM3 3v2h18V3H3zm14 5.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm0 4c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM13 9c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1z" /></g>
<g id="blur-off"><path d="M14 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm-.2 4.48l.2.02c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5l.02.2c.09.67.61 1.19 1.28 1.28zM14 3.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm-4 0c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm11 7c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM10 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm8 8c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm-4 13.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM2.5 5.27l3.78 3.78L6 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1c0-.1-.03-.19-.06-.28l2.81 2.81c-.71.11-1.25.73-1.25 1.47 0 .83.67 1.5 1.5 1.5.74 0 1.36-.54 1.47-1.25l2.81 2.81c-.09-.03-.18-.06-.28-.06-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1c0-.1-.03-.19-.06-.28l3.78 3.78L20 20.23 3.77 4 2.5 5.27zM10 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm11-3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 13c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zM3 9.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 11c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-3-3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5z" /></g>
<g id="blur-on"><path d="M6 13c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-3 .5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm15 5.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM14 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-3.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm-11 10c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-17c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM10 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 5.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm8 .5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm3 8.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM14 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm-4-12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0 8.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm4-4.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-4c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z" /></g>
<g id="brightness-1"><circle cx="12" cy="12" r="10" /></g>
<g id="brightness-2"><path d="M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2z" /></g>
<g id="brightness-3"><path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z" /></g>
<g id="brightness-4"><path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6z" /></g>
<g id="brightness-5"><path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z" /></g>
<g id="brightness-6"><path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6z" /></g>
<g id="brightness-7"><path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z" /></g>
<g id="broken-image"><path d="M21 5v6.59l-3-3.01-4 4.01-4-4-4 4-3-3.01V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2zm-3 6.42l3 3.01V19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-6.58l3 2.99 4-4 4 4 4-3.99z" /></g>
<g id="brush"><path d="M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z" /></g>
<g id="burst-mode"><path d="M1 5h2v14H1zm4 0h2v14H5zm17 0H10c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zM11 17l2.5-3.15L15.29 16l2.5-3.22L21 17H11z" /></g>
<g id="camera"><path d="M9.4 10.5l4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0l-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35-.93 1.6z" /></g>
<g id="camera-alt"><circle cx="12" cy="12" r="3.2" /><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" /></g>
<g id="camera-front"><path d="M10 20H5v2h5v2l3-3-3-3v2zm4 0v2h5v-2h-5zM12 8c1.1 0 2-.9 2-2s-.9-2-2-2-1.99.9-1.99 2S10.9 8 12 8zm5-8H7C5.9 0 5 .9 5 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zM7 2h10v10.5c0-1.67-3.33-2.5-5-2.5s-5 .83-5 2.5V2z" /></g>
<g id="camera-rear"><path d="M10 20H5v2h5v2l3-3-3-3v2zm4 0v2h5v-2h-5zm3-20H7C5.9 0 5 .9 5 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zm-5 6c-1.11 0-2-.9-2-2s.89-2 1.99-2 2 .9 2 2C14 5.1 13.1 6 12 6z" /></g>
<g id="camera-roll"><path d="M14 5c0-1.1-.9-2-2-2h-1V2c0-.55-.45-1-1-1H6c-.55 0-1 .45-1 1v1H4c-1.1 0-2 .9-2 2v15c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2h8V5h-8zm-2 13h-2v-2h2v2zm0-9h-2V7h2v2zm4 9h-2v-2h2v2zm0-9h-2V7h2v2zm4 9h-2v-2h2v2zm0-9h-2V7h2v2z" /></g>
<g id="center-focus-strong"><path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm-7 7H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4z" /></g>
<g id="center-focus-weak"><path d="M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="collections"><path d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z" /></g>
<g id="collections-bookmark"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 10l-2.5-1.5L15 12V4h5v8z" /></g>
<g id="color-lens"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="colorize"><path d="M20.71 5.63l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z" /></g>
<g id="compare"><path d="M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2v2zm0 15H5l5-6v6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="control-point"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="control-point-duplicate"><path d="M16 8h-2v3h-3v2h3v3h2v-3h3v-2h-3zM2 12c0-2.79 1.64-5.2 4.01-6.32V3.52C2.52 4.76 0 8.09 0 12s2.52 7.24 6.01 8.48v-2.16C3.64 17.2 2 14.79 2 12zm13-9c-4.96 0-9 4.04-9 9s4.04 9 9 9 9-4.04 9-9-4.04-9-9-9zm0 16c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z" /></g>
<g id="crop"><path d="M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z" /></g>
<g id="crop-16-9"><path d="M19 6H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H5V8h14v8z" /></g>
<g id="crop-3-2"><path d="M19 4H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H5V6h14v12z" /></g>
<g id="crop-5-4"><path d="M19 5H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 12H5V7h14v10z" /></g>
<g id="crop-7-5"><path d="M19 7H5c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm0 8H5V9h14v6z" /></g>
<g id="crop-din"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" /></g>
<g id="crop-free"><path d="M3 5v4h2V5h4V3H5c-1.1 0-2 .9-2 2zm2 10H3v4c0 1.1.9 2 2 2h4v-2H5v-4zm14 4h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zm0-16h-4v2h4v4h2V5c0-1.1-.9-2-2-2z" /></g>
<g id="crop-landscape"><path d="M19 5H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 12H5V7h14v10z" /></g>
<g id="crop-original"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5.04-6.71l-2.75 3.54-1.96-2.36L6.5 17h11l-3.54-4.71z" /></g>
<g id="crop-portrait"><path d="M17 3H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7V5h10v14z" /></g>
<g id="crop-rotate"><path d="M7.47 21.49C4.2 19.93 1.86 16.76 1.5 13H0c.51 6.16 5.66 11 11.95 11 .23 0 .44-.02.66-.03L8.8 20.15l-1.33 1.34zM12.05 0c-.23 0-.44.02-.66.04l3.81 3.81 1.33-1.33C19.8 4.07 22.14 7.24 22.5 11H24c-.51-6.16-5.66-11-11.95-11zM16 14h2V8c0-1.11-.9-2-2-2h-6v2h6v6zm-8 2V4H6v2H4v2h2v8c0 1.1.89 2 2 2h8v2h2v-2h2v-2H8z" /></g>
<g id="crop-square"><path d="M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H6V6h12v12z" /></g>
<g id="dehaze"><path d="M2 15.5v2h20v-2H2zm0-5v2h20v-2H2zm0-5v2h20v-2H2z" /></g>
<g id="details"><path d="M3 4l9 16 9-16H3zm3.38 2h11.25L12 16 6.38 6z" /></g>
<g id="edit"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" /></g>
<g id="exposure"><path d="M15 17v2h2v-2h2v-2h-2v-2h-2v2h-2v2h2zm5-15H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM5 5h6v2H5V5zm15 15H4L20 4v16z" /></g>
<g id="exposure-neg-1"><path d="M4 11v2h8v-2H4zm15 7h-2V7.38L14 8.4V6.7L18.7 5h.3v13z" /></g>
<g id="exposure-neg-2"><path d="M15.05 16.29l2.86-3.07c.38-.39.72-.79 1.04-1.18.32-.39.59-.78.82-1.17.23-.39.41-.78.54-1.17s.19-.79.19-1.18c0-.53-.09-1.02-.27-1.46-.18-.44-.44-.81-.78-1.11-.34-.31-.77-.54-1.26-.71-.51-.16-1.08-.24-1.72-.24-.69 0-1.31.11-1.85.32-.54.21-1 .51-1.36.88-.37.37-.65.8-.84 1.3-.18.47-.27.97-.28 1.5h2.14c.01-.31.05-.6.13-.87.09-.29.23-.54.4-.75.18-.21.41-.37.68-.49.27-.12.6-.18.96-.18.31 0 .58.05.81.15.23.1.43.25.59.43.16.18.28.4.37.65.08.25.13.52.13.81 0 .22-.03.43-.08.65-.06.22-.15.45-.29.7-.14.25-.32.53-.56.83-.23.3-.52.65-.88 1.03l-4.17 4.55V18H21v-1.71h-5.95zM2 11v2h8v-2H2z" /></g>
<g id="exposure-plus-1"><path d="M10 7H8v4H4v2h4v4h2v-4h4v-2h-4V7zm10 11h-2V7.38L15 8.4V6.7L19.7 5h.3v13z" /></g>
<g id="exposure-plus-2"><path d="M16.05 16.29l2.86-3.07c.38-.39.72-.79 1.04-1.18.32-.39.59-.78.82-1.17.23-.39.41-.78.54-1.17.13-.39.19-.79.19-1.18 0-.53-.09-1.02-.27-1.46-.18-.44-.44-.81-.78-1.11-.34-.31-.77-.54-1.26-.71-.51-.16-1.08-.24-1.72-.24-.69 0-1.31.11-1.85.32-.54.21-1 .51-1.36.88-.37.37-.65.8-.84 1.3-.18.47-.27.97-.28 1.5h2.14c.01-.31.05-.6.13-.87.09-.29.23-.54.4-.75.18-.21.41-.37.68-.49.27-.12.6-.18.96-.18.31 0 .58.05.81.15.23.1.43.25.59.43.16.18.28.4.37.65.08.25.13.52.13.81 0 .22-.03.43-.08.65-.06.22-.15.45-.29.7-.14.25-.32.53-.56.83-.23.3-.52.65-.88 1.03l-4.17 4.55V18H22v-1.71h-5.95zM8 7H6v4H2v2h4v4h2v-4h4v-2H8V7z" /></g>
<g id="exposure-zero"><path d="M16.14 12.5c0 1-.1 1.85-.3 2.55-.2.7-.48 1.27-.83 1.7-.36.44-.79.75-1.3.95-.51.2-1.07.3-1.7.3-.62 0-1.18-.1-1.69-.3-.51-.2-.95-.51-1.31-.95-.36-.44-.65-1.01-.85-1.7-.2-.7-.3-1.55-.3-2.55v-2.04c0-1 .1-1.85.3-2.55.2-.7.48-1.26.84-1.69.36-.43.8-.74 1.31-.93C10.81 5.1 11.38 5 12 5c.63 0 1.19.1 1.7.29.51.19.95.5 1.31.93.36.43.64.99.84 1.69.2.7.3 1.54.3 2.55v2.04zm-2.11-2.36c0-.64-.05-1.18-.13-1.62-.09-.44-.22-.79-.4-1.06-.17-.27-.39-.46-.64-.58-.25-.13-.54-.19-.86-.19-.32 0-.61.06-.86.18s-.47.31-.64.58c-.17.27-.31.62-.4 1.06s-.13.98-.13 1.62v2.67c0 .64.05 1.18.14 1.62.09.45.23.81.4 1.09s.39.48.64.61.54.19.87.19c.33 0 .62-.06.87-.19s.46-.33.63-.61c.17-.28.3-.64.39-1.09.09-.45.13-.99.13-1.62v-2.66z" /></g>
<g id="filter"><path d="M15.96 10.29l-2.75 3.54-1.96-2.36L8.5 15h11l-3.54-4.71zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-1"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm11 10h2V5h-4v2h2v8zm7-14H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-2"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-4-4h-4v-2h2c1.1 0 2-.89 2-2V7c0-1.11-.9-2-2-2h-4v2h4v2h-2c-1.1 0-2 .89-2 2v4h6v-2z" /></g>
<g id="filter-3"><path d="M21 1H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm14 8v-1.5c0-.83-.67-1.5-1.5-1.5.83 0 1.5-.67 1.5-1.5V7c0-1.11-.9-2-2-2h-4v2h4v2h-2v2h2v2h-4v2h4c1.1 0 2-.89 2-2z" /></g>
<g id="filter-4"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm12 10h2V5h-2v4h-2V5h-2v6h4v4zm6-14H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-5"><path d="M21 1H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm14 8v-2c0-1.11-.9-2-2-2h-2V7h4V5h-6v6h4v2h-4v2h4c1.1 0 2-.89 2-2z" /></g>
<g id="filter-6"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-8-2h2c1.1 0 2-.89 2-2v-2c0-1.11-.9-2-2-2h-2V7h4V5h-4c-1.1 0-2 .89-2 2v6c0 1.11.9 2 2 2zm0-4h2v2h-2v-2z" /></g>
<g id="filter-7"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-8-2l4-8V5h-6v2h4l-4 8h2z" /></g>
<g id="filter-8"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-8-2h2c1.1 0 2-.89 2-2v-1.5c0-.83-.67-1.5-1.5-1.5.83 0 1.5-.67 1.5-1.5V7c0-1.11-.9-2-2-2h-2c-1.1 0-2 .89-2 2v1.5c0 .83.67 1.5 1.5 1.5-.83 0-1.5.67-1.5 1.5V13c0 1.11.9 2 2 2zm0-8h2v2h-2V7zm0 4h2v2h-2v-2z" /></g>
<g id="filter-9"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zM15 5h-2c-1.1 0-2 .89-2 2v2c0 1.11.9 2 2 2h2v2h-4v2h4c1.1 0 2-.89 2-2V7c0-1.11-.9-2-2-2zm0 4h-2V7h2v2z" /></g>
<g id="filter-9-plus"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm11 7V8c0-1.11-.9-2-2-2h-1c-1.1 0-2 .89-2 2v1c0 1.11.9 2 2 2h1v1H9v2h3c1.1 0 2-.89 2-2zm-3-3V8h1v1h-1zm10-8H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 8h-2V7h-2v2h-2v2h2v2h2v-2h2v6H7V3h14v6z" /></g>
<g id="filter-b-and-w"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16l-7-8v8H5l7-8V5h7v14z" /></g>
<g id="filter-center-focus"><path d="M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="filter-drama"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.61 5.64 5.36 8.04 2.35 8.36 0 10.9 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4h2c0-2.76-1.86-5.08-4.4-5.78C8.61 6.88 10.2 6 12 6c3.03 0 5.5 2.47 5.5 5.5v.5H19c1.65 0 3 1.35 3 3s-1.35 3-3 3z" /></g>
<g id="filter-frames"><path d="M20 4h-4l-4-4-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H4V6h4.52l3.52-3.5L15.52 6H20v14zM18 8H6v10h12" /></g>
<g id="filter-hdr"><path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z" /></g>
<g id="filter-none"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-tilt-shift"><path d="M11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69c1.11-.86 2.44-1.44 3.9-1.62zm7.32.19C16.84 3.05 15.01 2.25 13 2.05v2.02c1.46.18 2.79.76 3.9 1.62l1.42-1.43zM19.93 11h2.02c-.2-2.01-1-3.84-2.21-5.32L18.31 7.1c.86 1.11 1.44 2.44 1.62 3.9zM5.69 7.1L4.26 5.68C3.05 7.16 2.25 8.99 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9zM4.07 13H2.05c.2 2.01 1 3.84 2.21 5.32l1.43-1.43c-.86-1.1-1.44-2.43-1.62-3.89zM15 12c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3 3-1.34 3-3zm3.31 4.9l1.43 1.43c1.21-1.48 2.01-3.32 2.21-5.32h-2.02c-.18 1.45-.76 2.78-1.62 3.89zM13 19.93v2.02c2.01-.2 3.84-1 5.32-2.21l-1.43-1.43c-1.1.86-2.43 1.44-3.89 1.62zm-7.32-.19C7.16 20.95 9 21.75 11 21.95v-2.02c-1.46-.18-2.79-.76-3.9-1.62l-1.42 1.43z" /></g>
<g id="filter-vintage"><path d="M18.7 12.4c-.28-.16-.57-.29-.86-.4.29-.11.58-.24.86-.4 1.92-1.11 2.99-3.12 3-5.19-1.79-1.03-4.07-1.11-6 0-.28.16-.54.35-.78.54.05-.31.08-.63.08-.95 0-2.22-1.21-4.15-3-5.19C10.21 1.85 9 3.78 9 6c0 .32.03.64.08.95-.24-.2-.5-.39-.78-.55-1.92-1.11-4.2-1.03-6 0 0 2.07 1.07 4.08 3 5.19.28.16.57.29.86.4-.29.11-.58.24-.86.4-1.92 1.11-2.99 3.12-3 5.19 1.79 1.03 4.07 1.11 6 0 .28-.16.54-.35.78-.54-.05.32-.08.64-.08.96 0 2.22 1.21 4.15 3 5.19 1.79-1.04 3-2.97 3-5.19 0-.32-.03-.64-.08-.95.24.2.5.38.78.54 1.92 1.11 4.2 1.03 6 0-.01-2.07-1.08-4.08-3-5.19zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /></g>
<g id="flare"><path d="M7 11H1v2h6v-2zm2.17-3.24L7.05 5.64 5.64 7.05l2.12 2.12 1.41-1.41zM13 1h-2v6h2V1zm5.36 6.05l-1.41-1.41-2.12 2.12 1.41 1.41 2.12-2.12zM17 11v2h6v-2h-6zm-5-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm2.83 7.24l2.12 2.12 1.41-1.41-2.12-2.12-1.41 1.41zm-9.19.71l1.41 1.41 2.12-2.12-1.41-1.41-2.12 2.12zM11 23h2v-6h-2v6z" /></g>
<g id="flash-auto"><path d="M3 2v12h3v9l7-12H9l4-9H3zm16 0h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9L19 2zm-2.15 5.65L18 4l1.15 3.65h-2.3z" /></g>
<g id="flash-off"><path d="M3.27 3L2 4.27l5 5V13h3v9l3.58-6.14L17.73 20 19 18.73 3.27 3zM17 10h-4l4-8H7v2.18l8.46 8.46L17 10z" /></g>
<g id="flash-on"><path d="M7 2v11h3v9l7-12h-4l4-8z" /></g>
<g id="flip"><path d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z" /></g>
<g id="gradient"><path d="M11 9h2v2h-2zm-2 2h2v2H9zm4 0h2v2h-2zm2-2h2v2h-2zM7 9h2v2H7zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z" /></g>
<g id="grain"><path d="M10 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-4 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="grid-off"><path d="M8 4v1.45l2 2V4h4v4h-3.45l2 2H14v1.45l2 2V10h4v4h-3.45l2 2H20v1.45l2 2V4c0-1.1-.9-2-2-2H4.55l2 2H8zm8 0h4v4h-4V4zM1.27 1.27L0 2.55l2 2V20c0 1.1.9 2 2 2h15.46l2 2 1.27-1.27L1.27 1.27zM10 12.55L11.45 14H10v-1.45zm-6-6L5.45 8H4V6.55zM8 20H4v-4h4v4zm0-6H4v-4h3.45l.55.55V14zm6 6h-4v-4h3.45l.55.54V20zm2 0v-1.46L17.46 20H16z" /></g>
<g id="grid-on"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z" /></g>
<g id="hdr-off"><path d="M17.5 15v-2h1.1l.9 2H21l-.9-2.1c.5-.2.9-.8.9-1.4v-1c0-.8-.7-1.5-1.5-1.5H16v4.9l1.1 1.1h.4zm0-4.5h2v1h-2v-1zm-4.5 0v.4l1.5 1.5v-1.9c0-.8-.7-1.5-1.5-1.5h-1.9l1.5 1.5h.4zm-3.5-1l-7-7-1.1 1L6.9 9h-.4v2h-2V9H3v6h1.5v-2.5h2V15H8v-4.9l1.5 1.5V15h3.4l7.6 7.6 1.1-1.1-12.1-12z" /></g>
<g id="hdr-on"><path d="M21 11.5v-1c0-.8-.7-1.5-1.5-1.5H16v6h1.5v-2h1.1l.9 2H21l-.9-2.1c.5-.3.9-.8.9-1.4zm-1.5 0h-2v-1h2v1zm-13-.5h-2V9H3v6h1.5v-2.5h2V15H8V9H6.5v2zM13 9H9.5v6H13c.8 0 1.5-.7 1.5-1.5v-3c0-.8-.7-1.5-1.5-1.5zm0 4.5h-2v-3h2v3z" /></g>
<g id="hdr-strong"><path d="M17 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zM5 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="hdr-weak"><path d="M5 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm12-2c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /></g>
<g id="healing"><path d="M17.73 12.02l3.98-3.98c.39-.39.39-1.02 0-1.41l-4.34-4.34c-.39-.39-1.02-.39-1.41 0l-3.98 3.98L8 2.29C7.8 2.1 7.55 2 7.29 2c-.25 0-.51.1-.7.29L2.25 6.63c-.39.39-.39 1.02 0 1.41l3.98 3.98L2.25 16c-.39.39-.39 1.02 0 1.41l4.34 4.34c.39.39 1.02.39 1.41 0l3.98-3.98 3.98 3.98c.2.2.45.29.71.29.26 0 .51-.1.71-.29l4.34-4.34c.39-.39.39-1.02 0-1.41l-3.99-3.98zM12 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-4.71 1.96L3.66 7.34l3.63-3.63 3.62 3.62-3.62 3.63zM10 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2.66 9.34l-3.63-3.62 3.63-3.63 3.62 3.62-3.62 3.63z" /></g>
<g id="image"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" /></g>
<g id="image-aspect-ratio"><path d="M16 10h-2v2h2v-2zm0 4h-2v2h2v-2zm-8-4H6v2h2v-2zm4 0h-2v2h2v-2zm8-6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12z" /></g>
<g id="iso"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5.5 7.5h2v-2H9v2h2V9H9v2H7.5V9h-2V7.5zM19 19H5L19 5v14zm-2-2v-1.5h-5V17h5z" /></g>
<g id="landscape"><path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z" /></g>
<g id="leak-add"><path d="M6 3H3v3c1.66 0 3-1.34 3-3zm8 0h-2c0 4.97-4.03 9-9 9v2c6.08 0 11-4.93 11-11zm-4 0H8c0 2.76-2.24 5-5 5v2c3.87 0 7-3.13 7-7zm0 18h2c0-4.97 4.03-9 9-9v-2c-6.07 0-11 4.93-11 11zm8 0h3v-3c-1.66 0-3 1.34-3 3zm-4 0h2c0-2.76 2.24-5 5-5v-2c-3.87 0-7 3.13-7 7z" /></g>
<g id="leak-remove"><path d="M10 3H8c0 .37-.04.72-.12 1.06l1.59 1.59C9.81 4.84 10 3.94 10 3zM3 4.27l2.84 2.84C5.03 7.67 4.06 8 3 8v2c1.61 0 3.09-.55 4.27-1.46L8.7 9.97C7.14 11.24 5.16 12 3 12v2c2.71 0 5.19-.99 7.11-2.62l2.5 2.5C10.99 15.81 10 18.29 10 21h2c0-2.16.76-4.14 2.03-5.69l1.43 1.43C14.55 17.91 14 19.39 14 21h2c0-1.06.33-2.03.89-2.84L19.73 21 21 19.73 4.27 3 3 4.27zM14 3h-2c0 1.5-.37 2.91-1.02 4.16l1.46 1.46C13.42 6.98 14 5.06 14 3zm5.94 13.12c.34-.08.69-.12 1.06-.12v-2c-.94 0-1.84.19-2.66.52l1.6 1.6zm-4.56-4.56l1.46 1.46C18.09 12.37 19.5 12 21 12v-2c-2.06 0-3.98.58-5.62 1.56z" /></g>
<g id="lens"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" /></g>
<g id="linked-camera"><circle cx="12" cy="14" r="3.2" /><path d="M16 3.33c2.58 0 4.67 2.09 4.67 4.67H22c0-3.31-2.69-6-6-6v1.33M16 6c1.11 0 2 .89 2 2h1.33c0-1.84-1.49-3.33-3.33-3.33V6" /><path d="M17 9c0-1.11-.89-2-2-2V4H9L7.17 6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9h-5zm-5 10c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" /></g>
<g id="looks"><path d="M12 10c-3.86 0-7 3.14-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.86-3.14-7-7-7zm0-4C5.93 6 1 10.93 1 17h2c0-4.96 4.04-9 9-9s9 4.04 9 9h2c0-6.07-4.93-11-11-11z" /></g>
<g id="looks-3"><path d="M19.01 3h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 7.5c0 .83-.67 1.5-1.5 1.5.83 0 1.5.67 1.5 1.5V15c0 1.11-.9 2-2 2h-4v-2h4v-2h-2v-2h2V9h-4V7h4c1.1 0 2 .89 2 2v1.5z" /></g>
<g id="looks-4"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z" /></g>
<g id="looks-5"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2c1.1 0 2 .89 2 2v2c0 1.11-.9 2-2 2H9v-2h4v-2H9V7h6v2z" /></g>
<g id="looks-6"><path d="M11 15h2v-2h-2v2zm8-12H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2c1.1 0 2 .89 2 2v2c0 1.11-.9 2-2 2h-2c-1.1 0-2-.89-2-2V9c0-1.11.9-2 2-2h4v2z" /></g>
<g id="looks-one"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14h-2V9h-2V7h4v10z" /></g>
<g id="looks-two"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 8c0 1.11-.9 2-2 2h-2v2h4v2H9v-4c0-1.11.9-2 2-2h2V9H9V7h4c1.1 0 2 .89 2 2v2z" /></g>
<g id="loupe"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10h8c1.1 0 2-.9 2-2v-8c0-5.51-4.49-10-10-10zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="monochrome-photos"><path d="M20 5h-3.2L15 3H9L7.2 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 14h-8v-1c-2.8 0-5-2.2-5-5s2.2-5 5-5V7h8v12zm-3-6c0-2.8-2.2-5-5-5v1.8c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2V18c2.8 0 5-2.2 5-5zm-8.2 0c0 1.8 1.4 3.2 3.2 3.2V9.8c-1.8 0-3.2 1.4-3.2 3.2z" /></g>
<g id="movie-creation"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z" /></g>
<g id="movie-filter"><path d="M18 4l2 3h-3l-2-3h-2l2 3h-3l-2-3H8l2 3H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4zm-6.75 11.25L10 18l-1.25-2.75L6 14l2.75-1.25L10 10l1.25 2.75L14 14l-2.75 1.25zm5.69-3.31L16 14l-.94-2.06L13 11l2.06-.94L16 8l.94 2.06L19 11l-2.06.94z" /></g>
<g id="music-note"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" /></g>
<g id="nature"><path d="M13 16.12c3.47-.41 6.17-3.36 6.17-6.95 0-3.87-3.13-7-7-7s-7 3.13-7 7c0 3.47 2.52 6.34 5.83 6.89V20H5v2h14v-2h-6v-3.88z" /></g>
<g id="nature-people"><path d="M22.17 9.17c0-3.87-3.13-7-7-7s-7 3.13-7 7c0 3.47 2.52 6.34 5.83 6.89V20H6v-3h1v-4c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v4h1v5h16v-2h-3v-3.88c3.47-.41 6.17-3.36 6.17-6.95zM4.5 11c.83 0 1.5-.67 1.5-1.5S5.33 8 4.5 8 3 8.67 3 9.5 3.67 11 4.5 11z" /></g>
<g id="navigate-before"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" /></g>
<g id="navigate-next"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /></g>
<g id="palette"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="panorama"><path d="M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z" /></g>
<g id="panorama-fish-eye"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="panorama-horizontal"><path d="M20 6.54v10.91c-2.6-.77-5.28-1.16-8-1.16-2.72 0-5.4.39-8 1.16V6.54c2.6.77 5.28 1.16 8 1.16 2.72.01 5.4-.38 8-1.16M21.43 4c-.1 0-.2.02-.31.06C18.18 5.16 15.09 5.7 12 5.7c-3.09 0-6.18-.55-9.12-1.64-.11-.04-.22-.06-.31-.06-.34 0-.57.23-.57.63v14.75c0 .39.23.62.57.62.1 0 .2-.02.31-.06 2.94-1.1 6.03-1.64 9.12-1.64 3.09 0 6.18.55 9.12 1.64.11.04.21.06.31.06.33 0 .57-.23.57-.63V4.63c0-.4-.24-.63-.57-.63z" /></g>
<g id="panorama-vertical"><path d="M19.94 21.12c-1.1-2.94-1.64-6.03-1.64-9.12 0-3.09.55-6.18 1.64-9.12.04-.11.06-.22.06-.31 0-.34-.23-.57-.63-.57H4.63c-.4 0-.63.23-.63.57 0 .1.02.2.06.31C5.16 5.82 5.71 8.91 5.71 12c0 3.09-.55 6.18-1.64 9.12-.05.11-.07.22-.07.31 0 .33.23.57.63.57h14.75c.39 0 .63-.24.63-.57-.01-.1-.03-.2-.07-.31zM6.54 20c.77-2.6 1.16-5.28 1.16-8 0-2.72-.39-5.4-1.16-8h10.91c-.77 2.6-1.16 5.28-1.16 8 0 2.72.39 5.4 1.16 8H6.54z" /></g>
<g id="panorama-wide-angle"><path d="M12 6c2.45 0 4.71.2 7.29.64.47 1.78.71 3.58.71 5.36 0 1.78-.24 3.58-.71 5.36-2.58.44-4.84.64-7.29.64s-4.71-.2-7.29-.64C4.24 15.58 4 13.78 4 12c0-1.78.24-3.58.71-5.36C7.29 6.2 9.55 6 12 6m0-2c-2.73 0-5.22.24-7.95.72l-.93.16-.25.9C2.29 7.85 2 9.93 2 12s.29 4.15.87 6.22l.25.89.93.16c2.73.49 5.22.73 7.95.73s5.22-.24 7.95-.72l.93-.16.25-.89c.58-2.08.87-4.16.87-6.23s-.29-4.15-.87-6.22l-.25-.89-.93-.16C17.22 4.24 14.73 4 12 4z" /></g>
<g id="photo"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" /></g>
<g id="photo-album"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4zm0 15l3-3.86 2.14 2.58 3-3.86L18 19H6z" /></g>
<g id="photo-camera"><circle cx="12" cy="12" r="3.2" /><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" /></g>
<g id="photo-filter"><path d="M19.02 10v9H5V5h9V3H5.02c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2zM17 10l.94-2.06L20 7l-2.06-.94L17 4l-.94 2.06L14 7l2.06.94zm-3.75.75L12 8l-1.25 2.75L8 12l2.75 1.25L12 16l1.25-2.75L16 12z" /></g>
<g id="photo-library"><path d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z" /></g>
<g id="photo-size-select-actual"><path d="M21 3H3C2 3 1 4 1 5v14c0 1.1.9 2 2 2h18c1 0 2-1 2-2V5c0-1-1-2-2-2zM5 17l3.5-4.5 2.5 3.01L14.5 11l4.5 6H5z" /></g>
<g id="photo-size-select-large"><path d="M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1zm2 8l2.5-3.21 1.79 2.15 2.5-3.22L13 19H3z" /></g>
<g id="photo-size-select-small"><path d="M23 15h-2v2h2v-2zm0-4h-2v2h2v-2zm0 8h-2v2c1 0 2-1 2-2zM15 3h-2v2h2V3zm8 4h-2v2h2V7zm-2-4v2h2c0-1-1-2-2-2zM3 21h8v-6H1v4c0 1.1.9 2 2 2zM3 7H1v2h2V7zm12 12h-2v2h2v-2zm4-16h-2v2h2V3zm0 16h-2v2h2v-2zM3 3C2 3 1 4 1 5h2V3zm0 8H1v2h2v-2zm8-8H9v2h2V3zM7 3H5v2h2V3z" /></g>
<g id="picture-as-pdf"><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z" /></g>
<g id="portrait"><path d="M12 12.25c1.24 0 2.25-1.01 2.25-2.25S13.24 7.75 12 7.75 9.75 8.76 9.75 10s1.01 2.25 2.25 2.25zm4.5 4c0-1.5-3-2.25-4.5-2.25s-4.5.75-4.5 2.25V17h9v-.75zM19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" /></g>
<g id="remove-red-eye"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="rotate-90-degrees-ccw"><path d="M7.34 6.41L.86 12.9l6.49 6.48 6.49-6.48-6.5-6.49zM3.69 12.9l3.66-3.66L11 12.9l-3.66 3.66-3.65-3.66zm15.67-6.26C17.61 4.88 15.3 4 13 4V.76L8.76 5 13 9.24V6c1.79 0 3.58.68 4.95 2.05 2.73 2.73 2.73 7.17 0 9.9C16.58 19.32 14.79 20 13 20c-.97 0-1.94-.21-2.84-.61l-1.49 1.49C10.02 21.62 11.51 22 13 22c2.3 0 4.61-.88 6.36-2.64 3.52-3.51 3.52-9.21 0-12.72z" /></g>
<g id="rotate-left"><path d="M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z" /></g>
<g id="rotate-right"><path d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z" /></g>
<g id="slideshow"><path d="M10 8v8l5-4-5-4zm9-5H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" /></g>
<g id="straighten"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z" /></g>
<g id="style"><path d="M2.53 19.65l1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zM7.88 8.75c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-2 11c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z" /></g>
<g id="switch-camera"><path d="M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 11.5V13H9v2.5L5.5 12 9 8.5V11h6V8.5l3.5 3.5-3.5 3.5z" /></g>
<g id="switch-video"><path d="M18 9.5V6c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-3.5l4 4v-13l-4 4zm-5 6V13H7v2.5L3.5 12 7 8.5V11h6V8.5l3.5 3.5-3.5 3.5z" /></g>
<g id="tag-faces"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" /></g>
<g id="texture"><path d="M19.51 3.08L3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3L3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z" /></g>
<g id="timelapse"><path d="M16.24 7.76C15.07 6.59 13.54 6 12 6v6l-4.24 4.24c2.34 2.34 6.14 2.34 8.49 0 2.34-2.34 2.34-6.14-.01-8.48zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="timer"><path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z" /></g>
<g id="timer-10"><path d="M0 7.72V9.4l3-1V18h2V6h-.25L0 7.72zm23.78 6.65c-.14-.28-.35-.53-.63-.74-.28-.21-.61-.39-1.01-.53s-.85-.27-1.35-.38c-.35-.07-.64-.15-.87-.23-.23-.08-.41-.16-.55-.25-.14-.09-.23-.19-.28-.3-.05-.11-.08-.24-.08-.39 0-.14.03-.28.09-.41.06-.13.15-.25.27-.34.12-.1.27-.18.45-.24s.4-.09.64-.09c.25 0 .47.04.66.11.19.07.35.17.48.29.13.12.22.26.29.42.06.16.1.32.1.49h1.95c0-.39-.08-.75-.24-1.09-.16-.34-.39-.63-.69-.88-.3-.25-.66-.44-1.09-.59C21.49 9.07 21 9 20.46 9c-.51 0-.98.07-1.39.21-.41.14-.77.33-1.06.57-.29.24-.51.52-.67.84-.16.32-.23.65-.23 1.01s.08.69.23.96c.15.28.36.52.64.73.27.21.6.38.98.53.38.14.81.26 1.27.36.39.08.71.17.95.26s.43.19.57.29c.13.1.22.22.27.34.05.12.07.25.07.39 0 .32-.13.57-.4.77-.27.2-.66.29-1.17.29-.22 0-.43-.02-.64-.08-.21-.05-.4-.13-.56-.24-.17-.11-.3-.26-.41-.44-.11-.18-.17-.41-.18-.67h-1.89c0 .36.08.71.24 1.05.16.34.39.65.7.93.31.27.69.49 1.15.66.46.17.98.25 1.58.25.53 0 1.01-.06 1.44-.19.43-.13.8-.31 1.11-.54.31-.23.54-.51.71-.83.17-.32.25-.67.25-1.06-.02-.4-.09-.74-.24-1.02zm-9.96-7.32c-.34-.4-.75-.7-1.23-.88-.47-.18-1.01-.27-1.59-.27-.58 0-1.11.09-1.59.27-.48.18-.89.47-1.23.88-.34.41-.6.93-.79 1.59-.18.65-.28 1.45-.28 2.39v1.92c0 .94.09 1.74.28 2.39.19.66.45 1.19.8 1.6.34.41.75.71 1.23.89.48.18 1.01.28 1.59.28.59 0 1.12-.09 1.59-.28.48-.18.88-.48 1.22-.89.34-.41.6-.94.78-1.6.18-.65.28-1.45.28-2.39v-1.92c0-.94-.09-1.74-.28-2.39-.18-.66-.44-1.19-.78-1.59zm-.92 6.17c0 .6-.04 1.11-.12 1.53-.08.42-.2.76-.36 1.02-.16.26-.36.45-.59.57-.23.12-.51.18-.82.18-.3 0-.58-.06-.82-.18s-.44-.31-.6-.57c-.16-.26-.29-.6-.38-1.02-.09-.42-.13-.93-.13-1.53v-2.5c0-.6.04-1.11.13-1.52.09-.41.21-.74.38-1 .16-.25.36-.43.6-.55.24-.11.51-.17.81-.17.31 0 .58.06.81.17.24.11.44.29.6.55.16.25.29.58.37.99.08.41.13.92.13 1.52v2.51z" /></g>
<g id="timer-3"><path d="M11.61 12.97c-.16-.24-.36-.46-.62-.65-.25-.19-.56-.35-.93-.48.3-.14.57-.3.8-.5.23-.2.42-.41.57-.64.15-.23.27-.46.34-.71.08-.24.11-.49.11-.73 0-.55-.09-1.04-.28-1.46-.18-.42-.44-.77-.78-1.06-.33-.28-.73-.5-1.2-.64-.45-.13-.97-.2-1.53-.2-.55 0-1.06.08-1.52.24-.47.17-.87.4-1.2.69-.33.29-.6.63-.78 1.03-.2.39-.29.83-.29 1.29h1.98c0-.26.05-.49.14-.69.09-.2.22-.38.38-.52.17-.14.36-.25.58-.33.22-.08.46-.12.73-.12.61 0 1.06.16 1.36.47.3.31.44.75.44 1.32 0 .27-.04.52-.12.74-.08.22-.21.41-.38.57-.17.16-.38.28-.63.37-.25.09-.55.13-.89.13H6.72v1.57H7.9c.34 0 .64.04.91.11.27.08.5.19.69.35.19.16.34.36.44.61.1.24.16.54.16.87 0 .62-.18 1.09-.53 1.42-.35.33-.84.49-1.45.49-.29 0-.56-.04-.8-.13-.24-.08-.44-.2-.61-.36-.17-.16-.3-.34-.39-.56-.09-.22-.14-.46-.14-.72H4.19c0 .55.11 1.03.32 1.45.21.42.5.77.86 1.05s.77.49 1.24.63.96.21 1.48.21c.57 0 1.09-.08 1.58-.23.49-.15.91-.38 1.26-.68.36-.3.64-.66.84-1.1.2-.43.3-.93.3-1.48 0-.29-.04-.58-.11-.86-.08-.25-.19-.51-.35-.76zm9.26 1.4c-.14-.28-.35-.53-.63-.74-.28-.21-.61-.39-1.01-.53s-.85-.27-1.35-.38c-.35-.07-.64-.15-.87-.23-.23-.08-.41-.16-.55-.25-.14-.09-.23-.19-.28-.3-.05-.11-.08-.24-.08-.39s.03-.28.09-.41c.06-.13.15-.25.27-.34.12-.1.27-.18.45-.24s.4-.09.64-.09c.25 0 .47.04.66.11.19.07.35.17.48.29.13.12.22.26.29.42.06.16.1.32.1.49h1.95c0-.39-.08-.75-.24-1.09-.16-.34-.39-.63-.69-.88-.3-.25-.66-.44-1.09-.59-.43-.15-.92-.22-1.46-.22-.51 0-.98.07-1.39.21-.41.14-.77.33-1.06.57-.29.24-.51.52-.67.84-.16.32-.23.65-.23 1.01s.08.68.23.96c.15.28.37.52.64.73.27.21.6.38.98.53.38.14.81.26 1.27.36.39.08.71.17.95.26s.43.19.57.29c.13.1.22.22.27.34.05.12.07.25.07.39 0 .32-.13.57-.4.77-.27.2-.66.29-1.17.29-.22 0-.43-.02-.64-.08-.21-.05-.4-.13-.56-.24-.17-.11-.3-.26-.41-.44-.11-.18-.17-.41-.18-.67h-1.89c0 .36.08.71.24 1.05.16.34.39.65.7.93.31.27.69.49 1.15.66.46.17.98.25 1.58.25.53 0 1.01-.06 1.44-.19.43-.13.8-.31 1.11-.54.31-.23.54-.51.71-.83.17-.32.25-.67.25-1.06-.02-.4-.09-.74-.24-1.02z" /></g>
<g id="timer-off"><path d="M19.04 4.55l-1.42 1.42C16.07 4.74 14.12 4 12 4c-1.83 0-3.53.55-4.95 1.48l1.46 1.46C9.53 6.35 10.73 6 12 6c3.87 0 7 3.13 7 7 0 1.27-.35 2.47-.94 3.49l1.45 1.45C20.45 16.53 21 14.83 21 13c0-2.12-.74-4.07-1.97-5.61l1.42-1.42-1.41-1.42zM15 1H9v2h6V1zm-4 8.44l2 2V8h-2v1.44zM3.02 4L1.75 5.27 4.5 8.03C3.55 9.45 3 11.16 3 13c0 4.97 4.02 9 9 9 1.84 0 3.55-.55 4.98-1.5l2.5 2.5 1.27-1.27-7.71-7.71L3.02 4zM12 20c-3.87 0-7-3.13-7-7 0-1.28.35-2.48.95-3.52l9.56 9.56c-1.03.61-2.23.96-3.51.96z" /></g>
<g id="tonality"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93s3.05-7.44 7-7.93v15.86zm2-15.86c1.03.13 2 .45 2.87.93H13v-.93zM13 7h5.24c.25.31.48.65.68 1H13V7zm0 3h6.74c.08.33.15.66.19 1H13v-1zm0 9.93V19h2.87c-.87.48-1.84.8-2.87.93zM18.24 17H13v-1h5.92c-.2.35-.43.69-.68 1zm1.5-3H13v-1h6.93c-.04.34-.11.67-.19 1z" /></g>
<g id="transform"><path d="M22 18v-2H8V4h2L7 1 4 4h2v2H2v2h4v8c0 1.1.9 2 2 2h8v2h-2l3 3 3-3h-2v-2h4zM10 8h6v6h2V8c0-1.1-.9-2-2-2h-6v2z" /></g>
<g id="tune"><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z" /></g>
<g id="view-comfy"><path d="M3 9h4V5H3v4zm0 5h4v-4H3v4zm5 0h4v-4H8v4zm5 0h4v-4h-4v4zM8 9h4V5H8v4zm5-4v4h4V5h-4zm5 9h4v-4h-4v4zM3 19h4v-4H3v4zm5 0h4v-4H8v4zm5 0h4v-4h-4v4zm5 0h4v-4h-4v4zm0-14v4h4V5h-4z" /></g>
<g id="view-compact"><path d="M3 19h6v-7H3v7zm7 0h12v-7H10v7zM3 5v6h19V5H3z" /></g>
<g id="vignette"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 15c-4.42 0-8-2.69-8-6s3.58-6 8-6 8 2.69 8 6-3.58 6-8 6z" /></g>
<g id="wb-auto"><path d="M6.85 12.65h2.3L8 9l-1.15 3.65zM22 7l-1.2 6.29L19.3 7h-1.6l-1.49 6.29L15 7h-.76C12.77 5.17 10.53 4 8 4c-4.42 0-8 3.58-8 8s3.58 8 8 8c3.13 0 5.84-1.81 7.15-4.43l.1.43H17l1.5-6.1L20 16h1.75l2.05-9H22zm-11.7 9l-.7-2H6.4l-.7 2H3.8L7 7h2l3.2 9h-1.9z" /></g>
<g id="wb-cloudy"><path d="M19.36 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96z" /></g>
<g id="wb-incandescent"><path d="M3.55 18.54l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8zM11 22.45h2V19.5h-2v2.95zM4 10.5H1v2h3v-2zm11-4.19V1.5H9v4.81C7.21 7.35 6 9.28 6 11.5c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19zm5 4.19v2h3v-2h-3zm-2.76 7.66l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4z" /></g>
<g id="wb-iridescent"><path d="M5 14.5h14v-6H5v6zM11 .55V3.5h2V.55h-2zm8.04 2.5l-1.79 1.79 1.41 1.41 1.8-1.79-1.42-1.41zM13 22.45V19.5h-2v2.95h2zm7.45-3.91l-1.8-1.79-1.41 1.41 1.79 1.8 1.42-1.42zM3.55 4.46l1.79 1.79 1.41-1.41-1.79-1.79-1.41 1.41zm1.41 15.49l1.79-1.8-1.41-1.41-1.79 1.79 1.41 1.42z" /></g>
<g id="wb-sunny"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z" /></g>
</defs></svg>
</iron-iconset-svg>
















<script>//~~WEBPATH~~/tf-imports/three.js
var tl=this;
function ul(a){function b(){}function c(d,k){this.x=d||0;this.y=k||0}function e(d,k,p,t){this._x=d||0;this._y=k||0;this._z=p||0;this._w=void 0!==t?t:1}function f(d,k,p){this.x=d||0;this.y=k||0;this.z=p||0}function g(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function h(d,k,p,t,x,y,B,F,G,I){Object.defineProperty(this,"id",{value:Wn++});this.uuid=mb.generateUUID();this.name="";this.image=void 0!==
d?d:h.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==k?k:h.DEFAULT_MAPPING;this.wrapS=void 0!==p?p:1001;this.wrapT=void 0!==t?t:1001;this.magFilter=void 0!==x?x:1006;this.minFilter=void 0!==y?y:1008;this.anisotropy=void 0!==G?G:1;this.format=void 0!==B?B:1023;this.type=void 0!==F?F:1009;this.offset=new c(0,0);this.repeat=new c(1,1);this.center=new c(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new g;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=
4;this.encoding=void 0!==I?I:3E3;this.version=0;this.onUpdate=null}function l(d,k,p,t){this.x=d||0;this.y=k||0;this.z=p||0;this.w=void 0!==t?t:1}function n(d,k,p){this.width=d;this.height=k;this.scissor=new l(0,0,d,k);this.scissorTest=!1;this.viewport=new l(0,0,d,k);p=p||{};this.texture=new h(void 0,void 0,p.wrapS,p.wrapT,p.magFilter,p.minFilter,p.format,p.type,p.anisotropy,p.encoding);this.texture.generateMipmaps=void 0!==p.generateMipmaps?p.generateMipmaps:!1;this.texture.minFilter=void 0!==p.minFilter?
p.minFilter:1006;this.depthBuffer=void 0!==p.depthBuffer?p.depthBuffer:!0;this.stencilBuffer=void 0!==p.stencilBuffer?p.stencilBuffer:!0;this.depthTexture=void 0!==p.depthTexture?p.depthTexture:null}function m(d,k,p){n.call(this,d,k,p);this.samples=4}function q(d,k,p){n.call(this,d,k,p)}function r(d,k,p,t,x,y,B,F,G,I,N,O){h.call(this,null,y,B,F,G,I,t,x,N,O);this.image={data:d,width:k,height:p};this.magFilter=void 0!==G?G:1003;this.minFilter=void 0!==I?I:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=
1}function v(d,k){this.min=void 0!==d?d:new f(Infinity,Infinity,Infinity);this.max=void 0!==k?k:new f(-Infinity,-Infinity,-Infinity)}function u(d,k){this.center=void 0!==d?d:new f;this.radius=void 0!==k?k:0}function w(d,k){this.normal=void 0!==d?d:new f(1,0,0);this.constant=void 0!==k?k:0}function z(d,k,p,t,x,y){this.planes=[void 0!==d?d:new w,void 0!==k?k:new w,void 0!==p?p:new w,void 0!==t?t:new w,void 0!==x?x:new w,void 0!==y?y:new w]}function A(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];
0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function E(d){var k={},p;for(p in d){k[p]={};for(var t in d[p]){var x=d[p][t];k[p][t]=x&&(x.isColor||x.isMatrix3||x.isMatrix4||x.isVector2||x.isVector3||x.isVector4||x.isTexture)?x.clone():Array.isArray(x)?x.slice():x}}return k}function C(d){for(var k={},p=0;p<d.length;p++){var t=E(d[p]),x;for(x in t)k[x]=t[x]}return k}function D(d,k,p){return void 0===k&&void 0===p?this.set(d):this.setRGB(d,
k,p)}function J(){function d(x,y){!1!==p&&(t(x,y),k.requestAnimationFrame(d))}var k=null,p=!1,t=null;return{start:function(){!0!==p&&null!==t&&(k.requestAnimationFrame(d),p=!0)},stop:function(){p=!1},setAnimationLoop:function(x){t=x},setContext:function(x){k=x}}}function M(d){function k(t,x){var y=t.array,B=t.dynamic?35048:35044,F=d.createBuffer();d.bindBuffer(x,F);d.bufferData(x,y,B);t.onUploadCallback();x=5126;y instanceof Float32Array?x=5126:y instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):
y instanceof Uint16Array?x=5123:y instanceof Int16Array?x=5122:y instanceof Uint32Array?x=5125:y instanceof Int32Array?x=5124:y instanceof Int8Array?x=5120:y instanceof Uint8Array&&(x=5121);return{buffer:F,type:x,bytesPerElement:y.BYTES_PER_ELEMENT,version:t.version}}var p=new WeakMap;return{get:function(t){t.isInterleavedBufferAttribute&&(t=t.data);return p.get(t)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var x=p.get(t);x&&(d.deleteBuffer(x.buffer),p.delete(t))},update:function(t,
x){t.isInterleavedBufferAttribute&&(t=t.data);var y=p.get(t);if(void 0===y)p.set(t,k(t,x));else if(y.version<t.version){var B=t,F=B.array,G=B.updateRange;d.bindBuffer(x,y.buffer);!1===B.dynamic?d.bufferData(x,F,35044):-1===G.count?d.bufferSubData(x,0,F):0===G.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(d.bufferSubData(x,G.offset*F.BYTES_PER_ELEMENT,F.subarray(G.offset,
G.offset+G.count)),G.count=-1);y.version=t.version}}}}function H(d,k,p,t,x,y){this.a=d;this.b=k;this.c=p;this.normal=t&&t.isVector3?t:new f;this.vertexNormals=Array.isArray(t)?t:[];this.color=x&&x.isColor?x:new D;this.vertexColors=Array.isArray(x)?x:[];this.materialIndex=void 0!==y?y:0}function K(d,k,p,t){this._x=d||0;this._y=k||0;this._z=p||0;this._order=t||K.DefaultOrder}function L(){this.mask=1}function P(){Object.defineProperty(this,"id",{value:Xn++});this.uuid=mb.generateUUID();this.name="";
this.type="Object3D";this.parent=null;this.children=[];this.up=P.DefaultUp.clone();var d=new f,k=new K,p=new e,t=new f(1,1,1);k.onChange(function(){p.setFromEuler(k,!1)});p.onChange(function(){k.setFromQuaternion(p,void 0,!1)});Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:d},rotation:{configurable:!0,enumerable:!0,value:k},quaternion:{configurable:!0,enumerable:!0,value:p},scale:{configurable:!0,enumerable:!0,value:t},modelViewMatrix:{value:new A},normalMatrix:{value:new g}});
this.matrix=new A;this.matrixWorld=new A;this.matrixAutoUpdate=P.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new L;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}}function S(){Object.defineProperty(this,"id",{value:Yn+=2});this.uuid=mb.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=
[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function aa(d,k,p){if(Array.isArray(d))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="";this.array=d;this.itemSize=k;this.count=void 0!==d?d.length/k:0;this.normalized=!0===p;this.dynamic=!1;this.updateRange=
{offset:0,count:-1};this.version=0}function R(d,k,p){aa.call(this,new Int8Array(d),k,p)}function Y(d,k,p){aa.call(this,new Uint8Array(d),k,p)}function W(d,k,p){aa.call(this,new Uint8ClampedArray(d),k,p)}function X(d,k,p){aa.call(this,new Int16Array(d),k,p)}function ja(d,k,p){aa.call(this,new Uint16Array(d),k,p)}function pa(d,k,p){aa.call(this,new Int32Array(d),k,p)}function ta(d,k,p){aa.call(this,new Uint32Array(d),k,p)}function da(d,k,p){aa.call(this,new Float32Array(d),k,p)}function Aa(d,k,p){aa.call(this,
new Float64Array(d),k,p)}function Ca(){this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function oa(d){if(0===d.length)return-Infinity;for(var k=d[0],p=1,t=d.length;p<t;++p)d[p]>k&&(k=d[p]);return k}function ka(){Object.defineProperty(this,"id",{value:Zn+=
2});this.uuid=mb.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity};this.userData={}}function Da(d,k,p,t,x,y){S.call(this);this.type="BoxGeometry";this.parameters={width:d,height:k,depth:p,widthSegments:t,heightSegments:x,depthSegments:y};this.fromBufferGeometry(new Oa(d,k,p,t,x,y));this.mergeVertices()}function Oa(d,k,p,t,x,y){function B(U,
Z,ca,la,ra,ia,va,ma,na,ya,xa){var Ga=ia/na,Na=va/ya,Ha=ia/2,Ma=va/2,Pa=ma/2;va=na+1;var Za=ya+1,ea=ia=0,ha,ua,Ba=new f;for(ua=0;ua<Za;ua++){var Ja=ua*Na-Ma;for(ha=0;ha<va;ha++)Ba[U]=(ha*Ga-Ha)*la,Ba[Z]=Ja*ra,Ba[ca]=Pa,I.push(Ba.x,Ba.y,Ba.z),Ba[U]=0,Ba[Z]=0,Ba[ca]=0<ma?1:-1,N.push(Ba.x,Ba.y,Ba.z),O.push(ha/na),O.push(1-ua/ya),ia+=1}for(ua=0;ua<ya;ua++)for(ha=0;ha<na;ha++)U=Q+ha+va*(ua+1),Z=Q+(ha+1)+va*(ua+1),ca=Q+(ha+1)+va*ua,G.push(Q+ha+va*ua,U,ca),G.push(U,Z,ca),ea+=6;F.addGroup(V,ea,xa);V+=ea;Q+=
ia}ka.call(this);this.type="BoxBufferGeometry";this.parameters={width:d,height:k,depth:p,widthSegments:t,heightSegments:x,depthSegments:y};var F=this;d=d||1;k=k||1;p=p||1;t=Math.floor(t)||1;x=Math.floor(x)||1;y=Math.floor(y)||1;var G=[],I=[],N=[],O=[],Q=0,V=0;B("z","y","x",-1,-1,p,k,d,y,x,0);B("z","y","x",1,-1,p,k,-d,y,x,1);B("x","z","y",1,1,d,p,k,t,y,2);B("x","z","y",1,-1,d,p,-k,t,y,3);B("x","y","z",1,-1,d,k,p,t,x,4);B("x","y","z",-1,-1,d,k,-p,t,x,5);this.setIndex(G);this.addAttribute("position",
new da(I,3));this.addAttribute("normal",new da(N,3));this.addAttribute("uv",new da(O,2))}function Ea(d,k,p,t){S.call(this);this.type="PlaneGeometry";this.parameters={width:d,height:k,widthSegments:p,heightSegments:t};this.fromBufferGeometry(new La(d,k,p,t));this.mergeVertices()}function La(d,k,p,t){ka.call(this);this.type="PlaneBufferGeometry";this.parameters={width:d,height:k,widthSegments:p,heightSegments:t};d=d||1;k=k||1;var x=d/2,y=k/2;p=Math.floor(p)||1;t=Math.floor(t)||1;var B=p+1,F=t+1,G=d/
p,I=k/t,N=[],O=[],Q=[],V=[];for(d=0;d<F;d++){var U=d*I-y;for(k=0;k<B;k++)O.push(k*G-x,-U,0),Q.push(0,0,1),V.push(k/p),V.push(1-d/t)}for(d=0;d<t;d++)for(k=0;k<p;k++)x=k+B*(d+1),y=k+1+B*(d+1),F=k+1+B*d,N.push(k+B*d,x,F),N.push(x,y,F);this.setIndex(N);this.addAttribute("position",new da(O,3));this.addAttribute("normal",new da(Q,3));this.addAttribute("uv",new da(V,2))}function Ka(){Object.defineProperty(this,"id",{value:$n++});this.uuid=mb.generateUUID();this.name="";this.type="Material";this.lights=
this.fog=!0;this.blending=1;this.side=0;this.vertexTangents=this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=
0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.visible=!0;this.userData={};this.needsUpdate=!0}function vb(d){Ka.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position \x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor \x3d vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=
this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;void 0!==d&&(void 0!==d.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(d))}function jc(d,k){this.origin=void 0!==d?d:new f;this.direction=void 0!==k?k:new f}function sb(d,
k,p){this.a=void 0!==d?d:new f;this.b=void 0!==k?k:new f;this.c=void 0!==p?p:new f}function tb(d){Ka.call(this);this.type="MeshBasicMaterial";this.color=new D(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=
!1;this.setValues(d)}function ac(d,k){P.call(this);this.type="Mesh";this.geometry=void 0!==d?d:new ka;this.material=void 0!==k?k:new tb({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function yd(d,k,p,t){function x(O,Q){k.buffers.color.setClear(O.r,O.g,O.b,Q,t)}var y=new D(0),B=0,F,G,I=null,N=0;return{getClearColor:function(){return y},setClearColor:function(O,Q){y.set(O);B=void 0!==Q?Q:1;x(y,B)},getClearAlpha:function(){return B},setClearAlpha:function(O){B=O;x(y,B)},render:function(O,
Q,V,U){Q=Q.background;V=d.vr;(V=V.getSession&&V.getSession())&&"additive"===V.environmentBlendMode&&(Q=null);null===Q?(x(y,B),I=null,N=0):Q&&Q.isColor&&(x(Q,1),U=!0,I=null,N=0);(d.autoClear||U)&&d.clear(d.autoClearColor,d.autoClearDepth,d.autoClearStencil);if(Q&&(Q.isCubeTexture||Q.isWebGLRenderTargetCube)){void 0===G&&(G=new ac(new Oa(1,1,1),new vb({type:"BackgroundCubeMaterial",uniforms:E(zd.cube.uniforms),vertexShader:zd.cube.vertexShader,fragmentShader:zd.cube.fragmentShader,side:1,depthTest:!1,
depthWrite:!1,fog:!1})),G.geometry.removeAttribute("normal"),G.geometry.removeAttribute("uv"),G.onBeforeRender=function(Z,ca,la){this.matrixWorld.copyPosition(la.matrixWorld)},Object.defineProperty(G.material,"map",{get:function(){return this.uniforms.tCube.value}}),p.update(G));U=Q.isWebGLRenderTargetCube?Q.texture:Q;G.material.uniforms.tCube.value=U;G.material.uniforms.tFlip.value=Q.isWebGLRenderTargetCube?1:-1;if(I!==Q||N!==U.version)G.material.needsUpdate=!0,I=Q,N=U.version;O.unshift(G,G.geometry,
G.material,0,0,null)}else if(Q&&Q.isTexture){void 0===F&&(F=new ac(new La(2,2),new vb({type:"BackgroundMaterial",uniforms:E(zd.background.uniforms),vertexShader:zd.background.vertexShader,fragmentShader:zd.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),F.geometry.removeAttribute("normal"),Object.defineProperty(F.material,"map",{get:function(){return this.uniforms.t2D.value}}),p.update(F));F.material.uniforms.t2D.value=Q;!0===Q.matrixAutoUpdate&&Q.updateMatrix();F.material.uniforms.uvTransform.value.copy(Q.matrix);
if(I!==Q||N!==Q.version)F.material.needsUpdate=!0,I=Q,N=Q.version;O.unshift(F,F.geometry,F.material,0,0,null)}}}}function Ce(d,k,p,t){var x;this.setMode=function(y){x=y};this.render=function(y,B){d.drawArrays(x,y,B);p.update(B,x)};this.renderInstances=function(y,B,F){if(t.isWebGL2)var G=d;else if(G=k.get("ANGLE_instanced_arrays"),null===G){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}G[t.isWebGL2?
"drawArraysInstanced":"drawArraysInstancedANGLE"](x,B,F,y.maxInstancedCount);p.update(F,x,y.maxInstancedCount)}}function nc(d,k,p){function t(ia){if("highp"===ia){if(0<d.getShaderPrecisionFormat(35633,36338).precision&&0<d.getShaderPrecisionFormat(35632,36338).precision)return"highp";ia="mediump"}return"mediump"===ia&&0<d.getShaderPrecisionFormat(35633,36337).precision&&0<d.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var x,y="undefined"!==typeof WebGL2RenderingContext&&d instanceof
WebGL2RenderingContext,B=void 0!==p.precision?p.precision:"highp",F=t(B);F!==B&&(console.warn("THREE.WebGLRenderer:",B,"not supported, using",F,"instead."),B=F);p=!0===p.logarithmicDepthBuffer;F=d.getParameter(34930);var G=d.getParameter(35660),I=d.getParameter(3379),N=d.getParameter(34076),O=d.getParameter(34921),Q=d.getParameter(36347),V=d.getParameter(36348),U=d.getParameter(36349),Z=0<G,ca=y||!!k.get("OES_texture_float"),la=Z&&ca,ra=y?d.getParameter(36183):0;return{isWebGL2:y,getMaxAnisotropy:function(){if(void 0!==
x)return x;var ia=k.get("EXT_texture_filter_anisotropic");return x=null!==ia?d.getParameter(ia.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:t,precision:B,logarithmicDepthBuffer:p,maxTextures:F,maxVertexTextures:G,maxTextureSize:I,maxCubemapSize:N,maxAttributes:O,maxVertexUniforms:Q,maxVaryings:V,maxFragmentUniforms:U,vertexTextures:Z,floatFragmentTextures:ca,floatVertexTextures:la,maxSamples:ra}}function id(){function d(){I.value!==t&&(I.value=t,I.needsUpdate=0<x);p.numPlanes=x;p.numIntersection=
0}function k(N,O,Q,V){var U=null!==N?N.length:0,Z=null;if(0!==U){Z=I.value;if(!0!==V||null===Z){V=Q+4*U;O=O.matrixWorldInverse;G.getNormalMatrix(O);if(null===Z||Z.length<V)Z=new Float32Array(V);for(V=0;V!==U;++V,Q+=4)F.copy(N[V]).applyMatrix4(O,G),F.normal.toArray(Z,Q),Z[Q+3]=F.constant}I.value=Z;I.needsUpdate=!0}p.numPlanes=U;return Z}var p=this,t=null,x=0,y=!1,B=!1,F=new w,G=new g,I={value:null,needsUpdate:!1};this.uniform=I;this.numIntersection=this.numPlanes=0;this.init=function(N,O,Q){var V=
0!==N.length||O||0!==x||y;y=O;t=k(N,Q,0);x=N.length;return V};this.beginShadows=function(){B=!0;k(null)};this.endShadows=function(){B=!1;d()};this.setState=function(N,O,Q,V,U,Z){if(!y||null===N||0===N.length||B&&!Q)B?k(null):d();else{Q=B?0:x;var ca=4*Q,la=U.clippingState||null;I.value=la;la=k(N,V,ca,Z);for(N=0;N!==ca;++N)la[N]=t[N];U.clippingState=la;this.numIntersection=O?this.numPlanes:0;this.numPlanes+=Q}}}function Ui(d){var k={};return{get:function(p){if(void 0!==k[p])return k[p];switch(p){case "WEBGL_depth_texture":var t=
d.getExtension("WEBGL_depth_texture")||d.getExtension("MOZ_WEBGL_depth_texture")||d.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":t=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":t=d.getExtension("WEBGL_compressed_texture_s3tc")||d.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
break;case "WEBGL_compressed_texture_pvrtc":t=d.getExtension("WEBGL_compressed_texture_pvrtc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:t=d.getExtension(p)}null===t&&console.warn("THREE.WebGLRenderer: "+p+" extension not supported.");return k[p]=t}}}function nf(d,k,p){function t(B){var F=B.target;B=x[F.id];null!==B.index&&k.remove(B.index);for(var G in B.attributes)k.remove(B.attributes[G]);F.removeEventListener("dispose",t);delete x[F.id];if(G=y[B.id])k.remove(G),delete y[B.id];
p.memory.geometries--}var x={},y={};return{get:function(B,F){var G=x[F.id];if(G)return G;F.addEventListener("dispose",t);F.isBufferGeometry?G=F:F.isGeometry&&(void 0===F._bufferGeometry&&(F._bufferGeometry=(new ka).setFromObject(B)),G=F._bufferGeometry);x[F.id]=G;p.memory.geometries++;return G},update:function(B){var F=B.index,G=B.attributes;null!==F&&k.update(F,34963);for(var I in G)k.update(G[I],34962);B=B.morphAttributes;for(I in B){F=B[I];G=0;for(var N=F.length;G<N;G++)k.update(F[G],34962)}},
getWireframeAttribute:function(B){var F=y[B.id];if(F)return F;F=[];var G=B.index,I=B.attributes;if(null!==G){G=G.array;I=0;for(var N=G.length;I<N;I+=3){var O=G[I+0],Q=G[I+1],V=G[I+2];F.push(O,Q,Q,V,V,O)}}else for(G=I.position.array,I=0,N=G.length/3-1;I<N;I+=3)O=I+0,Q=I+1,V=I+2,F.push(O,Q,Q,V,V,O);F=new (65535<oa(F)?ta:ja)(F,1);k.update(F,34963);return y[B.id]=F}}}function ao(d,k,p,t){var x,y,B;this.setMode=function(F){x=F};this.setIndex=function(F){y=F.type;B=F.bytesPerElement};this.render=function(F,
G){d.drawElements(x,G,y,F*B);p.update(G,x)};this.renderInstances=function(F,G,I){if(t.isWebGL2)var N=d;else if(N=k.get("ANGLE_instanced_arrays"),null===N){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}N[t.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](x,I,y,G*B,F.maxInstancedCount);p.update(I,x,F.maxInstancedCount)}}function bo(){var d={frame:0,calls:0,triangles:0,points:0,
lines:0};return{memory:{geometries:0,textures:0},render:d,programs:null,autoReset:!0,reset:function(){d.frame++;d.calls=0;d.triangles=0;d.points=0;d.lines=0},update:function(k,p,t){t=t||1;d.calls++;switch(p){case 4:d.triangles+=k/3*t;break;case 5:case 6:d.triangles+=t*(k-2);break;case 1:d.lines+=k/2*t;break;case 3:d.lines+=t*(k-1);break;case 2:d.lines+=t*k;break;case 0:d.points+=t*k;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p)}}}}function co(d,k){return Math.abs(k[1])-Math.abs(d[1])}
function eo(d){var k={},p=new Float32Array(8);return{update:function(t,x,y,B){var F=t.morphTargetInfluences,G=F.length;t=k[x.id];if(void 0===t){t=[];for(var I=0;I<G;I++)t[I]=[I,0];k[x.id]=t}var N=y.morphTargets&&x.morphAttributes.position;y=y.morphNormals&&x.morphAttributes.normal;for(I=0;I<G;I++){var O=t[I];0!==O[1]&&(N&&x.removeAttribute("morphTarget"+I),y&&x.removeAttribute("morphNormal"+I))}for(I=0;I<G;I++)O=t[I],O[0]=I,O[1]=F[I];t.sort(co);for(I=0;8>I;I++){if(O=t[I])if(F=O[0],G=O[1]){N&&x.addAttribute("morphTarget"+
I,N[F]);y&&x.addAttribute("morphNormal"+I,y[F]);p[I]=G;continue}p[I]=0}B.getUniforms().setValue(d,"morphTargetInfluences",p)}}}function fo(d,k){var p={};return{update:function(t){var x=k.render.frame,y=t.geometry,B=d.get(t,y);p[B.id]!==x&&(y.isGeometry&&B.updateFromObject(t),d.update(B),p[B.id]=x);return B},dispose:function(){p={}}}}function Pd(d,k,p,t,x,y,B,F,G,I){d=void 0!==d?d:[];h.call(this,d,void 0!==k?k:301,p,t,x,y,void 0!==B?B:1022,F,G,I);this.flipY=!1}function of(d,k,p,t){h.call(this,null);
this.image={data:d,width:k,height:p,depth:t};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1}function pf(d,k,p,t){h.call(this,null);this.image={data:d,width:k,height:p,depth:t};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1}function qf(d,k,p){var t=d[0];if(0>=t||0<t)return d;var x=k*p,y=wl[x];void 0===y&&(y=new Float32Array(x),wl[x]=y);if(0!==k)for(t.toArray(y,0),t=1,x=0;t!==k;++t)x+=p,d[t].toArray(y,x);return y}function gc(d,
k){if(d.length!==k.length)return!1;for(var p=0,t=d.length;p<t;p++)if(d[p]!==k[p])return!1;return!0}function vc(d,k){for(var p=0,t=k.length;p<t;p++)d[p]=k[p]}function xl(d,k){var p=yl[k];void 0===p&&(p=new Int32Array(k),yl[k]=p);for(var t=0;t!==k;++t)p[t]=d.allocateTextureUnit();return p}function go(d,k){var p=this.cache;p[0]!==k&&(d.uniform1f(this.addr,k),p[0]=k)}function ho(d,k){var p=this.cache;p[0]!==k&&(d.uniform1i(this.addr,k),p[0]=k)}function io(d,k){var p=this.cache;if(void 0!==k.x){if(p[0]!==
k.x||p[1]!==k.y)d.uniform2f(this.addr,k.x,k.y),p[0]=k.x,p[1]=k.y}else gc(p,k)||(d.uniform2fv(this.addr,k),vc(p,k))}function jo(d,k){var p=this.cache;if(void 0!==k.x){if(p[0]!==k.x||p[1]!==k.y||p[2]!==k.z)d.uniform3f(this.addr,k.x,k.y,k.z),p[0]=k.x,p[1]=k.y,p[2]=k.z}else if(void 0!==k.r){if(p[0]!==k.r||p[1]!==k.g||p[2]!==k.b)d.uniform3f(this.addr,k.r,k.g,k.b),p[0]=k.r,p[1]=k.g,p[2]=k.b}else gc(p,k)||(d.uniform3fv(this.addr,k),vc(p,k))}function ko(d,k){var p=this.cache;if(void 0!==k.x){if(p[0]!==k.x||
p[1]!==k.y||p[2]!==k.z||p[3]!==k.w)d.uniform4f(this.addr,k.x,k.y,k.z,k.w),p[0]=k.x,p[1]=k.y,p[2]=k.z,p[3]=k.w}else gc(p,k)||(d.uniform4fv(this.addr,k),vc(p,k))}function lo(d,k){var p=this.cache,t=k.elements;void 0===t?gc(p,k)||(d.uniformMatrix2fv(this.addr,!1,k),vc(p,k)):gc(p,t)||(zl.set(t),d.uniformMatrix2fv(this.addr,!1,zl),vc(p,t))}function mo(d,k){var p=this.cache,t=k.elements;void 0===t?gc(p,k)||(d.uniformMatrix3fv(this.addr,!1,k),vc(p,k)):gc(p,t)||(Al.set(t),d.uniformMatrix3fv(this.addr,!1,
Al),vc(p,t))}function no(d,k){var p=this.cache,t=k.elements;void 0===t?gc(p,k)||(d.uniformMatrix4fv(this.addr,!1,k),vc(p,k)):gc(p,t)||(Bl.set(t),d.uniformMatrix4fv(this.addr,!1,Bl),vc(p,t))}function oo(d,k,p){var t=this.cache,x=p.allocateTextureUnit();t[0]!==x&&(d.uniform1i(this.addr,x),t[0]=x);p.safeSetTexture2D(k||Cl,x)}function po(d,k,p){var t=this.cache,x=p.allocateTextureUnit();t[0]!==x&&(d.uniform1i(this.addr,x),t[0]=x);p.setTexture2DArray(k||qo,x)}function ro(d,k,p){var t=this.cache,x=p.allocateTextureUnit();
t[0]!==x&&(d.uniform1i(this.addr,x),t[0]=x);p.setTexture3D(k||so,x)}function to(d,k,p){var t=this.cache,x=p.allocateTextureUnit();t[0]!==x&&(d.uniform1i(this.addr,x),t[0]=x);p.safeSetTextureCube(k||Dl,x)}function El(d,k){var p=this.cache;gc(p,k)||(d.uniform2iv(this.addr,k),vc(p,k))}function Fl(d,k){var p=this.cache;gc(p,k)||(d.uniform3iv(this.addr,k),vc(p,k))}function Gl(d,k){var p=this.cache;gc(p,k)||(d.uniform4iv(this.addr,k),vc(p,k))}function uo(d){switch(d){case 5126:return go;case 35664:return io;
case 35665:return jo;case 35666:return ko;case 35674:return lo;case 35675:return mo;case 35676:return no;case 35678:case 36198:return oo;case 35679:return ro;case 35680:return to;case 36289:return po;case 5124:case 35670:return ho;case 35667:case 35671:return El;case 35668:case 35672:return Fl;case 35669:case 35673:return Gl}}function vo(d,k){var p=this.cache;gc(p,k)||(d.uniform1fv(this.addr,k),vc(p,k))}function wo(d,k){var p=this.cache;gc(p,k)||(d.uniform1iv(this.addr,k),vc(p,k))}function xo(d,k){var p=
this.cache;k=qf(k,this.size,2);gc(p,k)||(d.uniform2fv(this.addr,k),this.updateCache(k))}function yo(d,k){var p=this.cache;k=qf(k,this.size,3);gc(p,k)||(d.uniform3fv(this.addr,k),this.updateCache(k))}function zo(d,k){var p=this.cache;k=qf(k,this.size,4);gc(p,k)||(d.uniform4fv(this.addr,k),this.updateCache(k))}function Ao(d,k){var p=this.cache;k=qf(k,this.size,4);gc(p,k)||(d.uniformMatrix2fv(this.addr,!1,k),this.updateCache(k))}function Bo(d,k){var p=this.cache;k=qf(k,this.size,9);gc(p,k)||(d.uniformMatrix3fv(this.addr,
!1,k),this.updateCache(k))}function Co(d,k){var p=this.cache;k=qf(k,this.size,16);gc(p,k)||(d.uniformMatrix4fv(this.addr,!1,k),this.updateCache(k))}function Do(d,k,p){var t=this.cache,x=k.length,y=xl(p,x);!1===gc(t,y)&&(d.uniform1iv(this.addr,y),vc(t,y));for(d=0;d!==x;++d)p.safeSetTexture2D(k[d]||Cl,y[d])}function Eo(d,k,p){var t=this.cache,x=k.length,y=xl(p,x);!1===gc(t,y)&&(d.uniform1iv(this.addr,y),vc(t,y));for(d=0;d!==x;++d)p.safeSetTextureCube(k[d]||Dl,y[d])}function Fo(d){switch(d){case 5126:return vo;
case 35664:return xo;case 35665:return yo;case 35666:return zo;case 35674:return Ao;case 35675:return Bo;case 35676:return Co;case 35678:return Do;case 35680:return Eo;case 5124:case 35670:return wo;case 35667:case 35671:return El;case 35668:case 35672:return Fl;case 35669:case 35673:return Gl}}function Go(d,k,p){this.id=d;this.addr=p;this.cache=[];this.setValue=uo(k.type)}function Hl(d,k,p){this.id=d;this.addr=p;this.cache=[];this.size=k.size;this.setValue=Fo(k.type)}function Il(d){this.id=d;this.seq=
[];this.map={}}function ge(d,k){this.seq=[];this.map={};for(var p=d.getProgramParameter(k,35718),t=0;t<p;++t){var x=d.getActiveUniform(k,t),y=x;x=d.getUniformLocation(k,x.name);var B=this,F=y.name,G=F.length;for(Yi.lastIndex=0;;){var I=Yi.exec(F),N=Yi.lastIndex,O=I[1],Q=I[3];"]"===I[2]&&(O|=0);if(void 0===Q||"["===Q&&N+2===G){F=B;y=void 0===Q?new Go(O,y,x):new Hl(O,y,x);F.seq.push(y);F.map[y.id]=y;break}else Q=B.map[O],void 0===Q&&(Q=new Il(O),O=B,B=Q,O.seq.push(B),O.map[B.id]=B),B=Q}}}function Ho(d){d=
d.split("\n");for(var k=0;k<d.length;k++)d[k]=k+1+": "+d[k];return d.join("\n")}function Jl(d,k,p,t){var x=d.createShader(k);d.shaderSource(x,p);d.compileShader(x);!0===t&&(!1===d.getShaderParameter(x,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==d.getShaderInfoLog(x)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===k?"vertex":"fragment",d.getShaderInfoLog(x),Ho(p)));return x}function Kl(d){switch(d){case 3E3:return["Linear","( value )"];case 3001:return["sRGB",
"( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+d);}}function Hh(d,k){k=Kl(k);return"vec4 "+d+"( vec4 value ) { return "+k[0]+"ToLinear"+k[1]+"; }"}function Io(d,k){k=Kl(k);return"vec4 "+d+"( vec4 value ) { return LinearTo"+k[0]+k[1]+"; }"}function Jo(d,k){switch(k){case 1:k=
"Linear";break;case 2:k="Reinhard";break;case 3:k="Uncharted2";break;case 4:k="OptimizedCineon";break;case 5:k="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+k);}return"vec3 "+d+"( vec3 color ) { return "+k+"ToneMapping( color ); }"}function Ko(d,k,p){d=d||{};return[d.derivatives||k.envMapCubeUV||k.bumpMap||k.normalMap&&!k.objectSpaceNormalMap||k.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(d.fragDepth||k.logarithmicDepthBuffer)&&p.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":
"",d.drawBuffers&&p.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(d.shaderTextureLOD||k.envMap)&&p.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xg).join("\n")}function Lo(d){var k=[],p;for(p in d){var t=d[p];!1!==t&&k.push("#define "+p+" "+t)}return k.join("\n")}function xg(d){return""!==d}function Ll(d,k){return d.replace(/NUM_DIR_LIGHTS/g,k.numDirLights).replace(/NUM_SPOT_LIGHTS/g,k.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,
k.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,k.numPointLights).replace(/NUM_HEMI_LIGHTS/g,k.numHemiLights)}function Ml(d,k){return d.replace(/NUM_CLIPPING_PLANES/g,k.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,k.numClippingPlanes-k.numClipIntersection)}function Zi(d){return d.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(k,p){k=Bb[p];if(void 0===k)throw Error("Can not resolve #include \x3c"+p+"\x3e");return Zi(k)})}function Nl(d){return d.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
function(k,p,t,x){k="";for(p=parseInt(p);p<parseInt(t);p++)k+=x.replace(/\[ i \]/g,"[ "+p+" ]");return k})}function Mo(d,k,p,t,x,y,B,F){var G=d.context,I=t.defines,N=x.vertexShader,O=x.fragmentShader,Q="SHADOWMAP_TYPE_BASIC";1===y.shadowMapType?Q="SHADOWMAP_TYPE_PCF":2===y.shadowMapType&&(Q="SHADOWMAP_TYPE_PCF_SOFT");var V="ENVMAP_TYPE_CUBE",U="ENVMAP_MODE_REFLECTION",Z="ENVMAP_BLENDING_MULTIPLY";if(y.envMap){switch(t.envMap.mapping){case 301:case 302:V="ENVMAP_TYPE_CUBE";break;case 306:case 307:V=
"ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:V="ENVMAP_TYPE_EQUIREC";break;case 305:V="ENVMAP_TYPE_SPHERE"}switch(t.envMap.mapping){case 302:case 304:U="ENVMAP_MODE_REFRACTION"}switch(t.combine){case 0:Z="ENVMAP_BLENDING_MULTIPLY";break;case 1:Z="ENVMAP_BLENDING_MIX";break;case 2:Z="ENVMAP_BLENDING_ADD"}}var ca=0<d.gammaFactor?d.gammaFactor:1,la=B.isWebGL2?"":Ko(t.extensions,y,k),ra=Lo(I),ia=G.createProgram();t.isRawShaderMaterial?(I=[ra].filter(xg).join("\n"),0<I.length&&(I+="\n"),k=[la,ra].filter(xg).join("\n"),
0<k.length&&(k+="\n")):(I=["precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+x.name,ra,y.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+ca,"#define MAX_BONES "+y.maxBones,y.useFog&&y.fog?"#define USE_FOG":"",y.useFog&&y.fogExp?"#define FOG_EXP2":"",y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+U:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":
"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.normalMap&&y.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",y.displacementMap&&y.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexTangents?"#define USE_TANGENT":"",y.vertexColors?"#define USE_COLOR":"",y.flatShading?"#define FLAT_SHADED":
"",y.skinning?"#define USE_SKINNING":"",y.useVertexTexture?"#define BONE_TEXTURE":"",y.morphTargets?"#define USE_MORPHTARGETS":"",y.morphNormals&&!1===y.flatShading?"#define USE_MORPHNORMALS":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"",y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+Q:"",y.sizeAttenuation?"#define USE_SIZEATTENUATION":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&(B.isWebGL2||k.get("EXT_frag_depth"))?
"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;",
"\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(xg).join("\n"),k=[la,"precision "+
y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+x.name,ra,y.alphaTest?"#define ALPHATEST "+y.alphaTest+(y.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+ca,y.useFog&&y.fog?"#define USE_FOG":"",y.useFog&&y.fogExp?"#define FOG_EXP2":"",y.map?"#define USE_MAP":"",y.matcap?"#define USE_MATCAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+V:"",y.envMap?"#define "+U:"",y.envMap?"#define "+Z:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",
y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.normalMap&&y.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexTangents?"#define USE_TANGENT":"",y.vertexColors?"#define USE_COLOR":"",y.gradientMap?"#define USE_GRADIENTMAP":"",y.flatShading?"#define FLAT_SHADED":
"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"",y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+Q:"",y.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",y.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&(B.isWebGL2||k.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",y.envMap&&(B.isWebGL2||k.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":
"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==y.toneMapping?"#define TONE_MAPPING":"",0!==y.toneMapping?Bb.tonemapping_pars_fragment:"",0!==y.toneMapping?Jo("toneMapping",y.toneMapping):"",y.dithering?"#define DITHERING":"",y.outputEncoding||y.mapEncoding||y.matcapEncoding||y.envMapEncoding||y.emissiveMapEncoding?Bb.encodings_pars_fragment:"",y.mapEncoding?Hh("mapTexelToLinear",y.mapEncoding):"",y.matcapEncoding?Hh("matcapTexelToLinear",y.matcapEncoding):"",y.envMapEncoding?Hh("envMapTexelToLinear",
y.envMapEncoding):"",y.emissiveMapEncoding?Hh("emissiveMapTexelToLinear",y.emissiveMapEncoding):"",y.outputEncoding?Io("linearToOutputTexel",y.outputEncoding):"",y.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(xg).join("\n"));N=Zi(N);N=Ll(N,y);N=Ml(N,y);O=Zi(O);O=Ll(O,y);O=Ml(O,y);N=Nl(N);O=Nl(O);B.isWebGL2&&!t.isRawShaderMaterial&&(B=!1,Q=/^\s*#version\s+300\s+es\s*\n/,t.isShaderMaterial&&null!==N.match(Q)&&null!==O.match(Q)&&(B=!0,N=N.replace(Q,""),O=O.replace(Q,"")),I="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+
I,k=["#version 300 es\n\n#define varying in",B?"":"out highp vec4 pc_fragColor;",B?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+k);O=k+O;N=Jl(G,35633,I+N,d.debug.checkShaderErrors);O=Jl(G,35632,O,d.debug.checkShaderErrors);G.attachShader(ia,N);G.attachShader(ia,O);void 0!==t.index0AttributeName?G.bindAttribLocation(ia,0,t.index0AttributeName):!0===y.morphTargets&&G.bindAttribLocation(ia,0,"position");G.linkProgram(ia);if(d.debug.checkShaderErrors){d=G.getProgramInfoLog(ia).trim();y=G.getShaderInfoLog(N).trim();B=G.getShaderInfoLog(O).trim();V=Q=!0;if(!1===G.getProgramParameter(ia,35714))Q=!1,console.error("THREE.WebGLProgram: shader error: ",
G.getError(),"35715",G.getProgramParameter(ia,35715),"gl.getProgramInfoLog",d,y,B);else if(""!==d)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",d);else if(""===y||""===B)V=!1;V&&(this.diagnostics={runnable:Q,material:t,programLog:d,vertexShader:{log:y,prefix:I},fragmentShader:{log:B,prefix:k}})}G.deleteShader(N);G.deleteShader(O);var va;this.getUniforms=function(){void 0===va&&(va=new ge(G,ia,F));return va};var ma;this.getAttributes=function(){if(void 0===ma){for(var na={},ya=G.getProgramParameter(ia,
35721),xa=0;xa<ya;xa++){var Ga=G.getActiveAttrib(ia,xa).name;na[Ga]=G.getAttribLocation(ia,Ga)}ma=na}return ma};this.destroy=function(){G.deleteProgram(ia);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.name=x.name;this.id=No++;this.code=
p;this.usedTimes=1;this.program=ia;this.vertexShader=N;this.fragmentShader=O;return this}function Oo(d,k,p,t){function x(G,I){if(G)G.isTexture?N=G.encoding:G.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),N=G.texture.encoding);else var N=3E3;3E3===N&&I&&(N=3007);return N}var y=[],B={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",
MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},F="precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");
this.getParameters=function(G,I,N,O,Q,V,U){var Z=B[G.type];if(U.isSkinnedMesh){var ca=U.skeleton.bones;if(p.floatVertexTextures)ca=1024;else{var la=Math.min(Math.floor((p.maxVertexUniforms-20)/4),ca.length);la<ca.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+ca.length+" bones. This GPU supports "+la+"."),ca=0):ca=la}}else ca=0;la=p.precision;null!==G.precision&&(la=p.getMaxPrecision(G.precision),la!==G.precision&&console.warn("THREE.WebGLProgram.getParameters:",G.precision,"not supported, using",
la,"instead."));var ra=d.getRenderTarget();return{shaderID:Z,precision:la,supportsVertexTextures:p.vertexTextures,outputEncoding:x(ra?ra.texture:null,d.gammaOutput),map:!!G.map,mapEncoding:x(G.map,d.gammaInput),matcap:!!G.matcap,matcapEncoding:x(G.matcap,d.gammaInput),envMap:!!G.envMap,envMapMode:G.envMap&&G.envMap.mapping,envMapEncoding:x(G.envMap,d.gammaInput),envMapCubeUV:!!G.envMap&&(306===G.envMap.mapping||307===G.envMap.mapping),lightMap:!!G.lightMap,aoMap:!!G.aoMap,emissiveMap:!!G.emissiveMap,
emissiveMapEncoding:x(G.emissiveMap,d.gammaInput),bumpMap:!!G.bumpMap,normalMap:!!G.normalMap,objectSpaceNormalMap:1===G.normalMapType,displacementMap:!!G.displacementMap,roughnessMap:!!G.roughnessMap,metalnessMap:!!G.metalnessMap,specularMap:!!G.specularMap,alphaMap:!!G.alphaMap,gradientMap:!!G.gradientMap,combine:G.combine,vertexTangents:G.normalMap&&G.vertexTangents,vertexColors:G.vertexColors,fog:!!O,useFog:G.fog,fogExp:O&&O.isFogExp2,flatShading:G.flatShading,sizeAttenuation:G.sizeAttenuation,
logarithmicDepthBuffer:p.logarithmicDepthBuffer,skinning:G.skinning&&0<ca,maxBones:ca,useVertexTexture:p.floatVertexTextures,morphTargets:G.morphTargets,morphNormals:G.morphNormals,maxMorphTargets:d.maxMorphTargets,maxMorphNormals:d.maxMorphNormals,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numClippingPlanes:Q,numClipIntersection:V,dithering:G.dithering,shadowMapEnabled:d.shadowMap.enabled&&
U.receiveShadow&&0<N.length,shadowMapType:d.shadowMap.type,toneMapping:d.toneMapping,physicallyCorrectLights:d.physicallyCorrectLights,premultipliedAlpha:G.premultipliedAlpha,alphaTest:G.alphaTest,doubleSided:2===G.side,flipSided:1===G.side,depthPacking:void 0!==G.depthPacking?G.depthPacking:!1}};this.getProgramCode=function(G,I){var N=[];I.shaderID?N.push(I.shaderID):(N.push(G.fragmentShader),N.push(G.vertexShader));if(void 0!==G.defines)for(var O in G.defines)N.push(O),N.push(G.defines[O]);for(O=
0;O<F.length;O++)N.push(I[F[O]]);N.push(G.onBeforeCompile.toString());N.push(d.gammaOutput);N.push(d.gammaFactor);return N.join()};this.acquireProgram=function(G,I,N,O){for(var Q,V=0,U=y.length;V<U;V++){var Z=y[V];if(Z.code===O){Q=Z;++Q.usedTimes;break}}void 0===Q&&(Q=new Mo(d,k,O,G,I,N,p,t),y.push(Q));return Q};this.releaseProgram=function(G){0===--G.usedTimes&&(y[y.indexOf(G)]=y[y.length-1],y.pop(),G.destroy())};this.programs=y}function Po(){var d=new WeakMap;return{get:function(k){var p=d.get(k);
void 0===p&&(p={},d.set(k,p));return p},remove:function(k){d.delete(k)},update:function(k,p,t){d.get(k)[p]=t},dispose:function(){d=new WeakMap}}}function Qo(d,k){return d.groupOrder!==k.groupOrder?d.groupOrder-k.groupOrder:d.renderOrder!==k.renderOrder?d.renderOrder-k.renderOrder:d.program!==k.program?d.program.id-k.program.id:d.material.id!==k.material.id?d.material.id-k.material.id:d.z!==k.z?d.z-k.z:d.id-k.id}function Ro(d,k){return d.groupOrder!==k.groupOrder?d.groupOrder-k.groupOrder:d.renderOrder!==
k.renderOrder?d.renderOrder-k.renderOrder:d.z!==k.z?k.z-d.z:d.id-k.id}function Ol(){function d(B,F,G,I,N,O){var Q=k[p];void 0===Q?(Q={id:B.id,object:B,geometry:F,material:G,program:G.program||y,groupOrder:I,renderOrder:B.renderOrder,z:N,group:O},k[p]=Q):(Q.id=B.id,Q.object=B,Q.geometry=F,Q.material=G,Q.program=G.program||y,Q.groupOrder=I,Q.renderOrder=B.renderOrder,Q.z=N,Q.group=O);p++;return Q}var k=[],p=0,t=[],x=[],y={id:-1};return{opaque:t,transparent:x,init:function(){p=0;t.length=0;x.length=
0},push:function(B,F,G,I,N,O){B=d(B,F,G,I,N,O);(!0===G.transparent?x:t).push(B)},unshift:function(B,F,G,I,N,O){B=d(B,F,G,I,N,O);(!0===G.transparent?x:t).unshift(B)},sort:function(){1<t.length&&t.sort(Qo);1<x.length&&x.sort(Ro)}}}function So(){function d(p){p=p.target;p.removeEventListener("dispose",d);delete k[p.id]}var k={};return{get:function(p,t){var x=k[p.id];if(void 0===x){var y=new Ol;k[p.id]={};k[p.id][t.id]=y;p.addEventListener("dispose",d)}else y=x[t.id],void 0===y&&(y=new Ol,x[t.id]=y);
return y},dispose:function(){k={}}}}function To(){var d={};return{get:function(k){if(void 0!==d[k.id])return d[k.id];switch(k.type){case "DirectionalLight":var p={direction:new f,color:new D,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new c};break;case "SpotLight":p={position:new f,direction:new f,color:new D,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new c};break;case "PointLight":p={position:new f,color:new D,distance:0,decay:0,shadow:!1,
shadowBias:0,shadowRadius:1,shadowMapSize:new c,shadowCameraNear:1,shadowCameraFar:1E3};break;case "HemisphereLight":p={direction:new f,skyColor:new D,groundColor:new D};break;case "RectAreaLight":p={color:new D,position:new f,halfWidth:new f,halfHeight:new f}}return d[k.id]=p}}}function Uo(){for(var d=new To,k={id:Vo++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],
directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},p=0;9>p;p++)k.probe.push(new f);var t=new f,x=new A,y=new A;return{setup:function(B,F,G){for(var I=0,N=0,O=0,Q=0;9>Q;Q++)k.probe[Q].set(0,0,0);var V=0,U=0,Z=0,ca=0,la=0;G=G.matrixWorldInverse;Q=0;for(var ra=B.length;Q<ra;Q++){var ia=B[Q],va=ia.color,ma=ia.intensity,na=ia.distance,ya=ia.shadow&&ia.shadow.map?ia.shadow.map.texture:null;if(ia.isAmbientLight)I+=
va.r*ma,N+=va.g*ma,O+=va.b*ma;else if(ia.isLightProbe)for(ya=0;9>ya;ya++)k.probe[ya].addScaledVector(ia.sh.coefficients[ya],ma);else if(ia.isDirectionalLight){var xa=d.get(ia);xa.color.copy(ia.color).multiplyScalar(ia.intensity);xa.direction.setFromMatrixPosition(ia.matrixWorld);t.setFromMatrixPosition(ia.target.matrixWorld);xa.direction.sub(t);xa.direction.transformDirection(G);if(xa.shadow=ia.castShadow)ma=ia.shadow,xa.shadowBias=ma.bias,xa.shadowRadius=ma.radius,xa.shadowMapSize=ma.mapSize;k.directionalShadowMap[V]=
ya;k.directionalShadowMatrix[V]=ia.shadow.matrix;k.directional[V]=xa;V++}else if(ia.isSpotLight){xa=d.get(ia);xa.position.setFromMatrixPosition(ia.matrixWorld);xa.position.applyMatrix4(G);xa.color.copy(va).multiplyScalar(ma);xa.distance=na;xa.direction.setFromMatrixPosition(ia.matrixWorld);t.setFromMatrixPosition(ia.target.matrixWorld);xa.direction.sub(t);xa.direction.transformDirection(G);xa.coneCos=Math.cos(ia.angle);xa.penumbraCos=Math.cos(ia.angle*(1-ia.penumbra));xa.decay=ia.decay;if(xa.shadow=
ia.castShadow)ma=ia.shadow,xa.shadowBias=ma.bias,xa.shadowRadius=ma.radius,xa.shadowMapSize=ma.mapSize;k.spotShadowMap[Z]=ya;k.spotShadowMatrix[Z]=ia.shadow.matrix;k.spot[Z]=xa;Z++}else if(ia.isRectAreaLight)xa=d.get(ia),xa.color.copy(va).multiplyScalar(ma),xa.position.setFromMatrixPosition(ia.matrixWorld),xa.position.applyMatrix4(G),y.identity(),x.copy(ia.matrixWorld),x.premultiply(G),y.extractRotation(x),xa.halfWidth.set(.5*ia.width,0,0),xa.halfHeight.set(0,.5*ia.height,0),xa.halfWidth.applyMatrix4(y),
xa.halfHeight.applyMatrix4(y),k.rectArea[ca]=xa,ca++;else if(ia.isPointLight){xa=d.get(ia);xa.position.setFromMatrixPosition(ia.matrixWorld);xa.position.applyMatrix4(G);xa.color.copy(ia.color).multiplyScalar(ia.intensity);xa.distance=ia.distance;xa.decay=ia.decay;if(xa.shadow=ia.castShadow)ma=ia.shadow,xa.shadowBias=ma.bias,xa.shadowRadius=ma.radius,xa.shadowMapSize=ma.mapSize,xa.shadowCameraNear=ma.camera.near,xa.shadowCameraFar=ma.camera.far;k.pointShadowMap[U]=ya;k.pointShadowMatrix[U]=ia.shadow.matrix;
k.point[U]=xa;U++}else ia.isHemisphereLight&&(xa=d.get(ia),xa.direction.setFromMatrixPosition(ia.matrixWorld),xa.direction.transformDirection(G),xa.direction.normalize(),xa.skyColor.copy(ia.color).multiplyScalar(ma),xa.groundColor.copy(ia.groundColor).multiplyScalar(ma),k.hemi[la]=xa,la++)}k.ambient[0]=I;k.ambient[1]=N;k.ambient[2]=O;k.directional.length=V;k.spot.length=Z;k.rectArea.length=ca;k.point.length=U;k.hemi.length=la;k.hash.stateID=k.id;k.hash.directionalLength=V;k.hash.pointLength=U;k.hash.spotLength=
Z;k.hash.rectAreaLength=ca;k.hash.hemiLength=la;k.hash.shadowsLength=F.length},state:k}}function Pl(){var d=new Uo,k=[],p=[];return{init:function(){k.length=0;p.length=0},state:{lightsArray:k,shadowsArray:p,lights:d},setupLights:function(t){d.setup(k,p,t)},pushLight:function(t){k.push(t)},pushShadow:function(t){p.push(t)}}}function Wo(){function d(p){p=p.target;p.removeEventListener("dispose",d);delete k[p.id]}var k={};return{get:function(p,t){if(void 0===k[p.id]){var x=new Pl;k[p.id]={};k[p.id][t.id]=
x;p.addEventListener("dispose",d)}else void 0===k[p.id][t.id]?(x=new Pl,k[p.id][t.id]=x):x=k[p.id][t.id];return x},dispose:function(){k={}}}}function he(d){Ka.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(d)}function ie(d){Ka.call(this);this.type="MeshDistanceMaterial";
this.referencePosition=new f;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(d)}function Ql(d,k,p){function t(na,ya,xa,Ga,Na,Ha){var Ma=na.geometry;var Pa=O;var Za=na.customDepthMaterial;xa&&(Pa=Q,Za=na.customDistanceMaterial);Za?Pa=Za:(Za=!1,ya.morphTargets&&(Ma&&Ma.isBufferGeometry?Za=Ma.morphAttributes&&Ma.morphAttributes.position&&
0<Ma.morphAttributes.position.length:Ma&&Ma.isGeometry&&(Za=Ma.morphTargets&&0<Ma.morphTargets.length)),na.isSkinnedMesh&&!1===ya.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",na),na=na.isSkinnedMesh&&ya.skinning,Ma=0,Za&&(Ma|=1),na&&(Ma|=2),Pa=Pa[Ma]);d.localClippingEnabled&&!0===ya.clipShadows&&0!==ya.clippingPlanes.length&&(Ma=Pa.uuid,Za=ya.uuid,na=V[Ma],void 0===na&&(na={},V[Ma]=na),Ma=na[Za],void 0===Ma&&(Ma=Pa.clone(),na[Za]=Ma),Pa=Ma);
Pa.visible=ya.visible;Pa.wireframe=ya.wireframe;Pa.side=null!=ya.shadowSide?ya.shadowSide:U[ya.side];Pa.clipShadows=ya.clipShadows;Pa.clippingPlanes=ya.clippingPlanes;Pa.clipIntersection=ya.clipIntersection;Pa.wireframeLinewidth=ya.wireframeLinewidth;Pa.linewidth=ya.linewidth;xa&&Pa.isMeshDistanceMaterial&&(Pa.referencePosition.copy(Ga),Pa.nearDistance=Na,Pa.farDistance=Ha);return Pa}function x(na,ya,xa,Ga){if(!1!==na.visible){if(na.layers.test(ya.layers)&&(na.isMesh||na.isLine||na.isPoints)&&na.castShadow&&
(!na.frustumCulled||y.intersectsObject(na))){na.modelViewMatrix.multiplyMatrices(xa.matrixWorldInverse,na.matrixWorld);var Na=k.update(na),Ha=na.material;if(Array.isArray(Ha))for(var Ma=Na.groups,Pa=0,Za=Ma.length;Pa<Za;Pa++){var ea=Ma[Pa],ha=Ha[ea.materialIndex];ha&&ha.visible&&(ha=t(na,ha,Ga,N,xa.near,xa.far),d.renderBufferDirect(xa,null,Na,ha,na,ea))}else Ha.visible&&(ha=t(na,Ha,Ga,N,xa.near,xa.far),d.renderBufferDirect(xa,null,Na,ha,na,null))}na=na.children;Na=0;for(Ha=na.length;Na<Ha;Na++)x(na[Na],
ya,xa,Ga)}}var y=new z,B=new A,F=new c,G=new c(p,p),I=new f,N=new f,O=Array(4),Q=Array(4),V={},U={0:1,1:0,2:2},Z=[new f(1,0,0),new f(-1,0,0),new f(0,0,1),new f(0,0,-1),new f(0,1,0),new f(0,-1,0)],ca=[new f(0,1,0),new f(0,1,0),new f(0,1,0),new f(0,1,0),new f(0,0,1),new f(0,0,-1)],la=[new l,new l,new l,new l,new l,new l];for(p=0;4!==p;++p){var ra=0!==(p&1),ia=0!==(p&2),va=new he({depthPacking:3201,morphTargets:ra,skinning:ia});O[p]=va;ra=new ie({morphTargets:ra,skinning:ia});Q[p]=ra}var ma=this;this.enabled=
!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(na,ya,xa){if(!1!==ma.enabled&&(!1!==ma.autoUpdate||!1!==ma.needsUpdate)&&0!==na.length){var Ga=d.getRenderTarget(),Na=d.state;Na.setBlending(0);Na.buffers.color.setClear(1,1,1,1);Na.buffers.depth.setTest(!0);Na.setScissorTest(!1);for(var Ha,Ma=0,Pa=na.length;Ma<Pa;Ma++){var Za=na[Ma];Ha=Za.shadow;var ea=Za&&Za.isPointLight;if(void 0===Ha)console.warn("THREE.WebGLShadowMap:",Za,"has no shadow.");else{var ha=Ha.camera;F.copy(Ha.mapSize);
F.min(G);if(ea){var ua=F.x,Ba=F.y;la[0].set(2*ua,Ba,ua,Ba);la[1].set(0,Ba,ua,Ba);la[2].set(3*ua,Ba,ua,Ba);la[3].set(ua,Ba,ua,Ba);la[4].set(3*ua,0,ua,Ba);la[5].set(ua,0,ua,Ba);F.x*=4;F.y*=2}null===Ha.map&&(Ha.map=new n(F.x,F.y,{minFilter:1003,magFilter:1003,format:1023}),Ha.map.texture.name=Za.name+".shadowMap",ha.updateProjectionMatrix());Ha.isSpotLightShadow&&Ha.update(Za);ua=Ha.map;Ba=Ha.matrix;N.setFromMatrixPosition(Za.matrixWorld);ha.position.copy(N);ea?(Ha=6,Ba.makeTranslation(-N.x,-N.y,-N.z)):
(Ha=1,I.setFromMatrixPosition(Za.target.matrixWorld),ha.lookAt(I),ha.updateMatrixWorld(),Ba.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Ba.multiply(ha.projectionMatrix),Ba.multiply(ha.matrixWorldInverse));d.setRenderTarget(ua);d.clear();for(Za=0;Za<Ha;Za++)ea&&(I.copy(ha.position),I.add(Z[Za]),ha.up.copy(ca[Za]),ha.lookAt(I),ha.updateMatrixWorld(),Na.viewport(la[Za])),B.multiplyMatrices(ha.projectionMatrix,ha.matrixWorldInverse),y.setFromMatrix(B),x(ya,xa,ha,ea)}}ma.needsUpdate=!1;d.setRenderTarget(Ga)}}}
function Xo(d,k,p,t){function x(sa,Ya,ob){var xb=new Uint8Array(4),ib=d.createTexture();d.bindTexture(sa,ib);d.texParameteri(sa,10241,9728);d.texParameteri(sa,10240,9728);for(sa=0;sa<ob;sa++)d.texImage2D(Ya+sa,0,6408,1,1,0,6408,5121,xb);return ib}function y(sa,Ya){la[sa]=1;0===ra[sa]&&(d.enableVertexAttribArray(sa),ra[sa]=1);ia[sa]!==Ya&&((t.isWebGL2?d:k.get("ANGLE_instanced_arrays"))[t.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](sa,Ya),ia[sa]=Ya)}function B(sa){!0!==va[sa]&&(d.enable(sa),
va[sa]=!0)}function F(sa){!1!==va[sa]&&(d.disable(sa),va[sa]=!1)}function G(sa,Ya,ob,xb,ib,qb,bb,gb){if(0===sa)ya&&(F(3042),ya=!1);else if(ya||(B(3042),ya=!0),5!==sa){if(sa!==xa||gb!==ea){if(100!==Ga||100!==Ma)d.blendEquation(32774),Ma=Ga=100;if(gb)switch(sa){case 1:d.blendFuncSeparate(1,771,1,771);break;case 2:d.blendFunc(1,1);break;case 3:d.blendFuncSeparate(0,0,769,771);break;case 4:d.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",sa)}else switch(sa){case 1:d.blendFuncSeparate(770,
771,1,771);break;case 2:d.blendFunc(770,1);break;case 3:d.blendFunc(0,769);break;case 4:d.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",sa)}Za=Pa=Ha=Na=null;xa=sa;ea=gb}}else{ib=ib||Ya;qb=qb||ob;bb=bb||xb;if(Ya!==Ga||ib!==Ma)d.blendEquationSeparate(p.convert(Ya),p.convert(ib)),Ga=Ya,Ma=ib;if(ob!==Na||xb!==Ha||qb!==Pa||bb!==Za)d.blendFuncSeparate(p.convert(ob),p.convert(xb),p.convert(qb),p.convert(bb)),Na=ob,Ha=xb,Pa=qb,Za=bb;xa=sa;ea=null}}function I(sa){ha!==
sa&&(sa?d.frontFace(2304):d.frontFace(2305),ha=sa)}function N(sa){0!==sa?(B(2884),sa!==ua&&(1===sa?d.cullFace(1029):2===sa?d.cullFace(1028):d.cullFace(1032))):F(2884);ua=sa}function O(sa,Ya,ob){if(sa){if(B(32823),Ja!==Ya||Ta!==ob)d.polygonOffset(Ya,ob),Ja=Ya,Ta=ob}else F(32823)}function Q(sa){void 0===sa&&(sa=33984+yb-1);jb!==sa&&(d.activeTexture(sa),jb=sa)}var V=new function(){var sa=!1,Ya=new l,ob=null,xb=new l(0,0,0,0);return{setMask:function(ib){ob===ib||sa||(d.colorMask(ib,ib,ib,ib),ob=ib)},
setLocked:function(ib){sa=ib},setClear:function(ib,qb,bb,gb,Ia){!0===Ia&&(ib*=gb,qb*=gb,bb*=gb);Ya.set(ib,qb,bb,gb);!1===xb.equals(Ya)&&(d.clearColor(ib,qb,bb,gb),xb.copy(Ya))},reset:function(){sa=!1;ob=null;xb.set(-1,0,0,0)}}},U=new function(){var sa=!1,Ya=null,ob=null,xb=null;return{setTest:function(ib){ib?B(2929):F(2929)},setMask:function(ib){Ya===ib||sa||(d.depthMask(ib),Ya=ib)},setFunc:function(ib){if(ob!==ib){if(ib)switch(ib){case 0:d.depthFunc(512);break;case 1:d.depthFunc(519);break;case 2:d.depthFunc(513);
break;case 3:d.depthFunc(515);break;case 4:d.depthFunc(514);break;case 5:d.depthFunc(518);break;case 6:d.depthFunc(516);break;case 7:d.depthFunc(517);break;default:d.depthFunc(515)}else d.depthFunc(515);ob=ib}},setLocked:function(ib){sa=ib},setClear:function(ib){xb!==ib&&(d.clearDepth(ib),xb=ib)},reset:function(){sa=!1;xb=ob=Ya=null}}},Z=new function(){var sa=!1,Ya=null,ob=null,xb=null,ib=null,qb=null,bb=null,gb=null,Ia=null;return{setTest:function(Wa){Wa?B(2960):F(2960)},setMask:function(Wa){Ya===
Wa||sa||(d.stencilMask(Wa),Ya=Wa)},setFunc:function(Wa,kb,cb){if(ob!==Wa||xb!==kb||ib!==cb)d.stencilFunc(Wa,kb,cb),ob=Wa,xb=kb,ib=cb},setOp:function(Wa,kb,cb){if(qb!==Wa||bb!==kb||gb!==cb)d.stencilOp(Wa,kb,cb),qb=Wa,bb=kb,gb=cb},setLocked:function(Wa){sa=Wa},setClear:function(Wa){Ia!==Wa&&(d.clearStencil(Wa),Ia=Wa)},reset:function(){sa=!1;Ia=gb=bb=qb=ib=xb=ob=Ya=null}}},ca=d.getParameter(34921),la=new Uint8Array(ca),ra=new Uint8Array(ca),ia=new Uint8Array(ca),va={},ma=null,na=null,ya=null,xa=null,
Ga=null,Na=null,Ha=null,Ma=null,Pa=null,Za=null,ea=!1,ha=null,ua=null,Ba=null,Ja=null,Ta=null,yb=d.getParameter(35661),zb=!1;ca=0;ca=d.getParameter(7938);-1!==ca.indexOf("WebGL")?(ca=parseFloat(/^WebGL ([0-9])/.exec(ca)[1]),zb=1<=ca):-1!==ca.indexOf("OpenGL ES")&&(ca=parseFloat(/^OpenGL ES ([0-9])/.exec(ca)[1]),zb=2<=ca);var jb=null,nb={},rb=new l,Eb=new l,Sa={};Sa[3553]=x(3553,3553,1);Sa[34067]=x(34067,34069,6);V.setClear(0,0,0,1);U.setClear(1);Z.setClear(0);B(2929);U.setFunc(3);I(!1);N(1);B(2884);
G(0);return{buffers:{color:V,depth:U,stencil:Z},initAttributes:function(){for(var sa=0,Ya=la.length;sa<Ya;sa++)la[sa]=0},enableAttribute:function(sa){y(sa,0)},enableAttributeAndDivisor:y,disableUnusedAttributes:function(){for(var sa=0,Ya=ra.length;sa!==Ya;++sa)ra[sa]!==la[sa]&&(d.disableVertexAttribArray(sa),ra[sa]=0)},enable:B,disable:F,getCompressedTextureFormats:function(){if(null===ma&&(ma=[],k.get("WEBGL_compressed_texture_pvrtc")||k.get("WEBGL_compressed_texture_s3tc")||k.get("WEBGL_compressed_texture_etc1")||
k.get("WEBGL_compressed_texture_astc")))for(var sa=d.getParameter(34467),Ya=0;Ya<sa.length;Ya++)ma.push(sa[Ya]);return ma},useProgram:function(sa){return na!==sa?(d.useProgram(sa),na=sa,!0):!1},setBlending:G,setMaterial:function(sa,Ya){2===sa.side?F(2884):B(2884);var ob=1===sa.side;Ya&&(ob=!ob);I(ob);1===sa.blending&&!1===sa.transparent?G(0):G(sa.blending,sa.blendEquation,sa.blendSrc,sa.blendDst,sa.blendEquationAlpha,sa.blendSrcAlpha,sa.blendDstAlpha,sa.premultipliedAlpha);U.setFunc(sa.depthFunc);
U.setTest(sa.depthTest);U.setMask(sa.depthWrite);V.setMask(sa.colorWrite);O(sa.polygonOffset,sa.polygonOffsetFactor,sa.polygonOffsetUnits)},setFlipSided:I,setCullFace:N,setLineWidth:function(sa){sa!==Ba&&(zb&&d.lineWidth(sa),Ba=sa)},setPolygonOffset:O,setScissorTest:function(sa){sa?B(3089):F(3089)},activeTexture:Q,bindTexture:function(sa,Ya){null===jb&&Q();var ob=nb[jb];void 0===ob&&(ob={type:void 0,texture:void 0},nb[jb]=ob);if(ob.type!==sa||ob.texture!==Ya)d.bindTexture(sa,Ya||Sa[sa]),ob.type=sa,
ob.texture=Ya},compressedTexImage2D:function(){try{d.compressedTexImage2D.apply(d,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},texImage2D:function(){try{d.texImage2D.apply(d,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},texImage3D:function(){try{d.texImage3D.apply(d,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},scissor:function(sa){!1===rb.equals(sa)&&(d.scissor(sa.x,sa.y,sa.z,sa.w),rb.copy(sa))},viewport:function(sa){!1===Eb.equals(sa)&&(d.viewport(sa.x,
sa.y,sa.z,sa.w),Eb.copy(sa))},reset:function(){for(var sa=0;sa<ra.length;sa++)1===ra[sa]&&(d.disableVertexAttribArray(sa),ra[sa]=0);va={};jb=ma=null;nb={};ua=ha=xa=na=null;V.reset();U.reset();Z.reset()}}}function Yo(d,k,p,t,x,y,B){function F(ea,ha){return Ha?new OffscreenCanvas(ea,ha):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function G(ea,ha,ua,Ba){var Ja=1;if(ea.width>Ba||ea.height>Ba)Ja=Ba/Math.max(ea.width,ea.height);if(1>Ja||!0===ha){if("undefined"!==typeof HTMLImageElement&&
ea instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&ea instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&ea instanceof ImageBitmap)return Ba=ha?mb.floorPowerOfTwo:Math.floor,ha=Ba(Ja*ea.width),Ja=Ba(Ja*ea.height),void 0===Na&&(Na=F(ha,Ja)),ua=ua?F(ha,Ja):Na,ua.width=ha,ua.height=Ja,ua.getContext("2d").drawImage(ea,0,0,ha,Ja),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ea.width+"x"+ea.height+") to ("+ha+"x"+Ja+")."),ua;"data"in ea&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+
ea.width+"x"+ea.height+").")}return ea}function I(ea){return mb.isPowerOfTwo(ea.width)&&mb.isPowerOfTwo(ea.height)}function N(ea,ha){return ea.generateMipmaps&&ha&&1003!==ea.minFilter&&1006!==ea.minFilter}function O(ea,ha,ua,Ba){d.generateMipmap(ea);t.get(ha).__maxMipLevel=Math.log(Math.max(ua,Ba))*Math.LOG2E}function Q(ea,ha){if(!x.isWebGL2)return ea;var ua=ea;6403===ea&&(5126===ha&&(ua=33326),5131===ha&&(ua=33325),5121===ha&&(ua=33321));6407===ea&&(5126===ha&&(ua=34837),5131===ha&&(ua=34843),5121===
ha&&(ua=32849));6408===ea&&(5126===ha&&(ua=34836),5131===ha&&(ua=34842),5121===ha&&(ua=32856));33325===ua||33326===ua||34842===ua||34836===ua?k.get("EXT_color_buffer_float"):(34843===ua||34837===ua)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead.");return ua}function V(ea){return 1003===ea||1004===ea||1005===ea?9728:9729}function U(ea){ea=ea.target;ea.removeEventListener("dispose",U);var ha=t.get(ea);void 0!==ha.__webglInit&&(d.deleteTexture(ha.__webglTexture),
t.remove(ea));ea.isVideoTexture&&delete Ga[ea.id];B.memory.textures--}function Z(ea){ea=ea.target;ea.removeEventListener("dispose",Z);var ha=t.get(ea),ua=t.get(ea.texture);if(ea){void 0!==ua.__webglTexture&&d.deleteTexture(ua.__webglTexture);ea.depthTexture&&ea.depthTexture.dispose();if(ea.isWebGLRenderTargetCube)for(ua=0;6>ua;ua++)d.deleteFramebuffer(ha.__webglFramebuffer[ua]),ha.__webglDepthbuffer&&d.deleteRenderbuffer(ha.__webglDepthbuffer[ua]);else d.deleteFramebuffer(ha.__webglFramebuffer),ha.__webglDepthbuffer&&
d.deleteRenderbuffer(ha.__webglDepthbuffer);t.remove(ea.texture);t.remove(ea)}B.memory.textures--}function ca(ea,ha){var ua=t.get(ea);if(ea.isVideoTexture){var Ba=ea.id,Ja=B.render.frame;Ga[Ba]!==Ja&&(Ga[Ba]=Ja,ea.update())}if(0<ea.version&&ua.__version!==ea.version)if(Ba=ea.image,void 0===Ba)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(!1===Ba.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ma(ua,
ea,ha);return}p.activeTexture(33984+ha);p.bindTexture(3553,ua.__webglTexture)}function la(ea,ha){var ua=t.get(ea);if(6===ea.image.length)if(0<ea.version&&ua.__version!==ea.version){va(ua,ea);p.activeTexture(33984+ha);p.bindTexture(34067,ua.__webglTexture);d.pixelStorei(37440,ea.flipY);ha=ea&&ea.isCompressedTexture;for(var Ba=ea.image[0]&&ea.image[0].isDataTexture,Ja=[],Ta=0;6>Ta;Ta++)Ja[Ta]=ha||Ba?Ba?ea.image[Ta].image:ea.image[Ta]:G(ea.image[Ta],!1,!0,x.maxCubemapSize);var yb=Ja[0],zb=I(yb)||x.isWebGL2,
jb=y.convert(ea.format),nb=y.convert(ea.type),rb=Q(jb,nb);ia(34067,ea,zb);for(Ta=0;6>Ta;Ta++)if(ha)for(var Eb,Sa=Ja[Ta].mipmaps,sa=0,Ya=Sa.length;sa<Ya;sa++)Eb=Sa[sa],1023!==ea.format&&1022!==ea.format?-1<p.getCompressedTextureFormats().indexOf(jb)?p.compressedTexImage2D(34069+Ta,sa,rb,Eb.width,Eb.height,0,Eb.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):p.texImage2D(34069+Ta,sa,rb,Eb.width,Eb.height,0,jb,nb,Eb.data);else Ba?
p.texImage2D(34069+Ta,0,rb,Ja[Ta].width,Ja[Ta].height,0,jb,nb,Ja[Ta].data):p.texImage2D(34069+Ta,0,rb,jb,nb,Ja[Ta]);ua.__maxMipLevel=ha?Sa.length-1:0;N(ea,zb)&&O(34067,ea,yb.width,yb.height);ua.__version=ea.version;if(ea.onUpdate)ea.onUpdate(ea)}else p.activeTexture(33984+ha),p.bindTexture(34067,ua.__webglTexture)}function ra(ea,ha){p.activeTexture(33984+ha);p.bindTexture(34067,t.get(ea).__webglTexture)}function ia(ea,ha,ua){ua?(d.texParameteri(ea,10242,y.convert(ha.wrapS)),d.texParameteri(ea,10243,
y.convert(ha.wrapT)),32879!==ea&&35866!==ea||d.texParameteri(ea,32882,y.convert(ha.wrapR)),d.texParameteri(ea,10240,y.convert(ha.magFilter)),d.texParameteri(ea,10241,y.convert(ha.minFilter))):(d.texParameteri(ea,10242,33071),d.texParameteri(ea,10243,33071),32879!==ea&&35866!==ea||d.texParameteri(ea,32882,33071),1001===ha.wrapS&&1001===ha.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),d.texParameteri(ea,
10240,V(ha.magFilter)),d.texParameteri(ea,10241,V(ha.minFilter)),1003!==ha.minFilter&&1006!==ha.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!(ua=k.get("EXT_texture_filter_anisotropic"))||1015===ha.type&&null===k.get("OES_texture_float_linear")||1016===ha.type&&null===(x.isWebGL2||k.get("OES_texture_half_float_linear"))||!(1<ha.anisotropy||t.get(ha).__currentAnisotropy)||(d.texParameterf(ea,
ua.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ha.anisotropy,x.getMaxAnisotropy())),t.get(ha).__currentAnisotropy=ha.anisotropy)}function va(ea,ha){void 0===ea.__webglInit&&(ea.__webglInit=!0,ha.addEventListener("dispose",U),ea.__webglTexture=d.createTexture(),B.memory.textures++)}function ma(ea,ha,ua){var Ba=3553;ha.isDataTexture2DArray&&(Ba=35866);ha.isDataTexture3D&&(Ba=32879);va(ea,ha);p.activeTexture(33984+ua);p.bindTexture(Ba,ea.__webglTexture);d.pixelStorei(37440,ha.flipY);d.pixelStorei(37441,ha.premultiplyAlpha);
d.pixelStorei(3317,ha.unpackAlignment);ua=(x.isWebGL2?!1:1001!==ha.wrapS||1001!==ha.wrapT||1003!==ha.minFilter&&1006!==ha.minFilter)&&!1===I(ha.image);ua=G(ha.image,ua,!1,x.maxTextureSize);var Ja=I(ua)||x.isWebGL2,Ta=y.convert(ha.format),yb=y.convert(ha.type),zb=Q(Ta,yb);ia(Ba,ha,Ja);var jb=ha.mipmaps;if(ha.isDepthTexture){zb=6402;if(1015===ha.type){if(!x.isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");zb=36012}else x.isWebGL2&&(zb=33189);1026===ha.format&&6402===zb&&1012!==
ha.type&&1014!==ha.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ha.type=1012,yb=y.convert(ha.type));1027===ha.format&&(zb=34041,1020!==ha.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ha.type=1020,yb=y.convert(ha.type)));p.texImage2D(3553,0,zb,ua.width,ua.height,0,Ta,yb,null)}else if(ha.isDataTexture)if(0<jb.length&&Ja){for(var nb=0,rb=jb.length;nb<rb;nb++)Ba=jb[nb],p.texImage2D(3553,
nb,zb,Ba.width,Ba.height,0,Ta,yb,Ba.data);ha.generateMipmaps=!1;ea.__maxMipLevel=jb.length-1}else p.texImage2D(3553,0,zb,ua.width,ua.height,0,Ta,yb,ua.data),ea.__maxMipLevel=0;else if(ha.isCompressedTexture){nb=0;for(rb=jb.length;nb<rb;nb++)Ba=jb[nb],1023!==ha.format&&1022!==ha.format?-1<p.getCompressedTextureFormats().indexOf(Ta)?p.compressedTexImage2D(3553,nb,zb,Ba.width,Ba.height,0,Ba.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
p.texImage2D(3553,nb,zb,Ba.width,Ba.height,0,Ta,yb,Ba.data);ea.__maxMipLevel=jb.length-1}else if(ha.isDataTexture2DArray)p.texImage3D(35866,0,zb,ua.width,ua.height,ua.depth,0,Ta,yb,ua.data),ea.__maxMipLevel=0;else if(ha.isDataTexture3D)p.texImage3D(32879,0,zb,ua.width,ua.height,ua.depth,0,Ta,yb,ua.data),ea.__maxMipLevel=0;else if(0<jb.length&&Ja){nb=0;for(rb=jb.length;nb<rb;nb++)Ba=jb[nb],p.texImage2D(3553,nb,zb,Ta,yb,Ba);ha.generateMipmaps=!1;ea.__maxMipLevel=jb.length-1}else p.texImage2D(3553,0,
zb,Ta,yb,ua),ea.__maxMipLevel=0;N(ha,Ja)&&O(3553,ha,ua.width,ua.height);ea.__version=ha.version;if(ha.onUpdate)ha.onUpdate(ha)}function na(ea,ha,ua,Ba){var Ja=y.convert(ha.texture.format),Ta=y.convert(ha.texture.type),yb=Q(Ja,Ta);p.texImage2D(Ba,0,yb,ha.width,ha.height,0,Ja,Ta,null);d.bindFramebuffer(36160,ea);d.framebufferTexture2D(36160,ua,Ba,t.get(ha.texture).__webglTexture,0);d.bindFramebuffer(36160,null)}function ya(ea,ha,ua){d.bindRenderbuffer(36161,ea);if(ha.depthBuffer&&!ha.stencilBuffer)ua?
(ua=xa(ha),d.renderbufferStorageMultisample(36161,ua,33189,ha.width,ha.height)):d.renderbufferStorage(36161,33189,ha.width,ha.height),d.framebufferRenderbuffer(36160,36096,36161,ea);else if(ha.depthBuffer&&ha.stencilBuffer)ua?(ua=xa(ha),d.renderbufferStorageMultisample(36161,ua,34041,ha.width,ha.height)):d.renderbufferStorage(36161,34041,ha.width,ha.height),d.framebufferRenderbuffer(36160,33306,36161,ea);else{ea=y.convert(ha.texture.format);var Ba=y.convert(ha.texture.type);ea=Q(ea,Ba);ua?(ua=xa(ha),
d.renderbufferStorageMultisample(36161,ua,ea,ha.width,ha.height)):d.renderbufferStorage(36161,ea,ha.width,ha.height)}d.bindRenderbuffer(36161,null)}function xa(ea){return x.isWebGL2&&ea.isWebGLMultisampleRenderTarget?Math.min(x.maxSamples,ea.samples):0}var Ga={},Na,Ha="undefined"!==typeof OffscreenCanvas,Ma=0,Pa=!1,Za=!1;this.allocateTextureUnit=function(){var ea=Ma;ea>=x.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ea+" texture units while this GPU supports only "+x.maxTextures);
Ma+=1;return ea};this.resetTextureUnits=function(){Ma=0};this.setTexture2D=ca;this.setTexture2DArray=function(ea,ha){var ua=t.get(ea);0<ea.version&&ua.__version!==ea.version?ma(ua,ea,ha):(p.activeTexture(33984+ha),p.bindTexture(35866,ua.__webglTexture))};this.setTexture3D=function(ea,ha){var ua=t.get(ea);0<ea.version&&ua.__version!==ea.version?ma(ua,ea,ha):(p.activeTexture(33984+ha),p.bindTexture(32879,ua.__webglTexture))};this.setTextureCube=la;this.setTextureCubeDynamic=ra;this.setupRenderTarget=
function(ea){var ha=t.get(ea),ua=t.get(ea.texture);ea.addEventListener("dispose",Z);ua.__webglTexture=d.createTexture();B.memory.textures++;var Ba=!0===ea.isWebGLRenderTargetCube,Ja=!0===ea.isWebGLMultisampleRenderTarget,Ta=I(ea)||x.isWebGL2;if(Ba)for(ha.__webglFramebuffer=[],Ja=0;6>Ja;Ja++)ha.__webglFramebuffer[Ja]=d.createFramebuffer();else if(ha.__webglFramebuffer=d.createFramebuffer(),Ja)if(x.isWebGL2){ha.__webglMultisampledFramebuffer=d.createFramebuffer();ha.__webglColorRenderbuffer=d.createRenderbuffer();
d.bindRenderbuffer(36161,ha.__webglColorRenderbuffer);Ja=y.convert(ea.texture.format);var yb=y.convert(ea.texture.type);Ja=Q(Ja,yb);yb=xa(ea);d.renderbufferStorageMultisample(36161,yb,Ja,ea.width,ea.height);d.bindFramebuffer(36160,ha.__webglMultisampledFramebuffer);d.framebufferRenderbuffer(36160,36064,36161,ha.__webglColorRenderbuffer);d.bindRenderbuffer(36161,null);ea.depthBuffer&&(ha.__webglDepthRenderbuffer=d.createRenderbuffer(),ya(ha.__webglDepthRenderbuffer,ea,!0));d.bindFramebuffer(36160,
null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ba){p.bindTexture(34067,ua.__webglTexture);ia(34067,ea.texture,Ta);for(Ja=0;6>Ja;Ja++)na(ha.__webglFramebuffer[Ja],ea,36064,34069+Ja);N(ea.texture,Ta)&&O(34067,ea.texture,ea.width,ea.height);p.bindTexture(34067,null)}else p.bindTexture(3553,ua.__webglTexture),ia(3553,ea.texture,Ta),na(ha.__webglFramebuffer,ea,36064,3553),N(ea.texture,Ta)&&O(3553,ea.texture,ea.width,ea.height),p.bindTexture(3553,
null);if(ea.depthBuffer){ha=t.get(ea);ua=!0===ea.isWebGLRenderTargetCube;if(ea.depthTexture){if(ua)throw Error("target.depthTexture not supported in Cube render targets");if(ea&&ea.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");d.bindFramebuffer(36160,ha.__webglFramebuffer);if(!ea.depthTexture||!ea.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");t.get(ea.depthTexture).__webglTexture&&ea.depthTexture.image.width===
ea.width&&ea.depthTexture.image.height===ea.height||(ea.depthTexture.image.width=ea.width,ea.depthTexture.image.height=ea.height,ea.depthTexture.needsUpdate=!0);ca(ea.depthTexture,0);ha=t.get(ea.depthTexture).__webglTexture;if(1026===ea.depthTexture.format)d.framebufferTexture2D(36160,36096,3553,ha,0);else if(1027===ea.depthTexture.format)d.framebufferTexture2D(36160,33306,3553,ha,0);else throw Error("Unknown depthTexture format");}else if(ua)for(ha.__webglDepthbuffer=[],ua=0;6>ua;ua++)d.bindFramebuffer(36160,
ha.__webglFramebuffer[ua]),ha.__webglDepthbuffer[ua]=d.createRenderbuffer(),ya(ha.__webglDepthbuffer[ua],ea);else d.bindFramebuffer(36160,ha.__webglFramebuffer),ha.__webglDepthbuffer=d.createRenderbuffer(),ya(ha.__webglDepthbuffer,ea);d.bindFramebuffer(36160,null)}};this.updateRenderTargetMipmap=function(ea){var ha=ea.texture,ua=I(ea)||x.isWebGL2;if(N(ha,ua)){ua=ea.isWebGLRenderTargetCube?34067:3553;var Ba=t.get(ha).__webglTexture;p.bindTexture(ua,Ba);O(ua,ha,ea.width,ea.height);p.bindTexture(ua,
null)}};this.updateMultisampleRenderTarget=function(ea){if(ea.isWebGLMultisampleRenderTarget)if(x.isWebGL2){var ha=t.get(ea);d.bindFramebuffer(36008,ha.__webglMultisampledFramebuffer);d.bindFramebuffer(36009,ha.__webglFramebuffer);ha=ea.width;var ua=ea.height,Ba=16384;ea.depthBuffer&&(Ba|=256);ea.stencilBuffer&&(Ba|=1024);d.blitFramebuffer(0,0,ha,ua,0,0,ha,ua,Ba,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};this.safeSetTexture2D=function(ea,
ha){ea&&ea.isWebGLRenderTarget&&(!1===Pa&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Pa=!0),ea=ea.texture);ca(ea,ha)};this.safeSetTextureCube=function(ea,ha){ea&&ea.isWebGLRenderTargetCube&&(!1===Za&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Za=!0),ea=ea.texture);ea&&ea.isCubeTexture||Array.isArray(ea.image)&&6===ea.image.length?
la(ea,ha):ra(ea,ha)}}function Rl(d,k,p){return{convert:function(t){if(1E3===t)return 10497;if(1001===t)return 33071;if(1002===t)return 33648;if(1003===t)return 9728;if(1004===t)return 9984;if(1005===t)return 9986;if(1006===t)return 9729;if(1007===t)return 9985;if(1008===t)return 9987;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;
if(1015===t)return 5126;if(1016===t){if(p.isWebGL2)return 5131;var x=k.get("OES_texture_half_float");if(null!==x)return x.HALF_FLOAT_OES}if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(100===t)return 32774;if(101===t)return 32778;if(102===t)return 32779;if(200===t)return 0;if(201===t)return 1;if(202===t)return 768;if(203===t)return 769;if(204===t)return 770;
if(205===t)return 771;if(206===t)return 772;if(207===t)return 773;if(208===t)return 774;if(209===t)return 775;if(210===t)return 776;if(33776===t||33777===t||33778===t||33779===t)if(x=k.get("WEBGL_compressed_texture_s3tc"),null!==x){if(33776===t)return x.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return x.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return x.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return x.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t)if(x=k.get("WEBGL_compressed_texture_pvrtc"),
null!==x){if(35840===t)return x.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return x.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return x.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return x.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t&&(x=k.get("WEBGL_compressed_texture_etc1"),null!==x))return x.COMPRESSED_RGB_ETC1_WEBGL;if(37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t)if(x=k.get("WEBGL_compressed_texture_astc"),
null!==x)return t;if(103===t||104===t){if(p.isWebGL2){if(103===t)return 32775;if(104===t)return 32776}x=k.get("EXT_blend_minmax");if(null!==x){if(103===t)return x.MIN_EXT;if(104===t)return x.MAX_EXT}}if(1020===t){if(p.isWebGL2)return 34042;x=k.get("WEBGL_depth_texture");if(null!==x)return x.UNSIGNED_INT_24_8_WEBGL}return 0}}}function rf(){P.call(this);this.type="Group"}function Ad(){P.call(this);this.type="Camera";this.matrixWorldInverse=new A;this.projectionMatrix=new A;this.projectionMatrixInverse=
new A}function kc(d,k,p,t){Ad.call(this);this.type="PerspectiveCamera";this.fov=void 0!==d?d:50;this.zoom=1;this.near=void 0!==p?p:.1;this.far=void 0!==t?t:2E3;this.focus=10;this.aspect=void 0!==k?k:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function yg(d){kc.call(this);this.cameras=d||[]}function Sl(d,k,p){Tl.setFromMatrixPosition(k.matrixWorld);Ul.setFromMatrixPosition(p.matrixWorld);var t=Tl.distanceTo(Ul),x=k.projectionMatrix.elements,y=p.projectionMatrix.elements,
B=x[14]/(x[10]-1);p=x[14]/(x[10]+1);var F=(x[9]+1)/x[5],G=(x[9]-1)/x[5],I=(x[8]-1)/x[0],N=(y[8]+1)/y[0];x=B*I;y=B*N;N=t/(-I+N);I=N*-I;k.matrixWorld.decompose(d.position,d.quaternion,d.scale);d.translateX(I);d.translateZ(N);d.matrixWorld.compose(d.position,d.quaternion,d.scale);d.matrixWorldInverse.getInverse(d.matrixWorld);k=B+N;B=p+N;d.projectionMatrix.makePerspective(x-I,y+(t-I),F*p/B*k,G*p/B*k,k,B)}function Vl(d){function k(){return null!==x&&!0===x.isPresenting}function p(){if(k()){var na=x.getEyeParameters("left"),
ya=na.renderWidth*N;na=na.renderHeight*N;ia=d.getPixelRatio();d.getSize(ra);d.setDrawingBufferSize(2*ya,na,1);ma.start()}else t.enabled&&d.setDrawingBufferSize(ra.width,ra.height,ia),ma.stop()}var t=this,x=null,y=null,B=null,F=[],G=new A,I=new A,N=1,O="stage";"undefined"!==typeof window&&"VRFrameData"in window&&(y=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",p,!1));var Q=new A,V=new e,U=new f,Z=new kc;Z.bounds=new l(0,0,.5,1);Z.layers.enable(1);var ca=new kc;ca.bounds=new l(.5,
0,.5,1);ca.layers.enable(2);var la=new yg([Z,ca]);la.layers.enable(1);la.layers.enable(2);var ra=new c,ia,va=[];this.enabled=!1;this.getController=function(na){var ya=F[na];void 0===ya&&(ya=new rf,ya.matrixAutoUpdate=!1,ya.visible=!1,F[na]=ya);return ya};this.getDevice=function(){return x};this.setDevice=function(na){void 0!==na&&(x=na);ma.setContext(na)};this.setFramebufferScaleFactor=function(na){N=na};this.setFrameOfReferenceType=function(na){O=na};this.setPoseTarget=function(na){void 0!==na&&
(B=na)};this.getCamera=function(na){var ya="stage"===O?1.6:0;if(!1===k())return na.position.set(0,ya,0),na.rotation.set(0,0,0),na;x.depthNear=na.near;x.depthFar=na.far;x.getFrameData(y);if("stage"===O){var xa=x.stageParameters;xa?G.fromArray(xa.sittingToStandingTransform):G.makeTranslation(0,ya,0)}ya=y.pose;xa=null!==B?B:na;xa.matrix.copy(G);xa.matrix.decompose(xa.position,xa.quaternion,xa.scale);null!==ya.orientation&&(V.fromArray(ya.orientation),xa.quaternion.multiply(V));null!==ya.position&&(V.setFromRotationMatrix(G),
U.fromArray(ya.position),U.applyQuaternion(V),xa.position.add(U));xa.updateMatrixWorld();Z.near=na.near;ca.near=na.near;Z.far=na.far;ca.far=na.far;Z.matrixWorldInverse.fromArray(y.leftViewMatrix);ca.matrixWorldInverse.fromArray(y.rightViewMatrix);I.getInverse(G);"stage"===O&&(Z.matrixWorldInverse.multiply(I),ca.matrixWorldInverse.multiply(I));na=xa.parent;null!==na&&(Q.getInverse(na.matrixWorld),Z.matrixWorldInverse.multiply(Q),ca.matrixWorldInverse.multiply(Q));Z.matrixWorld.getInverse(Z.matrixWorldInverse);
ca.matrixWorld.getInverse(ca.matrixWorldInverse);Z.projectionMatrix.fromArray(y.leftProjectionMatrix);ca.projectionMatrix.fromArray(y.rightProjectionMatrix);Sl(la,Z,ca);na=x.getLayers();na.length&&(na=na[0],null!==na.leftBounds&&4===na.leftBounds.length&&Z.bounds.fromArray(na.leftBounds),null!==na.rightBounds&&4===na.rightBounds.length&&ca.bounds.fromArray(na.rightBounds));for(na=0;na<F.length;na++){ya=F[na];a:{xa=na;for(var Ga=navigator.getGamepads&&navigator.getGamepads(),Na=0,Ha=0,Ma=Ga.length;Na<
Ma;Na++){var Pa=Ga[Na];if(Pa&&("Daydream Controller"===Pa.id||"Gear VR Controller"===Pa.id||"Oculus Go Controller"===Pa.id||"OpenVR Gamepad"===Pa.id||Pa.id.startsWith("Oculus Touch")||Pa.id.startsWith("Spatial Controller"))){if(Ha===xa){xa=Pa;break a}Ha++}}xa=void 0}if(void 0!==xa&&void 0!==xa.pose){if(null===xa.pose)break;Ga=xa.pose;!1===Ga.hasPosition&&ya.position.set(.2,-.6,-.05);null!==Ga.position&&ya.position.fromArray(Ga.position);null!==Ga.orientation&&ya.quaternion.fromArray(Ga.orientation);
ya.matrix.compose(ya.position,ya.quaternion,ya.scale);ya.matrix.premultiply(G);ya.matrix.decompose(ya.position,ya.quaternion,ya.scale);ya.matrixWorldNeedsUpdate=!0;ya.visible=!0;Ga="Daydream Controller"===xa.id?0:1;va[na]!==xa.buttons[Ga].pressed&&(va[na]=xa.buttons[Ga].pressed,!0===va[na]?ya.dispatchEvent({type:"selectstart"}):(ya.dispatchEvent({type:"selectend"}),ya.dispatchEvent({type:"select"})))}else ya.visible=!1}return la};this.getStandingMatrix=function(){return G};this.isPresenting=k;var ma=
new J;this.setAnimationLoop=function(na){ma.setAnimationLoop(na);k()&&ma.start()};this.submitFrame=function(){k()&&x.submitFrame()};this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",p)}}function Zo(d){function k(){return null!==F&&null!==I}function p(ia){var va=Q[V.indexOf(ia.inputSource)];va&&va.dispatchEvent({type:ia.type})}function t(){d.setFramebuffer(null);d.setRenderTarget(d.getRenderTarget());ra.stop()}function x(ia,va){null===va?ia.matrixWorld.copy(ia.matrix):
ia.matrixWorld.multiplyMatrices(va.matrixWorld,ia.matrix);ia.matrixWorldInverse.getInverse(ia.matrixWorld)}var y=d.context,B=null,F=null,G=1,I=null,N="stage",O=null,Q=[],V=[],U=new kc;U.layers.enable(1);U.viewport=new l;var Z=new kc;Z.layers.enable(2);Z.viewport=new l;var ca=new yg([U,Z]);ca.layers.enable(1);ca.layers.enable(2);this.enabled=!1;this.getController=function(ia){var va=Q[ia];void 0===va&&(va=new rf,va.matrixAutoUpdate=!1,va.visible=!1,Q[ia]=va);return va};this.getDevice=function(){return B};
this.setDevice=function(ia){void 0!==ia&&(B=ia);ia instanceof XRDevice&&y.setCompatibleXRDevice(ia)};this.setFramebufferScaleFactor=function(ia){G=ia};this.setFrameOfReferenceType=function(ia){N=ia};this.setSession=function(ia){F=ia;null!==F&&(F.addEventListener("select",p),F.addEventListener("selectstart",p),F.addEventListener("selectend",p),F.addEventListener("end",t),F.baseLayer=new XRWebGLLayer(F,y,{framebufferScaleFactor:G}),F.requestFrameOfReference(N).then(function(va){I=va;d.setFramebuffer(F.baseLayer.framebuffer);
ra.setContext(F);ra.start()}),V=F.getInputSources(),F.addEventListener("inputsourceschange",function(){V=F.getInputSources();console.log(V);for(var va=0;va<Q.length;va++)Q[va].userData.inputSource=V[va]}))};this.getCamera=function(ia){if(k()){var va=ia.parent,ma=ca.cameras;x(ca,va);for(var na=0;na<ma.length;na++)x(ma[na],va);ia.matrixWorld.copy(ca.matrixWorld);ia=ia.children;na=0;for(va=ia.length;na<va;na++)ia[na].updateMatrixWorld(!0);Sl(ca,U,Z);return ca}return ia};this.isPresenting=k;var la=null,
ra=new J;ra.setAnimationLoop(function(ia,va){O=va.getDevicePose(I);if(null!==O)for(var ma=F.baseLayer,na=va.views,ya=0;ya<na.length;ya++){var xa=na[ya],Ga=ma.getViewport(xa),Na=O.getViewMatrix(xa),Ha=ca.cameras[ya];Ha.matrix.fromArray(Na).getInverse(Ha.matrix);Ha.projectionMatrix.fromArray(xa.projectionMatrix);Ha.viewport.set(Ga.x,Ga.y,Ga.width,Ga.height);0===ya&&ca.matrix.copy(Ha.matrix)}for(ya=0;ya<Q.length;ya++){ma=Q[ya];if(na=V[ya])if(na=va.getInputPose(na,I),null!==na){"targetRay"in na?ma.matrix.elements=
na.targetRay.transformMatrix:"pointerMatrix"in na&&(ma.matrix.elements=na.pointerMatrix);ma.matrix.decompose(ma.position,ma.rotation,ma.scale);ma.visible=!0;continue}ma.visible=!1}la&&la(ia)});this.setAnimationLoop=function(ia){la=ia};this.dispose=function(){};this.getStandingMatrix=function(){console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed.");return new A};this.submitFrame=function(){}}function $i(d){var k;function p(){Wa=new Ui(Ia);kb=new nc(Ia,Wa,d);kb.isWebGL2||(Wa.get("WEBGL_depth_texture"),
Wa.get("OES_texture_float"),Wa.get("OES_texture_half_float"),Wa.get("OES_texture_half_float_linear"),Wa.get("OES_standard_derivatives"),Wa.get("OES_element_index_uint"),Wa.get("ANGLE_instanced_arrays"));Wa.get("OES_texture_float_linear");Bd=new Rl(Ia,Wa,kb);cb=new Xo(Ia,Wa,Bd,kb);cb.scissor(zb.copy(sa).multiplyScalar(Eb));cb.viewport(yb.copy(Sa).multiplyScalar(Eb));Db=new bo(Ia);Sb=new Po;wc=new Yo(Ia,Wa,cb,Sb,kb,Bd,Db);Qd=new M(Ia);aj=new nf(Ia,Qd,Db);sf=new fo(aj,Db);Wl=new eo(Ia);De=new Oo(Ha,
Wa,kb,wc);Ih=new So;uf=new Wo;je=new yd(Ha,cb,sf,na);Xl=new Ce(Ia,Wa,Db,kb);Yl=new ao(Ia,Wa,Db,kb);Db.programs=De.programs;Ha.context=Ia;Ha.capabilities=kb;Ha.extensions=Wa;Ha.properties=Sb;Ha.renderLists=Ih;Ha.state=cb;Ha.info=Db}function t(ba){ba.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");Ma=!0}function x(){console.log("THREE.WebGLRenderer: Context Restored.");Ma=!1;p()}function y(ba){ba=ba.target;ba.removeEventListener("dispose",y);B(ba);Sb.remove(ba)}function B(ba){var qa=
Sb.get(ba).program;ba.program=void 0;void 0!==qa&&De.releaseProgram(qa)}function F(ba,qa){ba.render(function(fa){Ha.renderBufferImmediate(fa,qa)})}function G(ba,qa,fa,Qa){if(!1!==ba.visible){if(ba.layers.test(qa.layers))if(ba.isGroup)fa=ba.renderOrder;else if(ba.isLight)Na.pushLight(ba),ba.castShadow&&Na.pushShadow(ba);else if(ba.isSprite){if(!ba.frustumCulled||ob.intersectsSprite(ba)){Qa&&gb.setFromMatrixPosition(ba.matrixWorld).applyMatrix4(bb);var Va=sf.update(ba),Xa=ba.material;Xa.visible&&Ga.push(ba,
Va,Xa,fa,gb.z,null)}}else if(ba.isImmediateRenderObject)Qa&&gb.setFromMatrixPosition(ba.matrixWorld).applyMatrix4(bb),Ga.push(ba,null,ba.material,fa,gb.z,null);else if(ba.isMesh||ba.isLine||ba.isPoints)if(ba.isSkinnedMesh&&ba.skeleton.update(),!ba.frustumCulled||ob.intersectsObject(ba))if(Qa&&gb.setFromMatrixPosition(ba.matrixWorld).applyMatrix4(bb),Va=sf.update(ba),Xa=ba.material,Array.isArray(Xa))for(var Ua=Va.groups,eb=0,wb=Ua.length;eb<wb;eb++){var hc=Ua[eb],Fa=Xa[hc.materialIndex];Fa&&Fa.visible&&
Ga.push(ba,Va,Fa,fa,gb.z,hc)}else Xa.visible&&Ga.push(ba,Va,Xa,fa,gb.z,null);ba=ba.children;eb=0;for(wb=ba.length;eb<wb;eb++)G(ba[eb],qa,fa,Qa)}}function I(ba,qa,fa,Qa){for(var Va=0,Xa=ba.length;Va<Xa;Va++){var Ua=ba[Va],eb=Ua.object,wb=Ua.geometry,hc=void 0===Qa?Ua.material:Qa;Ua=Ua.group;if(fa.isArrayCamera){Ta=fa;for(var Fa=fa.cameras,Cd=0,Bc=Fa.length;Cd<Bc;Cd++){var lc=Fa[Cd];if(eb.layers.test(lc.layers)){if("viewport"in lc)cb.viewport(yb.copy(lc.viewport));else{var Lc=lc.bounds;cb.viewport(yb.set(Lc.x*
nb,Lc.y*rb,Lc.z*nb,Lc.w*rb).multiplyScalar(Eb))}Na.setupLights(lc);N(eb,qa,lc,wb,hc,Ua)}}}else Ta=null,N(eb,qa,fa,wb,hc,Ua)}}function N(ba,qa,fa,Qa,Va,Xa){ba.onBeforeRender(Ha,qa,fa,Qa,Va,Xa);Na=uf.get(qa,Ta||fa);ba.modelViewMatrix.multiplyMatrices(fa.matrixWorldInverse,ba.matrixWorld);ba.normalMatrix.getNormalMatrix(ba.modelViewMatrix);ba.isImmediateRenderObject?(cb.setMaterial(Va),Qa=Q(fa,qa.fog,Va,ba),ua=k=null,Ba=!1,F(ba,Qa)):Ha.renderBufferDirect(fa,qa.fog,Qa,Va,ba,Xa);Na=uf.get(qa,Ta||fa)}function O(ba,
qa,fa){var Qa=Sb.get(ba),Va=Na.state.lights,Xa=Qa.lightsHash,Ua=Va.state.hash;fa=De.getParameters(ba,Va.state,Na.state.shadowsArray,qa,xb.numPlanes,xb.numIntersection,fa);var eb=De.getProgramCode(ba,fa),wb=Qa.program,hc=!0;if(void 0===wb)ba.addEventListener("dispose",y);else if(wb.code!==eb)B(ba);else{if(Xa.stateID!==Ua.stateID||Xa.directionalLength!==Ua.directionalLength||Xa.pointLength!==Ua.pointLength||Xa.spotLength!==Ua.spotLength||Xa.rectAreaLength!==Ua.rectAreaLength||Xa.hemiLength!==Ua.hemiLength||
Xa.shadowsLength!==Ua.shadowsLength)Xa.stateID=Ua.stateID,Xa.directionalLength=Ua.directionalLength,Xa.pointLength=Ua.pointLength,Xa.spotLength=Ua.spotLength,Xa.rectAreaLength=Ua.rectAreaLength,Xa.hemiLength=Ua.hemiLength,Xa.shadowsLength=Ua.shadowsLength;else if(void 0!==fa.shaderID)return;hc=!1}hc&&(fa.shaderID?(eb=zd[fa.shaderID],Qa.shader={name:ba.type,uniforms:E(eb.uniforms),vertexShader:eb.vertexShader,fragmentShader:eb.fragmentShader}):Qa.shader={name:ba.type,uniforms:ba.uniforms,vertexShader:ba.vertexShader,
fragmentShader:ba.fragmentShader},eb=De.getProgramCode(ba,fa),wb=De.acquireProgram(ba,Qa.shader,fa,eb),Qa.program=wb,ba.program=wb);fa=wb.getAttributes();if(ba.morphTargets)for(eb=ba.numSupportedMorphTargets=0;eb<Ha.maxMorphTargets;eb++)0<=fa["morphTarget"+eb]&&ba.numSupportedMorphTargets++;if(ba.morphNormals)for(eb=ba.numSupportedMorphNormals=0;eb<Ha.maxMorphNormals;eb++)0<=fa["morphNormal"+eb]&&ba.numSupportedMorphNormals++;fa=Qa.shader.uniforms;if(!ba.isShaderMaterial&&!ba.isRawShaderMaterial||
!0===ba.clipping)Qa.numClippingPlanes=xb.numPlanes,Qa.numIntersection=xb.numIntersection,fa.clippingPlanes=xb.uniform;Qa.fog=qa;void 0===Xa&&(Qa.lightsHash=Xa={});Xa.stateID=Ua.stateID;Xa.directionalLength=Ua.directionalLength;Xa.pointLength=Ua.pointLength;Xa.spotLength=Ua.spotLength;Xa.rectAreaLength=Ua.rectAreaLength;Xa.hemiLength=Ua.hemiLength;Xa.shadowsLength=Ua.shadowsLength;ba.lights&&(fa.ambientLightColor.value=Va.state.ambient,fa.lightProbe.value=Va.state.probe,fa.directionalLights.value=
Va.state.directional,fa.spotLights.value=Va.state.spot,fa.rectAreaLights.value=Va.state.rectArea,fa.pointLights.value=Va.state.point,fa.hemisphereLights.value=Va.state.hemi,fa.directionalShadowMap.value=Va.state.directionalShadowMap,fa.directionalShadowMatrix.value=Va.state.directionalShadowMatrix,fa.spotShadowMap.value=Va.state.spotShadowMap,fa.spotShadowMatrix.value=Va.state.spotShadowMatrix,fa.pointShadowMap.value=Va.state.pointShadowMap,fa.pointShadowMatrix.value=Va.state.pointShadowMatrix);ba=
Qa.program.getUniforms();ba=ge.seqWithValue(ba.seq,fa);Qa.uniformsList=ba}function Q(ba,qa,fa,Qa){wc.resetTextureUnits();var Va=Sb.get(fa),Xa=Va.lightsHash,Ua=Na.state.lights.state.hash;ib&&(qb||ba!==Ja)&&xb.setState(fa.clippingPlanes,fa.clipIntersection,fa.clipShadows,ba,Va,ba===Ja&&fa.id===ha);!1===fa.needsUpdate&&(void 0===Va.program?fa.needsUpdate=!0:fa.fog&&Va.fog!==qa?fa.needsUpdate=!0:!fa.lights||Xa.stateID===Ua.stateID&&Xa.directionalLength===Ua.directionalLength&&Xa.pointLength===Ua.pointLength&&
Xa.spotLength===Ua.spotLength&&Xa.rectAreaLength===Ua.rectAreaLength&&Xa.hemiLength===Ua.hemiLength&&Xa.shadowsLength===Ua.shadowsLength?void 0===Va.numClippingPlanes||Va.numClippingPlanes===xb.numPlanes&&Va.numIntersection===xb.numIntersection||(fa.needsUpdate=!0):fa.needsUpdate=!0);fa.needsUpdate&&(O(fa,qa,Qa),fa.needsUpdate=!1);var eb=!1,wb=!1,hc=!1;Xa=Va.program;Ua=Xa.getUniforms();var Fa=Va.shader.uniforms;cb.useProgram(Xa.program)&&(hc=wb=eb=!0);fa.id!==ha&&(ha=fa.id,wb=!0);if(eb||Ja!==ba){Ua.setValue(Ia,
"projectionMatrix",ba.projectionMatrix);kb.logarithmicDepthBuffer&&Ua.setValue(Ia,"logDepthBufFC",2/(Math.log(ba.far+1)/Math.LN2));Ja!==ba&&(Ja=ba,hc=wb=!0);if(fa.isShaderMaterial||fa.isMeshPhongMaterial||fa.isMeshStandardMaterial||fa.envMap)eb=Ua.map.cameraPosition,void 0!==eb&&eb.setValue(Ia,gb.setFromMatrixPosition(ba.matrixWorld));(fa.isMeshPhongMaterial||fa.isMeshLambertMaterial||fa.isMeshBasicMaterial||fa.isMeshStandardMaterial||fa.isShaderMaterial||fa.skinning)&&Ua.setValue(Ia,"viewMatrix",
ba.matrixWorldInverse)}if(fa.skinning&&(Ua.setOptional(Ia,Qa,"bindMatrix"),Ua.setOptional(Ia,Qa,"bindMatrixInverse"),ba=Qa.skeleton))if(eb=ba.bones,kb.floatVertexTextures){if(void 0===ba.boneTexture){eb=Math.sqrt(4*eb.length);eb=mb.ceilPowerOfTwo(eb);eb=Math.max(eb,4);var Cd=new Float32Array(eb*eb*4);Cd.set(ba.boneMatrices);var Bc=new r(Cd,eb,eb,1023,1015);Bc.needsUpdate=!0;ba.boneMatrices=Cd;ba.boneTexture=Bc;ba.boneTextureSize=eb}Ua.setValue(Ia,"boneTexture",ba.boneTexture,wc);Ua.setValue(Ia,"boneTextureSize",
ba.boneTextureSize)}else Ua.setOptional(Ia,ba,"boneMatrices");wb&&(Ua.setValue(Ia,"toneMappingExposure",Ha.toneMappingExposure),Ua.setValue(Ia,"toneMappingWhitePoint",Ha.toneMappingWhitePoint),fa.lights&&(wb=hc,Fa.ambientLightColor.needsUpdate=wb,Fa.lightProbe.needsUpdate=wb,Fa.directionalLights.needsUpdate=wb,Fa.pointLights.needsUpdate=wb,Fa.spotLights.needsUpdate=wb,Fa.rectAreaLights.needsUpdate=wb,Fa.hemisphereLights.needsUpdate=wb),qa&&fa.fog&&(Fa.fogColor.value.copy(qa.color),qa.isFog?(Fa.fogNear.value=
qa.near,Fa.fogFar.value=qa.far):qa.isFogExp2&&(Fa.fogDensity.value=qa.density)),fa.isMeshBasicMaterial?V(Fa,fa):fa.isMeshLambertMaterial?(V(Fa,fa),fa.emissiveMap&&(Fa.emissiveMap.value=fa.emissiveMap)):fa.isMeshPhongMaterial?(V(Fa,fa),fa.isMeshToonMaterial?(U(Fa,fa),fa.gradientMap&&(Fa.gradientMap.value=fa.gradientMap)):U(Fa,fa)):fa.isMeshStandardMaterial?(V(Fa,fa),fa.isMeshPhysicalMaterial?(Z(Fa,fa),Fa.reflectivity.value=fa.reflectivity,Fa.clearCoat.value=fa.clearCoat,Fa.clearCoatRoughness.value=
fa.clearCoatRoughness):Z(Fa,fa)):fa.isMeshMatcapMaterial?(V(Fa,fa),fa.matcap&&(Fa.matcap.value=fa.matcap),fa.bumpMap&&(Fa.bumpMap.value=fa.bumpMap,Fa.bumpScale.value=fa.bumpScale,1===fa.side&&(Fa.bumpScale.value*=-1)),fa.normalMap&&(Fa.normalMap.value=fa.normalMap,Fa.normalScale.value.copy(fa.normalScale),1===fa.side&&Fa.normalScale.value.negate()),fa.displacementMap&&(Fa.displacementMap.value=fa.displacementMap,Fa.displacementScale.value=fa.displacementScale,Fa.displacementBias.value=fa.displacementBias)):
fa.isMeshDepthMaterial?(V(Fa,fa),fa.displacementMap&&(Fa.displacementMap.value=fa.displacementMap,Fa.displacementScale.value=fa.displacementScale,Fa.displacementBias.value=fa.displacementBias)):fa.isMeshDistanceMaterial?(V(Fa,fa),fa.displacementMap&&(Fa.displacementMap.value=fa.displacementMap,Fa.displacementScale.value=fa.displacementScale,Fa.displacementBias.value=fa.displacementBias),Fa.referencePosition.value.copy(fa.referencePosition),Fa.nearDistance.value=fa.nearDistance,Fa.farDistance.value=
fa.farDistance):fa.isMeshNormalMaterial?(V(Fa,fa),fa.bumpMap&&(Fa.bumpMap.value=fa.bumpMap,Fa.bumpScale.value=fa.bumpScale,1===fa.side&&(Fa.bumpScale.value*=-1)),fa.normalMap&&(Fa.normalMap.value=fa.normalMap,Fa.normalScale.value.copy(fa.normalScale),1===fa.side&&Fa.normalScale.value.negate()),fa.displacementMap&&(Fa.displacementMap.value=fa.displacementMap,Fa.displacementScale.value=fa.displacementScale,Fa.displacementBias.value=fa.displacementBias)):fa.isLineBasicMaterial?(Fa.diffuse.value.copy(fa.color),
Fa.opacity.value=fa.opacity,fa.isLineDashedMaterial&&(Fa.dashSize.value=fa.dashSize,Fa.totalSize.value=fa.dashSize+fa.gapSize,Fa.scale.value=fa.scale)):fa.isPointsMaterial?(Fa.diffuse.value.copy(fa.color),Fa.opacity.value=fa.opacity,Fa.size.value=fa.size*Eb,Fa.scale.value=.5*rb,Fa.map.value=fa.map,null!==fa.map&&(!0===fa.map.matrixAutoUpdate&&fa.map.updateMatrix(),Fa.uvTransform.value.copy(fa.map.matrix))):fa.isSpriteMaterial?(Fa.diffuse.value.copy(fa.color),Fa.opacity.value=fa.opacity,Fa.rotation.value=
fa.rotation,Fa.map.value=fa.map,null!==fa.map&&(!0===fa.map.matrixAutoUpdate&&fa.map.updateMatrix(),Fa.uvTransform.value.copy(fa.map.matrix))):fa.isShadowMaterial&&(Fa.color.value.copy(fa.color),Fa.opacity.value=fa.opacity),void 0!==Fa.ltc_1&&(Fa.ltc_1.value=$a.LTC_1),void 0!==Fa.ltc_2&&(Fa.ltc_2.value=$a.LTC_2),ge.upload(Ia,Va.uniformsList,Fa,wc));fa.isShaderMaterial&&!0===fa.uniformsNeedUpdate&&(ge.upload(Ia,Va.uniformsList,Fa,wc),fa.uniformsNeedUpdate=!1);fa.isSpriteMaterial&&Ua.setValue(Ia,"center",
Qa.center);Ua.setValue(Ia,"modelViewMatrix",Qa.modelViewMatrix);Ua.setValue(Ia,"normalMatrix",Qa.normalMatrix);Ua.setValue(Ia,"modelMatrix",Qa.matrixWorld);return Xa}function V(ba,qa){ba.opacity.value=qa.opacity;qa.color&&ba.diffuse.value.copy(qa.color);qa.emissive&&ba.emissive.value.copy(qa.emissive).multiplyScalar(qa.emissiveIntensity);qa.map&&(ba.map.value=qa.map);qa.alphaMap&&(ba.alphaMap.value=qa.alphaMap);qa.specularMap&&(ba.specularMap.value=qa.specularMap);qa.envMap&&(ba.envMap.value=qa.envMap,
ba.flipEnvMap.value=qa.envMap.isCubeTexture?-1:1,ba.reflectivity.value=qa.reflectivity,ba.refractionRatio.value=qa.refractionRatio,ba.maxMipLevel.value=Sb.get(qa.envMap).__maxMipLevel);qa.lightMap&&(ba.lightMap.value=qa.lightMap,ba.lightMapIntensity.value=qa.lightMapIntensity);qa.aoMap&&(ba.aoMap.value=qa.aoMap,ba.aoMapIntensity.value=qa.aoMapIntensity);if(qa.map)var fa=qa.map;else qa.specularMap?fa=qa.specularMap:qa.displacementMap?fa=qa.displacementMap:qa.normalMap?fa=qa.normalMap:qa.bumpMap?fa=
qa.bumpMap:qa.roughnessMap?fa=qa.roughnessMap:qa.metalnessMap?fa=qa.metalnessMap:qa.alphaMap?fa=qa.alphaMap:qa.emissiveMap&&(fa=qa.emissiveMap);void 0!==fa&&(fa.isWebGLRenderTarget&&(fa=fa.texture),!0===fa.matrixAutoUpdate&&fa.updateMatrix(),ba.uvTransform.value.copy(fa.matrix))}function U(ba,qa){ba.specular.value.copy(qa.specular);ba.shininess.value=Math.max(qa.shininess,1E-4);qa.emissiveMap&&(ba.emissiveMap.value=qa.emissiveMap);qa.bumpMap&&(ba.bumpMap.value=qa.bumpMap,ba.bumpScale.value=qa.bumpScale,
1===qa.side&&(ba.bumpScale.value*=-1));qa.normalMap&&(ba.normalMap.value=qa.normalMap,ba.normalScale.value.copy(qa.normalScale),1===qa.side&&ba.normalScale.value.negate());qa.displacementMap&&(ba.displacementMap.value=qa.displacementMap,ba.displacementScale.value=qa.displacementScale,ba.displacementBias.value=qa.displacementBias)}function Z(ba,qa){ba.roughness.value=qa.roughness;ba.metalness.value=qa.metalness;qa.roughnessMap&&(ba.roughnessMap.value=qa.roughnessMap);qa.metalnessMap&&(ba.metalnessMap.value=
qa.metalnessMap);qa.emissiveMap&&(ba.emissiveMap.value=qa.emissiveMap);qa.bumpMap&&(ba.bumpMap.value=qa.bumpMap,ba.bumpScale.value=qa.bumpScale,1===qa.side&&(ba.bumpScale.value*=-1));qa.normalMap&&(ba.normalMap.value=qa.normalMap,ba.normalScale.value.copy(qa.normalScale),1===qa.side&&ba.normalScale.value.negate());qa.displacementMap&&(ba.displacementMap.value=qa.displacementMap,ba.displacementScale.value=qa.displacementScale,ba.displacementBias.value=qa.displacementBias);qa.envMap&&(ba.envMapIntensity.value=
qa.envMapIntensity)}console.log("THREE.WebGLRenderer","104");d=d||{};var ca=void 0!==d.canvas?d.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),la=void 0!==d.context?d.context:null,ra=void 0!==d.alpha?d.alpha:!1,ia=void 0!==d.depth?d.depth:!0,va=void 0!==d.stencil?d.stencil:!0,ma=void 0!==d.antialias?d.antialias:!1,na=void 0!==d.premultipliedAlpha?d.premultipliedAlpha:!0,ya=void 0!==d.preserveDrawingBuffer?d.preserveDrawingBuffer:!1,xa=void 0!==d.powerPreference?d.powerPreference:
"default",Ga=null,Na=null;this.domElement=ca;this.context=null;this.debug={checkShaderErrors:!1};this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var Ha=this,Ma=!1,Pa=null,Za=null,ea=null,ha=-1;var ua=
k=null;var Ba=!1;var Ja=null,Ta=null,yb=new l,zb=new l,jb=null,nb=ca.width,rb=ca.height,Eb=1,Sa=new l(0,0,nb,rb),sa=new l(0,0,nb,rb),Ya=!1,ob=new z,xb=new id,ib=!1,qb=!1,bb=new A,gb=new f;try{ra={alpha:ra,depth:ia,stencil:va,antialias:ma,premultipliedAlpha:na,preserveDrawingBuffer:ya,powerPreference:xa};ca.addEventListener("webglcontextlost",t,!1);ca.addEventListener("webglcontextrestored",x,!1);var Ia=la||ca.getContext("webgl",ra)||ca.getContext("experimental-webgl",ra);if(null===Ia){if(null!==ca.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");
throw Error("Error creating WebGL context.");}void 0===Ia.getShaderPrecisionFormat&&(Ia.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ba){throw console.error("THREE.WebGLRenderer: "+ba.message),ba;}var Wa,kb,cb,Db,Sb,wc,Qd,aj,sf,De,Ih,uf,je,Wl,Xl,Yl,Bd;p();var Rd="undefined"!==typeof navigator&&"xr"in navigator?new Zo(Ha):new Vl(Ha);this.vr=Rd;var Zl=new Ql(Ha,sf,kb.maxTextureSize);this.shadowMap=Zl;this.getContext=function(){return Ia};this.getContextAttributes=
function(){return Ia.getContextAttributes()};this.forceContextLoss=function(){var ba=Wa.get("WEBGL_lose_context");ba&&ba.loseContext()};this.forceContextRestore=function(){var ba=Wa.get("WEBGL_lose_context");ba&&ba.restoreContext()};this.getPixelRatio=function(){return Eb};this.setPixelRatio=function(ba){void 0!==ba&&(Eb=ba,this.setSize(nb,rb,!1))};this.getSize=function(ba){void 0===ba&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),ba=new c);return ba.set(nb,rb)};
this.setSize=function(ba,qa,fa){Rd.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(nb=ba,rb=qa,ca.width=ba*Eb,ca.height=qa*Eb,!1!==fa&&(ca.style.width=ba+"px",ca.style.height=qa+"px"),this.setViewport(ba,qa))};this.getDrawingBufferSize=function(ba){void 0===ba&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),ba=new c);return ba.set(nb*Eb,rb*Eb)};this.setDrawingBufferSize=function(ba,qa,fa){nb=ba;rb=
qa;Eb=fa;ca.width=ba*fa;ca.height=qa*fa;this.setViewport(ba,qa)};this.getCurrentViewport=function(ba){void 0===ba&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),ba=new l);return ba.copy(yb)};this.getViewport=function(ba){return ba.copy(Sa)};this.setViewport=function(ba,qa){(0).isVector4?Sa.set((0).x,(0).y,(0).z,(0).w):Sa.set(0,0,ba,qa);cb.viewport(yb.copy(Sa).multiplyScalar(Eb))};this.getScissor=function(ba){return ba.copy(sa)};this.setScissor=function(ba,
qa,fa,Qa){ba.isVector4?sa.set(ba.x,ba.y,ba.z,ba.w):sa.set(ba,qa,fa,Qa);cb.scissor(zb.copy(sa).multiplyScalar(Eb))};this.getScissorTest=function(){return Ya};this.setScissorTest=function(ba){cb.setScissorTest(Ya=ba)};this.getClearColor=function(){return je.getClearColor()};this.setClearColor=function(){je.setClearColor.apply(je,arguments)};this.getClearAlpha=function(){return je.getClearAlpha()};this.setClearAlpha=function(){je.setClearAlpha.apply(je,arguments)};this.clear=function(ba,qa,fa){var Qa=
0;if(void 0===ba||ba)Qa|=16384;if(void 0===qa||qa)Qa|=256;if(void 0===fa||fa)Qa|=1024;Ia.clear(Qa)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.dispose=function(){ca.removeEventListener("webglcontextlost",t,!1);ca.removeEventListener("webglcontextrestored",x,!1);Ih.dispose();uf.dispose();Sb.dispose();sf.dispose();Rd.dispose();Jh.stop()};this.renderBufferImmediate=function(ba,qa){cb.initAttributes();
var fa=Sb.get(ba);ba.hasPositions&&!fa.position&&(fa.position=Ia.createBuffer());ba.hasNormals&&!fa.normal&&(fa.normal=Ia.createBuffer());ba.hasUvs&&!fa.uv&&(fa.uv=Ia.createBuffer());ba.hasColors&&!fa.color&&(fa.color=Ia.createBuffer());qa=qa.getAttributes();ba.hasPositions&&(Ia.bindBuffer(34962,fa.position),Ia.bufferData(34962,ba.positionArray,35048),cb.enableAttribute(qa.position),Ia.vertexAttribPointer(qa.position,3,5126,!1,0,0));ba.hasNormals&&(Ia.bindBuffer(34962,fa.normal),Ia.bufferData(34962,
ba.normalArray,35048),cb.enableAttribute(qa.normal),Ia.vertexAttribPointer(qa.normal,3,5126,!1,0,0));ba.hasUvs&&(Ia.bindBuffer(34962,fa.uv),Ia.bufferData(34962,ba.uvArray,35048),cb.enableAttribute(qa.uv),Ia.vertexAttribPointer(qa.uv,2,5126,!1,0,0));ba.hasColors&&(Ia.bindBuffer(34962,fa.color),Ia.bufferData(34962,ba.colorArray,35048),cb.enableAttribute(qa.color),Ia.vertexAttribPointer(qa.color,3,5126,!1,0,0));cb.disableUnusedAttributes();Ia.drawArrays(4,0,ba.count);ba.count=0};this.renderBufferDirect=
function(ba,qa,fa,Qa,Va,Xa){cb.setMaterial(Qa,Va.isMesh&&0>Va.matrixWorld.determinant());var Ua=Q(ba,qa,Qa,Va),eb=!1;if(k!==fa.id||ua!==Ua.id||Ba!==(!0===Qa.wireframe))k=fa.id,ua=Ua.id,Ba=!0===Qa.wireframe,eb=!0;Va.morphTargetInfluences&&(Wl.update(Va,fa,Qa,Ua),eb=!0);var wb=fa.index,hc=fa.attributes.position;qa=1;!0===Qa.wireframe&&(wb=aj.getWireframeAttribute(fa),qa=2);ba=Xl;if(null!==wb){var Fa=Qd.get(wb);ba=Yl;ba.setIndex(Fa)}if(eb){if(fa&&fa.isInstancedBufferGeometry&&!kb.isWebGL2&&null===Wa.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
else{cb.initAttributes();eb=fa.attributes;Ua=Ua.getAttributes();var Cd=Qa.defaultAttributeValues;for(Ee in Ua){var Bc=Ua[Ee];if(0<=Bc){var lc=eb[Ee];if(void 0!==lc){var Lc=lc.normalized,$l=lc.itemSize,Fe=Qd.get(lc);if(void 0!==Fe){var am=Fe.buffer,bm=Fe.type;Fe=Fe.bytesPerElement;if(lc.isInterleavedBufferAttribute){var vf=lc.data,$o=vf.stride;lc=lc.offset;vf&&vf.isInstancedInterleavedBuffer?(cb.enableAttributeAndDivisor(Bc,vf.meshPerAttribute),void 0===fa.maxInstancedCount&&(fa.maxInstancedCount=
vf.meshPerAttribute*vf.count)):cb.enableAttribute(Bc);Ia.bindBuffer(34962,am);Ia.vertexAttribPointer(Bc,$l,bm,Lc,$o*Fe,lc*Fe)}else lc.isInstancedBufferAttribute?(cb.enableAttributeAndDivisor(Bc,lc.meshPerAttribute),void 0===fa.maxInstancedCount&&(fa.maxInstancedCount=lc.meshPerAttribute*lc.count)):cb.enableAttribute(Bc),Ia.bindBuffer(34962,am),Ia.vertexAttribPointer(Bc,$l,bm,Lc,0,0)}}else if(void 0!==Cd&&(Lc=Cd[Ee],void 0!==Lc))switch(Lc.length){case 2:Ia.vertexAttrib2fv(Bc,Lc);break;case 3:Ia.vertexAttrib3fv(Bc,
Lc);break;case 4:Ia.vertexAttrib4fv(Bc,Lc);break;default:Ia.vertexAttrib1fv(Bc,Lc)}}}cb.disableUnusedAttributes()}null!==wb&&Ia.bindBuffer(34963,Fa.buffer)}Fa=Infinity;null!==wb?Fa=wb.count:void 0!==hc&&(Fa=hc.count);wb=fa.drawRange.start*qa;hc=null!==Xa?Xa.start*qa:0;var Ee=Math.max(wb,hc);Xa=Math.max(0,Math.min(Fa,wb+fa.drawRange.count*qa,hc+(null!==Xa?Xa.count*qa:Infinity))-1-Ee+1);if(0!==Xa){if(Va.isMesh)if(!0===Qa.wireframe)cb.setLineWidth(Qa.wireframeLinewidth*(null===Za?Eb:1)),ba.setMode(1);
else switch(Va.drawMode){case 0:ba.setMode(4);break;case 1:ba.setMode(5);break;case 2:ba.setMode(6)}else Va.isLine?(Qa=Qa.linewidth,void 0===Qa&&(Qa=1),cb.setLineWidth(Qa*(null===Za?Eb:1)),Va.isLineSegments?ba.setMode(1):Va.isLineLoop?ba.setMode(2):ba.setMode(3)):Va.isPoints?ba.setMode(0):Va.isSprite&&ba.setMode(4);fa&&fa.isInstancedBufferGeometry?0<fa.maxInstancedCount&&ba.renderInstances(fa,Ee,Xa):ba.render(Ee,Xa)}};this.compile=function(ba,qa){Na=uf.get(ba,qa);Na.init();ba.traverse(function(fa){fa.isLight&&
(Na.pushLight(fa),fa.castShadow&&Na.pushShadow(fa))});Na.setupLights(qa);ba.traverse(function(fa){if(fa.material)if(Array.isArray(fa.material))for(var Qa=0;Qa<fa.material.length;Qa++)O(fa.material[Qa],ba.fog,fa);else O(fa.material,ba.fog,fa)})};var bj=null,Jh=new J;Jh.setAnimationLoop(function(ba){Rd.isPresenting()||bj&&bj(ba)});"undefined"!==typeof window&&Jh.setContext(window);this.setAnimationLoop=function(ba){bj=ba;Rd.setAnimationLoop(ba);Jh.start()};this.render=function(ba,qa,fa,Qa){if(void 0!==
fa){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var Va=fa}if(void 0!==Qa){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var Xa=Qa}qa&&qa.isCamera?Ma||(ua=k=null,Ba=!1,ha=-1,Ja=null,!0===ba.autoUpdate&&ba.updateMatrixWorld(),null===qa.parent&&qa.updateMatrixWorld(),Rd.enabled&&(qa=Rd.getCamera(qa)),Na=uf.get(ba,qa),Na.init(),ba.onBeforeRender(Ha,ba,qa,Va||Za),
bb.multiplyMatrices(qa.projectionMatrix,qa.matrixWorldInverse),ob.setFromMatrix(bb),qb=this.localClippingEnabled,ib=xb.init(this.clippingPlanes,qb,qa),Ga=Ih.get(ba,qa),Ga.init(),G(ba,qa,0,Ha.sortObjects),!0===Ha.sortObjects&&Ga.sort(),ib&&xb.beginShadows(),Zl.render(Na.state.shadowsArray,ba,qa),Na.setupLights(qa),ib&&xb.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==Va&&this.setRenderTarget(Va),je.render(Ga,ba,qa,Xa),fa=Ga.opaque,Qa=Ga.transparent,ba.overrideMaterial?(Va=ba.overrideMaterial,
fa.length&&I(fa,ba,qa,Va),Qa.length&&I(Qa,ba,qa,Va)):(fa.length&&I(fa,ba,qa),Qa.length&&I(Qa,ba,qa)),null!==Za&&(wc.updateRenderTargetMipmap(Za),wc.updateMultisampleRenderTarget(Za)),cb.buffers.depth.setTest(!0),cb.buffers.depth.setMask(!0),cb.buffers.color.setMask(!0),cb.setPolygonOffset(!1),Rd.enabled&&Rd.submitFrame(),Na=Ga=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")};this.setFramebuffer=function(ba){Pa=ba};this.getRenderTarget=function(){return Za};
this.setRenderTarget=function(ba,qa){(Za=ba)&&void 0===Sb.get(ba).__webglFramebuffer&&wc.setupRenderTarget(ba);var fa=Pa,Qa=!1;ba?(fa=Sb.get(ba).__webglFramebuffer,ba.isWebGLRenderTargetCube?(fa=fa[qa||0],Qa=!0):fa=ba.isWebGLMultisampleRenderTarget?Sb.get(ba).__webglMultisampledFramebuffer:fa,yb.copy(ba.viewport),zb.copy(ba.scissor),jb=ba.scissorTest):(yb.copy(Sa).multiplyScalar(Eb),zb.copy(sa).multiplyScalar(Eb),jb=Ya);ea!==fa&&(Ia.bindFramebuffer(36160,fa),ea=fa);cb.viewport(yb);cb.scissor(zb);
cb.setScissorTest(jb);Qa&&(ba=Sb.get(ba.texture),Ia.framebufferTexture2D(36160,36064,34069+(qa||0),ba.__webglTexture,0))};this.readRenderTargetPixels=function(ba,qa,fa,Qa,Va,Xa){if(ba&&ba.isWebGLRenderTarget){var Ua=Sb.get(ba).__webglFramebuffer;if(Ua){var eb=!1;Ua!==ea&&(Ia.bindFramebuffer(36160,Ua),eb=!0);try{var wb=ba.texture,hc=wb.format,Fa=wb.type;1023!==hc&&Bd.convert(hc)!==Ia.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
1009===Fa||Bd.convert(Fa)===Ia.getParameter(35738)||1015===Fa&&(kb.isWebGL2||Wa.get("OES_texture_float")||Wa.get("WEBGL_color_buffer_float"))||1016===Fa&&(kb.isWebGL2?Wa.get("EXT_color_buffer_float"):Wa.get("EXT_color_buffer_half_float"))?36053===Ia.checkFramebufferStatus(36160)?0<=qa&&qa<=ba.width-Qa&&0<=fa&&fa<=ba.height-Va&&Ia.readPixels(qa,fa,Qa,Va,Bd.convert(hc),Bd.convert(Fa),Xa):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{eb&&Ia.bindFramebuffer(36160,ea)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};this.copyFramebufferToTexture=function(ba,qa,fa){var Qa=qa.image.width,Va=qa.image.height,Xa=Bd.convert(qa.format);wc.setTexture2D(qa,0);Ia.copyTexImage2D(3553,fa||0,Xa,ba.x,ba.y,Qa,Va,0)};this.copyTextureToTexture=
function(ba,qa,fa,Qa){var Va=qa.image.width,Xa=qa.image.height,Ua=Bd.convert(fa.format),eb=Bd.convert(fa.type);wc.setTexture2D(fa,0);qa.isDataTexture?Ia.texSubImage2D(3553,Qa||0,ba.x,ba.y,Va,Xa,Ua,eb,qa.image.data):Ia.texSubImage2D(3553,Qa||0,ba.x,ba.y,Ua,eb,qa.image)}}function Kh(d,k){this.name="";this.color=new D(d);this.density=void 0!==k?k:2.5E-4}function Lh(d,k,p){this.name="";this.color=new D(d);this.near=void 0!==k?k:1;this.far=void 0!==p?p:1E3}function Mh(){P.call(this);this.type="Scene";
this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function Ge(d,k){this.array=d;this.stride=k;this.count=void 0!==d?d.length/k:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0}function zg(d,k,p,t){this.data=d;this.itemSize=k;this.offset=p;this.normalized=!0===t}function ke(d){Ka.call(this);this.type="SpriteMaterial";this.color=new D(16777215);this.map=null;this.rotation=0;this.sizeAttenuation=!0;this.lights=!1;this.transparent=!0;this.setValues(d)}function Ag(d){P.call(this);
this.type="Sprite";if(void 0===wf){wf=new ka;var k=new Ge(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);wf.setIndex([0,1,2,0,2,3]);wf.addAttribute("position",new zg(k,3,0,!1));wf.addAttribute("uv",new zg(k,2,3,!1))}this.geometry=wf;this.material=void 0!==d?d:new ke;this.center=new c(.5,.5)}function Bg(){P.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Cg(d,k){d&&d.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");
ac.call(this,d,k);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new A;this.bindMatrixInverse=new A}function Nh(d,k){d=d||[];this.bones=d.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===k)this.calculateInverses();else if(this.bones.length===k.length)this.boneInverses=k.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],d=0,k=this.bones.length;d<k;d++)this.boneInverses.push(new A)}function cj(){P.call(this);
this.type="Bone"}function Nb(d){Ka.call(this);this.type="LineBasicMaterial";this.color=new D(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(d)}function xc(d,k,p){1===p&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.");P.call(this);this.type="Line";this.geometry=void 0!==d?d:new ka;this.material=void 0!==k?k:new Nb({color:16777215*Math.random()})}function Wb(d,k){xc.call(this,d,k);this.type="LineSegments"}
function Oh(d,k){xc.call(this,d,k);this.type="LineLoop"}function jd(d){Ka.call(this);this.type="PointsMaterial";this.color=new D(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=this.morphTargets=!1;this.setValues(d)}function xf(d,k){P.call(this);this.type="Points";this.geometry=void 0!==d?d:new ka;this.material=void 0!==k?k:new jd({color:16777215*Math.random()})}function dj(d,k,p,t,x,y,B,F,G){h.call(this,d,k,p,t,x,y,B,F,G);this.format=void 0!==B?B:1022;this.minFilter=void 0!==
y?y:1006;this.magFilter=void 0!==x?x:1006;this.generateMipmaps=!1}function yf(d,k,p,t,x,y,B,F,G,I,N,O){h.call(this,null,y,B,F,G,I,t,x,N,O);this.image={width:k,height:p};this.mipmaps=d;this.generateMipmaps=this.flipY=!1}function Dg(d,k,p,t,x,y,B,F,G){h.call(this,d,k,p,t,x,y,B,F,G);this.needsUpdate=!0}function Eg(d,k,p,t,x,y,B,F,G,I){I=void 0!==I?I:1026;if(1026!==I&&1027!==I)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===p&&1026===I&&(p=1012);
void 0===p&&1027===I&&(p=1020);h.call(this,null,t,x,y,B,F,I,p,G);this.image={width:d,height:k};this.magFilter=void 0!==B?B:1003;this.minFilter=void 0!==F?F:1003;this.generateMipmaps=this.flipY=!1}function zf(d){ka.call(this);this.type="WireframeGeometry";var k=[],p,t,x,y=[0,0],B={},F=["a","b","c"];if(d&&d.isGeometry){var G=d.faces;var I=0;for(t=G.length;I<t;I++){var N=G[I];for(p=0;3>p;p++){var O=N[F[p]];var Q=N[F[(p+1)%3]];y[0]=Math.min(O,Q);y[1]=Math.max(O,Q);O=y[0]+","+y[1];void 0===B[O]&&(B[O]=
{index1:y[0],index2:y[1]})}}for(O in B)I=B[O],F=d.vertices[I.index1],k.push(F.x,F.y,F.z),F=d.vertices[I.index2],k.push(F.x,F.y,F.z)}else if(d&&d.isBufferGeometry)if(F=new f,null!==d.index){G=d.attributes.position;N=d.index;var V=d.groups;0===V.length&&(V=[{start:0,count:N.count,materialIndex:0}]);d=0;for(x=V.length;d<x;++d)for(I=V[d],p=I.start,t=I.count,I=p,t=p+t;I<t;I+=3)for(p=0;3>p;p++)O=N.getX(I+p),Q=N.getX(I+(p+1)%3),y[0]=Math.min(O,Q),y[1]=Math.max(O,Q),O=y[0]+","+y[1],void 0===B[O]&&(B[O]={index1:y[0],
index2:y[1]});for(O in B)I=B[O],F.fromBufferAttribute(G,I.index1),k.push(F.x,F.y,F.z),F.fromBufferAttribute(G,I.index2),k.push(F.x,F.y,F.z)}else for(G=d.attributes.position,I=0,t=G.count/3;I<t;I++)for(p=0;3>p;p++)B=3*I+p,F.fromBufferAttribute(G,B),k.push(F.x,F.y,F.z),B=3*I+(p+1)%3,F.fromBufferAttribute(G,B),k.push(F.x,F.y,F.z);this.addAttribute("position",new da(k,3))}function Fg(d,k,p){S.call(this);this.type="ParametricGeometry";this.parameters={func:d,slices:k,stacks:p};this.fromBufferGeometry(new Af(d,
k,p));this.mergeVertices()}function Af(d,k,p){ka.call(this);this.type="ParametricBufferGeometry";this.parameters={func:d,slices:k,stacks:p};var t=[],x=[],y=[],B=[],F=new f,G=new f,I=new f,N=new f,O=new f,Q,V;3>d.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var U=k+1;for(Q=0;Q<=p;Q++){var Z=Q/p;for(V=0;V<=k;V++){var ca=V/k;d(ca,Z,G);x.push(G.x,G.y,G.z);0<=ca-1E-5?(d(ca-1E-5,Z,I),N.subVectors(G,I)):(d(ca+1E-5,Z,I),N.subVectors(I,G));0<=Z-
1E-5?(d(ca,Z-1E-5,I),O.subVectors(G,I)):(d(ca,Z+1E-5,I),O.subVectors(I,G));F.crossVectors(N,O).normalize();y.push(F.x,F.y,F.z);B.push(ca,Z)}}for(Q=0;Q<p;Q++)for(V=0;V<k;V++)d=Q*U+V+1,F=(Q+1)*U+V+1,G=(Q+1)*U+V,t.push(Q*U+V,d,G),t.push(d,F,G);this.setIndex(t);this.addAttribute("position",new da(x,3));this.addAttribute("normal",new da(y,3));this.addAttribute("uv",new da(B,2))}function Gg(d,k,p,t){S.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:d,indices:k,radius:p,detail:t};this.fromBufferGeometry(new Mc(d,
k,p,t));this.mergeVertices()}function Mc(d,k,p,t){function x(I){F.push(I.x,I.y,I.z)}function y(I,N){I*=3;N.x=d[I+0];N.y=d[I+1];N.z=d[I+2]}function B(I,N,O,Q){0>Q&&1===I.x&&(G[N]=I.x-1);0===O.x&&0===O.z&&(G[N]=Q/2/Math.PI+.5)}ka.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:d,indices:k,radius:p,detail:t};p=p||1;t=t||0;var F=[],G=[];(function(I){for(var N=new f,O=new f,Q=new f,V=0;V<k.length;V+=3){y(k[V+0],N);y(k[V+1],O);y(k[V+2],Q);var U,Z,ca=N,la=O,ra=Q,ia=Math.pow(2,I),
va=[];for(Z=0;Z<=ia;Z++){va[Z]=[];var ma=ca.clone().lerp(ra,Z/ia),na=la.clone().lerp(ra,Z/ia),ya=ia-Z;for(U=0;U<=ya;U++)va[Z][U]=0===U&&Z===ia?ma:ma.clone().lerp(na,U/ya)}for(Z=0;Z<ia;Z++)for(U=0;U<2*(ia-Z)-1;U++)ca=Math.floor(U/2),0===U%2?(x(va[Z][ca+1]),x(va[Z+1][ca]),x(va[Z][ca])):(x(va[Z][ca+1]),x(va[Z+1][ca+1]),x(va[Z+1][ca]))}})(t);(function(I){for(var N=new f,O=0;O<F.length;O+=3)N.x=F[O+0],N.y=F[O+1],N.z=F[O+2],N.normalize().multiplyScalar(I),F[O+0]=N.x,F[O+1]=N.y,F[O+2]=N.z})(p);(function(){for(var I=
new f,N=0;N<F.length;N+=3)I.x=F[N+0],I.y=F[N+1],I.z=F[N+2],G.push(Math.atan2(I.z,-I.x)/2/Math.PI+.5,1-(Math.atan2(-I.y,Math.sqrt(I.x*I.x+I.z*I.z))/Math.PI+.5));I=new f;N=new f;for(var O=new f,Q=new f,V=new c,U=new c,Z=new c,ca=0,la=0;ca<F.length;ca+=9,la+=6){I.set(F[ca+0],F[ca+1],F[ca+2]);N.set(F[ca+3],F[ca+4],F[ca+5]);O.set(F[ca+6],F[ca+7],F[ca+8]);V.set(G[la+0],G[la+1]);U.set(G[la+2],G[la+3]);Z.set(G[la+4],G[la+5]);Q.copy(I).add(N).add(O).divideScalar(3);var ra=Math.atan2(Q.z,-Q.x);B(V,la+0,I,ra);
B(U,la+2,N,ra);B(Z,la+4,O,ra)}for(I=0;I<G.length;I+=6)N=G[I+0],O=G[I+2],Q=G[I+4],V=Math.min(N,O,Q),.9<Math.max(N,O,Q)&&.1>V&&(.2>N&&(G[I+0]+=1),.2>O&&(G[I+2]+=1),.2>Q&&(G[I+4]+=1))})();this.addAttribute("position",new da(F,3));this.addAttribute("normal",new da(F.slice(),3));this.addAttribute("uv",new da(G,2));0===t?this.computeVertexNormals():this.normalizeNormals()}function Hg(d,k){S.call(this);this.type="TetrahedronGeometry";this.parameters={radius:d,detail:k};this.fromBufferGeometry(new Bf(d,k));
this.mergeVertices()}function Bf(d,k){Mc.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],d,k);this.type="TetrahedronBufferGeometry";this.parameters={radius:d,detail:k}}function Ig(d,k){S.call(this);this.type="OctahedronGeometry";this.parameters={radius:d,detail:k};this.fromBufferGeometry(new He(d,k));this.mergeVertices()}function He(d,k){Mc.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],d,k);this.type="OctahedronBufferGeometry";
this.parameters={radius:d,detail:k}}function Jg(d,k){S.call(this);this.type="IcosahedronGeometry";this.parameters={radius:d,detail:k};this.fromBufferGeometry(new Cf(d,k));this.mergeVertices()}function Cf(d,k){var p=(1+Math.sqrt(5))/2;Mc.call(this,[-1,p,0,1,p,0,-1,-p,0,1,-p,0,0,-1,p,0,1,p,0,-1,-p,0,1,-p,p,0,-1,p,0,1,-p,0,-1,-p,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],d,k);this.type="IcosahedronBufferGeometry";
this.parameters={radius:d,detail:k}}function Kg(d,k){S.call(this);this.type="DodecahedronGeometry";this.parameters={radius:d,detail:k};this.fromBufferGeometry(new Df(d,k));this.mergeVertices()}function Df(d,k){var p=(1+Math.sqrt(5))/2,t=1/p;Mc.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-t,-p,0,-t,p,0,t,-p,0,t,p,-t,-p,0,-t,p,0,t,-p,0,t,p,0,-p,0,-t,p,0,-t,-p,0,t,p,0,t],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,
0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],d,k);this.type="DodecahedronBufferGeometry";this.parameters={radius:d,detail:k}}function Lg(d,k,p,t,x,y){S.call(this);this.type="TubeGeometry";this.parameters={path:d,tubularSegments:k,radius:p,radialSegments:t,closed:x};void 0!==y&&console.warn("THREE.TubeGeometry: taper has been removed.");d=new Ie(d,k,p,t,x);this.tangents=d.tangents;
this.normals=d.normals;this.binormals=d.binormals;this.fromBufferGeometry(d);this.mergeVertices()}function Ie(d,k,p,t,x){function y(la){N=d.getPointAt(la/k,N);var ra=B.normals[la];la=B.binormals[la];for(Q=0;Q<=t;Q++){var ia=Q/t*Math.PI*2,va=Math.sin(ia);ia=-Math.cos(ia);G.x=ia*ra.x+va*la.x;G.y=ia*ra.y+va*la.y;G.z=ia*ra.z+va*la.z;G.normalize();U.push(G.x,G.y,G.z);F.x=N.x+p*G.x;F.y=N.y+p*G.y;F.z=N.z+p*G.z;V.push(F.x,F.y,F.z)}}ka.call(this);this.type="TubeBufferGeometry";this.parameters={path:d,tubularSegments:k,
radius:p,radialSegments:t,closed:x};k=k||64;p=p||1;t=t||8;x=x||!1;var B=d.computeFrenetFrames(k,x);this.tangents=B.tangents;this.normals=B.normals;this.binormals=B.binormals;var F=new f,G=new f,I=new c,N=new f,O,Q,V=[],U=[],Z=[],ca=[];for(O=0;O<k;O++)y(O);y(!1===x?k:0);for(O=0;O<=k;O++)for(Q=0;Q<=t;Q++)I.x=O/k,I.y=Q/t,Z.push(I.x,I.y);(function(){for(Q=1;Q<=k;Q++)for(O=1;O<=t;O++){var la=(t+1)*Q+(O-1),ra=(t+1)*Q+O,ia=(t+1)*(Q-1)+O;ca.push((t+1)*(Q-1)+(O-1),la,ia);ca.push(la,ra,ia)}})();this.setIndex(ca);
this.addAttribute("position",new da(V,3));this.addAttribute("normal",new da(U,3));this.addAttribute("uv",new da(Z,2))}function Mg(d,k,p,t,x,y,B){S.call(this);this.type="TorusKnotGeometry";this.parameters={radius:d,tube:k,tubularSegments:p,radialSegments:t,p:x,q:y};void 0!==B&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new Ef(d,k,p,t,x,y));this.mergeVertices()}function Ef(d,k,p,t,x,y){function B(na,ya,xa,Ga,Na){var Ha=
Math.sin(na);ya=xa/ya*na;xa=Math.cos(ya);Na.x=Ga*(2+xa)*.5*Math.cos(na);Na.y=Ga*(2+xa)*Ha*.5;Na.z=Ga*Math.sin(ya)*.5}ka.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:d,tube:k,tubularSegments:p,radialSegments:t,p:x,q:y};d=d||1;k=k||.4;p=Math.floor(p)||64;t=Math.floor(t)||8;x=x||2;y=y||3;var F=[],G=[],I=[],N=[],O,Q=new f,V=new f,U=new f,Z=new f,ca=new f,la=new f,ra=new f;for(O=0;O<=p;++O){var ia=O/p*x*Math.PI*2;B(ia,x,y,d,U);B(ia+.01,x,y,d,Z);la.subVectors(Z,U);ra.addVectors(Z,
U);ca.crossVectors(la,ra);ra.crossVectors(ca,la);ca.normalize();ra.normalize();for(ia=0;ia<=t;++ia){var va=ia/t*Math.PI*2,ma=-k*Math.cos(va);va=k*Math.sin(va);Q.x=U.x+(ma*ra.x+va*ca.x);Q.y=U.y+(ma*ra.y+va*ca.y);Q.z=U.z+(ma*ra.z+va*ca.z);G.push(Q.x,Q.y,Q.z);V.subVectors(Q,U).normalize();I.push(V.x,V.y,V.z);N.push(O/p);N.push(ia/t)}}for(ia=1;ia<=p;ia++)for(O=1;O<=t;O++)d=(t+1)*ia+(O-1),k=(t+1)*ia+O,x=(t+1)*(ia-1)+O,F.push((t+1)*(ia-1)+(O-1),d,x),F.push(d,k,x);this.setIndex(F);this.addAttribute("position",
new da(G,3));this.addAttribute("normal",new da(I,3));this.addAttribute("uv",new da(N,2))}function Ng(d,k,p,t,x){S.call(this);this.type="TorusGeometry";this.parameters={radius:d,tube:k,radialSegments:p,tubularSegments:t,arc:x};this.fromBufferGeometry(new Ff(d,k,p,t,x));this.mergeVertices()}function Ff(d,k,p,t,x){ka.call(this);this.type="TorusBufferGeometry";this.parameters={radius:d,tube:k,radialSegments:p,tubularSegments:t,arc:x};d=d||1;k=k||.4;p=Math.floor(p)||8;t=Math.floor(t)||6;x=x||2*Math.PI;
var y=[],B=[],F=[],G=[],I=new f,N=new f,O=new f,Q,V;for(Q=0;Q<=p;Q++)for(V=0;V<=t;V++){var U=V/t*x,Z=Q/p*Math.PI*2;N.x=(d+k*Math.cos(Z))*Math.cos(U);N.y=(d+k*Math.cos(Z))*Math.sin(U);N.z=k*Math.sin(Z);B.push(N.x,N.y,N.z);I.x=d*Math.cos(U);I.y=d*Math.sin(U);O.subVectors(N,I).normalize();F.push(O.x,O.y,O.z);G.push(V/t);G.push(Q/p)}for(Q=1;Q<=p;Q++)for(V=1;V<=t;V++)d=(t+1)*(Q-1)+V-1,k=(t+1)*(Q-1)+V,x=(t+1)*Q+V,y.push((t+1)*Q+V-1,d,x),y.push(d,k,x);this.setIndex(y);this.addAttribute("position",new da(B,
3));this.addAttribute("normal",new da(F,3));this.addAttribute("uv",new da(G,2))}function cm(d,k,p,t,x){for(var y,B=0,F=k,G=p-t;F<p;F+=t)B+=(d[G]-d[F])*(d[F+1]+d[G+1]),G=F;if(x===0<B)for(x=k;x<p;x+=t)y=dm(x,d[x],d[x+1],y);else for(x=p-t;x>=k;x-=t)y=dm(x,d[x],d[x+1],y);y&&Je(y,y.next)&&(Og(y),y=y.next);return y}function Pg(d,k){if(!d)return d;k||(k=d);do{var p=!1;if(d.steiner||!Je(d,d.next)&&0!==Hc(d.prev,d,d.next))d=d.next;else{Og(d);d=k=d.prev;if(d===d.next)break;p=!0}}while(p||d!==k);return k}function Qg(d,
k,p,t,x,y,B){if(d){if(!B&&y){var F=d,G=F;do null===G.z&&(G.z=ej(G.x,G.y,t,x,y)),G.prevZ=G.prev,G=G.nextZ=G.next;while(G!==F);G.prevZ.nextZ=null;G.prevZ=null;F=G;var I,N,O,Q,V=1;do{G=F;var U=F=null;for(N=0;G;){N++;var Z=G;for(I=O=0;I<V&&(O++,Z=Z.nextZ,Z);I++);for(Q=V;0<O||0<Q&&Z;)0!==O&&(0===Q||!Z||G.z<=Z.z)?(I=G,G=G.nextZ,O--):(I=Z,Z=Z.nextZ,Q--),U?U.nextZ=I:F=I,I.prevZ=U,U=I;G=Z}U.nextZ=null;V*=2}while(1<N)}for(F=d;d.prev!==d.next;){G=d.prev;Z=d.next;if(y)a:{U=d;I=t;Q=x;var ca=y;N=U.prev;O=U.next;
if(0<=Hc(N,U,O))U=!1;else{var la=N.x>U.x?N.x>O.x?N.x:O.x:U.x>O.x?U.x:O.x,ra=N.y>U.y?N.y>O.y?N.y:O.y:U.y>O.y?U.y:O.y;V=ej(N.x<U.x?N.x<O.x?N.x:O.x:U.x<O.x?U.x:O.x,N.y<U.y?N.y<O.y?N.y:O.y:U.y<O.y?U.y:O.y,I,Q,ca);I=ej(la,ra,I,Q,ca);for(Q=U.nextZ;Q&&Q.z<=I;){if(Q!==U.prev&&Q!==U.next&&Ph(N.x,N.y,U.x,U.y,O.x,O.y,Q.x,Q.y)&&0<=Hc(Q.prev,Q,Q.next)){U=!1;break a}Q=Q.nextZ}for(Q=U.prevZ;Q&&Q.z>=V;){if(Q!==U.prev&&Q!==U.next&&Ph(N.x,N.y,U.x,U.y,O.x,O.y,Q.x,Q.y)&&0<=Hc(Q.prev,Q,Q.next)){U=!1;break a}Q=Q.prevZ}U=
!0}}else a:if(U=d,N=U.prev,O=U.next,0<=Hc(N,U,O))U=!1;else{for(V=U.next.next;V!==U.prev;){if(Ph(N.x,N.y,U.x,U.y,O.x,O.y,V.x,V.y)&&0<=Hc(V.prev,V,V.next)){U=!1;break a}V=V.next}U=!0}if(U)k.push(G.i/p),k.push(d.i/p),k.push(Z.i/p),Og(d),F=d=Z.next;else if(d=Z,d===F){if(B)if(1===B){B=k;F=p;G=d;do Z=G.prev,U=G.next.next,!Je(Z,U)&&em(Z,G,G.next,U)&&Rg(Z,U)&&Rg(U,Z)&&(B.push(Z.i/F),B.push(G.i/F),B.push(U.i/F),Og(G),Og(G.next),G=d=U),G=G.next;while(G!==d);d=G;Qg(d,k,p,t,x,y,2)}else{if(2===B)a:{B=d;do{for(F=
B.next.next;F!==B.prev;){if(G=B.i!==F.i){G=B;Z=F;if(U=G.next.i!==Z.i&&G.prev.i!==Z.i){b:{U=G;do{if(U.i!==G.i&&U.next.i!==G.i&&U.i!==Z.i&&U.next.i!==Z.i&&em(U,U.next,G,Z)){U=!0;break b}U=U.next}while(U!==G);U=!1}U=!U}if(U=U&&Rg(G,Z)&&Rg(Z,G)){U=G;N=!1;O=(G.x+Z.x)/2;Z=(G.y+Z.y)/2;do U.y>Z!==U.next.y>Z&&U.next.y!==U.y&&O<(U.next.x-U.x)*(Z-U.y)/(U.next.y-U.y)+U.x&&(N=!N),U=U.next;while(U!==G);U=N}G=U}if(G){d=fm(B,F);B=Pg(B,B.next);d=Pg(d,d.next);Qg(B,k,p,t,x,y);Qg(d,k,p,t,x,y);break a}F=F.next}B=B.next}while(B!==
d)}}else Qg(Pg(d),k,p,t,x,y,1);break}}}}function ap(d,k){return d.x-k.x}function bp(d,k){var p=k,t=d.x,x=d.y,y=-Infinity;do{if(x<=p.y&&x>=p.next.y&&p.next.y!==p.y){var B=p.x+(x-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(B<=t&&B>y){y=B;if(B===t){if(x===p.y)return p;if(x===p.next.y)return p.next}var F=p.x<p.next.x?p:p.next}}p=p.next}while(p!==k);if(!F)return null;if(t===y)return F.prev;k=F;B=F.x;var G=F.y,I=Infinity;for(p=F.next;p!==k;){if(t>=p.x&&p.x>=B&&t!==p.x&&Ph(x<G?t:y,x,B,G,x<G?y:t,x,p.x,p.y)){var N=
Math.abs(x-p.y)/(t-p.x);(N<I||N===I&&p.x>F.x)&&Rg(p,d)&&(F=p,I=N)}p=p.next}return F}function ej(d,k,p,t,x){d=32767*(d-p)*x;k=32767*(k-t)*x;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;k=(k|k<<8)&16711935;k=(k|k<<4)&252645135;k=(k|k<<2)&858993459;return(d|d<<1)&1431655765|((k|k<<1)&1431655765)<<1}function cp(d){var k=d,p=d;do k.x<p.x&&(p=k),k=k.next;while(k!==d);return p}function Ph(d,k,p,t,x,y,B,F){return 0<=(x-B)*(k-F)-(d-B)*(y-F)&&0<=(d-B)*(t-F)-(p-B)*(k-F)&&0<=(p-B)*(y-F)-(x-B)*
(t-F)}function Hc(d,k,p){return(k.y-d.y)*(p.x-k.x)-(k.x-d.x)*(p.y-k.y)}function Je(d,k){return d.x===k.x&&d.y===k.y}function em(d,k,p,t){return Je(d,k)&&Je(p,t)||Je(d,t)&&Je(p,k)?!0:0<Hc(d,k,p)!==0<Hc(d,k,t)&&0<Hc(p,t,d)!==0<Hc(p,t,k)}function Rg(d,k){return 0>Hc(d.prev,d,d.next)?0<=Hc(d,k,d.next)&&0<=Hc(d,d.prev,k):0>Hc(d,k,d.prev)||0>Hc(d,d.next,k)}function fm(d,k){var p=new fj(d.i,d.x,d.y),t=new fj(k.i,k.x,k.y),x=d.next,y=k.prev;d.next=k;k.prev=d;p.next=x;x.prev=p;t.next=p;p.prev=t;y.next=t;t.prev=
y;return t}function dm(d,k,p,t){d=new fj(d,k,p);t?(d.next=t.next,d.prev=t,t.next.prev=d,t.next=d):(d.prev=d,d.next=d);return d}function Og(d){d.next.prev=d.prev;d.prev.next=d.next;d.prevZ&&(d.prevZ.nextZ=d.nextZ);d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function fj(d,k,p){this.i=d;this.x=k;this.y=p;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function gm(d){var k=d.length;2<k&&d[k-1].equals(d[0])&&d.pop()}function hm(d,k){for(var p=0;p<k.length;p++)d.push(k[p].x),d.push(k[p].y)}function Ke(d,
k){S.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:d,options:k};this.fromBufferGeometry(new Dd(d,k));this.mergeVertices()}function Dd(d,k){function p(G){function I(bb,gb,Ia){gb||console.error("THREE.ExtrudeGeometry: vec does not exist");return gb.clone().multiplyScalar(Ia).add(bb)}function N(bb,gb,Ia){var Wa=bb.x-gb.x;var kb=bb.y-gb.y;var cb=Ia.x-bb.x;var Db=Ia.y-bb.y,Sb=Wa*Wa+kb*kb;if(Math.abs(Wa*Db-kb*cb)>Number.EPSILON){var wc=Math.sqrt(Sb),Qd=Math.sqrt(cb*cb+Db*Db);Sb=gb.x-kb/
wc;gb=gb.y+Wa/wc;Db=((Ia.x-Db/Qd-Sb)*Db-(Ia.y+cb/Qd-gb)*cb)/(Wa*Db-kb*cb);cb=Sb+Wa*Db-bb.x;Wa=gb+kb*Db-bb.y;kb=cb*cb+Wa*Wa;if(2>=kb)return new c(cb,Wa);kb=Math.sqrt(kb/2)}else bb=!1,Wa>Number.EPSILON?cb>Number.EPSILON&&(bb=!0):Wa<-Number.EPSILON?cb<-Number.EPSILON&&(bb=!0):Math.sign(kb)===Math.sign(Db)&&(bb=!0),bb?(cb=-kb,kb=Math.sqrt(Sb)):(cb=Wa,Wa=kb,kb=Math.sqrt(Sb/2));return new c(cb/kb,Wa/kb)}function O(bb,gb){for(Sa=bb.length;0<=--Sa;){var Ia=Sa;var Wa=Sa-1;0>Wa&&(Wa=bb.length-1);var kb,cb=
ra+2*xa;for(kb=0;kb<cb;kb++){var Db=nb*kb,Sb=nb*(kb+1),wc=gb+Wa+Db,Qd=gb+Wa+Sb;Sb=gb+Ia+Sb;U(gb+Ia+Db);U(wc);U(Sb);U(wc);U(Qd);U(Sb);Db=x.length/3;Db=Na.generateSideWallUV(t,x,Db-6,Db-3,Db-2,Db-1);Z(Db[0]);Z(Db[1]);Z(Db[3]);Z(Db[1]);Z(Db[2]);Z(Db[3])}}}function Q(bb,gb,Ia){ca.push(bb);ca.push(gb);ca.push(Ia)}function V(bb,gb,Ia){U(bb);U(gb);U(Ia);bb=x.length/3;bb=Na.generateTopUV(t,x,bb-3,bb-2,bb-1);Z(bb[0]);Z(bb[1]);Z(bb[2])}function U(bb){x.push(ca[3*bb]);x.push(ca[3*bb+1]);x.push(ca[3*bb+2])}function Z(bb){y.push(bb.x);
y.push(bb.y)}var ca=[],la=void 0!==k.curveSegments?k.curveSegments:12,ra=void 0!==k.steps?k.steps:1,ia=void 0!==k.depth?k.depth:100,va=void 0!==k.bevelEnabled?k.bevelEnabled:!0,ma=void 0!==k.bevelThickness?k.bevelThickness:6,na=void 0!==k.bevelSize?k.bevelSize:ma-2,ya=void 0!==k.bevelOffset?k.bevelOffset:0,xa=void 0!==k.bevelSegments?k.bevelSegments:3,Ga=k.extrudePath,Na=void 0!==k.UVGenerator?k.UVGenerator:dp;void 0!==k.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),
ia=k.amount);var Ha=!1;if(Ga){var Ma=Ga.getSpacedPoints(ra);Ha=!0;va=!1;var Pa=Ga.computeFrenetFrames(ra,!1);var Za=new f;var ea=new f;var ha=new f}va||(ya=na=ma=xa=0);var ua;la=G.extractPoints(la);G=la.shape;var Ba=la.holes;if(!Sd.isClockWise(G)){G=G.reverse();var Ja=0;for(ua=Ba.length;Ja<ua;Ja++){var Ta=Ba[Ja];Sd.isClockWise(Ta)&&(Ba[Ja]=Ta.reverse())}}var yb=Sd.triangulateShape(G,Ba),zb=G;Ja=0;for(ua=Ba.length;Ja<ua;Ja++)Ta=Ba[Ja],G=G.concat(Ta);var jb,nb=G.length,rb,Eb=yb.length;la=[];var Sa=
0;var sa=zb.length;var Ya=sa-1;for(jb=Sa+1;Sa<sa;Sa++,Ya++,jb++)Ya===sa&&(Ya=0),jb===sa&&(jb=0),la[Sa]=N(zb[Sa],zb[Ya],zb[jb]);Ga=[];var ob=la.concat();Ja=0;for(ua=Ba.length;Ja<ua;Ja++){Ta=Ba[Ja];var xb=[];Sa=0;sa=Ta.length;Ya=sa-1;for(jb=Sa+1;Sa<sa;Sa++,Ya++,jb++)Ya===sa&&(Ya=0),jb===sa&&(jb=0),xb[Sa]=N(Ta[Sa],Ta[Ya],Ta[jb]);Ga.push(xb);ob=ob.concat(xb)}for(Ya=0;Ya<xa;Ya++){sa=Ya/xa;var ib=ma*Math.cos(sa*Math.PI/2);jb=na*Math.sin(sa*Math.PI/2)+ya;Sa=0;for(sa=zb.length;Sa<sa;Sa++){var qb=I(zb[Sa],
la[Sa],jb);Q(qb.x,qb.y,-ib)}Ja=0;for(ua=Ba.length;Ja<ua;Ja++)for(Ta=Ba[Ja],xb=Ga[Ja],Sa=0,sa=Ta.length;Sa<sa;Sa++)qb=I(Ta[Sa],xb[Sa],jb),Q(qb.x,qb.y,-ib)}jb=na+ya;for(Sa=0;Sa<nb;Sa++)qb=va?I(G[Sa],ob[Sa],jb):G[Sa],Ha?(ea.copy(Pa.normals[0]).multiplyScalar(qb.x),Za.copy(Pa.binormals[0]).multiplyScalar(qb.y),ha.copy(Ma[0]).add(ea).add(Za),Q(ha.x,ha.y,ha.z)):Q(qb.x,qb.y,0);for(sa=1;sa<=ra;sa++)for(Sa=0;Sa<nb;Sa++)qb=va?I(G[Sa],ob[Sa],jb):G[Sa],Ha?(ea.copy(Pa.normals[sa]).multiplyScalar(qb.x),Za.copy(Pa.binormals[sa]).multiplyScalar(qb.y),
ha.copy(Ma[sa]).add(ea).add(Za),Q(ha.x,ha.y,ha.z)):Q(qb.x,qb.y,ia/ra*sa);for(Ya=xa-1;0<=Ya;Ya--){sa=Ya/xa;ib=ma*Math.cos(sa*Math.PI/2);jb=na*Math.sin(sa*Math.PI/2)+ya;Sa=0;for(sa=zb.length;Sa<sa;Sa++)qb=I(zb[Sa],la[Sa],jb),Q(qb.x,qb.y,ia+ib);Ja=0;for(ua=Ba.length;Ja<ua;Ja++)for(Ta=Ba[Ja],xb=Ga[Ja],Sa=0,sa=Ta.length;Sa<sa;Sa++)qb=I(Ta[Sa],xb[Sa],jb),Ha?Q(qb.x,qb.y+Ma[ra-1].y,Ma[ra-1].x+ib):Q(qb.x,qb.y,ia+ib)}(function(){var bb=x.length/3;if(va){var gb=0*nb;for(Sa=0;Sa<Eb;Sa++)rb=yb[Sa],V(rb[2]+gb,
rb[1]+gb,rb[0]+gb);gb=nb*(ra+2*xa);for(Sa=0;Sa<Eb;Sa++)rb=yb[Sa],V(rb[0]+gb,rb[1]+gb,rb[2]+gb)}else{for(Sa=0;Sa<Eb;Sa++)rb=yb[Sa],V(rb[2],rb[1],rb[0]);for(Sa=0;Sa<Eb;Sa++)rb=yb[Sa],V(rb[0]+nb*ra,rb[1]+nb*ra,rb[2]+nb*ra)}t.addGroup(bb,x.length/3-bb,0)})();(function(){var bb=x.length/3,gb=0;O(zb,gb);gb+=zb.length;Ja=0;for(ua=Ba.length;Ja<ua;Ja++)Ta=Ba[Ja],O(Ta,gb),gb+=Ta.length;t.addGroup(bb,x.length/3-bb,1)})()}ka.call(this);this.type="ExtrudeBufferGeometry";this.parameters={shapes:d,options:k};d=
Array.isArray(d)?d:[d];for(var t=this,x=[],y=[],B=0,F=d.length;B<F;B++)p(d[B]);this.addAttribute("position",new da(x,3));this.addAttribute("uv",new da(y,2));this.computeVertexNormals()}function im(d,k,p){p.shapes=[];if(Array.isArray(d))for(var t=0,x=d.length;t<x;t++)p.shapes.push(d[t].uuid);else p.shapes.push(d.uuid);void 0!==k.extrudePath&&(p.options.extrudePath=k.extrudePath.toJSON());return p}function Sg(d,k){S.call(this);this.type="TextGeometry";this.parameters={text:d,parameters:k};this.fromBufferGeometry(new Gf(d,
k));this.mergeVertices()}function Gf(d,k){k=k||{};var p=k.font;if(!p||!p.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S;d=p.generateShapes(d,k.size);k.depth=void 0!==k.height?k.height:50;void 0===k.bevelThickness&&(k.bevelThickness=10);void 0===k.bevelSize&&(k.bevelSize=8);void 0===k.bevelEnabled&&(k.bevelEnabled=!1);Dd.call(this,d,k);this.type="TextBufferGeometry"}function Tg(d,k,p,t,x,y,B){S.call(this);this.type="SphereGeometry";this.parameters=
{radius:d,widthSegments:k,heightSegments:p,phiStart:t,phiLength:x,thetaStart:y,thetaLength:B};this.fromBufferGeometry(new le(d,k,p,t,x,y,B));this.mergeVertices()}function le(d,k,p,t,x,y,B){ka.call(this);this.type="SphereBufferGeometry";this.parameters={radius:d,widthSegments:k,heightSegments:p,phiStart:t,phiLength:x,thetaStart:y,thetaLength:B};d=d||1;k=Math.max(3,Math.floor(k)||8);p=Math.max(2,Math.floor(p)||6);t=void 0!==t?t:0;x=void 0!==x?x:2*Math.PI;y=void 0!==y?y:0;B=void 0!==B?B:Math.PI;var F=
y+B,G,I,N=0,O=[],Q=new f,V=new f,U=[],Z=[],ca=[],la=[];for(I=0;I<=p;I++){var ra=[],ia=I/p,va=0==I?.5/k:I==p?-.5/k:0;for(G=0;G<=k;G++){var ma=G/k;Q.x=-d*Math.cos(t+ma*x)*Math.sin(y+ia*B);Q.y=d*Math.cos(y+ia*B);Q.z=d*Math.sin(t+ma*x)*Math.sin(y+ia*B);Z.push(Q.x,Q.y,Q.z);V.copy(Q).normalize();ca.push(V.x,V.y,V.z);la.push(ma+va,1-ia);ra.push(N++)}O.push(ra)}for(I=0;I<p;I++)for(G=0;G<k;G++)d=O[I][G+1],t=O[I][G],x=O[I+1][G],B=O[I+1][G+1],(0!==I||0<y)&&U.push(d,t,B),(I!==p-1||F<Math.PI)&&U.push(t,x,B);this.setIndex(U);
this.addAttribute("position",new da(Z,3));this.addAttribute("normal",new da(ca,3));this.addAttribute("uv",new da(la,2))}function Ug(d,k,p,t,x,y){S.call(this);this.type="RingGeometry";this.parameters={innerRadius:d,outerRadius:k,thetaSegments:p,phiSegments:t,thetaStart:x,thetaLength:y};this.fromBufferGeometry(new Hf(d,k,p,t,x,y));this.mergeVertices()}function Hf(d,k,p,t,x,y){ka.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:d,outerRadius:k,thetaSegments:p,phiSegments:t,thetaStart:x,
thetaLength:y};d=d||.5;k=k||1;x=void 0!==x?x:0;y=void 0!==y?y:2*Math.PI;p=void 0!==p?Math.max(3,p):8;t=void 0!==t?Math.max(1,t):1;var B=[],F=[],G=[],I=[],N=d,O=(k-d)/t,Q=new f,V=new c,U,Z;for(U=0;U<=t;U++){for(Z=0;Z<=p;Z++)d=x+Z/p*y,Q.x=N*Math.cos(d),Q.y=N*Math.sin(d),F.push(Q.x,Q.y,Q.z),G.push(0,0,1),V.x=(Q.x/k+1)/2,V.y=(Q.y/k+1)/2,I.push(V.x,V.y);N+=O}for(U=0;U<t;U++)for(k=U*(p+1),Z=0;Z<p;Z++)d=Z+k,x=d+p+1,y=d+p+2,N=d+1,B.push(d,x,N),B.push(x,y,N);this.setIndex(B);this.addAttribute("position",new da(F,
3));this.addAttribute("normal",new da(G,3));this.addAttribute("uv",new da(I,2))}function Vg(d,k,p,t){S.call(this);this.type="LatheGeometry";this.parameters={points:d,segments:k,phiStart:p,phiLength:t};this.fromBufferGeometry(new If(d,k,p,t));this.mergeVertices()}function If(d,k,p,t){ka.call(this);this.type="LatheBufferGeometry";this.parameters={points:d,segments:k,phiStart:p,phiLength:t};k=Math.floor(k)||12;p=p||0;t=t||2*Math.PI;t=mb.clamp(t,0,2*Math.PI);var x=[],y=[],B=[],F=1/k,G=new f,I=new c,N;
for(N=0;N<=k;N++){var O=p+N*F*t;var Q=Math.sin(O),V=Math.cos(O);for(O=0;O<=d.length-1;O++)G.x=d[O].x*Q,G.y=d[O].y,G.z=d[O].x*V,y.push(G.x,G.y,G.z),I.x=N/k,I.y=O/(d.length-1),B.push(I.x,I.y)}for(N=0;N<k;N++)for(O=0;O<d.length-1;O++)p=O+N*d.length,F=p+d.length,G=p+d.length+1,I=p+1,x.push(p,F,I),x.push(F,G,I);this.setIndex(x);this.addAttribute("position",new da(y,3));this.addAttribute("uv",new da(B,2));this.computeVertexNormals();if(t===2*Math.PI)for(t=this.attributes.normal.array,x=new f,y=new f,B=
new f,p=k*d.length*3,O=N=0;N<d.length;N++,O+=3)x.x=t[O+0],x.y=t[O+1],x.z=t[O+2],y.x=t[p+O+0],y.y=t[p+O+1],y.z=t[p+O+2],B.addVectors(x,y).normalize(),t[O+0]=t[p+O+0]=B.x,t[O+1]=t[p+O+1]=B.y,t[O+2]=t[p+O+2]=B.z}function Le(d,k){S.call(this);this.type="ShapeGeometry";"object"===typeof k&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),k=k.curveSegments);this.parameters={shapes:d,curveSegments:k};this.fromBufferGeometry(new Me(d,k));this.mergeVertices()}function Me(d,k){function p(N){var O,
Q=x.length/3;N=N.extractPoints(k);var V=N.shape,U=N.holes;!1===Sd.isClockWise(V)&&(V=V.reverse());N=0;for(O=U.length;N<O;N++){var Z=U[N];!0===Sd.isClockWise(Z)&&(U[N]=Z.reverse())}var ca=Sd.triangulateShape(V,U);N=0;for(O=U.length;N<O;N++)Z=U[N],V=V.concat(Z);N=0;for(O=V.length;N<O;N++)Z=V[N],x.push(Z.x,Z.y,0),y.push(0,0,1),B.push(Z.x,Z.y);N=0;for(O=ca.length;N<O;N++)V=ca[N],t.push(V[0]+Q,V[1]+Q,V[2]+Q),G+=3}ka.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:d,curveSegments:k};
k=k||12;var t=[],x=[],y=[],B=[],F=0,G=0;if(!1===Array.isArray(d))p(d);else for(var I=0;I<d.length;I++)p(d[I]),this.addGroup(F,G,I),F+=G,G=0;this.setIndex(t);this.addAttribute("position",new da(x,3));this.addAttribute("normal",new da(y,3));this.addAttribute("uv",new da(B,2))}function jm(d,k){k.shapes=[];if(Array.isArray(d))for(var p=0,t=d.length;p<t;p++)k.shapes.push(d[p].uuid);else k.shapes.push(d.uuid);return k}function Jf(d,k){ka.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:k};
var p=[];k=Math.cos(mb.DEG2RAD*(void 0!==k?k:1));var t=[0,0],x={},y=["a","b","c"];if(d.isBufferGeometry){var B=new S;B.fromBufferGeometry(d)}else B=d.clone();B.mergeVertices();B.computeFaceNormals();d=B.vertices;B=B.faces;for(var F=0,G=B.length;F<G;F++)for(var I=B[F],N=0;3>N;N++){var O=I[y[N]];var Q=I[y[(N+1)%3]];t[0]=Math.min(O,Q);t[1]=Math.max(O,Q);O=t[0]+","+t[1];void 0===x[O]?x[O]={index1:t[0],index2:t[1],face1:F,face2:void 0}:x[O].face2=F}for(O in x)if(t=x[O],void 0===t.face2||B[t.face1].normal.dot(B[t.face2].normal)<=
k)y=d[t.index1],p.push(y.x,y.y,y.z),y=d[t.index2],p.push(y.x,y.y,y.z);this.addAttribute("position",new da(p,3))}function Ne(d,k,p,t,x,y,B,F){S.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:d,radiusBottom:k,height:p,radialSegments:t,heightSegments:x,openEnded:y,thetaStart:B,thetaLength:F};this.fromBufferGeometry(new Td(d,k,p,t,x,y,B,F));this.mergeVertices()}function Td(d,k,p,t,x,y,B,F){function G(ra){var ia,va=new c,ma=new f,na=0,ya=!0===ra?d:k,xa=!0===ra?1:-1;var Ga=U;for(ia=
1;ia<=t;ia++)O.push(0,ca*xa,0),Q.push(0,xa,0),V.push(.5,.5),U++;var Na=U;for(ia=0;ia<=t;ia++){var Ha=ia/t*F+B,Ma=Math.cos(Ha);Ha=Math.sin(Ha);ma.x=ya*Ha;ma.y=ca*xa;ma.z=ya*Ma;O.push(ma.x,ma.y,ma.z);Q.push(0,xa,0);va.x=.5*Ma+.5;va.y=.5*Ha*xa+.5;V.push(va.x,va.y);U++}for(ia=0;ia<t;ia++)va=Ga+ia,ma=Na+ia,!0===ra?N.push(ma,ma+1,va):N.push(ma+1,ma,va),na+=3;I.addGroup(la,na,!0===ra?1:2);la+=na}ka.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:d,radiusBottom:k,height:p,radialSegments:t,
heightSegments:x,openEnded:y,thetaStart:B,thetaLength:F};var I=this;d=void 0!==d?d:1;k=void 0!==k?k:1;p=p||1;t=Math.floor(t)||8;x=Math.floor(x)||1;y=void 0!==y?y:!1;B=void 0!==B?B:0;F=void 0!==F?F:2*Math.PI;var N=[],O=[],Q=[],V=[],U=0,Z=[],ca=p/2,la=0;(function(){var ra,ia,va=new f,ma=new f,na=0,ya=(k-d)/p;for(ia=0;ia<=x;ia++){var xa=[],Ga=ia/x,Na=Ga*(k-d)+d;for(ra=0;ra<=t;ra++){var Ha=ra/t,Ma=Ha*F+B,Pa=Math.sin(Ma);Ma=Math.cos(Ma);ma.x=Na*Pa;ma.y=-Ga*p+ca;ma.z=Na*Ma;O.push(ma.x,ma.y,ma.z);va.set(Pa,
ya,Ma).normalize();Q.push(va.x,va.y,va.z);V.push(Ha,1-Ga);xa.push(U++)}Z.push(xa)}for(ra=0;ra<t;ra++)for(ia=0;ia<x;ia++)va=Z[ia+1][ra],ma=Z[ia+1][ra+1],ya=Z[ia][ra+1],N.push(Z[ia][ra],va,ya),N.push(va,ma,ya),na+=6;I.addGroup(la,na,0);la+=na})();!1===y&&(0<d&&G(!0),0<k&&G(!1));this.setIndex(N);this.addAttribute("position",new da(O,3));this.addAttribute("normal",new da(Q,3));this.addAttribute("uv",new da(V,2))}function Wg(d,k,p,t,x,y,B){Ne.call(this,0,d,k,p,t,x,y,B);this.type="ConeGeometry";this.parameters=
{radius:d,height:k,radialSegments:p,heightSegments:t,openEnded:x,thetaStart:y,thetaLength:B}}function Xg(d,k,p,t,x,y,B){Td.call(this,0,d,k,p,t,x,y,B);this.type="ConeBufferGeometry";this.parameters={radius:d,height:k,radialSegments:p,heightSegments:t,openEnded:x,thetaStart:y,thetaLength:B}}function Yg(d,k,p,t){S.call(this);this.type="CircleGeometry";this.parameters={radius:d,segments:k,thetaStart:p,thetaLength:t};this.fromBufferGeometry(new Kf(d,k,p,t));this.mergeVertices()}function Kf(d,k,p,t){ka.call(this);
this.type="CircleBufferGeometry";this.parameters={radius:d,segments:k,thetaStart:p,thetaLength:t};d=d||1;k=void 0!==k?Math.max(3,k):8;p=void 0!==p?p:0;t=void 0!==t?t:2*Math.PI;var x=[],y=[],B=[],F=[],G,I=new f,N=new c;y.push(0,0,0);B.push(0,0,1);F.push(.5,.5);var O=0;for(G=3;O<=k;O++,G+=3){var Q=p+O/k*t;I.x=d*Math.cos(Q);I.y=d*Math.sin(Q);y.push(I.x,I.y,I.z);B.push(0,0,1);N.x=(y[G]/d+1)/2;N.y=(y[G+1]/d+1)/2;F.push(N.x,N.y)}for(G=1;G<=k;G++)x.push(G,G+1,0);this.setIndex(x);this.addAttribute("position",
new da(y,3));this.addAttribute("normal",new da(B,3));this.addAttribute("uv",new da(F,2))}function Oe(d){Ka.call(this);this.type="ShadowMaterial";this.color=new D(0);this.transparent=!0;this.setValues(d)}function Lf(d){vb.call(this,d);this.type="RawShaderMaterial"}function Ed(d){Ka.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new D(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=
1;this.emissive=new D(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new c(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=
!1;this.setValues(d)}function Pe(d){Ed.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(d)}function kd(d){Ka.call(this);this.type="MeshPhongMaterial";this.color=new D(16777215);this.specular=new D(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new D(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=
1;this.normalMap=null;this.normalMapType=0;this.normalScale=new c(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(d)}function Qe(d){kd.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";
this.gradientMap=null;this.setValues(d)}function Re(d){Ka.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new c(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(d)}function Se(d){Ka.call(this);this.type="MeshLambertMaterial";this.color=new D(16777215);
this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new D(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(d)}function Te(d){Ka.call(this);this.defines={MATCAP:""};this.type="MeshMatcapMaterial";
this.color=new D(16777215);this.bumpMap=this.map=this.matcap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new c(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.lights=this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(d)}function Ue(d){Nb.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(d)}function Pc(d,k,p,t){this.parameterPositions=d;this._cachedIndex=
0;this.resultBuffer=void 0!==t?t:new k.constructor(p);this.sampleValues=k;this.valueSize=p}function Qh(d,k,p,t){Pc.call(this,d,k,p,t);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Zg(d,k,p,t){Pc.call(this,d,k,p,t)}function Rh(d,k,p,t){Pc.call(this,d,k,p,t)}function yc(d,k,p,t){if(void 0===d)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===k||0===k.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+d);this.name=d;this.times=
qc.convertArray(k,this.TimeBufferType);this.values=qc.convertArray(p,this.ValueBufferType);this.setInterpolation(t||this.DefaultInterpolation)}function Sh(d,k,p){yc.call(this,d,k,p)}function Th(d,k,p,t){yc.call(this,d,k,p,t)}function Mf(d,k,p,t){yc.call(this,d,k,p,t)}function Uh(d,k,p,t){Pc.call(this,d,k,p,t)}function $g(d,k,p,t){yc.call(this,d,k,p,t)}function Vh(d,k,p,t){yc.call(this,d,k,p,t)}function Nf(d,k,p,t){yc.call(this,d,k,p,t)}function Xc(d,k,p){this.name=d;this.tracks=p;this.duration=void 0!==
k?k:-1;this.uuid=mb.generateUUID();0>this.duration&&this.resetDuration()}function ep(d){switch(d.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return Mf;case "vector":case "vector2":case "vector3":case "vector4":return Nf;case "color":return Th;case "quaternion":return $g;case "bool":case "boolean":return Sh;case "string":return Vh}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+d);}function fp(d){if(void 0===d.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
var k=ep(d.type);if(void 0===d.times){var p=[],t=[];qc.flattenJSON(d.keys,p,t,"value");d.times=p;d.values=t}return void 0!==k.parse?k.parse(d):new k(d.name,d.times,d.values,d.interpolation)}function gj(d,k,p){var t=this,x=!1,y=0,B=0,F=void 0;this.onStart=void 0;this.onLoad=d;this.onProgress=k;this.onError=p;this.itemStart=function(G){B++;if(!1===x&&void 0!==t.onStart)t.onStart(G,y,B);x=!0};this.itemEnd=function(G){y++;if(void 0!==t.onProgress)t.onProgress(G,y,B);if(y===B&&(x=!1,void 0!==t.onLoad))t.onLoad()};
this.itemError=function(G){if(void 0!==t.onError)t.onError(G)};this.resolveURL=function(G){return F?F(G):G};this.setURLModifier=function(G){F=G;return this}}function ld(d){this.manager=void 0!==d?d:Nc}function km(d){this.manager=void 0!==d?d:Nc}function lm(d){this.manager=void 0!==d?d:Nc;this._parser=null}function hj(d){this.manager=void 0!==d?d:Nc;this._parser=null}function ah(d){this.manager=void 0!==d?d:Nc}function ij(d){this.manager=void 0!==d?d:Nc}function Wh(d){this.manager=void 0!==d?d:Nc}
function hb(){this.type="Curve";this.arcLengthDivisions=200}function Qc(d,k,p,t,x,y,B,F){hb.call(this);this.type="EllipseCurve";this.aX=d||0;this.aY=k||0;this.xRadius=p||1;this.yRadius=t||1;this.aStartAngle=x||0;this.aEndAngle=y||2*Math.PI;this.aClockwise=B||!1;this.aRotation=F||0}function Of(d,k,p,t,x,y){Qc.call(this,d,k,p,p,t,x,y);this.type="ArcCurve"}function jj(){var d=0,k=0,p=0,t=0;return{initCatmullRom:function(x,y,B,F,G){x=G*(B-x);F=G*(F-y);d=y;k=x;p=-3*y+3*B-2*x-F;t=2*y-2*B+x+F},initNonuniformCatmullRom:function(x,
y,B,F,G,I,N){x=((y-x)/G-(B-x)/(G+I)+(B-y)/I)*I;F=((B-y)/I-(F-y)/(I+N)+(F-B)/N)*I;d=y;k=x;p=-3*y+3*B-2*x-F;t=2*y-2*B+x+F},calc:function(x){var y=x*x;return d+k*x+p*y+t*y*x}}}function Cc(d,k,p,t){hb.call(this);this.type="CatmullRomCurve3";this.points=d||[];this.closed=k||!1;this.curveType=p||"centripetal";this.tension=t||.5}function mm(d,k,p,t,x){k=.5*(t-k);x=.5*(x-p);var y=d*d;return(2*p-2*t+k+x)*d*y+(-3*p+3*t-2*k-x)*y+k*d+p}function bh(d,k,p,t){var x=1-d;return x*x*k+2*(1-d)*d*p+d*d*t}function ch(d,
k,p,t,x){var y=1-d,B=1-d;return y*y*y*k+3*B*B*d*p+3*(1-d)*d*d*t+d*d*d*x}function md(d,k,p,t){hb.call(this);this.type="CubicBezierCurve";this.v0=d||new c;this.v1=k||new c;this.v2=p||new c;this.v3=t||new c}function Fd(d,k,p,t){hb.call(this);this.type="CubicBezierCurve3";this.v0=d||new f;this.v1=k||new f;this.v2=p||new f;this.v3=t||new f}function Oc(d,k){hb.call(this);this.type="LineCurve";this.v1=d||new c;this.v2=k||new c}function nd(d,k){hb.call(this);this.type="LineCurve3";this.v1=d||new f;this.v2=
k||new f}function od(d,k,p){hb.call(this);this.type="QuadraticBezierCurve";this.v0=d||new c;this.v1=k||new c;this.v2=p||new c}function Gd(d,k,p){hb.call(this);this.type="QuadraticBezierCurve3";this.v0=d||new f;this.v1=k||new f;this.v2=p||new f}function pd(d){hb.call(this);this.type="SplineCurve";this.points=d||[]}function Ud(){hb.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function qd(d){Ud.call(this);this.type="Path";this.currentPoint=new c;d&&this.setFromPoints(d)}function me(d){qd.call(this,
d);this.uuid=mb.generateUUID();this.type="Shape";this.holes=[]}function Yb(d,k){P.call(this);this.type="Light";this.color=new D(d);this.intensity=void 0!==k?k:1;this.receiveShadow=void 0}function Xh(d,k,p){Yb.call(this,d,p);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(P.DefaultUp);this.updateMatrix();this.groundColor=new D(k)}function Ve(d){this.camera=d;this.bias=0;this.radius=1;this.mapSize=new c(512,512);this.map=null;this.matrix=new A}function Yh(){Ve.call(this,new kc(50,
1,.5,500))}function Zh(d,k,p,t,x,y){Yb.call(this,d,k);this.type="SpotLight";this.position.copy(P.DefaultUp);this.updateMatrix();this.target=new P;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(B){this.intensity=B/Math.PI}});this.distance=void 0!==p?p:0;this.angle=void 0!==t?t:Math.PI/3;this.penumbra=void 0!==x?x:0;this.decay=void 0!==y?y:1;this.shadow=new Yh}function $h(d,k,p,t){Yb.call(this,d,k);this.type="PointLight";Object.defineProperty(this,"power",
{get:function(){return 4*this.intensity*Math.PI},set:function(x){this.intensity=x/(4*Math.PI)}});this.distance=void 0!==p?p:0;this.decay=void 0!==t?t:1;this.shadow=new Ve(new kc(90,1,.5,500))}function dh(d,k,p,t,x,y){Ad.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=void 0!==d?d:-1;this.right=void 0!==k?k:1;this.top=void 0!==p?p:1;this.bottom=void 0!==t?t:-1;this.near=void 0!==x?x:.1;this.far=void 0!==y?y:2E3;this.updateProjectionMatrix()}function ai(){Ve.call(this,
new dh(-5,5,5,-5,.5,500))}function bi(d,k){Yb.call(this,d,k);this.type="DirectionalLight";this.position.copy(P.DefaultUp);this.updateMatrix();this.target=new P;this.shadow=new ai}function ci(d,k){Yb.call(this,d,k);this.type="AmbientLight";this.castShadow=void 0}function di(d,k,p,t){Yb.call(this,d,k);this.type="RectAreaLight";this.width=void 0!==p?p:10;this.height=void 0!==t?t:10}function ei(d){this.manager=void 0!==d?d:Nc;this.textures={}}function kj(d){this.manager=void 0!==d?d:Nc}function lj(d){this.manager=
void 0!==d?d:Nc;this.resourcePath=""}function mj(d){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=void 0!==d?d:Nc;this.options=void 0}function nj(){this.type="ShapePath";this.color=new D;this.subPaths=[];this.currentPath=null}function oj(d){this.type="Font";this.data=d}function nm(d){this.manager=void 0!==d?d:Nc}function eh(){}
function pj(d){this.manager=void 0!==d?d:Nc}function fi(){this.coefficients=[];for(var d=0;9>d;d++)this.coefficients.push(new f)}function rd(d,k){Yb.call(this,void 0,k);this.sh=void 0!==d?d:new fi}function qj(d,k,p){rd.call(this,void 0,p);d=(new D).set(d);p=(new D).set(k);k=new f(d.r,d.g,d.b);d=new f(p.r,p.g,p.b);p=Math.sqrt(Math.PI);var t=p*Math.sqrt(.75);this.sh.coefficients[0].copy(k).add(d).multiplyScalar(p);this.sh.coefficients[1].copy(k).sub(d).multiplyScalar(t)}function rj(d,k){rd.call(this,
void 0,k);d=(new D).set(d);this.sh.coefficients[0].set(d.r,d.g,d.b).multiplyScalar(2*Math.sqrt(Math.PI))}function om(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new kc;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new kc;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function fh(d,k,p,t){P.call(this);this.type="CubeCamera";var x=new kc(90,1,d,k);x.up.set(0,-1,0);x.lookAt(new f(1,0,0));this.add(x);var y=new kc(90,1,d,k);y.up.set(0,
-1,0);y.lookAt(new f(-1,0,0));this.add(y);var B=new kc(90,1,d,k);B.up.set(0,0,1);B.lookAt(new f(0,1,0));this.add(B);var F=new kc(90,1,d,k);F.up.set(0,0,-1);F.lookAt(new f(0,-1,0));this.add(F);var G=new kc(90,1,d,k);G.up.set(0,-1,0);G.lookAt(new f(0,0,1));this.add(G);var I=new kc(90,1,d,k);I.up.set(0,-1,0);I.lookAt(new f(0,0,-1));this.add(I);t=t||{format:1022,magFilter:1006,minFilter:1006};this.renderTarget=new q(p,p,t);this.renderTarget.texture.name="CubeCamera";this.update=function(N,O){null===this.parent&&
this.updateMatrixWorld();var Q=N.getRenderTarget(),V=this.renderTarget,U=V.texture.generateMipmaps;V.texture.generateMipmaps=!1;N.setRenderTarget(V,0);N.render(O,x);N.setRenderTarget(V,1);N.render(O,y);N.setRenderTarget(V,2);N.render(O,B);N.setRenderTarget(V,3);N.render(O,F);N.setRenderTarget(V,4);N.render(O,G);V.texture.generateMipmaps=U;N.setRenderTarget(V,5);N.render(O,I);N.setRenderTarget(Q)};this.clear=function(N,O,Q,V){for(var U=N.getRenderTarget(),Z=this.renderTarget,ca=0;6>ca;ca++)N.setRenderTarget(Z,
ca),N.clear(O,Q,V);N.setRenderTarget(U)}}function sj(d){this.autoStart=void 0!==d?d:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function tj(){P.call(this);this.type="AudioListener";this.context=uj.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null;this.timeDelta=0}function Pf(d){P.call(this);this.type="Audio";this.listener=d;this.context=d.context;this.gain=this.context.createGain();this.gain.connect(d.getInput());this.autoplay=
!1;this.buffer=null;this.detune=0;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function vj(d){Pf.call(this,d);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function wj(d,k){this.analyser=d.context.createAnalyser();this.analyser.fftSize=void 0!==k?k:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);d.getOutput().connect(this.analyser)}function xj(d,k,p){this.binding=
d;this.valueSize=p;d=Float64Array;switch(k){case "quaternion":k=this._slerp;break;case "string":case "bool":d=Array;k=this._select;break;default:k=this._lerp}this.buffer=new d(4*p);this._mixBufferRegion=k;this.referenceCount=this.useCount=this.cumulativeWeight=0}function pm(d,k,p){p=p||Dc.parseTrackName(k);this._targetGroup=d;this._bindings=d.subscribe_(k,p)}function Dc(d,k,p){this.path=k;this.parsedPath=p||Dc.parseTrackName(k);this.node=Dc.findNode(d,this.parsedPath.nodeName)||d;this.rootNode=d}
function qm(){this.uuid=mb.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var d={};this._indicesByUUID=d;for(var k=0,p=arguments.length;k!==p;++k)d[arguments[k].uuid]=k;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}function rm(d,k,p){this._mixer=d;
this._clip=k;this._localRoot=p||null;d=k.tracks;k=d.length;p=Array(k);for(var t={endingStart:2400,endingEnd:2400},x=0;x!==k;++x){var y=d[x].createInterpolant(null);p[x]=y;y.settings=t}this._interpolantSettings=t;this._interpolants=p;this._propertyBindings=Array(k);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=
1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function yj(d){this._root=d;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function gi(d,k){"string"===typeof d&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),d=k);this.value=d}function zj(){ka.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function Aj(d,k,p){Ge.call(this,d,k);this.meshPerAttribute=
p||1}function Bj(d,k,p,t){"number"===typeof p&&(t=p,p=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));aa.call(this,d,k,p);this.meshPerAttribute=t||1}function sm(d,k,p,t){this.ray=new jc(d,k);this.near=p||0;this.far=t||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");
return this.Points}}})}function tm(d,k){return d.distance-k.distance}function Cj(d,k,p,t){if(!1!==d.visible&&(d.raycast(k,p),!0===t)){d=d.children;t=0;for(var x=d.length;t<x;t++)Cj(d[t],k,p,!0)}}function um(d,k,p){this.radius=void 0!==d?d:1;this.phi=void 0!==k?k:0;this.theta=void 0!==p?p:0;return this}function vm(d,k,p){this.radius=void 0!==d?d:1;this.theta=void 0!==k?k:0;this.y=void 0!==p?p:0;return this}function Dj(d,k){this.min=void 0!==d?d:new c(Infinity,Infinity);this.max=void 0!==k?k:new c(-Infinity,
-Infinity)}function Ej(d,k){this.start=void 0!==d?d:new f;this.end=void 0!==k?k:new f}function gh(d){P.call(this);this.material=d;this.render=function(){}}function hh(d,k,p,t){this.object=d;this.size=void 0!==k?k:1;d=void 0!==p?p:16711680;t=void 0!==t?t:1;k=0;(p=this.object.geometry)&&p.isGeometry?k=3*p.faces.length:p&&p.isBufferGeometry&&(k=p.attributes.normal.count);p=new ka;k=new da(6*k,3);p.addAttribute("position",k);Wb.call(this,p,new Nb({color:d,linewidth:t}));this.matrixAutoUpdate=!1;this.update()}
function Qf(d,k){P.call(this);this.light=d;this.light.updateMatrixWorld();this.matrix=d.matrixWorld;this.matrixAutoUpdate=!1;this.color=k;d=new ka;k=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var p=0,t=1;32>p;p++,t++){var x=p/32*Math.PI*2,y=t/32*Math.PI*2;k.push(Math.cos(x),Math.sin(x),1,Math.cos(y),Math.sin(y),1)}d.addAttribute("position",new da(k,3));k=new Nb({fog:!1});this.cone=new Wb(d,k);this.add(this.cone);this.update()}function wm(d){var k=[];d&&d.isBone&&k.push(d);
for(var p=0;p<d.children.length;p++)k.push.apply(k,wm(d.children[p]));return k}function Rf(d){for(var k=wm(d),p=new ka,t=[],x=[],y=new D(0,0,1),B=new D(0,1,0),F=0;F<k.length;F++){var G=k[F];G.parent&&G.parent.isBone&&(t.push(0,0,0),t.push(0,0,0),x.push(y.r,y.g,y.b),x.push(B.r,B.g,B.b))}p.addAttribute("position",new da(t,3));p.addAttribute("color",new da(x,3));t=new Nb({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});Wb.call(this,p,t);this.root=d;this.bones=k;this.matrix=d.matrixWorld;this.matrixAutoUpdate=
!1}function Sf(d,k,p){this.light=d;this.light.updateMatrixWorld();this.color=p;d=new le(k,4,2);k=new tb({wireframe:!0,fog:!1});ac.call(this,d,k);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function Tf(d,k){this.type="RectAreaLightHelper";this.light=d;this.color=k;d=new ka;d.addAttribute("position",new da([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3));d.computeBoundingSphere();k=new Nb({fog:!1});xc.call(this,d,k);d=new ka;d.addAttribute("position",new da([1,1,0,-1,1,0,-1,-1,
0,1,1,0,-1,-1,0,1,-1,0],3));d.computeBoundingSphere();this.add(new ac(d,new tb({side:1,fog:!1})));this.update()}function Uf(d,k,p){P.call(this);this.light=d;this.light.updateMatrixWorld();this.matrix=d.matrixWorld;this.matrixAutoUpdate=!1;this.color=p;d=new He(k);d.rotateY(.5*Math.PI);this.material=new tb({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);k=d.getAttribute("position");d.addAttribute("color",new aa(new Float32Array(3*k.count),3));this.add(new ac(d,this.material));
this.update()}function Vf(d,k){this.lightProbe=d;this.size=k;d=new vb({defines:{GAMMA_OUTPUT:""},uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:"varying vec3 vNormal;\nvoid main() {\n\tvNormal \x3d normalize( normalMatrix * normal );\n\tgl_Position \x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#define RECIPROCAL_PI 0.318309886\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\t// matrix is assumed to be orthogonal\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 linearToOutput( in vec3 a ) {\n\t#ifdef GAMMA_OUTPUT\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\t#else\n\t\treturn a;\n\t#endif\n}\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\t// normal is assumed to have unit length\n\tfloat x \x3d normal.x, y \x3d normal.y, z \x3d normal.z;\n\t// band 0\n\tvec3 result \x3d shCoefficients[ 0 ] * 0.886227;\n\t// band 1\n\tresult +\x3d shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult +\x3d shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult +\x3d shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\t// band 2\n\tresult +\x3d shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult +\x3d shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult +\x3d shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult +\x3d shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult +\x3d shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nuniform vec3 sh[ 9 ]; // sh coefficients\nuniform float intensity; // light probe intensity\nvarying vec3 vNormal;\nvoid main() {\n\tvec3 normal \x3d normalize( vNormal );\n\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance \x3d shGetIrradianceAt( worldNormal, sh );\n\tvec3 outgoingLight \x3d RECIPROCAL_PI * irradiance * intensity;\n\toutgoingLight \x3d linearToOutput( outgoingLight );\n\tgl_FragColor \x3d vec4( outgoingLight, 1.0 );\n}"});
k=new le(1,32,16);ac.call(this,k,d);this.onBeforeRender()}function hi(d,k,p,t){d=d||10;k=k||10;p=new D(void 0!==p?p:4473924);t=new D(void 0!==t?t:8947848);var x=k/2,y=d/k,B=d/2;d=[];for(var F=[],G=0,I=0,N=-B;G<=k;G++,N+=y){d.push(-B,0,N,B,0,N);d.push(N,0,-B,N,0,B);var O=G===x?p:t;O.toArray(F,I);I+=3;O.toArray(F,I);I+=3;O.toArray(F,I);I+=3;O.toArray(F,I);I+=3}k=new ka;k.addAttribute("position",new da(d,3));k.addAttribute("color",new da(F,3));p=new Nb({vertexColors:2});Wb.call(this,k,p)}function ii(d,
k,p,t,x,y){d=d||10;k=k||16;p=p||8;t=t||64;x=new D(void 0!==x?x:4473924);y=new D(void 0!==y?y:8947848);var B=[],F=[],G;for(G=0;G<=k;G++){var I=G/k*2*Math.PI;var N=Math.sin(I)*d;I=Math.cos(I)*d;B.push(0,0,0);B.push(N,0,I);var O=G&1?x:y;F.push(O.r,O.g,O.b);F.push(O.r,O.g,O.b)}for(G=0;G<=p;G++){O=G&1?x:y;var Q=d-d/p*G;for(k=0;k<t;k++)I=k/t*2*Math.PI,N=Math.sin(I)*Q,I=Math.cos(I)*Q,B.push(N,0,I),F.push(O.r,O.g,O.b),I=(k+1)/t*2*Math.PI,N=Math.sin(I)*Q,I=Math.cos(I)*Q,B.push(N,0,I),F.push(O.r,O.g,O.b)}d=
new ka;d.addAttribute("position",new da(B,3));d.addAttribute("color",new da(F,3));B=new Nb({vertexColors:2});Wb.call(this,d,B)}function Wf(d,k,p,t){this.audio=d;this.range=k||1;this.divisionsInnerAngle=p||16;this.divisionsOuterAngle=t||2;d=new ka;d.addAttribute("position",new aa(new Float32Array(3*(3*(this.divisionsInnerAngle+2*this.divisionsOuterAngle)+3)),3));k=new Nb({color:65280});p=new Nb({color:16776960});xc.call(this,d,[p,k]);this.update()}function ih(d,k,p,t){this.object=d;this.size=void 0!==
k?k:1;d=void 0!==p?p:16776960;t=void 0!==t?t:1;k=0;(p=this.object.geometry)&&p.isGeometry?k=p.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");p=new ka;k=new da(6*k,3);p.addAttribute("position",k);Wb.call(this,p,new Nb({color:d,linewidth:t}));this.matrixAutoUpdate=!1;this.update()}function Xf(d,k,p){P.call(this);this.light=d;this.light.updateMatrixWorld();this.matrix=d.matrixWorld;this.matrixAutoUpdate=!1;this.color=p;
void 0===k&&(k=1);d=new ka;d.addAttribute("position",new da([-k,k,0,k,k,0,k,-k,0,-k,-k,0,-k,k,0],3));k=new Nb({fog:!1});this.lightPlane=new xc(d,k);this.add(this.lightPlane);d=new ka;d.addAttribute("position",new da([0,0,0,0,0,1],3));this.targetLine=new xc(d,k);this.add(this.targetLine);this.update()}function jh(d){function k(V,U,Z){p(V,Z);p(U,Z)}function p(V,U){y.push(0,0,0);B.push(U.r,U.g,U.b);void 0===F[V]&&(F[V]=[]);F[V].push(y.length/3-1)}var t=new ka,x=new Nb({color:16777215,vertexColors:1}),
y=[],B=[],F={},G=new D(16755200),I=new D(16711680),N=new D(43775),O=new D(16777215),Q=new D(3355443);k("n1","n2",G);k("n2","n4",G);k("n4","n3",G);k("n3","n1",G);k("f1","f2",G);k("f2","f4",G);k("f4","f3",G);k("f3","f1",G);k("n1","f1",G);k("n2","f2",G);k("n3","f3",G);k("n4","f4",G);k("p","n1",I);k("p","n2",I);k("p","n3",I);k("p","n4",I);k("u1","u2",N);k("u2","u3",N);k("u3","u1",N);k("c","t",O);k("p","c",Q);k("cn1","cn2",Q);k("cn3","cn4",Q);k("cf1","cf2",Q);k("cf3","cf4",Q);t.addAttribute("position",
new da(y,3));t.addAttribute("color",new da(B,3));Wb.call(this,t,x);this.camera=d;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=d.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=F;this.update()}function Vd(d,k){this.object=d;void 0===k&&(k=16776960);d=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var p=new Float32Array(24),t=new ka;t.setIndex(new aa(d,1));t.addAttribute("position",new aa(p,3));Wb.call(this,t,new Nb({color:k}));this.matrixAutoUpdate=
!1;this.update()}function kh(d,k){this.type="Box3Helper";this.box=d;d=void 0!==k?k:16776960;k=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var p=new ka;p.setIndex(new aa(k,1));p.addAttribute("position",new da([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));Wb.call(this,p,new Nb({color:d}));this.geometry.computeBoundingSphere()}function lh(d,k,p){this.type="PlaneHelper";this.plane=d;this.size=void 0===k?1:k;d=void 0!==p?p:16776960;k=new ka;k.addAttribute("position",
new da([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));k.computeBoundingSphere();xc.call(this,k,new Nb({color:d}));k=new ka;k.addAttribute("position",new da([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));k.computeBoundingSphere();this.add(new ac(k,new tb({color:d,opacity:.2,transparent:!0,depthWrite:!1})))}function Wd(d,k,p,t,x,y){P.call(this);void 0===d&&(d=new f(0,0,1));void 0===k&&(k=new f(0,0,0));void 0===p&&(p=1);void 0===t&&(t=16776960);void 0===x&&(x=.2*p);void 0===
y&&(y=.2*x);void 0===ji&&(ji=new ka,ji.addAttribute("position",new da([0,0,0,0,1,0],3)),Fj=new Td(0,.5,1,5,1),Fj.translate(0,-.5,0));this.position.copy(k);this.line=new xc(ji,new Nb({color:t}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new ac(Fj,new tb({color:t}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(d);this.setLength(p,x,y)}function mh(d){d=d||1;var k=[0,0,0,d,0,0,0,0,0,0,d,0,0,0,0,0,0,d];d=new ka;d.addAttribute("position",new da(k,3));d.addAttribute("color",
new da([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));k=new Nb({vertexColors:2});Wb.call(this,d,k)}function xm(d){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Cc.call(this,d);this.type="catmullrom";this.closed=!0}function ym(d){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Cc.call(this,d);this.type="catmullrom"}function Gj(d){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");
Cc.call(this,d);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(d){return"number"===typeof d&&isFinite(d)&&Math.floor(d)===d});void 0===Math.sign&&(Math.sign=function(d){return 0>d?-1:0<d?1:+d});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(d){if(void 0===
d||null===d)throw new TypeError("Cannot convert undefined or null to object");for(var k=Object(d),p=1;p<arguments.length;p++){var t=arguments[p];if(void 0!==t&&null!==t)for(var x in t)Object.prototype.hasOwnProperty.call(t,x)&&(k[x]=t[x])}return k}}();Object.assign(b.prototype,{addEventListener:function(d,k){void 0===this._listeners&&(this._listeners={});var p=this._listeners;void 0===p[d]&&(p[d]=[]);-1===p[d].indexOf(k)&&p[d].push(k)},hasEventListener:function(d,k){if(void 0===this._listeners)return!1;
var p=this._listeners;return void 0!==p[d]&&-1!==p[d].indexOf(k)},removeEventListener:function(d,k){void 0!==this._listeners&&(d=this._listeners[d],void 0!==d&&(k=d.indexOf(k),-1!==k&&d.splice(k,1)))},dispatchEvent:function(d){if(void 0!==this._listeners){var k=this._listeners[d.type];if(void 0!==k){d.target=this;k=k.slice(0);for(var p=0,t=k.length;p<t;p++)k[p].call(this,d)}}}});var mb={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var d=[],k=0;256>k;k++)d[k]=(16>k?"0":"")+k.toString(16);
return function(){var p=4294967295*Math.random()|0,t=4294967295*Math.random()|0,x=4294967295*Math.random()|0,y=4294967295*Math.random()|0;return(d[p&255]+d[p>>8&255]+d[p>>16&255]+d[p>>24&255]+"-"+d[t&255]+d[t>>8&255]+"-"+d[t>>16&15|64]+d[t>>24&255]+"-"+d[x&63|128]+d[x>>8&255]+"-"+d[x>>16&255]+d[x>>24&255]+d[y&255]+d[y>>8&255]+d[y>>16&255]+d[y>>24&255]).toUpperCase()}}(),clamp:function(d,k,p){return Math.max(k,Math.min(p,d))},euclideanModulo:function(d,k){return(d%k+k)%k},mapLinear:function(d,k,p,
t,x){return t+(d-k)*(x-t)/(p-k)},lerp:function(d,k,p){return(1-p)*d+p*k},smoothstep:function(d,k,p){if(d<=k)return 0;if(d>=p)return 1;d=(d-k)/(p-k);return d*d*(3-2*d)},smootherstep:function(d,k,p){if(d<=k)return 0;if(d>=p)return 1;d=(d-k)/(p-k);return d*d*d*(d*(6*d-15)+10)},randInt:function(d,k){return d+Math.floor(Math.random()*(k-d+1))},randFloat:function(d,k){return d+Math.random()*(k-d)},randFloatSpread:function(d){return d*(.5-Math.random())},degToRad:function(d){return d*mb.DEG2RAD},radToDeg:function(d){return d*
mb.RAD2DEG},isPowerOfTwo:function(d){return 0===(d&d-1)&&0!==d},ceilPowerOfTwo:function(d){return Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},floorPowerOfTwo:function(d){return Math.pow(2,Math.floor(Math.log(d)/Math.LN2))}};Object.defineProperties(c.prototype,{width:{get:function(){return this.x},set:function(d){this.x=d}},height:{get:function(){return this.y},set:function(d){this.y=d}}});Object.assign(c.prototype,{isVector2:!0,set:function(d,k){this.x=d;this.y=k;return this},setScalar:function(d){this.y=
this.x=d;return this},setX:function(d){this.x=d;return this},setY:function(d){this.y=d;return this},setComponent:function(d,k){switch(d){case 0:this.x=k;break;case 1:this.y=k;break;default:throw Error("index is out of range: "+d);}return this},getComponent:function(d){switch(d){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+d);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(d){this.x=d.x;this.y=d.y;return this},add:function(d,
k){if(void 0!==k)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(d,k);this.x+=d.x;this.y+=d.y;return this},addScalar:function(d){this.x+=d;this.y+=d;return this},addVectors:function(d,k){this.x=d.x+k.x;this.y=d.y+k.y;return this},addScaledVector:function(d,k){this.x+=d.x*k;this.y+=d.y*k;return this},sub:function(d,k){if(void 0!==k)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(d,k);this.x-=d.x;this.y-=d.y;return this},subScalar:function(d){this.x-=d;this.y-=d;return this},subVectors:function(d,k){this.x=d.x-k.x;this.y=d.y-k.y;return this},multiply:function(d){this.x*=d.x;this.y*=d.y;return this},multiplyScalar:function(d){this.x*=d;this.y*=d;return this},divide:function(d){this.x/=d.x;this.y/=d.y;return this},divideScalar:function(d){return this.multiplyScalar(1/d)},applyMatrix3:function(d){var k=this.x,p=this.y;d=d.elements;this.x=d[0]*k+d[3]*p+d[6];this.y=
d[1]*k+d[4]*p+d[7];return this},min:function(d){this.x=Math.min(this.x,d.x);this.y=Math.min(this.y,d.y);return this},max:function(d){this.x=Math.max(this.x,d.x);this.y=Math.max(this.y,d.y);return this},clamp:function(d,k){this.x=Math.max(d.x,Math.min(k.x,this.x));this.y=Math.max(d.y,Math.min(k.y,this.y));return this},clampScalar:function(d,k){this.x=Math.max(d,Math.min(k,this.x));this.y=Math.max(d,Math.min(k,this.y));return this},clampLength:function(d,k){var p=this.length();return this.divideScalar(p||
1).multiplyScalar(Math.max(d,Math.min(k,p)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(d){return this.x*
d.x+this.y*d.y},cross:function(d){return this.x*d.y-this.y*d.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var d=Math.atan2(this.y,this.x);0>d&&(d+=2*Math.PI);return d},distanceTo:function(d){return Math.sqrt(this.distanceToSquared(d))},distanceToSquared:function(d){var k=
this.x-d.x;d=this.y-d.y;return k*k+d*d},manhattanDistanceTo:function(d){return Math.abs(this.x-d.x)+Math.abs(this.y-d.y)},setLength:function(d){return this.normalize().multiplyScalar(d)},lerp:function(d,k){this.x+=(d.x-this.x)*k;this.y+=(d.y-this.y)*k;return this},lerpVectors:function(d,k,p){return this.subVectors(k,d).multiplyScalar(p).add(d)},equals:function(d){return d.x===this.x&&d.y===this.y},fromArray:function(d,k){void 0===k&&(k=0);this.x=d[k];this.y=d[k+1];return this},toArray:function(d,
k){void 0===d&&(d=[]);void 0===k&&(k=0);d[k]=this.x;d[k+1]=this.y;return d},fromBufferAttribute:function(d,k,p){void 0!==p&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=d.getX(k);this.y=d.getY(k);return this},rotateAround:function(d,k){var p=Math.cos(k);k=Math.sin(k);var t=this.x-d.x,x=this.y-d.y;this.x=t*p-x*k+d.x;this.y=t*k+x*p+d.y;return this}});Object.assign(e,{slerp:function(d,k,p,t){return p.copy(d).slerp(k,t)},slerpFlat:function(d,k,p,t,x,y,B){var F=
p[t+0],G=p[t+1],I=p[t+2];p=p[t+3];t=x[y+0];var N=x[y+1],O=x[y+2];x=x[y+3];if(p!==x||F!==t||G!==N||I!==O){y=1-B;var Q=F*t+G*N+I*O+p*x,V=0<=Q?1:-1,U=1-Q*Q;U>Number.EPSILON&&(U=Math.sqrt(U),Q=Math.atan2(U,Q*V),y=Math.sin(y*Q)/U,B=Math.sin(B*Q)/U);V*=B;F=F*y+t*V;G=G*y+N*V;I=I*y+O*V;p=p*y+x*V;y===1-B&&(B=1/Math.sqrt(F*F+G*G+I*I+p*p),F*=B,G*=B,I*=B,p*=B)}d[k]=F;d[k+1]=G;d[k+2]=I;d[k+3]=p}});Object.defineProperties(e.prototype,{x:{get:function(){return this._x},set:function(d){this._x=d;this.onChangeCallback()}},
y:{get:function(){return this._y},set:function(d){this._y=d;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(d){this._z=d;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(d){this._w=d;this.onChangeCallback()}}});Object.assign(e.prototype,{isQuaternion:!0,set:function(d,k,p,t){this._x=d;this._y=k;this._z=p;this._w=t;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(d){this._x=
d.x;this._y=d.y;this._z=d.z;this._w=d.w;this.onChangeCallback();return this},setFromEuler:function(d,k){if(!d||!d.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var p=d._x,t=d._y,x=d._z;d=d.order;var y=Math.cos,B=Math.sin,F=y(p/2),G=y(t/2);y=y(x/2);p=B(p/2);t=B(t/2);x=B(x/2);"XYZ"===d?(this._x=p*G*y+F*t*x,this._y=F*t*y-p*G*x,this._z=F*G*x+p*t*y,this._w=F*G*y-p*t*x):"YXZ"===d?(this._x=p*G*y+F*t*x,this._y=F*t*y-p*G*x,this._z=F*
G*x-p*t*y,this._w=F*G*y+p*t*x):"ZXY"===d?(this._x=p*G*y-F*t*x,this._y=F*t*y+p*G*x,this._z=F*G*x+p*t*y,this._w=F*G*y-p*t*x):"ZYX"===d?(this._x=p*G*y-F*t*x,this._y=F*t*y+p*G*x,this._z=F*G*x-p*t*y,this._w=F*G*y+p*t*x):"YZX"===d?(this._x=p*G*y+F*t*x,this._y=F*t*y+p*G*x,this._z=F*G*x-p*t*y,this._w=F*G*y-p*t*x):"XZY"===d&&(this._x=p*G*y-F*t*x,this._y=F*t*y-p*G*x,this._z=F*G*x+p*t*y,this._w=F*G*y+p*t*x);if(!1!==k)this.onChangeCallback();return this},setFromAxisAngle:function(d,k){k/=2;var p=Math.sin(k);
this._x=d.x*p;this._y=d.y*p;this._z=d.z*p;this._w=Math.cos(k);this.onChangeCallback();return this},setFromRotationMatrix:function(d){var k=d.elements,p=k[0];d=k[4];var t=k[8],x=k[1],y=k[5],B=k[9],F=k[2],G=k[6];k=k[10];var I=p+y+k;0<I?(p=.5/Math.sqrt(I+1),this._w=.25/p,this._x=(G-B)*p,this._y=(t-F)*p,this._z=(x-d)*p):p>y&&p>k?(p=2*Math.sqrt(1+p-y-k),this._w=(G-B)/p,this._x=.25*p,this._y=(d+x)/p,this._z=(t+F)/p):y>k?(p=2*Math.sqrt(1+y-p-k),this._w=(t-F)/p,this._x=(d+x)/p,this._y=.25*p,this._z=(B+G)/
p):(p=2*Math.sqrt(1+k-p-y),this._w=(x-d)/p,this._x=(t+F)/p,this._y=(B+G)/p,this._z=.25*p);this.onChangeCallback();return this},setFromUnitVectors:function(d,k){var p=d.dot(k)+1;1E-6>p?(p=0,Math.abs(d.x)>Math.abs(d.z)?(this._x=-d.y,this._y=d.x,this._z=0):(this._x=0,this._y=-d.z,this._z=d.y)):(this._x=d.y*k.z-d.z*k.y,this._y=d.z*k.x-d.x*k.z,this._z=d.x*k.y-d.y*k.x);this._w=p;return this.normalize()},angleTo:function(d){return 2*Math.acos(Math.abs(mb.clamp(this.dot(d),-1,1)))},rotateTowards:function(d,
k){var p=this.angleTo(d);if(0===p)return this;this.slerp(d,Math.min(1,k/p));return this},inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(d){return this._x*d._x+this._y*d._y+this._z*d._z+this._w*d._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var d=
this.length();0===d?(this._z=this._y=this._x=0,this._w=1):(d=1/d,this._x*=d,this._y*=d,this._z*=d,this._w*=d);this.onChangeCallback();return this},multiply:function(d,k){return void 0!==k?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(d,k)):this.multiplyQuaternions(this,d)},premultiply:function(d){return this.multiplyQuaternions(d,this)},multiplyQuaternions:function(d,k){var p=d._x,t=d._y,x=d._z;d=d._w;
var y=k._x,B=k._y,F=k._z;k=k._w;this._x=p*k+d*y+t*F-x*B;this._y=t*k+d*B+x*y-p*F;this._z=x*k+d*F+p*B-t*y;this._w=d*k-p*y-t*B-x*F;this.onChangeCallback();return this},slerp:function(d,k){if(0===k)return this;if(1===k)return this.copy(d);var p=this._x,t=this._y,x=this._z,y=this._w,B=y*d._w+p*d._x+t*d._y+x*d._z;0>B?(this._w=-d._w,this._x=-d._x,this._y=-d._y,this._z=-d._z,B=-B):this.copy(d);if(1<=B)return this._w=y,this._x=p,this._y=t,this._z=x,this;d=1-B*B;if(d<=Number.EPSILON)return B=1-k,this._w=B*
y+k*this._w,this._x=B*p+k*this._x,this._y=B*t+k*this._y,this._z=B*x+k*this._z,this.normalize();d=Math.sqrt(d);var F=Math.atan2(d,B);B=Math.sin((1-k)*F)/d;k=Math.sin(k*F)/d;this._w=y*B+this._w*k;this._x=p*B+this._x*k;this._y=t*B+this._y*k;this._z=x*B+this._z*k;this.onChangeCallback();return this},equals:function(d){return d._x===this._x&&d._y===this._y&&d._z===this._z&&d._w===this._w},fromArray:function(d,k){void 0===k&&(k=0);this._x=d[k];this._y=d[k+1];this._z=d[k+2];this._w=d[k+3];this.onChangeCallback();
return this},toArray:function(d,k){void 0===d&&(d=[]);void 0===k&&(k=0);d[k]=this._x;d[k+1]=this._y;d[k+2]=this._z;d[k+3]=this._w;return d},onChange:function(d){this.onChangeCallback=d;return this},onChangeCallback:function(){}});Object.assign(f.prototype,{isVector3:!0,set:function(d,k,p){this.x=d;this.y=k;this.z=p;return this},setScalar:function(d){this.z=this.y=this.x=d;return this},setX:function(d){this.x=d;return this},setY:function(d){this.y=d;return this},setZ:function(d){this.z=d;return this},
setComponent:function(d,k){switch(d){case 0:this.x=k;break;case 1:this.y=k;break;case 2:this.z=k;break;default:throw Error("index is out of range: "+d);}return this},getComponent:function(d){switch(d){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+d);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(d){this.x=d.x;this.y=d.y;this.z=d.z;return this},add:function(d,k){if(void 0!==k)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.addVectors(d,k);this.x+=d.x;this.y+=d.y;this.z+=d.z;return this},addScalar:function(d){this.x+=d;this.y+=d;this.z+=d;return this},addVectors:function(d,k){this.x=d.x+k.x;this.y=d.y+k.y;this.z=d.z+k.z;return this},addScaledVector:function(d,k){this.x+=d.x*k;this.y+=d.y*k;this.z+=d.z*k;return this},sub:function(d,k){if(void 0!==k)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(d,k);this.x-=d.x;this.y-=d.y;this.z-=d.z;
return this},subScalar:function(d){this.x-=d;this.y-=d;this.z-=d;return this},subVectors:function(d,k){this.x=d.x-k.x;this.y=d.y-k.y;this.z=d.z-k.z;return this},multiply:function(d,k){if(void 0!==k)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(d,k);this.x*=d.x;this.y*=d.y;this.z*=d.z;return this},multiplyScalar:function(d){this.x*=d;this.y*=d;this.z*=d;return this},multiplyVectors:function(d,k){this.x=d.x*
k.x;this.y=d.y*k.y;this.z=d.z*k.z;return this},applyEuler:function(){var d=new e;return function(k){k&&k.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(d.setFromEuler(k))}}(),applyAxisAngle:function(){var d=new e;return function(k,p){return this.applyQuaternion(d.setFromAxisAngle(k,p))}}(),applyMatrix3:function(d){var k=this.x,p=this.y,t=this.z;d=d.elements;this.x=d[0]*k+d[3]*p+d[6]*t;this.y=d[1]*k+
d[4]*p+d[7]*t;this.z=d[2]*k+d[5]*p+d[8]*t;return this},applyMatrix4:function(d){var k=this.x,p=this.y,t=this.z;d=d.elements;var x=1/(d[3]*k+d[7]*p+d[11]*t+d[15]);this.x=(d[0]*k+d[4]*p+d[8]*t+d[12])*x;this.y=(d[1]*k+d[5]*p+d[9]*t+d[13])*x;this.z=(d[2]*k+d[6]*p+d[10]*t+d[14])*x;return this},applyQuaternion:function(d){var k=this.x,p=this.y,t=this.z,x=d.x,y=d.y,B=d.z;d=d.w;var F=d*k+y*t-B*p,G=d*p+B*k-x*t,I=d*t+x*p-y*k;k=-x*k-y*p-B*t;this.x=F*d+k*-x+G*-B-I*-y;this.y=G*d+k*-y+I*-x-F*-B;this.z=I*d+k*-B+
F*-y-G*-x;return this},project:function(d){return this.applyMatrix4(d.matrixWorldInverse).applyMatrix4(d.projectionMatrix)},unproject:function(d){return this.applyMatrix4(d.projectionMatrixInverse).applyMatrix4(d.matrixWorld)},transformDirection:function(d){var k=this.x,p=this.y,t=this.z;d=d.elements;this.x=d[0]*k+d[4]*p+d[8]*t;this.y=d[1]*k+d[5]*p+d[9]*t;this.z=d[2]*k+d[6]*p+d[10]*t;return this.normalize()},divide:function(d){this.x/=d.x;this.y/=d.y;this.z/=d.z;return this},divideScalar:function(d){return this.multiplyScalar(1/
d)},min:function(d){this.x=Math.min(this.x,d.x);this.y=Math.min(this.y,d.y);this.z=Math.min(this.z,d.z);return this},max:function(d){this.x=Math.max(this.x,d.x);this.y=Math.max(this.y,d.y);this.z=Math.max(this.z,d.z);return this},clamp:function(d,k){this.x=Math.max(d.x,Math.min(k.x,this.x));this.y=Math.max(d.y,Math.min(k.y,this.y));this.z=Math.max(d.z,Math.min(k.z,this.z));return this},clampScalar:function(d,k){this.x=Math.max(d,Math.min(k,this.x));this.y=Math.max(d,Math.min(k,this.y));this.z=Math.max(d,
Math.min(k,this.z));return this},clampLength:function(d,k){var p=this.length();return this.divideScalar(p||1).multiplyScalar(Math.max(d,Math.min(k,p)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=
0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+
Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(d){return this.normalize().multiplyScalar(d)},lerp:function(d,k){this.x+=(d.x-this.x)*k;this.y+=(d.y-this.y)*k;this.z+=(d.z-this.z)*k;return this},lerpVectors:function(d,k,p){return this.subVectors(k,d).multiplyScalar(p).add(d)},cross:function(d,k){return void 0!==k?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(d,k)):this.crossVectors(this,
d)},crossVectors:function(d,k){var p=d.x,t=d.y;d=d.z;var x=k.x,y=k.y;k=k.z;this.x=t*k-d*y;this.y=d*x-p*k;this.z=p*y-t*x;return this},projectOnVector:function(d){var k=d.dot(this)/d.lengthSq();return this.copy(d).multiplyScalar(k)},projectOnPlane:function(){var d=new f;return function(k){d.copy(this).projectOnVector(k);return this.sub(d)}}(),reflect:function(){var d=new f;return function(k){return this.sub(d.copy(k).multiplyScalar(2*this.dot(k)))}}(),angleTo:function(d){d=this.dot(d)/Math.sqrt(this.lengthSq()*
d.lengthSq());return Math.acos(mb.clamp(d,-1,1))},distanceTo:function(d){return Math.sqrt(this.distanceToSquared(d))},distanceToSquared:function(d){var k=this.x-d.x,p=this.y-d.y;d=this.z-d.z;return k*k+p*p+d*d},manhattanDistanceTo:function(d){return Math.abs(this.x-d.x)+Math.abs(this.y-d.y)+Math.abs(this.z-d.z)},setFromSpherical:function(d){return this.setFromSphericalCoords(d.radius,d.phi,d.theta)},setFromSphericalCoords:function(d,k,p){var t=Math.sin(k)*d;this.x=t*Math.sin(p);this.y=Math.cos(k)*
d;this.z=t*Math.cos(p);return this},setFromCylindrical:function(d){return this.setFromCylindricalCoords(d.radius,d.theta,d.y)},setFromCylindricalCoords:function(d,k,p){this.x=d*Math.sin(k);this.y=p;this.z=d*Math.cos(k);return this},setFromMatrixPosition:function(d){d=d.elements;this.x=d[12];this.y=d[13];this.z=d[14];return this},setFromMatrixScale:function(d){var k=this.setFromMatrixColumn(d,0).length(),p=this.setFromMatrixColumn(d,1).length();d=this.setFromMatrixColumn(d,2).length();this.x=k;this.y=
p;this.z=d;return this},setFromMatrixColumn:function(d,k){return this.fromArray(d.elements,4*k)},equals:function(d){return d.x===this.x&&d.y===this.y&&d.z===this.z},fromArray:function(d,k){void 0===k&&(k=0);this.x=d[k];this.y=d[k+1];this.z=d[k+2];return this},toArray:function(d,k){void 0===d&&(d=[]);void 0===k&&(k=0);d[k]=this.x;d[k+1]=this.y;d[k+2]=this.z;return d},fromBufferAttribute:function(d,k,p){void 0!==p&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");
this.x=d.getX(k);this.y=d.getY(k);this.z=d.getZ(k);return this}});Object.assign(g.prototype,{isMatrix3:!0,set:function(d,k,p,t,x,y,B,F,G){var I=this.elements;I[0]=d;I[1]=t;I[2]=B;I[3]=k;I[4]=x;I[5]=F;I[6]=p;I[7]=y;I[8]=G;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(d){var k=this.elements;d=d.elements;k[0]=d[0];k[1]=d[1];k[2]=d[2];k[3]=d[3];k[4]=d[4];k[5]=d[5];k[6]=d[6];k[7]=d[7];k[8]=
d[8];return this},setFromMatrix4:function(d){d=d.elements;this.set(d[0],d[4],d[8],d[1],d[5],d[9],d[2],d[6],d[10]);return this},applyToBufferAttribute:function(){var d=new f;return function(k){for(var p=0,t=k.count;p<t;p++)d.x=k.getX(p),d.y=k.getY(p),d.z=k.getZ(p),d.applyMatrix3(this),k.setXYZ(p,d.x,d.y,d.z);return k}}(),multiply:function(d){return this.multiplyMatrices(this,d)},premultiply:function(d){return this.multiplyMatrices(d,this)},multiplyMatrices:function(d,k){var p=d.elements,t=k.elements;
k=this.elements;d=p[0];var x=p[3],y=p[6],B=p[1],F=p[4],G=p[7],I=p[2],N=p[5];p=p[8];var O=t[0],Q=t[3],V=t[6],U=t[1],Z=t[4],ca=t[7],la=t[2],ra=t[5];t=t[8];k[0]=d*O+x*U+y*la;k[3]=d*Q+x*Z+y*ra;k[6]=d*V+x*ca+y*t;k[1]=B*O+F*U+G*la;k[4]=B*Q+F*Z+G*ra;k[7]=B*V+F*ca+G*t;k[2]=I*O+N*U+p*la;k[5]=I*Q+N*Z+p*ra;k[8]=I*V+N*ca+p*t;return this},multiplyScalar:function(d){var k=this.elements;k[0]*=d;k[3]*=d;k[6]*=d;k[1]*=d;k[4]*=d;k[7]*=d;k[2]*=d;k[5]*=d;k[8]*=d;return this},determinant:function(){var d=this.elements,
k=d[0],p=d[1],t=d[2],x=d[3],y=d[4],B=d[5],F=d[6],G=d[7];d=d[8];return k*y*d-k*B*G-p*x*d+p*B*F+t*x*G-t*y*F},getInverse:function(d,k){d&&d.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var p=d.elements;d=this.elements;var t=p[0],x=p[1],y=p[2],B=p[3],F=p[4],G=p[5],I=p[6],N=p[7];p=p[8];var O=p*F-G*N,Q=G*I-p*B,V=N*B-F*I,U=t*O+x*Q+y*V;if(0===U){if(!0===k)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");
return this.identity()}k=1/U;d[0]=O*k;d[1]=(y*N-p*x)*k;d[2]=(G*x-y*F)*k;d[3]=Q*k;d[4]=(p*t-y*I)*k;d[5]=(y*B-G*t)*k;d[6]=V*k;d[7]=(x*I-N*t)*k;d[8]=(F*t-x*B)*k;return this},transpose:function(){var d=this.elements;var k=d[1];d[1]=d[3];d[3]=k;k=d[2];d[2]=d[6];d[6]=k;k=d[5];d[5]=d[7];d[7]=k;return this},getNormalMatrix:function(d){return this.setFromMatrix4(d).getInverse(this).transpose()},transposeIntoArray:function(d){var k=this.elements;d[0]=k[0];d[1]=k[3];d[2]=k[6];d[3]=k[1];d[4]=k[4];d[5]=k[7];d[6]=
k[2];d[7]=k[5];d[8]=k[8];return this},setUvTransform:function(d,k,p,t,x,y,B){var F=Math.cos(x);x=Math.sin(x);this.set(p*F,p*x,-p*(F*y+x*B)+y+d,-t*x,t*F,-t*(-x*y+F*B)+B+k,0,0,1)},scale:function(d,k){var p=this.elements;p[0]*=d;p[3]*=d;p[6]*=d;p[1]*=k;p[4]*=k;p[7]*=k;return this},rotate:function(d){var k=Math.cos(d);d=Math.sin(d);var p=this.elements,t=p[0],x=p[3],y=p[6],B=p[1],F=p[4],G=p[7];p[0]=k*t+d*B;p[3]=k*x+d*F;p[6]=k*y+d*G;p[1]=-d*t+k*B;p[4]=-d*x+k*F;p[7]=-d*y+k*G;return this},translate:function(d,
k){var p=this.elements;p[0]+=d*p[2];p[3]+=d*p[5];p[6]+=d*p[8];p[1]+=k*p[2];p[4]+=k*p[5];p[7]+=k*p[8];return this},equals:function(d){var k=this.elements;d=d.elements;for(var p=0;9>p;p++)if(k[p]!==d[p])return!1;return!0},fromArray:function(d,k){void 0===k&&(k=0);for(var p=0;9>p;p++)this.elements[p]=d[p+k];return this},toArray:function(d,k){void 0===d&&(d=[]);void 0===k&&(k=0);var p=this.elements;d[k]=p[0];d[k+1]=p[1];d[k+2]=p[2];d[k+3]=p[3];d[k+4]=p[4];d[k+5]=p[5];d[k+6]=p[6];d[k+7]=p[7];d[k+8]=p[8];
return d}});var Yf,ne={getDataURL:function(d){if("undefined"==typeof HTMLCanvasElement)return d.src;if(!(d instanceof HTMLCanvasElement)){void 0===Yf&&(Yf=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));Yf.width=d.width;Yf.height=d.height;var k=Yf.getContext("2d");d instanceof ImageData?k.putImageData(d,0,0):k.drawImage(d,0,0,d.width,d.height);d=Yf}return 2048<d.width||2048<d.height?d.toDataURL("image/jpeg",.6):d.toDataURL("image/png")}},Wn=0;h.DEFAULT_IMAGE=void 0;h.DEFAULT_MAPPING=
300;h.prototype=Object.assign(Object.create(b.prototype),{constructor:h,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.name=d.name;this.image=d.image;this.mipmaps=d.mipmaps.slice(0);this.mapping=d.mapping;this.wrapS=d.wrapS;this.wrapT=d.wrapT;this.magFilter=d.magFilter;this.minFilter=d.minFilter;this.anisotropy=
d.anisotropy;this.format=d.format;this.type=d.type;this.offset.copy(d.offset);this.repeat.copy(d.repeat);this.center.copy(d.center);this.rotation=d.rotation;this.matrixAutoUpdate=d.matrixAutoUpdate;this.matrix.copy(d.matrix);this.generateMipmaps=d.generateMipmaps;this.premultiplyAlpha=d.premultiplyAlpha;this.flipY=d.flipY;this.unpackAlignment=d.unpackAlignment;this.encoding=d.encoding;return this},toJSON:function(d){var k=void 0===d||"string"===typeof d;if(!k&&void 0!==d.textures[this.uuid])return d.textures[this.uuid];
var p={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};
if(void 0!==this.image){var t=this.image;void 0===t.uuid&&(t.uuid=mb.generateUUID());if(!k&&void 0===d.images[t.uuid]){if(Array.isArray(t)){var x=[];for(var y=0,B=t.length;y<B;y++)x.push(ne.getDataURL(t[y]))}else x=ne.getDataURL(t);d.images[t.uuid]={uuid:t.uuid,url:x}}p.image=t.uuid}k||(d.textures[this.uuid]=p);return p},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(d){if(300!==this.mapping)return d;d.applyMatrix3(this.matrix);if(0>d.x||1<d.x)switch(this.wrapS){case 1E3:d.x-=
Math.floor(d.x);break;case 1001:d.x=0>d.x?0:1;break;case 1002:d.x=1===Math.abs(Math.floor(d.x)%2)?Math.ceil(d.x)-d.x:d.x-Math.floor(d.x)}if(0>d.y||1<d.y)switch(this.wrapT){case 1E3:d.y-=Math.floor(d.y);break;case 1001:d.y=0>d.y?0:1;break;case 1002:d.y=1===Math.abs(Math.floor(d.y)%2)?Math.ceil(d.y)-d.y:d.y-Math.floor(d.y)}this.flipY&&(d.y=1-d.y);return d}});Object.defineProperty(h.prototype,"needsUpdate",{set:function(d){!0===d&&this.version++}});Object.assign(l.prototype,{isVector4:!0,set:function(d,
k,p,t){this.x=d;this.y=k;this.z=p;this.w=t;return this},setScalar:function(d){this.w=this.z=this.y=this.x=d;return this},setX:function(d){this.x=d;return this},setY:function(d){this.y=d;return this},setZ:function(d){this.z=d;return this},setW:function(d){this.w=d;return this},setComponent:function(d,k){switch(d){case 0:this.x=k;break;case 1:this.y=k;break;case 2:this.z=k;break;case 3:this.w=k;break;default:throw Error("index is out of range: "+d);}return this},getComponent:function(d){switch(d){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+d);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(d){this.x=d.x;this.y=d.y;this.z=d.z;this.w=void 0!==d.w?d.w:1;return this},add:function(d,k){if(void 0!==k)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(d,k);this.x+=d.x;this.y+=d.y;this.z+=d.z;this.w+=d.w;return this},
addScalar:function(d){this.x+=d;this.y+=d;this.z+=d;this.w+=d;return this},addVectors:function(d,k){this.x=d.x+k.x;this.y=d.y+k.y;this.z=d.z+k.z;this.w=d.w+k.w;return this},addScaledVector:function(d,k){this.x+=d.x*k;this.y+=d.y*k;this.z+=d.z*k;this.w+=d.w*k;return this},sub:function(d,k){if(void 0!==k)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(d,k);this.x-=d.x;this.y-=d.y;this.z-=d.z;this.w-=d.w;return this},subScalar:function(d){this.x-=
d;this.y-=d;this.z-=d;this.w-=d;return this},subVectors:function(d,k){this.x=d.x-k.x;this.y=d.y-k.y;this.z=d.z-k.z;this.w=d.w-k.w;return this},multiplyScalar:function(d){this.x*=d;this.y*=d;this.z*=d;this.w*=d;return this},applyMatrix4:function(d){var k=this.x,p=this.y,t=this.z,x=this.w;d=d.elements;this.x=d[0]*k+d[4]*p+d[8]*t+d[12]*x;this.y=d[1]*k+d[5]*p+d[9]*t+d[13]*x;this.z=d[2]*k+d[6]*p+d[10]*t+d[14]*x;this.w=d[3]*k+d[7]*p+d[11]*t+d[15]*x;return this},divideScalar:function(d){return this.multiplyScalar(1/
d)},setAxisAngleFromQuaternion:function(d){this.w=2*Math.acos(d.w);var k=Math.sqrt(1-d.w*d.w);1E-4>k?(this.x=1,this.z=this.y=0):(this.x=d.x/k,this.y=d.y/k,this.z=d.z/k);return this},setAxisAngleFromRotationMatrix:function(d){d=d.elements;var k=d[0];var p=d[4];var t=d[8],x=d[1],y=d[5],B=d[9];var F=d[2];var G=d[6];var I=d[10];if(.01>Math.abs(p-x)&&.01>Math.abs(t-F)&&.01>Math.abs(B-G)){if(.1>Math.abs(p+x)&&.1>Math.abs(t+F)&&.1>Math.abs(B+G)&&.1>Math.abs(k+y+I-3))return this.set(1,0,0,0),this;d=Math.PI;
k=(k+1)/2;y=(y+1)/2;I=(I+1)/2;p=(p+x)/4;t=(t+F)/4;B=(B+G)/4;k>y&&k>I?.01>k?(G=0,p=F=.707106781):(G=Math.sqrt(k),F=p/G,p=t/G):y>I?.01>y?(G=.707106781,F=0,p=.707106781):(F=Math.sqrt(y),G=p/F,p=B/F):.01>I?(F=G=.707106781,p=0):(p=Math.sqrt(I),G=t/p,F=B/p);this.set(G,F,p,d);return this}d=Math.sqrt((G-B)*(G-B)+(t-F)*(t-F)+(x-p)*(x-p));.001>Math.abs(d)&&(d=1);this.x=(G-B)/d;this.y=(t-F)/d;this.z=(x-p)/d;this.w=Math.acos((k+y+I-1)/2);return this},min:function(d){this.x=Math.min(this.x,d.x);this.y=Math.min(this.y,
d.y);this.z=Math.min(this.z,d.z);this.w=Math.min(this.w,d.w);return this},max:function(d){this.x=Math.max(this.x,d.x);this.y=Math.max(this.y,d.y);this.z=Math.max(this.z,d.z);this.w=Math.max(this.w,d.w);return this},clamp:function(d,k){this.x=Math.max(d.x,Math.min(k.x,this.x));this.y=Math.max(d.y,Math.min(k.y,this.y));this.z=Math.max(d.z,Math.min(k.z,this.z));this.w=Math.max(d.w,Math.min(k.w,this.w));return this},clampScalar:function(){var d,k;return function(p,t){void 0===d&&(d=new l,k=new l);d.set(p,
p,p,p);k.set(t,t,t,t);return this.clamp(d,k)}}(),clampLength:function(d,k){var p=this.length();return this.divideScalar(p||1).multiplyScalar(Math.max(d,Math.min(k,p)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);
this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z+this.w*d.w},lengthSq:function(){return this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(d){return this.normalize().multiplyScalar(d)},lerp:function(d,k){this.x+=(d.x-this.x)*k;this.y+=(d.y-this.y)*k;this.z+=(d.z-this.z)*k;this.w+=(d.w-this.w)*k;return this},lerpVectors:function(d,
k,p){return this.subVectors(k,d).multiplyScalar(p).add(d)},equals:function(d){return d.x===this.x&&d.y===this.y&&d.z===this.z&&d.w===this.w},fromArray:function(d,k){void 0===k&&(k=0);this.x=d[k];this.y=d[k+1];this.z=d[k+2];this.w=d[k+3];return this},toArray:function(d,k){void 0===d&&(d=[]);void 0===k&&(k=0);d[k]=this.x;d[k+1]=this.y;d[k+2]=this.z;d[k+3]=this.w;return d},fromBufferAttribute:function(d,k,p){void 0!==p&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");
this.x=d.getX(k);this.y=d.getY(k);this.z=d.getZ(k);this.w=d.getW(k);return this}});n.prototype=Object.assign(Object.create(b.prototype),{constructor:n,isWebGLRenderTarget:!0,setSize:function(d,k){if(this.width!==d||this.height!==k)this.width=d,this.height=k,this.dispose();this.viewport.set(0,0,d,k);this.scissor.set(0,0,d,k)},clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.width=d.width;this.height=d.height;this.viewport.copy(d.viewport);this.texture=d.texture.clone();
this.depthBuffer=d.depthBuffer;this.stencilBuffer=d.stencilBuffer;this.depthTexture=d.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});m.prototype=Object.assign(Object.create(n.prototype),{constructor:m,isWebGLMultisampleRenderTarget:!0,copy:function(d){n.prototype.copy.call(this,d);this.samples=d.samples;return this}});q.prototype=Object.create(n.prototype);q.prototype.constructor=q;q.prototype.isWebGLRenderTargetCube=!0;r.prototype=Object.create(h.prototype);
r.prototype.constructor=r;r.prototype.isDataTexture=!0;Object.assign(v.prototype,{isBox3:!0,set:function(d,k){this.min.copy(d);this.max.copy(k);return this},setFromArray:function(d){for(var k=Infinity,p=Infinity,t=Infinity,x=-Infinity,y=-Infinity,B=-Infinity,F=0,G=d.length;F<G;F+=3){var I=d[F],N=d[F+1],O=d[F+2];I<k&&(k=I);N<p&&(p=N);O<t&&(t=O);I>x&&(x=I);N>y&&(y=N);O>B&&(B=O)}this.min.set(k,p,t);this.max.set(x,y,B);return this},setFromBufferAttribute:function(d){for(var k=Infinity,p=Infinity,t=Infinity,
x=-Infinity,y=-Infinity,B=-Infinity,F=0,G=d.count;F<G;F++){var I=d.getX(F),N=d.getY(F),O=d.getZ(F);I<k&&(k=I);N<p&&(p=N);O<t&&(t=O);I>x&&(x=I);N>y&&(y=N);O>B&&(B=O)}this.min.set(k,p,t);this.max.set(x,y,B);return this},setFromPoints:function(d){this.makeEmpty();for(var k=0,p=d.length;k<p;k++)this.expandByPoint(d[k]);return this},setFromCenterAndSize:function(){var d=new f;return function(k,p){p=d.copy(p).multiplyScalar(.5);this.min.copy(k).sub(p);this.max.copy(k).add(p);return this}}(),setFromObject:function(d){this.makeEmpty();
return this.expandByObject(d)},clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.min.copy(d.min);this.max.copy(d.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(d){void 0===d&&(console.warn("THREE.Box3: .getCenter() target is now required"),d=new f);return this.isEmpty()?
d.set(0,0,0):d.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(d){void 0===d&&(console.warn("THREE.Box3: .getSize() target is now required"),d=new f);return this.isEmpty()?d.set(0,0,0):d.subVectors(this.max,this.min)},expandByPoint:function(d){this.min.min(d);this.max.max(d);return this},expandByVector:function(d){this.min.sub(d);this.max.add(d);return this},expandByScalar:function(d){this.min.addScalar(-d);this.max.addScalar(d);return this},expandByObject:function(){function d(y){var B=
y.geometry;if(void 0!==B)if(B.isGeometry)for(B=B.vertices,p=0,t=B.length;p<t;p++)x.copy(B[p]),x.applyMatrix4(y.matrixWorld),k.expandByPoint(x);else if(B.isBufferGeometry&&(B=B.attributes.position,void 0!==B))for(p=0,t=B.count;p<t;p++)x.fromBufferAttribute(B,p).applyMatrix4(y.matrixWorld),k.expandByPoint(x)}var k,p,t,x=new f;return function(y){k=this;y.updateMatrixWorld(!0);y.traverse(d);return this}}(),containsPoint:function(d){return d.x<this.min.x||d.x>this.max.x||d.y<this.min.y||d.y>this.max.y||
d.z<this.min.z||d.z>this.max.z?!1:!0},containsBox:function(d){return this.min.x<=d.min.x&&d.max.x<=this.max.x&&this.min.y<=d.min.y&&d.max.y<=this.max.y&&this.min.z<=d.min.z&&d.max.z<=this.max.z},getParameter:function(d,k){void 0===k&&(console.warn("THREE.Box3: .getParameter() target is now required"),k=new f);return k.set((d.x-this.min.x)/(this.max.x-this.min.x),(d.y-this.min.y)/(this.max.y-this.min.y),(d.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(d){return d.max.x<this.min.x||
d.min.x>this.max.x||d.max.y<this.min.y||d.min.y>this.max.y||d.max.z<this.min.z||d.min.z>this.max.z?!1:!0},intersectsSphere:function(){var d=new f;return function(k){this.clampPoint(k.center,d);return d.distanceToSquared(k.center)<=k.radius*k.radius}}(),intersectsPlane:function(d){if(0<d.normal.x){var k=d.normal.x*this.min.x;var p=d.normal.x*this.max.x}else k=d.normal.x*this.max.x,p=d.normal.x*this.min.x;0<d.normal.y?(k+=d.normal.y*this.min.y,p+=d.normal.y*this.max.y):(k+=d.normal.y*this.max.y,p+=
d.normal.y*this.min.y);0<d.normal.z?(k+=d.normal.z*this.min.z,p+=d.normal.z*this.max.z):(k+=d.normal.z*this.max.z,p+=d.normal.z*this.min.z);return k<=-d.constant&&p>=-d.constant},intersectsTriangle:function(){function d(O){var Q;var V=0;for(Q=O.length-3;V<=Q;V+=3){F.fromArray(O,V);var U=I.x*Math.abs(F.x)+I.y*Math.abs(F.y)+I.z*Math.abs(F.z),Z=k.dot(F),ca=p.dot(F),la=t.dot(F);if(Math.max(-Math.max(Z,ca,la),Math.min(Z,ca,la))>U)return!1}return!0}var k=new f,p=new f,t=new f,x=new f,y=new f,B=new f,F=
new f,G=new f,I=new f,N=new f;return function(O){if(this.isEmpty())return!1;this.getCenter(G);I.subVectors(this.max,G);k.subVectors(O.a,G);p.subVectors(O.b,G);t.subVectors(O.c,G);x.subVectors(p,k);y.subVectors(t,p);B.subVectors(k,t);O=[0,-x.z,x.y,0,-y.z,y.y,0,-B.z,B.y,x.z,0,-x.x,y.z,0,-y.x,B.z,0,-B.x,-x.y,x.x,0,-y.y,y.x,0,-B.y,B.x,0];if(!d(O))return!1;O=[1,0,0,0,1,0,0,0,1];if(!d(O))return!1;N.crossVectors(x,y);O=[N.x,N.y,N.z];return d(O)}}(),clampPoint:function(d,k){void 0===k&&(console.warn("THREE.Box3: .clampPoint() target is now required"),
k=new f);return k.copy(d).clamp(this.min,this.max)},distanceToPoint:function(){var d=new f;return function(k){return d.copy(k).clamp(this.min,this.max).sub(k).length()}}(),getBoundingSphere:function(){var d=new f;return function(k){void 0===k&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(k.center);k.radius=.5*this.getSize(d).length();return k}}(),intersect:function(d){this.min.max(d.min);this.max.min(d.max);this.isEmpty()&&this.makeEmpty();return this},union:function(d){this.min.min(d.min);
this.max.max(d.max);return this},applyMatrix4:function(){var d=[new f,new f,new f,new f,new f,new f,new f,new f];return function(k){if(this.isEmpty())return this;d[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(k);d[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(k);d[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(k);d[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(k);d[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(k);d[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(k);
d[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(k);d[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(k);this.setFromPoints(d);return this}}(),translate:function(d){this.min.add(d);this.max.add(d);return this},equals:function(d){return d.min.equals(this.min)&&d.max.equals(this.max)}});Object.assign(u.prototype,{set:function(d,k){this.center.copy(d);this.radius=k;return this},setFromPoints:function(){var d=new v;return function(k,p){var t=this.center;void 0!==p?t.copy(p):d.setFromPoints(k).getCenter(t);
for(var x=p=0,y=k.length;x<y;x++)p=Math.max(p,t.distanceToSquared(k[x]));this.radius=Math.sqrt(p);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.center.copy(d.center);this.radius=d.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(d){return d.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(d){return d.distanceTo(this.center)-this.radius},intersectsSphere:function(d){var k=this.radius+
d.radius;return d.center.distanceToSquared(this.center)<=k*k},intersectsBox:function(d){return d.intersectsSphere(this)},intersectsPlane:function(d){return Math.abs(d.distanceToPoint(this.center))<=this.radius},clampPoint:function(d,k){var p=this.center.distanceToSquared(d);void 0===k&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),k=new f);k.copy(d);p>this.radius*this.radius&&(k.sub(this.center).normalize(),k.multiplyScalar(this.radius).add(this.center));return k},getBoundingBox:function(d){void 0===
d&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),d=new v);d.set(this.center,this.center);d.expandByScalar(this.radius);return d},applyMatrix4:function(d){this.center.applyMatrix4(d);this.radius*=d.getMaxScaleOnAxis();return this},translate:function(d){this.center.add(d);return this},equals:function(d){return d.center.equals(this.center)&&d.radius===this.radius}});Object.assign(w.prototype,{set:function(d,k){this.normal.copy(d);this.constant=k;return this},setComponents:function(d,
k,p,t){this.normal.set(d,k,p);this.constant=t;return this},setFromNormalAndCoplanarPoint:function(d,k){this.normal.copy(d);this.constant=-k.dot(this.normal);return this},setFromCoplanarPoints:function(){var d=new f,k=new f;return function(p,t,x){t=d.subVectors(x,t).cross(k.subVectors(p,t)).normalize();this.setFromNormalAndCoplanarPoint(t,p);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.normal.copy(d.normal);this.constant=d.constant;return this},normalize:function(){var d=
1/this.normal.length();this.normal.multiplyScalar(d);this.constant*=d;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(d){return this.normal.dot(d)+this.constant},distanceToSphere:function(d){return this.distanceToPoint(d.center)-d.radius},projectPoint:function(d,k){void 0===k&&(console.warn("THREE.Plane: .projectPoint() target is now required"),k=new f);return k.copy(this.normal).multiplyScalar(-this.distanceToPoint(d)).add(d)},intersectLine:function(){var d=
new f;return function(k,p){void 0===p&&(console.warn("THREE.Plane: .intersectLine() target is now required"),p=new f);var t=k.delta(d),x=this.normal.dot(t);if(0===x){if(0===this.distanceToPoint(k.start))return p.copy(k.start)}else if(x=-(k.start.dot(this.normal)+this.constant)/x,!(0>x||1<x))return p.copy(t).multiplyScalar(x).add(k.start)}}(),intersectsLine:function(d){var k=this.distanceToPoint(d.start);d=this.distanceToPoint(d.end);return 0>k&&0<d||0>d&&0<k},intersectsBox:function(d){return d.intersectsPlane(this)},
intersectsSphere:function(d){return d.intersectsPlane(this)},coplanarPoint:function(d){void 0===d&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),d=new f);return d.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var d=new f,k=new g;return function(p,t){t=t||k.getNormalMatrix(p);p=this.coplanarPoint(d).applyMatrix4(p);t=this.normal.applyMatrix3(t).normalize();this.constant=-p.dot(t);return this}}(),translate:function(d){this.constant-=d.dot(this.normal);
return this},equals:function(d){return d.normal.equals(this.normal)&&d.constant===this.constant}});Object.assign(z.prototype,{set:function(d,k,p,t,x,y){var B=this.planes;B[0].copy(d);B[1].copy(k);B[2].copy(p);B[3].copy(t);B[4].copy(x);B[5].copy(y);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(d){for(var k=this.planes,p=0;6>p;p++)k[p].copy(d.planes[p]);return this},setFromMatrix:function(d){var k=this.planes,p=d.elements;d=p[0];var t=p[1],x=p[2],y=p[3],B=p[4],
F=p[5],G=p[6],I=p[7],N=p[8],O=p[9],Q=p[10],V=p[11],U=p[12],Z=p[13],ca=p[14];p=p[15];k[0].setComponents(y-d,I-B,V-N,p-U).normalize();k[1].setComponents(y+d,I+B,V+N,p+U).normalize();k[2].setComponents(y+t,I+F,V+O,p+Z).normalize();k[3].setComponents(y-t,I-F,V-O,p-Z).normalize();k[4].setComponents(y-x,I-G,V-Q,p-ca).normalize();k[5].setComponents(y+x,I+G,V+Q,p+ca).normalize();return this},intersectsObject:function(){var d=new u;return function(k){var p=k.geometry;null===p.boundingSphere&&p.computeBoundingSphere();
d.copy(p.boundingSphere).applyMatrix4(k.matrixWorld);return this.intersectsSphere(d)}}(),intersectsSprite:function(){var d=new u;return function(k){d.center.set(0,0,0);d.radius=.7071067811865476;d.applyMatrix4(k.matrixWorld);return this.intersectsSphere(d)}}(),intersectsSphere:function(d){var k=this.planes,p=d.center;d=-d.radius;for(var t=0;6>t;t++)if(k[t].distanceToPoint(p)<d)return!1;return!0},intersectsBox:function(){var d=new f;return function(k){for(var p=this.planes,t=0;6>t;t++){var x=p[t];
d.x=0<x.normal.x?k.max.x:k.min.x;d.y=0<x.normal.y?k.max.y:k.min.y;d.z=0<x.normal.z?k.max.z:k.min.z;if(0>x.distanceToPoint(d))return!1}return!0}}(),containsPoint:function(d){for(var k=this.planes,p=0;6>p;p++)if(0>k[p].distanceToPoint(d))return!1;return!0}});Object.assign(A.prototype,{isMatrix4:!0,set:function(d,k,p,t,x,y,B,F,G,I,N,O,Q,V,U,Z){var ca=this.elements;ca[0]=d;ca[4]=k;ca[8]=p;ca[12]=t;ca[1]=x;ca[5]=y;ca[9]=B;ca[13]=F;ca[2]=G;ca[6]=I;ca[10]=N;ca[14]=O;ca[3]=Q;ca[7]=V;ca[11]=U;ca[15]=Z;return this},
identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new A).fromArray(this.elements)},copy:function(d){var k=this.elements;d=d.elements;k[0]=d[0];k[1]=d[1];k[2]=d[2];k[3]=d[3];k[4]=d[4];k[5]=d[5];k[6]=d[6];k[7]=d[7];k[8]=d[8];k[9]=d[9];k[10]=d[10];k[11]=d[11];k[12]=d[12];k[13]=d[13];k[14]=d[14];k[15]=d[15];return this},copyPosition:function(d){var k=this.elements;d=d.elements;k[12]=d[12];k[13]=d[13];k[14]=d[14];return this},extractBasis:function(d,k,p){d.setFromMatrixColumn(this,
0);k.setFromMatrixColumn(this,1);p.setFromMatrixColumn(this,2);return this},makeBasis:function(d,k,p){this.set(d.x,k.x,p.x,0,d.y,k.y,p.y,0,d.z,k.z,p.z,0,0,0,0,1);return this},extractRotation:function(){var d=new f;return function(k){var p=this.elements,t=k.elements,x=1/d.setFromMatrixColumn(k,0).length(),y=1/d.setFromMatrixColumn(k,1).length();k=1/d.setFromMatrixColumn(k,2).length();p[0]=t[0]*x;p[1]=t[1]*x;p[2]=t[2]*x;p[3]=0;p[4]=t[4]*y;p[5]=t[5]*y;p[6]=t[6]*y;p[7]=0;p[8]=t[8]*k;p[9]=t[9]*k;p[10]=
t[10]*k;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return this}}(),makeRotationFromEuler:function(d){d&&d.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var k=this.elements,p=d.x,t=d.y,x=d.z,y=Math.cos(p);p=Math.sin(p);var B=Math.cos(t);t=Math.sin(t);var F=Math.cos(x);x=Math.sin(x);if("XYZ"===d.order){d=y*F;var G=y*x,I=p*F,N=p*x;k[0]=B*F;k[4]=-B*x;k[8]=t;k[1]=G+I*t;k[5]=d-N*t;k[9]=-p*B;k[2]=N-d*t;k[6]=I+G*t;k[10]=y*B}else"YXZ"===
d.order?(d=B*F,G=B*x,I=t*F,N=t*x,k[0]=d+N*p,k[4]=I*p-G,k[8]=y*t,k[1]=y*x,k[5]=y*F,k[9]=-p,k[2]=G*p-I,k[6]=N+d*p,k[10]=y*B):"ZXY"===d.order?(d=B*F,G=B*x,I=t*F,N=t*x,k[0]=d-N*p,k[4]=-y*x,k[8]=I+G*p,k[1]=G+I*p,k[5]=y*F,k[9]=N-d*p,k[2]=-y*t,k[6]=p,k[10]=y*B):"ZYX"===d.order?(d=y*F,G=y*x,I=p*F,N=p*x,k[0]=B*F,k[4]=I*t-G,k[8]=d*t+N,k[1]=B*x,k[5]=N*t+d,k[9]=G*t-I,k[2]=-t,k[6]=p*B,k[10]=y*B):"YZX"===d.order?(d=y*B,G=y*t,I=p*B,N=p*t,k[0]=B*F,k[4]=N-d*x,k[8]=I*x+G,k[1]=x,k[5]=y*F,k[9]=-p*F,k[2]=-t*F,k[6]=G*
x+I,k[10]=d-N*x):"XZY"===d.order&&(d=y*B,G=y*t,I=p*B,N=p*t,k[0]=B*F,k[4]=-x,k[8]=t*F,k[1]=d*x+N,k[5]=y*F,k[9]=G*x-I,k[2]=I*x-G,k[6]=p*F,k[10]=N*x+d);k[3]=0;k[7]=0;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return this},makeRotationFromQuaternion:function(){var d=new f(0,0,0),k=new f(1,1,1);return function(p){return this.compose(d,p,k)}}(),lookAt:function(){var d=new f,k=new f,p=new f;return function(t,x,y){var B=this.elements;p.subVectors(t,x);0===p.lengthSq()&&(p.z=1);p.normalize();d.crossVectors(y,
p);0===d.lengthSq()&&(1===Math.abs(y.z)?p.x+=1E-4:p.z+=1E-4,p.normalize(),d.crossVectors(y,p));d.normalize();k.crossVectors(p,d);B[0]=d.x;B[4]=k.x;B[8]=p.x;B[1]=d.y;B[5]=k.y;B[9]=p.y;B[2]=d.z;B[6]=k.z;B[10]=p.z;return this}}(),multiply:function(d,k){return void 0!==k?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(d,k)):this.multiplyMatrices(this,d)},premultiply:function(d){return this.multiplyMatrices(d,this)},
multiplyMatrices:function(d,k){var p=d.elements,t=k.elements;k=this.elements;d=p[0];var x=p[4],y=p[8],B=p[12],F=p[1],G=p[5],I=p[9],N=p[13],O=p[2],Q=p[6],V=p[10],U=p[14],Z=p[3],ca=p[7],la=p[11];p=p[15];var ra=t[0],ia=t[4],va=t[8],ma=t[12],na=t[1],ya=t[5],xa=t[9],Ga=t[13],Na=t[2],Ha=t[6],Ma=t[10],Pa=t[14],Za=t[3],ea=t[7],ha=t[11];t=t[15];k[0]=d*ra+x*na+y*Na+B*Za;k[4]=d*ia+x*ya+y*Ha+B*ea;k[8]=d*va+x*xa+y*Ma+B*ha;k[12]=d*ma+x*Ga+y*Pa+B*t;k[1]=F*ra+G*na+I*Na+N*Za;k[5]=F*ia+G*ya+I*Ha+N*ea;k[9]=F*va+G*xa+
I*Ma+N*ha;k[13]=F*ma+G*Ga+I*Pa+N*t;k[2]=O*ra+Q*na+V*Na+U*Za;k[6]=O*ia+Q*ya+V*Ha+U*ea;k[10]=O*va+Q*xa+V*Ma+U*ha;k[14]=O*ma+Q*Ga+V*Pa+U*t;k[3]=Z*ra+ca*na+la*Na+p*Za;k[7]=Z*ia+ca*ya+la*Ha+p*ea;k[11]=Z*va+ca*xa+la*Ma+p*ha;k[15]=Z*ma+ca*Ga+la*Pa+p*t;return this},multiplyScalar:function(d){var k=this.elements;k[0]*=d;k[4]*=d;k[8]*=d;k[12]*=d;k[1]*=d;k[5]*=d;k[9]*=d;k[13]*=d;k[2]*=d;k[6]*=d;k[10]*=d;k[14]*=d;k[3]*=d;k[7]*=d;k[11]*=d;k[15]*=d;return this},applyToBufferAttribute:function(){var d=new f;return function(k){for(var p=
0,t=k.count;p<t;p++)d.x=k.getX(p),d.y=k.getY(p),d.z=k.getZ(p),d.applyMatrix4(this),k.setXYZ(p,d.x,d.y,d.z);return k}}(),determinant:function(){var d=this.elements,k=d[0],p=d[4],t=d[8],x=d[12],y=d[1],B=d[5],F=d[9],G=d[13],I=d[2],N=d[6],O=d[10],Q=d[14];return d[3]*(+x*F*N-t*G*N-x*B*O+p*G*O+t*B*Q-p*F*Q)+d[7]*(+k*F*Q-k*G*O+x*y*O-t*y*Q+t*G*I-x*F*I)+d[11]*(+k*G*N-k*B*Q-x*y*N+p*y*Q+x*B*I-p*G*I)+d[15]*(-t*B*I-k*F*N+k*B*O+t*y*N-p*y*O+p*F*I)},transpose:function(){var d=this.elements;var k=d[1];d[1]=d[4];d[4]=
k;k=d[2];d[2]=d[8];d[8]=k;k=d[6];d[6]=d[9];d[9]=k;k=d[3];d[3]=d[12];d[12]=k;k=d[7];d[7]=d[13];d[13]=k;k=d[11];d[11]=d[14];d[14]=k;return this},setPosition:function(d){var k=this.elements;k[12]=d.x;k[13]=d.y;k[14]=d.z;return this},getInverse:function(d,k){var p=this.elements,t=d.elements;d=t[0];var x=t[1],y=t[2],B=t[3],F=t[4],G=t[5],I=t[6],N=t[7],O=t[8],Q=t[9],V=t[10],U=t[11],Z=t[12],ca=t[13],la=t[14];t=t[15];var ra=Q*la*N-ca*V*N+ca*I*U-G*la*U-Q*I*t+G*V*t,ia=Z*V*N-O*la*N-Z*I*U+F*la*U+O*I*t-F*V*t,va=
O*ca*N-Z*Q*N+Z*G*U-F*ca*U-O*G*t+F*Q*t,ma=Z*Q*I-O*ca*I-Z*G*V+F*ca*V+O*G*la-F*Q*la,na=d*ra+x*ia+y*va+B*ma;if(0===na){if(!0===k)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}k=1/na;p[0]=ra*k;p[1]=(ca*V*B-Q*la*B-ca*y*U+x*la*U+Q*y*t-x*V*t)*k;p[2]=(G*la*B-ca*I*B+ca*y*N-x*la*N-G*y*t+x*I*t)*k;p[3]=(Q*I*B-G*V*B-Q*y*N+x*V*N+G*y*U-x*I*U)*k;p[4]=ia*k;p[5]=(O*la*B-Z*V*B+
Z*y*U-d*la*U-O*y*t+d*V*t)*k;p[6]=(Z*I*B-F*la*B-Z*y*N+d*la*N+F*y*t-d*I*t)*k;p[7]=(F*V*B-O*I*B+O*y*N-d*V*N-F*y*U+d*I*U)*k;p[8]=va*k;p[9]=(Z*Q*B-O*ca*B-Z*x*U+d*ca*U+O*x*t-d*Q*t)*k;p[10]=(F*ca*B-Z*G*B+Z*x*N-d*ca*N-F*x*t+d*G*t)*k;p[11]=(O*G*B-F*Q*B-O*x*N+d*Q*N+F*x*U-d*G*U)*k;p[12]=ma*k;p[13]=(O*ca*y-Z*Q*y+Z*x*V-d*ca*V-O*x*la+d*Q*la)*k;p[14]=(Z*G*y-F*ca*y-Z*x*I+d*ca*I+F*x*la-d*G*la)*k;p[15]=(F*Q*y-O*G*y+O*x*I-d*Q*I-F*x*V+d*G*V)*k;return this},scale:function(d){var k=this.elements,p=d.x,t=d.y;d=d.z;k[0]*=
p;k[4]*=t;k[8]*=d;k[1]*=p;k[5]*=t;k[9]*=d;k[2]*=p;k[6]*=t;k[10]*=d;k[3]*=p;k[7]*=t;k[11]*=d;return this},getMaxScaleOnAxis:function(){var d=this.elements;return Math.sqrt(Math.max(d[0]*d[0]+d[1]*d[1]+d[2]*d[2],d[4]*d[4]+d[5]*d[5]+d[6]*d[6],d[8]*d[8]+d[9]*d[9]+d[10]*d[10]))},makeTranslation:function(d,k,p){this.set(1,0,0,d,0,1,0,k,0,0,1,p,0,0,0,1);return this},makeRotationX:function(d){var k=Math.cos(d);d=Math.sin(d);this.set(1,0,0,0,0,k,-d,0,0,d,k,0,0,0,0,1);return this},makeRotationY:function(d){var k=
Math.cos(d);d=Math.sin(d);this.set(k,0,d,0,0,1,0,0,-d,0,k,0,0,0,0,1);return this},makeRotationZ:function(d){var k=Math.cos(d);d=Math.sin(d);this.set(k,-d,0,0,d,k,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(d,k){var p=Math.cos(k);k=Math.sin(k);var t=1-p,x=d.x,y=d.y;d=d.z;var B=t*x,F=t*y;this.set(B*x+p,B*y-k*d,B*d+k*y,0,B*y+k*d,F*y+p,F*d-k*x,0,B*d-k*y,F*d+k*x,t*d*d+p,0,0,0,0,1);return this},makeScale:function(d,k,p){this.set(d,0,0,0,0,k,0,0,0,0,p,0,0,0,0,1);return this},makeShear:function(d,
k,p){this.set(1,k,p,0,d,1,p,0,d,k,1,0,0,0,0,1);return this},compose:function(d,k,p){var t=this.elements,x=k._x,y=k._y,B=k._z,F=k._w,G=x+x,I=y+y,N=B+B;k=x*G;var O=x*I;x*=N;var Q=y*I;y*=N;B*=N;G*=F;I*=F;F*=N;N=p.x;var V=p.y;p=p.z;t[0]=(1-(Q+B))*N;t[1]=(O+F)*N;t[2]=(x-I)*N;t[3]=0;t[4]=(O-F)*V;t[5]=(1-(k+B))*V;t[6]=(y+G)*V;t[7]=0;t[8]=(x+I)*p;t[9]=(y-G)*p;t[10]=(1-(k+Q))*p;t[11]=0;t[12]=d.x;t[13]=d.y;t[14]=d.z;t[15]=1;return this},decompose:function(){var d=new f,k=new A;return function(p,t,x){var y=
this.elements,B=d.set(y[0],y[1],y[2]).length(),F=d.set(y[4],y[5],y[6]).length(),G=d.set(y[8],y[9],y[10]).length();0>this.determinant()&&(B=-B);p.x=y[12];p.y=y[13];p.z=y[14];k.copy(this);p=1/B;y=1/F;var I=1/G;k.elements[0]*=p;k.elements[1]*=p;k.elements[2]*=p;k.elements[4]*=y;k.elements[5]*=y;k.elements[6]*=y;k.elements[8]*=I;k.elements[9]*=I;k.elements[10]*=I;t.setFromRotationMatrix(k);x.x=B;x.y=F;x.z=G;return this}}(),makePerspective:function(d,k,p,t,x,y){void 0===y&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
var B=this.elements;B[0]=2*x/(k-d);B[4]=0;B[8]=(k+d)/(k-d);B[12]=0;B[1]=0;B[5]=2*x/(p-t);B[9]=(p+t)/(p-t);B[13]=0;B[2]=0;B[6]=0;B[10]=-(y+x)/(y-x);B[14]=-2*y*x/(y-x);B[3]=0;B[7]=0;B[11]=-1;B[15]=0;return this},makeOrthographic:function(d,k,p,t,x,y){var B=this.elements,F=1/(k-d),G=1/(p-t),I=1/(y-x);B[0]=2*F;B[4]=0;B[8]=0;B[12]=-((k+d)*F);B[1]=0;B[5]=2*G;B[9]=0;B[13]=-((p+t)*G);B[2]=0;B[6]=0;B[10]=-2*I;B[14]=-((y+x)*I);B[3]=0;B[7]=0;B[11]=0;B[15]=1;return this},equals:function(d){var k=this.elements;
d=d.elements;for(var p=0;16>p;p++)if(k[p]!==d[p])return!1;return!0},fromArray:function(d,k){void 0===k&&(k=0);for(var p=0;16>p;p++)this.elements[p]=d[p+k];return this},toArray:function(d,k){void 0===d&&(d=[]);void 0===k&&(k=0);var p=this.elements;d[k]=p[0];d[k+1]=p[1];d[k+2]=p[2];d[k+3]=p[3];d[k+4]=p[4];d[k+5]=p[5];d[k+6]=p[6];d[k+7]=p[7];d[k+8]=p[8];d[k+9]=p[9];d[k+10]=p[10];d[k+11]=p[11];d[k+12]=p[12];d[k+13]=p[13];d[k+14]=p[14];d[k+15]=p[15];return d}});var Bb={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, vUv ).g;\n#endif",
alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a \x3c ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion \x3d ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *\x3d ambientOcclusion;\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL )\n\t\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *\x3d computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed \x3d vec3( position );",beginnormal_vertex:"vec3 objectNormal \x3d vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent \x3d vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 \x3d vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 \x3d vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r \x3d roughness * c0 + c1;\n\tfloat a004 \x3d min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff \x3d 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance \x3e 0.0 ) {\n\t\tdistanceFalloff *\x3d pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance \x3e 0.0 \x26\x26 decayExponent \x3e 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel \x3d exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gl \x3d dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv \x3d dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gv \x3d dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl \x3d dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat denom \x3d pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha \x3d pow2( roughness );\n\tvec3 halfDir \x3d normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL \x3d saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH \x3d saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH \x3d saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, dotLH );\n\tfloat G \x3d G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D \x3d D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  \x3d 64.0;\n\tconst float LUT_SCALE \x3d ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  \x3d 0.5 / LUT_SIZE;\n\tfloat dotNV \x3d saturate( dot( N, V ) );\n\tvec2 uv \x3d vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv \x3d uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l \x3d length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x \x3d dot( v1, v2 );\n\tfloat y \x3d abs( x );\n\tfloat a \x3d 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b \x3d 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v \x3d a / b;\n\tfloat theta_sintheta \x3d ( x \x3e 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 \x3d rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 \x3d rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal \x3d cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) \x3c 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 \x3d normalize( V - N * dot( V, N ) );\n\tT2 \x3d - cross( N, T1 );\n\tmat3 mat \x3d mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] \x3d mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] \x3d mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] \x3d mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] \x3d mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] \x3d normalize( coords[ 0 ] );\n\tcoords[ 1 ] \x3d normalize( coords[ 1 ] );\n\tcoords[ 2 ] \x3d normalize( coords[ 2 ] );\n\tcoords[ 3 ] \x3d normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor \x3d vec3( 0.0 );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result \x3d LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf \x3d integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, dotNV );\n\tvec2 brdf \x3d integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss \x3d F * brdf.x + brdf.y;\n\tfloat Ess \x3d brdf.x + brdf.y;\n\tfloat Ems \x3d 1.0 - Ess;\n\tvec3 Favg \x3d specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms \x3d FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter +\x3d FssEss;\n\tmultiScatter +\x3d Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir \x3d normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH \x3d saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH \x3d saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, dotLH );\n\tfloat G \x3d G_BlinnPhong_Implicit( );\n\tfloat D \x3d D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx \x3d dFdx( vUv );\n\t\tvec2 dSTdy \x3d dFdy( vUv );\n\t\tfloat Hll \x3d bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx \x3d bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy \x3d bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX \x3d vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY \x3d vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN \x3d surf_norm;\n\t\tvec3 R1 \x3d cross( vSigmaY, vN );\n\t\tvec3 R2 \x3d cross( vN, vSigmaX );\n\t\tfloat fDet \x3d dot( vSigmaX, R1 );\n\t\tfDet *\x3d ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad \x3d sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane \x3d clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) \x3e plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES \x3c NUM_CLIPPING_PLANES\n\t\tbool clipped \x3d true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i \x3d UNION_CLIPPING_PLANES; i \x3c NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane \x3d clippingPlanes[ i ];\n\t\t\tclipped \x3d ( dot( vViewPosition, plane.xyz ) \x3e plane.w ) \x26\x26 clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\t#if ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG ) \x26\x26 ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES \x3e 0 \x26\x26 ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG ) \x26\x26 ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES \x3e 0 \x26\x26 ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG ) \x26\x26 ! defined( MATCAP )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif",
color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *\x3d vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz \x3d color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 \x3d x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a \x3d 12.9898, b \x3d 78.233, c \x3d 43758.5453;\n\thighp float dt \x3d dot( uv.xy, vec2( a,b ) ), sn \x3d mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance \x3d dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] \x3d vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] \x3d vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] \x3d vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights \x3d vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection \x3d abs(direction);\n\tint face \x3d -1;\n\tif( absDirection.x \x3e absDirection.z ) {\n\t\tif(absDirection.x \x3e absDirection.y )\n\t\t\tface \x3d direction.x \x3e 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface \x3d direction.y \x3e 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z \x3e absDirection.y )\n\t\t\tface \x3d direction.z \x3e 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface \x3d direction.y \x3e 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale \x3d exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness \x3d dFdx(roughness);\n\tfloat dyRoughness \x3d dFdy(roughness);\n\tvec3 dx \x3d dFdx( vec * scale * dxRoughness );\n\tvec3 dy \x3d dFdy( vec * scale * dyRoughness );\n\tfloat d \x3d max( dot( dx, dx ), dot( dy, dy ) );\n\td \x3d clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel \x3d 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel \x3d roughnessLevel \x3e cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a \x3d 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed \x3d exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed \x3d vec2( 1.0 ) / exp2_packed;\n\tfloat powScale \x3d exp2_packed.x * exp2_packed.y;\n\tfloat scale \x3d rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset \x3d 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes \x3d mipLevel \x3d\x3d 0.0;\n\tscale \x3d  bRes \x26\x26 (scale \x3c a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face \x3d getFaceFromDirection(direction);\n\tfloat rcpPowScale \x3d 1.0 / powScale;\n\tif( face \x3d\x3d 0) {\n\t\tr \x3d vec3(direction.x, -direction.z, direction.y);\n\t\toffset \x3d vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? a : offset.y;\n\t}\n\telse if( face \x3d\x3d 1) {\n\t\tr \x3d vec3(direction.y, direction.x, direction.z);\n\t\toffset \x3d vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? a : offset.y;\n\t}\n\telse if( face \x3d\x3d 2) {\n\t\tr \x3d vec3(direction.z, direction.x, direction.y);\n\t\toffset \x3d vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? a : offset.y;\n\t}\n\telse if( face \x3d\x3d 3) {\n\t\tr \x3d vec3(direction.x, direction.z, direction.y);\n\t\toffset \x3d vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face \x3d\x3d 4) {\n\t\tr \x3d vec3(direction.y, direction.x, -direction.z);\n\t\toffset \x3d vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr \x3d vec3(direction.z, -direction.x, direction.y);\n\t\toffset \x3d vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr \x3d normalize(r);\n\tfloat texelOffset \x3d 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s \x3d ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base \x3d offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal \x3d roughness* cubeUV_maxLods3;\n\tfloat r1 \x3d floor(roughnessVal);\n\tfloat r2 \x3d r1 + 1.0;\n\tfloat t \x3d fract(roughnessVal);\n\tvec2 mipInfo \x3d MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s \x3d mipInfo.y;\n\tfloat level0 \x3d mipInfo.x;\n\tfloat level1 \x3d level0 + 1.0;\n\tlevel1 \x3d level1 \x3e 5.0 ? 5.0 : level1;\n\tlevel0 +\x3d min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 \x3d getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 \x3d envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 \x3d getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 \x3d envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result \x3d mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal \x3d normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal \x3d - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent \x3d normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent \x3d - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed +\x3d normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",
emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor \x3d texture2D( emissiveMap, vUv );\n\temissiveColor.rgb \x3d emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *\x3d emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor \x3d linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent \x3d max( max( value.r, value.g ), value.b );\n\tfloat fExp \x3d clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB \x3d max( value.r, max( value.g, value.b ) );\n\tfloat M \x3d clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM \x3d ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB \x3d max( value.r, max( value.g, value.b ) );\n\tfloat D \x3d max( maxRange / maxRGB, 1.0 );\n\tD \x3d min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM \x3d mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp \x3d cLogLuvM * value.rgb;\n\tXp_Y_XYZp \x3d max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy \x3d Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le \x3d 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w \x3d fract( Le );\n\tvResult.z \x3d ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM \x3d mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le \x3d value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y \x3d exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z \x3d Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x \x3d value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB \x3d cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex \x3d normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec \x3d vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor \x3d textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec \x3d normalize( reflectVec );\n\t\tsampleUV.y \x3d asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x \x3d atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor \x3d texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec \x3d normalize( reflectVec );\n\t\tvec3 reflectView \x3d normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor \x3d texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor \x3d vec4( 0.0 );\n\t#endif\n\tenvColor \x3d envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight \x3d mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight \x3d mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight +\x3d envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) \x26\x26 ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal \x3d inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec \x3d vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec \x3d vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor \x3d vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar \x3d float( maxMIPLevel );\n\t\tfloat desiredMIPLevel \x3d maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec \x3d inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel \x3d getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec \x3d vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec \x3d vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y \x3d asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x \x3d atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView \x3d normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition \x3d worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex \x3d normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tfogDepth \x3d -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor \x3d whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor \x3d smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb \x3d mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL \x3d dot( normal, lightDirection );\n\t\tvec2 coord \x3d vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x \x3c 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse +\x3d PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse \x3d vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position \x3d mvPosition.xyz;\ngeometry.normal \x3d normalize( transformedNormal );\ngeometry.viewDir \x3d normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position \x3d geometry.position;\nbackGeometry.normal \x3d -geometry.normal;\nbackGeometry.viewDir \x3d geometry.viewDir;\nvLightFront \x3d vec3( 0.0 );\nvIndirectFront \x3d vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack \x3d vec3( 0.0 );\n\tvIndirectBack \x3d vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS \x3e 0\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS \x3e 0\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",
lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x \x3d normal.x, y \x3d normal.y, z \x3d normal.z;\n\tvec3 result \x3d shCoefficients[ 0 ] * 0.886227;\n\tresult +\x3d shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult +\x3d shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult +\x3d shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult +\x3d shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult +\x3d shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult +\x3d shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult +\x3d shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult +\x3d shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal \x3d inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance \x3d shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance \x3d ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS \x3e 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color \x3d directionalLight.color;\n\t\tdirectLight.direction \x3d directionalLight.direction;\n\t\tdirectLight.visible \x3d true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS \x3e 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector \x3d pointLight.position - geometry.position;\n\t\tdirectLight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tdirectLight.color \x3d pointLight.color;\n\t\tdirectLight.color *\x3d punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible \x3d ( directLight.color !\x3d vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector \x3d spotLight.position - geometry.position;\n\t\tdirectLight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tfloat angleCos \x3d dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos \x3e spotLight.coneCos ) {\n\t\t\tfloat spotEffect \x3d smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color \x3d spotLight.color;\n\t\t\tdirectLight.color *\x3d spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible \x3d true;\n\t\t} else {\n\t\t\tdirectLight.color \x3d vec3( 0.0 );\n\t\t\tdirectLight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL \x3d dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight \x3d 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance \x3d mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *\x3d PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularColor \x3d specular;\nmaterial.specularShininess \x3d shininess;\nmaterial.specularStrength \x3d specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance \x3d getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness \x3d clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor \x3d mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor \x3d mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat \x3d saturate( clearCoat );\tmaterial.clearCoatRoughness \x3d clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal \x3d geometry.normal;\n\t\tvec3 viewDir \x3d geometry.viewDir;\n\t\tvec3 position \x3d geometry.position;\n\t\tvec3 lightPos \x3d rectAreaLight.position;\n\t\tvec3 halfWidth \x3d rectAreaLight.halfWidth;\n\t\tvec3 halfHeight \x3d rectAreaLight.halfHeight;\n\t\tvec3 lightColor \x3d rectAreaLight.color;\n\t\tfloat roughness \x3d material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] \x3d lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] \x3d lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] \x3d lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] \x3d lightPos + halfWidth + halfHeight;\n\t\tvec2 uv \x3d LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 \x3d texture2D( ltc_1, uv );\n\t\tvec4 t2 \x3d texture2D( ltc_2, uv );\n\t\tmat3 mInv \x3d mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel \x3d ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular +\x3d lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse +\x3d lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR \x3d material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR \x3d 0.0;\n\t#endif\n\treflectedLight.directSpecular +\x3d ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse +\x3d ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular +\x3d irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL \x3d dotNV;\n\t\tfloat clearCoatDHR \x3d material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR \x3d 0.0;\n\t#endif\n\tfloat clearCoatInv \x3d 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering \x3d vec3( 0.0 );\n\t\tvec3 multiScattering \x3d vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance \x3d irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse \x3d material.diffuseColor;\n\t\treflectedLight.indirectSpecular +\x3d clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse +\x3d multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse +\x3d diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular +\x3d clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular +\x3d clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position \x3d - vViewPosition;\ngeometry.normal \x3d normal;\ngeometry.viewDir \x3d normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight \x3d rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance \x3d getAmbientLightIrradiance( ambientLightColor );\n\tirradiance +\x3d getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS \x3e 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance \x3d vec3( 0.0 );\n\tvec3 clearCoatRadiance \x3d vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance \x3d texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *\x3d PI;\n\t\t#endif\n\t\tirradiance +\x3d lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL ) \x26\x26 defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance +\x3d getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( RE_IndirectSpecular )\n\tradiance +\x3d getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance +\x3d getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT \x3d log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth \x3d 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z \x3d log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *\x3d gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor \x3d texture2D( map, vUv );\n\ttexelColor \x3d mapTexelToLinear( texelColor );\n\tdiffuseColor *\x3d texelColor;\n#endif",
map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv \x3d ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel \x3d texture2D( map, uv );\n\tdiffuseColor *\x3d mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor \x3d metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness \x3d texture2D( metalnessMap, vUv );\n\tmetalnessFactor *\x3d texelMetalness.b;\n#endif",
metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal +\x3d ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal +\x3d ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal +\x3d ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal +\x3d ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed +\x3d ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed +\x3d ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed +\x3d ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed +\x3d ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed +\x3d ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed +\x3d ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed +\x3d ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed +\x3d ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx \x3d vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy \x3d vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal \x3d normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal \x3d normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent \x3d normalize( vTangent );\n\t\tvec3 bitangent \x3d normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent \x3d tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent \x3d bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",
normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal \x3d - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal \x3d normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal \x3d normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN \x3d mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy \x3d normalScale * mapN.xy;\n\t\t\tnormal \x3d normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal \x3d perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal \x3d perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 \x3d vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 \x3d vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 \x3d dFdx( vUv.st );\n\t\t\tvec2 st1 \x3d dFdy( vUv.st );\n\t\t\tfloat scale \x3d sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S \x3d normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T \x3d normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N \x3d normalize( surf_norm );\n\t\t\tmat3 tsn \x3d mat3( S, T, N );\n\t\t\tvec3 mapN \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *\x3d normalScale;\n\t\t\tmapN.xy *\x3d ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale \x3d 256. / 255.;const float UnpackDownscale \x3d 255. / 256.;\nconst vec3 PackFactors \x3d vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors \x3d UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 \x3d 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r \x3d vec4( fract( v * PackFactors ), v );\n\tr.yzw -\x3d r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *\x3d gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition \x3d modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position \x3d projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb \x3d dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position \x3d rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB \x3d vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB \x3d mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor \x3d roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness \x3d texture2D( roughnessMap, vUv );\n\troughnessFactor *\x3d texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset \x3d vec2( 0.0, 1.0 );\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / size;\n\t\tvec2 centroidUV \x3d floor( uv * size + 0.5 ) / size;\n\t\tfloat lb \x3d texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt \x3d texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb \x3d texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt \x3d texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f \x3d fract( uv * size + 0.5 );\n\t\tfloat a \x3d mix( lb, lt, f.y );\n\t\tfloat b \x3d mix( rb, rt, f.y );\n\t\tfloat c \x3d mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow \x3d 1.0;\n\t\tshadowCoord.xyz /\x3d shadowCoord.w;\n\t\tshadowCoord.z +\x3d shadowBias;\n\t\tbvec4 inFrustumVec \x3d bvec4 ( shadowCoord.x \x3e\x3d 0.0, shadowCoord.x \x3c\x3d 1.0, shadowCoord.y \x3e\x3d 0.0, shadowCoord.y \x3c\x3d 1.0 );\n\t\tbool inFrustum \x3d all( inFrustumVec );\n\t\tbvec2 frustumTestVec \x3d bvec2( inFrustum, shadowCoord.z \x3c\x3d 1.0 );\n\t\tbool frustumTest \x3d all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow \x3d texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV \x3d abs( v );\n\t\tfloat scaleToCube \x3d 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *\x3d scaleToCube;\n\t\tv *\x3d scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar \x3d v.xy;\n\t\tfloat almostATexel \x3d 1.5 * texelSizeY;\n\t\tfloat almostOne \x3d 1.0 - almostATexel;\n\t\tif ( absV.z \x3e\x3d almostOne ) {\n\t\t\tif ( v.z \x3e 0.0 )\n\t\t\t\tplanar.x \x3d 4.0 - v.x;\n\t\t} else if ( absV.x \x3e\x3d almostOne ) {\n\t\t\tfloat signX \x3d sign( v.x );\n\t\t\tplanar.x \x3d v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y \x3e\x3d almostOne ) {\n\t\t\tfloat signY \x3d sign( v.y );\n\t\t\tplanar.x \x3d v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y \x3d v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition \x3d shadowCoord.xyz;\n\t\tfloat dp \x3d ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp +\x3d shadowBias;\n\t\tvec3 bd3D \x3d normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset \x3d vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] \x3d directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] \x3d spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] \x3d pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow \x3d 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tshadow *\x3d bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tshadow *\x3d bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tshadow *\x3d bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX \x3d getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY \x3d getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ \x3d getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW \x3d getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j \x3d i * 4.0;\n\t\t\tfloat x \x3d mod( j, float( boneTextureSize ) );\n\t\t\tfloat y \x3d floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx \x3d 1.0 / float( boneTextureSize );\n\t\t\tfloat dy \x3d 1.0 / float( boneTextureSize );\n\t\t\ty \x3d dy * ( y + 0.5 );\n\t\t\tvec4 v1 \x3d texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 \x3d texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 \x3d texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 \x3d texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone \x3d mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone \x3d boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex \x3d bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned \x3d vec4( 0.0 );\n\tskinned +\x3d boneMatX * skinVertex * skinWeight.x;\n\tskinned +\x3d boneMatY * skinVertex * skinWeight.y;\n\tskinned +\x3d boneMatZ * skinVertex * skinWeight.z;\n\tskinned +\x3d boneMatW * skinVertex * skinWeight.w;\n\ttransformed \x3d ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix \x3d mat4( 0.0 );\n\tskinMatrix +\x3d skinWeight.x * boneMatX;\n\tskinMatrix +\x3d skinWeight.y * boneMatY;\n\tskinMatrix +\x3d skinWeight.z * boneMatZ;\n\tskinMatrix +\x3d skinWeight.w * boneMatW;\n\tskinMatrix  \x3d bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal \x3d vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent \x3d vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vUv );\n\tspecularStrength \x3d texelSpecular.r;\n#else\n\tspecularStrength \x3d 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb \x3d toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\tcolor \x3d max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",
uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",
uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 \x3d uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition \x3d modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor \x3d texture2D( t2D, vUv );\n\tgl_FragColor \x3d mapTexelToLinear( texColor );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position \x3d vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor \x3d textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor \x3d mapTexelToLinear( texColor );\n\tgl_FragColor.a *\x3d opacity;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_Position.z \x3d gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING \x3d\x3d 3200\n\tuniform float opacity;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tdiffuseColor.a \x3d opacity;\n\t#endif\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tgl_FragColor \x3d vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING \x3d\x3d 3201\n\t\tgl_FragColor \x3d packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",
depth_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main () {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\tfloat dist \x3d length( vWorldPosition - referencePosition );\n\tdist \x3d ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist \x3d saturate( dist );\n\tgl_FragColor \x3d packDepthToRGBA( dist );\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvWorldPosition \x3d worldPosition.xyz;\n}",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvec3 direction \x3d normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y \x3d asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x \x3d atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor \x3d texture2D( tEquirect, sampleUV );\n\tgl_FragColor \x3d mapTexelToLinear( texColor );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
equirect_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tif ( mod( vLineDistance, totalSize ) \x3e dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\tvLineDistance \x3d scale * lineDistance;\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse +\x3d texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse +\x3d vec3( 1.0 );\n\t#endif\n\t#include \x3caomap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d diffuseColor.rgb;\n\tvec3 outgoingLight \x3d reflectedLight.indirectDiffuse;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}",
meshbasic_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_ENVMAP\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\treflectedLight.indirectDiffuse \x3d getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse +\x3d ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse +\x3d vIndirectFront;\n\t#endif\n\t#include \x3clightmap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse \x3d ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse \x3d vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *\x3d BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3clights_lambert_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tvec3 viewDir \x3d normalize( vViewPosition );\n\tvec3 x \x3d normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y \x3d cross( viewDir, x );\n\tvec2 uv \x3d vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor \x3d texture2D( matcap, uv );\n\t\tmatcapColor \x3d matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor \x3d vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight \x3d diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#ifndef FLAT_SHADED\n\t\tvNormal \x3d normalize( transformedNormal );\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cgradientmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3clights_phong_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_phong_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cenvmap_physical_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3clights_physical_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3croughnessmap_pars_fragment\x3e\n#include \x3cmetalnessmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3croughnessmap_fragment\x3e\n\t#include \x3cmetalnessmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_physical_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent \x3d normalize( transformedTangent );\n\t\tvBitangent \x3d normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) \x26\x26 ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\nvoid main() {\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tgl_FragColor \x3d vec4( packNormalToRGB( normal ), opacity );\n}",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) \x26\x26 ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent \x3d normalize( transformedTangent );\n\t\tvBitangent \x3d normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) \x26\x26 ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cmap_particle_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_particle_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_PointSize \x3d size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d ( projectionMatrix[ 2 ][ 3 ] \x3d\x3d - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *\x3d ( scale / - mvPosition.z );\n\t#endif\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\nvoid main() {\n\tgl_FragColor \x3d vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include \x3cfog_fragment\x3e\n}",shadow_vert:"#include \x3cfog_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\nvoid main() {\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x \x3d length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y \x3d length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d ( projectionMatrix[ 2 ][ 3 ] \x3d\x3d - 1.0 );\n\t\tif ( isPerspective ) scale *\x3d - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition \x3d ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x \x3d cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y \x3d sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy +\x3d rotatedPosition;\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}"},
gp={clone:E,merge:C},hp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,
teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(D.prototype,{isColor:!0,r:1,g:1,b:1,set:function(d){d&&d.isColor?this.copy(d):"number"===typeof d?this.setHex(d):"string"===typeof d&&this.setStyle(d);return this},setScalar:function(d){this.b=this.g=this.r=d;return this},setHex:function(d){d=Math.floor(d);this.r=(d>>16&255)/255;this.g=(d>>8&255)/255;this.b=(d&255)/255;
return this},setRGB:function(d,k,p){this.r=d;this.g=k;this.b=p;return this},setHSL:function(){function d(k,p,t){0>t&&(t+=1);1<t&&--t;return t<1/6?k+6*(p-k)*t:.5>t?p:t<2/3?k+6*(p-k)*(2/3-t):k}return function(k,p,t){k=mb.euclideanModulo(k,1);p=mb.clamp(p,0,1);t=mb.clamp(t,0,1);0===p?this.r=this.g=this.b=t:(p=.5>=t?t*(1+p):t+p-t*p,t=2*t-p,this.r=d(t,p,k+1/3),this.g=d(t,p,k),this.b=d(t,p,k-1/3));return this}}(),setStyle:function(d){function k(B){void 0!==B&&1>parseFloat(B)&&console.warn("THREE.Color: Alpha component of "+
d+" will be ignored.")}var p;if(p=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(d)){var t=p[2];switch(p[1]){case "rgb":case "rgba":if(p=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(t))return this.r=Math.min(255,parseInt(p[1],10))/255,this.g=Math.min(255,parseInt(p[2],10))/255,this.b=Math.min(255,parseInt(p[3],10))/255,k(p[5]),this;if(p=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(t))return this.r=Math.min(100,parseInt(p[1],10))/100,this.g=Math.min(100,parseInt(p[2],
10))/100,this.b=Math.min(100,parseInt(p[3],10))/100,k(p[5]),this;break;case "hsl":case "hsla":if(p=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(t)){t=parseFloat(p[1])/360;var x=parseInt(p[2],10)/100,y=parseInt(p[3],10)/100;k(p[5]);return this.setHSL(t,x,y)}}}else if(p=/^#([A-Fa-f0-9]+)$/.exec(d)){p=p[1];t=p.length;if(3===t)return this.r=parseInt(p.charAt(0)+p.charAt(0),16)/255,this.g=parseInt(p.charAt(1)+p.charAt(1),16)/255,this.b=parseInt(p.charAt(2)+p.charAt(2),
16)/255,this;if(6===t)return this.r=parseInt(p.charAt(0)+p.charAt(1),16)/255,this.g=parseInt(p.charAt(2)+p.charAt(3),16)/255,this.b=parseInt(p.charAt(4)+p.charAt(5),16)/255,this}d&&0<d.length&&(p=hp[d],void 0!==p?this.setHex(p):console.warn("THREE.Color: Unknown color "+d));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(d){this.r=d.r;this.g=d.g;this.b=d.b;return this},copyGammaToLinear:function(d,k){void 0===k&&(k=2);this.r=Math.pow(d.r,k);this.g=Math.pow(d.g,
k);this.b=Math.pow(d.b,k);return this},copyLinearToGamma:function(d,k){void 0===k&&(k=2);k=0<k?1/k:1;this.r=Math.pow(d.r,k);this.g=Math.pow(d.g,k);this.b=Math.pow(d.b,k);return this},convertGammaToLinear:function(d){this.copyGammaToLinear(this,d);return this},convertLinearToGamma:function(d){this.copyLinearToGamma(this,d);return this},copySRGBToLinear:function(){function d(k){return.04045>k?.0773993808*k:Math.pow(.9478672986*k+.0521327014,2.4)}return function(k){this.r=d(k.r);this.g=d(k.g);this.b=
d(k.b);return this}}(),copyLinearToSRGB:function(){function d(k){return.0031308>k?12.92*k:1.055*Math.pow(k,.41666)-.055}return function(k){this.r=d(k.r);this.g=d(k.g);this.b=d(k.b);return this}}(),convertSRGBToLinear:function(){this.copySRGBToLinear(this);return this},convertLinearToSRGB:function(){this.copyLinearToSRGB(this);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(d){void 0===
d&&(console.warn("THREE.Color: .getHSL() target is now required"),d={h:0,s:0,l:0});var k=this.r,p=this.g,t=this.b,x=Math.max(k,p,t),y=Math.min(k,p,t),B,F=(y+x)/2;if(y===x)y=B=0;else{var G=x-y;y=.5>=F?G/(x+y):G/(2-x-y);switch(x){case k:B=(p-t)/G+(p<t?6:0);break;case p:B=(t-k)/G+2;break;case t:B=(k-p)/G+4}B/=6}d.h=B;d.s=y;d.l=F;return d},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var d={};return function(k,p,t){this.getHSL(d);d.h+=
k;d.s+=p;d.l+=t;this.setHSL(d.h,d.s,d.l);return this}}(),add:function(d){this.r+=d.r;this.g+=d.g;this.b+=d.b;return this},addColors:function(d,k){this.r=d.r+k.r;this.g=d.g+k.g;this.b=d.b+k.b;return this},addScalar:function(d){this.r+=d;this.g+=d;this.b+=d;return this},sub:function(d){this.r=Math.max(0,this.r-d.r);this.g=Math.max(0,this.g-d.g);this.b=Math.max(0,this.b-d.b);return this},multiply:function(d){this.r*=d.r;this.g*=d.g;this.b*=d.b;return this},multiplyScalar:function(d){this.r*=d;this.g*=
d;this.b*=d;return this},lerp:function(d,k){this.r+=(d.r-this.r)*k;this.g+=(d.g-this.g)*k;this.b+=(d.b-this.b)*k;return this},lerpHSL:function(){var d={h:0,s:0,l:0},k={h:0,s:0,l:0};return function(p,t){this.getHSL(d);p.getHSL(k);p=mb.lerp(d.h,k.h,t);var x=mb.lerp(d.s,k.s,t);t=mb.lerp(d.l,k.l,t);this.setHSL(p,x,t);return this}}(),equals:function(d){return d.r===this.r&&d.g===this.g&&d.b===this.b},fromArray:function(d,k){void 0===k&&(k=0);this.r=d[k];this.g=d[k+1];this.b=d[k+2];return this},toArray:function(d,
k){void 0===d&&(d=[]);void 0===k&&(k=0);d[k]=this.r;d[k+1]=this.g;d[k+2]=this.b;return d},toJSON:function(){return this.getHex()}});var $a={common:{diffuse:{value:new D(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new g},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},
lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new c(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new D(16777215)}},
lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},
position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new D(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new g}},sprite:{diffuse:{value:new D(15658734)},
opacity:{value:1},center:{value:new c(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new g}}},zd={basic:{uniforms:C([$a.common,$a.specularmap,$a.envmap,$a.aomap,$a.lightmap,$a.fog]),vertexShader:Bb.meshbasic_vert,fragmentShader:Bb.meshbasic_frag},lambert:{uniforms:C([$a.common,$a.specularmap,$a.envmap,$a.aomap,$a.lightmap,$a.emissivemap,$a.fog,$a.lights,{emissive:{value:new D(0)}}]),vertexShader:Bb.meshlambert_vert,fragmentShader:Bb.meshlambert_frag},phong:{uniforms:C([$a.common,$a.specularmap,
$a.envmap,$a.aomap,$a.lightmap,$a.emissivemap,$a.bumpmap,$a.normalmap,$a.displacementmap,$a.gradientmap,$a.fog,$a.lights,{emissive:{value:new D(0)},specular:{value:new D(1118481)},shininess:{value:30}}]),vertexShader:Bb.meshphong_vert,fragmentShader:Bb.meshphong_frag},standard:{uniforms:C([$a.common,$a.envmap,$a.aomap,$a.lightmap,$a.emissivemap,$a.bumpmap,$a.normalmap,$a.displacementmap,$a.roughnessmap,$a.metalnessmap,$a.fog,$a.lights,{emissive:{value:new D(0)},roughness:{value:.5},metalness:{value:.5},
envMapIntensity:{value:1}}]),vertexShader:Bb.meshphysical_vert,fragmentShader:Bb.meshphysical_frag},matcap:{uniforms:C([$a.common,$a.bumpmap,$a.normalmap,$a.displacementmap,$a.fog,{matcap:{value:null}}]),vertexShader:Bb.meshmatcap_vert,fragmentShader:Bb.meshmatcap_frag},points:{uniforms:C([$a.points,$a.fog]),vertexShader:Bb.points_vert,fragmentShader:Bb.points_frag},dashed:{uniforms:C([$a.common,$a.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bb.linedashed_vert,fragmentShader:Bb.linedashed_frag},
depth:{uniforms:C([$a.common,$a.displacementmap]),vertexShader:Bb.depth_vert,fragmentShader:Bb.depth_frag},normal:{uniforms:C([$a.common,$a.bumpmap,$a.normalmap,$a.displacementmap,{opacity:{value:1}}]),vertexShader:Bb.normal_vert,fragmentShader:Bb.normal_frag},sprite:{uniforms:C([$a.sprite,$a.fog]),vertexShader:Bb.sprite_vert,fragmentShader:Bb.sprite_frag},background:{uniforms:{uvTransform:{value:new g},t2D:{value:null}},vertexShader:Bb.background_vert,fragmentShader:Bb.background_frag},cube:{uniforms:{tCube:{value:null},
tFlip:{value:-1},opacity:{value:1}},vertexShader:Bb.cube_vert,fragmentShader:Bb.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bb.equirect_vert,fragmentShader:Bb.equirect_frag},distanceRGBA:{uniforms:C([$a.common,$a.displacementmap,{referencePosition:{value:new f},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:Bb.distanceRGBA_vert,fragmentShader:Bb.distanceRGBA_frag},shadow:{uniforms:C([$a.lights,$a.fog,{color:{value:new D(0)},opacity:{value:1}}]),vertexShader:Bb.shadow_vert,
fragmentShader:Bb.shadow_frag}};zd.physical={uniforms:C([zd.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Bb.meshphysical_vert,fragmentShader:Bb.meshphysical_frag};Object.assign(H.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.a=d.a;this.b=d.b;this.c=d.c;this.normal.copy(d.normal);this.color.copy(d.color);this.materialIndex=d.materialIndex;for(var k=0,p=d.vertexNormals.length;k<p;k++)this.vertexNormals[k]=d.vertexNormals[k].clone();
k=0;for(p=d.vertexColors.length;k<p;k++)this.vertexColors[k]=d.vertexColors[k].clone();return this}});K.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");K.DefaultOrder="XYZ";Object.defineProperties(K.prototype,{x:{get:function(){return this._x},set:function(d){this._x=d;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(d){this._y=d;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(d){this._z=d;this.onChangeCallback()}},order:{get:function(){return this._order},
set:function(d){this._order=d;this.onChangeCallback()}}});Object.assign(K.prototype,{isEuler:!0,set:function(d,k,p,t){this._x=d;this._y=k;this._z=p;this._order=t||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(d){this._x=d._x;this._y=d._y;this._z=d._z;this._order=d._order;this.onChangeCallback();return this},setFromRotationMatrix:function(d,k,p){var t=mb.clamp,x=d.elements;d=x[0];var y=x[4],B=x[8],F=
x[1],G=x[5],I=x[9],N=x[2],O=x[6];x=x[10];k=k||this._order;"XYZ"===k?(this._y=Math.asin(t(B,-1,1)),.99999>Math.abs(B)?(this._x=Math.atan2(-I,x),this._z=Math.atan2(-y,d)):(this._x=Math.atan2(O,G),this._z=0)):"YXZ"===k?(this._x=Math.asin(-t(I,-1,1)),.99999>Math.abs(I)?(this._y=Math.atan2(B,x),this._z=Math.atan2(F,G)):(this._y=Math.atan2(-N,d),this._z=0)):"ZXY"===k?(this._x=Math.asin(t(O,-1,1)),.99999>Math.abs(O)?(this._y=Math.atan2(-N,x),this._z=Math.atan2(-y,G)):(this._y=0,this._z=Math.atan2(F,d))):
"ZYX"===k?(this._y=Math.asin(-t(N,-1,1)),.99999>Math.abs(N)?(this._x=Math.atan2(O,x),this._z=Math.atan2(F,d)):(this._x=0,this._z=Math.atan2(-y,G))):"YZX"===k?(this._z=Math.asin(t(F,-1,1)),.99999>Math.abs(F)?(this._x=Math.atan2(-I,G),this._y=Math.atan2(-N,d)):(this._x=0,this._y=Math.atan2(B,x))):"XZY"===k?(this._z=Math.asin(-t(y,-1,1)),.99999>Math.abs(y)?(this._x=Math.atan2(O,G),this._y=Math.atan2(B,d)):(this._x=Math.atan2(-I,x),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+
k);this._order=k;if(!1!==p)this.onChangeCallback();return this},setFromQuaternion:function(){var d=new A;return function(k,p,t){d.makeRotationFromQuaternion(k);return this.setFromRotationMatrix(d,p,t)}}(),setFromVector3:function(d,k){return this.set(d.x,d.y,d.z,k||this._order)},reorder:function(){var d=new e;return function(k){d.setFromEuler(this);return this.setFromQuaternion(d,k)}}(),equals:function(d){return d._x===this._x&&d._y===this._y&&d._z===this._z&&d._order===this._order},fromArray:function(d){this._x=
d[0];this._y=d[1];this._z=d[2];void 0!==d[3]&&(this._order=d[3]);this.onChangeCallback();return this},toArray:function(d,k){void 0===d&&(d=[]);void 0===k&&(k=0);d[k]=this._x;d[k+1]=this._y;d[k+2]=this._z;d[k+3]=this._order;return d},toVector3:function(d){return d?d.set(this._x,this._y,this._z):new f(this._x,this._y,this._z)},onChange:function(d){this.onChangeCallback=d;return this},onChangeCallback:function(){}});Object.assign(L.prototype,{set:function(d){this.mask=1<<d|0},enable:function(d){this.mask=
this.mask|1<<d|0},toggle:function(d){this.mask^=1<<d|0},disable:function(d){this.mask&=~(1<<d|0)},test:function(d){return 0!==(this.mask&d.mask)}});var Xn=0;P.DefaultUp=new f(0,1,0);P.DefaultMatrixAutoUpdate=!0;P.prototype=Object.assign(Object.create(b.prototype),{constructor:P,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(d){this.matrixAutoUpdate&&this.updateMatrix();this.matrix.premultiply(d);this.matrix.decompose(this.position,this.quaternion,this.scale)},
applyQuaternion:function(d){this.quaternion.premultiply(d);return this},setRotationFromAxisAngle:function(d,k){this.quaternion.setFromAxisAngle(d,k)},setRotationFromEuler:function(d){this.quaternion.setFromEuler(d,!0)},setRotationFromMatrix:function(d){this.quaternion.setFromRotationMatrix(d)},setRotationFromQuaternion:function(d){this.quaternion.copy(d)},rotateOnAxis:function(){var d=new e;return function(k,p){d.setFromAxisAngle(k,p);this.quaternion.multiply(d);return this}}(),rotateOnWorldAxis:function(){var d=
new e;return function(k,p){d.setFromAxisAngle(k,p);this.quaternion.premultiply(d);return this}}(),rotateX:function(){var d=new f(1,0,0);return function(k){return this.rotateOnAxis(d,k)}}(),rotateY:function(){var d=new f(0,1,0);return function(k){return this.rotateOnAxis(d,k)}}(),rotateZ:function(){var d=new f(0,0,1);return function(k){return this.rotateOnAxis(d,k)}}(),translateOnAxis:function(){var d=new f;return function(k,p){d.copy(k).applyQuaternion(this.quaternion);this.position.add(d.multiplyScalar(p));
return this}}(),translateX:function(){var d=new f(1,0,0);return function(k){return this.translateOnAxis(d,k)}}(),translateY:function(){var d=new f(0,1,0);return function(k){return this.translateOnAxis(d,k)}}(),translateZ:function(){var d=new f(0,0,1);return function(k){return this.translateOnAxis(d,k)}}(),localToWorld:function(d){return d.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var d=new A;return function(k){return k.applyMatrix4(d.getInverse(this.matrixWorld))}}(),lookAt:function(){var d=
new e,k=new A,p=new f,t=new f;return function(x,y,B){x.isVector3?p.copy(x):p.set(x,y,B);x=this.parent;this.updateWorldMatrix(!0,!1);t.setFromMatrixPosition(this.matrixWorld);this.isCamera||this.isLight?k.lookAt(t,p,this.up):k.lookAt(p,t,this.up);this.quaternion.setFromRotationMatrix(k);x&&(k.extractRotation(x.matrixWorld),d.setFromRotationMatrix(k),this.quaternion.premultiply(d.inverse()))}}(),add:function(d){if(1<arguments.length){for(var k=0;k<arguments.length;k++)this.add(arguments[k]);return this}if(d===
this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",d),this;d&&d.isObject3D?(null!==d.parent&&d.parent.remove(d),d.parent=this,d.dispatchEvent({type:"added"}),this.children.push(d)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",d);return this},remove:function(d){if(1<arguments.length){for(var k=0;k<arguments.length;k++)this.remove(arguments[k]);return this}k=this.children.indexOf(d);-1!==k&&(d.parent=null,d.dispatchEvent({type:"removed"}),
this.children.splice(k,1));return this},getObjectById:function(d){return this.getObjectByProperty("id",d)},getObjectByName:function(d){return this.getObjectByProperty("name",d)},getObjectByProperty:function(d,k){if(this[d]===k)return this;for(var p=0,t=this.children.length;p<t;p++){var x=this.children[p].getObjectByProperty(d,k);if(void 0!==x)return x}},getWorldPosition:function(d){void 0===d&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),d=new f);this.updateMatrixWorld(!0);
return d.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var d=new f,k=new f;return function(p){void 0===p&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),p=new e);this.updateMatrixWorld(!0);this.matrixWorld.decompose(d,p,k);return p}}(),getWorldScale:function(){var d=new f,k=new e;return function(p){void 0===p&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),p=new f);this.updateMatrixWorld(!0);this.matrixWorld.decompose(d,
k,p);return p}}(),getWorldDirection:function(d){void 0===d&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),d=new f);this.updateMatrixWorld(!0);var k=this.matrixWorld.elements;return d.set(k[8],k[9],k[10]).normalize()},raycast:function(){},traverse:function(d){d(this);for(var k=this.children,p=0,t=k.length;p<t;p++)k[p].traverse(d)},traverseVisible:function(d){if(!1!==this.visible){d(this);for(var k=this.children,p=0,t=k.length;p<t;p++)k[p].traverseVisible(d)}},traverseAncestors:function(d){var k=
this.parent;null!==k&&(d(k),k.traverseAncestors(d))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(d){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||d)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,d=!0;for(var k=this.children,p=0,t=k.length;p<t;p++)k[p].updateMatrixWorld(d)},
updateWorldMatrix:function(d,k){var p=this.parent;!0===d&&null!==p&&p.updateWorldMatrix(!0,!1);this.matrixAutoUpdate&&this.updateMatrix();null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(!0===k)for(d=this.children,k=0,p=d.length;k<p;k++)d[k].updateWorldMatrix(!1,!0)},toJSON:function(d){function k(N,O){void 0===N[O.uuid]&&(N[O.uuid]=O.toJSON(d));return O.uuid}function p(N){var O=[],Q;for(Q in N){var V=N[Q];delete V.metadata;
O.push(V)}return O}var t=void 0===d||"string"===typeof d,x={};t&&(d={geometries:{},materials:{},textures:{},images:{},shapes:{}},x.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var y={};y.uuid=this.uuid;y.type=this.type;""!==this.name&&(y.name=this.name);!0===this.castShadow&&(y.castShadow=!0);!0===this.receiveShadow&&(y.receiveShadow=!0);!1===this.visible&&(y.visible=!1);!1===this.frustumCulled&&(y.frustumCulled=!1);0!==this.renderOrder&&(y.renderOrder=this.renderOrder);"{}"!==
JSON.stringify(this.userData)&&(y.userData=this.userData);y.layers=this.layers.mask;y.matrix=this.matrix.toArray();!1===this.matrixAutoUpdate&&(y.matrixAutoUpdate=!1);this.isMesh&&0!==this.drawMode&&(y.drawMode=this.drawMode);if(this.isMesh||this.isLine||this.isPoints){y.geometry=k(d.geometries,this.geometry);var B=this.geometry.parameters;if(void 0!==B&&void 0!==B.shapes)if(B=B.shapes,Array.isArray(B))for(var F=0,G=B.length;F<G;F++)k(d.shapes,B[F]);else k(d.shapes,B)}if(void 0!==this.material)if(Array.isArray(this.material)){B=
[];F=0;for(G=this.material.length;F<G;F++)B.push(k(d.materials,this.material[F]));y.material=B}else y.material=k(d.materials,this.material);if(0<this.children.length)for(y.children=[],F=0;F<this.children.length;F++)y.children.push(this.children[F].toJSON(d).object);if(t){t=p(d.geometries);F=p(d.materials);G=p(d.textures);var I=p(d.images);B=p(d.shapes);0<t.length&&(x.geometries=t);0<F.length&&(x.materials=F);0<G.length&&(x.textures=G);0<I.length&&(x.images=I);0<B.length&&(x.shapes=B)}x.object=y;return x},
clone:function(d){return(new this.constructor).copy(this,d)},copy:function(d,k){void 0===k&&(k=!0);this.name=d.name;this.up.copy(d.up);this.position.copy(d.position);this.quaternion.copy(d.quaternion);this.scale.copy(d.scale);this.matrix.copy(d.matrix);this.matrixWorld.copy(d.matrixWorld);this.matrixAutoUpdate=d.matrixAutoUpdate;this.matrixWorldNeedsUpdate=d.matrixWorldNeedsUpdate;this.layers.mask=d.layers.mask;this.visible=d.visible;this.castShadow=d.castShadow;this.receiveShadow=d.receiveShadow;
this.frustumCulled=d.frustumCulled;this.renderOrder=d.renderOrder;this.userData=JSON.parse(JSON.stringify(d.userData));if(!0===k)for(k=0;k<d.children.length;k++)this.add(d.children[k].clone());return this}});var Yn=0;S.prototype=Object.assign(Object.create(b.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(d){for(var k=(new g).getNormalMatrix(d),p=0,t=this.vertices.length;p<t;p++)this.vertices[p].applyMatrix4(d);p=0;for(t=this.faces.length;p<t;p++){d=this.faces[p];d.normal.applyMatrix3(k).normalize();
for(var x=0,y=d.vertexNormals.length;x<y;x++)d.vertexNormals[x].applyMatrix3(k).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var d=new A;return function(k){d.makeRotationX(k);this.applyMatrix(d);return this}}(),rotateY:function(){var d=new A;return function(k){d.makeRotationY(k);this.applyMatrix(d);return this}}(),rotateZ:function(){var d=new A;
return function(k){d.makeRotationZ(k);this.applyMatrix(d);return this}}(),translate:function(){var d=new A;return function(k,p,t){d.makeTranslation(k,p,t);this.applyMatrix(d);return this}}(),scale:function(){var d=new A;return function(k,p,t){d.makeScale(k,p,t);this.applyMatrix(d);return this}}(),lookAt:function(){var d=new P;return function(k){d.lookAt(k);d.updateMatrix();this.applyMatrix(d.matrix)}}(),fromBufferGeometry:function(d){function k(U,Z,ca,la){var ra=void 0===F?[]:[p.colors[U].clone(),
p.colors[Z].clone(),p.colors[ca].clone()],ia=void 0===B?[]:[(new f).fromArray(B,3*U),(new f).fromArray(B,3*Z),(new f).fromArray(B,3*ca)];la=new H(U,Z,ca,ia,ra,la);p.faces.push(la);void 0!==G&&p.faceVertexUvs[0].push([(new c).fromArray(G,2*U),(new c).fromArray(G,2*Z),(new c).fromArray(G,2*ca)]);void 0!==I&&p.faceVertexUvs[1].push([(new c).fromArray(I,2*U),(new c).fromArray(I,2*Z),(new c).fromArray(I,2*ca)])}var p=this,t=null!==d.index?d.index.array:void 0,x=d.attributes,y=x.position.array,B=void 0!==
x.normal?x.normal.array:void 0,F=void 0!==x.color?x.color.array:void 0,G=void 0!==x.uv?x.uv.array:void 0,I=void 0!==x.uv2?x.uv2.array:void 0;void 0!==I&&(this.faceVertexUvs[1]=[]);for(var N=x=0;x<y.length;x+=3,N+=2)p.vertices.push((new f).fromArray(y,x)),void 0!==F&&p.colors.push((new D).fromArray(F,x));var O=d.groups;if(0<O.length)for(x=0;x<O.length;x++){y=O[x];var Q=y.start,V=y.count;N=Q;for(Q+=V;N<Q;N+=3)void 0!==t?k(t[N],t[N+1],t[N+2],y.materialIndex):k(N,N+1,N+2,y.materialIndex)}else if(void 0!==
t)for(x=0;x<t.length;x+=3)k(t[x],t[x+1],t[x+2]);else for(x=0;x<y.length/3;x+=3)k(x,x+1,x+2);this.computeFaceNormals();null!==d.boundingBox&&(this.boundingBox=d.boundingBox.clone());null!==d.boundingSphere&&(this.boundingSphere=d.boundingSphere.clone());return this},center:function(){var d=new f;return function(){this.computeBoundingBox();this.boundingBox.getCenter(d).negate();this.translate(d.x,d.y,d.z);return this}}(),normalize:function(){this.computeBoundingSphere();var d=this.boundingSphere.center,
k=this.boundingSphere.radius;k=0===k?1:1/k;var p=new A;p.set(k,0,0,-k*d.x,0,k,0,-k*d.y,0,0,k,-k*d.z,0,0,0,1);this.applyMatrix(p);return this},computeFaceNormals:function(){for(var d=new f,k=new f,p=0,t=this.faces.length;p<t;p++){var x=this.faces[p],y=this.vertices[x.a],B=this.vertices[x.b];d.subVectors(this.vertices[x.c],B);k.subVectors(y,B);d.cross(k);d.normalize();x.normal.copy(d)}},computeVertexNormals:function(d){void 0===d&&(d=!0);var k;var p=Array(this.vertices.length);var t=0;for(k=this.vertices.length;t<
k;t++)p[t]=new f;if(d){var x=new f,y=new f;d=0;for(t=this.faces.length;d<t;d++){k=this.faces[d];var B=this.vertices[k.a];var F=this.vertices[k.b];var G=this.vertices[k.c];x.subVectors(G,F);y.subVectors(B,F);x.cross(y);p[k.a].add(x);p[k.b].add(x);p[k.c].add(x)}}else for(this.computeFaceNormals(),d=0,t=this.faces.length;d<t;d++)k=this.faces[d],p[k.a].add(k.normal),p[k.b].add(k.normal),p[k.c].add(k.normal);t=0;for(k=this.vertices.length;t<k;t++)p[t].normalize();d=0;for(t=this.faces.length;d<t;d++)k=
this.faces[d],B=k.vertexNormals,3===B.length?(B[0].copy(p[k.a]),B[1].copy(p[k.b]),B[2].copy(p[k.c])):(B[0]=p[k.a].clone(),B[1]=p[k.b].clone(),B[2]=p[k.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var d;this.computeFaceNormals();var k=0;for(d=this.faces.length;k<d;k++){var p=this.faces[k];var t=p.vertexNormals;3===t.length?(t[0].copy(p.normal),t[1].copy(p.normal),t[2].copy(p.normal)):(t[0]=p.normal.clone(),t[1]=p.normal.clone(),t[2]=p.normal.clone())}0<
this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var d,k;var p=0;for(k=this.faces.length;p<k;p++){var t=this.faces[p];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone();t.__originalVertexNormals||(t.__originalVertexNormals=[]);var x=0;for(d=t.vertexNormals.length;x<d;x++)t.__originalVertexNormals[x]?t.__originalVertexNormals[x].copy(t.vertexNormals[x]):t.__originalVertexNormals[x]=t.vertexNormals[x].clone()}var y=new S;
y.faces=this.faces;x=0;for(d=this.morphTargets.length;x<d;x++){if(!this.morphNormals[x]){this.morphNormals[x]={};this.morphNormals[x].faceNormals=[];this.morphNormals[x].vertexNormals=[];t=this.morphNormals[x].faceNormals;var B=this.morphNormals[x].vertexNormals;p=0;for(k=this.faces.length;p<k;p++){var F=new f;var G={a:new f,b:new f,c:new f};t.push(F);B.push(G)}}B=this.morphNormals[x];y.vertices=this.morphTargets[x].vertices;y.computeFaceNormals();y.computeVertexNormals();p=0;for(k=this.faces.length;p<
k;p++)t=this.faces[p],F=B.faceNormals[p],G=B.vertexNormals[p],F.copy(t.normal),G.a.copy(t.vertexNormals[0]),G.b.copy(t.vertexNormals[1]),G.c.copy(t.vertexNormals[2])}p=0;for(k=this.faces.length;p<k;p++)t=this.faces[p],t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new v);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=
new u);this.boundingSphere.setFromPoints(this.vertices)},merge:function(d,k,p){if(d&&d.isGeometry){var t,x=this.vertices.length,y=this.vertices,B=d.vertices,F=this.faces,G=d.faces,I=this.faceVertexUvs[0],N=d.faceVertexUvs[0],O=this.colors,Q=d.colors;void 0===p&&(p=0);void 0!==k&&(t=(new g).getNormalMatrix(k));d=0;for(var V=B.length;d<V;d++){var U=B[d].clone();void 0!==k&&U.applyMatrix4(k);y.push(U)}d=0;for(V=Q.length;d<V;d++)O.push(Q[d].clone());d=0;for(V=G.length;d<V;d++){B=G[d];var Z=B.vertexNormals;
Q=B.vertexColors;O=new H(B.a+x,B.b+x,B.c+x);O.normal.copy(B.normal);void 0!==t&&O.normal.applyMatrix3(t).normalize();k=0;for(y=Z.length;k<y;k++)U=Z[k].clone(),void 0!==t&&U.applyMatrix3(t).normalize(),O.vertexNormals.push(U);O.color.copy(B.color);k=0;for(y=Q.length;k<y;k++)U=Q[k],O.vertexColors.push(U.clone());O.materialIndex=B.materialIndex+p;F.push(O)}d=0;for(V=N.length;d<V;d++)if(p=N[d],t=[],void 0!==p){k=0;for(y=p.length;k<y;k++)t.push(p[k].clone());I.push(t)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
d)},mergeMesh:function(d){d&&d.isMesh?(d.matrixAutoUpdate&&d.updateMatrix(),this.merge(d.geometry,d.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",d)},mergeVertices:function(){var d={},k=[],p=[],t=Math.pow(10,4),x;var y=0;for(x=this.vertices.length;y<x;y++){var B=this.vertices[y];B=Math.round(B.x*t)+"_"+Math.round(B.y*t)+"_"+Math.round(B.z*t);void 0===d[B]?(d[B]=y,k.push(this.vertices[y]),p[y]=k.length-1):p[y]=p[d[B]]}d=[];y=0;for(x=this.faces.length;y<x;y++)for(t=
this.faces[y],t.a=p[t.a],t.b=p[t.b],t.c=p[t.c],t=[t.a,t.b,t.c],B=0;3>B;B++)if(t[B]===t[(B+1)%3]){d.push(y);break}for(y=d.length-1;0<=y;y--)for(t=d[y],this.faces.splice(t,1),p=0,x=this.faceVertexUvs.length;p<x;p++)this.faceVertexUvs[p].splice(t,1);y=this.vertices.length-k.length;this.vertices=k;return y},setFromPoints:function(d){this.vertices=[];for(var k=0,p=d.length;k<p;k++){var t=d[k];this.vertices.push(new f(t.x,t.y,t.z||0))}return this},sortFacesByMaterialIndex:function(){for(var d=this.faces,
k=d.length,p=0;p<k;p++)d[p]._id=p;d.sort(function(G,I){return G.materialIndex-I.materialIndex});var t=this.faceVertexUvs[0],x=this.faceVertexUvs[1],y,B;t&&t.length===k&&(y=[]);x&&x.length===k&&(B=[]);for(p=0;p<k;p++){var F=d[p]._id;y&&y.push(t[F]);B&&B.push(x[F])}y&&(this.faceVertexUvs[0]=y);B&&(this.faceVertexUvs[1]=B)},toJSON:function(){function d(ma,na,ya){return ya?ma|1<<na:ma&~(1<<na)}function k(ma){var na=ma.x.toString()+ma.y.toString()+ma.z.toString();if(void 0!==I[na])return I[na];I[na]=G.length/
3;G.push(ma.x,ma.y,ma.z);return I[na]}function p(ma){var na=ma.r.toString()+ma.g.toString()+ma.b.toString();if(void 0!==O[na])return O[na];O[na]=N.length;N.push(ma.getHex());return O[na]}function t(ma){var na=ma.x.toString()+ma.y.toString();if(void 0!==V[na])return V[na];V[na]=Q.length/2;Q.push(ma.x,ma.y);return V[na]}var x={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};x.uuid=this.uuid;x.type=this.type;""!==this.name&&(x.name=this.name);if(void 0!==this.parameters){var y=this.parameters,
B;for(B in y)void 0!==y[B]&&(x[B]=y[B]);return x}y=[];for(B=0;B<this.vertices.length;B++){var F=this.vertices[B];y.push(F.x,F.y,F.z)}F=[];var G=[],I={},N=[],O={},Q=[],V={};for(B=0;B<this.faces.length;B++){var U=this.faces[B],Z=void 0!==this.faceVertexUvs[0][B],ca=0<U.normal.length(),la=0<U.vertexNormals.length,ra=1!==U.color.r||1!==U.color.g||1!==U.color.b,ia=0<U.vertexColors.length,va=0;va=d(va,0,0);va=d(va,1,!0);va=d(va,2,!1);va=d(va,3,Z);va=d(va,4,ca);va=d(va,5,la);va=d(va,6,ra);va=d(va,7,ia);
F.push(va);F.push(U.a,U.b,U.c);F.push(U.materialIndex);Z&&(Z=this.faceVertexUvs[0][B],F.push(t(Z[0]),t(Z[1]),t(Z[2])));ca&&F.push(k(U.normal));la&&(ca=U.vertexNormals,F.push(k(ca[0]),k(ca[1]),k(ca[2])));ra&&F.push(p(U.color));ia&&(U=U.vertexColors,F.push(p(U[0]),p(U[1]),p(U[2])))}x.data={};x.data.vertices=y;x.data.normals=G;0<N.length&&(x.data.colors=N);0<Q.length&&(x.data.uvs=[Q]);x.data.faces=F;return x},clone:function(){return(new S).copy(this)},copy:function(d){var k,p,t;this.vertices=[];this.colors=
[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=d.name;var x=d.vertices;var y=0;for(k=x.length;y<k;y++)this.vertices.push(x[y].clone());x=d.colors;y=0;for(k=x.length;y<k;y++)this.colors.push(x[y].clone());x=d.faces;y=0;for(k=x.length;y<k;y++)this.faces.push(x[y].clone());y=0;for(k=d.faceVertexUvs.length;y<k;y++){var B=d.faceVertexUvs[y];void 0===this.faceVertexUvs[y]&&
(this.faceVertexUvs[y]=[]);x=0;for(p=B.length;x<p;x++){var F=B[x],G=[];var I=0;for(t=F.length;I<t;I++)G.push(F[I].clone());this.faceVertexUvs[y].push(G)}}I=d.morphTargets;y=0;for(k=I.length;y<k;y++){t={};t.name=I[y].name;if(void 0!==I[y].vertices)for(t.vertices=[],x=0,p=I[y].vertices.length;x<p;x++)t.vertices.push(I[y].vertices[x].clone());if(void 0!==I[y].normals)for(t.normals=[],x=0,p=I[y].normals.length;x<p;x++)t.normals.push(I[y].normals[x].clone());this.morphTargets.push(t)}I=d.morphNormals;
y=0;for(k=I.length;y<k;y++){t={};if(void 0!==I[y].vertexNormals)for(t.vertexNormals=[],x=0,p=I[y].vertexNormals.length;x<p;x++)B=I[y].vertexNormals[x],F={},F.a=B.a.clone(),F.b=B.b.clone(),F.c=B.c.clone(),t.vertexNormals.push(F);if(void 0!==I[y].faceNormals)for(t.faceNormals=[],x=0,p=I[y].faceNormals.length;x<p;x++)t.faceNormals.push(I[y].faceNormals[x].clone());this.morphNormals.push(t)}x=d.skinWeights;y=0;for(k=x.length;y<k;y++)this.skinWeights.push(x[y].clone());x=d.skinIndices;y=0;for(k=x.length;y<
k;y++)this.skinIndices.push(x[y].clone());x=d.lineDistances;y=0;for(k=x.length;y<k;y++)this.lineDistances.push(x[y]);y=d.boundingBox;null!==y&&(this.boundingBox=y.clone());y=d.boundingSphere;null!==y&&(this.boundingSphere=y.clone());this.elementsNeedUpdate=d.elementsNeedUpdate;this.verticesNeedUpdate=d.verticesNeedUpdate;this.uvsNeedUpdate=d.uvsNeedUpdate;this.normalsNeedUpdate=d.normalsNeedUpdate;this.colorsNeedUpdate=d.colorsNeedUpdate;this.lineDistancesNeedUpdate=d.lineDistancesNeedUpdate;this.groupsNeedUpdate=
d.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(aa.prototype,"needsUpdate",{set:function(d){!0===d&&this.version++}});Object.assign(aa.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(d){if(Array.isArray(d))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==d?d.length/this.itemSize:0;this.array=d;return this},setDynamic:function(d){this.dynamic=d;return this},
copy:function(d){this.name=d.name;this.array=new d.array.constructor(d.array);this.itemSize=d.itemSize;this.count=d.count;this.normalized=d.normalized;this.dynamic=d.dynamic;return this},copyAt:function(d,k,p){d*=this.itemSize;p*=k.itemSize;for(var t=0,x=this.itemSize;t<x;t++)this.array[d+t]=k.array[p+t];return this},copyArray:function(d){this.array.set(d);return this},copyColorsArray:function(d){for(var k=this.array,p=0,t=0,x=d.length;t<x;t++){var y=d[t];void 0===y&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",
t),y=new D);k[p++]=y.r;k[p++]=y.g;k[p++]=y.b}return this},copyVector2sArray:function(d){for(var k=this.array,p=0,t=0,x=d.length;t<x;t++){var y=d[t];void 0===y&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",t),y=new c);k[p++]=y.x;k[p++]=y.y}return this},copyVector3sArray:function(d){for(var k=this.array,p=0,t=0,x=d.length;t<x;t++){var y=d[t];void 0===y&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",t),y=new f);k[p++]=y.x;k[p++]=y.y;
k[p++]=y.z}return this},copyVector4sArray:function(d){for(var k=this.array,p=0,t=0,x=d.length;t<x;t++){var y=d[t];void 0===y&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",t),y=new l);k[p++]=y.x;k[p++]=y.y;k[p++]=y.z;k[p++]=y.w}return this},set:function(d,k){void 0===k&&(k=0);this.array.set(d,k);return this},getX:function(d){return this.array[d*this.itemSize]},setX:function(d,k){this.array[d*this.itemSize]=k;return this},getY:function(d){return this.array[d*this.itemSize+
1]},setY:function(d,k){this.array[d*this.itemSize+1]=k;return this},getZ:function(d){return this.array[d*this.itemSize+2]},setZ:function(d,k){this.array[d*this.itemSize+2]=k;return this},getW:function(d){return this.array[d*this.itemSize+3]},setW:function(d,k){this.array[d*this.itemSize+3]=k;return this},setXY:function(d,k,p){d*=this.itemSize;this.array[d+0]=k;this.array[d+1]=p;return this},setXYZ:function(d,k,p,t){d*=this.itemSize;this.array[d+0]=k;this.array[d+1]=p;this.array[d+2]=t;return this},
setXYZW:function(d,k,p,t,x){d*=this.itemSize;this.array[d+0]=k;this.array[d+1]=p;this.array[d+2]=t;this.array[d+3]=x;return this},onUpload:function(d){this.onUploadCallback=d;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});R.prototype=Object.create(aa.prototype);R.prototype.constructor=R;Y.prototype=Object.create(aa.prototype);Y.prototype.constructor=Y;W.prototype=Object.create(aa.prototype);W.prototype.constructor=W;X.prototype=Object.create(aa.prototype);
X.prototype.constructor=X;ja.prototype=Object.create(aa.prototype);ja.prototype.constructor=ja;pa.prototype=Object.create(aa.prototype);pa.prototype.constructor=pa;ta.prototype=Object.create(aa.prototype);ta.prototype.constructor=ta;da.prototype=Object.create(aa.prototype);da.prototype.constructor=da;Aa.prototype=Object.create(aa.prototype);Aa.prototype.constructor=Aa;Object.assign(Ca.prototype,{computeGroups:function(d){var k=[],p=void 0;d=d.faces;for(var t=0;t<d.length;t++){var x=d[t];if(x.materialIndex!==
p){p=x.materialIndex;void 0!==y&&(y.count=3*t-y.start,k.push(y));var y={start:3*t,materialIndex:p}}}void 0!==y&&(y.count=3*t-y.start,k.push(y));this.groups=k},fromGeometry:function(d){var k=d.faces,p=d.vertices,t=d.faceVertexUvs,x=t[0]&&0<t[0].length,y=t[1]&&0<t[1].length,B=d.morphTargets,F=B.length;if(0<F){var G=[];for(var I=0;I<F;I++)G[I]={name:B[I].name,data:[]};this.morphTargets.position=G}var N=d.morphNormals,O=N.length;if(0<O){var Q=[];for(I=0;I<O;I++)Q[I]={name:N[I].name,data:[]};this.morphTargets.normal=
Q}var V=d.skinIndices,U=d.skinWeights,Z=V.length===p.length,ca=U.length===p.length;0<p.length&&0===k.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(I=0;I<k.length;I++){var la=k[I];this.vertices.push(p[la.a],p[la.b],p[la.c]);var ra=la.vertexNormals;3===ra.length?this.normals.push(ra[0],ra[1],ra[2]):(ra=la.normal,this.normals.push(ra,ra,ra));ra=la.vertexColors;3===ra.length?this.colors.push(ra[0],ra[1],ra[2]):(ra=la.color,this.colors.push(ra,ra,ra));!0===x&&
(ra=t[0][I],void 0!==ra?this.uvs.push(ra[0],ra[1],ra[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",I),this.uvs.push(new c,new c,new c)));!0===y&&(ra=t[1][I],void 0!==ra?this.uvs2.push(ra[0],ra[1],ra[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",I),this.uvs2.push(new c,new c,new c)));for(ra=0;ra<F;ra++){var ia=B[ra].vertices;G[ra].data.push(ia[la.a],ia[la.b],ia[la.c])}for(ra=0;ra<O;ra++)ia=N[ra].vertexNormals[I],Q[ra].data.push(ia.a,ia.b,
ia.c);Z&&this.skinIndices.push(V[la.a],V[la.b],V[la.c]);ca&&this.skinWeights.push(U[la.a],U[la.b],U[la.c])}this.computeGroups(d);this.verticesNeedUpdate=d.verticesNeedUpdate;this.normalsNeedUpdate=d.normalsNeedUpdate;this.colorsNeedUpdate=d.colorsNeedUpdate;this.uvsNeedUpdate=d.uvsNeedUpdate;this.groupsNeedUpdate=d.groupsNeedUpdate;return this}});var Zn=1;ka.prototype=Object.assign(Object.create(b.prototype),{constructor:ka,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(d){this.index=
Array.isArray(d)?new (65535<oa(d)?ta:ja)(d,1):d},addAttribute:function(d,k,p){if(!(k&&k.isBufferAttribute||k&&k.isInterleavedBufferAttribute))return console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(d,new aa(k,p));if("index"===d)return console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(k),this;this.attributes[d]=k;return this},getAttribute:function(d){return this.attributes[d]},removeAttribute:function(d){delete this.attributes[d];
return this},addGroup:function(d,k,p){this.groups.push({start:d,count:k,materialIndex:void 0!==p?p:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(d,k){this.drawRange.start=d;this.drawRange.count=k},applyMatrix:function(d){var k=this.attributes.position;void 0!==k&&(d.applyToBufferAttribute(k),k.needsUpdate=!0);var p=this.attributes.normal;void 0!==p&&(k=(new g).getNormalMatrix(d),k.applyToBufferAttribute(p),p.needsUpdate=!0);p=this.attributes.tangent;void 0!==p&&(k=(new g).getNormalMatrix(d),
k.applyToBufferAttribute(p),p.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var d=new A;return function(k){d.makeRotationX(k);this.applyMatrix(d);return this}}(),rotateY:function(){var d=new A;return function(k){d.makeRotationY(k);this.applyMatrix(d);return this}}(),rotateZ:function(){var d=new A;return function(k){d.makeRotationZ(k);this.applyMatrix(d);return this}}(),translate:function(){var d=
new A;return function(k,p,t){d.makeTranslation(k,p,t);this.applyMatrix(d);return this}}(),scale:function(){var d=new A;return function(k,p,t){d.makeScale(k,p,t);this.applyMatrix(d);return this}}(),lookAt:function(){var d=new P;return function(k){d.lookAt(k);d.updateMatrix();this.applyMatrix(d.matrix)}}(),center:function(){var d=new f;return function(){this.computeBoundingBox();this.boundingBox.getCenter(d).negate();this.translate(d.x,d.y,d.z);return this}}(),setFromObject:function(d){var k=d.geometry;
if(d.isPoints||d.isLine){d=new da(3*k.vertices.length,3);var p=new da(3*k.colors.length,3);this.addAttribute("position",d.copyVector3sArray(k.vertices));this.addAttribute("color",p.copyColorsArray(k.colors));k.lineDistances&&k.lineDistances.length===k.vertices.length&&(d=new da(k.lineDistances.length,1),this.addAttribute("lineDistance",d.copyArray(k.lineDistances)));null!==k.boundingSphere&&(this.boundingSphere=k.boundingSphere.clone());null!==k.boundingBox&&(this.boundingBox=k.boundingBox.clone())}else d.isMesh&&
k&&k.isGeometry&&this.fromGeometry(k);return this},setFromPoints:function(d){for(var k=[],p=0,t=d.length;p<t;p++){var x=d[p];k.push(x.x,x.y,x.z||0)}this.addAttribute("position",new da(k,3));return this},updateFromObject:function(d){var k=d.geometry;if(d.isMesh){var p=k.__directGeometry;!0===k.elementsNeedUpdate&&(p=void 0,k.elementsNeedUpdate=!1);if(void 0===p)return this.fromGeometry(k);p.verticesNeedUpdate=k.verticesNeedUpdate;p.normalsNeedUpdate=k.normalsNeedUpdate;p.colorsNeedUpdate=k.colorsNeedUpdate;
p.uvsNeedUpdate=k.uvsNeedUpdate;p.groupsNeedUpdate=k.groupsNeedUpdate;k.verticesNeedUpdate=!1;k.normalsNeedUpdate=!1;k.colorsNeedUpdate=!1;k.uvsNeedUpdate=!1;k.groupsNeedUpdate=!1;k=p}!0===k.verticesNeedUpdate&&(p=this.attributes.position,void 0!==p&&(p.copyVector3sArray(k.vertices),p.needsUpdate=!0),k.verticesNeedUpdate=!1);!0===k.normalsNeedUpdate&&(p=this.attributes.normal,void 0!==p&&(p.copyVector3sArray(k.normals),p.needsUpdate=!0),k.normalsNeedUpdate=!1);!0===k.colorsNeedUpdate&&(p=this.attributes.color,
void 0!==p&&(p.copyColorsArray(k.colors),p.needsUpdate=!0),k.colorsNeedUpdate=!1);k.uvsNeedUpdate&&(p=this.attributes.uv,void 0!==p&&(p.copyVector2sArray(k.uvs),p.needsUpdate=!0),k.uvsNeedUpdate=!1);k.lineDistancesNeedUpdate&&(p=this.attributes.lineDistance,void 0!==p&&(p.copyArray(k.lineDistances),p.needsUpdate=!0),k.lineDistancesNeedUpdate=!1);k.groupsNeedUpdate&&(k.computeGroups(d.geometry),this.groups=k.groups,k.groupsNeedUpdate=!1);return this},fromGeometry:function(d){d.__directGeometry=(new Ca).fromGeometry(d);
return this.fromDirectGeometry(d.__directGeometry)},fromDirectGeometry:function(d){this.addAttribute("position",(new aa(new Float32Array(3*d.vertices.length),3)).copyVector3sArray(d.vertices));0<d.normals.length&&this.addAttribute("normal",(new aa(new Float32Array(3*d.normals.length),3)).copyVector3sArray(d.normals));0<d.colors.length&&this.addAttribute("color",(new aa(new Float32Array(3*d.colors.length),3)).copyColorsArray(d.colors));0<d.uvs.length&&this.addAttribute("uv",(new aa(new Float32Array(2*
d.uvs.length),2)).copyVector2sArray(d.uvs));0<d.uvs2.length&&this.addAttribute("uv2",(new aa(new Float32Array(2*d.uvs2.length),2)).copyVector2sArray(d.uvs2));this.groups=d.groups;for(var k in d.morphTargets){for(var p=[],t=d.morphTargets[k],x=0,y=t.length;x<y;x++){var B=t[x],F=new da(3*B.data.length,3);F.name=B.name;p.push(F.copyVector3sArray(B.data))}this.morphAttributes[k]=p}0<d.skinIndices.length&&(k=new da(4*d.skinIndices.length,4),this.addAttribute("skinIndex",k.copyVector4sArray(d.skinIndices)));
0<d.skinWeights.length&&(k=new da(4*d.skinWeights.length,4),this.addAttribute("skinWeight",k.copyVector4sArray(d.skinWeights)));null!==d.boundingSphere&&(this.boundingSphere=d.boundingSphere.clone());null!==d.boundingBox&&(this.boundingBox=d.boundingBox.clone());return this},computeBoundingBox:function(){var d=new v;return function(){null===this.boundingBox&&(this.boundingBox=new v);var k=this.attributes.position,p=this.morphAttributes.position;if(void 0!==k){if(this.boundingBox.setFromBufferAttribute(k),
p){k=0;for(var t=p.length;k<t;k++)d.setFromBufferAttribute(p[k]),this.boundingBox.expandByPoint(d.min),this.boundingBox.expandByPoint(d.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var d=new v,k=new v,p=new f;return function(){null===
this.boundingSphere&&(this.boundingSphere=new u);var t=this.attributes.position,x=this.morphAttributes.position;if(t){var y=this.boundingSphere.center;d.setFromBufferAttribute(t);if(x)for(var B=0,F=x.length;B<F;B++){var G=x[B];k.setFromBufferAttribute(G);d.expandByPoint(k.min);d.expandByPoint(k.max)}d.getCenter(y);var I=0;B=0;for(F=t.count;B<F;B++)p.fromBufferAttribute(t,B),I=Math.max(I,y.distanceToSquared(p));if(x)for(B=0,F=x.length;B<F;B++){G=x[B];t=0;for(var N=G.count;t<N;t++)p.fromBufferAttribute(G,
t),I=Math.max(I,y.distanceToSquared(p))}this.boundingSphere.radius=Math.sqrt(I);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var d=this.index,k=this.attributes;if(k.position){var p=k.position.array;if(void 0===k.normal)this.addAttribute("normal",new aa(new Float32Array(p.length),3));else for(var t=
k.normal.array,x=0,y=t.length;x<y;x++)t[x]=0;t=k.normal.array;var B=new f,F=new f,G=new f,I=new f,N=new f;if(d){var O=d.array;x=0;for(y=d.count;x<y;x+=3){d=3*O[x+0];var Q=3*O[x+1];var V=3*O[x+2];B.fromArray(p,d);F.fromArray(p,Q);G.fromArray(p,V);I.subVectors(G,F);N.subVectors(B,F);I.cross(N);t[d]+=I.x;t[d+1]+=I.y;t[d+2]+=I.z;t[Q]+=I.x;t[Q+1]+=I.y;t[Q+2]+=I.z;t[V]+=I.x;t[V+1]+=I.y;t[V+2]+=I.z}}else for(x=0,y=p.length;x<y;x+=9)B.fromArray(p,x),F.fromArray(p,x+3),G.fromArray(p,x+6),I.subVectors(G,F),
N.subVectors(B,F),I.cross(N),t[x]=I.x,t[x+1]=I.y,t[x+2]=I.z,t[x+3]=I.x,t[x+4]=I.y,t[x+5]=I.z,t[x+6]=I.x,t[x+7]=I.y,t[x+8]=I.z;this.normalizeNormals();k.normal.needsUpdate=!0}},merge:function(d,k){if(d&&d.isBufferGeometry){void 0===k&&(k=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset\x3d0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var p=this.attributes,t;for(t in p)if(void 0!==d.attributes[t]){var x=p[t].array,y=d.attributes[t],
B=y.array,F=y.itemSize*k;y=Math.min(B.length,x.length-F);for(var G=0;G<y;G++,F++)x[F]=B[G]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",d)},normalizeNormals:function(){var d=new f;return function(){for(var k=this.attributes.normal,p=0,t=k.count;p<t;p++)d.x=k.getX(p),d.y=k.getY(p),d.z=k.getZ(p),d.normalize(),k.setXYZ(p,d.x,d.y,d.z)}}(),toNonIndexed:function(){function d(N,O){var Q=N.array;N=N.itemSize;for(var V=new Q.constructor(O.length*
N),U,Z=0,ca=0,la=O.length;ca<la;ca++){U=O[ca]*N;for(var ra=0;ra<N;ra++)V[Z++]=Q[U++]}return new aa(V,N)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var k=new ka,p=this.index.array,t=this.attributes,x;for(x in t){var y=t[x];y=d(y,p);k.addAttribute(x,y)}var B=this.morphAttributes;for(x in B){var F=[],G=B[x];t=0;for(var I=G.length;t<I;t++)y=G[t],y=d(y,p),F.push(y);k.morphAttributes[x]=F}p=this.groups;t=0;for(x=p.length;t<x;t++)y=
p[t],k.addGroup(y.start,y.count,y.materialIndex);return k},toJSON:function(){var d={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);0<Object.keys(this.userData).length&&(d.userData=this.userData);if(void 0!==this.parameters){var k=this.parameters;for(I in k)void 0!==k[I]&&(d[I]=k[I]);return d}d.data={attributes:{}};k=this.index;null!==k&&(d.data.index={type:k.array.constructor.name,array:Array.prototype.slice.call(k.array)});
var p=this.attributes;for(I in p){k=p[I];var t={itemSize:k.itemSize,type:k.array.constructor.name,array:Array.prototype.slice.call(k.array),normalized:k.normalized};""!==k.name&&(t.name=k.name);d.data.attributes[I]=t}p={};var x=!1;for(I in this.morphAttributes){for(var y=this.morphAttributes[I],B=[],F=0,G=y.length;F<G;F++)k=y[F],t={itemSize:k.itemSize,type:k.array.constructor.name,array:Array.prototype.slice.call(k.array),normalized:k.normalized},""!==k.name&&(t.name=k.name),B.push(t);0<B.length&&
(p[I]=B,x=!0)}x&&(d.data.morphAttributes=p);var I=this.groups;0<I.length&&(d.data.groups=JSON.parse(JSON.stringify(I)));I=this.boundingSphere;null!==I&&(d.data.boundingSphere={center:I.center.toArray(),radius:I.radius});return d},clone:function(){return(new ka).copy(this)},copy:function(d){var k;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=d.name;var p=d.index;null!==p&&this.setIndex(p.clone());p=d.attributes;for(B in p)this.addAttribute(B,
p[B].clone());var t=d.morphAttributes;for(B in t){var x=[],y=t[B];p=0;for(k=y.length;p<k;p++)x.push(y[p].clone());this.morphAttributes[B]=x}var B=d.groups;p=0;for(k=B.length;p<k;p++)t=B[p],this.addGroup(t.start,t.count,t.materialIndex);B=d.boundingBox;null!==B&&(this.boundingBox=B.clone());B=d.boundingSphere;null!==B&&(this.boundingSphere=B.clone());this.drawRange.start=d.drawRange.start;this.drawRange.count=d.drawRange.count;this.userData=d.userData;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
Da.prototype=Object.create(S.prototype);Da.prototype.constructor=Da;Oa.prototype=Object.create(ka.prototype);Oa.prototype.constructor=Oa;Ea.prototype=Object.create(S.prototype);Ea.prototype.constructor=Ea;La.prototype=Object.create(ka.prototype);La.prototype.constructor=La;var $n=0;Ka.prototype=Object.assign(Object.create(b.prototype),{constructor:Ka,isMaterial:!0,onBeforeCompile:function(){},setValues:function(d){if(void 0!==d)for(var k in d){var p=d[k];if(void 0===p)console.warn("THREE.Material: '"+
k+"' parameter is undefined.");else if("shading"===k)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===p?!0:!1;else{var t=this[k];void 0===t?console.warn("THREE."+this.type+": '"+k+"' is not a property of this material."):t&&t.isColor?t.set(p):t&&t.isVector3&&p&&p.isVector3?t.copy(p):this[k]=p}}},toJSON:function(d){function k(x){var y=[],B;for(B in x){var F=x[B];delete F.metadata;y.push(F)}return y}var p=void 0===d||"string"===
typeof d;p&&(d={textures:{},images:{}});var t={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid;t.type=this.type;""!==this.name&&(t.name=this.name);this.color&&this.color.isColor&&(t.color=this.color.getHex());void 0!==this.roughness&&(t.roughness=this.roughness);void 0!==this.metalness&&(t.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&(t.emissiveIntensity=this.emissiveIntensity);
this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex());void 0!==this.shininess&&(t.shininess=this.shininess);void 0!==this.clearCoat&&(t.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(t.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(t.map=this.map.toJSON(d).uuid);this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(d).uuid);this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(d).uuid);this.lightMap&&this.lightMap.isTexture&&
(t.lightMap=this.lightMap.toJSON(d).uuid);this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(d).uuid,t.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(d).uuid,t.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(d).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(d).uuid,
t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(d).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(d).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(d).uuid);this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(d).uuid);this.envMap&&this.envMap.isTexture&&
(t.envMap=this.envMap.toJSON(d).uuid,t.reflectivity=this.reflectivity,void 0!==this.combine&&(t.combine=this.combine),void 0!==this.envMapIntensity&&(t.envMapIntensity=this.envMapIntensity));this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(d).uuid);void 0!==this.size&&(t.size=this.size);void 0!==this.sizeAttenuation&&(t.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(t.blending=this.blending);!0===this.flatShading&&(t.flatShading=this.flatShading);0!==
this.side&&(t.side=this.side);0!==this.vertexColors&&(t.vertexColors=this.vertexColors);1>this.opacity&&(t.opacity=this.opacity);!0===this.transparent&&(t.transparent=this.transparent);t.depthFunc=this.depthFunc;t.depthTest=this.depthTest;t.depthWrite=this.depthWrite;0!==this.rotation&&(t.rotation=this.rotation);!0===this.polygonOffset&&(t.polygonOffset=!0);0!==this.polygonOffsetFactor&&(t.polygonOffsetFactor=this.polygonOffsetFactor);0!==this.polygonOffsetUnits&&(t.polygonOffsetUnits=this.polygonOffsetUnits);
1!==this.linewidth&&(t.linewidth=this.linewidth);void 0!==this.dashSize&&(t.dashSize=this.dashSize);void 0!==this.gapSize&&(t.gapSize=this.gapSize);void 0!==this.scale&&(t.scale=this.scale);!0===this.dithering&&(t.dithering=!0);0<this.alphaTest&&(t.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(t.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(t.wireframe=this.wireframe);1<this.wireframeLinewidth&&(t.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&
(t.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(t.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(t.morphTargets=!0);!0===this.skinning&&(t.skinning=!0);!1===this.visible&&(t.visible=!1);"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData);p&&(p=k(d.textures),d=k(d.images),0<p.length&&(t.textures=p),0<d.length&&(t.images=d));return t},clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.name=d.name;this.fog=d.fog;
this.lights=d.lights;this.blending=d.blending;this.side=d.side;this.flatShading=d.flatShading;this.vertexColors=d.vertexColors;this.opacity=d.opacity;this.transparent=d.transparent;this.blendSrc=d.blendSrc;this.blendDst=d.blendDst;this.blendEquation=d.blendEquation;this.blendSrcAlpha=d.blendSrcAlpha;this.blendDstAlpha=d.blendDstAlpha;this.blendEquationAlpha=d.blendEquationAlpha;this.depthFunc=d.depthFunc;this.depthTest=d.depthTest;this.depthWrite=d.depthWrite;this.colorWrite=d.colorWrite;this.precision=
d.precision;this.polygonOffset=d.polygonOffset;this.polygonOffsetFactor=d.polygonOffsetFactor;this.polygonOffsetUnits=d.polygonOffsetUnits;this.dithering=d.dithering;this.alphaTest=d.alphaTest;this.premultipliedAlpha=d.premultipliedAlpha;this.visible=d.visible;this.userData=JSON.parse(JSON.stringify(d.userData));this.clipShadows=d.clipShadows;this.clipIntersection=d.clipIntersection;var k=d.clippingPlanes,p=null;if(null!==k){var t=k.length;p=Array(t);for(var x=0;x!==t;++x)p[x]=k[x].clone()}this.clippingPlanes=
p;this.shadowSide=d.shadowSide;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});vb.prototype=Object.create(Ka.prototype);vb.prototype.constructor=vb;vb.prototype.isShaderMaterial=!0;vb.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.fragmentShader=d.fragmentShader;this.vertexShader=d.vertexShader;this.uniforms=E(d.uniforms);this.defines=Object.assign({},d.defines);this.wireframe=d.wireframe;this.wireframeLinewidth=d.wireframeLinewidth;this.lights=d.lights;this.clipping=
d.clipping;this.skinning=d.skinning;this.morphTargets=d.morphTargets;this.morphNormals=d.morphNormals;this.extensions=d.extensions;return this};vb.prototype.toJSON=function(d){var k=Ka.prototype.toJSON.call(this,d);k.uniforms={};for(var p in this.uniforms){var t=this.uniforms[p].value;k.uniforms[p]=t&&t.isTexture?{type:"t",value:t.toJSON(d).uuid}:t&&t.isColor?{type:"c",value:t.getHex()}:t&&t.isVector2?{type:"v2",value:t.toArray()}:t&&t.isVector3?{type:"v3",value:t.toArray()}:t&&t.isVector4?{type:"v4",
value:t.toArray()}:t&&t.isMatrix3?{type:"m3",value:t.toArray()}:t&&t.isMatrix4?{type:"m4",value:t.toArray()}:{value:t}}0<Object.keys(this.defines).length&&(k.defines=this.defines);k.vertexShader=this.vertexShader;k.fragmentShader=this.fragmentShader;d={};for(var x in this.extensions)!0===this.extensions[x]&&(d[x]=!0);0<Object.keys(d).length&&(k.extensions=d);return k};Object.assign(jc.prototype,{set:function(d,k){this.origin.copy(d);this.direction.copy(k);return this},clone:function(){return(new this.constructor).copy(this)},
copy:function(d){this.origin.copy(d.origin);this.direction.copy(d.direction);return this},at:function(d,k){void 0===k&&(console.warn("THREE.Ray: .at() target is now required"),k=new f);return k.copy(this.direction).multiplyScalar(d).add(this.origin)},lookAt:function(d){this.direction.copy(d).sub(this.origin).normalize();return this},recast:function(){var d=new f;return function(k){this.origin.copy(this.at(k,d));return this}}(),closestPointToPoint:function(d,k){void 0===k&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),
k=new f);k.subVectors(d,this.origin);d=k.dot(this.direction);return 0>d?k.copy(this.origin):k.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(d){return Math.sqrt(this.distanceSqToPoint(d))},distanceSqToPoint:function(){var d=new f;return function(k){var p=d.subVectors(k,this.origin).dot(this.direction);if(0>p)return this.origin.distanceToSquared(k);d.copy(this.direction).multiplyScalar(p).add(this.origin);return d.distanceToSquared(k)}}(),distanceSqToSegment:function(){var d=
new f,k=new f,p=new f;return function(t,x,y,B){d.copy(t).add(x).multiplyScalar(.5);k.copy(x).sub(t).normalize();p.copy(this.origin).sub(d);var F=.5*t.distanceTo(x),G=-this.direction.dot(k),I=p.dot(this.direction),N=-p.dot(k),O=p.lengthSq(),Q=Math.abs(1-G*G);if(0<Q){t=G*N-I;x=G*I-N;var V=F*Q;0<=t?x>=-V?x<=V?(F=1/Q,t*=F,x*=F,G=t*(t+G*x+2*I)+x*(G*t+x+2*N)+O):(x=F,t=Math.max(0,-(G*x+I)),G=-t*t+x*(x+2*N)+O):(x=-F,t=Math.max(0,-(G*x+I)),G=-t*t+x*(x+2*N)+O):x<=-V?(t=Math.max(0,-(-G*F+I)),x=0<t?-F:Math.min(Math.max(-F,
-N),F),G=-t*t+x*(x+2*N)+O):x<=V?(t=0,x=Math.min(Math.max(-F,-N),F),G=x*(x+2*N)+O):(t=Math.max(0,-(G*F+I)),x=0<t?F:Math.min(Math.max(-F,-N),F),G=-t*t+x*(x+2*N)+O)}else x=0<G?-F:F,t=Math.max(0,-(G*x+I)),G=-t*t+x*(x+2*N)+O;y&&y.copy(this.direction).multiplyScalar(t).add(this.origin);B&&B.copy(k).multiplyScalar(x).add(d);return G}}(),intersectSphere:function(){var d=new f;return function(k,p){d.subVectors(k.center,this.origin);var t=d.dot(this.direction),x=d.dot(d)-t*t;k=k.radius*k.radius;if(x>k)return null;
k=Math.sqrt(k-x);x=t-k;t+=k;return 0>x&&0>t?null:0>x?this.at(t,p):this.at(x,p)}}(),intersectsSphere:function(d){return this.distanceSqToPoint(d.center)<=d.radius*d.radius},distanceToPlane:function(d){var k=d.normal.dot(this.direction);if(0===k)return 0===d.distanceToPoint(this.origin)?0:null;d=-(this.origin.dot(d.normal)+d.constant)/k;return 0<=d?d:null},intersectPlane:function(d,k){d=this.distanceToPlane(d);return null===d?null:this.at(d,k)},intersectsPlane:function(d){var k=d.distanceToPoint(this.origin);
return 0===k||0>d.normal.dot(this.direction)*k?!0:!1},intersectBox:function(d,k){var p=1/this.direction.x;var t=1/this.direction.y;var x=1/this.direction.z,y=this.origin;if(0<=p){var B=(d.min.x-y.x)*p;p*=d.max.x-y.x}else B=(d.max.x-y.x)*p,p*=d.min.x-y.x;if(0<=t){var F=(d.min.y-y.y)*t;t*=d.max.y-y.y}else F=(d.max.y-y.y)*t,t*=d.min.y-y.y;if(B>t||F>p)return null;if(F>B||B!==B)B=F;if(t<p||p!==p)p=t;0<=x?(F=(d.min.z-y.z)*x,d=(d.max.z-y.z)*x):(F=(d.max.z-y.z)*x,d=(d.min.z-y.z)*x);if(B>d||F>p)return null;
if(F>B||B!==B)B=F;if(d<p||p!==p)p=d;return 0>p?null:this.at(0<=B?B:p,k)},intersectsBox:function(){var d=new f;return function(k){return null!==this.intersectBox(k,d)}}(),intersectTriangle:function(){var d=new f,k=new f,p=new f,t=new f;return function(x,y,B,F,G){k.subVectors(y,x);p.subVectors(B,x);t.crossVectors(k,p);y=this.direction.dot(t);if(0<y){if(F)return null;F=1}else if(0>y)F=-1,y=-y;else return null;d.subVectors(this.origin,x);x=F*this.direction.dot(p.crossVectors(d,p));if(0>x)return null;
B=F*this.direction.dot(k.cross(d));if(0>B||x+B>y)return null;x=-F*d.dot(t);return 0>x?null:this.at(x/y,G)}}(),applyMatrix4:function(d){this.origin.applyMatrix4(d);this.direction.transformDirection(d);return this},equals:function(d){return d.origin.equals(this.origin)&&d.direction.equals(this.direction)}});Object.assign(sb,{getNormal:function(){var d=new f;return function(k,p,t,x){void 0===x&&(console.warn("THREE.Triangle: .getNormal() target is now required"),x=new f);x.subVectors(t,p);d.subVectors(k,
p);x.cross(d);k=x.lengthSq();return 0<k?x.multiplyScalar(1/Math.sqrt(k)):x.set(0,0,0)}}(),getBarycoord:function(){var d=new f,k=new f,p=new f;return function(t,x,y,B,F){d.subVectors(B,x);k.subVectors(y,x);p.subVectors(t,x);t=d.dot(d);x=d.dot(k);y=d.dot(p);var G=k.dot(k);B=k.dot(p);var I=t*G-x*x;void 0===F&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),F=new f);if(0===I)return F.set(-2,-1,-1);I=1/I;G=(G*y-x*B)*I;t=(t*B-x*y)*I;return F.set(1-G-t,t,G)}}(),containsPoint:function(){var d=
new f;return function(k,p,t,x){sb.getBarycoord(k,p,t,x,d);return 0<=d.x&&0<=d.y&&1>=d.x+d.y}}(),getUV:function(){var d=new f;return function(k,p,t,x,y,B,F,G){this.getBarycoord(k,p,t,x,d);G.set(0,0);G.addScaledVector(y,d.x);G.addScaledVector(B,d.y);G.addScaledVector(F,d.z);return G}}()});Object.assign(sb.prototype,{set:function(d,k,p){this.a.copy(d);this.b.copy(k);this.c.copy(p);return this},setFromPointsAndIndices:function(d,k,p,t){this.a.copy(d[k]);this.b.copy(d[p]);this.c.copy(d[t]);return this},
clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.a.copy(d.a);this.b.copy(d.b);this.c.copy(d.c);return this},getArea:function(){var d=new f,k=new f;return function(){d.subVectors(this.c,this.b);k.subVectors(this.a,this.b);return.5*d.cross(k).length()}}(),getMidpoint:function(d){void 0===d&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),d=new f);return d.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(d){return sb.getNormal(this.a,
this.b,this.c,d)},getPlane:function(d){void 0===d&&(console.warn("THREE.Triangle: .getPlane() target is now required"),d=new f);return d.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(d,k){return sb.getBarycoord(d,this.a,this.b,this.c,k)},containsPoint:function(d){return sb.containsPoint(d,this.a,this.b,this.c)},getUV:function(d,k,p,t,x){return sb.getUV(d,this.a,this.b,this.c,k,p,t,x)},intersectsBox:function(d){return d.intersectsTriangle(this)},closestPointToPoint:function(){var d=
new f,k=new f,p=new f,t=new f,x=new f,y=new f;return function(B,F){void 0===F&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),F=new f);var G=this.a,I=this.b,N=this.c;d.subVectors(I,G);k.subVectors(N,G);t.subVectors(B,G);var O=d.dot(t),Q=k.dot(t);if(0>=O&&0>=Q)return F.copy(G);x.subVectors(B,I);var V=d.dot(x),U=k.dot(x);if(0<=V&&U<=V)return F.copy(I);var Z=O*U-V*Q;if(0>=Z&&0<=O&&0>=V)return I=O/(O-V),F.copy(G).addScaledVector(d,I);y.subVectors(B,N);B=d.dot(y);var ca=
k.dot(y);if(0<=ca&&B<=ca)return F.copy(N);O=B*Q-O*ca;if(0>=O&&0<=Q&&0>=ca)return Z=Q/(Q-ca),F.copy(G).addScaledVector(k,Z);Q=V*ca-B*U;if(0>=Q&&0<=U-V&&0<=B-ca)return p.subVectors(N,I),Z=(U-V)/(U-V+(B-ca)),F.copy(I).addScaledVector(p,Z);N=1/(Q+O+Z);I=O*N;Z*=N;return F.copy(G).addScaledVector(d,I).addScaledVector(k,Z)}}(),equals:function(d){return d.a.equals(this.a)&&d.b.equals(this.b)&&d.c.equals(this.c)}});tb.prototype=Object.create(Ka.prototype);tb.prototype.constructor=tb;tb.prototype.isMeshBasicMaterial=
!0;tb.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.color.copy(d.color);this.map=d.map;this.lightMap=d.lightMap;this.lightMapIntensity=d.lightMapIntensity;this.aoMap=d.aoMap;this.aoMapIntensity=d.aoMapIntensity;this.specularMap=d.specularMap;this.alphaMap=d.alphaMap;this.envMap=d.envMap;this.combine=d.combine;this.reflectivity=d.reflectivity;this.refractionRatio=d.refractionRatio;this.wireframe=d.wireframe;this.wireframeLinewidth=d.wireframeLinewidth;this.wireframeLinecap=d.wireframeLinecap;
this.wireframeLinejoin=d.wireframeLinejoin;this.skinning=d.skinning;this.morphTargets=d.morphTargets;return this};ac.prototype=Object.assign(Object.create(P.prototype),{constructor:ac,isMesh:!0,setDrawMode:function(d){this.drawMode=d},copy:function(d){P.prototype.copy.call(this,d);this.drawMode=d.drawMode;void 0!==d.morphTargetInfluences&&(this.morphTargetInfluences=d.morphTargetInfluences.slice());void 0!==d.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},d.morphTargetDictionary));
return this},updateMorphTargets:function(){var d=this.geometry;if(d.isBufferGeometry){d=d.morphAttributes;var k=Object.keys(d);if(0<k.length){var p=d[k[0]];if(void 0!==p)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},d=0,k=p.length;d<k;d++){var t=p[d].name||String(d);this.morphTargetInfluences.push(0);this.morphTargetDictionary[t]=d}}}else d=d.morphTargets,void 0!==d&&0<d.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},
raycast:function(){function d(ia,va,ma,na,ya,xa,Ga,Na){if(null===(1===va.side?na.intersectTriangle(Ga,xa,ya,!0,Na):na.intersectTriangle(ya,xa,Ga,2!==va.side,Na)))return null;ra.copy(Na);ra.applyMatrix4(ia.matrixWorld);va=ma.ray.origin.distanceTo(ra);return va<ma.near||va>ma.far?null:{distance:va,point:ra.clone(),object:ia}}function k(ia,va,ma,na,ya,xa,Ga,Na,Ha,Ma){y.fromBufferAttribute(ya,Na);B.fromBufferAttribute(ya,Ha);F.fromBufferAttribute(ya,Ma);ya=ia.morphTargetInfluences;if(va.morphTargets&&
xa&&ya){O.set(0,0,0);Q.set(0,0,0);V.set(0,0,0);for(var Pa=0,Za=xa.length;Pa<Za;Pa++){var ea=ya[Pa],ha=xa[Pa];0!==ea&&(G.fromBufferAttribute(ha,Na),I.fromBufferAttribute(ha,Ha),N.fromBufferAttribute(ha,Ma),O.addScaledVector(G.sub(y),ea),Q.addScaledVector(I.sub(B),ea),V.addScaledVector(N.sub(F),ea))}y.add(O);B.add(Q);F.add(V)}if(ia=d(ia,va,ma,na,y,B,F,la))Ga&&(U.fromBufferAttribute(Ga,Na),Z.fromBufferAttribute(Ga,Ha),ca.fromBufferAttribute(Ga,Ma),ia.uv=sb.getUV(la,y,B,F,U,Z,ca,new c)),Ga=new H(Na,Ha,
Ma),sb.getNormal(y,B,F,Ga.normal),ia.face=Ga;return ia}var p=new A,t=new jc,x=new u,y=new f,B=new f,F=new f,G=new f,I=new f,N=new f,O=new f,Q=new f,V=new f,U=new c,Z=new c,ca=new c,la=new f,ra=new f;return function(ia,va){var ma=this.geometry,na=this.material,ya=this.matrixWorld;if(void 0!==na&&(null===ma.boundingSphere&&ma.computeBoundingSphere(),x.copy(ma.boundingSphere),x.applyMatrix4(ya),!1!==ia.ray.intersectsSphere(x)&&(p.getInverse(ya),t.copy(ia.ray).applyMatrix4(p),null===ma.boundingBox||!1!==
t.intersectsBox(ma.boundingBox))))if(ma.isBufferGeometry){var xa=ma.index;ya=ma.attributes.position;var Ga=ma.morphAttributes.position,Na=ma.attributes.uv,Ha=ma.groups,Ma=ma.drawRange,Pa,Za;if(null!==xa)if(Array.isArray(na)){var ea=0;for(Pa=Ha.length;ea<Pa;ea++){var ha=Ha[ea];var ua=na[ha.materialIndex];var Ba=Math.max(ha.start,Ma.start);for(Za=ma=Math.min(ha.start+ha.count,Ma.start+Ma.count);Ba<Za;Ba+=3){ma=xa.getX(Ba);var Ja=xa.getX(Ba+1);var Ta=xa.getX(Ba+2);if(ma=k(this,ua,ia,t,ya,Ga,Na,ma,Ja,
Ta))ma.faceIndex=Math.floor(Ba/3),ma.face.materialIndex=ha.materialIndex,va.push(ma)}}}else for(Ba=Math.max(0,Ma.start),ma=Math.min(xa.count,Ma.start+Ma.count),ea=Ba,Pa=ma;ea<Pa;ea+=3){if(ma=xa.getX(ea),Ja=xa.getX(ea+1),Ta=xa.getX(ea+2),ma=k(this,na,ia,t,ya,Ga,Na,ma,Ja,Ta))ma.faceIndex=Math.floor(ea/3),va.push(ma)}else if(void 0!==ya)if(Array.isArray(na))for(ea=0,Pa=Ha.length;ea<Pa;ea++)for(ha=Ha[ea],ua=na[ha.materialIndex],Ba=Math.max(ha.start,Ma.start),Za=ma=Math.min(ha.start+ha.count,Ma.start+
Ma.count);Ba<Za;Ba+=3){if(ma=Ba,Ja=Ba+1,Ta=Ba+2,ma=k(this,ua,ia,t,ya,Ga,Na,ma,Ja,Ta))ma.faceIndex=Math.floor(Ba/3),ma.face.materialIndex=ha.materialIndex,va.push(ma)}else for(Ba=Math.max(0,Ma.start),ma=Math.min(ya.count,Ma.start+Ma.count),ea=Ba,Pa=ma;ea<Pa;ea+=3)if(ma=ea,Ja=ea+1,Ta=ea+2,ma=k(this,na,ia,t,ya,Ga,Na,ma,Ja,Ta))ma.faceIndex=Math.floor(ea/3),va.push(ma)}else if(ma.isGeometry)for(ya=Array.isArray(na),Ga=ma.vertices,Na=ma.faces,ma=ma.faceVertexUvs[0],0<ma.length&&(xa=ma),Pa=0,ha=Na.length;Pa<
ha;Pa++)if(ua=Na[Pa],ma=ya?na[ua.materialIndex]:na,void 0!==ma&&(Ha=Ga[ua.a],Ma=Ga[ua.b],ea=Ga[ua.c],ma=d(this,ma,ia,t,Ha,Ma,ea,la)))xa&&xa[Pa]&&(Ba=xa[Pa],U.copy(Ba[0]),Z.copy(Ba[1]),ca.copy(Ba[2]),ma.uv=sb.getUV(la,Ha,Ma,ea,U,Z,ca,new c)),ma.face=ua,ma.faceIndex=Pa,va.push(ma)}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Pd.prototype=Object.create(h.prototype);Pd.prototype.constructor=Pd;Pd.prototype.isCubeTexture=!0;Object.defineProperty(Pd.prototype,
"images",{get:function(){return this.image},set:function(d){this.image=d}});of.prototype=Object.create(h.prototype);of.prototype.constructor=of;of.prototype.isDataTexture2DArray=!0;pf.prototype=Object.create(h.prototype);pf.prototype.constructor=pf;pf.prototype.isDataTexture3D=!0;var Cl=new h,qo=new of,so=new pf,Dl=new Pd,wl=[],yl=[],Bl=new Float32Array(16),Al=new Float32Array(9),zl=new Float32Array(4);Hl.prototype.updateCache=function(d){var k=this.cache;d instanceof Float32Array&&k.length!==d.length&&
(this.cache=new Float32Array(d.length));vc(k,d)};Il.prototype.setValue=function(d,k,p){for(var t=this.seq,x=0,y=t.length;x!==y;++x){var B=t[x];B.setValue(d,k[B.id],p)}};var Yi=/([\w\d_]+)(\])?(\[|\.)?/g;ge.prototype.setValue=function(d,k,p,t){k=this.map[k];void 0!==k&&k.setValue(d,p,t)};ge.prototype.setOptional=function(d,k,p){k=k[p];void 0!==k&&this.setValue(d,p,k)};ge.upload=function(d,k,p,t){for(var x=0,y=k.length;x!==y;++x){var B=k[x],F=p[B.id];!1!==F.needsUpdate&&B.setValue(d,F.value,t)}};ge.seqWithValue=
function(d,k){for(var p=[],t=0,x=d.length;t!==x;++t){var y=d[t];y.id in k&&p.push(y)}return p};var No=0,Vo=0;he.prototype=Object.create(Ka.prototype);he.prototype.constructor=he;he.prototype.isMeshDepthMaterial=!0;he.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.depthPacking=d.depthPacking;this.skinning=d.skinning;this.morphTargets=d.morphTargets;this.map=d.map;this.alphaMap=d.alphaMap;this.displacementMap=d.displacementMap;this.displacementScale=d.displacementScale;this.displacementBias=
d.displacementBias;this.wireframe=d.wireframe;this.wireframeLinewidth=d.wireframeLinewidth;return this};ie.prototype=Object.create(Ka.prototype);ie.prototype.constructor=ie;ie.prototype.isMeshDistanceMaterial=!0;ie.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.referencePosition.copy(d.referencePosition);this.nearDistance=d.nearDistance;this.farDistance=d.farDistance;this.skinning=d.skinning;this.morphTargets=d.morphTargets;this.map=d.map;this.alphaMap=d.alphaMap;this.displacementMap=
d.displacementMap;this.displacementScale=d.displacementScale;this.displacementBias=d.displacementBias;return this};rf.prototype=Object.assign(Object.create(P.prototype),{constructor:rf,isGroup:!0});Ad.prototype=Object.assign(Object.create(P.prototype),{constructor:Ad,isCamera:!0,copy:function(d,k){P.prototype.copy.call(this,d,k);this.matrixWorldInverse.copy(d.matrixWorldInverse);this.projectionMatrix.copy(d.projectionMatrix);this.projectionMatrixInverse.copy(d.projectionMatrixInverse);return this},
getWorldDirection:function(d){void 0===d&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),d=new f);this.updateMatrixWorld(!0);var k=this.matrixWorld.elements;return d.set(-k[8],-k[9],-k[10]).normalize()},updateMatrixWorld:function(d){P.prototype.updateMatrixWorld.call(this,d);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});kc.prototype=Object.assign(Object.create(Ad.prototype),{constructor:kc,isPerspectiveCamera:!0,
copy:function(d,k){Ad.prototype.copy.call(this,d,k);this.fov=d.fov;this.zoom=d.zoom;this.near=d.near;this.far=d.far;this.focus=d.focus;this.aspect=d.aspect;this.view=null===d.view?null:Object.assign({},d.view);this.filmGauge=d.filmGauge;this.filmOffset=d.filmOffset;return this},setFocalLength:function(d){this.fov=2*mb.RAD2DEG*Math.atan(.5*this.getFilmHeight()/d);this.updateProjectionMatrix()},getFocalLength:function(){return.5*this.getFilmHeight()/Math.tan(.5*mb.DEG2RAD*this.fov)},getEffectiveFOV:function(){return 2*
mb.RAD2DEG*Math.atan(Math.tan(.5*mb.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(d,k,p,t,x,y){this.aspect=d/k;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=d;this.view.fullHeight=k;this.view.offsetX=p;this.view.offsetY=t;this.view.width=x;this.view.height=
y;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var d=this.near,k=d*Math.tan(.5*mb.DEG2RAD*this.fov)/this.zoom,p=2*k,t=this.aspect*p,x=-.5*t,y=this.view;if(null!==this.view&&this.view.enabled){var B=y.fullWidth,F=y.fullHeight;x+=y.offsetX*t/B;k-=y.offsetY*p/F;t*=y.width/B;p*=y.height/F}y=this.filmOffset;0!==y&&(x+=d*y/this.getFilmWidth());this.projectionMatrix.makePerspective(x,x+
t,k,k-p,d,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(d){d=P.prototype.toJSON.call(this,d);d.object.fov=this.fov;d.object.zoom=this.zoom;d.object.near=this.near;d.object.far=this.far;d.object.focus=this.focus;d.object.aspect=this.aspect;null!==this.view&&(d.object.view=Object.assign({},this.view));d.object.filmGauge=this.filmGauge;d.object.filmOffset=this.filmOffset;return d}});yg.prototype=Object.assign(Object.create(kc.prototype),{constructor:yg,isArrayCamera:!0});
var Tl=new f,Ul=new f;Object.assign(Kh.prototype,{isFogExp2:!0,clone:function(){return new Kh(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});Object.assign(Lh.prototype,{isFog:!0,clone:function(){return new Lh(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});Mh.prototype=Object.assign(Object.create(P.prototype),{constructor:Mh,isScene:!0,copy:function(d,
k){P.prototype.copy.call(this,d,k);null!==d.background&&(this.background=d.background.clone());null!==d.fog&&(this.fog=d.fog.clone());null!==d.overrideMaterial&&(this.overrideMaterial=d.overrideMaterial.clone());this.autoUpdate=d.autoUpdate;this.matrixAutoUpdate=d.matrixAutoUpdate;return this},toJSON:function(d){var k=P.prototype.toJSON.call(this,d);null!==this.background&&(k.object.background=this.background.toJSON(d));null!==this.fog&&(k.object.fog=this.fog.toJSON());return k},dispose:function(){this.dispatchEvent({type:"dispose"})}});
Object.defineProperty(Ge.prototype,"needsUpdate",{set:function(d){!0===d&&this.version++}});Object.assign(Ge.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(d){if(Array.isArray(d))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==d?d.length/this.stride:0;this.array=d;return this},setDynamic:function(d){this.dynamic=d;return this},copy:function(d){this.array=new d.array.constructor(d.array);this.count=d.count;this.stride=
d.stride;this.dynamic=d.dynamic;return this},copyAt:function(d,k,p){d*=this.stride;p*=k.stride;for(var t=0,x=this.stride;t<x;t++)this.array[d+t]=k.array[p+t];return this},set:function(d,k){void 0===k&&(k=0);this.array.set(d,k);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(d){this.onUploadCallback=d;return this}});Object.defineProperties(zg.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(zg.prototype,
{isInterleavedBufferAttribute:!0,setX:function(d,k){this.data.array[d*this.data.stride+this.offset]=k;return this},setY:function(d,k){this.data.array[d*this.data.stride+this.offset+1]=k;return this},setZ:function(d,k){this.data.array[d*this.data.stride+this.offset+2]=k;return this},setW:function(d,k){this.data.array[d*this.data.stride+this.offset+3]=k;return this},getX:function(d){return this.data.array[d*this.data.stride+this.offset]},getY:function(d){return this.data.array[d*this.data.stride+this.offset+
1]},getZ:function(d){return this.data.array[d*this.data.stride+this.offset+2]},getW:function(d){return this.data.array[d*this.data.stride+this.offset+3]},setXY:function(d,k,p){d=d*this.data.stride+this.offset;this.data.array[d+0]=k;this.data.array[d+1]=p;return this},setXYZ:function(d,k,p,t){d=d*this.data.stride+this.offset;this.data.array[d+0]=k;this.data.array[d+1]=p;this.data.array[d+2]=t;return this},setXYZW:function(d,k,p,t,x){d=d*this.data.stride+this.offset;this.data.array[d+0]=k;this.data.array[d+
1]=p;this.data.array[d+2]=t;this.data.array[d+3]=x;return this}});ke.prototype=Object.create(Ka.prototype);ke.prototype.constructor=ke;ke.prototype.isSpriteMaterial=!0;ke.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.color.copy(d.color);this.map=d.map;this.rotation=d.rotation;this.sizeAttenuation=d.sizeAttenuation;return this};var wf;Ag.prototype=Object.assign(Object.create(P.prototype),{constructor:Ag,isSprite:!0,raycast:function(){function d(V,U,Z,ca,la,ra){x.subVectors(V,Z).addScalar(.5).multiply(ca);
void 0!==la?(y.x=ra*x.x-la*x.y,y.y=la*x.x+ra*x.y):y.copy(x);V.copy(U);V.x+=y.x;V.y+=y.y;V.applyMatrix4(B)}var k=new f,p=new f,t=new f,x=new c,y=new c,B=new A,F=new f,G=new f,I=new f,N=new c,O=new c,Q=new c;return function(V,U){p.setFromMatrixScale(this.matrixWorld);B.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld);t.setFromMatrixPosition(this.modelViewMatrix);var Z=this.material.rotation;if(0!==Z){var ca=Math.cos(Z);var la=Math.sin(Z)}Z=this.center;d(F.set(-.5,-.5,0),t,Z,p,la,ca);d(G.set(.5,
-.5,0),t,Z,p,la,ca);d(I.set(.5,.5,0),t,Z,p,la,ca);N.set(0,0);O.set(1,0);Q.set(1,1);var ra=V.ray.intersectTriangle(F,G,I,!1,k);if(null===ra&&(d(G.set(-.5,.5,0),t,Z,p,la,ca),O.set(0,1),ra=V.ray.intersectTriangle(F,I,G,!1,k),null===ra))return;la=V.ray.origin.distanceTo(k);la<V.near||la>V.far||U.push({distance:la,point:k.clone(),uv:sb.getUV(k,F,G,I,N,O,Q,new c),face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)},copy:function(d){P.prototype.copy.call(this,
d);void 0!==d.center&&this.center.copy(d.center);return this}});Bg.prototype=Object.assign(Object.create(P.prototype),{constructor:Bg,isLOD:!0,copy:function(d){P.prototype.copy.call(this,d,!1);d=d.levels;for(var k=0,p=d.length;k<p;k++){var t=d[k];this.addLevel(t.object.clone(),t.distance)}return this},addLevel:function(d,k){void 0===k&&(k=0);k=Math.abs(k);for(var p=this.levels,t=0;t<p.length&&!(k<p[t].distance);t++);p.splice(t,0,{distance:k,object:d});this.add(d);return this},getObjectForDistance:function(d){for(var k=
this.levels,p=1,t=k.length;p<t&&!(d<k[p].distance);p++);return k[p-1].object},raycast:function(){var d=new f;return function(k,p){d.setFromMatrixPosition(this.matrixWorld);this.getObjectForDistance(k.ray.origin.distanceTo(d)).raycast(k,p)}}(),update:function(){var d=new f,k=new f;return function(p){var t=this.levels;if(1<t.length){d.setFromMatrixPosition(p.matrixWorld);k.setFromMatrixPosition(this.matrixWorld);p=d.distanceTo(k);t[0].object.visible=!0;for(var x=1,y=t.length;x<y;x++)if(p>=t[x].distance)t[x-
1].object.visible=!1,t[x].object.visible=!0;else break;for(;x<y;x++)t[x].object.visible=!1}}}(),toJSON:function(d){d=P.prototype.toJSON.call(this,d);d.object.levels=[];for(var k=this.levels,p=0,t=k.length;p<t;p++){var x=k[p];d.object.levels.push({object:x.object.uuid,distance:x.distance})}return d}});Cg.prototype=Object.assign(Object.create(ac.prototype),{constructor:Cg,isSkinnedMesh:!0,bind:function(d,k){this.skeleton=d;void 0===k&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),k=
this.matrixWorld);this.bindMatrix.copy(k);this.bindMatrixInverse.getInverse(k)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var d=new l,k=this.geometry.attributes.skinWeight,p=0,t=k.count;p<t;p++){d.x=k.getX(p);d.y=k.getY(p);d.z=k.getZ(p);d.w=k.getW(p);var x=1/d.manhattanLength();Infinity!==x?d.multiplyScalar(x):d.set(1,0,0,0);k.setXYZW(p,d.x,d.y,d.z,d.w)}},updateMatrixWorld:function(d){ac.prototype.updateMatrixWorld.call(this,d);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):
"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Object.assign(Nh.prototype,{calculateInverses:function(){this.boneInverses=[];for(var d=0,k=this.bones.length;d<k;d++){var p=new A;this.bones[d]&&p.getInverse(this.bones[d].matrixWorld);this.boneInverses.push(p)}},pose:function(){var d,k;var p=0;for(k=this.bones.length;p<
k;p++)(d=this.bones[p])&&d.matrixWorld.getInverse(this.boneInverses[p]);p=0;for(k=this.bones.length;p<k;p++)if(d=this.bones[p])d.parent&&d.parent.isBone?(d.matrix.getInverse(d.parent.matrixWorld),d.matrix.multiply(d.matrixWorld)):d.matrix.copy(d.matrixWorld),d.matrix.decompose(d.position,d.quaternion,d.scale)},update:function(){var d=new A,k=new A;return function(){for(var p=this.bones,t=this.boneInverses,x=this.boneMatrices,y=this.boneTexture,B=0,F=p.length;B<F;B++)d.multiplyMatrices(p[B]?p[B].matrixWorld:
k,t[B]),d.toArray(x,16*B);void 0!==y&&(y.needsUpdate=!0)}}(),clone:function(){return new Nh(this.bones,this.boneInverses)},getBoneByName:function(d){for(var k=0,p=this.bones.length;k<p;k++){var t=this.bones[k];if(t.name===d)return t}}});cj.prototype=Object.assign(Object.create(P.prototype),{constructor:cj,isBone:!0});Nb.prototype=Object.create(Ka.prototype);Nb.prototype.constructor=Nb;Nb.prototype.isLineBasicMaterial=!0;Nb.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.color.copy(d.color);
this.linewidth=d.linewidth;this.linecap=d.linecap;this.linejoin=d.linejoin;return this};xc.prototype=Object.assign(Object.create(P.prototype),{constructor:xc,isLine:!0,computeLineDistances:function(){var d=new f,k=new f;return function(){var p=this.geometry;if(p.isBufferGeometry)if(null===p.index){for(var t=p.attributes.position,x=[0],y=1,B=t.count;y<B;y++)d.fromBufferAttribute(t,y-1),k.fromBufferAttribute(t,y),x[y]=x[y-1],x[y]+=d.distanceTo(k);p.addAttribute("lineDistance",new da(x,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else if(p.isGeometry)for(t=p.vertices,x=p.lineDistances,x[0]=0,y=1,B=t.length;y<B;y++)x[y]=x[y-1],x[y]+=t[y-1].distanceTo(t[y]);return this}}(),raycast:function(){var d=new A,k=new jc,p=new u;return function(t,x){var y=t.linePrecision,B=this.geometry,F=this.matrixWorld;null===B.boundingSphere&&B.computeBoundingSphere();p.copy(B.boundingSphere);p.applyMatrix4(F);p.radius+=y;if(!1!==t.ray.intersectsSphere(p)){d.getInverse(F);k.copy(t.ray).applyMatrix4(d);y/=(this.scale.x+this.scale.y+this.scale.z)/
3;y*=y;var G=new f,I=new f;F=new f;var N=new f,O=this&&this.isLineSegments?2:1;if(B.isBufferGeometry){var Q=B.index,V=B.attributes.position.array;if(null!==Q){Q=Q.array;B=0;for(var U=Q.length-1;B<U;B+=O){var Z=Q[B+1];G.fromArray(V,3*Q[B]);I.fromArray(V,3*Z);Z=k.distanceSqToSegment(G,I,N,F);Z>y||(N.applyMatrix4(this.matrixWorld),Z=t.ray.origin.distanceTo(N),Z<t.near||Z>t.far||x.push({distance:Z,point:F.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this}))}}else for(B=
0,U=V.length/3-1;B<U;B+=O)G.fromArray(V,3*B),I.fromArray(V,3*B+3),Z=k.distanceSqToSegment(G,I,N,F),Z>y||(N.applyMatrix4(this.matrixWorld),Z=t.ray.origin.distanceTo(N),Z<t.near||Z>t.far||x.push({distance:Z,point:F.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this}))}else if(B.isGeometry)for(G=B.vertices,I=G.length,B=0;B<I-1;B+=O)Z=k.distanceSqToSegment(G[B],G[B+1],N,F),Z>y||(N.applyMatrix4(this.matrixWorld),Z=t.ray.origin.distanceTo(N),Z<t.near||Z>t.far||x.push({distance:Z,
point:F.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Wb.prototype=Object.assign(Object.create(xc.prototype),{constructor:Wb,isLineSegments:!0,computeLineDistances:function(){var d=new f,k=new f;return function(){var p=this.geometry;if(p.isBufferGeometry)if(null===p.index){for(var t=p.attributes.position,x=[],y=0,B=t.count;y<B;y+=2)d.fromBufferAttribute(t,y),k.fromBufferAttribute(t,
y+1),x[y]=0===y?0:x[y-1],x[y+1]=x[y]+d.distanceTo(k);p.addAttribute("lineDistance",new da(x,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(p.isGeometry)for(t=p.vertices,x=p.lineDistances,y=0,B=t.length;y<B;y+=2)d.copy(t[y]),k.copy(t[y+1]),x[y]=0===y?0:x[y-1],x[y+1]=x[y]+d.distanceTo(k);return this}}()});Oh.prototype=Object.assign(Object.create(xc.prototype),{constructor:Oh,isLineLoop:!0});jd.prototype=Object.create(Ka.prototype);
jd.prototype.constructor=jd;jd.prototype.isPointsMaterial=!0;jd.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.color.copy(d.color);this.map=d.map;this.size=d.size;this.sizeAttenuation=d.sizeAttenuation;this.morphTargets=d.morphTargets;return this};xf.prototype=Object.assign(Object.create(P.prototype),{constructor:xf,isPoints:!0,raycast:function(){var d=new A,k=new jc,p=new u;return function(t,x){function y(ca,la){var ra=k.distanceSqToPoint(ca);ra<N&&(k.closestPointToPoint(ca,O),O.applyMatrix4(G),
ca=t.ray.origin.distanceTo(O),ca<t.near||ca>t.far||x.push({distance:ca,distanceToRay:Math.sqrt(ra),point:O.clone(),index:la,face:null,object:B}))}var B=this,F=this.geometry,G=this.matrixWorld,I=t.params.Points.threshold;null===F.boundingSphere&&F.computeBoundingSphere();p.copy(F.boundingSphere);p.applyMatrix4(G);p.radius+=I;if(!1!==t.ray.intersectsSphere(p)){d.getInverse(G);k.copy(t.ray).applyMatrix4(d);I/=(this.scale.x+this.scale.y+this.scale.z)/3;var N=I*I;I=new f;var O=new f;if(F.isBufferGeometry){var Q=
F.index;F=F.attributes.position.array;if(null!==Q){var V=Q.array;Q=0;for(var U=V.length;Q<U;Q++){var Z=V[Q];I.fromArray(F,3*Z);y(I,Z)}}else for(Q=0,V=F.length/3;Q<V;Q++)I.fromArray(F,3*Q),y(I,Q)}else for(I=F.vertices,Q=0,V=I.length;Q<V;Q++)y(I[Q],Q)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});dj.prototype=Object.assign(Object.create(h.prototype),{constructor:dj,isVideoTexture:!0,update:function(){var d=this.image;d.readyState>=d.HAVE_CURRENT_DATA&&
(this.needsUpdate=!0)}});yf.prototype=Object.create(h.prototype);yf.prototype.constructor=yf;yf.prototype.isCompressedTexture=!0;Dg.prototype=Object.create(h.prototype);Dg.prototype.constructor=Dg;Dg.prototype.isCanvasTexture=!0;Eg.prototype=Object.create(h.prototype);Eg.prototype.constructor=Eg;Eg.prototype.isDepthTexture=!0;zf.prototype=Object.create(ka.prototype);zf.prototype.constructor=zf;Fg.prototype=Object.create(S.prototype);Fg.prototype.constructor=Fg;Af.prototype=Object.create(ka.prototype);
Af.prototype.constructor=Af;Gg.prototype=Object.create(S.prototype);Gg.prototype.constructor=Gg;Mc.prototype=Object.create(ka.prototype);Mc.prototype.constructor=Mc;Hg.prototype=Object.create(S.prototype);Hg.prototype.constructor=Hg;Bf.prototype=Object.create(Mc.prototype);Bf.prototype.constructor=Bf;Ig.prototype=Object.create(S.prototype);Ig.prototype.constructor=Ig;He.prototype=Object.create(Mc.prototype);He.prototype.constructor=He;Jg.prototype=Object.create(S.prototype);Jg.prototype.constructor=
Jg;Cf.prototype=Object.create(Mc.prototype);Cf.prototype.constructor=Cf;Kg.prototype=Object.create(S.prototype);Kg.prototype.constructor=Kg;Df.prototype=Object.create(Mc.prototype);Df.prototype.constructor=Df;Lg.prototype=Object.create(S.prototype);Lg.prototype.constructor=Lg;Ie.prototype=Object.create(ka.prototype);Ie.prototype.constructor=Ie;Ie.prototype.toJSON=function(){var d=ka.prototype.toJSON.call(this);d.path=this.parameters.path.toJSON();return d};Mg.prototype=Object.create(S.prototype);
Mg.prototype.constructor=Mg;Ef.prototype=Object.create(ka.prototype);Ef.prototype.constructor=Ef;Ng.prototype=Object.create(S.prototype);Ng.prototype.constructor=Ng;Ff.prototype=Object.create(ka.prototype);Ff.prototype.constructor=Ff;var ip={triangulate:function(d,k,p){p=p||2;var t=k&&k.length,x=t?k[0]*p:d.length,y=cm(d,0,x,p,!0),B=[];if(!y)return B;var F;if(t){var G=p;t=[];var I;var N=0;for(I=k.length;N<I;N++){var O=k[N]*G;var Q=N<I-1?k[N+1]*G:d.length;O=cm(d,O,Q,G,!1);O===O.next&&(O.steiner=!0);
t.push(cp(O))}t.sort(ap);for(N=0;N<t.length;N++){k=t[N];G=y;if(G=bp(k,G))k=fm(G,k),Pg(k,k.next);y=Pg(y,y.next)}}if(d.length>80*p){var V=F=d[0];var U=t=d[1];for(G=p;G<x;G+=p)N=d[G],k=d[G+1],N<V&&(V=N),k<U&&(U=k),N>F&&(F=N),k>t&&(t=k);F=Math.max(F-V,t-U);F=0!==F?1/F:0}Qg(y,B,p,V,U,F);return B}},Sd={area:function(d){for(var k=d.length,p=0,t=k-1,x=0;x<k;t=x++)p+=d[t].x*d[x].y-d[x].x*d[t].y;return.5*p},isClockWise:function(d){return 0>Sd.area(d)},triangulateShape:function(d,k){var p=[],t=[],x=[];gm(d);
hm(p,d);var y=d.length;k.forEach(gm);for(d=0;d<k.length;d++)t.push(y),y+=k[d].length,hm(p,k[d]);k=ip.triangulate(p,t);for(d=0;d<k.length;d+=3)x.push(k.slice(d,d+3));return x}};Ke.prototype=Object.create(S.prototype);Ke.prototype.constructor=Ke;Ke.prototype.toJSON=function(){var d=S.prototype.toJSON.call(this);return im(this.parameters.shapes,this.parameters.options,d)};Dd.prototype=Object.create(ka.prototype);Dd.prototype.constructor=Dd;Dd.prototype.toJSON=function(){var d=ka.prototype.toJSON.call(this);
return im(this.parameters.shapes,this.parameters.options,d)};var dp={generateTopUV:function(d,k,p,t,x){d=k[3*t];t=k[3*t+1];var y=k[3*x];x=k[3*x+1];return[new c(k[3*p],k[3*p+1]),new c(d,t),new c(y,x)]},generateSideWallUV:function(d,k,p,t,x,y){d=k[3*p];var B=k[3*p+1];p=k[3*p+2];var F=k[3*t],G=k[3*t+1];t=k[3*t+2];var I=k[3*x],N=k[3*x+1];x=k[3*x+2];var O=k[3*y],Q=k[3*y+1];k=k[3*y+2];return.01>Math.abs(B-G)?[new c(d,1-p),new c(F,1-t),new c(I,1-x),new c(O,1-k)]:[new c(B,1-p),new c(G,1-t),new c(N,1-x),new c(Q,
1-k)]}};Sg.prototype=Object.create(S.prototype);Sg.prototype.constructor=Sg;Gf.prototype=Object.create(Dd.prototype);Gf.prototype.constructor=Gf;Tg.prototype=Object.create(S.prototype);Tg.prototype.constructor=Tg;le.prototype=Object.create(ka.prototype);le.prototype.constructor=le;Ug.prototype=Object.create(S.prototype);Ug.prototype.constructor=Ug;Hf.prototype=Object.create(ka.prototype);Hf.prototype.constructor=Hf;Vg.prototype=Object.create(S.prototype);Vg.prototype.constructor=Vg;If.prototype=Object.create(ka.prototype);
If.prototype.constructor=If;Le.prototype=Object.create(S.prototype);Le.prototype.constructor=Le;Le.prototype.toJSON=function(){var d=S.prototype.toJSON.call(this);return jm(this.parameters.shapes,d)};Me.prototype=Object.create(ka.prototype);Me.prototype.constructor=Me;Me.prototype.toJSON=function(){var d=ka.prototype.toJSON.call(this);return jm(this.parameters.shapes,d)};Jf.prototype=Object.create(ka.prototype);Jf.prototype.constructor=Jf;Ne.prototype=Object.create(S.prototype);Ne.prototype.constructor=
Ne;Td.prototype=Object.create(ka.prototype);Td.prototype.constructor=Td;Wg.prototype=Object.create(Ne.prototype);Wg.prototype.constructor=Wg;Xg.prototype=Object.create(Td.prototype);Xg.prototype.constructor=Xg;Yg.prototype=Object.create(S.prototype);Yg.prototype.constructor=Yg;Kf.prototype=Object.create(ka.prototype);Kf.prototype.constructor=Kf;var Ic=Object.freeze({WireframeGeometry:zf,ParametricGeometry:Fg,ParametricBufferGeometry:Af,TetrahedronGeometry:Hg,TetrahedronBufferGeometry:Bf,OctahedronGeometry:Ig,
OctahedronBufferGeometry:He,IcosahedronGeometry:Jg,IcosahedronBufferGeometry:Cf,DodecahedronGeometry:Kg,DodecahedronBufferGeometry:Df,PolyhedronGeometry:Gg,PolyhedronBufferGeometry:Mc,TubeGeometry:Lg,TubeBufferGeometry:Ie,TorusKnotGeometry:Mg,TorusKnotBufferGeometry:Ef,TorusGeometry:Ng,TorusBufferGeometry:Ff,TextGeometry:Sg,TextBufferGeometry:Gf,SphereGeometry:Tg,SphereBufferGeometry:le,RingGeometry:Ug,RingBufferGeometry:Hf,PlaneGeometry:Ea,PlaneBufferGeometry:La,LatheGeometry:Vg,LatheBufferGeometry:If,
ShapeGeometry:Le,ShapeBufferGeometry:Me,ExtrudeGeometry:Ke,ExtrudeBufferGeometry:Dd,EdgesGeometry:Jf,ConeGeometry:Wg,ConeBufferGeometry:Xg,CylinderGeometry:Ne,CylinderBufferGeometry:Td,CircleGeometry:Yg,CircleBufferGeometry:Kf,BoxGeometry:Da,BoxBufferGeometry:Oa});Oe.prototype=Object.create(Ka.prototype);Oe.prototype.constructor=Oe;Oe.prototype.isShadowMaterial=!0;Oe.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.color.copy(d.color);return this};Lf.prototype=Object.create(vb.prototype);
Lf.prototype.constructor=Lf;Lf.prototype.isRawShaderMaterial=!0;Ed.prototype=Object.create(Ka.prototype);Ed.prototype.constructor=Ed;Ed.prototype.isMeshStandardMaterial=!0;Ed.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.defines={STANDARD:""};this.color.copy(d.color);this.roughness=d.roughness;this.metalness=d.metalness;this.map=d.map;this.lightMap=d.lightMap;this.lightMapIntensity=d.lightMapIntensity;this.aoMap=d.aoMap;this.aoMapIntensity=d.aoMapIntensity;this.emissive.copy(d.emissive);
this.emissiveMap=d.emissiveMap;this.emissiveIntensity=d.emissiveIntensity;this.bumpMap=d.bumpMap;this.bumpScale=d.bumpScale;this.normalMap=d.normalMap;this.normalMapType=d.normalMapType;this.normalScale.copy(d.normalScale);this.displacementMap=d.displacementMap;this.displacementScale=d.displacementScale;this.displacementBias=d.displacementBias;this.roughnessMap=d.roughnessMap;this.metalnessMap=d.metalnessMap;this.alphaMap=d.alphaMap;this.envMap=d.envMap;this.envMapIntensity=d.envMapIntensity;this.refractionRatio=
d.refractionRatio;this.wireframe=d.wireframe;this.wireframeLinewidth=d.wireframeLinewidth;this.wireframeLinecap=d.wireframeLinecap;this.wireframeLinejoin=d.wireframeLinejoin;this.skinning=d.skinning;this.morphTargets=d.morphTargets;this.morphNormals=d.morphNormals;return this};Pe.prototype=Object.create(Ed.prototype);Pe.prototype.constructor=Pe;Pe.prototype.isMeshPhysicalMaterial=!0;Pe.prototype.copy=function(d){Ed.prototype.copy.call(this,d);this.defines={PHYSICAL:""};this.reflectivity=d.reflectivity;
this.clearCoat=d.clearCoat;this.clearCoatRoughness=d.clearCoatRoughness;return this};kd.prototype=Object.create(Ka.prototype);kd.prototype.constructor=kd;kd.prototype.isMeshPhongMaterial=!0;kd.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.color.copy(d.color);this.specular.copy(d.specular);this.shininess=d.shininess;this.map=d.map;this.lightMap=d.lightMap;this.lightMapIntensity=d.lightMapIntensity;this.aoMap=d.aoMap;this.aoMapIntensity=d.aoMapIntensity;this.emissive.copy(d.emissive);
this.emissiveMap=d.emissiveMap;this.emissiveIntensity=d.emissiveIntensity;this.bumpMap=d.bumpMap;this.bumpScale=d.bumpScale;this.normalMap=d.normalMap;this.normalMapType=d.normalMapType;this.normalScale.copy(d.normalScale);this.displacementMap=d.displacementMap;this.displacementScale=d.displacementScale;this.displacementBias=d.displacementBias;this.specularMap=d.specularMap;this.alphaMap=d.alphaMap;this.envMap=d.envMap;this.combine=d.combine;this.reflectivity=d.reflectivity;this.refractionRatio=d.refractionRatio;
this.wireframe=d.wireframe;this.wireframeLinewidth=d.wireframeLinewidth;this.wireframeLinecap=d.wireframeLinecap;this.wireframeLinejoin=d.wireframeLinejoin;this.skinning=d.skinning;this.morphTargets=d.morphTargets;this.morphNormals=d.morphNormals;return this};Qe.prototype=Object.create(kd.prototype);Qe.prototype.constructor=Qe;Qe.prototype.isMeshToonMaterial=!0;Qe.prototype.copy=function(d){kd.prototype.copy.call(this,d);this.gradientMap=d.gradientMap;return this};Re.prototype=Object.create(Ka.prototype);
Re.prototype.constructor=Re;Re.prototype.isMeshNormalMaterial=!0;Re.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.bumpMap=d.bumpMap;this.bumpScale=d.bumpScale;this.normalMap=d.normalMap;this.normalMapType=d.normalMapType;this.normalScale.copy(d.normalScale);this.displacementMap=d.displacementMap;this.displacementScale=d.displacementScale;this.displacementBias=d.displacementBias;this.wireframe=d.wireframe;this.wireframeLinewidth=d.wireframeLinewidth;this.skinning=d.skinning;this.morphTargets=
d.morphTargets;this.morphNormals=d.morphNormals;return this};Se.prototype=Object.create(Ka.prototype);Se.prototype.constructor=Se;Se.prototype.isMeshLambertMaterial=!0;Se.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.color.copy(d.color);this.map=d.map;this.lightMap=d.lightMap;this.lightMapIntensity=d.lightMapIntensity;this.aoMap=d.aoMap;this.aoMapIntensity=d.aoMapIntensity;this.emissive.copy(d.emissive);this.emissiveMap=d.emissiveMap;this.emissiveIntensity=d.emissiveIntensity;this.specularMap=
d.specularMap;this.alphaMap=d.alphaMap;this.envMap=d.envMap;this.combine=d.combine;this.reflectivity=d.reflectivity;this.refractionRatio=d.refractionRatio;this.wireframe=d.wireframe;this.wireframeLinewidth=d.wireframeLinewidth;this.wireframeLinecap=d.wireframeLinecap;this.wireframeLinejoin=d.wireframeLinejoin;this.skinning=d.skinning;this.morphTargets=d.morphTargets;this.morphNormals=d.morphNormals;return this};Te.prototype=Object.create(Ka.prototype);Te.prototype.constructor=Te;Te.prototype.isMeshMatcapMaterial=
!0;Te.prototype.copy=function(d){Ka.prototype.copy.call(this,d);this.defines={MATCAP:""};this.color.copy(d.color);this.matcap=d.matcap;this.map=d.map;this.bumpMap=d.bumpMap;this.bumpScale=d.bumpScale;this.normalMap=d.normalMap;this.normalMapType=d.normalMapType;this.normalScale.copy(d.normalScale);this.displacementMap=d.displacementMap;this.displacementScale=d.displacementScale;this.displacementBias=d.displacementBias;this.alphaMap=d.alphaMap;this.skinning=d.skinning;this.morphTargets=d.morphTargets;
this.morphNormals=d.morphNormals;return this};Ue.prototype=Object.create(Nb.prototype);Ue.prototype.constructor=Ue;Ue.prototype.isLineDashedMaterial=!0;Ue.prototype.copy=function(d){Nb.prototype.copy.call(this,d);this.scale=d.scale;this.dashSize=d.dashSize;this.gapSize=d.gapSize;return this};var jp=Object.freeze({ShadowMaterial:Oe,SpriteMaterial:ke,RawShaderMaterial:Lf,ShaderMaterial:vb,PointsMaterial:jd,MeshPhysicalMaterial:Pe,MeshStandardMaterial:Ed,MeshPhongMaterial:kd,MeshToonMaterial:Qe,MeshNormalMaterial:Re,
MeshLambertMaterial:Se,MeshDepthMaterial:he,MeshDistanceMaterial:ie,MeshBasicMaterial:tb,MeshMatcapMaterial:Te,LineDashedMaterial:Ue,LineBasicMaterial:Nb,Material:Ka}),qc={arraySlice:function(d,k,p){return qc.isTypedArray(d)?new d.constructor(d.subarray(k,void 0!==p?p:d.length)):d.slice(k,p)},convertArray:function(d,k,p){return!d||!p&&d.constructor===k?d:"number"===typeof k.BYTES_PER_ELEMENT?new k(d):Array.prototype.slice.call(d)},isTypedArray:function(d){return ArrayBuffer.isView(d)&&!(d instanceof
DataView)},getKeyframeOrder:function(d){for(var k=d.length,p=Array(k),t=0;t!==k;++t)p[t]=t;p.sort(function(x,y){return d[x]-d[y]});return p},sortedArray:function(d,k,p){for(var t=d.length,x=new d.constructor(t),y=0,B=0;B!==t;++y)for(var F=p[y]*k,G=0;G!==k;++G)x[B++]=d[F+G];return x},flattenJSON:function(d,k,p,t){for(var x=1,y=d[0];void 0!==y&&void 0===y[t];)y=d[x++];if(void 0!==y){var B=y[t];if(void 0!==B)if(Array.isArray(B)){do B=y[t],void 0!==B&&(k.push(y.time),p.push.apply(p,B)),y=d[x++];while(void 0!==
y)}else if(void 0!==B.toArray){do B=y[t],void 0!==B&&(k.push(y.time),B.toArray(p,p.length)),y=d[x++];while(void 0!==y)}else{do B=y[t],void 0!==B&&(k.push(y.time),p.push(B)),y=d[x++];while(void 0!==y)}}}};Object.assign(Pc.prototype,{evaluate:function(d){var k=this.parameterPositions,p=this._cachedIndex,t=k[p],x=k[p-1];a:{b:{c:{d:if(!(d<t)){for(var y=p+2;;){if(void 0===t){if(d<x)break d;this._cachedIndex=p=k.length;return this.afterEnd_(p-1,d,x)}if(p===y)break;x=t;t=k[++p];if(d<t)break b}t=k.length;
break c}if(d>=x)break a;else{y=k[1];d<y&&(p=2,x=y);for(y=p-2;;){if(void 0===x)return this._cachedIndex=0,this.beforeStart_(0,d,t);if(p===y)break;t=x;x=k[--p-1];if(d>=x)break b}t=p;p=0}}for(;p<t;)x=p+t>>>1,d<k[x]?t=x:p=x+1;t=k[p];x=k[p-1];if(void 0===x)return this._cachedIndex=0,this.beforeStart_(0,d,t);if(void 0===t)return this._cachedIndex=p=k.length,this.afterEnd_(p-1,x,d)}this._cachedIndex=p;this.intervalChanged_(p,x,t)}return this.interpolate_(p,x,d,t)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||
this.DefaultSettings_},copySampleValue_:function(d){var k=this.resultBuffer,p=this.sampleValues,t=this.valueSize;d*=t;for(var x=0;x!==t;++x)k[x]=p[d+x];return k},interpolate_:function(){throw Error("call to abstract method");},intervalChanged_:function(){}});Object.assign(Pc.prototype,{beforeStart_:Pc.prototype.copySampleValue_,afterEnd_:Pc.prototype.copySampleValue_});Qh.prototype=Object.assign(Object.create(Pc.prototype),{constructor:Qh,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(d,
k,p){var t=this.parameterPositions,x=d-2,y=d+1,B=t[x],F=t[y];if(void 0===B)switch(this.getSettings_().endingStart){case 2401:x=d;B=2*k-p;break;case 2402:x=t.length-2;B=k+t[x]-t[x+1];break;default:x=d,B=p}if(void 0===F)switch(this.getSettings_().endingEnd){case 2401:y=d;F=2*p-k;break;case 2402:y=1;F=p+t[1]-t[0];break;default:y=d-1,F=k}d=.5*(p-k);t=this.valueSize;this._weightPrev=d/(k-B);this._weightNext=d/(F-p);this._offsetPrev=x*t;this._offsetNext=y*t},interpolate_:function(d,k,p,t){var x=this.resultBuffer,
y=this.sampleValues,B=this.valueSize;d*=B;var F=d-B,G=this._offsetPrev,I=this._offsetNext,N=this._weightPrev,O=this._weightNext,Q=(p-k)/(t-k);p=Q*Q;t=p*Q;k=-N*t+2*N*p-N*Q;N=(1+N)*t+(-1.5-2*N)*p+(-.5+N)*Q+1;Q=(-1-O)*t+(1.5+O)*p+.5*Q;O=O*t-O*p;for(p=0;p!==B;++p)x[p]=k*y[G+p]+N*y[F+p]+Q*y[d+p]+O*y[I+p];return x}});Zg.prototype=Object.assign(Object.create(Pc.prototype),{constructor:Zg,interpolate_:function(d,k,p,t){var x=this.resultBuffer,y=this.sampleValues,B=this.valueSize;d*=B;var F=d-B;k=(p-k)/(t-
k);p=1-k;for(t=0;t!==B;++t)x[t]=y[F+t]*p+y[d+t]*k;return x}});Rh.prototype=Object.assign(Object.create(Pc.prototype),{constructor:Rh,interpolate_:function(d){return this.copySampleValue_(d-1)}});Object.assign(yc,{toJSON:function(d){var k=d.constructor;if(void 0!==k.toJSON)k=k.toJSON(d);else{k={name:d.name,times:qc.convertArray(d.times,Array),values:qc.convertArray(d.values,Array)};var p=d.getInterpolation();p!==d.DefaultInterpolation&&(k.interpolation=p)}k.type=d.ValueTypeName;return k}});Object.assign(yc.prototype,
{constructor:yc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(d){return new Rh(this.times,this.values,this.getValueSize(),d)},InterpolantFactoryMethodLinear:function(d){return new Zg(this.times,this.values,this.getValueSize(),d)},InterpolantFactoryMethodSmooth:function(d){return new Qh(this.times,this.values,this.getValueSize(),d)},setInterpolation:function(d){switch(d){case 2300:var k=this.InterpolantFactoryMethodDiscrete;
break;case 2301:k=this.InterpolantFactoryMethodLinear;break;case 2302:k=this.InterpolantFactoryMethodSmooth}if(void 0===k){k="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(d!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(k);console.warn("THREE.KeyframeTrack:",k);return this}this.createInterpolant=k;return this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;
case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(d){if(0!==d)for(var k=this.times,p=0,t=k.length;p!==t;++p)k[p]+=d;return this},scale:function(d){if(1!==d)for(var k=this.times,p=0,t=k.length;p!==t;++p)k[p]*=d;return this},trim:function(d,k){for(var p=this.times,t=p.length,x=0,y=t-1;x!==t&&p[x]<d;)++x;for(;-1!==y&&p[y]>k;)--y;++y;if(0!==x||y!==t)x>=y&&(y=Math.max(y,
1),x=y-1),d=this.getValueSize(),this.times=qc.arraySlice(p,x,y),this.values=qc.arraySlice(this.values,x*d,y*d);return this},validate:function(){var d=!0,k=this.getValueSize();0!==k-Math.floor(k)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),d=!1);var p=this.times;k=this.values;var t=p.length;0===t&&(console.error("THREE.KeyframeTrack: Track is empty.",this),d=!1);for(var x=null,y=0;y!==t;y++){var B=p[y];if("number"===typeof B&&isNaN(B)){console.error("THREE.KeyframeTrack: Time is not a valid number.",
this,y,B);d=!1;break}if(null!==x&&x>B){console.error("THREE.KeyframeTrack: Out of order keys.",this,y,B,x);d=!1;break}x=B}if(void 0!==k&&qc.isTypedArray(k))for(y=0,p=k.length;y!==p;++y)if(t=k[y],isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,y,t);d=!1;break}return d},optimize:function(){for(var d=this.times,k=this.values,p=this.getValueSize(),t=2302===this.getInterpolation(),x=1,y=d.length-1,B=1;B<y;++B){var F=!1,G=d[B];if(G!==d[B+1]&&(1!==B||G!==G[0]))if(t)F=!0;
else{var I=B*p,N=I-p,O=I+p;for(G=0;G!==p;++G){var Q=k[I+G];if(Q!==k[N+G]||Q!==k[O+G]){F=!0;break}}}if(F){if(B!==x)for(d[x]=d[B],F=B*p,I=x*p,G=0;G!==p;++G)k[I+G]=k[F+G];++x}}if(0<y){d[x]=d[y];F=y*p;I=x*p;for(G=0;G!==p;++G)k[I+G]=k[F+G];++x}x!==d.length&&(this.times=qc.arraySlice(d,0,x),this.values=qc.arraySlice(k,0,x*p));return this},clone:function(){var d=qc.arraySlice(this.times,0),k=qc.arraySlice(this.values,0);d=new this.constructor(this.name,d,k);d.createInterpolant=this.createInterpolant;return d}});
Sh.prototype=Object.assign(Object.create(yc.prototype),{constructor:Sh,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Th.prototype=Object.assign(Object.create(yc.prototype),{constructor:Th,ValueTypeName:"color"});Mf.prototype=Object.assign(Object.create(yc.prototype),{constructor:Mf,ValueTypeName:"number"});Uh.prototype=Object.assign(Object.create(Pc.prototype),{constructor:Uh,interpolate_:function(d,
k,p,t){var x=this.resultBuffer,y=this.sampleValues,B=this.valueSize;d*=B;k=(p-k)/(t-k);for(p=d+B;d!==p;d+=4)e.slerpFlat(x,0,y,d-B,y,d,k);return x}});$g.prototype=Object.assign(Object.create(yc.prototype),{constructor:$g,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(d){return new Uh(this.times,this.values,this.getValueSize(),d)},InterpolantFactoryMethodSmooth:void 0});Vh.prototype=Object.assign(Object.create(yc.prototype),{constructor:Vh,ValueTypeName:"string",
ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Nf.prototype=Object.assign(Object.create(yc.prototype),{constructor:Nf,ValueTypeName:"vector"});Object.assign(Xc,{parse:function(d){for(var k=[],p=d.tracks,t=1/(d.fps||1),x=0,y=p.length;x!==y;++x)k.push(fp(p[x]).scale(t));return new Xc(d.name,d.duration,k)},toJSON:function(d){var k=[],p=d.tracks;d={name:d.name,duration:d.duration,tracks:k,uuid:d.uuid};for(var t=0,x=p.length;t!==
x;++t)k.push(yc.toJSON(p[t]));return d},CreateFromMorphTargetSequence:function(d,k,p,t){for(var x=k.length,y=[],B=0;B<x;B++){var F=[],G=[];F.push((B+x-1)%x,B,(B+1)%x);G.push(0,1,0);var I=qc.getKeyframeOrder(F);F=qc.sortedArray(F,1,I);G=qc.sortedArray(G,1,I);t||0!==F[0]||(F.push(x),G.push(G[0]));y.push((new Mf(".morphTargetInfluences["+k[B].name+"]",F,G)).scale(1/p))}return new Xc(d,-1,y)},findByName:function(d,k){var p=d;Array.isArray(d)||(p=d.geometry&&d.geometry.animations||d.animations);for(d=
0;d<p.length;d++)if(p[d].name===k)return p[d];return null},CreateClipsFromMorphTargetSequences:function(d,k,p){for(var t={},x=/^([\w-]*?)([\d]+)$/,y=0,B=d.length;y<B;y++){var F=d[y],G=F.name.match(x);if(G&&1<G.length){var I=G[1];(G=t[I])||(t[I]=G=[]);G.push(F)}}d=[];for(I in t)d.push(Xc.CreateFromMorphTargetSequence(I,t[I],k,p));return d},parseAnimation:function(d,k){function p(Z,ca,la,ra,ia){if(0!==la.length){var va=[],ma=[];qc.flattenJSON(la,va,ma,ra);0!==va.length&&ia.push(new Z(ca,va,ma))}}if(!d)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),
null;var t=[],x=d.name||"default",y=d.length||-1,B=d.fps||30;d=d.hierarchy||[];for(var F=0;F<d.length;F++){var G=d[F].keys;if(G&&0!==G.length)if(G[0].morphTargets){y={};for(var I=0;I<G.length;I++)if(G[I].morphTargets)for(var N=0;N<G[I].morphTargets.length;N++)y[G[I].morphTargets[N]]=-1;for(var O in y){var Q=[],V=[];for(N=0;N!==G[I].morphTargets.length;++N){var U=G[I];Q.push(U.time);V.push(U.morphTarget===O?1:0)}t.push(new Mf(".morphTargetInfluence["+O+"]",Q,V))}y=y.length*(B||1)}else I=".bones["+
k[F].name+"]",p(Nf,I+".position",G,"pos",t),p($g,I+".quaternion",G,"rot",t),p(Nf,I+".scale",G,"scl",t)}return 0===t.length?null:new Xc(x,y,t)}});Object.assign(Xc.prototype,{resetDuration:function(){for(var d=0,k=0,p=this.tracks.length;k!==p;++k){var t=this.tracks[k];d=Math.max(d,t.times[t.times.length-1])}this.duration=d;return this},trim:function(){for(var d=0;d<this.tracks.length;d++)this.tracks[d].trim(0,this.duration);return this},validate:function(){for(var d=!0,k=0;k<this.tracks.length;k++)d=
d&&this.tracks[k].validate();return d},optimize:function(){for(var d=0;d<this.tracks.length;d++)this.tracks[d].optimize();return this},clone:function(){for(var d=[],k=0;k<this.tracks.length;k++)d.push(this.tracks[k].clone());return new Xc(this.name,this.duration,d)}});var We={enabled:!1,files:{},add:function(d,k){!1!==this.enabled&&(this.files[d]=k)},get:function(d){if(!1!==this.enabled)return this.files[d]},remove:function(d){delete this.files[d]},clear:function(){this.files={}}},Nc=new gj,sd={};
Object.assign(ld.prototype,{load:function(d,k,p,t){void 0===d&&(d="");void 0!==this.path&&(d=this.path+d);d=this.manager.resolveURL(d);var x=this,y=We.get(d);if(void 0!==y)return x.manager.itemStart(d),setTimeout(function(){k&&k(y);x.manager.itemEnd(d)},0),y;if(void 0!==sd[d])sd[d].push({onLoad:k,onProgress:p,onError:t});else{var B=d.match(/^data:(.*?)(;base64)?,(.*)$/);if(B){p=B[1];var F=!!B[2];B=B[3];B=decodeURIComponent(B);F&&(B=atob(B));try{var G=(this.responseType||"").toLowerCase();switch(G){case "arraybuffer":case "blob":var I=
new Uint8Array(B.length);for(F=0;F<B.length;F++)I[F]=B.charCodeAt(F);var N="blob"===G?new Blob([I.buffer],{type:p}):I.buffer;break;case "document":N=(new DOMParser).parseFromString(B,p);break;case "json":N=JSON.parse(B);break;default:N=B}setTimeout(function(){k&&k(N);x.manager.itemEnd(d)},0)}catch(Q){setTimeout(function(){t&&t(Q);x.manager.itemError(d);x.manager.itemEnd(d)},0)}}else{sd[d]=[];sd[d].push({onLoad:k,onProgress:p,onError:t});var O=new XMLHttpRequest;O.open("GET",d,!0);O.addEventListener("load",
function(Q){var V=this.response;We.add(d,V);var U=sd[d];delete sd[d];if(200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var Z=0,ca=U.length;Z<ca;Z++){var la=U[Z];if(la.onLoad)la.onLoad(V)}}else{Z=0;for(ca=U.length;Z<ca;Z++)if(la=U[Z],la.onError)la.onError(Q);x.manager.itemError(d)}x.manager.itemEnd(d)},!1);O.addEventListener("progress",function(Q){for(var V=sd[d],U=0,Z=V.length;U<Z;U++){var ca=V[U];if(ca.onProgress)ca.onProgress(Q)}},
!1);O.addEventListener("error",function(Q){var V=sd[d];delete sd[d];for(var U=0,Z=V.length;U<Z;U++){var ca=V[U];if(ca.onError)ca.onError(Q)}x.manager.itemError(d);x.manager.itemEnd(d)},!1);O.addEventListener("abort",function(Q){var V=sd[d];delete sd[d];for(var U=0,Z=V.length;U<Z;U++){var ca=V[U];if(ca.onError)ca.onError(Q)}x.manager.itemError(d);x.manager.itemEnd(d)},!1);void 0!==this.responseType&&(O.responseType=this.responseType);void 0!==this.withCredentials&&(O.withCredentials=this.withCredentials);
O.overrideMimeType&&O.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(F in this.requestHeader)O.setRequestHeader(F,this.requestHeader[F]);O.send(null)}x.manager.itemStart(d);return O}},setPath:function(d){this.path=d;return this},setResponseType:function(d){this.responseType=d;return this},setWithCredentials:function(d){this.withCredentials=d;return this},setMimeType:function(d){this.mimeType=d;return this},setRequestHeader:function(d){this.requestHeader=d;return this}});Object.assign(km.prototype,
{load:function(d,k,p,t){var x=this,y=new ld(x.manager);y.setPath(x.path);y.load(d,function(B){k(x.parse(JSON.parse(B)))},p,t)},parse:function(d){for(var k=[],p=0;p<d.length;p++){var t=Xc.parse(d[p]);k.push(t)}return k},setPath:function(d){this.path=d;return this}});Object.assign(lm.prototype,{load:function(d,k,p,t){function x(Q){G.load(d[Q],function(V){V=y._parser(V,!0);B[Q]={width:V.width,height:V.height,format:V.format,mipmaps:V.mipmaps};I+=1;6===I&&(1===V.mipmapCount&&(F.minFilter=1006),F.format=
V.format,F.needsUpdate=!0,k&&k(F))},p,t)}var y=this,B=[],F=new yf;F.image=B;var G=new ld(this.manager);G.setPath(this.path);G.setResponseType("arraybuffer");if(Array.isArray(d))for(var I=0,N=0,O=d.length;N<O;++N)x(N);else G.load(d,function(Q){Q=y._parser(Q,!0);if(Q.isCubemap)for(var V=Q.mipmaps.length/Q.mipmapCount,U=0;U<V;U++){B[U]={mipmaps:[]};for(var Z=0;Z<Q.mipmapCount;Z++)B[U].mipmaps.push(Q.mipmaps[U*Q.mipmapCount+Z]),B[U].format=Q.format,B[U].width=Q.width,B[U].height=Q.height}else F.image.width=
Q.width,F.image.height=Q.height,F.mipmaps=Q.mipmaps;1===Q.mipmapCount&&(F.minFilter=1006);F.format=Q.format;F.needsUpdate=!0;k&&k(F)},p,t);return F},setPath:function(d){this.path=d;return this}});Object.assign(hj.prototype,{load:function(d,k,p,t){var x=this,y=new r,B=new ld(this.manager);B.setResponseType("arraybuffer");B.setPath(this.path);B.load(d,function(F){if(F=x._parser(F))void 0!==F.image?y.image=F.image:void 0!==F.data&&(y.image.width=F.width,y.image.height=F.height,y.image.data=F.data),y.wrapS=
void 0!==F.wrapS?F.wrapS:1001,y.wrapT=void 0!==F.wrapT?F.wrapT:1001,y.magFilter=void 0!==F.magFilter?F.magFilter:1006,y.minFilter=void 0!==F.minFilter?F.minFilter:1008,y.anisotropy=void 0!==F.anisotropy?F.anisotropy:1,void 0!==F.format&&(y.format=F.format),void 0!==F.type&&(y.type=F.type),void 0!==F.mipmaps&&(y.mipmaps=F.mipmaps),1===F.mipmapCount&&(y.minFilter=1006),y.needsUpdate=!0,k&&k(y,F)},p,t);return y},setPath:function(d){this.path=d;return this}});Object.assign(ah.prototype,{crossOrigin:"anonymous",
load:function(d,k,p,t){function x(){G.removeEventListener("load",x,!1);G.removeEventListener("error",y,!1);We.add(d,this);k&&k(this);B.manager.itemEnd(d)}function y(I){G.removeEventListener("load",x,!1);G.removeEventListener("error",y,!1);t&&t(I);B.manager.itemError(d);B.manager.itemEnd(d)}void 0===d&&(d="");void 0!==this.path&&(d=this.path+d);d=this.manager.resolveURL(d);var B=this,F=We.get(d);if(void 0!==F)return B.manager.itemStart(d),setTimeout(function(){k&&k(F);B.manager.itemEnd(d)},0),F;var G=
document.createElementNS("http://www.w3.org/1999/xhtml","img");G.addEventListener("load",x,!1);G.addEventListener("error",y,!1);"data:"!==d.substr(0,5)&&void 0!==this.crossOrigin&&(G.crossOrigin=this.crossOrigin);B.manager.itemStart(d);G.src=d;return G},setCrossOrigin:function(d){this.crossOrigin=d;return this},setPath:function(d){this.path=d;return this}});Object.assign(ij.prototype,{crossOrigin:"anonymous",load:function(d,k,p,t){function x(G){B.load(d[G],function(I){y.images[G]=I;F++;6===F&&(y.needsUpdate=
!0,k&&k(y))},void 0,t)}var y=new Pd,B=new ah(this.manager);B.setCrossOrigin(this.crossOrigin);B.setPath(this.path);var F=0;for(p=0;p<d.length;++p)x(p);return y},setCrossOrigin:function(d){this.crossOrigin=d;return this},setPath:function(d){this.path=d;return this}});Object.assign(Wh.prototype,{crossOrigin:"anonymous",load:function(d,k,p,t){var x=new h,y=new ah(this.manager);y.setCrossOrigin(this.crossOrigin);y.setPath(this.path);y.load(d,function(B){x.image=B;B=0<d.search(/\.jpe?g($|\?)/i)||0===d.search(/^data:image\/jpeg/);
x.format=B?1022:1023;x.needsUpdate=!0;void 0!==k&&k(x)},p,t);return x},setCrossOrigin:function(d){this.crossOrigin=d;return this},setPath:function(d){this.path=d;return this}});Object.assign(hb.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(d,k){d=this.getUtoTmapping(d);return this.getPoint(d,k)},getPoints:function(d){void 0===d&&(d=5);for(var k=[],p=0;p<=d;p++)k.push(this.getPoint(p/d));return k},getSpacedPoints:function(d){void 0===
d&&(d=5);for(var k=[],p=0;p<=d;p++)k.push(this.getPointAt(p/d));return k},getLength:function(){var d=this.getLengths();return d[d.length-1]},getLengths:function(d){void 0===d&&(d=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===d+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var k=[],p=this.getPoint(0),t,x=0;k.push(0);for(t=1;t<=d;t++){var y=this.getPoint(t/d);x+=y.distanceTo(p);k.push(x);p=y}return this.cacheArcLengths=k},updateArcLengths:function(){this.needsUpdate=
!0;this.getLengths()},getUtoTmapping:function(d,k){var p=this.getLengths(),t=p.length;k=k?k:d*p[t-1];for(var x=0,y=t-1,B;x<=y;)if(d=Math.floor(x+(y-x)/2),B=p[d]-k,0>B)x=d+1;else if(0<B)y=d-1;else{y=d;break}d=y;if(p[d]===k)return d/(t-1);x=p[d];return(d+(k-x)/(p[d+1]-x))/(t-1)},getTangent:function(d){var k=d-1E-4;d+=1E-4;0>k&&(k=0);1<d&&(d=1);k=this.getPoint(k);return this.getPoint(d).clone().sub(k).normalize()},getTangentAt:function(d){d=this.getUtoTmapping(d);return this.getTangent(d)},computeFrenetFrames:function(d,
k){var p=new f,t=[],x=[],y=[],B=new f,F=new A,G;for(G=0;G<=d;G++){var I=G/d;t[G]=this.getTangentAt(I);t[G].normalize()}x[0]=new f;y[0]=new f;G=Number.MAX_VALUE;I=Math.abs(t[0].x);var N=Math.abs(t[0].y),O=Math.abs(t[0].z);I<=G&&(G=I,p.set(1,0,0));N<=G&&(G=N,p.set(0,1,0));O<=G&&p.set(0,0,1);B.crossVectors(t[0],p).normalize();x[0].crossVectors(t[0],B);y[0].crossVectors(t[0],x[0]);for(G=1;G<=d;G++)x[G]=x[G-1].clone(),y[G]=y[G-1].clone(),B.crossVectors(t[G-1],t[G]),B.length()>Number.EPSILON&&(B.normalize(),
p=Math.acos(mb.clamp(t[G-1].dot(t[G]),-1,1)),x[G].applyMatrix4(F.makeRotationAxis(B,p))),y[G].crossVectors(t[G],x[G]);if(!0===k)for(p=Math.acos(mb.clamp(x[0].dot(x[d]),-1,1)),p/=d,0<t[0].dot(B.crossVectors(x[0],x[d]))&&(p=-p),G=1;G<=d;G++)x[G].applyMatrix4(F.makeRotationAxis(t[G],p*G)),y[G].crossVectors(t[G],x[G]);return{tangents:t,normals:x,binormals:y}},clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.arcLengthDivisions=d.arcLengthDivisions;return this},toJSON:function(){var d=
{metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};d.arcLengthDivisions=this.arcLengthDivisions;d.type=this.type;return d},fromJSON:function(d){this.arcLengthDivisions=d.arcLengthDivisions;return this}});Qc.prototype=Object.create(hb.prototype);Qc.prototype.constructor=Qc;Qc.prototype.isEllipseCurve=!0;Qc.prototype.getPoint=function(d,k){k=k||new c;for(var p=2*Math.PI,t=this.aEndAngle-this.aStartAngle,x=Math.abs(t)<Number.EPSILON;0>t;)t+=p;for(;t>p;)t-=p;t<Number.EPSILON&&(t=x?0:p);!0!==
this.aClockwise||x||(t=t===p?-p:t-p);p=this.aStartAngle+d*t;d=this.aX+this.xRadius*Math.cos(p);var y=this.aY+this.yRadius*Math.sin(p);0!==this.aRotation&&(p=Math.cos(this.aRotation),t=Math.sin(this.aRotation),x=d-this.aX,y-=this.aY,d=x*p-y*t+this.aX,y=x*t+y*p+this.aY);return k.set(d,y)};Qc.prototype.copy=function(d){hb.prototype.copy.call(this,d);this.aX=d.aX;this.aY=d.aY;this.xRadius=d.xRadius;this.yRadius=d.yRadius;this.aStartAngle=d.aStartAngle;this.aEndAngle=d.aEndAngle;this.aClockwise=d.aClockwise;
this.aRotation=d.aRotation;return this};Qc.prototype.toJSON=function(){var d=hb.prototype.toJSON.call(this);d.aX=this.aX;d.aY=this.aY;d.xRadius=this.xRadius;d.yRadius=this.yRadius;d.aStartAngle=this.aStartAngle;d.aEndAngle=this.aEndAngle;d.aClockwise=this.aClockwise;d.aRotation=this.aRotation;return d};Qc.prototype.fromJSON=function(d){hb.prototype.fromJSON.call(this,d);this.aX=d.aX;this.aY=d.aY;this.xRadius=d.xRadius;this.yRadius=d.yRadius;this.aStartAngle=d.aStartAngle;this.aEndAngle=d.aEndAngle;
this.aClockwise=d.aClockwise;this.aRotation=d.aRotation;return this};Of.prototype=Object.create(Qc.prototype);Of.prototype.constructor=Of;Of.prototype.isArcCurve=!0;var ki=new f,Hj=new jj,Ij=new jj,Jj=new jj;Cc.prototype=Object.create(hb.prototype);Cc.prototype.constructor=Cc;Cc.prototype.isCatmullRomCurve3=!0;Cc.prototype.getPoint=function(d,k){k=k||new f;var p=this.points,t=p.length;d*=t-(this.closed?0:1);var x=Math.floor(d);d-=x;this.closed?x+=0<x?0:(Math.floor(Math.abs(x)/t)+1)*t:0===d&&x===t-
1&&(x=t-2,d=1);if(this.closed||0<x)var y=p[(x-1)%t];else ki.subVectors(p[0],p[1]).add(p[0]),y=ki;var B=p[x%t];var F=p[(x+1)%t];this.closed||x+2<t?p=p[(x+2)%t]:(ki.subVectors(p[t-1],p[t-2]).add(p[t-1]),p=ki);if("centripetal"===this.curveType||"chordal"===this.curveType){var G="chordal"===this.curveType?.5:.25;t=Math.pow(y.distanceToSquared(B),G);x=Math.pow(B.distanceToSquared(F),G);G=Math.pow(F.distanceToSquared(p),G);1E-4>x&&(x=1);1E-4>t&&(t=x);1E-4>G&&(G=x);Hj.initNonuniformCatmullRom(y.x,B.x,F.x,
p.x,t,x,G);Ij.initNonuniformCatmullRom(y.y,B.y,F.y,p.y,t,x,G);Jj.initNonuniformCatmullRom(y.z,B.z,F.z,p.z,t,x,G)}else"catmullrom"===this.curveType&&(Hj.initCatmullRom(y.x,B.x,F.x,p.x,this.tension),Ij.initCatmullRom(y.y,B.y,F.y,p.y,this.tension),Jj.initCatmullRom(y.z,B.z,F.z,p.z,this.tension));k.set(Hj.calc(d),Ij.calc(d),Jj.calc(d));return k};Cc.prototype.copy=function(d){hb.prototype.copy.call(this,d);this.points=[];for(var k=0,p=d.points.length;k<p;k++)this.points.push(d.points[k].clone());this.closed=
d.closed;this.curveType=d.curveType;this.tension=d.tension;return this};Cc.prototype.toJSON=function(){var d=hb.prototype.toJSON.call(this);d.points=[];for(var k=0,p=this.points.length;k<p;k++)d.points.push(this.points[k].toArray());d.closed=this.closed;d.curveType=this.curveType;d.tension=this.tension;return d};Cc.prototype.fromJSON=function(d){hb.prototype.fromJSON.call(this,d);this.points=[];for(var k=0,p=d.points.length;k<p;k++){var t=d.points[k];this.points.push((new f).fromArray(t))}this.closed=
d.closed;this.curveType=d.curveType;this.tension=d.tension;return this};md.prototype=Object.create(hb.prototype);md.prototype.constructor=md;md.prototype.isCubicBezierCurve=!0;md.prototype.getPoint=function(d,k){k=k||new c;var p=this.v0,t=this.v1,x=this.v2,y=this.v3;k.set(ch(d,p.x,t.x,x.x,y.x),ch(d,p.y,t.y,x.y,y.y));return k};md.prototype.copy=function(d){hb.prototype.copy.call(this,d);this.v0.copy(d.v0);this.v1.copy(d.v1);this.v2.copy(d.v2);this.v3.copy(d.v3);return this};md.prototype.toJSON=function(){var d=
hb.prototype.toJSON.call(this);d.v0=this.v0.toArray();d.v1=this.v1.toArray();d.v2=this.v2.toArray();d.v3=this.v3.toArray();return d};md.prototype.fromJSON=function(d){hb.prototype.fromJSON.call(this,d);this.v0.fromArray(d.v0);this.v1.fromArray(d.v1);this.v2.fromArray(d.v2);this.v3.fromArray(d.v3);return this};Fd.prototype=Object.create(hb.prototype);Fd.prototype.constructor=Fd;Fd.prototype.isCubicBezierCurve3=!0;Fd.prototype.getPoint=function(d,k){k=k||new f;var p=this.v0,t=this.v1,x=this.v2,y=this.v3;
k.set(ch(d,p.x,t.x,x.x,y.x),ch(d,p.y,t.y,x.y,y.y),ch(d,p.z,t.z,x.z,y.z));return k};Fd.prototype.copy=function(d){hb.prototype.copy.call(this,d);this.v0.copy(d.v0);this.v1.copy(d.v1);this.v2.copy(d.v2);this.v3.copy(d.v3);return this};Fd.prototype.toJSON=function(){var d=hb.prototype.toJSON.call(this);d.v0=this.v0.toArray();d.v1=this.v1.toArray();d.v2=this.v2.toArray();d.v3=this.v3.toArray();return d};Fd.prototype.fromJSON=function(d){hb.prototype.fromJSON.call(this,d);this.v0.fromArray(d.v0);this.v1.fromArray(d.v1);
this.v2.fromArray(d.v2);this.v3.fromArray(d.v3);return this};Oc.prototype=Object.create(hb.prototype);Oc.prototype.constructor=Oc;Oc.prototype.isLineCurve=!0;Oc.prototype.getPoint=function(d,k){k=k||new c;1===d?k.copy(this.v2):(k.copy(this.v2).sub(this.v1),k.multiplyScalar(d).add(this.v1));return k};Oc.prototype.getPointAt=function(d,k){return this.getPoint(d,k)};Oc.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};Oc.prototype.copy=function(d){hb.prototype.copy.call(this,
d);this.v1.copy(d.v1);this.v2.copy(d.v2);return this};Oc.prototype.toJSON=function(){var d=hb.prototype.toJSON.call(this);d.v1=this.v1.toArray();d.v2=this.v2.toArray();return d};Oc.prototype.fromJSON=function(d){hb.prototype.fromJSON.call(this,d);this.v1.fromArray(d.v1);this.v2.fromArray(d.v2);return this};nd.prototype=Object.create(hb.prototype);nd.prototype.constructor=nd;nd.prototype.isLineCurve3=!0;nd.prototype.getPoint=function(d,k){k=k||new f;1===d?k.copy(this.v2):(k.copy(this.v2).sub(this.v1),
k.multiplyScalar(d).add(this.v1));return k};nd.prototype.getPointAt=function(d,k){return this.getPoint(d,k)};nd.prototype.copy=function(d){hb.prototype.copy.call(this,d);this.v1.copy(d.v1);this.v2.copy(d.v2);return this};nd.prototype.toJSON=function(){var d=hb.prototype.toJSON.call(this);d.v1=this.v1.toArray();d.v2=this.v2.toArray();return d};nd.prototype.fromJSON=function(d){hb.prototype.fromJSON.call(this,d);this.v1.fromArray(d.v1);this.v2.fromArray(d.v2);return this};od.prototype=Object.create(hb.prototype);
od.prototype.constructor=od;od.prototype.isQuadraticBezierCurve=!0;od.prototype.getPoint=function(d,k){k=k||new c;var p=this.v0,t=this.v1,x=this.v2;k.set(bh(d,p.x,t.x,x.x),bh(d,p.y,t.y,x.y));return k};od.prototype.copy=function(d){hb.prototype.copy.call(this,d);this.v0.copy(d.v0);this.v1.copy(d.v1);this.v2.copy(d.v2);return this};od.prototype.toJSON=function(){var d=hb.prototype.toJSON.call(this);d.v0=this.v0.toArray();d.v1=this.v1.toArray();d.v2=this.v2.toArray();return d};od.prototype.fromJSON=
function(d){hb.prototype.fromJSON.call(this,d);this.v0.fromArray(d.v0);this.v1.fromArray(d.v1);this.v2.fromArray(d.v2);return this};Gd.prototype=Object.create(hb.prototype);Gd.prototype.constructor=Gd;Gd.prototype.isQuadraticBezierCurve3=!0;Gd.prototype.getPoint=function(d,k){k=k||new f;var p=this.v0,t=this.v1,x=this.v2;k.set(bh(d,p.x,t.x,x.x),bh(d,p.y,t.y,x.y),bh(d,p.z,t.z,x.z));return k};Gd.prototype.copy=function(d){hb.prototype.copy.call(this,d);this.v0.copy(d.v0);this.v1.copy(d.v1);this.v2.copy(d.v2);
return this};Gd.prototype.toJSON=function(){var d=hb.prototype.toJSON.call(this);d.v0=this.v0.toArray();d.v1=this.v1.toArray();d.v2=this.v2.toArray();return d};Gd.prototype.fromJSON=function(d){hb.prototype.fromJSON.call(this,d);this.v0.fromArray(d.v0);this.v1.fromArray(d.v1);this.v2.fromArray(d.v2);return this};pd.prototype=Object.create(hb.prototype);pd.prototype.constructor=pd;pd.prototype.isSplineCurve=!0;pd.prototype.getPoint=function(d,k){k=k||new c;var p=this.points,t=(p.length-1)*d;d=Math.floor(t);
t-=d;var x=p[0===d?d:d-1],y=p[d],B=p[d>p.length-2?p.length-1:d+1];p=p[d>p.length-3?p.length-1:d+2];k.set(mm(t,x.x,y.x,B.x,p.x),mm(t,x.y,y.y,B.y,p.y));return k};pd.prototype.copy=function(d){hb.prototype.copy.call(this,d);this.points=[];for(var k=0,p=d.points.length;k<p;k++)this.points.push(d.points[k].clone());return this};pd.prototype.toJSON=function(){var d=hb.prototype.toJSON.call(this);d.points=[];for(var k=0,p=this.points.length;k<p;k++)d.points.push(this.points[k].toArray());return d};pd.prototype.fromJSON=
function(d){hb.prototype.fromJSON.call(this,d);this.points=[];for(var k=0,p=d.points.length;k<p;k++){var t=d.points[k];this.points.push((new c).fromArray(t))}return this};var Kj=Object.freeze({ArcCurve:Of,CatmullRomCurve3:Cc,CubicBezierCurve:md,CubicBezierCurve3:Fd,EllipseCurve:Qc,LineCurve:Oc,LineCurve3:nd,QuadraticBezierCurve:od,QuadraticBezierCurve3:Gd,SplineCurve:pd});Ud.prototype=Object.assign(Object.create(hb.prototype),{constructor:Ud,add:function(d){this.curves.push(d)},closePath:function(){var d=
this.curves[0].getPoint(0),k=this.curves[this.curves.length-1].getPoint(1);d.equals(k)||this.curves.push(new Oc(k,d))},getPoint:function(d){var k=d*this.getLength(),p=this.getCurveLengths();for(d=0;d<p.length;){if(p[d]>=k)return k=p[d]-k,d=this.curves[d],p=d.getLength(),d.getPointAt(0===p?0:1-k/p);d++}return null},getLength:function(){var d=this.getCurveLengths();return d[d.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&
this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var d=[],k=0,p=0,t=this.curves.length;p<t;p++)k+=this.curves[p].getLength(),d.push(k);return this.cacheLengths=d},getSpacedPoints:function(d){void 0===d&&(d=40);for(var k=[],p=0;p<=d;p++)k.push(this.getPoint(p/d));this.autoClose&&k.push(k[0]);return k},getPoints:function(d){d=d||12;for(var k=[],p,t=0,x=this.curves;t<x.length;t++){var y=x[t];y=y.getPoints(y&&y.isEllipseCurve?2*d:y&&(y.isLineCurve||y.isLineCurve3)?1:y&&y.isSplineCurve?
d*y.points.length:d);for(var B=0;B<y.length;B++){var F=y[B];p&&p.equals(F)||(k.push(F),p=F)}}this.autoClose&&1<k.length&&!k[k.length-1].equals(k[0])&&k.push(k[0]);return k},copy:function(d){hb.prototype.copy.call(this,d);this.curves=[];for(var k=0,p=d.curves.length;k<p;k++)this.curves.push(d.curves[k].clone());this.autoClose=d.autoClose;return this},toJSON:function(){var d=hb.prototype.toJSON.call(this);d.autoClose=this.autoClose;d.curves=[];for(var k=0,p=this.curves.length;k<p;k++)d.curves.push(this.curves[k].toJSON());
return d},fromJSON:function(d){hb.prototype.fromJSON.call(this,d);this.autoClose=d.autoClose;this.curves=[];for(var k=0,p=d.curves.length;k<p;k++){var t=d.curves[k];this.curves.push((new Kj[t.type]).fromJSON(t))}return this}});qd.prototype=Object.assign(Object.create(Ud.prototype),{constructor:qd,setFromPoints:function(d){this.moveTo(d[0].x,d[0].y);for(var k=1,p=d.length;k<p;k++)this.lineTo(d[k].x,d[k].y)},moveTo:function(d,k){this.currentPoint.set(d,k)},lineTo:function(d,k){var p=new Oc(this.currentPoint.clone(),
new c(d,k));this.curves.push(p);this.currentPoint.set(d,k)},quadraticCurveTo:function(d,k,p,t){d=new od(this.currentPoint.clone(),new c(d,k),new c(p,t));this.curves.push(d);this.currentPoint.set(p,t)},bezierCurveTo:function(d,k,p,t,x,y){d=new md(this.currentPoint.clone(),new c(d,k),new c(p,t),new c(x,y));this.curves.push(d);this.currentPoint.set(x,y)},splineThru:function(d){var k=[this.currentPoint.clone()].concat(d);k=new pd(k);this.curves.push(k);this.currentPoint.copy(d[d.length-1])},arc:function(d,
k,p,t,x,y){this.absarc(d+this.currentPoint.x,k+this.currentPoint.y,p,t,x,y)},absarc:function(d,k,p,t,x,y){this.absellipse(d,k,p,p,t,x,y)},ellipse:function(d,k,p,t,x,y,B,F){this.absellipse(d+this.currentPoint.x,k+this.currentPoint.y,p,t,x,y,B,F)},absellipse:function(d,k,p,t,x,y,B,F){d=new Qc(d,k,p,t,x,y,B,F);0<this.curves.length&&(k=d.getPoint(0),k.equals(this.currentPoint)||this.lineTo(k.x,k.y));this.curves.push(d);d=d.getPoint(1);this.currentPoint.copy(d)},copy:function(d){Ud.prototype.copy.call(this,
d);this.currentPoint.copy(d.currentPoint);return this},toJSON:function(){var d=Ud.prototype.toJSON.call(this);d.currentPoint=this.currentPoint.toArray();return d},fromJSON:function(d){Ud.prototype.fromJSON.call(this,d);this.currentPoint.fromArray(d.currentPoint);return this}});me.prototype=Object.assign(Object.create(qd.prototype),{constructor:me,getPointsHoles:function(d){for(var k=[],p=0,t=this.holes.length;p<t;p++)k[p]=this.holes[p].getPoints(d);return k},extractPoints:function(d){return{shape:this.getPoints(d),
holes:this.getPointsHoles(d)}},copy:function(d){qd.prototype.copy.call(this,d);this.holes=[];for(var k=0,p=d.holes.length;k<p;k++)this.holes.push(d.holes[k].clone());return this},toJSON:function(){var d=qd.prototype.toJSON.call(this);d.uuid=this.uuid;d.holes=[];for(var k=0,p=this.holes.length;k<p;k++)d.holes.push(this.holes[k].toJSON());return d},fromJSON:function(d){qd.prototype.fromJSON.call(this,d);this.uuid=d.uuid;this.holes=[];for(var k=0,p=d.holes.length;k<p;k++){var t=d.holes[k];this.holes.push((new qd).fromJSON(t))}return this}});
Yb.prototype=Object.assign(Object.create(P.prototype),{constructor:Yb,isLight:!0,copy:function(d){P.prototype.copy.call(this,d);this.color.copy(d.color);this.intensity=d.intensity;return this},toJSON:function(d){d=P.prototype.toJSON.call(this,d);d.object.color=this.color.getHex();d.object.intensity=this.intensity;void 0!==this.groundColor&&(d.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(d.object.distance=this.distance);void 0!==this.angle&&(d.object.angle=this.angle);void 0!==
this.decay&&(d.object.decay=this.decay);void 0!==this.penumbra&&(d.object.penumbra=this.penumbra);void 0!==this.shadow&&(d.object.shadow=this.shadow.toJSON());return d}});Xh.prototype=Object.assign(Object.create(Yb.prototype),{constructor:Xh,isHemisphereLight:!0,copy:function(d){Yb.prototype.copy.call(this,d);this.groundColor.copy(d.groundColor);return this}});Object.assign(Ve.prototype,{copy:function(d){this.camera=d.camera.clone();this.bias=d.bias;this.radius=d.radius;this.mapSize.copy(d.mapSize);
return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var d={};0!==this.bias&&(d.bias=this.bias);1!==this.radius&&(d.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)d.mapSize=this.mapSize.toArray();d.camera=this.camera.toJSON(!1).object;delete d.camera.matrix;return d}});Yh.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Yh,isSpotLightShadow:!0,update:function(d){var k=this.camera,p=2*mb.RAD2DEG*d.angle,t=this.mapSize.width/this.mapSize.height;
d=d.distance||k.far;if(p!==k.fov||t!==k.aspect||d!==k.far)k.fov=p,k.aspect=t,k.far=d,k.updateProjectionMatrix()}});Zh.prototype=Object.assign(Object.create(Yb.prototype),{constructor:Zh,isSpotLight:!0,copy:function(d){Yb.prototype.copy.call(this,d);this.distance=d.distance;this.angle=d.angle;this.penumbra=d.penumbra;this.decay=d.decay;this.target=d.target.clone();this.shadow=d.shadow.clone();return this}});$h.prototype=Object.assign(Object.create(Yb.prototype),{constructor:$h,isPointLight:!0,copy:function(d){Yb.prototype.copy.call(this,
d);this.distance=d.distance;this.decay=d.decay;this.shadow=d.shadow.clone();return this}});dh.prototype=Object.assign(Object.create(Ad.prototype),{constructor:dh,isOrthographicCamera:!0,copy:function(d,k){Ad.prototype.copy.call(this,d,k);this.left=d.left;this.right=d.right;this.top=d.top;this.bottom=d.bottom;this.near=d.near;this.far=d.far;this.zoom=d.zoom;this.view=null===d.view?null:Object.assign({},d.view);return this},setViewOffset:function(d,k,p,t,x,y){null===this.view&&(this.view={enabled:!0,
fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=d;this.view.fullHeight=k;this.view.offsetX=p;this.view.offsetY=t;this.view.width=x;this.view.height=y;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var d=(this.right-this.left)/(2*this.zoom),k=(this.top-this.bottom)/(2*this.zoom),p=(this.right+this.left)/2,t=(this.top+this.bottom)/
2,x=p-d;p+=d;d=t+k;k=t-k;if(null!==this.view&&this.view.enabled){p=this.zoom/(this.view.width/this.view.fullWidth);k=this.zoom/(this.view.height/this.view.fullHeight);var y=(this.right-this.left)/this.view.width;t=(this.top-this.bottom)/this.view.height;x+=this.view.offsetX/p*y;p=x+this.view.width/p*y;d-=this.view.offsetY/k*t;k=d-this.view.height/k*t}this.projectionMatrix.makeOrthographic(x,p,d,k,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(d){d=
P.prototype.toJSON.call(this,d);d.object.zoom=this.zoom;d.object.left=this.left;d.object.right=this.right;d.object.top=this.top;d.object.bottom=this.bottom;d.object.near=this.near;d.object.far=this.far;null!==this.view&&(d.object.view=Object.assign({},this.view));return d}});ai.prototype=Object.assign(Object.create(Ve.prototype),{constructor:ai});bi.prototype=Object.assign(Object.create(Yb.prototype),{constructor:bi,isDirectionalLight:!0,copy:function(d){Yb.prototype.copy.call(this,d);this.target=
d.target.clone();this.shadow=d.shadow.clone();return this}});ci.prototype=Object.assign(Object.create(Yb.prototype),{constructor:ci,isAmbientLight:!0});di.prototype=Object.assign(Object.create(Yb.prototype),{constructor:di,isRectAreaLight:!0,copy:function(d){Yb.prototype.copy.call(this,d);this.width=d.width;this.height=d.height;return this},toJSON:function(d){d=Yb.prototype.toJSON.call(this,d);d.object.width=this.width;d.object.height=this.height;return d}});Object.assign(ei.prototype,{load:function(d,
k,p,t){var x=this,y=new ld(x.manager);y.setPath(x.path);y.load(d,function(B){k(x.parse(JSON.parse(B)))},p,t)},parse:function(d){function k(F){void 0===p[F]&&console.warn("THREE.MaterialLoader: Undefined texture",F);return p[F]}var p=this.textures,t=new jp[d.type];void 0!==d.uuid&&(t.uuid=d.uuid);void 0!==d.name&&(t.name=d.name);void 0!==d.color&&t.color.setHex(d.color);void 0!==d.roughness&&(t.roughness=d.roughness);void 0!==d.metalness&&(t.metalness=d.metalness);void 0!==d.emissive&&t.emissive.setHex(d.emissive);
void 0!==d.specular&&t.specular.setHex(d.specular);void 0!==d.shininess&&(t.shininess=d.shininess);void 0!==d.clearCoat&&(t.clearCoat=d.clearCoat);void 0!==d.clearCoatRoughness&&(t.clearCoatRoughness=d.clearCoatRoughness);void 0!==d.vertexColors&&(t.vertexColors=d.vertexColors);void 0!==d.fog&&(t.fog=d.fog);void 0!==d.flatShading&&(t.flatShading=d.flatShading);void 0!==d.blending&&(t.blending=d.blending);void 0!==d.combine&&(t.combine=d.combine);void 0!==d.side&&(t.side=d.side);void 0!==d.opacity&&
(t.opacity=d.opacity);void 0!==d.transparent&&(t.transparent=d.transparent);void 0!==d.alphaTest&&(t.alphaTest=d.alphaTest);void 0!==d.depthTest&&(t.depthTest=d.depthTest);void 0!==d.depthWrite&&(t.depthWrite=d.depthWrite);void 0!==d.colorWrite&&(t.colorWrite=d.colorWrite);void 0!==d.wireframe&&(t.wireframe=d.wireframe);void 0!==d.wireframeLinewidth&&(t.wireframeLinewidth=d.wireframeLinewidth);void 0!==d.wireframeLinecap&&(t.wireframeLinecap=d.wireframeLinecap);void 0!==d.wireframeLinejoin&&(t.wireframeLinejoin=
d.wireframeLinejoin);void 0!==d.rotation&&(t.rotation=d.rotation);1!==d.linewidth&&(t.linewidth=d.linewidth);void 0!==d.dashSize&&(t.dashSize=d.dashSize);void 0!==d.gapSize&&(t.gapSize=d.gapSize);void 0!==d.scale&&(t.scale=d.scale);void 0!==d.polygonOffset&&(t.polygonOffset=d.polygonOffset);void 0!==d.polygonOffsetFactor&&(t.polygonOffsetFactor=d.polygonOffsetFactor);void 0!==d.polygonOffsetUnits&&(t.polygonOffsetUnits=d.polygonOffsetUnits);void 0!==d.skinning&&(t.skinning=d.skinning);void 0!==d.morphTargets&&
(t.morphTargets=d.morphTargets);void 0!==d.dithering&&(t.dithering=d.dithering);void 0!==d.visible&&(t.visible=d.visible);void 0!==d.userData&&(t.userData=d.userData);if(void 0!==d.uniforms)for(var x in d.uniforms){var y=d.uniforms[x];t.uniforms[x]={};switch(y.type){case "t":t.uniforms[x].value=k(y.value);break;case "c":t.uniforms[x].value=(new D).setHex(y.value);break;case "v2":t.uniforms[x].value=(new c).fromArray(y.value);break;case "v3":t.uniforms[x].value=(new f).fromArray(y.value);break;case "v4":t.uniforms[x].value=
(new l).fromArray(y.value);break;case "m3":t.uniforms[x].value=(new g).fromArray(y.value);case "m4":t.uniforms[x].value=(new A).fromArray(y.value);break;default:t.uniforms[x].value=y.value}}void 0!==d.defines&&(t.defines=d.defines);void 0!==d.vertexShader&&(t.vertexShader=d.vertexShader);void 0!==d.fragmentShader&&(t.fragmentShader=d.fragmentShader);if(void 0!==d.extensions)for(var B in d.extensions)t.extensions[B]=d.extensions[B];void 0!==d.shading&&(t.flatShading=1===d.shading);void 0!==d.size&&
(t.size=d.size);void 0!==d.sizeAttenuation&&(t.sizeAttenuation=d.sizeAttenuation);void 0!==d.map&&(t.map=k(d.map));void 0!==d.matcap&&(t.matcap=k(d.matcap));void 0!==d.alphaMap&&(t.alphaMap=k(d.alphaMap),t.transparent=!0);void 0!==d.bumpMap&&(t.bumpMap=k(d.bumpMap));void 0!==d.bumpScale&&(t.bumpScale=d.bumpScale);void 0!==d.normalMap&&(t.normalMap=k(d.normalMap));void 0!==d.normalMapType&&(t.normalMapType=d.normalMapType);void 0!==d.normalScale&&(x=d.normalScale,!1===Array.isArray(x)&&(x=[x,x]),t.normalScale=
(new c).fromArray(x));void 0!==d.displacementMap&&(t.displacementMap=k(d.displacementMap));void 0!==d.displacementScale&&(t.displacementScale=d.displacementScale);void 0!==d.displacementBias&&(t.displacementBias=d.displacementBias);void 0!==d.roughnessMap&&(t.roughnessMap=k(d.roughnessMap));void 0!==d.metalnessMap&&(t.metalnessMap=k(d.metalnessMap));void 0!==d.emissiveMap&&(t.emissiveMap=k(d.emissiveMap));void 0!==d.emissiveIntensity&&(t.emissiveIntensity=d.emissiveIntensity);void 0!==d.specularMap&&
(t.specularMap=k(d.specularMap));void 0!==d.envMap&&(t.envMap=k(d.envMap));void 0!==d.envMapIntensity&&(t.envMapIntensity=d.envMapIntensity);void 0!==d.reflectivity&&(t.reflectivity=d.reflectivity);void 0!==d.lightMap&&(t.lightMap=k(d.lightMap));void 0!==d.lightMapIntensity&&(t.lightMapIntensity=d.lightMapIntensity);void 0!==d.aoMap&&(t.aoMap=k(d.aoMap));void 0!==d.aoMapIntensity&&(t.aoMapIntensity=d.aoMapIntensity);void 0!==d.gradientMap&&(t.gradientMap=k(d.gradientMap));return t},setPath:function(d){this.path=
d;return this},setTextures:function(d){this.textures=d;return this}});var Lj={decodeText:function(d){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(d);for(var k="",p=0,t=d.length;p<t;p++)k+=String.fromCharCode(d[p]);return decodeURIComponent(escape(k))},extractUrlBase:function(d){var k=d.lastIndexOf("/");return-1===k?"./":d.substr(0,k+1)}};Object.assign(kj.prototype,{load:function(d,k,p,t){var x=this,y=new ld(x.manager);y.setPath(x.path);y.load(d,function(B){k(x.parse(JSON.parse(B)))},
p,t)},parse:function(d){var k=new ka,p=d.data.index;if(void 0!==p){var t=new Mj[p.type](p.array);k.setIndex(new aa(t,1))}p=d.data.attributes;for(var x in p){var y=p[x];t=new Mj[y.type](y.array);t=new aa(t,y.itemSize,y.normalized);void 0!==y.name&&(t.name=y.name);k.addAttribute(x,t)}var B=d.data.morphAttributes;if(B)for(x in B){var F=B[x],G=[];p=0;for(var I=F.length;p<I;p++)y=F[p],t=new Mj[y.type](y.array),t=new aa(t,y.itemSize,y.normalized),void 0!==y.name&&(t.name=y.name),G.push(t);k.morphAttributes[x]=
G}x=d.data.groups||d.data.drawcalls||d.data.offsets;if(void 0!==x)for(p=0,y=x.length;p!==y;++p)t=x[p],k.addGroup(t.start,t.count,t.materialIndex);p=d.data.boundingSphere;void 0!==p&&(x=new f,void 0!==p.center&&x.fromArray(p.center),k.boundingSphere=new u(x,p.radius));d.name&&(k.name=d.name);d.userData&&(k.userData=d.userData);return k},setPath:function(d){this.path=d;return this}});var Mj={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:
Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(lj.prototype,{crossOrigin:"anonymous",load:function(d,k,p,t){var x=this,y=void 0===this.path?Lj.extractUrlBase(d):this.path;this.resourcePath=this.resourcePath||y;y=new ld(x.manager);y.setPath(this.path);y.load(d,function(B){var F=null;try{F=JSON.parse(B)}catch(G){void 0!==t&&t(G);console.error("THREE:ObjectLoader: Can't parse "+
d+".",G.message);return}B=F.metadata;void 0===B||void 0===B.type||"geometry"===B.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+d):x.parse(F,k)},p,t)},setPath:function(d){this.path=d;return this},setResourcePath:function(d){this.resourcePath=d;return this},setCrossOrigin:function(d){this.crossOrigin=d;return this},parse:function(d,k){var p=this.parseShape(d.shapes);p=this.parseGeometries(d.geometries,p);var t=this.parseImages(d.images,function(){void 0!==k&&k(x)});t=this.parseTextures(d.textures,
t);t=this.parseMaterials(d.materials,t);var x=this.parseObject(d.object,p,t);d.animations&&(x.animations=this.parseAnimations(d.animations));void 0!==d.images&&0!==d.images.length||void 0===k||k(x);return x},parseShape:function(d){var k={};if(void 0!==d)for(var p=0,t=d.length;p<t;p++){var x=(new me).fromJSON(d[p]);k[x.uuid]=x}return k},parseGeometries:function(d,k){var p={};if(void 0!==d)for(var t=new kj,x=0,y=d.length;x<y;x++){var B=d[x];switch(B.type){case "PlaneGeometry":case "PlaneBufferGeometry":var F=
new Ic[B.type](B.width,B.height,B.widthSegments,B.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":F=new Ic[B.type](B.width,B.height,B.depth,B.widthSegments,B.heightSegments,B.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":F=new Ic[B.type](B.radius,B.segments,B.thetaStart,B.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":F=new Ic[B.type](B.radiusTop,B.radiusBottom,B.height,B.radialSegments,B.heightSegments,B.openEnded,
B.thetaStart,B.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":F=new Ic[B.type](B.radius,B.height,B.radialSegments,B.heightSegments,B.openEnded,B.thetaStart,B.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":F=new Ic[B.type](B.radius,B.widthSegments,B.heightSegments,B.phiStart,B.phiLength,B.thetaStart,B.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":F=
new Ic[B.type](B.radius,B.detail);break;case "RingGeometry":case "RingBufferGeometry":F=new Ic[B.type](B.innerRadius,B.outerRadius,B.thetaSegments,B.phiSegments,B.thetaStart,B.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":F=new Ic[B.type](B.radius,B.tube,B.radialSegments,B.tubularSegments,B.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":F=new Ic[B.type](B.radius,B.tube,B.tubularSegments,B.radialSegments,B.p,B.q);break;case "TubeGeometry":case "TubeBufferGeometry":F=
new Ic[B.type]((new Kj[B.path.type]).fromJSON(B.path),B.tubularSegments,B.radius,B.radialSegments,B.closed);break;case "LatheGeometry":case "LatheBufferGeometry":F=new Ic[B.type](B.points,B.segments,B.phiStart,B.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":F=new Ic[B.type](B.vertices,B.indices,B.radius,B.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":F=[];for(var G=0,I=B.shapes.length;G<I;G++){var N=k[B.shapes[G]];F.push(N)}F=new Ic[B.type](F,B.curveSegments);
break;case "ExtrudeGeometry":case "ExtrudeBufferGeometry":F=[];G=0;for(I=B.shapes.length;G<I;G++)N=k[B.shapes[G]],F.push(N);G=B.options.extrudePath;void 0!==G&&(B.options.extrudePath=(new Kj[G.type]).fromJSON(G));F=new Ic[B.type](F,B.options);break;case "BufferGeometry":F=t.parse(B);break;case "Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?F=(new THREE.LegacyJSONLoader).parse(B,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');
break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+B.type+'"');continue}F.uuid=B.uuid;void 0!==B.name&&(F.name=B.name);!0===F.isBufferGeometry&&void 0!==B.userData&&(F.userData=B.userData);p[B.uuid]=F}return p},parseMaterials:function(d,k){var p={},t={};if(void 0!==d){var x=new ei;x.setTextures(k);k=0;for(var y=d.length;k<y;k++){var B=d[k];if("MultiMaterial"===B.type){for(var F=[],G=0;G<B.materials.length;G++){var I=B.materials[G];void 0===p[I.uuid]&&(p[I.uuid]=x.parse(I));
F.push(p[I.uuid])}t[B.uuid]=F}else void 0===p[B.uuid]&&(p[B.uuid]=x.parse(B)),t[B.uuid]=p[B.uuid]}}return t},parseAnimations:function(d){for(var k=[],p=0;p<d.length;p++){var t=d[p],x=Xc.parse(t);void 0!==t.uuid&&(x.uuid=t.uuid);k.push(x)}return k},parseImages:function(d,k){function p(Q){t.manager.itemStart(Q);return y.load(Q,function(){t.manager.itemEnd(Q)},void 0,function(){t.manager.itemError(Q);t.manager.itemEnd(Q)})}var t=this,x={};if(void 0!==d&&0<d.length){k=new gj(k);var y=new ah(k);y.setCrossOrigin(this.crossOrigin);
k=0;for(var B=d.length;k<B;k++){var F=d[k],G=F.url;if(Array.isArray(G)){x[F.uuid]=[];for(var I=0,N=G.length;I<N;I++){var O=G[I];O=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(O)?O:t.resourcePath+O;x[F.uuid].push(p(O))}}else O=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(F.url)?F.url:t.resourcePath+F.url,x[F.uuid]=p(O)}}return x},parseTextures:function(d,k){function p(G,I){if("number"===typeof G)return G;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",G);return I[G]}var t={};if(void 0!==
d)for(var x=0,y=d.length;x<y;x++){var B=d[x];void 0===B.image&&console.warn('THREE.ObjectLoader: No "image" specified for',B.uuid);void 0===k[B.image]&&console.warn("THREE.ObjectLoader: Undefined image",B.image);var F=Array.isArray(k[B.image])?new Pd(k[B.image]):new h(k[B.image]);F.needsUpdate=!0;F.uuid=B.uuid;void 0!==B.name&&(F.name=B.name);void 0!==B.mapping&&(F.mapping=p(B.mapping,kp));void 0!==B.offset&&F.offset.fromArray(B.offset);void 0!==B.repeat&&F.repeat.fromArray(B.repeat);void 0!==B.center&&
F.center.fromArray(B.center);void 0!==B.rotation&&(F.rotation=B.rotation);void 0!==B.wrap&&(F.wrapS=p(B.wrap[0],zm),F.wrapT=p(B.wrap[1],zm));void 0!==B.format&&(F.format=B.format);void 0!==B.type&&(F.type=B.type);void 0!==B.encoding&&(F.encoding=B.encoding);void 0!==B.minFilter&&(F.minFilter=p(B.minFilter,Am));void 0!==B.magFilter&&(F.magFilter=p(B.magFilter,Am));void 0!==B.anisotropy&&(F.anisotropy=B.anisotropy);void 0!==B.flipY&&(F.flipY=B.flipY);void 0!==B.premultiplyAlpha&&(F.premultiplyAlpha=
B.premultiplyAlpha);void 0!==B.unpackAlignment&&(F.unpackAlignment=B.unpackAlignment);t[B.uuid]=F}return t},parseObject:function(d,k,p){function t(I){void 0===k[I]&&console.warn("THREE.ObjectLoader: Undefined geometry",I);return k[I]}function x(I){if(void 0!==I){if(Array.isArray(I)){for(var N=[],O=0,Q=I.length;O<Q;O++){var V=I[O];void 0===p[V]&&console.warn("THREE.ObjectLoader: Undefined material",V);N.push(p[V])}return N}void 0===p[I]&&console.warn("THREE.ObjectLoader: Undefined material",I);return p[I]}}
switch(d.type){case "Scene":var y=new Mh;void 0!==d.background&&Number.isInteger(d.background)&&(y.background=new D(d.background));void 0!==d.fog&&("Fog"===d.fog.type?y.fog=new Lh(d.fog.color,d.fog.near,d.fog.far):"FogExp2"===d.fog.type&&(y.fog=new Kh(d.fog.color,d.fog.density)));break;case "PerspectiveCamera":y=new kc(d.fov,d.aspect,d.near,d.far);void 0!==d.focus&&(y.focus=d.focus);void 0!==d.zoom&&(y.zoom=d.zoom);void 0!==d.filmGauge&&(y.filmGauge=d.filmGauge);void 0!==d.filmOffset&&(y.filmOffset=
d.filmOffset);void 0!==d.view&&(y.view=Object.assign({},d.view));break;case "OrthographicCamera":y=new dh(d.left,d.right,d.top,d.bottom,d.near,d.far);void 0!==d.zoom&&(y.zoom=d.zoom);void 0!==d.view&&(y.view=Object.assign({},d.view));break;case "AmbientLight":y=new ci(d.color,d.intensity);break;case "DirectionalLight":y=new bi(d.color,d.intensity);break;case "PointLight":y=new $h(d.color,d.intensity,d.distance,d.decay);break;case "RectAreaLight":y=new di(d.color,d.intensity,d.width,d.height);break;
case "SpotLight":y=new Zh(d.color,d.intensity,d.distance,d.angle,d.penumbra,d.decay);break;case "HemisphereLight":y=new Xh(d.color,d.groundColor,d.intensity);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case "Mesh":y=t(d.geometry);var B=x(d.material);y=y.bones&&0<y.bones.length?new Cg(y,B):new ac(y,B);void 0!==d.drawMode&&y.setDrawMode(d.drawMode);break;case "LOD":y=new Bg;break;case "Line":y=new xc(t(d.geometry),x(d.material),d.mode);
break;case "LineLoop":y=new Oh(t(d.geometry),x(d.material));break;case "LineSegments":y=new Wb(t(d.geometry),x(d.material));break;case "PointCloud":case "Points":y=new xf(t(d.geometry),x(d.material));break;case "Sprite":y=new Ag(x(d.material));break;case "Group":y=new rf;break;default:y=new P}y.uuid=d.uuid;void 0!==d.name&&(y.name=d.name);void 0!==d.matrix?(y.matrix.fromArray(d.matrix),void 0!==d.matrixAutoUpdate&&(y.matrixAutoUpdate=d.matrixAutoUpdate),y.matrixAutoUpdate&&y.matrix.decompose(y.position,
y.quaternion,y.scale)):(void 0!==d.position&&y.position.fromArray(d.position),void 0!==d.rotation&&y.rotation.fromArray(d.rotation),void 0!==d.quaternion&&y.quaternion.fromArray(d.quaternion),void 0!==d.scale&&y.scale.fromArray(d.scale));void 0!==d.castShadow&&(y.castShadow=d.castShadow);void 0!==d.receiveShadow&&(y.receiveShadow=d.receiveShadow);d.shadow&&(void 0!==d.shadow.bias&&(y.shadow.bias=d.shadow.bias),void 0!==d.shadow.radius&&(y.shadow.radius=d.shadow.radius),void 0!==d.shadow.mapSize&&
y.shadow.mapSize.fromArray(d.shadow.mapSize),void 0!==d.shadow.camera&&(y.shadow.camera=this.parseObject(d.shadow.camera)));void 0!==d.visible&&(y.visible=d.visible);void 0!==d.frustumCulled&&(y.frustumCulled=d.frustumCulled);void 0!==d.renderOrder&&(y.renderOrder=d.renderOrder);void 0!==d.userData&&(y.userData=d.userData);void 0!==d.layers&&(y.layers.mask=d.layers);if(void 0!==d.children){B=d.children;for(var F=0;F<B.length;F++)y.add(this.parseObject(B[F],k,p))}if("LOD"===d.type)for(d=d.levels,B=
0;B<d.length;B++){F=d[B];var G=y.getObjectByProperty("uuid",F.object);void 0!==G&&y.addLevel(G,F.distance)}return y}});var kp={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},zm={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Am={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,
LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};mj.prototype={constructor:mj,setOptions:function(d){this.options=d;return this},load:function(d,k,p,t){void 0===d&&(d="");void 0!==this.path&&(d=this.path+d);d=this.manager.resolveURL(d);var x=this,y=We.get(d);if(void 0!==y)return x.manager.itemStart(d),setTimeout(function(){k&&k(y);x.manager.itemEnd(d)},0),y;fetch(d).then(function(B){return B.blob()}).then(function(B){return void 0===x.options?createImageBitmap(B):createImageBitmap(B,
x.options)}).then(function(B){We.add(d,B);k&&k(B);x.manager.itemEnd(d)}).catch(function(B){t&&t(B);x.manager.itemError(d);x.manager.itemEnd(d)});x.manager.itemStart(d)},setCrossOrigin:function(){return this},setPath:function(d){this.path=d;return this}};Object.assign(nj.prototype,{moveTo:function(d,k){this.currentPath=new qd;this.subPaths.push(this.currentPath);this.currentPath.moveTo(d,k)},lineTo:function(d,k){this.currentPath.lineTo(d,k)},quadraticCurveTo:function(d,k,p,t){this.currentPath.quadraticCurveTo(d,
k,p,t)},bezierCurveTo:function(d,k,p,t,x,y){this.currentPath.bezierCurveTo(d,k,p,t,x,y)},splineThru:function(d){this.currentPath.splineThru(d)},toShapes:function(d,k){function p(ca){for(var la=[],ra=0,ia=ca.length;ra<ia;ra++){var va=ca[ra],ma=new me;ma.curves=va.curves;la.push(ma)}return la}function t(ca,la){for(var ra=la.length,ia=!1,va=ra-1,ma=0;ma<ra;va=ma++){var na=la[va],ya=la[ma],xa=ya.x-na.x,Ga=ya.y-na.y;if(Math.abs(Ga)>Number.EPSILON){if(0>Ga&&(na=la[ma],xa=-xa,ya=la[va],Ga=-Ga),!(ca.y<na.y||
ca.y>ya.y))if(ca.y===na.y){if(ca.x===na.x)return!0}else{va=Ga*(ca.x-na.x)-xa*(ca.y-na.y);if(0===va)return!0;0>va||(ia=!ia)}}else if(ca.y===na.y&&(ya.x<=ca.x&&ca.x<=na.x||na.x<=ca.x&&ca.x<=ya.x))return!0}return ia}var x=Sd.isClockWise,y=this.subPaths;if(0===y.length)return[];if(!0===k)return p(y);k=[];if(1===y.length){var B=y[0];var F=new me;F.curves=B.curves;k.push(F);return k}var G=!x(y[0].getPoints());G=d?!G:G;F=[];var I=[],N=[],O=0;I[O]=void 0;N[O]=[];for(var Q=0,V=y.length;Q<V;Q++){B=y[Q];var U=
B.getPoints();var Z=x(U);(Z=d?!Z:Z)?(!G&&I[O]&&O++,I[O]={s:new me,p:U},I[O].s.curves=B.curves,G&&O++,N[O]=[]):N[O].push({h:B,p:U[0]})}if(!I[0])return p(y);if(1<I.length){Q=!1;d=[];x=0;for(y=I.length;x<y;x++)F[x]=[];x=0;for(y=I.length;x<y;x++)for(B=N[x],Z=0;Z<B.length;Z++){G=B[Z];O=!0;for(U=0;U<I.length;U++)t(G.p,I[U].p)&&(x!==U&&d.push({froms:x,tos:U,hole:Z}),O?(O=!1,F[U].push(G)):Q=!0);O&&F[x].push(G)}0<d.length&&(Q||(N=F))}Q=0;for(x=I.length;Q<x;Q++)for(F=I[Q].s,k.push(F),d=N[Q],y=0,B=d.length;y<
B;y++)F.holes.push(d[y].h);return k}});Object.assign(oj.prototype,{isFont:!0,generateShapes:function(d,k){void 0===k&&(k=100);var p=[],t=k;k=this.data;var x=Array.from?Array.from(d):String(d).split("");t/=k.resolution;var y=(k.boundingBox.yMax-k.boundingBox.yMin+k.underlineThickness)*t;d=[];for(var B=0,F=0,G=0;G<x.length;G++){var I=x[G];if("\n"===I)B=0,F-=y;else{var N=t;var O=B,Q=F;if(I=k.glyphs[I]||k.glyphs["?"]){var V=new nj;if(I.o)for(var U=I._cachedOutline||(I._cachedOutline=I.o.split(" ")),Z=
0,ca=U.length;Z<ca;)switch(U[Z++]){case "m":var la=U[Z++]*N+O;var ra=U[Z++]*N+Q;V.moveTo(la,ra);break;case "l":la=U[Z++]*N+O;ra=U[Z++]*N+Q;V.lineTo(la,ra);break;case "q":var ia=U[Z++]*N+O;var va=U[Z++]*N+Q;var ma=U[Z++]*N+O;var na=U[Z++]*N+Q;V.quadraticCurveTo(ma,na,ia,va);break;case "b":ia=U[Z++]*N+O,va=U[Z++]*N+Q,ma=U[Z++]*N+O,na=U[Z++]*N+Q,la=U[Z++]*N+O,ra=U[Z++]*N+Q,V.bezierCurveTo(ma,na,la,ra,ia,va)}N={offsetX:I.ha*N,path:V}}else N=void 0;B+=N.offsetX;d.push(N.path)}}k=0;for(x=d.length;k<x;k++)Array.prototype.push.apply(p,
d[k].toShapes());return p}});Object.assign(nm.prototype,{load:function(d,k,p,t){var x=this,y=new ld(this.manager);y.setPath(this.path);y.load(d,function(B){try{var F=JSON.parse(B)}catch(G){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),F=JSON.parse(B.substring(65,B.length-2))}B=x.parse(F);k&&k(B)},p,t)},parse:function(d){return new oj(d)},setPath:function(d){this.path=d;return this}});eh.Handlers={handlers:[],add:function(d,k){this.handlers.push(d,
k)},get:function(d){for(var k=this.handlers,p=0,t=k.length;p<t;p+=2){var x=k[p+1];if(k[p].test(d))return x}return null}};Object.assign(eh.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(d,k,p){for(var t=[],x=0;x<d.length;++x)t[x]=this.createMaterial(d[x],k,p);return t},createMaterial:function(){var d={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},
k=new D,p=new Wh,t=new ei;return function(x,y,B){function F(Q,V,U,Z,ca){Q=y+Q;var la=eh.Handlers.get(Q);null!==la?Q=la.load(Q):(p.setCrossOrigin(B),Q=p.load(Q));void 0!==V&&(Q.repeat.fromArray(V),1!==V[0]&&(Q.wrapS=1E3),1!==V[1]&&(Q.wrapT=1E3));void 0!==U&&Q.offset.fromArray(U);void 0!==Z&&("repeat"===Z[0]&&(Q.wrapS=1E3),"mirror"===Z[0]&&(Q.wrapS=1002),"repeat"===Z[1]&&(Q.wrapT=1E3),"mirror"===Z[1]&&(Q.wrapT=1002));void 0!==ca&&(Q.anisotropy=ca);V=mb.generateUUID();G[V]=Q;return V}var G={},I={uuid:mb.generateUUID(),
type:"MeshLambertMaterial"},N;for(N in x){var O=x[N];switch(N){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":I.name=O;break;case "blending":I.blending=d[O];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",N,"is no longer supported.");break;case "colorDiffuse":I.color=k.fromArray(O).getHex();break;case "colorSpecular":I.specular=k.fromArray(O).getHex();break;case "colorEmissive":I.emissive=k.fromArray(O).getHex();
break;case "specularCoef":I.shininess=O;break;case "shading":"basic"===O.toLowerCase()&&(I.type="MeshBasicMaterial");"phong"===O.toLowerCase()&&(I.type="MeshPhongMaterial");"standard"===O.toLowerCase()&&(I.type="MeshStandardMaterial");break;case "mapDiffuse":I.map=F(O,x.mapDiffuseRepeat,x.mapDiffuseOffset,x.mapDiffuseWrap,x.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapEmissive":I.emissiveMap=F(O,x.mapEmissiveRepeat,
x.mapEmissiveOffset,x.mapEmissiveWrap,x.mapEmissiveAnisotropy);break;case "mapEmissiveRepeat":case "mapEmissiveOffset":case "mapEmissiveWrap":case "mapEmissiveAnisotropy":break;case "mapLight":I.lightMap=F(O,x.mapLightRepeat,x.mapLightOffset,x.mapLightWrap,x.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":I.aoMap=F(O,x.mapAORepeat,x.mapAOOffset,x.mapAOWrap,x.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;
case "mapBump":I.bumpMap=F(O,x.mapBumpRepeat,x.mapBumpOffset,x.mapBumpWrap,x.mapBumpAnisotropy);break;case "mapBumpScale":I.bumpScale=O;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":I.normalMap=F(O,x.mapNormalRepeat,x.mapNormalOffset,x.mapNormalWrap,x.mapNormalAnisotropy);break;case "mapNormalFactor":I.normalScale=O;break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":I.specularMap=
F(O,x.mapSpecularRepeat,x.mapSpecularOffset,x.mapSpecularWrap,x.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;case "mapMetalness":I.metalnessMap=F(O,x.mapMetalnessRepeat,x.mapMetalnessOffset,x.mapMetalnessWrap,x.mapMetalnessAnisotropy);break;case "mapMetalnessRepeat":case "mapMetalnessOffset":case "mapMetalnessWrap":case "mapMetalnessAnisotropy":break;case "mapRoughness":I.roughnessMap=F(O,x.mapRoughnessRepeat,
x.mapRoughnessOffset,x.mapRoughnessWrap,x.mapRoughnessAnisotropy);break;case "mapRoughnessRepeat":case "mapRoughnessOffset":case "mapRoughnessWrap":case "mapRoughnessAnisotropy":break;case "mapAlpha":I.alphaMap=F(O,x.mapAlphaRepeat,x.mapAlphaOffset,x.mapAlphaWrap,x.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":I.side=1;break;case "doubleSided":I.side=2;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");
I.opacity=O;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":I[N]=O;break;case "vertexColors":!0===O&&(I.vertexColors=2);"face"===O&&(I.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",N,O)}}"MeshBasicMaterial"===I.type&&delete I.emissive;"MeshPhongMaterial"!==I.type&&delete I.specular;1>I.opacity&&(I.transparent=!0);t.setTextures(G);return t.parse(I)}}()});var li,
uj={getContext:function(){void 0===li&&(li=new (window.AudioContext||window.webkitAudioContext));return li},setContext:function(d){li=d}};Object.assign(pj.prototype,{load:function(d,k,p,t){var x=new ld(this.manager);x.setResponseType("arraybuffer");x.setPath(this.path);x.load(d,function(y){y=y.slice(0);uj.getContext().decodeAudioData(y,function(B){k(B)})},p,t)},setPath:function(d){this.path=d;return this}});Object.assign(fi.prototype,{isSphericalHarmonics3:!0,set:function(d){for(var k=0;9>k;k++)this.coefficients[k].copy(d[k]);
return this},zero:function(){for(var d=0;9>d;d++)this.coefficients[d].set(0,0,0);return this},getAt:function(d,k){var p=d.x,t=d.y;d=d.z;var x=this.coefficients;k=.282095*x[0];k+=.488603*x[1]*t;k+=.488603*x[2]*d;k+=.488603*x[3]*p;k+=1.092548*x[4]*p*t;k+=1.092548*x[5]*t*d;k+=.315392*x[6]*(3*d*d-1);k+=1.092548*x[7]*p*d;return k+=.546274*x[8]*(p*p-t*t)},getIrradianceAt:function(d,k){var p=d.x,t=d.y;d=d.z;var x=this.coefficients;k=.886227*x[0];k+=1.023328*x[1]*t;k+=1.023328*x[2]*d;k+=1.023328*x[3]*p;k+=
.858086*x[4]*p*t;k+=.858086*x[5]*t*d;k+=x[6]*(.743125*d*d-.247708);k+=.858086*x[7]*p*d;return k+=.429043*x[8]*(p*p-t*t)},add:function(d){for(var k=0;9>k;k++)this.coefficients[k].add(d.coefficients[k]);return this},scale:function(d){for(var k=0;9>k;k++)this.coefficients[k].multiplyScalar(d);return this},lerp:function(d,k){for(var p=0;9>p;p++)this.coefficients[p].lerp(d.coefficients[p],k);return this},equals:function(d){for(var k=0;9>k;k++)if(!this.coefficients[k].equals(d.coefficients[k]))return!1;
return!0},copy:function(d){return this.set(d.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(d){for(var k=this.coefficients,p=0;9>p;p++)k[p].fromArray(d,3*p);return this},toArray:function(){for(var d=[],k=this.coefficients,p=0;9>p;p++)k[p].toArray(d,3*p);return d}});Object.assign(fi,{getBasisAt:function(d,k){var p=d.x,t=d.y;d=d.z;k[0]=.282095;k[1]=.488603*t;k[2]=.488603*d;k[3]=.488603*p;k[4]=1.092548*p*t;k[5]=1.092548*t*d;k[6]=.315392*(3*d*d-1);k[7]=1.092548*
p*d;k[8]=.546274*(p*p-t*t)}});rd.prototype=Object.assign(Object.create(Yb.prototype),{constructor:rd,isLightProbe:!0,copy:function(d){Yb.prototype.copy.call(this,d);this.sh.copy(d.sh);this.intensity=d.intensity;return this},toJSON:function(d){return Yb.prototype.toJSON.call(this,d)}});qj.prototype=Object.assign(Object.create(rd.prototype),{constructor:qj,isHemisphereLightProbe:!0,copy:function(d){rd.prototype.copy.call(this,d);return this},toJSON:function(d){return rd.prototype.toJSON.call(this,d)}});
rj.prototype=Object.assign(Object.create(rd.prototype),{constructor:rj,isAmbientLightProbe:!0,copy:function(d){rd.prototype.copy.call(this,d);return this},toJSON:function(d){return rd.prototype.toJSON.call(this,d)}});Object.assign(om.prototype,{update:function(){var d,k,p,t,x,y,B,F,G=new A,I=new A;return function(N){if(d!==this||k!==N.focus||p!==N.fov||t!==N.aspect*this.aspect||x!==N.near||y!==N.far||B!==N.zoom||F!==this.eyeSep){d=this;k=N.focus;p=N.fov;t=N.aspect*this.aspect;x=N.near;y=N.far;B=N.zoom;
var O=N.projectionMatrix.clone();F=this.eyeSep/2;var Q=F*x/k,V=x*Math.tan(mb.DEG2RAD*p*.5)/B;I.elements[12]=-F;G.elements[12]=F;var U=-V*t+Q;var Z=V*t+Q;O.elements[0]=2*x/(Z-U);O.elements[8]=(Z+U)/(Z-U);this.cameraL.projectionMatrix.copy(O);U=-V*t-Q;Z=V*t-Q;O.elements[0]=2*x/(Z-U);O.elements[8]=(Z+U)/(Z-U);this.cameraR.projectionMatrix.copy(O)}this.cameraL.matrixWorld.copy(N.matrixWorld).multiply(I);this.cameraR.matrixWorld.copy(N.matrixWorld).multiply(G)}}()});fh.prototype=Object.create(P.prototype);
fh.prototype.constructor=fh;Object.assign(sj.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var d=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var k=("undefined"===typeof performance?Date:performance).now();d=(k-
this.oldTime)/1E3;this.oldTime=k;this.elapsedTime+=d}return d}});tj.prototype=Object.assign(Object.create(P.prototype),{constructor:tj,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return this},getFilter:function(){return this.filter},setFilter:function(d){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):
this.gain.disconnect(this.context.destination);this.filter=d;this.gain.connect(this.filter);this.filter.connect(this.context.destination);return this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(d){this.gain.gain.setTargetAtTime(d,this.context.currentTime,.01);return this},updateMatrixWorld:function(){var d=new f,k=new e,p=new f,t=new f,x=new sj;return function(y){P.prototype.updateMatrixWorld.call(this,y);y=this.context.listener;var B=this.up;this.timeDelta=x.getDelta();
this.matrixWorld.decompose(d,k,p);t.set(0,0,-1).applyQuaternion(k);if(y.positionX){var F=this.context.currentTime+this.timeDelta;y.positionX.linearRampToValueAtTime(d.x,F);y.positionY.linearRampToValueAtTime(d.y,F);y.positionZ.linearRampToValueAtTime(d.z,F);y.forwardX.linearRampToValueAtTime(t.x,F);y.forwardY.linearRampToValueAtTime(t.y,F);y.forwardZ.linearRampToValueAtTime(t.z,F);y.upX.linearRampToValueAtTime(B.x,F);y.upY.linearRampToValueAtTime(B.y,F);y.upZ.linearRampToValueAtTime(B.z,F)}else y.setPosition(d.x,
d.y,d.z),y.setOrientation(t.x,t.y,t.z,B.x,B.y,B.z)}}()});Pf.prototype=Object.assign(Object.create(P.prototype),{constructor:Pf,getOutput:function(){return this.gain},setNodeSource:function(d){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=d;this.connect();return this},setMediaElementSource:function(d){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(d);this.connect();return this},setBuffer:function(d){this.buffer=d;this.sourceType=
"buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else{var d=this.context.createBufferSource();d.buffer=this.buffer;d.loop=this.loop;d.onended=this.onEnded.bind(this);this.startTime=this.context.currentTime;d.start(this.startTime,this.offset);this.isPlaying=!0;this.source=d;this.setDetune(this.detune);this.setPlaybackRate(this.playbackRate);
return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=
!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var d=1,k=this.filters.length;d<k;d++)this.filters[d-1].connect(this.filters[d]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var d=1,k=this.filters.length;d<k;d++)this.filters[d-1].disconnect(this.filters[d]);this.filters[this.filters.length-
1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(d){d||(d=[]);!0===this.isPlaying?(this.disconnect(),this.filters=d,this.connect()):this.filters=d;return this},setDetune:function(d){this.detune=d;if(void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},
setFilter:function(d){return this.setFilters(d?[d]:[])},setPlaybackRate:function(d){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=d,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),
!1):this.loop},setLoop:function(d){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=d,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(d){this.gain.gain.setTargetAtTime(d,this.context.currentTime,.01);return this}});vj.prototype=Object.assign(Object.create(Pf.prototype),{constructor:vj,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},
setRefDistance:function(d){this.panner.refDistance=d;return this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(d){this.panner.rolloffFactor=d;return this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(d){this.panner.distanceModel=d;return this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(d){this.panner.maxDistance=d;return this},setDirectionalCone:function(d,k,p){this.panner.coneInnerAngle=
d;this.panner.coneOuterAngle=k;this.panner.coneOuterGain=p;return this},updateMatrixWorld:function(){var d=new f,k=new e,p=new f,t=new f;return function(x){P.prototype.updateMatrixWorld.call(this,x);if(!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(d,k,p),t.set(0,0,1).applyQuaternion(k),x=this.panner,x.positionX){var y=this.context.currentTime+this.listener.timeDelta;x.positionX.linearRampToValueAtTime(d.x,y);x.positionY.linearRampToValueAtTime(d.y,y);x.positionZ.linearRampToValueAtTime(d.z,
y);x.orientationX.linearRampToValueAtTime(t.x,y);x.orientationY.linearRampToValueAtTime(t.y,y);x.orientationZ.linearRampToValueAtTime(t.z,y)}else x.setPosition(d.x,d.y,d.z),x.setOrientation(t.x,t.y,t.z)}}()});Object.assign(wj.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var d=0,k=this.getFrequencyData(),p=0;p<k.length;p++)d+=k[p];return d/k.length}});Object.assign(xj.prototype,{accumulate:function(d,k){var p=
this.buffer,t=this.valueSize;d=d*t+t;var x=this.cumulativeWeight;if(0===x){for(x=0;x!==t;++x)p[d+x]=p[x];x=k}else x+=k,this._mixBufferRegion(p,d,0,k/x,t);this.cumulativeWeight=x},apply:function(d){var k=this.valueSize,p=this.buffer;d=d*k+k;var t=this.cumulativeWeight,x=this.binding;this.cumulativeWeight=0;1>t&&this._mixBufferRegion(p,d,3*k,1-t,k);t=k;for(var y=k+k;t!==y;++t)if(p[t]!==p[t+k]){x.setValue(p,d);break}},saveOriginalState:function(){var d=this.buffer,k=this.valueSize,p=3*k;this.binding.getValue(d,
p);for(var t=k;t!==p;++t)d[t]=d[p+t%k];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(d,k,p,t,x){if(.5<=t)for(t=0;t!==x;++t)d[k+t]=d[p+t]},_slerp:function(d,k,p,t){e.slerpFlat(d,k,d,k,d,p,t)},_lerp:function(d,k,p,t,x){for(var y=1-t,B=0;B!==x;++B){var F=k+B;d[F]=d[F]*y+d[p+B]*t}}});Object.assign(pm.prototype,{getValue:function(d,k){this.bind();var p=this._bindings[this._targetGroup.nCachedObjects_];void 0!==p&&p.getValue(d,
k)},setValue:function(d,k){for(var p=this._bindings,t=this._targetGroup.nCachedObjects_,x=p.length;t!==x;++t)p[t].setValue(d,k)},bind:function(){for(var d=this._bindings,k=this._targetGroup.nCachedObjects_,p=d.length;k!==p;++k)d[k].bind()},unbind:function(){for(var d=this._bindings,k=this._targetGroup.nCachedObjects_,p=d.length;k!==p;++k)d[k].unbind()}});Object.assign(Dc,{Composite:pm,create:function(d,k,p){return d&&d.isAnimationObjectGroup?new Dc.Composite(d,k,p):new Dc(d,k,p)},sanitizeNodeName:function(){var d=
/[\[\]\.:\/]/g;return function(k){return k.replace(/\s/g,"_").replace(d,"")}}(),parseTrackName:function(){var d="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",k=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");d=/(WCOD+)?/.source.replace("WCOD",d);var p=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),t=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),x=new RegExp("^"+k+d+p+t+"$"),y=["material","materials","bones"];return function(B){var F=x.exec(B);if(!F)throw Error("PropertyBinding: Cannot parse trackName: "+
B);F={nodeName:F[2],objectName:F[3],objectIndex:F[4],propertyName:F[5],propertyIndex:F[6]};var G=F.nodeName&&F.nodeName.lastIndexOf(".");if(void 0!==G&&-1!==G){var I=F.nodeName.substring(G+1);-1!==y.indexOf(I)&&(F.nodeName=F.nodeName.substring(0,G),F.objectName=I)}if(null===F.propertyName||0===F.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+B);return F}}(),findNode:function(d,k){if(!k||""===k||"root"===k||"."===k||-1===k||k===d.name||k===d.uuid)return d;
if(d.skeleton){var p=d.skeleton.getBoneByName(k);if(void 0!==p)return p}if(d.children){var t=function(x){for(var y=0;y<x.length;y++){var B=x[y];if(B.name===k||B.uuid===k)return B;if(B=t(B.children))return B}return null};if(d=t(d.children))return d}return null}});Object.assign(Dc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(d,
k){d[k]=this.node[this.propertyName]},function(d,k){for(var p=this.resolvedProperty,t=0,x=p.length;t!==x;++t)d[k++]=p[t]},function(d,k){d[k]=this.resolvedProperty[this.propertyIndex]},function(d,k){this.resolvedProperty.toArray(d,k)}],SetterByBindingTypeAndVersioning:[[function(d,k){this.targetObject[this.propertyName]=d[k]},function(d,k){this.targetObject[this.propertyName]=d[k];this.targetObject.needsUpdate=!0},function(d,k){this.targetObject[this.propertyName]=d[k];this.targetObject.matrixWorldNeedsUpdate=
!0}],[function(d,k){for(var p=this.resolvedProperty,t=0,x=p.length;t!==x;++t)p[t]=d[k++]},function(d,k){for(var p=this.resolvedProperty,t=0,x=p.length;t!==x;++t)p[t]=d[k++];this.targetObject.needsUpdate=!0},function(d,k){for(var p=this.resolvedProperty,t=0,x=p.length;t!==x;++t)p[t]=d[k++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(d,k){this.resolvedProperty[this.propertyIndex]=d[k]},function(d,k){this.resolvedProperty[this.propertyIndex]=d[k];this.targetObject.needsUpdate=!0},function(d,
k){this.resolvedProperty[this.propertyIndex]=d[k];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(d,k){this.resolvedProperty.fromArray(d,k)},function(d,k){this.resolvedProperty.fromArray(d,k);this.targetObject.needsUpdate=!0},function(d,k){this.resolvedProperty.fromArray(d,k);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(d,k){this.bind();this.getValue(d,k)},setValue:function(d,k){this.bind();this.setValue(d,k)},bind:function(){var d=this.node,k=this.parsedPath,p=k.objectName,
t=k.propertyName,x=k.propertyIndex;d||(this.node=d=Dc.findNode(this.rootNode,k.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(d){if(p){var y=k.objectIndex;switch(p){case "materials":if(!d.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!d.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
this);return}d=d.material.materials;break;case "bones":if(!d.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}d=d.skeleton.bones;for(p=0;p<d.length;p++)if(d[p].name===y){y=p;break}break;default:if(void 0===d[p]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}d=d[p]}if(void 0!==y){if(void 0===d[y]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
this,d);return}d=d[y]}}y=d[t];if(void 0===y)console.error("THREE.PropertyBinding: Trying to update property for track: "+k.nodeName+"."+t+" but it wasn't found.",d);else{k=this.Versioning.None;this.targetObject=d;void 0!==d.needsUpdate?k=this.Versioning.NeedsUpdate:void 0!==d.matrixWorldNeedsUpdate&&(k=this.Versioning.MatrixWorldNeedsUpdate);p=this.BindingType.Direct;if(void 0!==x){if("morphTargetInfluences"===t){if(!d.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
this);return}if(d.geometry.isBufferGeometry){if(!d.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(p=0;p<this.node.geometry.morphAttributes.position.length;p++)if(d.geometry.morphAttributes.position[p].name===x){x=p;break}}else{if(!d.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",
this);return}for(p=0;p<this.node.geometry.morphTargets.length;p++)if(d.geometry.morphTargets[p].name===x){x=p;break}}}p=this.BindingType.ArrayElement;this.resolvedProperty=y;this.propertyIndex=x}else void 0!==y.fromArray&&void 0!==y.toArray?(p=this.BindingType.HasFromToArray,this.resolvedProperty=y):Array.isArray(y)?(p=this.BindingType.EntireArray,this.resolvedProperty=y):this.propertyName=t;this.getValue=this.GetterByBindingType[p];this.setValue=this.SetterByBindingTypeAndVersioning[p][k]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+
this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(Dc.prototype,{_getValue_unbound:Dc.prototype.getValue,_setValue_unbound:Dc.prototype.setValue});Object.assign(qm.prototype,{isAnimationObjectGroup:!0,add:function(){for(var d=this._objects,k=d.length,p=this.nCachedObjects_,t=this._indicesByUUID,x=this._paths,y=this._parsedPaths,B=this._bindings,F=B.length,G=void 0,I=0,N=arguments.length;I!==
N;++I){var O=arguments[I],Q=O.uuid,V=t[Q];if(void 0===V){V=k++;t[Q]=V;d.push(O);Q=0;for(var U=F;Q!==U;++Q)B[Q].push(new Dc(O,x[Q],y[Q]))}else if(V<p){G=d[V];var Z=--p;U=d[Z];t[U.uuid]=V;d[V]=U;t[Q]=Z;d[Z]=O;Q=0;for(U=F;Q!==U;++Q){var ca=B[Q],la=ca[V];ca[V]=ca[Z];void 0===la&&(la=new Dc(O,x[Q],y[Q]));ca[Z]=la}}else d[V]!==G&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=
p},remove:function(){for(var d=this._objects,k=this.nCachedObjects_,p=this._indicesByUUID,t=this._bindings,x=t.length,y=0,B=arguments.length;y!==B;++y){var F=arguments[y],G=F.uuid,I=p[G];if(void 0!==I&&I>=k){var N=k++,O=d[N];p[O.uuid]=I;d[I]=O;p[G]=N;d[N]=F;F=0;for(G=x;F!==G;++F){O=t[F];var Q=O[I];O[I]=O[N];O[N]=Q}}}this.nCachedObjects_=k},uncache:function(){for(var d=this._objects,k=d.length,p=this.nCachedObjects_,t=this._indicesByUUID,x=this._bindings,y=x.length,B=0,F=arguments.length;B!==F;++B){var G=
arguments[B].uuid,I=t[G];if(void 0!==I)if(delete t[G],I<p){G=--p;var N=d[G],O=--k,Q=d[O];t[N.uuid]=I;d[I]=N;t[Q.uuid]=G;d[G]=Q;d.pop();N=0;for(Q=y;N!==Q;++N){var V=x[N],U=V[O];V[I]=V[G];V[G]=U;V.pop()}}else for(O=--k,Q=d[O],t[Q.uuid]=I,d[I]=Q,d.pop(),N=0,Q=y;N!==Q;++N)V=x[N],V[I]=V[O],V.pop()}this.nCachedObjects_=p},subscribe_:function(d,k){var p=this._bindingsIndicesByPath,t=p[d],x=this._bindings;if(void 0!==t)return x[t];var y=this._paths,B=this._parsedPaths,F=this._objects,G=this.nCachedObjects_,
I=Array(F.length);t=x.length;p[d]=t;y.push(d);B.push(k);x.push(I);p=G;for(t=F.length;p!==t;++p)I[p]=new Dc(F[p],d,k);return I},unsubscribe_:function(d){var k=this._bindingsIndicesByPath,p=k[d];if(void 0!==p){var t=this._paths,x=this._parsedPaths,y=this._bindings,B=y.length-1,F=y[B];k[d[B]]=p;y[p]=F;y.pop();x[p]=x[B];x.pop();t[p]=t[B];t.pop()}}});Object.assign(rm.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},
reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(d){this._startTime=d;return this},setLoop:function(d,k){this.loop=d;this.repetitions=k;return this},setEffectiveWeight:function(d){this.weight=d;
this._effectiveWeight=this.enabled?d:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(d){return this._scheduleFading(d,0,1)},fadeOut:function(d){return this._scheduleFading(d,1,0)},crossFadeFrom:function(d,k,p){d.fadeOut(k);this.fadeIn(k);if(p){p=this._clip.duration;var t=d._clip.duration,x=p/t;d.warp(1,t/p,k);this.warp(x,1,k)}return this},crossFadeTo:function(d,k,p){return d.crossFadeFrom(this,k,p)},stopFading:function(){var d=this._weightInterpolant;
null!==d&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(d));return this},setEffectiveTimeScale:function(d){this.timeScale=d;this._effectiveTimeScale=this.paused?0:d;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(d){this.timeScale=this._clip.duration/d;return this.stopWarping()},syncWith:function(d){this.time=d.time;this.timeScale=d.timeScale;return this.stopWarping()},halt:function(d){return this.warp(this._effectiveTimeScale,
0,d)},warp:function(d,k,p){var t=this._mixer,x=t.time,y=this._timeScaleInterpolant,B=this.timeScale;null===y&&(this._timeScaleInterpolant=y=t._lendControlInterpolant());t=y.parameterPositions;y=y.sampleValues;t[0]=x;t[1]=x+p;y[0]=d/B;y[1]=k/B;return this},stopWarping:function(){var d=this._timeScaleInterpolant;null!==d&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(d));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||
this._mixer._root},_update:function(d,k,p,t){if(this.enabled){var x=this._startTime;if(null!==x){k=(d-x)*p;if(0>k||0===p)return;this._startTime=null;k*=p}k*=this._updateTimeScale(d);p=this._updateTime(k);d=this._updateWeight(d);if(0<d){k=this._interpolants;x=this._propertyBindings;for(var y=0,B=k.length;y!==B;++y)k[y].evaluate(p),x[y].accumulate(t,d)}}else this._updateWeight(d)},_updateWeight:function(d){var k=0;if(this.enabled){k=this.weight;var p=this._weightInterpolant;if(null!==p){var t=p.evaluate(d)[0];
k*=t;d>p.parameterPositions[1]&&(this.stopFading(),0===t&&(this.enabled=!1))}}return this._effectiveWeight=k},_updateTimeScale:function(d){var k=0;if(!this.paused){k=this.timeScale;var p=this._timeScaleInterpolant;if(null!==p){var t=p.evaluate(d)[0];k*=t;d>p.parameterPositions[1]&&(this.stopWarping(),0===k?this.paused=!0:this.timeScale=k)}}return this._effectiveTimeScale=k},_updateTime:function(d){var k=this.time+d,p=this._clip.duration,t=this.loop,x=this._loopCount,y=2202===t;if(0===d)return-1===
x?k:y&&1===(x&1)?p-k:k;if(2200===t)a:{if(-1===x&&(this._loopCount=0,this._setEndings(!0,!0,!1)),k>=p)k=p;else if(0>k)k=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>d?-1:1})}else{-1===x&&(0<=d?(x=0,this._setEndings(!0,0===this.repetitions,y)):this._setEndings(0===this.repetitions,!0,y));if(k>=p||0>k){t=Math.floor(k/p);k-=p*t;x+=Math.abs(t);var B=this.repetitions-x;0>=B?(this.clampWhenFinished?this.paused=!0:
this.enabled=!1,k=0<d?p:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<d?1:-1})):(1===B?(d=0>d,this._setEndings(d,!d,y)):this._setEndings(!1,!1,y),this._loopCount=x,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:t}))}if(y&&1===(x&1))return this.time=k,p-k}return this.time=k},_setEndings:function(d,k,p){var t=this._interpolantSettings;p?(t.endingStart=2401,t.endingEnd=2401):(t.endingStart=d?this.zeroSlopeAtStart?2401:2400:2402,t.endingEnd=k?this.zeroSlopeAtEnd?2401:
2400:2402)},_scheduleFading:function(d,k,p){var t=this._mixer,x=t.time,y=this._weightInterpolant;null===y&&(this._weightInterpolant=y=t._lendControlInterpolant());t=y.parameterPositions;y=y.sampleValues;t[0]=x;y[0]=k;t[1]=x+d;y[1]=p;return this}});yj.prototype=Object.assign(Object.create(b.prototype),{constructor:yj,_bindAction:function(d,k){var p=d._localRoot||this._root,t=d._clip.tracks,x=t.length,y=d._propertyBindings;d=d._interpolants;var B=p.uuid,F=this._bindingsByRootAndName,G=F[B];void 0===
G&&(G={},F[B]=G);for(F=0;F!==x;++F){var I=t[F],N=I.name,O=G[N];if(void 0===O){O=y[F];if(void 0!==O){null===O._cacheIndex&&(++O.referenceCount,this._addInactiveBinding(O,B,N));continue}O=new xj(Dc.create(p,N,k&&k._propertyBindings[F].binding.parsedPath),I.ValueTypeName,I.getValueSize());++O.referenceCount;this._addInactiveBinding(O,B,N)}y[F]=O;d[F].resultBuffer=O.buffer}},_activateAction:function(d){if(!this._isActiveAction(d)){if(null===d._cacheIndex){var k=(d._localRoot||this._root).uuid,p=d._clip.uuid,
t=this._actionsByClip[p];this._bindAction(d,t&&t.knownActions[0]);this._addInactiveAction(d,p,k)}k=d._propertyBindings;p=0;for(t=k.length;p!==t;++p){var x=k[p];0===x.useCount++&&(this._lendBinding(x),x.saveOriginalState())}this._lendAction(d)}},_deactivateAction:function(d){if(this._isActiveAction(d)){for(var k=d._propertyBindings,p=0,t=k.length;p!==t;++p){var x=k[p];0===--x.useCount&&(x.restoreOriginalState(),this._takeBackBinding(x))}this._takeBackAction(d)}},_initMemoryManager:function(){this._actions=
[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var d=this;this.stats={actions:{get total(){return d._actions.length},get inUse(){return d._nActiveActions}},bindings:{get total(){return d._bindings.length},get inUse(){return d._nActiveBindings}},controlInterpolants:{get total(){return d._controlInterpolants.length},get inUse(){return d._nActiveControlInterpolants}}}},
_isActiveAction:function(d){d=d._cacheIndex;return null!==d&&d<this._nActiveActions},_addInactiveAction:function(d,k,p){var t=this._actions,x=this._actionsByClip,y=x[k];void 0===y?(y={knownActions:[d],actionByRoot:{}},d._byClipCacheIndex=0,x[k]=y):(k=y.knownActions,d._byClipCacheIndex=k.length,k.push(d));d._cacheIndex=t.length;t.push(d);y.actionByRoot[p]=d},_removeInactiveAction:function(d){var k=this._actions,p=k[k.length-1],t=d._cacheIndex;p._cacheIndex=t;k[t]=p;k.pop();d._cacheIndex=null;k=d._clip.uuid;
p=this._actionsByClip;t=p[k];var x=t.knownActions,y=x[x.length-1],B=d._byClipCacheIndex;y._byClipCacheIndex=B;x[B]=y;x.pop();d._byClipCacheIndex=null;delete t.actionByRoot[(d._localRoot||this._root).uuid];0===x.length&&delete p[k];this._removeInactiveBindingsForAction(d)},_removeInactiveBindingsForAction:function(d){d=d._propertyBindings;for(var k=0,p=d.length;k!==p;++k){var t=d[k];0===--t.referenceCount&&this._removeInactiveBinding(t)}},_lendAction:function(d){var k=this._actions,p=d._cacheIndex,
t=this._nActiveActions++,x=k[t];d._cacheIndex=t;k[t]=d;x._cacheIndex=p;k[p]=x},_takeBackAction:function(d){var k=this._actions,p=d._cacheIndex,t=--this._nActiveActions,x=k[t];d._cacheIndex=t;k[t]=d;x._cacheIndex=p;k[p]=x},_addInactiveBinding:function(d,k,p){var t=this._bindingsByRootAndName,x=t[k],y=this._bindings;void 0===x&&(x={},t[k]=x);x[p]=d;d._cacheIndex=y.length;y.push(d)},_removeInactiveBinding:function(d){var k=this._bindings,p=d.binding,t=p.rootNode.uuid;p=p.path;var x=this._bindingsByRootAndName,
y=x[t],B=k[k.length-1];d=d._cacheIndex;B._cacheIndex=d;k[d]=B;k.pop();delete y[p];a:{for(var F in y)break a;delete x[t]}},_lendBinding:function(d){var k=this._bindings,p=d._cacheIndex,t=this._nActiveBindings++,x=k[t];d._cacheIndex=t;k[t]=d;x._cacheIndex=p;k[p]=x},_takeBackBinding:function(d){var k=this._bindings,p=d._cacheIndex,t=--this._nActiveBindings,x=k[t];d._cacheIndex=t;k[t]=d;x._cacheIndex=p;k[p]=x},_lendControlInterpolant:function(){var d=this._controlInterpolants,k=this._nActiveControlInterpolants++,
p=d[k];void 0===p&&(p=new Zg(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),p.__cacheIndex=k,d[k]=p);return p},_takeBackControlInterpolant:function(d){var k=this._controlInterpolants,p=d.__cacheIndex,t=--this._nActiveControlInterpolants,x=k[t];d.__cacheIndex=t;k[t]=d;x.__cacheIndex=p;k[p]=x},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(d,k){var p=k||this._root,t=p.uuid;p="string"===typeof d?Xc.findByName(p,d):d;d=null!==p?p.uuid:d;var x=
this._actionsByClip[d],y=null;if(void 0!==x){y=x.actionByRoot[t];if(void 0!==y)return y;y=x.knownActions[0];null===p&&(p=y._clip)}if(null===p)return null;k=new rm(this,p,k);this._bindAction(k,y);this._addInactiveAction(k,d,t);return k},existingAction:function(d,k){var p=k||this._root;k=p.uuid;p="string"===typeof d?Xc.findByName(p,d):d;d=this._actionsByClip[p?p.uuid:d];return void 0!==d?d.actionByRoot[k]||null:null},stopAllAction:function(){for(var d=this._actions,k=this._nActiveActions,p=this._bindings,
t=this._nActiveBindings,x=this._nActiveBindings=this._nActiveActions=0;x!==k;++x)d[x].reset();for(x=0;x!==t;++x)p[x].useCount=0;return this},update:function(d){d*=this.timeScale;for(var k=this._actions,p=this._nActiveActions,t=this.time+=d,x=Math.sign(d),y=this._accuIndex^=1,B=0;B!==p;++B)k[B]._update(t,d,x,y);d=this._bindings;k=this._nActiveBindings;for(B=0;B!==k;++B)d[B].apply(y);return this},getRoot:function(){return this._root},uncacheClip:function(d){var k=this._actions;d=d.uuid;var p=this._actionsByClip,
t=p[d];if(void 0!==t){t=t.knownActions;for(var x=0,y=t.length;x!==y;++x){var B=t[x];this._deactivateAction(B);var F=B._cacheIndex,G=k[k.length-1];B._cacheIndex=null;B._byClipCacheIndex=null;G._cacheIndex=F;k[F]=G;k.pop();this._removeInactiveBindingsForAction(B)}delete p[d]}},uncacheRoot:function(d){d=d.uuid;var k=this._actionsByClip;for(t in k){var p=k[t].actionByRoot[d];void 0!==p&&(this._deactivateAction(p),this._removeInactiveAction(p))}var t=this._bindingsByRootAndName[d];if(void 0!==t)for(var x in t)d=
t[x],d.restoreOriginalState(),this._removeInactiveBinding(d)},uncacheAction:function(d,k){d=this.existingAction(d,k);null!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}});gi.prototype.clone=function(){return new gi(void 0===this.value.clone?this.value:this.value.clone())};zj.prototype=Object.assign(Object.create(ka.prototype),{constructor:zj,isInstancedBufferGeometry:!0,copy:function(d){ka.prototype.copy.call(this,d);this.maxInstancedCount=d.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});
Aj.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Aj,isInstancedInterleavedBuffer:!0,copy:function(d){Ge.prototype.copy.call(this,d);this.meshPerAttribute=d.meshPerAttribute;return this}});Bj.prototype=Object.assign(Object.create(aa.prototype),{constructor:Bj,isInstancedBufferAttribute:!0,copy:function(d){aa.prototype.copy.call(this,d);this.meshPerAttribute=d.meshPerAttribute;return this}});Object.assign(sm.prototype,{linePrecision:1,set:function(d,k){this.ray.set(d,k)},setFromCamera:function(d,
k){k&&k.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(k.matrixWorld),this.ray.direction.set(d.x,d.y,.5).unproject(k).sub(this.ray.origin).normalize()):k&&k.isOrthographicCamera?(this.ray.origin.set(d.x,d.y,(k.near+k.far)/(k.near-k.far)).unproject(k),this.ray.direction.set(0,0,-1).transformDirection(k.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(d,k,p){p=p||[];Cj(d,this,p,k);p.sort(tm);return p},intersectObjects:function(d,k,p){p=p||
[];if(!1===Array.isArray(d))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),p;for(var t=0,x=d.length;t<x;t++)Cj(d[t],this,p,k);p.sort(tm);return p}});Object.assign(um.prototype,{set:function(d,k,p){this.radius=d;this.phi=k;this.theta=p;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.radius=d.radius;this.phi=d.phi;this.theta=d.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));
return this},setFromVector3:function(d){return this.setFromCartesianCoords(d.x,d.y,d.z)},setFromCartesianCoords:function(d,k,p){this.radius=Math.sqrt(d*d+k*k+p*p);0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(d,p),this.phi=Math.acos(mb.clamp(k/this.radius,-1,1)));return this}});Object.assign(vm.prototype,{set:function(d,k,p){this.radius=d;this.theta=k;this.y=p;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.radius=d.radius;this.theta=d.theta;
this.y=d.y;return this},setFromVector3:function(d){return this.setFromCartesianCoords(d.x,d.y,d.z)},setFromCartesianCoords:function(d,k,p){this.radius=Math.sqrt(d*d+p*p);this.theta=Math.atan2(d,p);this.y=k;return this}});Object.assign(Dj.prototype,{set:function(d,k){this.min.copy(d);this.max.copy(k);return this},setFromPoints:function(d){this.makeEmpty();for(var k=0,p=d.length;k<p;k++)this.expandByPoint(d[k]);return this},setFromCenterAndSize:function(){var d=new c;return function(k,p){p=d.copy(p).multiplyScalar(.5);
this.min.copy(k).sub(p);this.max.copy(k).add(p);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.min.copy(d.min);this.max.copy(d.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(d){void 0===d&&(console.warn("THREE.Box2: .getCenter() target is now required"),d=new c);return this.isEmpty()?d.set(0,
0):d.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(d){void 0===d&&(console.warn("THREE.Box2: .getSize() target is now required"),d=new c);return this.isEmpty()?d.set(0,0):d.subVectors(this.max,this.min)},expandByPoint:function(d){this.min.min(d);this.max.max(d);return this},expandByVector:function(d){this.min.sub(d);this.max.add(d);return this},expandByScalar:function(d){this.min.addScalar(-d);this.max.addScalar(d);return this},containsPoint:function(d){return d.x<this.min.x||
d.x>this.max.x||d.y<this.min.y||d.y>this.max.y?!1:!0},containsBox:function(d){return this.min.x<=d.min.x&&d.max.x<=this.max.x&&this.min.y<=d.min.y&&d.max.y<=this.max.y},getParameter:function(d,k){void 0===k&&(console.warn("THREE.Box2: .getParameter() target is now required"),k=new c);return k.set((d.x-this.min.x)/(this.max.x-this.min.x),(d.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(d){return d.max.x<this.min.x||d.min.x>this.max.x||d.max.y<this.min.y||d.min.y>this.max.y?!1:!0},
clampPoint:function(d,k){void 0===k&&(console.warn("THREE.Box2: .clampPoint() target is now required"),k=new c);return k.copy(d).clamp(this.min,this.max)},distanceToPoint:function(){var d=new c;return function(k){return d.copy(k).clamp(this.min,this.max).sub(k).length()}}(),intersect:function(d){this.min.max(d.min);this.max.min(d.max);return this},union:function(d){this.min.min(d.min);this.max.max(d.max);return this},translate:function(d){this.min.add(d);this.max.add(d);return this},equals:function(d){return d.min.equals(this.min)&&
d.max.equals(this.max)}});Object.assign(Ej.prototype,{set:function(d,k){this.start.copy(d);this.end.copy(k);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(d){this.start.copy(d.start);this.end.copy(d.end);return this},getCenter:function(d){void 0===d&&(console.warn("THREE.Line3: .getCenter() target is now required"),d=new f);return d.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(d){void 0===d&&(console.warn("THREE.Line3: .delta() target is now required"),
d=new f);return d.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(d,k){void 0===k&&(console.warn("THREE.Line3: .at() target is now required"),k=new f);return this.delta(k).multiplyScalar(d).add(this.start)},closestPointToPointParameter:function(){var d=new f,k=new f;return function(p,t){d.subVectors(p,this.start);k.subVectors(this.end,this.start);p=k.dot(k);p=k.dot(d)/p;t&&
(p=mb.clamp(p,0,1));return p}}(),closestPointToPoint:function(d,k,p){d=this.closestPointToPointParameter(d,k);void 0===p&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),p=new f);return this.delta(p).multiplyScalar(d).add(this.start)},applyMatrix4:function(d){this.start.applyMatrix4(d);this.end.applyMatrix4(d);return this},equals:function(d){return d.start.equals(this.start)&&d.end.equals(this.end)}});gh.prototype=Object.create(P.prototype);gh.prototype.constructor=gh;
gh.prototype.isImmediateRenderObject=!0;hh.prototype=Object.create(Wb.prototype);hh.prototype.constructor=hh;hh.prototype.update=function(){var d=new f,k=new f,p=new g;return function(){var t=["a","b","c"];this.object.updateMatrixWorld(!0);p.getNormalMatrix(this.object.matrixWorld);var x=this.object.matrixWorld,y=this.geometry.attributes.position,B=this.object.geometry;if(B&&B.isGeometry)for(var F=B.vertices,G=B.faces,I=B=0,N=G.length;I<N;I++)for(var O=G[I],Q=0,V=O.vertexNormals.length;Q<V;Q++){var U=
O.vertexNormals[Q];d.copy(F[O[t[Q]]]).applyMatrix4(x);k.copy(U).applyMatrix3(p).normalize().multiplyScalar(this.size).add(d);y.setXYZ(B,d.x,d.y,d.z);B+=1;y.setXYZ(B,k.x,k.y,k.z);B+=1}else if(B&&B.isBufferGeometry)for(t=B.attributes.position,F=B.attributes.normal,Q=B=0,V=t.count;Q<V;Q++)d.set(t.getX(Q),t.getY(Q),t.getZ(Q)).applyMatrix4(x),k.set(F.getX(Q),F.getY(Q),F.getZ(Q)),k.applyMatrix3(p).normalize().multiplyScalar(this.size).add(d),y.setXYZ(B,d.x,d.y,d.z),B+=1,y.setXYZ(B,k.x,k.y,k.z),B+=1;y.needsUpdate=
!0}}();Qf.prototype=Object.create(P.prototype);Qf.prototype.constructor=Qf;Qf.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};Qf.prototype.update=function(){var d=new f;return function(){this.light.updateMatrixWorld();var k=this.light.distance?this.light.distance:1E3,p=k*Math.tan(this.light.angle);this.cone.scale.set(p,p,k);d.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(d);void 0!==this.color?this.cone.material.color.set(this.color):
this.cone.material.color.copy(this.light.color)}}();Rf.prototype=Object.create(Wb.prototype);Rf.prototype.constructor=Rf;Rf.prototype.updateMatrixWorld=function(){var d=new f,k=new A,p=new A;return function(t){var x=this.bones,y=this.geometry,B=y.getAttribute("position");p.getInverse(this.root.matrixWorld);for(var F=0,G=0;F<x.length;F++){var I=x[F];I.parent&&I.parent.isBone&&(k.multiplyMatrices(p,I.matrixWorld),d.setFromMatrixPosition(k),B.setXYZ(G,d.x,d.y,d.z),k.multiplyMatrices(p,I.parent.matrixWorld),
d.setFromMatrixPosition(k),B.setXYZ(G+1,d.x,d.y,d.z),G+=2)}y.getAttribute("position").needsUpdate=!0;P.prototype.updateMatrixWorld.call(this,t)}}();Sf.prototype=Object.create(ac.prototype);Sf.prototype.constructor=Sf;Sf.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};Sf.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};Tf.prototype=Object.create(xc.prototype);Tf.prototype.constructor=Tf;Tf.prototype.update=
function(){this.scale.set(.5*this.light.width,.5*this.light.height,1);if(void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var d=this.material.color,k=Math.max(d.r,d.g,d.b);1<k&&d.multiplyScalar(1/k);this.children[0].material.color.copy(this.material.color)}};Tf.prototype.dispose=function(){this.geometry.dispose();this.material.dispose();this.children[0].geometry.dispose();
this.children[0].material.dispose()};Uf.prototype=Object.create(P.prototype);Uf.prototype.constructor=Uf;Uf.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};Uf.prototype.update=function(){var d=new f,k=new D,p=new D;return function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var x=t.geometry.getAttribute("color");k.copy(this.light.color);p.copy(this.light.groundColor);for(var y=0,B=x.count;y<B;y++){var F=
y<B/2?k:p;x.setXYZ(y,F.r,F.g,F.b)}x.needsUpdate=!0}t.lookAt(d.setFromMatrixPosition(this.light.matrixWorld).negate())}}();Vf.prototype=Object.create(ac.prototype);Vf.prototype.constructor=Vf;Vf.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};Vf.prototype.onBeforeRender=function(){return function(){this.position.copy(this.lightProbe.position);this.scale.set(1,1,1).multiplyScalar(this.size);this.material.uniforms.intensity.value=this.lightProbe.intensity}}();hi.prototype=
Object.assign(Object.create(Wb.prototype),{constructor:hi,copy:function(d){Wb.prototype.copy.call(this,d);this.geometry.copy(d.geometry);this.material.copy(d.material);return this},clone:function(){return(new this.constructor).copy(this)}});ii.prototype=Object.create(Wb.prototype);ii.prototype.constructor=ii;Wf.prototype=Object.create(xc.prototype);Wf.prototype.constructor=Wf;Wf.prototype.update=function(){function d(U,Z,ca,la){ca=(Z-U)/ca;V.setXYZ(G,0,0,0);I++;for(N=U;N<Z;N+=ca)O=G+I,V.setXYZ(O,
Math.sin(N)*p,0,Math.cos(N)*p),V.setXYZ(O+1,Math.sin(Math.min(N+ca,Z))*p,0,Math.cos(Math.min(N+ca,Z))*p),V.setXYZ(O+2,0,0,0),I+=3;Q.addGroup(G,I,la);G+=I;I=0}var k=this.audio,p=this.range,t=this.divisionsInnerAngle,x=this.divisionsOuterAngle,y=mb.degToRad(k.panner.coneInnerAngle);k=mb.degToRad(k.panner.coneOuterAngle);var B=y/2,F=k/2,G=0,I=0,N,O,Q=this.geometry,V=Q.attributes.position;Q.clearGroups();d(-F,-B,x,0);d(-B,B,t,1);d(B,F,x,0);V.needsUpdate=!0;y===k&&(this.material[0].visible=!1)};Wf.prototype.dispose=
function(){this.geometry.dispose();this.material[0].dispose();this.material[1].dispose()};ih.prototype=Object.create(Wb.prototype);ih.prototype.constructor=ih;ih.prototype.update=function(){var d=new f,k=new f,p=new g;return function(){this.object.updateMatrixWorld(!0);p.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,x=this.geometry.attributes.position,y=this.object.geometry,B=y.vertices;y=y.faces;for(var F=0,G=0,I=y.length;G<I;G++){var N=y[G],O=N.normal;d.copy(B[N.a]).add(B[N.b]).add(B[N.c]).divideScalar(3).applyMatrix4(t);
k.copy(O).applyMatrix3(p).normalize().multiplyScalar(this.size).add(d);x.setXYZ(F,d.x,d.y,d.z);F+=1;x.setXYZ(F,k.x,k.y,k.z);F+=1}x.needsUpdate=!0}}();Xf.prototype=Object.create(P.prototype);Xf.prototype.constructor=Xf;Xf.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};Xf.prototype.update=function(){var d=new f,k=new f,p=new f;return function(){d.setFromMatrixPosition(this.light.matrixWorld);
k.setFromMatrixPosition(this.light.target.matrixWorld);p.subVectors(k,d);this.lightPlane.lookAt(k);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(k);this.targetLine.scale.z=p.length()}}();jh.prototype=Object.create(Wb.prototype);jh.prototype.constructor=jh;jh.prototype.update=function(){function d(y,
B,F,G){t.set(B,F,G).unproject(x);y=p[y];if(void 0!==y)for(B=k.getAttribute("position"),F=0,G=y.length;F<G;F++)B.setXYZ(y[F],t.x,t.y,t.z)}var k,p,t=new f,x=new Ad;return function(){k=this.geometry;p=this.pointMap;x.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);d("c",0,0,-1);d("t",0,0,1);d("n1",-1,-1,-1);d("n2",1,-1,-1);d("n3",-1,1,-1);d("n4",1,1,-1);d("f1",-1,-1,1);d("f2",1,-1,1);d("f3",-1,1,1);d("f4",1,1,1);d("u1",.7,1.1,-1);d("u2",-.7,1.1,-1);d("u3",0,2,-1);d("cf1",-1,0,1);d("cf2",
1,0,1);d("cf3",0,-1,1);d("cf4",0,1,1);d("cn1",-1,0,-1);d("cn2",1,0,-1);d("cn3",0,-1,-1);d("cn4",0,1,-1);k.getAttribute("position").needsUpdate=!0}}();Vd.prototype=Object.create(Wb.prototype);Vd.prototype.constructor=Vd;Vd.prototype.update=function(){var d=new v;return function(k){void 0!==k&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&d.setFromObject(this.object);if(!d.isEmpty()){k=d.min;var p=d.max,t=this.geometry.attributes.position,x=t.array;x[0]=p.x;
x[1]=p.y;x[2]=p.z;x[3]=k.x;x[4]=p.y;x[5]=p.z;x[6]=k.x;x[7]=k.y;x[8]=p.z;x[9]=p.x;x[10]=k.y;x[11]=p.z;x[12]=p.x;x[13]=p.y;x[14]=k.z;x[15]=k.x;x[16]=p.y;x[17]=k.z;x[18]=k.x;x[19]=k.y;x[20]=k.z;x[21]=p.x;x[22]=k.y;x[23]=k.z;t.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();Vd.prototype.setFromObject=function(d){this.object=d;this.update();return this};Vd.prototype.copy=function(d){Wb.prototype.copy.call(this,d);this.object=d.object;return this};Vd.prototype.clone=function(){return(new this.constructor).copy(this)};
kh.prototype=Object.create(Wb.prototype);kh.prototype.constructor=kh;kh.prototype.updateMatrixWorld=function(d){var k=this.box;k.isEmpty()||(k.getCenter(this.position),k.getSize(this.scale),this.scale.multiplyScalar(.5),P.prototype.updateMatrixWorld.call(this,d))};lh.prototype=Object.create(xc.prototype);lh.prototype.constructor=lh;lh.prototype.updateMatrixWorld=function(d){var k=-this.plane.constant;1E-8>Math.abs(k)&&(k=1E-8);this.scale.set(.5*this.size,.5*this.size,k);this.children[0].material.side=
0>k?1:0;this.lookAt(this.plane.normal);P.prototype.updateMatrixWorld.call(this,d)};var ji,Fj;Wd.prototype=Object.create(P.prototype);Wd.prototype.constructor=Wd;Wd.prototype.setDirection=function(){var d=new f,k;return function(p){.99999<p.y?this.quaternion.set(0,0,0,1):-.99999>p.y?this.quaternion.set(1,0,0,0):(d.set(p.z,0,-p.x).normalize(),k=Math.acos(p.y),this.quaternion.setFromAxisAngle(d,k))}}();Wd.prototype.setLength=function(d,k,p){void 0===k&&(k=.2*d);void 0===p&&(p=.2*k);this.line.scale.set(1,
Math.max(0,d-k),1);this.line.updateMatrix();this.cone.scale.set(p,k,p);this.cone.position.y=d;this.cone.updateMatrix()};Wd.prototype.setColor=function(d){this.line.material.color.copy(d);this.cone.material.color.copy(d)};Wd.prototype.copy=function(d){P.prototype.copy.call(this,d,!1);this.line.copy(d.line);this.cone.copy(d.cone);return this};Wd.prototype.clone=function(){return(new this.constructor).copy(this)};mh.prototype=Object.create(Wb.prototype);mh.prototype.constructor=mh;hb.create=function(d,
k){console.log("THREE.Curve.create() has been deprecated");d.prototype=Object.create(hb.prototype);d.prototype.constructor=d;d.prototype.getPoint=k;return d};Object.assign(Ud.prototype,{createPointsGeometry:function(d){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");d=this.getPoints(d);return this.createGeometry(d)},createSpacedPointsGeometry:function(d){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
d=this.getSpacedPoints(d);return this.createGeometry(d)},createGeometry:function(d){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var k=new S,p=0,t=d.length;p<t;p++){var x=d[p];k.vertices.push(new f(x.x,x.y,x.z||0))}return k}});Object.assign(qd.prototype,{fromPoints:function(d){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(d)}});xm.prototype=Object.create(Cc.prototype);
ym.prototype=Object.create(Cc.prototype);Gj.prototype=Object.create(Cc.prototype);Object.assign(Gj.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});hi.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
Rf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(eh.prototype,{extractUrlBase:function(d){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return Lj.extractUrlBase(d)}});Object.assign(lj.prototype,{setTexturePath:function(d){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(d)}});Object.assign(Dj.prototype,
{center:function(d){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(d)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(d){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(d)},size:function(d){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(d)}});Object.assign(v.prototype,
{center:function(d){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(d)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(d){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(d)},isIntersectionSphere:function(d){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(d)},
size:function(d){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(d)}});Ej.prototype.center=function(d){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(d)};Object.assign(mb,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(d){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");
return mb.floorPowerOfTwo(d)},nextPowerOfTwo:function(d){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return mb.ceilPowerOfTwo(d)}});Object.assign(g.prototype,{flattenToArrayOffset:function(d,k){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(d,k)},multiplyVector3:function(d){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return d.applyMatrix3(this)},
multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(d){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(d)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(A.prototype,{extractPosition:function(d){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(d)},flattenToArrayOffset:function(d,k){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(d,k)},getPosition:function(){var d;return function(){void 0===d&&(d=new f);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return d.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(d){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
return this.makeRotationFromQuaternion(d)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(d){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return d.applyMatrix4(this)},multiplyVector4:function(d){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return d.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},
rotateAxis:function(d){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");d.transformDirection(this)},crossVector:function(d){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return d.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},
rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(d){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(d)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(d,k,p,t,x,y){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");
return this.makePerspective(d,k,t,p,x,y)}});w.prototype.isIntersectionLine=function(d){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(d)};e.prototype.multiplyVector3=function(d){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return d.applyQuaternion(this)};Object.assign(jc.prototype,{isIntersectionBox:function(d){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");
return this.intersectsBox(d)},isIntersectionPlane:function(d){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(d)},isIntersectionSphere:function(d){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(d)}});Object.assign(sb.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(d,
k){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(d,k)},midpoint:function(d){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(d)},normal:function(d){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(d)},plane:function(d){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(d)}});Object.assign(sb,
{barycoordFromPoint:function(d,k,p,t,x){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return sb.getBarycoord(d,k,p,t,x)},normal:function(d,k,p,t){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return sb.getNormal(d,k,p,t)}});Object.assign(me.prototype,{extractAllPoints:function(d){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(d)},extrude:function(d){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");
return new Ke(this,d)},makeGeometry:function(d){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new Le(this,d)}});Object.assign(c.prototype,{fromAttribute:function(d,k,p){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(d,k,p)},distanceToManhattan:function(d){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(d)},
lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(f.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(d){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");
return this.setFromMatrixPosition(d)},getScaleFromMatrix:function(d){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(d)},getColumnFromMatrix:function(d,k){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(k,d)},applyProjection:function(d){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(d)},
fromAttribute:function(d,k,p){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(d,k,p)},distanceToManhattan:function(d){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(d)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(l.prototype,
{fromAttribute:function(d,k,p){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(d,k,p)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});
Object.assign(P.prototype,{getChildByName:function(d){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(d)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(d,k){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(k,d)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}});
Object.defineProperties(P.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(d){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=d}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});
Object.defineProperties(Bg.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(Nh.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Cg.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(hb.prototype,
"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(d){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=d}});kc.prototype.setLens=function(d,k){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==k&&(this.filmGauge=k);this.setFocalLength(d)};Object.defineProperties(Yb.prototype,
{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(d){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=d}},shadowCameraLeft:{set:function(d){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=d}},shadowCameraRight:{set:function(d){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=d}},shadowCameraTop:{set:function(d){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");
this.shadow.camera.top=d}},shadowCameraBottom:{set:function(d){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=d}},shadowCameraNear:{set:function(d){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=d}},shadowCameraFar:{set:function(d){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=d}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},
shadowBias:{set:function(d){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=d}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(d){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=d}},shadowMapHeight:{set:function(d){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=d}}});Object.defineProperties(aa.prototype,
{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}});Object.assign(ka.prototype,{addIndex:function(d){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(d)},addDrawCall:function(d,k,p){void 0!==p&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");
console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(d,k)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(ka.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");
return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.assign(Dd.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(gi.prototype,
{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(Ka.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},
set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new D}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(d){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===d}}});Object.defineProperties(kd.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");
return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(vb.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(d){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=d}}});Object.assign($i.prototype,
{clearTarget:function(d,k,p,t){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(d);this.clear(k,p,t)},animate:function(d){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(d)},getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");
return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},
supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");
return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(d){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(d)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},
addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},
setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}});Object.defineProperties($i.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(d){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=d}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(d){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=d}},
shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Ql.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},
renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});
Object.defineProperties(q.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}});Object.defineProperties(n.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");
return this.texture.wrapS},set:function(d){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=d}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(d){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=d}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},
set:function(d){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=d}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(d){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=d}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},
set:function(d){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=d}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(d){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=d}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(d){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");
this.texture.repeat=d}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(d){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=d}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(d){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=d}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");
return this.texture.generateMipmaps},set:function(d){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=d}}});Object.defineProperties(Vl.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}});Pf.prototype.load=function(d){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
var k=this;(new pj).load(d,function(p){k.setBuffer(p)});return this};wj.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};fh.prototype.updateCubeMap=function(d,k){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(d,k)};ne.crossOrigin=void 0;ne.loadTexture=function(d,k,p,t){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var x=
new Wh;x.setCrossOrigin(this.crossOrigin);d=x.load(d,p,void 0,t);k&&(d.mapping=k);return d};ne.loadTextureCube=function(d,k,p,t){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var x=new ij;x.setCrossOrigin(this.crossOrigin);d=x.load(d,p,void 0,t);k&&(d.mapping=k);return d};ne.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ne.loadCompressedTextureCube=
function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};a.WebGLMultisampleRenderTarget=m;a.WebGLRenderTargetCube=q;a.WebGLRenderTarget=n;a.WebGLRenderer=$i;a.ShaderLib=zd;a.UniformsLib=$a;a.UniformsUtils=gp;a.ShaderChunk=Bb;a.FogExp2=Kh;a.Fog=Lh;a.Scene=Mh;a.Sprite=Ag;a.LOD=Bg;a.SkinnedMesh=Cg;a.Skeleton=Nh;a.Bone=cj;a.Mesh=ac;a.LineSegments=Wb;a.LineLoop=Oh;a.Line=xc;a.Points=xf;a.Group=rf;a.VideoTexture=dj;a.DataTexture=r;a.DataTexture2DArray=
of;a.DataTexture3D=pf;a.CompressedTexture=yf;a.CubeTexture=Pd;a.CanvasTexture=Dg;a.DepthTexture=Eg;a.Texture=h;a.AnimationLoader=km;a.CompressedTextureLoader=lm;a.DataTextureLoader=hj;a.CubeTextureLoader=ij;a.TextureLoader=Wh;a.ObjectLoader=lj;a.MaterialLoader=ei;a.BufferGeometryLoader=kj;a.DefaultLoadingManager=Nc;a.LoadingManager=gj;a.ImageLoader=ah;a.ImageBitmapLoader=mj;a.FontLoader=nm;a.FileLoader=ld;a.Loader=eh;a.LoaderUtils=Lj;a.Cache=We;a.AudioLoader=pj;a.SpotLightShadow=Yh;a.SpotLight=Zh;
a.PointLight=$h;a.RectAreaLight=di;a.HemisphereLight=Xh;a.HemisphereLightProbe=qj;a.DirectionalLightShadow=ai;a.DirectionalLight=bi;a.AmbientLight=ci;a.AmbientLightProbe=rj;a.LightShadow=Ve;a.Light=Yb;a.LightProbe=rd;a.StereoCamera=om;a.PerspectiveCamera=kc;a.OrthographicCamera=dh;a.CubeCamera=fh;a.ArrayCamera=yg;a.Camera=Ad;a.AudioListener=tj;a.PositionalAudio=vj;a.AudioContext=uj;a.AudioAnalyser=wj;a.Audio=Pf;a.VectorKeyframeTrack=Nf;a.StringKeyframeTrack=Vh;a.QuaternionKeyframeTrack=$g;a.NumberKeyframeTrack=
Mf;a.ColorKeyframeTrack=Th;a.BooleanKeyframeTrack=Sh;a.PropertyMixer=xj;a.PropertyBinding=Dc;a.KeyframeTrack=yc;a.AnimationUtils=qc;a.AnimationObjectGroup=qm;a.AnimationMixer=yj;a.AnimationClip=Xc;a.Uniform=gi;a.InstancedBufferGeometry=zj;a.BufferGeometry=ka;a.Geometry=S;a.InterleavedBufferAttribute=zg;a.InstancedInterleavedBuffer=Aj;a.InterleavedBuffer=Ge;a.InstancedBufferAttribute=Bj;a.Face3=H;a.Object3D=P;a.Raycaster=sm;a.Layers=L;a.EventDispatcher=b;a.Clock=sj;a.QuaternionLinearInterpolant=Uh;
a.LinearInterpolant=Zg;a.DiscreteInterpolant=Rh;a.CubicInterpolant=Qh;a.Interpolant=Pc;a.Triangle=sb;a.Math=mb;a.Spherical=um;a.Cylindrical=vm;a.Plane=w;a.Frustum=z;a.Sphere=u;a.Ray=jc;a.Matrix4=A;a.Matrix3=g;a.Box3=v;a.Box2=Dj;a.Line3=Ej;a.Euler=K;a.Vector4=l;a.Vector3=f;a.Vector2=c;a.Quaternion=e;a.Color=D;a.SphericalHarmonics3=fi;a.ImmediateRenderObject=gh;a.VertexNormalsHelper=hh;a.SpotLightHelper=Qf;a.SkeletonHelper=Rf;a.PointLightHelper=Sf;a.RectAreaLightHelper=Tf;a.HemisphereLightHelper=Uf;
a.LightProbeHelper=Vf;a.GridHelper=hi;a.PolarGridHelper=ii;a.PositionalAudioHelper=Wf;a.FaceNormalsHelper=ih;a.DirectionalLightHelper=Xf;a.CameraHelper=jh;a.BoxHelper=Vd;a.Box3Helper=kh;a.PlaneHelper=lh;a.ArrowHelper=Wd;a.AxesHelper=mh;a.Shape=me;a.Path=qd;a.ShapePath=nj;a.Font=oj;a.CurvePath=Ud;a.Curve=hb;a.ImageUtils=ne;a.ShapeUtils=Sd;a.WebGLUtils=Rl;a.WireframeGeometry=zf;a.ParametricGeometry=Fg;a.ParametricBufferGeometry=Af;a.TetrahedronGeometry=Hg;a.TetrahedronBufferGeometry=Bf;a.OctahedronGeometry=
Ig;a.OctahedronBufferGeometry=He;a.IcosahedronGeometry=Jg;a.IcosahedronBufferGeometry=Cf;a.DodecahedronGeometry=Kg;a.DodecahedronBufferGeometry=Df;a.PolyhedronGeometry=Gg;a.PolyhedronBufferGeometry=Mc;a.TubeGeometry=Lg;a.TubeBufferGeometry=Ie;a.TorusKnotGeometry=Mg;a.TorusKnotBufferGeometry=Ef;a.TorusGeometry=Ng;a.TorusBufferGeometry=Ff;a.TextGeometry=Sg;a.TextBufferGeometry=Gf;a.SphereGeometry=Tg;a.SphereBufferGeometry=le;a.RingGeometry=Ug;a.RingBufferGeometry=Hf;a.PlaneGeometry=Ea;a.PlaneBufferGeometry=
La;a.LatheGeometry=Vg;a.LatheBufferGeometry=If;a.ShapeGeometry=Le;a.ShapeBufferGeometry=Me;a.ExtrudeGeometry=Ke;a.ExtrudeBufferGeometry=Dd;a.EdgesGeometry=Jf;a.ConeGeometry=Wg;a.ConeBufferGeometry=Xg;a.CylinderGeometry=Ne;a.CylinderBufferGeometry=Td;a.CircleGeometry=Yg;a.CircleBufferGeometry=Kf;a.BoxGeometry=Da;a.CubeGeometry=Da;a.BoxBufferGeometry=Oa;a.ShadowMaterial=Oe;a.SpriteMaterial=ke;a.RawShaderMaterial=Lf;a.ShaderMaterial=vb;a.PointsMaterial=jd;a.MeshPhysicalMaterial=Pe;a.MeshStandardMaterial=
Ed;a.MeshPhongMaterial=kd;a.MeshToonMaterial=Qe;a.MeshNormalMaterial=Re;a.MeshLambertMaterial=Se;a.MeshDepthMaterial=he;a.MeshDistanceMaterial=ie;a.MeshBasicMaterial=tb;a.MeshMatcapMaterial=Te;a.LineDashedMaterial=Ue;a.LineBasicMaterial=Nb;a.Material=Ka;a.Float64BufferAttribute=Aa;a.Float32BufferAttribute=da;a.Uint32BufferAttribute=ta;a.Int32BufferAttribute=pa;a.Uint16BufferAttribute=ja;a.Int16BufferAttribute=X;a.Uint8ClampedBufferAttribute=W;a.Uint8BufferAttribute=Y;a.Int8BufferAttribute=R;a.BufferAttribute=
aa;a.ArcCurve=Of;a.CatmullRomCurve3=Cc;a.CubicBezierCurve=md;a.CubicBezierCurve3=Fd;a.EllipseCurve=Qc;a.LineCurve=Oc;a.LineCurve3=nd;a.QuadraticBezierCurve=od;a.QuadraticBezierCurve3=Gd;a.SplineCurve=pd;a.REVISION="104";a.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};a.CullFaceNone=0;a.CullFaceBack=1;a.CullFaceFront=2;a.CullFaceFrontBack=3;a.FrontFaceDirectionCW=0;a.FrontFaceDirectionCCW=1;a.BasicShadowMap=0;a.PCFShadowMap=1;a.PCFSoftShadowMap=2;a.FrontSide=0;a.BackSide=1;a.DoubleSide=2;a.FlatShading=1;a.SmoothShading=
2;a.NoColors=0;a.FaceColors=1;a.VertexColors=2;a.NoBlending=0;a.NormalBlending=1;a.AdditiveBlending=2;a.SubtractiveBlending=3;a.MultiplyBlending=4;a.CustomBlending=5;a.AddEquation=100;a.SubtractEquation=101;a.ReverseSubtractEquation=102;a.MinEquation=103;a.MaxEquation=104;a.ZeroFactor=200;a.OneFactor=201;a.SrcColorFactor=202;a.OneMinusSrcColorFactor=203;a.SrcAlphaFactor=204;a.OneMinusSrcAlphaFactor=205;a.DstAlphaFactor=206;a.OneMinusDstAlphaFactor=207;a.DstColorFactor=208;a.OneMinusDstColorFactor=
209;a.SrcAlphaSaturateFactor=210;a.NeverDepth=0;a.AlwaysDepth=1;a.LessDepth=2;a.LessEqualDepth=3;a.EqualDepth=4;a.GreaterEqualDepth=5;a.GreaterDepth=6;a.NotEqualDepth=7;a.MultiplyOperation=0;a.MixOperation=1;a.AddOperation=2;a.NoToneMapping=0;a.LinearToneMapping=1;a.ReinhardToneMapping=2;a.Uncharted2ToneMapping=3;a.CineonToneMapping=4;a.ACESFilmicToneMapping=5;a.UVMapping=300;a.CubeReflectionMapping=301;a.CubeRefractionMapping=302;a.EquirectangularReflectionMapping=303;a.EquirectangularRefractionMapping=
304;a.SphericalReflectionMapping=305;a.CubeUVReflectionMapping=306;a.CubeUVRefractionMapping=307;a.RepeatWrapping=1E3;a.ClampToEdgeWrapping=1001;a.MirroredRepeatWrapping=1002;a.NearestFilter=1003;a.NearestMipMapNearestFilter=1004;a.NearestMipMapLinearFilter=1005;a.LinearFilter=1006;a.LinearMipMapNearestFilter=1007;a.LinearMipMapLinearFilter=1008;a.UnsignedByteType=1009;a.ByteType=1010;a.ShortType=1011;a.UnsignedShortType=1012;a.IntType=1013;a.UnsignedIntType=1014;a.FloatType=1015;a.HalfFloatType=
1016;a.UnsignedShort4444Type=1017;a.UnsignedShort5551Type=1018;a.UnsignedShort565Type=1019;a.UnsignedInt248Type=1020;a.AlphaFormat=1021;a.RGBFormat=1022;a.RGBAFormat=1023;a.LuminanceFormat=1024;a.LuminanceAlphaFormat=1025;a.RGBEFormat=1023;a.DepthFormat=1026;a.DepthStencilFormat=1027;a.RedFormat=1028;a.RGB_S3TC_DXT1_Format=33776;a.RGBA_S3TC_DXT1_Format=33777;a.RGBA_S3TC_DXT3_Format=33778;a.RGBA_S3TC_DXT5_Format=33779;a.RGB_PVRTC_4BPPV1_Format=35840;a.RGB_PVRTC_2BPPV1_Format=35841;a.RGBA_PVRTC_4BPPV1_Format=
35842;a.RGBA_PVRTC_2BPPV1_Format=35843;a.RGB_ETC1_Format=36196;a.RGBA_ASTC_4x4_Format=37808;a.RGBA_ASTC_5x4_Format=37809;a.RGBA_ASTC_5x5_Format=37810;a.RGBA_ASTC_6x5_Format=37811;a.RGBA_ASTC_6x6_Format=37812;a.RGBA_ASTC_8x5_Format=37813;a.RGBA_ASTC_8x6_Format=37814;a.RGBA_ASTC_8x8_Format=37815;a.RGBA_ASTC_10x5_Format=37816;a.RGBA_ASTC_10x6_Format=37817;a.RGBA_ASTC_10x8_Format=37818;a.RGBA_ASTC_10x10_Format=37819;a.RGBA_ASTC_12x10_Format=37820;a.RGBA_ASTC_12x12_Format=37821;a.LoopOnce=2200;a.LoopRepeat=
2201;a.LoopPingPong=2202;a.InterpolateDiscrete=2300;a.InterpolateLinear=2301;a.InterpolateSmooth=2302;a.ZeroCurvatureEnding=2400;a.ZeroSlopeEnding=2401;a.WrapAroundEnding=2402;a.TrianglesDrawMode=0;a.TriangleStripDrawMode=1;a.TriangleFanDrawMode=2;a.LinearEncoding=3E3;a.sRGBEncoding=3001;a.GammaEncoding=3007;a.RGBEEncoding=3002;a.LogLuvEncoding=3003;a.RGBM7Encoding=3004;a.RGBM16Encoding=3005;a.RGBDEncoding=3006;a.BasicDepthPacking=3200;a.RGBADepthPacking=3201;a.TangentSpaceNormalMap=0;a.ObjectSpaceNormalMap=
1;a.Face4=function(d,k,p,t,x,y,B){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new H(d,k,p,x,y,B)};a.LineStrip=0;a.LinePieces=1;a.MeshFaceMaterial=function(d){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return d};a.MultiMaterial=function(d){void 0===d&&(d=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");d.isMultiMaterial=!0;d.materials=d;d.clone=function(){return d.slice()};return d};a.PointCloud=
function(d,k){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new xf(d,k)};a.Particle=function(d){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Ag(d)};a.ParticleSystem=function(d,k){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new xf(d,k)};a.PointCloudMaterial=function(d){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new jd(d)};a.ParticleBasicMaterial=function(d){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");
return new jd(d)};a.ParticleSystemMaterial=function(d){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new jd(d)};a.Vertex=function(d,k,p){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new f(d,k,p)};a.DynamicBufferAttribute=function(d,k){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new aa(d,k)).setDynamic(!0)};a.Int8Attribute=function(d,
k){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new R(d,k)};a.Uint8Attribute=function(d,k){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new Y(d,k)};a.Uint8ClampedAttribute=function(d,k){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new W(d,k)};a.Int16Attribute=function(d,k){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");
return new X(d,k)};a.Uint16Attribute=function(d,k){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new ja(d,k)};a.Int32Attribute=function(d,k){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new pa(d,k)};a.Uint32Attribute=function(d,k){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new ta(d,k)};a.Float32Attribute=function(d,
k){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new da(d,k)};a.Float64Attribute=function(d,k){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new Aa(d,k)};a.ClosedSplineCurve3=xm;a.SplineCurve3=ym;a.Spline=Gj;a.AxisHelper=function(d){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new mh(d)};a.BoundingBoxHelper=function(d,k){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");
return new Vd(d,k)};a.EdgesHelper=function(d,k){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new Wb(new Jf(d.geometry),new Nb({color:void 0!==k?k:16777215}))};a.WireframeHelper=function(d,k){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new Wb(new zf(d.geometry),new Nb({color:void 0!==k?k:16777215}))};a.XHRLoader=function(d){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new ld(d)};
a.BinaryTextureLoader=function(d){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new hj(d)};a.GeometryUtils={merge:function(d,k,p){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(k.isMesh){k.matrixAutoUpdate&&k.updateMatrix();var t=k.matrix;k=k.geometry}d.merge(k,t,p)},center:function(d){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");
return d.center()}};a.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(d,k){console.warn("THREE.Projector: .projectVector() is now vector.project().");d.project(k)};this.unprojectVector=function(d,k){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");d.unproject(k)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};a.CanvasRenderer=
function(){console.error("THREE.CanvasRenderer has been removed")};a.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};a.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};a.LensFlare=
function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")};Object.defineProperty(a,"__esModule",{value:!0})}"object"===typeof exports&&"undefined"!==typeof module?ul(exports):"function"===typeof define&&define.amd?define(["exports"],ul):(tl=tl||self,ul(tl.THREE={}));
</script>
<script>//~~WEBPATH~~/tf-imports/OrbitControls.js
THREE.OrbitControls=function(a,b){function c(){return Math.pow(.95,w.zoomSpeed)}function e(oa){w.object.isPerspectiveCamera?K/=oa:w.object.isOrthographicCamera?(w.object.zoom=Math.max(w.minZoom,Math.min(w.maxZoom,w.object.zoom*oa)),w.object.updateProjectionMatrix(),P=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),w.enableZoom=!1)}function f(oa){w.object.isPerspectiveCamera?K*=oa:w.object.isOrthographicCamera?(w.object.zoom=Math.max(w.minZoom,
Math.min(w.maxZoom,w.object.zoom/oa)),w.object.updateProjectionMatrix(),P=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),w.enableZoom=!1)}function g(oa){if(!1!==w.enabled){oa.preventDefault();w.domElement.focus?w.domElement.focus():window.focus();switch(oa.button){case w.mouseButtons.LEFT:if(oa.ctrlKey||oa.metaKey||oa.shiftKey){if(!1===w.enablePan)return;Y.set(oa.clientX,oa.clientY);D=C.PAN}else{if(!1===w.enableRotate)return;S.set(oa.clientX,
oa.clientY);D=C.ROTATE}break;case w.mouseButtons.MIDDLE:if(!1===w.enableZoom)return;ja.set(oa.clientX,oa.clientY);D=C.DOLLY;break;case w.mouseButtons.RIGHT:if(!1===w.enablePan)return;Y.set(oa.clientX,oa.clientY);D=C.PAN}D!==C.NONE&&(document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",l,!1),w.dispatchEvent(A))}}function h(oa){if(!1!==w.enabled)switch(oa.preventDefault(),D){case C.ROTATE:if(!1===w.enableRotate)break;aa.set(oa.clientX,oa.clientY);R.subVectors(aa,S).multiplyScalar(w.rotateSpeed);
oa=w.domElement===document?w.domElement.body:w.domElement;H.theta-=2*Math.PI*R.x/oa.clientHeight;H.phi-=2*Math.PI*R.y/oa.clientHeight;S.copy(aa);w.update();break;case C.DOLLY:if(!1===w.enableZoom)break;pa.set(oa.clientX,oa.clientY);ta.subVectors(pa,ja);0<ta.y?e(c()):0>ta.y&&f(c());ja.copy(pa);w.update();break;case C.PAN:!1!==w.enablePan&&(W.set(oa.clientX,oa.clientY),X.subVectors(W,Y).multiplyScalar(w.panSpeed),Ca(X.x,X.y),Y.copy(W),w.update())}}function l(){!1!==w.enabled&&(document.removeEventListener("mousemove",
h,!1),document.removeEventListener("mouseup",l,!1),w.dispatchEvent(E),D=C.NONE)}function n(oa){!1===w.enabled||!1===w.enableZoom||D!==C.NONE&&D!==C.ROTATE||(oa.preventDefault(),oa.stopPropagation(),w.dispatchEvent(A),0>oa.deltaY?f(c()):0<oa.deltaY&&e(c()),w.update(),w.dispatchEvent(E))}function m(oa){if(!1!==w.enabled&&!1!==w.enableKeys&&!1!==w.enablePan){var ka=!1;switch(oa.keyCode){case w.keys.UP:Ca(0,w.keyPanSpeed);ka=!0;break;case w.keys.BOTTOM:Ca(0,-w.keyPanSpeed);ka=!0;break;case w.keys.LEFT:Ca(w.keyPanSpeed,
0);ka=!0;break;case w.keys.RIGHT:Ca(-w.keyPanSpeed,0),ka=!0}ka&&(oa.preventDefault(),w.update())}}function q(oa){if(!1!==w.enabled){oa.preventDefault();switch(oa.touches.length){case 1:if(!1===w.enableRotate)return;S.set(oa.touches[0].pageX,oa.touches[0].pageY);D=C.TOUCH_ROTATE;break;case 2:if(!1===w.enableZoom&&!1===w.enablePan)return;if(w.enableZoom){var ka=oa.touches[0].pageX-oa.touches[1].pageX,Da=oa.touches[0].pageY-oa.touches[1].pageY;ja.set(0,Math.sqrt(ka*ka+Da*Da))}w.enablePan&&Y.set(.5*(oa.touches[0].pageX+
oa.touches[1].pageX),.5*(oa.touches[0].pageY+oa.touches[1].pageY));D=C.TOUCH_DOLLY_PAN;break;default:D=C.NONE}D!==C.NONE&&w.dispatchEvent(A)}}function r(oa){if(!1!==w.enabled)switch(oa.preventDefault(),oa.stopPropagation(),oa.touches.length){case 1:if(!1===w.enableRotate)break;if(D!==C.TOUCH_ROTATE)break;aa.set(oa.touches[0].pageX,oa.touches[0].pageY);R.subVectors(aa,S).multiplyScalar(w.rotateSpeed);oa=w.domElement===document?w.domElement.body:w.domElement;H.theta-=2*Math.PI*R.x/oa.clientHeight;H.phi-=
2*Math.PI*R.y/oa.clientHeight;S.copy(aa);w.update();break;case 2:if(!1===w.enableZoom&&!1===w.enablePan)break;if(D!==C.TOUCH_DOLLY_PAN)break;if(w.enableZoom){var ka=oa.touches[0].pageX-oa.touches[1].pageX,Da=oa.touches[0].pageY-oa.touches[1].pageY;pa.set(0,Math.sqrt(ka*ka+Da*Da));ta.set(0,Math.pow(pa.y/ja.y,w.zoomSpeed));e(ta.y);ja.copy(pa)}w.enablePan&&(W.set(.5*(oa.touches[0].pageX+oa.touches[1].pageX),.5*(oa.touches[0].pageY+oa.touches[1].pageY)),X.subVectors(W,Y).multiplyScalar(w.panSpeed),Ca(X.x,
X.y),Y.copy(W));w.update();break;default:D=C.NONE}}function v(){!1!==w.enabled&&(w.dispatchEvent(E),D=C.NONE)}function u(oa){!1!==w.enabled&&oa.preventDefault()}this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.target=new THREE.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.25;this.enableZoom=
!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.panSpeed=1;this.screenSpacePanning=!1;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.enableKeys=!0;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.getPolarAngle=function(){return M.phi};this.getAzimuthalAngle=
function(){return M.theta};this.saveState=function(){w.target0.copy(w.target);w.position0.copy(w.object.position);w.zoom0=w.object.zoom};this.reset=function(){w.target.copy(w.target0);w.object.position.copy(w.position0);w.object.zoom=w.zoom0;w.object.updateProjectionMatrix();w.dispatchEvent(z);w.update();D=C.NONE};this.update=function(){var oa=new THREE.Vector3,ka=(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),Da=ka.clone().inverse(),Oa=new THREE.Vector3,Ea=new THREE.Quaternion;
return function(){var La=w.object.position;oa.copy(La).sub(w.target);oa.applyQuaternion(ka);M.setFromVector3(oa);w.autoRotate&&D===C.NONE&&(H.theta-=2*Math.PI/60/60*w.autoRotateSpeed);M.theta+=H.theta;M.phi+=H.phi;M.theta=Math.max(w.minAzimuthAngle,Math.min(w.maxAzimuthAngle,M.theta));M.phi=Math.max(w.minPolarAngle,Math.min(w.maxPolarAngle,M.phi));M.makeSafe();M.radius*=K;M.radius=Math.max(w.minDistance,Math.min(w.maxDistance,M.radius));w.target.add(L);oa.setFromSpherical(M);oa.applyQuaternion(Da);
La.copy(w.target).add(oa);w.object.lookAt(w.target);!0===w.enableDamping?(H.theta*=1-w.dampingFactor,H.phi*=1-w.dampingFactor,L.multiplyScalar(1-w.dampingFactor)):(H.set(0,0,0),L.set(0,0,0));K=1;return P||Oa.distanceToSquared(w.object.position)>J||8*(1-Ea.dot(w.object.quaternion))>J?(w.dispatchEvent(z),Oa.copy(w.object.position),Ea.copy(w.object.quaternion),P=!1,!0):!1}}();this.dispose=function(){w.domElement.removeEventListener("contextmenu",u,!1);w.domElement.removeEventListener("mousedown",g,!1);
w.domElement.removeEventListener("wheel",n,!1);w.domElement.removeEventListener("touchstart",q,!1);w.domElement.removeEventListener("touchend",v,!1);w.domElement.removeEventListener("touchmove",r,!1);document.removeEventListener("mousemove",h,!1);document.removeEventListener("mouseup",l,!1);window.removeEventListener("keydown",m,!1)};var w=this,z={type:"change"},A={type:"start"},E={type:"end"},C={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},D=C.NONE,J=1E-6,M=new THREE.Spherical,
H=new THREE.Spherical,K=1,L=new THREE.Vector3,P=!1,S=new THREE.Vector2,aa=new THREE.Vector2,R=new THREE.Vector2,Y=new THREE.Vector2,W=new THREE.Vector2,X=new THREE.Vector2,ja=new THREE.Vector2,pa=new THREE.Vector2,ta=new THREE.Vector2,da=function(){var oa=new THREE.Vector3;return function(ka,Da){oa.setFromMatrixColumn(Da,0);oa.multiplyScalar(-ka);L.add(oa)}}(),Aa=function(){var oa=new THREE.Vector3;return function(ka,Da){!0===w.screenSpacePanning?oa.setFromMatrixColumn(Da,1):(oa.setFromMatrixColumn(Da,
0),oa.crossVectors(w.object.up,oa));oa.multiplyScalar(ka);L.add(oa)}}(),Ca=function(){var oa=new THREE.Vector3;return function(ka,Da){var Oa=w.domElement===document?w.domElement.body:w.domElement;if(w.object.isPerspectiveCamera){oa.copy(w.object.position).sub(w.target);var Ea=oa.length();Ea*=Math.tan(w.object.fov/2*Math.PI/180);da(2*ka*Ea/Oa.clientHeight,w.object.matrix);Aa(2*Da*Ea/Oa.clientHeight,w.object.matrix)}else w.object.isOrthographicCamera?(da(ka*(w.object.right-w.object.left)/w.object.zoom/
Oa.clientWidth,w.object.matrix),Aa(Da*(w.object.top-w.object.bottom)/w.object.zoom/Oa.clientHeight,w.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),w.enablePan=!1)}}();w.domElement.addEventListener("contextmenu",u,!1);w.domElement.addEventListener("mousedown",g,!1);w.domElement.addEventListener("wheel",n,!1);w.domElement.addEventListener("touchstart",q,!1);w.domElement.addEventListener("touchend",v,!1);w.domElement.addEventListener("touchmove",
r,!1);window.addEventListener("keydown",m,!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;
Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){console.warn("THREE.OrbitControls: .center has been renamed to .target");return this.target}},noZoom:{get:function(){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");return!this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!a}},noRotate:{get:function(){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");
return!this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!a}},noPan:{get:function(){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");return!this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!a}},noKeys:{get:function(){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");
return!this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!a}},staticMoving:{get:function(){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");return!this.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.enableDamping=!a}},dynamicDampingFactor:{get:function(){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");
return this.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.dampingFactor=a}}});
</script>











<script>//~~WEBPATH~~/vz-projector/heap.js
var vl;
(function(a){var b=function(){function e(){this.arr=[]}e.prototype.push=function(f,g){this.arr.push({key:f,value:g});this.bubbleUp(this.arr.length-1)};e.prototype.pop=function(){if(0===this.arr.length)throw Error("pop() called on empty binary heap");var f=this.arr[0],g=this.arr.length-1;this.arr[0]=this.arr[g];this.arr.pop();0<g&&this.bubbleDown(0);return f};e.prototype.peek=function(){return this.arr[0]};e.prototype.popPush=function(f,g){if(0===this.arr.length)throw Error("pop() called on empty binary heap");this.arr[0]=
{key:f,value:g};0<this.arr.length&&this.bubbleDown(0)};e.prototype.size=function(){return this.arr.length};e.prototype.items=function(){return this.arr};e.prototype.swap=function(f,g){var h=this.arr[f];this.arr[f]=this.arr[g];this.arr[g]=h};e.prototype.bubbleDown=function(f){var g=(f<<1)+1,h=g+1,l=f;g<this.arr.length&&this.arr[g].key<this.arr[l].key&&(l=g);h<this.arr.length&&this.arr[h].key<this.arr[l].key&&(l=h);l!==f&&(this.swap(l,f),this.bubbleDown(l))};e.prototype.bubbleUp=function(f){if(!(0>=
f)){var g=f-1>>1;this.arr[f].key<this.arr[g].key&&(this.swap(f,g),this.bubbleUp(g))}};return e}();a.MinHeap=b;var c=function(){function e(f){this.maxHeap=new b;this.k=f}e.prototype.add=function(f,g){this.maxHeap.size()<this.k?this.maxHeap.push(-f,g):f<-this.maxHeap.peek().key&&this.maxHeap.popPush(-f,g)};e.prototype.getMinKItems=function(){var f=this.maxHeap.items();f.sort(function(g,h){return h.key-g.key});return f.map(function(g){return g.value})};e.prototype.getSize=function(){return this.maxHeap.size()};
e.prototype.getLargestKey=function(){return 0===this.maxHeap.size()?null:-this.maxHeap.peek().key};return e}();a.KMin=c})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/label.js
(function(a){var b=function(){function c(e,f,g){this.bound=e;this.cellWidth=f;this.cellHeight=g;this.numHorizCells=Math.ceil(this.boundWidth(e)/f);this.numVertCells=Math.ceil(this.boundHeight(e)/g);this.grid=Array(this.numHorizCells*this.numVertCells)}c.prototype.boundWidth=function(e){return e.hiX-e.loX};c.prototype.boundHeight=function(e){return e.hiY-e.loY};c.prototype.boundsIntersect=function(e,f){return!(e.loX>f.hiX||e.loY>f.hiY||e.hiX<f.loX||e.hiY<f.loY)};c.prototype.insert=function(e,f){void 0===
f&&(f=!1);if(e.hiX<this.bound.loX||e.loX>this.bound.hiX||e.hiY<this.bound.loY||e.loY>this.bound.hiY)return!1;for(var g=this.getCellX(e.loX),h=this.getCellX(e.hiX),l=this.getCellY(e.loY),n=this.getCellY(e.hiY),m=l*this.numHorizCells+g,q=m,r=l;r<=n;r++){for(var v=g;v<=h;v++){var u=this.grid[q++];if(u)for(var w=0;w<u.length;w++)if(this.boundsIntersect(e,u[w]))return!1}q+=this.numHorizCells-(h-g+1)}if(f)return!0;q=m;for(r=l;r<=n;r++){for(v=g;v<=h;v++)this.grid[q]?this.grid[q].push(e):this.grid[q]=[e],
q++;q+=this.numHorizCells-(h-g+1)}return!0};c.prototype.getCellX=function(e){return Math.floor((e-this.bound.loX)/this.cellWidth)};c.prototype.getCellY=function(e){return Math.floor((e-this.bound.loY)/this.cellHeight)};return c}();a.CollisionGrid=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/sptree.js
(function(a){var b=function(){function c(e){if(1>e.length)throw Error("There should be at least 1 data point");this.dim=e[0].length;this.masks=Array(Math.pow(2,this.dim));for(var f=0;f<this.masks.length;++f)this.masks[f]=1<<f;var g=Array(this.dim),h=Number.POSITIVE_INFINITY;for(f=0;f<g.length;++f)g[f]=h;h=Array(this.dim);f=Number.NEGATIVE_INFINITY;for(var l=0;l<h.length;++l)h[l]=f;for(l=0;l<e.length;++l)for(f=0;f<this.dim;++f)g[f]=Math.min(g[f],e[l][f]),h[f]=Math.max(h[f],e[l][f]);l=Array(this.dim);
var n=0;for(f=0;f<this.dim;++f){var m=h[f]-g[f];l[f]=g[f]+m/2;n=Math.max(n,m/2)}this.root={box:{center:l,halfDim:n},point:e[0]};for(l=1;l<e.length;++l)this.insert(this.root,e[l])}c.prototype.visit=function(e,f){void 0===f&&(f=!1);this.visitNode(this.root,e,f)};c.prototype.visitNode=function(e,f,g){if(g)var h=f(e);else{h=Array(this.dim);for(var l=Array(this.dim),n=0;n<this.dim;++n)h[n]=e.box.center[n]-e.box.halfDim,l[n]=e.box.center[n]+e.box.halfDim;h=f(e,h,l)}if(e.children&&!h)for(h=0;h<e.children.length;++h)(l=
e.children[h])&&this.visitNode(l,f,g)};c.prototype.insert=function(e,f){null==e.children&&(e.children=Array(this.masks.length));for(var g=0,h=0;h<this.dim;++h)f[h]>e.box.center[h]&&(g|=this.masks[h]);null==e.children[g]?this.makeChild(e,g,f):this.insert(e.children[g],f)};c.prototype.makeChild=function(e,f,g){for(var h=e.box.center,l=e.box.halfDim/2,n=Array(this.dim),m=0;m<this.dim;++m)n[m]=f&1<<m?h[m]+l:h[m]-l;e.children[f]={box:{center:n,halfDim:l},point:g}};return c}();a.SPTree=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/bh_tsne.js
(function(a){function b(q,r){var v=q[0]-r[0];q=q[1]-r[1];return v*v+q*q}function c(q,r){var v=q[0]-r[0],u=q[1]-r[1];q=q[2]-r[2];return v*v+u*u+q*q}function e(q){if(l)return l=!1,n;var r=2*q()-1,v=2*q()-1,u=r*r+v*v;if(0===u||1<u)return e(q);q=Math.sqrt(-2*Math.log(u)/u);n=v*q;l=!0;return r*q}function f(q,r,v){for(var u=[],w=0;w<q;++w)u.push(3===r?[v,v,v]:[v,v]);return u}function g(q,r,v,u){q[0]+=r*(v[0]-u[0]);q[1]+=r*(v[1]-u[1])}function h(q,r,v,u){q[0]+=r*(v[0]-u[0]);q[1]+=r*(v[1]-u[1]);q[2]+=r*(v[2]-
u[2])}var l=!1,n=0;a.dist2=function(q,r){if(q.length!==r.length)throw Error("Vectors a and b must be of same length");for(var v=0,u=0;u<q.length;++u){var w=q[u]-r[u];v+=w*w}return v};a.dist2_2D=b;a.dist2_3D=c;var m=function(){function q(r){this.iter=0;r=r||{dim:2};this.perplexity=r.perplexity||30;this.epsilon=r.epsilon||10;this.rng=r.rng||Math.random;this.dim=r.dim;if(2===r.dim)this.dist2=b,this.computeForce=g;else if(3===r.dim)this.dist2=c,this.computeForce=h;else throw Error("Only 2D and 3D is supported");
}q.prototype.initDataDist=function(r){var v=r.length;this.nearest=r;for(var u=r.length,w=Math.log(this.perplexity),z=new Float64Array(u*u),A=Array(r[0].length),E=0;E<u;++E){for(var C=r[E],D=-Infinity,J=Infinity,M=1,H=0;;){for(var K=0,L=0;L<C.length;++L){var P=C[L];P=E===P.index?0:Math.exp(-P.dist*M);P=Math.max(P,1E-9);A[L]=P;K+=P}var S=0;for(L=0;L<A.length;++L)A[L]/=K,P=A[L],1E-7<P&&(S-=P*Math.log(P));S>w?(D=M,M=Infinity===J?2*M:(M+J)/2):(J=M,M=-Infinity===D?M/2:(M+D)/2);H++;if(50<=H||1E-4>Math.abs(S-
w))break}for(L=0;L<A.length;++L)P=A[L],D=C[L].index,z[E*u+D]=P}r=2*u;for(E=0;E<u;++E)for(D=E+1;D<u;++D)w=E*u+D,A=D*u+E,C=(z[w]+z[A])/r,z[w]=C,z[A]=C;this.P=z;this.N=v;this.initSolution()};q.prototype.initSolution=function(){for(var r=this.rng,v=this.N*this.dim,u=new Float64Array(v),w=0;w<v;++w)u[w]=1E-4*e(r);this.Y=u;this.gains=f(this.N,this.dim,1);this.ystep=f(this.N,this.dim,0);this.iter=0};q.prototype.getDim=function(){return this.dim};q.prototype.getSolution=function(){return this.Y};q.prototype.perturb=
function(){for(var r=this.N,v=0,u=3===this.dim?[0,0,0]:[0,0],w=0;w<r;++w){for(var z=0,A=0;A<this.dim;++A)z+=Math.pow(this.Y[w*this.dim+A],2);z>v&&(v=z)}var E=Math.pow(v,.5);for(w=0;w<r;++w){for(var C=Array(this.dim);;){for(A=z=0;A<this.dim;++A)C[A]=.1*E*(Math.random()-.5),z+=Math.pow(this.Y[w*this.dim+A]+C[A],2);if(z<v)break}for(A=0;A<this.dim;++A)this.Y[w*this.dim+A]+=C[A],u[A]+=this.Y[w*this.dim+A]}for(w=0;w<r;++w)for(A=0;A<this.dim;++A)this.Y[w*this.dim+A]-=u[A]/r};q.prototype.step=function(){this.iter+=
1;for(var r=this.N,v=this.costGrad(this.Y),u=3===this.dim?[0,0,0]:[0,0],w=0;w<r;++w)for(var z=0;z<this.dim;++z){var A=this.ystep[w][z],E=this.gains[w][z],C=v[w][z];E=(0<C?1:0>C?-1:0)===(0<A?1:0>A?-1:0)?.8*E:E+.2;.01>E&&(E=.01);this.gains[w][z]=E;A=(250>this.iter?.5:.8)*A-this.epsilon*E*v[w][z];this.ystep[w][z]=A;E=w*this.dim+z;this.Y[E]+=A;u[z]+=this.Y[E]}for(w=0;w<r;++w)for(z=0;z<this.dim;++z)this.Y[w*this.dim+z]-=u[z]/r};q.prototype.setSupervision=function(r,v){var u=this;null!=r&&(this.labels=
r,this.labelCounts={},Array.from(new Set(r)).forEach(function(w){return u.labelCounts[w]=0}),r.forEach(function(w){return u.labelCounts[w]+=1}));null!=v&&(this.unlabeledClass=v)};q.prototype.setSuperviseFactor=function(r){null!=r&&(this.superviseFactor=r)};q.prototype.costGrad=function(r){function v(oa){var ka=L[oa];H&&(ta=M[J[oa]],da=z-ta-K);for(var Da=3===pa.dim?[0,0,0]:[0,0],Oa=pa.nearest[oa],Ea=0;Ea<Oa.length;++Ea){var La=Oa[Ea].index,Ka=A[oa*z+La];H&&(J[oa]===D||J[La]===D?Ka*=1/z:J[oa]!==J[La]?
Ka*=Math.max(1/z-C/da,1E-7):J[oa]===J[La]&&(Ka*=Math.min(1/z+C/ta,.9999999)),X+=Ka);La=L[La];var vb=pa.dist2(ka,La);pa.computeForce(Da,Ka/(1+vb),ka,La)}var jc=3===pa.dim?[0,0,0]:[0,0];Y.visit(function(sb){var tb=w.dist2(ka,sb.yCell);if(null==sb.children||0<tb&&.8>sb.rCell/Math.sqrt(tb)){tb=1/(1+tb);var ac=sb.numCells*tb;W+=ac;w.computeForce(jc,ac*tb,ka,sb.yCell);return!0}tb=1/(1+w.dist2(ka,sb.point));W+=tb;w.computeForce(jc,tb*tb,ka,sb.point);return!1},!0);ja[oa]=[Da,jc]}function u(oa){var ka=1;if(null==
oa.children)return oa.numCells=ka,oa.yCell=oa.point,{numCells:ka,yCell:oa.yCell};for(var Da=oa.point.slice(),Oa=0;Oa<oa.children.length;++Oa){var Ea=oa.children[Oa];if(null!=Ea){Ea=u(Ea);ka+=Ea.numCells;for(var La=0;La<w.dim;++La)Da[La]+=Ea.yCell[La]}}oa.numCells=ka;oa.yCell=Da.map(function(Ka){return Ka/ka});return{numCells:ka,yCell:Da}}for(var w=this,z=this.N,A=this.P,E=100>this.iter?4:1,C=this.superviseFactor/100,D=this.unlabeledClass,J=this.labels,M=this.labelCounts,H=null!=C&&0<C&&null!=J&&null!=
M,K=H&&null!=D&&""!==D?M[D]:0,L=Array(z),P=0;P<z;++P){for(var S=P*this.dim,aa=Array(this.dim),R=0;R<this.dim;++R)aa[R]=r[S+R];L[P]=aa}var Y=new a.SPTree(L);u(Y.root);Y.visit(function(oa,ka,Da){oa.rCell=Da[0]-ka[0];return!1});r=[];var W=0,X=0,ja=Array(z),pa=this,ta,da;for(P=0;P<z;++P)v(P);E*=4;H&&(E/=X);S=4/W;for(P=0;P<z;++P){R=ja[P];aa=R[0];var Aa=R[1],Ca=Array(this.dim);for(R=0;R<this.dim;++R)Ca[R]=E*aa[R]-S*Aa[R];r.push(Ca)}return r};return q}();a.TSNE=m})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/logging.js
(function(a){(function(b){function c(h,l,n,m){void 0===l&&(l=null);void 0===n&&(n=null);void 0===m&&(m=!1);if(null==e)console.warn("Can't show modal message before the dom is initialized");else{null==l&&(l=(f++).toString());var q=e.querySelector("#notification-dialog");q.querySelector(".close-button").style.display=m?null:"none";var r=q.querySelector(".progress");r.style.display=m?"none":null;r.active=m?null:!0;q.querySelector("#notification-title").innerHTML=n;n=q.querySelector("#notify-msgs");if(m)n.innerHTML=
"";else{r=n.querySelectorAll(".error");for(var v=0;v<r.length;v++)n.removeChild(r[v])}r="notify-msg-"+l;v=q.querySelector("#"+r);null==v&&(v=document.createElement("div"),v.className="notify-msg "+(m?"error":""),v.id=r,n.insertBefore(v,n.firstChild),m?g=0:g++);null==h?(g--,0===g&&q.close(),v.remove()):(v.innerText=h,q.open());return l}}var e=null,f=0,g=0;b.setDomContainer=function(h){e=h};b.setModalMessage=c;b.setErrorMessage=function(h,l){c(h,null,"Error "+(null!=l?l:""),!0)};b.setWarningMessage=
function(h){var l=e.querySelector("#toast");l.text=h;l.duration=1E4;l.open()}})(a.logging||(a.logging={}))})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/renderContext.js
(function(a){a.LabelRenderParams=function(){return function(b,c,e,f,g,h,l){this.pointIndices=b;this.labelStrings=c;this.scaleFactors=e;this.useSceneOpacityFlags=f;this.defaultFontSize=g;this.fillColors=h;this.strokeColors=l}}();(function(b){b[b.Perspective=0]="Perspective";b[b.Orthographic=1]="Orthographic"})(a.CameraType||(a.CameraType={}));a.RenderContext=function(){return function(b,c,e,f,g,h,l,n,m,q,r,v,u,w){this.camera=b;this.cameraType=c;this.cameraTarget=e;this.screenWidth=f;this.screenHeight=
g;this.nearestCameraSpacePointZ=h;this.farthestCameraSpacePointZ=l;this.backgroundColor=n;this.pointColors=m;this.pointScaleFactors=q;this.labels=r;this.polylineColors=v;this.polylineOpacities=u;this.polylineWidths=w}}()})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotRectangleSelector.js
(function(a){var b=function(){function c(e,f){this.svgElement=e.querySelector("#selector");this.rectElement=document.createElementNS("http://www.w3.org/2000/svg","rect");this.rectElement.style.stroke="#aaaaaa";this.rectElement.style.strokeDasharray="10 5";this.rectElement.style.strokeWidth="2";this.rectElement.style.fill="#dddddd";this.rectElement.style.fillOpacity="0.2";this.svgElement.appendChild(this.rectElement);this.selectionCallback=f;this.isMouseDown=!1}c.prototype.onMouseDown=function(e,f){this.isMouseDown=
!0;this.svgElement.style.display="block";this.startCoordinates=[e,f];this.lastBoundingBox={x:this.startCoordinates[0],y:this.startCoordinates[1],width:1,height:1}};c.prototype.onMouseMove=function(e,f){this.isMouseDown&&(this.lastBoundingBox.x=Math.min(e,this.startCoordinates[0]),this.lastBoundingBox.y=Math.max(f,this.startCoordinates[1]),this.lastBoundingBox.width=Math.max(e,this.startCoordinates[0])-this.lastBoundingBox.x,this.lastBoundingBox.height=this.lastBoundingBox.y-Math.min(f,this.startCoordinates[1]),
this.rectElement.setAttribute("x",""+this.lastBoundingBox.x),this.rectElement.setAttribute("y",""+(this.lastBoundingBox.y-this.lastBoundingBox.height)),this.rectElement.setAttribute("width",""+this.lastBoundingBox.width),this.rectElement.setAttribute("height",""+this.lastBoundingBox.height))};c.prototype.onMouseUp=function(){this.isMouseDown=!1;this.svgElement.style.display="none";this.rectElement.setAttribute("width","0");this.rectElement.setAttribute("height","0");this.selectionCallback(this.lastBoundingBox)};
return c}();a.ScatterPlotRectangleSelector=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/analyticsLogger.js
(function(a){var b=function(){function c(e,f){"undefined"===typeof ga||null==ga?this.pageViewLogging=this.eventLogging=!1:(this.eventLogging=f,this.pageViewLogging=e)}c.prototype.logPageView=function(){this.pageViewLogging&&ga("send",{hitType:"pageview",page:"/v/embeddings"})};c.prototype.logProjectionChanged=function(e){this.eventLogging&&ga("send",{hitType:"event",eventCategory:"Projection",eventAction:"click",eventLabel:e})};c.prototype.logWebGLDisabled=function(){this.eventLogging&&ga("send",
{hitType:"event",eventCategory:"Error",eventAction:"PageLoad",eventLabel:"WebGL_disabled"})};return c}();a.AnalyticsLogger=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/util.js
(function(a){(function(b){b.shuffle=function(e){for(var f=e.length,g,h;f;)h=Math.floor(Math.random()*f--),g=e[f],e[f]=e[h],e[h]=g;return e};b.range=function(e){for(var f=[],g=0;g<e;g++)f.push(g);return f};b.classed=function(e,f,g){var h=e.className.split(" ");if(g){if(f in h)return;h.push(f)}else{f=h.indexOf(f);if(-1===f)return;h.splice(f,1)}e.className=h.join(" ")};b.vector3DToScreenCoords=function(e,f,g,h){var l=window.devicePixelRatio;e=(new THREE.Vector3).copy(h).project(e);return[(e.x+1)/2*f*
l,-((e.y-1)/2*g)*l]};b.vector3FromPackedArray=function(e,f){f*=3;return new THREE.Vector3(e[f],e[f+1],e[f+2])};b.getNearFarPoints=function(e,f,g){var h=Infinity,l=0;g=(new THREE.Vector3).copy(g).sub(f);g=(new THREE.Vector3).copy(g).normalize();for(var n=e.length/3,m=0,q=new THREE.Vector3,r=new THREE.Vector3,v=0;v<n;v++){q.x=e[m];q.y=e[m+1];q.z=e[m+2];m+=3;r.copy(q).sub(f);var u=g.dot(r);0>u||(l=u>l?u:l,h=u<h?u:h)}return[h,l]};b.createTexture=function(e){e=new THREE.Texture(e);e.needsUpdate=!0;e.minFilter=
THREE.LinearFilter;e.generateMipmaps=!1;e.flipY=!1;return e};b.assert=function(e,f){if(!e)throw Error(f||"Assertion failed");};b.getSearchPredicate=function(e,f,g){if(f){var h=new RegExp(e,"i");f=function(l){return h.test(l.metadata[g].toString())}}else e=e.toLowerCase(),f=function(l){return 0<=l.metadata[g].toString().toLowerCase().indexOf(e)};return f};b.runAsyncTask=function(e,f,g,h){void 0===g&&(g=null);void 0===h&&(h=200);var l=null==g;g=a.logging.setModalMessage(e,g);return new Promise(function(n,
m){setTimeout(function(){try{var q=f();l&&a.logging.setModalMessage(null,g);n(q)}catch(r){m(r)}return!0},h)})};b.getURLParams=function(){var e=window.location.search;if(!e)return{};e=-1!==e.indexOf("?")?e.split("?")[1]:e;e.indexOf("#")&&(e=e.split("#")[0]);e=e.split("\x26");for(var f={},g=0;g<e.length;g++){var h=e[g].split("\x3d");f[h[0].toLowerCase()]=decodeURIComponent(h[1])}return f};var c=["/Adagrad"];b.tensorIsGenerated=function(e){for(var f=0;f<c.length;f++)if(0<=e.indexOf(c[f]))return!0;return!1};
b.xor=function(e,f){return(e||f)&&!(e&&f)};b.hasWebGLSupport=function(){try{var e=document.createElement("canvas");return null!=(e.getContext("webgl")||e.getContext("experimental-webgl"))&&"undefined"!==typeof weblas}catch(f){return!1}}})(a.util||(a.util={}))})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/vector.js
(function(a){(function(b){function c(n,m){a.util.assert(n.length===m.length,"Vectors a and b must be of same length");for(var q=0,r=0;r<n.length;++r)q+=n[r]*m[r];return q}function e(n){for(var m=0,q=0;q<n.length;++q)m+=n[q]*n[q];return m}function f(n,m){a.util.assert(n.length===m.length,"Vectors a and b must be of same length");for(var q=0,r=0;r<n.length;++r){var v=n[r]-m[r];q+=v*v}return q}function g(n,m){var q=n[0]-m[0],r=n[1]-m[1];n=n[2]-m[2];return q*q+r*r+n*n}function h(n){for(var m=d3.randomNormal(),
q=new Float32Array(n),r=0;r<n;++r)q[r]=m();return q}function l(n,m){return c(n,m)/Math.sqrt(e(n)*e(m))}b.dot=c;b.sum=function(n){for(var m=0,q=0;q<n.length;++q)m+=n[q];return m};b.add=function(n,m){a.util.assert(n.length===m.length,"Vectors a and b must be of same length");for(var q=new Float32Array(n.length),r=0;r<n.length;++r)q[r]=n[r]+m[r];return q};b.sub=function(n,m){a.util.assert(n.length===m.length,"Vectors a and b must be of same length");for(var q=new Float32Array(n.length),r=0;r<n.length;++r)q[r]=
n[r]-m[r];return q};b.norm2=e;b.dist=function(n,m){return Math.sqrt(f(n,m))};b.dist2=f;b.dist2_2D=function(n,m){var q=n[0]-m[0];n=n[1]-m[1];return q*q+n*n};b.dist2_3D=g;b.dist_3D=function(n,m){return Math.sqrt(g(n,m))};b.dist2WithLimit=function(n,m,q){a.util.assert(n.length===m.length,"Vectors a and b must be of same length");for(var r=0,v=0;v<n.length;++v){var u=n[v]-m[v];r+=u*u;if(r>=q)return-1}return r};b.dist22D=function(n,m){var q=n[0]-m[0];n=n[1]-m[1];return q*q+n*n};b.unit=function(n){var m=
Math.sqrt(e(n));a.util.assert(0<=m,"Norm of the vector must be \x3e 0");for(var q=0;q<n.length;++q)n[q]/=m};b.projectRandom=function(n,m){for(var q=n[0].length,r=n.length,v=Array(r),u=0;u<r;++u)v[u]=new Float32Array(m);for(var w=0;w<m;++w){var z=h(q);for(u=0;u<r;++u)v[u][w]=c(n[u],z)}return v};b.project2d=function(n,m,q){return[c(n,m),c(n,q)]};b.centroid=function(n,m){if(0===n.length)return null;null==m&&(m=function(w){return w});a.util.assert(0<=n.length,"`vectors` must be of length \x3e\x3d 1");
for(var q=new Float32Array(m(n[0]).length),r=0;r<n.length;++r)for(var v=m(n[r]),u=0;u<q.length;++u)q[u]+=v[u];for(u=0;u<q.length;++u)q[u]/=n.length;return q};b.rn=h;b.cosDistNorm=function(n,m){return 1-c(n,m)};b.cosDist=function(n,m){return 1-l(n,m)};b.cosSim=l;b.toTypedArray=function(n,m){for(var q=n.length,r=m(n[0]).length,v=new Float32Array(q*r),u=0;u<q;++u)for(var w=m(n[u]),z=0;z<r;++z)v[u*r+z]=w[z];return v};b.transposeTypedArray=function(n,m,q){for(var r=new Float32Array(n*m),v=0;v<n;++v)for(var u=
0;u<m;++u)r[u*n+v]=q[v*m+u];return r}})(a.vector||(a.vector={}))})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/knn.js
(function(a){(function(b){function c(e,f,g,h){return a.util.runAsyncTask("Finding nearest neighbors...",function(){for(var l=e.length,n=Array(l),m=Array(l),q=0;q<l;q++)m[q]=new a.KMin(f);for(q=0;q<l;q++)for(var r=g(e[q]),v=m[q],u=q+1;u<l;u++){var w=m[u],z=v.getSize()===f?v.getLargestKey()||Number.MAX_VALUE:Number.MAX_VALUE,A=w.getSize()===f?w.getLargestKey()||Number.MAX_VALUE:Number.MAX_VALUE;z=Math.max(z,A);z=h(r,g(e[u]),z);0<=z&&(v.add(z,{index:u,dist:z}),w.add(z,{index:q,dist:z}))}for(q=0;q<l;q++)n[q]=
m[q].getMinKItems();return n})}b.findKNNGPUCosine=function(e,f,g){function h(D){a.util.runAsyncTask("Finding nearest neighbors: "+(100*A).toFixed()+"%",function(){for(var J=C<w?u+1:u,M=new Float32Array(J*n),H=0;H<J;++H)for(var K=g(e[z+H]),L=0;L<n;++L)M[H*n+L]=K[L];H=new weblas.pipeline.Tensor([J,n],M);K=weblas.pipeline.sgemm(1,q,H,null,null);M=K.transfer();H.delete();K.delete();A+=E;for(H=0;H<J;H++){K=new a.KMin(f);L=z+H;for(var P=0;P<l;P++)if(P!==L){var S=1-M[P*J+H];K.add(S,{index:P,dist:S})}r[L]=
K.getMinKItems()}A+=E;z+=J;C++},"knn-gpu").then(function(){C<v?h(D):(a.logging.setModalMessage(null,"knn-gpu"),q.delete(),D(r))},function(){a.logging.setModalMessage(null,"knn-gpu");c(e,f,g,function(J,M){return a.vector.cosDistNorm(J,M)}).then(function(J){D(J)})})}var l=e.length,n=g(e[0]).length,m=a.vector.toTypedArray(e,g),q=new weblas.pipeline.Tensor([l,n],m),r=Array(l),v=Math.ceil(l/256),u=Math.floor(l/v),w=l%v,z=0,A=0,E=1/(2*v),C=0;return new Promise(function(D){return h(D)})};b.findKNN=c;b.findKNNofPoint=
function(e,f,g,h,l){g=new a.KMin(g);for(var n=h(e[f]),m=0;m<e.length;++m)if(m!==f){var q=h(e[m]);q=l(n,q);g.add(q,{index:m,dist:q})}return g.getMinKItems()}})(a.knn||(a.knn={}))})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data.js
ll=this&&this.__awaiter||function(a,b,c,e){return new (c||(c=Promise))(function(f,g){function h(m){try{n(e.next(m))}catch(q){g(q)}}function l(m){try{n(e["throw"](m))}catch(q){g(q)}}function n(m){m.done?f(m.value):(new c(function(q){q(m.value)})).then(h,l)}n((e=e.apply(a,b||[])).next())})};
ml=this&&this.__generator||function(a,b){function c(m){return function(q){return e([m,q])}}function e(m){if(g)throw new TypeError("Generator is already executing.");for(;f;)try{if(g=1,h&&(l=m[0]&2?h["return"]:m[0]?h["throw"]||((l=h["return"])&&l.call(h),0):h.next)&&!(l=l.call(h,m[1])).done)return l;if(h=0,l)m=[m[0]&2,l.value];switch(m[0]){case 0:case 1:l=m;break;case 4:return f.label++,{value:m[1],done:!1};case 5:f.label++;h=m[1];m=[0];continue;case 7:m=f.ops.pop();f.trys.pop();continue;default:if(!(l=
f.trys,l=0<l.length&&l[l.length-1])&&(6===m[0]||2===m[0])){f=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3]))f.label=m[1];else if(6===m[0]&&f.label<l[1])f.label=l[1],l=m;else if(l&&f.label<l[2])f.label=l[2],f.ops.push(m);else{l[2]&&f.ops.pop();f.trys.pop();continue}}m=b.call(a,f)}catch(q){m=[6,q],h=0}finally{g=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}var f={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},g,h,l,n;return n={next:c(0),"throw":c(1),
"return":c(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n};
(function(a){function b(g){for(var h=null,l=0,n=f;l<n.length;l++){var m=n[l];if(m in g&&""!==g[m]){h=g[m];break}}return null==h?null:+h}var c=0<=navigator.userAgent.toLowerCase().indexOf("firefox"),e=a.util.hasWebGLSupport()&&!c;a.TSNE_SAMPLE_SIZE=1E4;a.UMAP_SAMPLE_SIZE=5E3;a.PCA_SAMPLE_SIZE=5E4;a.PCA_SAMPLE_DIM=200;var f=["__next__","__seq_next__"];c=function(){function g(h,l){this.shuffledDataIndices=[];this.projections={};this.tSNEIteration=0;this.tSNEShouldPause=!1;this.tSNEShouldStop=!0;this.superviseInput=
"";this.dim=[0,0];this.hasUmapRun=this.hasTSNERun=!1;this.points=h;this.shuffledDataIndices=a.util.shuffle(a.util.range(this.points.length));this.sequences=this.computeSequences(h);this.dim=[this.points.length,this.points[0].vector.length];this.spriteAndMetadataInfo=l}g.prototype.computeSequences=function(h){for(var l=new Int8Array(h.length),n={},m=[],q=0;q<h.length;q++)if(!l[q]){l[q]=1;var r=b(h[q].metadata);if(null!=r)if(r in n)r=n[r],r.pointIndices.unshift(q),n[q]=r;else{r={pointIndices:[]};n[q]=
r;m.push(r);for(var v=q;h[v];)r.pointIndices.push(v),v=b(h[v].metadata),null!=v?l[v]=1:v=-1}}return m};g.prototype.projectionCanBeRendered=function(h){return"tsne"!==h?!0:0<this.tSNEIteration};g.prototype.getSubset=function(h){var l=this;h=(null!=h&&0<h.length?h.map(function(n){return l.points[n]}):this.points).map(function(n){return{metadata:n.metadata,index:n.index,vector:n.vector.slice(),projections:{}}});return new g(h,this.spriteAndMetadataInfo)};g.prototype.normalize=function(){var h=a.vector.centroid(this.points,
function(m){return m.vector});if(null==h)throw Error("centroid should not be null");for(var l=0;l<this.points.length;++l){var n=this.points[l];n.vector=a.vector.sub(n.vector,h);0<a.vector.norm2(n.vector)&&a.vector.unit(n.vector)}};g.prototype.projectLinear=function(h,l){this.projections[l]=!0;this.points.forEach(function(n){n.projections[l]=a.vector.dot(n.vector,h)})};g.prototype.projectPCA=function(){var h=this;return null!=this.projections["pca-0"]?Promise.resolve(null):a.util.runAsyncTask("Computing PCA...",
function(){var l=h.points[0].vector.length,n=h.shuffledDataIndices.map(function(w){return h.points[w].vector});l>a.PCA_SAMPLE_DIM&&(n=a.vector.projectRandom(n,a.PCA_SAMPLE_DIM));var m=n.slice(0,a.PCA_SAMPLE_SIZE),q=numeric.dot,r=numeric.transpose;l=numeric.svd;var v=numeric.div;q=q(r(m),m);m=v(q,m.length);m=l(m);v=m.S;for(l=q=0;l<v.length;++l)q+=v[l];for(l=0;l<v.length;++l)v[l]/=q;h.fracVariancesExplained=v;var u=m.U;n=n.map(function(w){for(var z=new Float32Array(10),A=0;10>A;A++){for(var E=0,C=0;C<
w.length;C++)E+=w[C]*u[C][A];z[A]=E}return z});for(m=0;10>m;m++)for(v="pca-"+m,h.projections[v]=!0,l=0;l<n.length;l++)h.points[h.shuffledDataIndices[l]].projections[v]=n[l][m]})};g.prototype.projectTSNE=function(h,l,n,m){function q(){if(r.tSNEShouldStop)r.projections.tsne=!1,m(null),r.tsne=null,r.hasTSNERun=!1;else{if(!r.tSNEShouldPause){r.tsne.step();var w=r.tsne.getSolution();u.forEach(function(z,A){z=r.points[z];z.projections["tsne-0"]=w[A*n];z.projections["tsne-1"]=w[A*n+1];3===n&&(z.projections["tsne-2"]=
w[A*n+2])});r.projections.tsne=!0;r.tSNEIteration++;m(r.tSNEIteration)}requestAnimationFrame(q)}}var r=this;this.hasTSNERun=!0;var v=Math.floor(3*h);this.tsne=new a.TSNE({epsilon:l,perplexity:h,dim:n});this.tsne.setSupervision(this.superviseLabels,this.superviseInput);this.tsne.setSuperviseFactor(this.superviseFactor);this.tSNEShouldStop=this.tSNEShouldPause=!1;this.tSNEIteration=0;var u=this.shuffledDataIndices.slice(0,a.TSNE_SAMPLE_SIZE);h=u.map(function(w){return r.points[w]});this.computeKnn(h,
v).then(function(w){a.util.runAsyncTask("Initializing T-SNE...",function(){r.tsne.initDataDist(w)}).then(q)})};g.prototype.projectUmap=function(h,l,n){ll(this,void 0,void 0,function(){var m,q,r,v,u,w,z,A=this;return ml(this,function(E){switch(E.label){case 0:return this.hasUmapRun=!0,this.umap=new UMAP({nComponents:h,nNeighbors:l}),m=0,q=10,r=this.shuffledDataIndices.slice(0,a.UMAP_SAMPLE_SIZE),v=r.map(function(C){return A.points[C]}),u=v.map(function(C){return Array.from(C.vector)}),[4,this.computeKnn(v,
l)];case 1:return w=E.sent(),[4,a.util.runAsyncTask("Initializing UMAP...",function(){var C=w.map(function(J){return J.map(function(M){return M.index})}),D=w.map(function(J){return J.map(function(M){return M.dist})});A.umap.setPrecomputedKNN(C,D);return A.umap.initializeFit(u)},"umap-optimization")];case 2:return z=E.sent(),[2,new Promise(function(C,D){function J(){for(var M=Math.min(q,z-m),H=0;H<M;H++)m=A.umap.step();a.util.runAsyncTask("Optimizing UMAP (epoch "+m+" of "+z+")",function(){if(m<z)requestAnimationFrame(J);
else{var K=A.umap.getEmbedding();r.forEach(function(L,P){L=A.points[L];L.projections["umap-0"]=K[P][0];L.projections["umap-1"]=K[P][1];3===h&&(L.projections["umap-2"]=K[P][2])});A.projections.umap=!0;a.logging.setModalMessage(null,"umap-optimization");A.hasUmapRun=!0;n(m);C()}},"umap-optimization",0).catch(function(K){a.logging.setModalMessage(null,"umap-optimization");D(K)})}requestAnimationFrame(J)})]}})})};g.prototype.computeKnn=function(h,l){return ll(this,void 0,void 0,function(){var n,m;return ml(this,
function(q){switch(q.label){case 0:return n=this.nearest&&this.nearest.length?this.nearest[0].length:0,null!=this.nearest&&n>=l?[2,Promise.resolve(this.nearest.map(function(r){return r.slice(0,l)}))]:[3,1];case 1:return[4,e?a.knn.findKNNGPUCosine(h,l,function(r){return r.vector}):a.knn.findKNN(h,l,function(r){return r.vector},function(r,v){return a.vector.cosDistNorm(r,v)})];case 2:return this.nearest=m=q.sent(),[2,Promise.resolve(m)]}})})};g.prototype.perturbTsne=function(){var h=this;if(this.hasTSNERun&&
this.tsne){this.tsne.perturb();var l=this.tsne.getDim(),n=this.tsne.getSolution();this.shuffledDataIndices.slice(0,a.TSNE_SAMPLE_SIZE).forEach(function(m,q){m=h.points[m];m.projections["tsne-0"]=n[q*l];m.projections["tsne-1"]=n[q*l+1];3===l&&(m.projections["tsne-2"]=n[q*l+2])})}};g.prototype.setSupervision=function(h,l){var n=this;if(null!=h){var m=this.shuffledDataIndices.slice(0,a.TSNE_SAMPLE_SIZE),q=Array(m.length);m.forEach(function(r,v){return q[v]=n.points[r].metadata[h].toString()});this.superviseLabels=
q}null!=l&&(this.superviseInput=l);this.tsne&&this.tsne.setSupervision(this.superviseLabels,this.superviseInput)};g.prototype.setSuperviseFactor=function(h){null!=h&&(this.superviseFactor=h,this.tsne&&this.tsne.setSuperviseFactor(h))};g.prototype.mergeMetadata=function(h){var l=this;if(h.pointsInfo.length!==this.points.length){var n="Number of tensors ("+this.points.length+") do not match the number of lines in metadata"+(" ("+h.pointsInfo.length+").");if(1===h.stats.length&&this.points.length+1===
h.pointsInfo.length)return a.logging.setErrorMessage(n+" Single column metadata should not have a header row.","merging metadata"),!1;if(1<h.stats.length&&this.points.length-1===h.pointsInfo.length)return a.logging.setErrorMessage(n+" Multi-column metadata should have a header row with column labels.","merging metadata"),!1;a.logging.setWarningMessage(n)}this.spriteAndMetadataInfo=h;h.pointsInfo.slice(0,this.points.length).forEach(function(m,q){return l.points[q].metadata=m});return!0};g.prototype.stopTSNE=
function(){this.tSNEShouldStop=!0};g.prototype.findNeighbors=function(h,l,n){return a.knn.findKNNofPoint(this.points,h,n,function(m){return m.vector},l).slice(0,n)};g.prototype.query=function(h,l,n){var m=a.util.getSearchPredicate(h,l,n),q=[];this.points.forEach(function(r,v){m(r)&&q.push(v)});return q};return g}();a.DataSet=c;a.Projection=function(){return function(g,h,l,n){this.projectionType=g;this.projectionComponents=h;this.dimensionality=l;this.dataSet=n}}();a.State=function(){return function(){this.label=
"";this.isSelected=!1;this.tSNELearningRate=this.tSNEPerplexity=this.tSNEIteration=0;this.umapIs3d=this.tSNEis3d=!0;this.umapNeighbors=15;this.pcaComponentDimensions=[];this.projections=[];this.selectedPoints=[]}}();a.getProjectionComponents=function(g,h){if(3<h.length)throw new RangeError("components length must be \x3c\x3d 3");var l=[null,null,null];g="custom"===g?"linear":g;for(var n=0;n<h.length;++n)null!=h[n]&&(l[n]=g+"-"+h[n]);return l};a.stateGetAccessorDimensions=function(g){switch(g.selectedProjection){case "pca":var h=
g.pcaComponentDimensions.slice();break;case "tsne":h=[0,1];g.tSNEis3d&&h.push(2);break;case "umap":h=[0,1];g.umapIs3d&&h.push(2);break;case "custom":h=["x","y"];break;default:throw Error("Unexpected fallthrough");}return h}})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider.js
(function(a){function b(l,n,m,q){void 0===m&&(m=1E6);void 0===q&&(q="\n");return new Promise(function(r){function v(A,E){A=new Blob([l.slice(A,A+E)]);E=new FileReader;E.onload=function(C){C=C.target.result;u+=m;C=C.split(q);var D=z+C[0];if(1===C.length)z=D,v(u,m);else{z=C[C.length-1];n(D);for(D=1;D<C.length-1;D++)n(C[D]);u>=w?(z&&n(z),r()):v(u,m)}};E.readAsText(A)}var u=0,w=l.byteLength-1,z="";v(u,m)})}function c(l,n){void 0===n&&(n="\t");a.logging.setModalMessage("Parsing tensors...",a.TENSORS_MSG_ID);
return new Promise(function(m){var q=[],r;b(l,function(v){v=v.trim();if(""!==v){v=v.split(n);var u={metadata:{},vector:null,index:q.length,projections:null};isNaN(v[0])||r===v.length-1?(u.metadata.label=v[0],u.vector=new Float32Array(v.slice(1).map(Number))):u.vector=new Float32Array(v.map(Number));q.push(u);null==r&&(r=u.vector.length);if(r!==u.vector.length)throw a.logging.setModalMessage("Parsing failed. Vector dimensions do not match"),Error("Parsing failed");if(1>=r)throw a.logging.setModalMessage("Parsing failed. Found a vector with only one dimension?"),
Error("Parsing failed");}}).then(function(){a.logging.setModalMessage(null,a.TENSORS_MSG_ID);m(q)})})}function e(l,n){return a.util.runAsyncTask("Parsing tensors...",function(){for(var m=l.length/n,q=[],r=0,v=0;v<m;++v)q.push({metadata:{},vector:l.subarray(r,r+n),index:v,projections:null}),r+=n;return q},a.TENSORS_MSG_ID).then(function(m){a.logging.setModalMessage(null,a.TENSORS_MSG_ID);return m})}function f(l,n){var m=l.map(function(r){return{name:r,isNumeric:!0,tooManyUniqueValues:!1,min:Number.POSITIVE_INFINITY,
max:Number.NEGATIVE_INFINITY}}),q=l.map(function(){return{}});n.forEach(function(r){l.forEach(function(v,u){var w=m[u];u=q[u];var z=r[v];null!=z&&(w.tooManyUniqueValues||(z in u?u[z]++:u[z]=1,50<Object.keys(u).length&&(w.tooManyUniqueValues=!0)),isNaN(z)?w.isNumeric=!1:(r[v]=+z,w.min=Math.min(w.min,+z),w.max=Math.max(w.max,+z)))})});m.forEach(function(r,v){r.uniqueEntries=Object.keys(q[v]).map(function(u){return{label:u,count:q[v][u]}})});return m}function g(l){a.logging.setModalMessage("Parsing metadata...",
a.METADATA_MSG_ID);return new Promise(function(n){var m=[],q=!1,r=0,v=["label"];b(l,function(u){if(0!==u.trim().length){if(0===r&&(q=0<=u.indexOf("\t"))){v=u.split("\t");r++;return}r++;var w=u.split("\t"),z={};m.push(z);v.forEach(function(A,E){E=w[E];z[A]=""===E?null:E})}}).then(function(){a.logging.setModalMessage(null,a.METADATA_MSG_ID);n({stats:f(v,m),pointsInfo:m})})})}function h(l){return new Promise(function(n,m){var q=new Image;q.onload=function(){return n(q)};q.onerror=function(r){return m(r)};
q.crossOrigin="";q.src=l})}a.METADATA_MSG_ID="metadata";a.TENSORS_MSG_ID="tensors";a.retrieveTensorAsBytes=function(l,n,m){a.logging.setModalMessage("Fetching tensor values...",a.TENSORS_MSG_ID);var q=new XMLHttpRequest;q.open("GET",n);q.responseType="arraybuffer";q.onprogress=function(r){r.lengthComputable&&a.logging.setModalMessage("Fetching tensor values: "+(100*r.loaded/r.total).toFixed(1)+"%",a.TENSORS_MSG_ID)};q.onload=function(){if(200!==q.status){var r=String.fromCharCode.apply(null,new Uint8Array(q.response));
a.logging.setErrorMessage(r,"fetching tensors")}else{try{r=new Float32Array(q.response)}catch(w){a.logging.setErrorMessage(w,"parsing tensor bytes");return}var v=l.tensorShape[1],u=r.length/v;l.tensorShape[0]>u&&a.logging.setWarningMessage("Showing the first "+u.toLocaleString()+(" of "+l.tensorShape[0].toLocaleString()+" data points"));e(r,v).then(function(w){m(new a.DataSet(w))})}};q.send()};a.parseRawTensors=function(l,n){c(l).then(function(m){n(new a.DataSet(m))})};a.parseRawMetadata=function(l,
n){g(l).then(function(m){return n(m)})};a.parseTensors=c;a.parseTensorsFromFloat32Array=e;a.analyzeMetadata=f;a.parseMetadata=g;a.fetchImage=h;a.retrieveSpriteAndMetadataInfo=function(l,n,m,q){var r=Promise.resolve({});l&&(r=new Promise(function(w,z){a.logging.setModalMessage("Fetching metadata...",a.METADATA_MSG_ID);var A=new XMLHttpRequest;A.open("GET",l);A.responseType="arraybuffer";A.onreadystatechange=function(){if(4===A.readyState)if(200===A.status)w(g(A.response));else{var E=new FileReader;
E.onload=function(){a.logging.setErrorMessage(E.result,"fetching metadata");z()};E.readAsText(new Blob([A.response]))}};A.send(null)}));var v=null,u=null;n&&(v=a.logging.setModalMessage("Fetching sprite image..."),u=h(n));Promise.all([r,u]).then(function(w){v&&a.logging.setModalMessage(null,v);var z=w[0];if((w=w[1])&&(8192<w.height||8192<w.width))a.logging.setModalMessage("Error: Sprite image of dimensions "+w.width+"px x "+(w.height+"px exceeds maximum dimensions ")+"8192px x 8192px");else{z.spriteImage=
w;z.spriteMetadata=m;try{q(z)}catch(A){a.logging.setModalMessage(String(A))}}})}})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider-demo.js
(function(a){var b=function(){function c(e){this.projectorConfigPath=e}c.prototype.getEmbeddingInfo=function(e){for(var f=this.projectorConfig.embeddings,g=0;g<f.length;g++){var h=f[g];if(h.tensorName===e)return h}return null};c.prototype.retrieveRuns=function(e){e(["Demo"])};c.prototype.retrieveProjectorConfig=function(e,f){var g=this,h=a.logging.setModalMessage("Fetching projector config..."),l=new XMLHttpRequest;l.open("GET",this.projectorConfigPath);l.onerror=function(n){n=n.message;null!=l.responseText&&
(n="Cannot fetch projector config, possibly a Cross-Origin request error.");a.logging.setErrorMessage(n,"fetching projector config")};l.onload=function(){var n=JSON.parse(l.responseText);a.logging.setModalMessage(null,h);g.projectorConfig=n;f(n)};l.send()};c.prototype.retrieveTensor=function(e,f,g){e=this.getEmbeddingInfo(f);var h=""+e.tensorPath;if(".bytes"===e.tensorPath.substr(-6))a.retrieveTensorAsBytes(this.getEmbeddingInfo(f),h,g);else{a.logging.setModalMessage("Fetching tensors...",a.TENSORS_MSG_ID);
var l=new XMLHttpRequest;l.open("GET",h);l.responseType="arraybuffer";l.onerror=function(){a.logging.setErrorMessage(l.responseText,"fetching tensors")};l.onload=function(){a.parseTensors(l.response).then(function(n){g(new a.DataSet(n))})};l.send()}};c.prototype.retrieveSpriteAndMetadata=function(e,f,g){e=this.getEmbeddingInfo(f);f=null;e.sprite&&e.sprite.imagePath&&(f=e.sprite.imagePath);a.retrieveSpriteAndMetadataInfo(e.metadataPath,f,e.sprite,g)};c.prototype.getBookmarks=function(e,f,g){e=this.getEmbeddingInfo(f);
var h=a.logging.setModalMessage("Fetching bookmarks..."),l=new XMLHttpRequest;l.open("GET",e.bookmarksPath);l.onerror=function(){a.logging.setErrorMessage(l.responseText)};l.onload=function(){var n=JSON.parse(l.responseText);a.logging.setModalMessage(null,h);g(n)};l.send()};return c}();a.DemoDataProvider=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider-proto.js
(function(a){var b=function(){function c(e){this.dataProto=e}c.prototype.retrieveRuns=function(e){e(["proto"])};c.prototype.retrieveProjectorConfig=function(e,f){f({modelCheckpointPath:"proto",embeddings:[{tensorName:"proto",tensorShape:this.dataProto.shape,metadataPath:"proto"}]})};c.prototype.retrieveTensor=function(e,f,g){g(this.flatArrayToDataset(this.dataProto.tensor))};c.prototype.retrieveSpriteAndMetadata=function(e,f,g){var h=this,l=this.dataProto.metadata.columns.map(function(q){return q.name}),
n=this.dataProto.shape[0],m=Array(n);this.dataProto.metadata.columns.forEach(function(q){for(var r=q.numericValues||q.stringValues,v=0;v<n;v++)m[v]=m[v]||{},m[v][q.name]=r[v]});e=Promise.resolve(null);null!=this.dataProto.metadata.sprite&&(e=new Promise(function(q,r){var v=new Image;v.onload=function(){return q(v)};v.onerror=function(){return r("Failed converting base64 to an image")};v.src=h.dataProto.metadata.sprite.imageBase64}));e.then(function(q){var r={stats:a.analyzeMetadata(l,m),pointsInfo:m};
null!=q&&(r.spriteImage=q,r.spriteMetadata={singleImageDim:h.dataProto.metadata.sprite.singleImageDim,imagePath:"proto"});g(r)})};c.prototype.getBookmarks=function(e,f,g){g([])};c.prototype.flatArrayToDataset=function(e){var f=[],g=this.dataProto.shape[0],h=this.dataProto.shape[1];if(g*h!==e.length)throw"The shape doesn't match the length of the flattened array";for(var l=0;l<g;l++){var n=l*h;f.push({vector:new Float32Array(e.slice(n,n+h)),metadata:{},projections:null,index:l})}return new a.DataSet(f)};
return c}();a.ProtoDataProvider=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider-server.js
(function(a){a.LIMIT_NUM_POINTS=1E5;var b=function(){function c(e){this.runProjectorConfigCache={};this.routePrefix=e}c.prototype.getEmbeddingInfo=function(e,f,g){this.retrieveProjectorConfig(e,function(h){h=h.embeddings;for(var l=0;l<h.length;l++){var n=h[l];if(n.tensorName===f){g(n);return}}g(null)})};c.prototype.retrieveRuns=function(e){var f=a.logging.setModalMessage("Fetching runs..."),g=new XMLHttpRequest;g.open("GET",this.routePrefix+"/runs");g.onerror=function(){a.logging.setErrorMessage(g.responseText,
"fetching runs")};g.onload=function(){var h=JSON.parse(g.responseText);a.logging.setModalMessage(null,f);e(h)};g.send()};c.prototype.retrieveProjectorConfig=function(e,f){var g=this;if(e in this.runProjectorConfigCache)f(this.runProjectorConfigCache[e]);else{var h=a.logging.setModalMessage("Fetching projector config..."),l=new XMLHttpRequest;l.open("GET",this.routePrefix+"/info?run\x3d"+e);l.onerror=function(){a.logging.setErrorMessage(l.responseText,"fetching projector config")};l.onload=function(){var n=
JSON.parse(l.responseText);a.logging.setModalMessage(null,h);g.runProjectorConfigCache[e]=n;f(n)};l.send()}};c.prototype.retrieveTensor=function(e,f,g){var h=this;this.getEmbeddingInfo(e,f,function(l){a.retrieveTensorAsBytes(l,h.routePrefix+"/tensor?run\x3d"+e+"\x26name\x3d"+f+("\x26num_rows\x3d"+a.LIMIT_NUM_POINTS),g)})};c.prototype.retrieveSpriteAndMetadata=function(e,f,g){var h=this;this.getEmbeddingInfo(e,f,function(l){var n=null;l.metadataPath&&(n=h.routePrefix+"/metadata?"+("run\x3d"+e+"\x26name\x3d"+
f+"\x26num_rows\x3d"+a.LIMIT_NUM_POINTS));var m=null;l.sprite&&l.sprite.imagePath&&(m=h.routePrefix+"/sprite_image?run\x3d"+e+"\x26name\x3d"+f);a.retrieveSpriteAndMetadataInfo(n,m,l.sprite,g)})};c.prototype.getBookmarks=function(e,f,g){var h=a.logging.setModalMessage("Fetching bookmarks..."),l=new XMLHttpRequest;l.open("GET",this.routePrefix+"/bookmarks?run\x3d"+e+"\x26name\x3d"+f);l.onerror=function(){a.logging.setErrorMessage(l.responseText,"fetching bookmarks")};l.onload=function(){a.logging.setModalMessage(null,
h);var n=JSON.parse(l.responseText);g(n)};l.send()};return c}();a.ServerDataProvider=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/projectorEventContext.js
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlot.js
(function(a){var b=new THREE.Vector3(.45,.9,1.6),c=new THREE.Vector3(0,0,0),e=new THREE.Vector3(0,0,4),f=new THREE.Vector3(0,0,0),g;(function(n){n[n.AREA_SELECT=0]="AREA_SELECT";n[n.CAMERA_AND_CLICK_SELECT=1]="CAMERA_AND_CLICK_SELECT"})(g=a.MouseMode||(a.MouseMode={}));var h=function(){return function(){this.orthographic=!1}}();a.CameraDef=h;var l=function(){function n(m,q){var r=this;this.container=m;this.projectorEventContext=q;this.visualizers=[];this.onCameraMoveListeners=[];this.backgroundColor=
16777215;this.dimensionality=3;this.cameraDef=null;this.isDragSequence=this.mouseIsDown=this.selecting=this.orbitAnimationOnNextCameraCreation=!1;this.getLayoutValues();this.scene=new THREE.Scene;this.renderer=new THREE.WebGLRenderer({alpha:!0,premultipliedAlpha:!1,antialias:!1});this.renderer.setClearColor(16777215,1);this.container.appendChild(this.renderer.domElement);this.light=new THREE.PointLight(16772287,1,0);this.scene.add(this.light);this.setDimensions(3);this.recreateCamera(this.makeDefaultCameraDef(this.dimensionality));
this.renderer.render(this.scene,this.camera);this.rectangleSelector=new a.ScatterPlotRectangleSelector(this.container,function(v){return r.selectBoundingBox(v)});this.addInteractionListeners()}n.prototype.addInteractionListeners=function(){this.container.addEventListener("mousemove",this.onMouseMove.bind(this));this.container.addEventListener("mousedown",this.onMouseDown.bind(this));this.container.addEventListener("mouseup",this.onMouseUp.bind(this));this.container.addEventListener("click",this.onClick.bind(this));
window.addEventListener("keydown",this.onKeyDown.bind(this),!1);window.addEventListener("keyup",this.onKeyUp.bind(this),!1)};n.prototype.addCameraControlsEventListeners=function(m){var q=this;m.addEventListener("start",function(){q.stopOrbitAnimation();q.onCameraMoveListeners.forEach(function(r){return r(q.camera.position,m.target)})});m.addEventListener("change",function(){q.render()});m.addEventListener("end",function(){})};n.prototype.makeOrbitControls=function(m,q,r){null!=this.orbitCameraControls&&
this.orbitCameraControls.dispose();var v=new THREE.OrbitControls(m,this.renderer.domElement);v.target0=new THREE.Vector3(q.target[0],q.target[1],q.target[2]);v.position0=(new THREE.Vector3).copy(m.position);v.zoom0=q.zoom;v.enableRotate=r;v.autoRotate=!1;v.rotateSpeed=1;r?(v.mouseButtons.ORBIT=THREE.MOUSE.LEFT,v.mouseButtons.PAN=THREE.MOUSE.RIGHT):(v.mouseButtons.ORBIT=null,v.mouseButtons.PAN=THREE.MOUSE.LEFT);v.reset();this.camera=m;this.orbitCameraControls=v;this.addCameraControlsEventListeners(this.orbitCameraControls)};
n.prototype.makeCamera3D=function(m,q,r){q=new THREE.PerspectiveCamera(70,q/r,.01,100);q.position.set(m.position[0],m.position[1],m.position[2]);r=new THREE.Vector3(m.target[0],m.target[1],m.target[2]);q.lookAt(r);q.zoom=m.zoom;q.updateProjectionMatrix();this.camera=q;this.makeOrbitControls(q,m,!0)};n.prototype.makeCamera2D=function(m,q,r){var v=new THREE.Vector3(m.target[0],m.target[1],m.target[2]);q/=r;r=-1.2;var u=1.2,w=-1.2,z=1.2;1<q?(r*=q,u*=q):(z/=q,w/=q);q=new THREE.OrthographicCamera(r,u,
z,w,-1E3,1E3);q.position.set(m.position[0],m.position[1],m.position[2]);q.up=new THREE.Vector3(0,1,0);q.lookAt(v);q.zoom=m.zoom;q.updateProjectionMatrix();this.camera=q;this.makeOrbitControls(q,m,!1)};n.prototype.makeDefaultCameraDef=function(m){var q=new h;q.orthographic=2===m;q.zoom=1;q.orthographic?(q.position=[e.x,e.y,e.z],q.target=[f.x,f.y,f.z]):(q.position=[b.x,b.y,b.z],q.target=[c.x,c.y,c.z]);return q};n.prototype.recreateCamera=function(m){m.orthographic?this.makeCamera2D(m,this.width,this.height):
this.makeCamera3D(m,this.width,this.height);this.orbitCameraControls.minDistance=.05;this.orbitCameraControls.maxDistance=10;this.orbitCameraControls.update();this.orbitAnimationOnNextCameraCreation&&this.startOrbitAnimation()};n.prototype.onClick=function(m,q){void 0===q&&(q=!0);m&&this.selecting||(!this.isDragSequence&&q&&this.projectorEventContext.notifySelectionChanged(null!=this.nearestPoint?[this.nearestPoint]:[]),this.isDragSequence=!1,this.render())};n.prototype.onMouseDown=function(m){this.isDragSequence=
!1;this.mouseIsDown=!0;this.selecting?(this.orbitCameraControls.enabled=!1,this.rectangleSelector.onMouseDown(m.offsetX,m.offsetY),this.setNearestPointToMouse(m)):!m.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===THREE.MOUSE.RIGHT?(this.orbitCameraControls.mouseButtons.ORBIT=THREE.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=THREE.MOUSE.RIGHT):m.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===THREE.MOUSE.LEFT&&(this.orbitCameraControls.mouseButtons.ORBIT=
THREE.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=THREE.MOUSE.LEFT)};n.prototype.onMouseUp=function(){this.selecting&&(this.orbitCameraControls.enabled=!0,this.rectangleSelector.onMouseUp(),this.render());this.mouseIsDown=!1};n.prototype.onMouseMove=function(m){this.isDragSequence=this.mouseIsDown;this.selecting&&this.mouseIsDown?(this.rectangleSelector.onMouseMove(m.offsetX,m.offsetY),this.render()):this.mouseIsDown||(this.setNearestPointToMouse(m),this.projectorEventContext.notifyHoverOverPoint(this.nearestPoint))};
n.prototype.onKeyDown=function(m){17===m.keyCode&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=THREE.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=THREE.MOUSE.LEFT);16===m.keyCode&&(this.selecting=!0,this.container.style.cursor="crosshair")};n.prototype.onKeyUp=function(m){17===m.keyCode&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=THREE.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=THREE.MOUSE.RIGHT);16===m.keyCode&&(this.selecting=this.getMouseMode()===
g.AREA_SELECT,this.selecting||(this.container.style.cursor="default"),this.render())};n.prototype.getPointIndicesFromPickingTexture=function(m){if(null==this.worldSpacePointPositions)return null;var q=this.worldSpacePointPositions.length/3,r=window.devicePixelRatio||1,v=Math.floor(m.width*r),u=Math.floor(m.height*r),w=new Uint8Array(v*u*4);this.renderer.readRenderTargetPixels(this.pickingTexture,Math.floor(m.x*r),this.pickingTexture.height-Math.floor(m.y*r),v,u,w);m=new Uint8Array(this.worldSpacePointPositions.length);
for(r=0;r<v*u;r++){var z=w[4*r]<<16|w[4*r+1]<<8|w[4*r+2];16777215!==z&&z<q&&(m[z]=1)}q=[];for(r=0;r<m.length;r++)1===m[r]&&q.push(r);return q};n.prototype.selectBoundingBox=function(m){m=this.getPointIndicesFromPickingTexture(m);this.projectorEventContext.notifySelectionChanged(m)};n.prototype.setNearestPointToMouse=function(m){null==this.pickingTexture?this.nearestPoint=null:(m=this.getPointIndicesFromPickingTexture({x:m.offsetX,y:m.offsetY,width:1,height:1}),this.nearestPoint=null!=m?m[0]:null)};
n.prototype.getLayoutValues=function(){this.width=this.container.offsetWidth;this.height=Math.max(1,this.container.offsetHeight);return[this.width,this.height]};n.prototype.sceneIs3D=function(){return 3===this.dimensionality};n.prototype.remove3dAxisFromScene=function(){var m=this.scene.getObjectByName("axes");null!=m&&this.scene.remove(m);return m};n.prototype.add3dAxis=function(){var m=new THREE.AxesHelper;m.name="axes";this.scene.add(m)};n.prototype.setDimensions=function(m){if(2!==m&&3!==m)throw new RangeError("dimensionality must be 2 or 3");
this.dimensionality=m;var q=this.cameraDef||this.makeDefaultCameraDef(m);this.recreateCamera(q);this.remove3dAxisFromScene();3===m&&this.add3dAxis()};n.prototype.getCameraDef=function(){var m=new h,q=this.camera.position,r=this.orbitCameraControls.target;m.orthographic=!this.sceneIs3D();m.position=[q.x,q.y,q.z];m.target=[r.x,r.y,r.z];m.zoom=this.camera.zoom;return m};n.prototype.setCameraParametersForNextCameraCreation=function(m,q){this.cameraDef=m;this.orbitAnimationOnNextCameraCreation=q};n.prototype.getCameraPosition=
function(){var m=this.camera.position;return[m.x,m.y,m.z]};n.prototype.getCameraTarget=function(){var m=this.orbitCameraControls.target;return[m.x,m.y,m.z]};n.prototype.setCameraPositionAndTarget=function(m,q){this.stopOrbitAnimation();this.camera.position.set(m[0],m[1],m[2]);this.orbitCameraControls.target.set(q[0],q[1],q[2]);this.orbitCameraControls.update();this.render()};n.prototype.startOrbitAnimation=function(){this.sceneIs3D()&&(null!=this.orbitAnimationId&&this.stopOrbitAnimation(),this.orbitCameraControls.autoRotate=
!0,this.orbitCameraControls.rotateSpeed=7,this.updateOrbitAnimation())};n.prototype.updateOrbitAnimation=function(){var m=this;this.orbitCameraControls.update();this.orbitAnimationId=requestAnimationFrame(function(){return m.updateOrbitAnimation()})};n.prototype.stopOrbitAnimation=function(){this.orbitCameraControls.autoRotate=!1;this.orbitCameraControls.rotateSpeed=1;null!=this.orbitAnimationId&&(cancelAnimationFrame(this.orbitAnimationId),this.orbitAnimationId=null)};n.prototype.addVisualizer=function(m){this.scene&&
m.setScene(this.scene);m.onResize(this.width,this.height);m.onPointPositionsChanged(this.worldSpacePointPositions);this.visualizers.push(m)};n.prototype.removeAllVisualizers=function(){this.visualizers.forEach(function(m){return m.dispose()});this.visualizers=[]};n.prototype.setPointPositions=function(m){this.worldSpacePointPositions=m;this.visualizers.forEach(function(q){return q.onPointPositionsChanged(m)})};n.prototype.render=function(){var m=this.camera.position.clone();m.x+=1;m.y+=1;this.light.position.set(m.x,
m.y,m.z);m=this.camera instanceof THREE.PerspectiveCamera?a.CameraType.Perspective:a.CameraType.Orthographic;var q=[0,0];null!=this.worldSpacePointPositions&&(q=a.util.getNearFarPoints(this.worldSpacePointPositions,this.camera.position,this.orbitCameraControls.target));var r=new a.RenderContext(this.camera,m,this.orbitCameraControls.target,this.width,this.height,q[0],q[1],this.backgroundColor,this.pointColors,this.pointScaleFactors,this.labels,this.polylineColors,this.polylineOpacities,this.polylineWidths);
this.visualizers.forEach(function(v){return v.onPickingRender(r)});m=this.remove3dAxisFromScene();this.pickingTexture?this.renderer.setRenderTarget(this.pickingTexture):this.renderer.setRenderTarget(null);this.renderer.render(this.scene,this.camera);this.renderer.setRenderTarget(null);null!=m&&this.scene.add(m);this.visualizers.forEach(function(v){return v.onRender(r)});this.renderer.render(this.scene,this.camera)};n.prototype.setMouseMode=function(m){this.mouseMode=m;m===g.AREA_SELECT?(this.selecting=
!0,this.container.style.cursor="crosshair"):(this.selecting=!1,this.container.style.cursor="default")};n.prototype.setPointColors=function(m){this.pointColors=m};n.prototype.setPointScaleFactors=function(m){this.pointScaleFactors=m};n.prototype.setLabels=function(m){this.labels=m};n.prototype.setPolylineColors=function(m){this.polylineColors=m};n.prototype.setPolylineOpacities=function(m){this.polylineOpacities=m};n.prototype.setPolylineWidths=function(m){this.polylineWidths=m};n.prototype.getMouseMode=
function(){return this.mouseMode};n.prototype.resetZoom=function(){this.recreateCamera(this.makeDefaultCameraDef(this.dimensionality));this.render()};n.prototype.setDayNightMode=function(m){var q=this.container.querySelectorAll("canvas");m=m?"invert(100%)":null;for(var r=0;r<q.length;r++)q[r].style.filter=m};n.prototype.resize=function(m){void 0===m&&(m=!0);var q=[this.width,this.height],r=q[0];q=q[1];var v=this.getLayoutValues(),u=v[0],w=v[1];3===this.dimensionality?(v=this.camera,v.aspect=u/w):
(v=this.camera,r=u/r*(v.right-v.left)/2,q=w/q*(v.top-v.bottom)/2,v.top=q,v.bottom=-q,v.left=-r,v.right=r);v.updateProjectionMatrix();this.renderer.setPixelRatio(window.devicePixelRatio||1);this.renderer.setSize(u,w);r=new THREE.Vector2;this.renderer.getSize(r);q=this.renderer.getPixelRatio();this.pickingTexture=new THREE.WebGLRenderTarget(r.width*q,r.height*q);this.pickingTexture.texture.minFilter=THREE.LinearFilter;this.visualizers.forEach(function(z){return z.onResize(u,w)});m&&this.render()};n.prototype.onCameraMove=
function(m){this.onCameraMoveListeners.push(m)};n.prototype.clickOnPoint=function(m){this.nearestPoint=m;this.onClick(null,!1)};return n}();a.ScatterPlot=l})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizer3DLabels.js
(function(a){var b=function(){function c(){}c.prototype.createGlyphTexture=function(){var e=document.createElement("canvas");e.width=8192;e.height=80;var f=e.getContext("2d");f.font="bold 60px roboto";f.textBaseline="top";f.fillStyle="white";f.rect(0,0,e.width,e.height);f.fill();f.fillStyle="black";for(var g=f.measureText(" ").width,h=new Float32Array(256),l=new Float32Array(256),n=0,m=0;256>m;m++){var q=" "+String.fromCharCode(m),r=f.measureText(q).width;h[m]=r-g;l[m]=n;f.fillText(q,n-g,0);n+=r}return{texture:a.util.createTexture(e),
lengths:h,offsets:l}};c.prototype.processLabelVerts=function(e){var f=0;this.labelVertexMap=[];for(var g=0;g<e;g++){for(var h=this.labelStrings[g],l=[],n=0;n<h.length;n++){for(var m=0;6>m;m++)l.push(6*f+m);f++}this.labelVertexMap.push(l)}this.totalVertexCount=6*f};c.prototype.createColorBuffers=function(e){function f(n){var m=new THREE.Color(n);h.labelVertexMap[n].forEach(function(q){g.pickingColors[3*q]=m.r;g.pickingColors[3*q+1]=m.g;g.pickingColors[3*q+2]=m.b;g.renderColors[3*q]=1;g.renderColors[3*
q+1]=1;g.renderColors[3*q+2]=1})}var g=this;this.pickingColors=new Float32Array(3*this.totalVertexCount);this.renderColors=new Float32Array(3*this.totalVertexCount);for(var h=this,l=0;l<e;l++)f(l)};c.prototype.createLabels=function(){var e=this;if(null!=this.labelStrings&&null!=this.worldSpacePointPositions){var f=this.worldSpacePointPositions.length/3;if(f===this.labelStrings.length){this.glyphTexture=this.createGlyphTexture();this.uniforms={texture:{type:"t"},picking:{type:"bool"}};this.material=
new THREE.ShaderMaterial({uniforms:this.uniforms,transparent:!0,vertexShader:"\n    attribute vec2 posObj;\n    attribute vec3 color;\n    varying vec2 vUv;\n    varying vec3 vColor;\n\n    void main() {\n      vUv \x3d uv;\n      vColor \x3d color;\n\n      // Rotate label to face camera.\n\n      vec4 vRight \x3d vec4(\n        modelViewMatrix[0][0], modelViewMatrix[1][0], modelViewMatrix[2][0], 0);\n\n      vec4 vUp \x3d vec4(\n        modelViewMatrix[0][1], modelViewMatrix[1][1], modelViewMatrix[2][1], 0);\n\n      vec4 vAt \x3d -vec4(\n        modelViewMatrix[0][2], modelViewMatrix[1][2], modelViewMatrix[2][2], 0);\n\n      mat4 pointToCamera \x3d mat4(vRight, vUp, vAt, vec4(0, 0, 0, 1));\n\n      vec2 scaledPos \x3d posObj * 0.0125 * 2.2;\n\n      vec4 posRotated \x3d pointToCamera * vec4(scaledPos, 0, 1);\n      vec4 mvPosition \x3d modelViewMatrix * (vec4(position, 0) + posRotated);\n      gl_Position \x3d projectionMatrix * mvPosition;\n    }",
fragmentShader:"\n    uniform sampler2D texture;\n    uniform bool picking;\n    varying vec2 vUv;\n    varying vec3 vColor;\n\n    void main() {\n      if (picking) {\n        gl_FragColor \x3d vec4(vColor, 1.0);\n      } else {\n        vec4 fromTexture \x3d texture2D(texture, vUv);\n        gl_FragColor \x3d vec4(vColor, 1.0) * fromTexture;\n      }\n    }"});this.processLabelVerts(f);this.createColorBuffers(f);this.positions=new THREE.BufferAttribute(new Float32Array(3*this.totalVertexCount),
3);var g=new Float32Array(2*this.totalVertexCount),h=new Float32Array(3*this.totalVertexCount),l=new THREE.BufferAttribute(new Float32Array(3*this.totalVertexCount),2);g=new THREE.BufferAttribute(g,2);h=new THREE.BufferAttribute(h,3);this.geometry=new THREE.BufferGeometry;this.geometry.addAttribute("posObj",l);this.geometry.addAttribute("position",this.positions);this.geometry.addAttribute("uv",g);this.geometry.addAttribute("color",h);var n=0;for(h=0;h<f;h++){for(var m=this.labelStrings[h],q=0,r=
0;r<m.length;r++){var v=m.charCodeAt(r);q+=this.glyphTexture.lengths[v]}q/=-2;for(r=0;r<m.length;r++){v=m.charCodeAt(r);var u=this.glyphTexture.lengths[v],w=(q+u)/80,z=q/80;l.setXY(6*n,z,0);l.setXY(6*n+1,w,0);l.setXY(6*n+2,z,1);l.setXY(6*n+3,z,1);l.setXY(6*n+4,w,0);l.setXY(6*n+5,w,1);w=this.glyphTexture.offsets[v];v=this.glyphTexture.offsets[v]+u;w/=8192;v/=8192;g.setXY(6*n,w,1);g.setXY(6*n+1,v,1);g.setXY(6*n+2,w,0);g.setXY(6*n+3,w,0);g.setXY(6*n+4,v,1);g.setXY(6*n+5,v,0);n++;q+=u}}l=function(E){var C=
a.util.vector3FromPackedArray(A.worldSpacePointPositions,E);A.labelVertexMap[E].forEach(function(D){e.positions.setXYZ(D,C.x,C.y,C.z)})};var A=this;for(h=0;h<f;h++)l(h);this.labelsMesh=new THREE.Mesh(this.geometry,this.material);this.labelsMesh.frustumCulled=!1;this.scene.add(this.labelsMesh)}}};c.prototype.colorLabels=function(e){if(null!=this.labelStrings&&null!=this.geometry&&null!=e){var f=this.geometry.getAttribute("color");f.setArray(this.renderColors);for(var g=e.length/3,h=0,l=0;l<g;++l){for(var n=
new THREE.Color(e[h],e[h+1],e[h+2]),m=this.labelVertexMap[l].length,q=0;q<m;++q)f.setXYZ(this.labelVertexMap[l][q],n.r,n.g,n.b);h+=3}f.needsUpdate=!0}};c.prototype.setScene=function(e){this.scene=e};c.prototype.dispose=function(){this.labelsMesh&&(this.scene&&this.scene.remove(this.labelsMesh),this.labelsMesh=null);this.geometry&&(this.geometry.dispose(),this.geometry=null);null!=this.glyphTexture&&null!=this.glyphTexture.texture&&(this.glyphTexture.texture.dispose(),this.glyphTexture.texture=null)};
c.prototype.onPickingRender=function(){null==this.geometry&&this.createLabels();if(null!=this.geometry){this.material.uniforms.texture.value=this.glyphTexture.texture;this.material.uniforms.picking.value=!0;var e=this.geometry.getAttribute("color");e.setArray(this.pickingColors);e.needsUpdate=!0}};c.prototype.onRender=function(e){null==this.geometry&&this.createLabels();null!=this.geometry&&(this.colorLabels(e.pointColors),this.material.uniforms.texture.value=this.glyphTexture.texture,this.material.uniforms.picking.value=
!1,e=this.geometry.getAttribute("color"),e.setArray(this.renderColors),e.needsUpdate=!0)};c.prototype.onPointPositionsChanged=function(e){this.worldSpacePointPositions=e;this.dispose()};c.prototype.setLabelStrings=function(e){this.labelStrings=e;this.dispose()};c.prototype.onResize=function(){};return c}();a.ScatterPlotVisualizer3DLabels=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizerCanvasLabels.js
(function(a){var b=function(){function c(e){this.labelsActive=!0;this.canvas=document.createElement("canvas");e.appendChild(this.canvas);this.gc=this.canvas.getContext("2d");this.canvas.style.position="absolute";this.canvas.style.left="0";this.canvas.style.top="0";this.canvas.style.pointerEvents="none"}c.prototype.removeAllLabels=function(){this.gc.clearRect(0,0,this.canvas.width*window.devicePixelRatio,this.canvas.height*window.devicePixelRatio)};c.prototype.makeLabels=function(e){if(null!=e.labels&&
0!==e.labels.pointIndices.length&&null!=this.worldSpacePointPositions){var f=e.labels,g=e.cameraType===a.CameraType.Perspective,h=parseInt(this.gc.font,10),l=window.devicePixelRatio;var n=this.canvas.width*l;var m=this.canvas.height*l;n=new a.CollisionGrid({loX:0,hiX:n,loY:0,hiY:m},n/25,m/50);m=d3.scalePow().exponent(Math.E).domain([e.farthestCameraSpacePointZ,e.nearestCameraSpacePointZ]).range([.1,1]);var q=e.camera.position,r=q.clone().sub(e.cameraTarget),v=new THREE.Vector3;this.gc.textBaseline=
"middle";this.gc.miterLimit=2;for(var u=Math.min(1E4,f.pointIndices.length),w=0;w<u;++w){var z=a.util.vector3FromPackedArray(this.worldSpacePointPositions,f.pointIndices[w]);v.copy(q).sub(z);if(!(0>r.dot(v))){var A=a.util.vector3DToScreenCoords(e.camera,e.screenWidth,e.screenHeight,z);z=A[0];A=A[1];z+=4;var E={loX:z-2,hiX:z+1+2,loY:A-h/2-2,hiY:A+h/2+2};if(n.insert(E,!0)){var C=f.labelStrings[w];this.gc.font=f.defaultFontSize*f.scaleFactors[w]*l+"px roboto";E.hiX+=this.gc.measureText(C).width-1;n.insert(E)&&
(E=1,g&&1===f.useSceneOpacityFlags[w]&&(E=m(v.length())),this.gc.fillStyle=this.styleStringFromPackedRgba(f.fillColors,w,E),this.gc.strokeStyle=this.styleStringFromPackedRgba(f.strokeColors,w,E),this.gc.lineWidth=3,this.gc.strokeText(C,z,A),this.gc.lineWidth=6,this.gc.fillText(C,z,A))}}}}};c.prototype.styleStringFromPackedRgba=function(e,f,g){f*=3;return"rgba("+e[f]+","+e[f+1]+","+e[f+2]+","+g+")"};c.prototype.onResize=function(e,f){var g=window.devicePixelRatio;this.canvas.width=e*g;this.canvas.height=
f*g;this.canvas.style.width=e+"px";this.canvas.style.height=f+"px"};c.prototype.dispose=function(){this.removeAllLabels();this.gc=this.canvas=null};c.prototype.onPointPositionsChanged=function(e){this.worldSpacePointPositions=e;this.removeAllLabels()};c.prototype.onRender=function(e){this.labelsActive&&(this.removeAllLabels(),this.makeLabels(e))};c.prototype.setScene=function(){};c.prototype.onPickingRender=function(){};return c}();a.ScatterPlotVisualizerCanvasLabels=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizerPolylines.js
(function(a){var b=function(){function c(){this.polylinePositionBuffer={};this.polylineColorBuffer={}}c.prototype.updateSequenceIndicesInDataSet=function(e){for(var f=0;f<e.sequences.length;f++)for(var g=e.sequences[f],h=0;h<g.pointIndices.length-1;h++)e.points[g.pointIndices[h]].sequenceIndex=f,e.points[g.pointIndices[h+1]].sequenceIndex=f};c.prototype.createPolylines=function(e){if(this.dataSet&&this.dataSet.sequences){this.updateSequenceIndicesInDataSet(this.dataSet);this.polylines=[];for(var f=
0;f<this.dataSet.sequences.length;f++){var g=new THREE.BufferGeometry;g.addAttribute("position",this.polylinePositionBuffer[f]);g.addAttribute("color",this.polylineColorBuffer[f]);var h=new THREE.LineBasicMaterial({linewidth:1,opacity:1,transparent:!0,vertexColors:THREE.VertexColors});g=new THREE.LineSegments(g,h);g.frustumCulled=!1;this.polylines.push(g);e.add(g)}}};c.prototype.dispose=function(){if(null!=this.polylines){for(var e=0;e<this.polylines.length;e++)this.scene.remove(this.polylines[e]),
this.polylines[e].geometry.dispose();this.polylines=null;this.polylinePositionBuffer={};this.polylineColorBuffer={}}};c.prototype.setScene=function(e){this.scene=e};c.prototype.setDataSet=function(e){this.dataSet=e};c.prototype.onPointPositionsChanged=function(e){null!=e&&null==this.polylines||this.dispose();if(null!=e&&null!=this.dataSet){for(var f=0;f<this.dataSet.sequences.length;f++){var g=this.dataSet.sequences[f];g=2*(g.pointIndices.length-1);this.polylinePositionBuffer[f]=new THREE.BufferAttribute(new Float32Array(3*
g),3);this.polylineColorBuffer[f]=new THREE.BufferAttribute(new Float32Array(3*g),3)}for(f=0;f<this.dataSet.sequences.length;f++){g=this.dataSet.sequences[f];for(var h=0,l=0;l<g.pointIndices.length-1;l++){var n=g.pointIndices[l+1],m=a.util.vector3FromPackedArray(e,g.pointIndices[l]);n=a.util.vector3FromPackedArray(e,n);this.polylinePositionBuffer[f].setXYZ(h,m.x,m.y,m.z);this.polylinePositionBuffer[f].setXYZ(h+1,n.x,n.y,n.z);h+=2}this.polylinePositionBuffer[f].needsUpdate=!0}null==this.polylines&&
this.createPolylines(this.scene)}};c.prototype.onRender=function(e){if(null!=this.polylines)for(var f=0;f<this.polylines.length;f++)this.polylines[f].material.opacity=e.polylineOpacities[f],this.polylines[f].material.linewidth=e.polylineWidths[f],this.polylineColorBuffer[f].setArray(e.polylineColors[f]),this.polylineColorBuffer[f].needsUpdate=!0};c.prototype.onPickingRender=function(){};c.prototype.onResize=function(){};return c}();a.ScatterPlotVisualizerPolylines=b})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizerSprites.js
(function(a){var b="\n  // Index of the specific vertex (passed in as bufferAttribute), and the\n  // variable that will be used to pass it to the fragment shader.\n  attribute float spriteIndex;\n  attribute vec3 color;\n  attribute float scaleFactor;\n\n  varying vec2 xyIndex;\n  varying vec3 vColor;\n\n  uniform bool sizeAttenuation;\n  uniform float pointSize;\n  uniform float spritesPerRow;\n  uniform float spritesPerColumn;\n\n  "+THREE.ShaderChunk.fog_pars_vertex+"\n\n  void main() {\n    // Pass index and color values to fragment shader.\n    vColor \x3d color;\n    xyIndex \x3d vec2(mod(spriteIndex, spritesPerRow),\n              floor(spriteIndex / spritesPerColumn));\n\n    // Transform current vertex by modelViewMatrix (model world position and\n    // camera world position matrix).\n    vec4 cameraSpacePos \x3d modelViewMatrix * vec4(position, 1.0);\n\n    // Project vertex in camera-space to screen coordinates using the camera's\n    // projection matrix.\n    gl_Position \x3d projectionMatrix * cameraSpacePos;\n\n    // Create size attenuation (if we're in 3D mode) by making the size of\n    // each point inversly proportional to its distance to the camera.\n    float outputPointSize \x3d pointSize;\n    if (sizeAttenuation) {\n      outputPointSize \x3d -pointSize / cameraSpacePos.z;\n    } else {  // Create size attenuation (if we're in 2D mode)\n      const float PI \x3d 3.1415926535897932384626433832795;\n      const float minScale \x3d 0.1;  // minimum scaling factor\n      const float outSpeed \x3d 2.0;  // shrink speed when zooming out\n      const float outNorm \x3d (1. - minScale) / atan(outSpeed);\n      const float maxScale \x3d 15.0;  // maximum scaling factor\n      const float inSpeed \x3d 0.02;  // enlarge speed when zooming in\n      const float zoomOffset \x3d 0.3;  // offset zoom pivot\n      float zoom \x3d projectionMatrix[0][0] + zoomOffset;  // zoom pivot\n      float scale \x3d zoom \x3c 1. ? 1. + outNorm * atan(outSpeed * (zoom - 1.)) :\n                    1. + 2. / PI * (maxScale - 1.) * atan(inSpeed * (zoom - 1.));\n      outputPointSize \x3d pointSize * scale;\n    }\n\n    gl_PointSize \x3d\n      max(outputPointSize * scaleFactor, "+
(5).toFixed(1)+");\n  }",c="\n  varying vec2 xyIndex;\n  varying vec3 vColor;\n\n  uniform sampler2D texture;\n  uniform float spritesPerRow;\n  uniform float spritesPerColumn;\n  uniform bool isImage;\n\n  "+THREE.ShaderChunk.common+"\n  "+THREE.ShaderChunk.fog_pars_fragment+"\n  \n  bool point_in_unit_circle(vec2 spriteCoord) {\n    vec2 centerToP \x3d spriteCoord - vec2(0.5, 0.5);\n    return dot(centerToP, centerToP) \x3c (0.5 * 0.5);\n  }\n\n  bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n    vec3 v0 \x3d vec3(0, 1, 0);\n    vec3 v1 \x3d vec3(0.5, 0, 0);\n    vec3 v2 \x3d vec3(1, 1, 0);\n    vec3 p \x3d vec3(spriteCoord, 0);\n    float p_in_v0_v1 \x3d cross(v1 - v0, p - v0).z;\n    float p_in_v1_v2 \x3d cross(v2 - v1, p - v1).z;\n    return (p_in_v0_v1 \x3e 0.0) \x26\x26 (p_in_v1_v2 \x3e 0.0);\n  }\n\n  bool point_in_unit_square(vec2 spriteCoord) {\n    return true;\n  }\n\n\n  void main() {\n    if (isImage) {\n      // Coordinates of the vertex within the entire sprite image.\n      vec2 coords \x3d\n        (gl_PointCoord + xyIndex) / vec2(spritesPerRow, spritesPerColumn);\n      gl_FragColor \x3d vec4(vColor, 1.0) * texture2D(texture, coords);\n    } else {\n      bool inside \x3d point_in_unit_circle(gl_PointCoord);\n      if (!inside) {\n        discard;\n      }\n      gl_FragColor \x3d vec4(vColor, 1);\n    }\n    "+
THREE.ShaderChunk.fog_fragment+"\n  }",e=function(){function f(){this.texture=null;this.standinTextureForPoints=a.util.createTexture(document.createElement("canvas"));this.renderMaterial=this.createRenderMaterial(!1);this.pickingMaterial=this.createPickingMaterial()}f.prototype.createTextureFromSpriteAtlas=function(g,h,l){this.texture=a.util.createTexture(g);this.spritesPerRow=g.width/h[0];this.spritesPerColumn=g.height/h[1];this.spriteDimensions=h;this.spriteIndexBufferAttribute=new THREE.BufferAttribute(l,
1);null!=this.points&&this.points.geometry.addAttribute("spriteIndex",this.spriteIndexBufferAttribute)};f.prototype.createUniforms=function(){return{texture:{type:"t"},spritesPerRow:{type:"f"},spritesPerColumn:{type:"f"},fogColor:{type:"c"},fogNear:{type:"f"},fogFar:{type:"f"},isImage:{type:"bool"},sizeAttenuation:{type:"bool"},pointSize:{type:"f"}}};f.prototype.createRenderMaterial=function(g){return new THREE.ShaderMaterial({uniforms:this.createUniforms(),vertexShader:b,fragmentShader:c,transparent:!g,
depthTest:g,depthWrite:g,fog:!0,blending:THREE.MultiplyBlending})};f.prototype.createPickingMaterial=function(){return new THREE.ShaderMaterial({uniforms:this.createUniforms(),vertexShader:b,fragmentShader:"\n  varying vec2 xyIndex;\n  varying vec3 vColor;\n  uniform bool isImage;\n\n  \n  bool point_in_unit_circle(vec2 spriteCoord) {\n    vec2 centerToP \x3d spriteCoord - vec2(0.5, 0.5);\n    return dot(centerToP, centerToP) \x3c (0.5 * 0.5);\n  }\n\n  bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n    vec3 v0 \x3d vec3(0, 1, 0);\n    vec3 v1 \x3d vec3(0.5, 0, 0);\n    vec3 v2 \x3d vec3(1, 1, 0);\n    vec3 p \x3d vec3(spriteCoord, 0);\n    float p_in_v0_v1 \x3d cross(v1 - v0, p - v0).z;\n    float p_in_v1_v2 \x3d cross(v2 - v1, p - v1).z;\n    return (p_in_v0_v1 \x3e 0.0) \x26\x26 (p_in_v1_v2 \x3e 0.0);\n  }\n\n  bool point_in_unit_square(vec2 spriteCoord) {\n    return true;\n  }\n\n\n  void main() {\n    xyIndex; // Silence 'unused variable' warning.\n    if (isImage) {\n      gl_FragColor \x3d vec4(vColor, 1);\n    } else {\n      bool inside \x3d point_in_unit_circle(gl_PointCoord);\n      if (!inside) {\n        discard;\n      }\n      gl_FragColor \x3d vec4(vColor, 1);\n    }\n  }",
transparent:!0,depthTest:!0,depthWrite:!0,fog:!1,blending:THREE.NormalBlending})};f.prototype.createPointSprites=function(g,h){h=this.createGeometry(null!=h?h.length/3:0);this.fog=new THREE.Fog(16777215);this.points=new THREE.Points(h,this.renderMaterial);this.points.frustumCulled=!1;null!=this.spriteIndexBufferAttribute&&this.points.geometry.addAttribute("spriteIndex",this.spriteIndexBufferAttribute);g.add(this.points)};f.prototype.calculatePointSize=function(g){if(null!=this.texture)return g?30:
this.spriteDimensions[0];var h=200/Math.log(null!=this.worldSpacePointPositions?this.worldSpacePointPositions.length/3:1)/Math.log(8);return g?h:h/1.5};f.prototype.createGeometry=function(g){this.pickingColors=new Float32Array(3*g);for(var h=0,l=0;l<g;l++){var n=new THREE.Color(l);this.pickingColors[h++]=n.r;this.pickingColors[h++]=n.g;this.pickingColors[h++]=n.b}g=new THREE.BufferGeometry;g.addAttribute("position",new THREE.BufferAttribute(void 0,3));g.addAttribute("color",new THREE.BufferAttribute(void 0,
3));g.addAttribute("scaleFactor",new THREE.BufferAttribute(void 0,1));return g};f.prototype.setFogDistances=function(g,h,l){g?(g=this.worldSpacePointPositions.length/3,this.fog.near=h,this.fog.far=l*(2-Math.min(g,5E3)/5E3)):(this.fog.near=Infinity,this.fog.far=Infinity)};f.prototype.dispose=function(){this.disposeGeometry();this.disposeTextureAtlas()};f.prototype.disposeGeometry=function(){null!=this.points&&(this.scene.remove(this.points),this.points.geometry.dispose(),this.worldSpacePointPositions=
this.points=null)};f.prototype.disposeTextureAtlas=function(){null!=this.texture&&this.texture.dispose();this.pickingMaterial=this.renderMaterial=this.texture=null};f.prototype.setScene=function(g){this.scene=g};f.prototype.setSpriteAtlas=function(g,h,l){this.disposeTextureAtlas();this.createTextureFromSpriteAtlas(g,h,l);this.renderMaterial=this.createRenderMaterial(!0);this.pickingMaterial=this.createPickingMaterial()};f.prototype.clearSpriteAtlas=function(){this.disposeTextureAtlas();this.renderMaterial=
this.createRenderMaterial(!1);this.pickingMaterial=this.createPickingMaterial()};f.prototype.onPointPositionsChanged=function(g){if(null==g||0===g.length)this.dispose();else{null!=this.points&&this.worldSpacePointPositions.length!==g.length&&this.disposeGeometry();this.worldSpacePointPositions=g;null==this.points&&this.createPointSprites(this.scene,g);var h=this.points.geometry.getAttribute("position");h.setArray(g);h.needsUpdate=!0}};f.prototype.onPickingRender=function(g){if(null!=this.points){var h=
g.cameraType===a.CameraType.Perspective;this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerRow;this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerColumn;this.pickingMaterial.uniforms.sizeAttenuation.value=h;this.pickingMaterial.uniforms.pointSize.value=this.calculatePointSize(h);this.points.material=this.pickingMaterial;h=this.points.geometry.getAttribute("color");h.setArray(this.pickingColors);h.needsUpdate=!0;h=this.points.geometry.getAttribute("scaleFactor");h.setArray(g.pointScaleFactors);
h.needsUpdate=!0}};f.prototype.onRender=function(g){if(this.points){var h=g.camera instanceof THREE.PerspectiveCamera;this.setFogDistances(h,g.nearestCameraSpacePointZ,g.farthestCameraSpacePointZ);this.scene.fog=this.fog;this.scene.fog.color=new THREE.Color(g.backgroundColor);this.renderMaterial.uniforms.fogColor.value=this.scene.fog.color;this.renderMaterial.uniforms.fogNear.value=this.fog.near;this.renderMaterial.uniforms.fogFar.value=this.fog.far;this.renderMaterial.uniforms.spritesPerRow.value=
this.spritesPerRow;this.renderMaterial.uniforms.spritesPerColumn.value=this.spritesPerColumn;this.renderMaterial.uniforms.isImage.value=null!=this.texture;this.renderMaterial.uniforms.texture.value=null!=this.texture?this.texture:this.standinTextureForPoints;this.renderMaterial.uniforms.sizeAttenuation.value=h;this.renderMaterial.uniforms.pointSize.value=this.calculatePointSize(h);this.points.material=this.renderMaterial;h=this.points.geometry.getAttribute("color");this.renderColors=g.pointColors;
h.setArray(this.renderColors);h.needsUpdate=!0;h=this.points.geometry.getAttribute("scaleFactor");h.setArray(g.pointScaleFactors);h.needsUpdate=!0}};f.prototype.onResize=function(){};return f}();a.ScatterPlotVisualizerSprites=e})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizer.js
</script>
<script>//~~WEBPATH~~/vz-projector/projectorScatterPlotAdapter.js
(function(a){function b(n,m,q,r,v){n[3*m]=q;n[3*m+1]=r;n[3*m+2]=v}function c(n){n=new THREE.Color(n);return[255*n.r|0,255*n.g|0,255*n.b|0]}function e(n,m){n=d3.hsl(60+300*n/m,1,.3).rgb();return new THREE.Color(n.r/255,n.g/255,n.b/255)}function f(n,m,q){return n===a.vector.dist?q/m:1-m}function g(n,m,q){return h(f(n,m,q))}var h=d3.scaleLinear().domain([1,.7,.4]).range(["hsl(285, 80%, 40%)","hsl(0, 80%, 65%)","hsl(40, 70%, 60%)"]).clamp(!0),l=function(){function n(m,q){var r=this;this.scatterPlotContainer=
m;this.renderLabelsIn3D=!1;this.scatterPlot=new a.ScatterPlot(m,q);q.registerProjectionChangedListener(function(v){r.projection=v;r.updateScatterPlotWithNewProjection(v)});q.registerSelectionChangedListener(function(v,u){r.selectedPointIndices=v;r.neighborsOfFirstSelectedPoint=u;r.updateScatterPlotPositions();r.updateScatterPlotAttributes();r.scatterPlot.render()});q.registerHoverListener(function(v){r.hoverPointIndex=v;r.updateScatterPlotAttributes();r.scatterPlot.render()});q.registerDistanceMetricChangedListener(function(v){r.distanceMetric=
v;r.updateScatterPlotAttributes();r.scatterPlot.render()});this.createVisualizers(!1)}n.prototype.notifyProjectionPositionsUpdated=function(){this.updateScatterPlotPositions();this.scatterPlot.render()};n.prototype.setDataSet=function(m){null!=this.projection&&(this.projection.dataSet=m);null!=this.polylineVisualizer&&this.polylineVisualizer.setDataSet(m);null!=this.labels3DVisualizer&&this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray(m,this.labelPointAccessor));if(null!=this.spriteVisualizer&&
(this.spriteVisualizer.clearSpriteAtlas(),null!=m&&null!=m.spriteAndMetadataInfo)){var q=m.spriteAndMetadataInfo;if(null!=q.spriteImage&&null!=q.spriteMetadata){for(var r=m.points.length,v=new Float32Array(r),u=0;u<r;++u)v[u]=m.points[u].index;this.spriteVisualizer.setSpriteAtlas(q.spriteImage,q.spriteMetadata.singleImageDim,v)}}};n.prototype.set3DLabelMode=function(m){this.renderLabelsIn3D=m;this.createVisualizers(m);this.updateScatterPlotAttributes();this.scatterPlot.render()};n.prototype.setLegendPointColorer=
function(m){this.legendPointColorer=m};n.prototype.setLabelPointAccessor=function(m){this.labelPointAccessor=m;null!=this.labels3DVisualizer&&this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray(null==this.projection?null:this.projection.dataSet,m))};n.prototype.resize=function(){this.scatterPlot.resize()};n.prototype.populateBookmarkFromUI=function(m){m.cameraDef=this.scatterPlot.getCameraDef()};n.prototype.restoreUIFromBookmark=function(m){this.scatterPlot.setCameraParametersForNextCameraCreation(m.cameraDef,
!1)};n.prototype.updateScatterPlotPositions=function(){var m=this.generatePointPositionArray(null==this.projection?null:this.projection.dataSet,null==this.projection?null:this.projection.projectionComponents);this.scatterPlot.setPointPositions(m)};n.prototype.updateScatterPlotAttributes=function(){if(null!=this.projection){var m=this.projection.dataSet,q=this.selectedPointIndices,r=this.hoverPointIndex,v=this.neighborsOfFirstSelectedPoint,u=this.legendPointColorer,w=this.generatePointColorArray(m,
u,this.distanceMetric,q,v,r,this.renderLabelsIn3D,this.getSpriteImageMode()),z=this.generatePointScaleFactorArray(m,q,v,r);r=this.generateVisibleLabelRenderParams(m,q,v,r);u=this.generateLineSegmentColorMap(m,u);v=this.generateLineSegmentOpacityArray(m,q);m=this.generateLineSegmentWidthArray(m,q);this.scatterPlot.setPointColors(w);this.scatterPlot.setPointScaleFactors(z);this.scatterPlot.setLabels(r);this.scatterPlot.setPolylineColors(u);this.scatterPlot.setPolylineOpacities(v);this.scatterPlot.setPolylineWidths(m)}};
n.prototype.render=function(){this.scatterPlot.render()};n.prototype.generatePointPositionArray=function(m,q){if(null==m)return null;var r=d3.scaleLinear(),v=d3.scaleLinear(),u=null,w=d3.extent(m.points,function(D,J){return m.points[J].projections[q[0]]}),z=d3.extent(m.points,function(D,J){return m.points[J].projections[q[1]]}),A=[-1,1];r.domain(w).range(A);v.domain(z).range(A);null!=q[2]&&(w=d3.extent(m.points,function(D,J){return m.points[J].projections[q[2]]}),u=d3.scaleLinear(),u.domain(w).range(A));
var E=new Float32Array(3*m.points.length),C=0;m.points.forEach(function(D,J){E[C++]=r(m.points[J].projections[q[0]]);E[C++]=v(m.points[J].projections[q[1]]);E[C++]=0});u&&(C=2,m.points.forEach(function(D,J){E[C]=u(m.points[J].projections[q[2]]);C+=3}));return E};n.prototype.generateVisibleLabelRenderParams=function(m,q,r,v){if(null==m)return null;var u=null==q?0:q.length,w=null==r?0:r.length,z=u+w+(null!=v?1:0),A=new Uint32Array(z),E=new Float32Array(z),C=new Int8Array(z),D=new Uint8Array(3*z);z=
new Uint8Array(3*z);var J=[];E.fill(1);C.fill(1);var M=0;if(null!=v){J.push(this.getLabelText(m,v,this.labelPointAccessor));A[M]=v;E[M]=2;C[M]=0;v=c(0);b(D,M,v[0],v[1],v[2]);var H=c(16777215);b(z,M,H[0],H[1],H[1]);++M}v=c(0);H=c(16777215);for(var K=0;K<u;++K){var L=q[K];J.push(this.getLabelText(m,L,this.labelPointAccessor));A[M]=L;E[M]=2;C[M]=1===u?0:1;b(D,M,v[0],v[1],v[2]);b(z,M,H[0],H[1],H[2]);++M}v=c(0);H=c(16777215);for(K=0;K<w;++K)L=r[K].index,J.push(this.getLabelText(m,L,this.labelPointAccessor)),
A[M]=L,b(D,M,v[0],v[1],v[2]),b(z,M,H[0],H[1],H[2]),++M;return new a.LabelRenderParams(new Float32Array(A),J,E,C,10,D,z)};n.prototype.generatePointScaleFactorArray=function(m,q,r,v){if(null==m)return new Float32Array(0);m=new Float32Array(m.points.length);m.fill(1);for(var u=null==r?0:r.length,w=null==q?0:q.length,z=0;z<w;++z){var A=q[z];m[A]=1.2}w=u;for(z=0;z<w;++z)A=r[z].index,m[A]=1.2;null!=v&&(m[v]=1.2);return m};n.prototype.generateLineSegmentColorMap=function(m,q){var r={};if(null==m)return r;
for(var v=0;v<m.sequences.length;v++){var u=m.sequences[v],w=new Float32Array(6*(u.pointIndices.length-1)),z=0;if(q)for(var A=0;A<u.pointIndices.length-1;A++){var E=new THREE.Color(q(m,u.pointIndices[A])),C=new THREE.Color(q(m,u.pointIndices[A+1]));w[z++]=E.r;w[z++]=E.g;w[z++]=E.b;w[z++]=C.r;w[z++]=C.g;w[z++]=C.b}else for(A=0;A<u.pointIndices.length-1;A++)E=e(A,u.pointIndices.length),C=e(A+1,u.pointIndices.length),w[z++]=E.r,w[z++]=E.g,w[z++]=E.b,w[z++]=C.r,w[z++]=C.g,w[z++]=C.b;r[v]=w}return r};
n.prototype.generateLineSegmentOpacityArray=function(m,q){if(null==m)return new Float32Array(0);var r=new Float32Array(m.sequences.length);0<(null==q?0:q.length)?(r.fill(.05),r[m.points[q[0]].sequenceIndex]=.9):r.fill(.2);return r};n.prototype.generateLineSegmentWidthArray=function(m,q){if(null==m)return new Float32Array(0);var r=new Float32Array(m.sequences.length);r.fill(2);0<(null==q?0:q.length)&&(r[m.points[q[0]].sequenceIndex]=3);return r};n.prototype.generatePointColorArray=function(m,q,r,v,
u,w,z,A){if(null==m)return new Float32Array(0);var E=null==v?0:v.length,C=null==u?0:u.length,D=new Float32Array(3*m.points.length),J=14935011,M=7697881;z&&(M=J=16777215);A&&(M=J=16777215);z=m.points.length;A=0;if(0<E)for(J=new THREE.Color(J),M=0;M<z;++M)D[A++]=J.r,D[A++]=J.g,D[A++]=J.b;else if(null!=q)for(M=0;M<z;++M)J=new THREE.Color(q(m,M)),D[A++]=J.r,D[A++]=J.g,D[A++]=J.b;else for(J=new THREE.Color(M),M=0;M<z;++M)D[A++]=J.r,D[A++]=J.g,D[A++]=J.b;z=E;J=new THREE.Color(16410214);for(M=0;M<z;++M)A=
3*v[M],D[A++]=J.r,D[A++]=J.g,D[A++]=J.b;z=C;m=0<z?u[0].dist:0;for(M=0;M<z;++M)J=new THREE.Color(g(r,u[M].dist,m)),A=3*u[M].index,D[A++]=J.r,D[A++]=J.g,D[A++]=J.b;null!=w&&(J=new THREE.Color(7736143),A=3*w,D[A++]=J.r,D[A++]=J.g,D[A++]=J.b);return D};n.prototype.generate3DLabelsArray=function(m,q){if(null==m||null==q)return null;for(var r=[],v=m.points.length,u=0;u<v;++u)r.push(this.getLabelText(m,u,q));return r};n.prototype.getLabelText=function(m,q,r){return m.points[q].metadata[r].toString()};n.prototype.updateScatterPlotWithNewProjection=
function(m){null==m?(this.createVisualizers(this.renderLabelsIn3D),this.scatterPlot.render()):(this.setDataSet(m.dataSet),this.scatterPlot.setDimensions(m.dimensionality),m.dataSet.projectionCanBeRendered(m.projectionType)&&(this.updateScatterPlotAttributes(),this.notifyProjectionPositionsUpdated()),this.scatterPlot.setCameraParametersForNextCameraCreation(null,!1))};n.prototype.createVisualizers=function(m){var q=null==this.projection?null:this.projection.dataSet,r=this.scatterPlot;r.removeAllVisualizers();
this.polylineVisualizer=this.spriteVisualizer=this.canvasLabelsVisualizer=this.labels3DVisualizer=null;m?(this.labels3DVisualizer=new a.ScatterPlotVisualizer3DLabels,this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray(q,this.labelPointAccessor))):(this.spriteVisualizer=new a.ScatterPlotVisualizerSprites,r.addVisualizer(this.spriteVisualizer),this.canvasLabelsVisualizer=new a.ScatterPlotVisualizerCanvasLabels(this.scatterPlotContainer));this.polylineVisualizer=new a.ScatterPlotVisualizerPolylines;
this.setDataSet(q);this.spriteVisualizer&&r.addVisualizer(this.spriteVisualizer);this.labels3DVisualizer&&r.addVisualizer(this.labels3DVisualizer);this.canvasLabelsVisualizer&&r.addVisualizer(this.canvasLabelsVisualizer);r.addVisualizer(this.polylineVisualizer)};n.prototype.getSpriteImageMode=function(){if(null==this.projection)return!1;var m=this.projection.dataSet;return null==m||null==m.spriteAndMetadataInfo?!1:null!=m.spriteAndMetadataInfo.spriteImage};return n}();a.ProjectorScatterPlotAdapter=
l;a.normalizeDist=f;a.dist2color=g})(vl||(vl={}));
</script>
<script>//~~WEBPATH~~/vz-projector/vz-projector-util.js
(function(a){a.PolymerElement=function(b){return Polymer.Class(b)}})(vl||(vl={}));
</script>

<dom-module id="vz-projector-styles">
<template>
<style>
:host {
  --paper-input-container-label: {
    font-size: 14px;
  };
  --paper-input-container-input: {
    font-size: 14px;
  };
  /* TODO: Figure out why this doesn't work */
  --paper-dropdown-menu-input: {
    font-size: 14px;
  };
}

paper-button {
  background: #e3e3e3;
  margin-left: 0;
  text-transform: none;
}

paper-dropdown-menu paper-item {
  font-size: 13px;
}

paper-tooltip {
  max-width: 200px;
  --paper-tooltip: {
    font-size: 12px;
  };
}

paper-checkbox {
  --paper-checkbox-checked-color: #880E4F;
}

paper-toggle-button {
  --paper-toggle-button-checked-bar-color:  #880E4F;
  --paper-toggle-button-checked-button-color:  #880E4F;
  --paper-toggle-button-checked-ink-color: #880E4F;
}

paper-icon-button {
  border-radius: 50%;
}

paper-icon-button[active] {
  color: white;
  background-color: #880E4F;
}

.slider {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  justify-content: space-between;
}

.slider span {
  width: 35px;
  text-align: right;
}

.slider label {
  align-items: center;
  display: flex;
}

.help-icon {
  height: 15px;
  left: 2px;
  min-width: 15px;
  min-height: 15px;
  margin: 0;
  padding: 0;
  top: -2px;
  width: 15px;
}

.ink-panel {
  display: flex;
  flex-direction: column;
  font-size: 14px;
}

.ink-panel h4 {
  border-bottom: 1px solid #ddd;
  font-size: 14px;
  font-weight: 500;
  margin: 0;
  margin-bottom: 10px;
  padding-bottom: 5px;
}

.ink-panel-header {
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  height: 50px;
}

.ink-panel-content {
  display: none;
  height: 100%;
}

.ink-panel-content.active {
  display: block;
}

.ink-panel-content h3 {
  font-weight: 500;
  font-size: 14px;
  margin-top: 20px;
  margin-bottom: 5px;
  text-transform: uppercase;
}

.ink-panel-header h3 {
  font-weight: 500;
  font-size: 14px;
  margin: 0;
  padding: 0 24px;
  text-transform: uppercase;
}


/* - Tabs */
.ink-tab-group {
  align-items: center;
  box-sizing: border-box;
  display: flex;
  height: 100%;
  justify-content: space-around;
}

.ink-tab-group .projection-tab {
  color: rgba(0, 0, 0, 0.5);
  cursor: pointer;
  font-weight: 300;
  line-height: 49px;
  padding: 0 12px;
  text-align: center;
  text-transform: uppercase;
}

.ink-tab-group .projection-tab:hover {
  color: black;
}

.ink-tab-group .projection-tab.active {
  border-bottom: 2px solid black;
  color: black;
  font-weight: 500;
}

h4 {
  margin: 30px 0 10px 0;
}

.dismiss-dialog-note {
  margin-top: 25px;
  font-size: 11px;
  text-align: right;
}
</style>
</template>
</dom-module>









<dom-module id="vz-projector-bookmark-panel">
<template>
<style include="vz-projector-styles"></style>
<style>
#title {
  background-color: #fafafa;
  color: black;
  font-weight: 500;
  left: 0;
  line-height: 60px;
  padding-left: 24px;
  position: absolute;
  width: 276px;
}
#bookmark-container {
  background-color: #fafafa;
}
#icon-container {
  line-height: 60px;
  position: absolute;
  right: 0;
}
#header {
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  position: relative;
}
#panel {
  background-color: #fafafa;
  position: relative;
  overflow-y: scroll;
  top: 60px;
  max-height: 50vh;
}

#save-container {
  text-align: center;
}

.state-radio {
  display: table-cell;
  vertical-align: middle;
  padding-top: 16px;
}

.state-label {
  display: table-cell;
  vertical-align: middle;
  top: 14px;
}

.state-label-input {
  width: 194px;
}

.state-clear {
  display: table-cell;
  vertical-align: middle;
  padding-top: 20px;
}
#state-file {
  display: none;
}
#no-bookmarks {
  padding: 0 24px;
}
#action-buttons-container .add-icon-button {
  background-color: #03a9f4;
  color: white;
  margin: 0 4px 4px auto;
  right: 7px;
  top: -4px;
}
.upload-download-icon-button {
  padding: 0;
}
#action-buttons-container {
  display: flex;
  margin-left: 34px;
  margin-top: 6px;
}
.ink-fab {
  border-radius: 50%;
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}
paper-textarea {
  --paper-input-container-input: {
    font-size: 12px;
  }
  --paper-font-caption: {
    display: none
  }
}
</style>


<div id="bookmark-container">
  <div id="header">
    <div id="title">
      BOOKMARKS ([[savedStates.length]])
      <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      <paper-tooltip animation-delay="0" position="top" offset="0">
        Open this drawer to save a set of views of the projection, including
        selected points. A file containing the bookmarks can then be saved and
        later loaded to view them.
      </paper-tooltip>
    </div>
    <div id="icon-container">
      
      <paper-icon-button id="expand-more" icon="expand-less" on-tap="_expandMore"></paper-icon-button>
      <paper-icon-button id="expand-less" style="display: none" icon="expand-more" on-tap="_expandLess"></paper-icon-button>
    </div>
  </div>
  <iron-collapse id="panel">
    
    <div id="state-section">
      <template is="dom-if" if="[[!savedStates.length]]">
        <p id="no-bookmarks">
            No bookmarks yet, upload a bookmarks file or add a new bookmark by clicking the "+" below.
        
      </template>

      <template is="dom-repeat" items="{{savedStates}}">
        <div class="state-row">
          <div class="state-radio">
            <template is="dom-if" if="{{item.isSelected}}">
              <paper-icon-button icon="radio-button-checked"></paper-icon-button>
            </template>
            <template is="dom-if" if="{{!item.isSelected}}">
              <paper-icon-button icon="radio-button-unchecked" data-index$="{{index}}" on-tap="_radioButtonHandler"></paper-icon-button>
            </template>
          </div>
          <div class="state-label">
            <paper-textarea value="[[item.label]]" class="state-label-input" on-keyup="_labelChange" data-index$="[[index]]" autoresizing>
          </paper-textarea></div>
          <div class="state-clear">
            <paper-icon-button icon="clear" data-index$="{{index}}" on-tap="_clearButtonHandler"></paper-icon-button>
          </div>
        </div>
      </template>

      <div id="action-buttons-container">
        <paper-icon-button class="upload-download-icon-button" icon="save" title="Save bookmarks" disabled="[[!hasStates]]" on-tap="_downloadFile"></paper-icon-button>
        <paper-icon-button class="upload-download-icon-button" icon="file-upload" title="Load bookmarks" on-tap="_uploadFile"></paper-icon-button>
        <paper-icon-button class="add-icon-button ink-fab" icon="add" title="Add bookmark" on-tap="_addBookmark"></paper-icon-button>
        <input type="file" id="state-file" name="state-file">
      </div>
    </div>
  </iron-collapse>
</div>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-bookmark-panel.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){a.BookmarkPanelPolymer=a.PolymerElement({is:"vz-projector-bookmark-panel",properties:{savedStates:Object,hasStates:{type:Boolean,value:!1},selectedState:Number}});var b=function(c){function e(){var f=null!==c&&c.apply(this,arguments)||this;f.hasStates=!1;return f}Qk(e,c);e.prototype.ready=function(){this.savedStates=[];this.setupUploadButton();this.ignoreNextProjectionEvent=!1;this.expandLessButton=this.querySelector("#expand-less");this.expandMoreButton=this.querySelector("#expand-more")};
e.prototype.initialize=function(f,g){var h=this;this.projector=f;g.registerProjectionChangedListener(function(){h.ignoreNextProjectionEvent?h.ignoreNextProjectionEvent=!1:h.clearStateSelection()})};e.prototype.setSelectedTensor=function(f,g,h){var l=this;this.addStates(null);g&&g.bookmarksPath?h.getBookmarks(f,g.tensorName,function(n){l.addStates(n);l._expandMore()}):this._expandLess()};e.prototype._expandMore=function(){this.$.panel.show();this.expandMoreButton.style.display="none";this.expandLessButton.style.display=
""};e.prototype._expandLess=function(){this.$.panel.hide();this.expandMoreButton.style.display="";this.expandLessButton.style.display="none"};e.prototype._addBookmark=function(){var f=this.projector.getCurrentState();f.label="State "+this.savedStates.length;f.isSelected=!0;this.selectedState=this.savedStates.length;for(var g=0;g<this.savedStates.length;g++)this.savedStates[g].isSelected=!1,this.notifyPath("savedStates."+g+".isSelected",!1,!1);this.push("savedStates",f);this.updateHasStates()};e.prototype._downloadFile=
function(){var f=this.serializeAllSavedStates();f=window.URL.createObjectURL(new Blob([f],{type:"text/plain"}));var g=document.createElement("a");document.body.appendChild(g);g.style.display="none";g.href=f;g.download="state";g.click();document.body.removeChild(g);window.URL.revokeObjectURL(f)};e.prototype._uploadFile=function(){this.querySelector("#state-file").click()};e.prototype.setupUploadButton=function(){var f=this,g=this.querySelector("#state-file");g.onchange=function(){var h=g.files[0];
g.value="";var l=new FileReader;l.onload=function(){var n=JSON.parse(l.result);f.savedStatesValid(n)?(f.addStates(n),f.loadSavedState(0)):a.logging.setWarningMessage("Unable to load bookmarks: wrong dataset, expected dataset "+("with shape ("+n[0].dataSetDimensions+")."))};l.readAsText(h)}};e.prototype.addStates=function(f){if(null==f)this.savedStates=[];else for(var g=0;g<f.length;g++)f[g].isSelected=!1,this.push("savedStates",f[g]);this.updateHasStates()};e.prototype.clearStateSelection=function(){for(var f=
0;f<this.savedStates.length;f++)this.setSelectionState(f,!1)};e.prototype._radioButtonHandler=function(f){f=this.getParentDataIndex(f);this.loadSavedState(f);this.setSelectionState(f,!0)};e.prototype.loadSavedState=function(f){for(var g=0;g<this.savedStates.length;g++)this.savedStates[g].isSelected?this.setSelectionState(g,!1):f===g&&(this.setSelectionState(g,!0),this.ignoreNextProjectionEvent=!0,this.projector.loadState(this.savedStates[g]))};e.prototype.setSelectionState=function(f,g){this.savedStates[f].isSelected=
g;this.notifyPath("savedStates."+f+".isSelected",g,!1)};e.prototype.getParentDataIndex=function(f){for(var g=0;g<f.path.length;g++){var h=f.path[g].getAttribute("data-index");if(null!=h)return+h}return-1};e.prototype._clearButtonHandler=function(f){f=this.getParentDataIndex(f);this.splice("savedStates",f,1);this.updateHasStates()};e.prototype._labelChange=function(f){var g=this.getParentDataIndex(f);this.savedStates[g].label=f.target.value};e.prototype._isSelectedState=function(f){return f===this.selectedState};
e.prototype._isNotSelectedState=function(f){return f!==this.selectedState};e.prototype.serializeAllSavedStates=function(){return JSON.stringify(this.savedStates)};e.prototype.loadSavedStates=function(f){this.savedStates=JSON.parse(f);this.updateHasStates()};e.prototype.updateHasStates=function(){this.hasStates=0!==this.savedStates.length};e.prototype.savedStatesValid=function(f){for(var g=0;g<f.length;g++)if(f[g].dataSetDimensions[0]!==this.projector.dataSet.dim[0]||f[g].dataSetDimensions[1]!==this.projector.dataSet.dim[1])return!1;
return!0};return e}(a.BookmarkPanelPolymer);a.BookmarkPanel=b;document.registerElement(b.prototype.is,b)})(vl||(vl={}));
</script>
</dom-module>




















<dom-module id="vz-projector-legend">
<template>
<style include="vz-projector-styles"></style>
<style>
.item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 10px;
}

.shape {
  width: 10px;
  height: 10px;
  margin-right: 10px;
  margin-top: 5px;
  border-radius: 50%;
}

.label {
  flex-grow: 1;
}

.gradient {
  width: 100%;
  height: 10px;
}

.gradient-boundaries {
  display: flex;
  justify-content: space-between;
}
</style>

<template is="dom-repeat" items="[[renderInfo.items]]">
  <div class="item">
    <div class="shape" style="background-color: [[item.color]];"></div>
    <div class="label">[[item.label]]</div>
    <div class="info" style="color: [[item.color]];">[[item.count]]</div>
  </div>
</template>

<template is="dom-if" if="[[renderInfo.thresholds]]">
  <svg class="gradient">
    <defs>
      <lineargradient id="gradient" x1="0%" y1="100%" x2="100%" y2="100%"></lineargradient>
    </defs>
    <rect height="10" style="fill: url('#gradient');"></rect>
  </svg>
  <div class="gradient-boundaries">
    <div>[[renderInfo.thresholds.0.value]]</div>
    <div>[[_getLastThreshold(renderInfo.thresholds)]]</div>
  </div>
</template>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-legend.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){a.LegendPolymer=a.PolymerElement({is:"vz-projector-legend",properties:{renderInfo:{type:Object,observer:"_renderInfoChanged"}}});var b=function(c){function e(){return null!==c&&c.apply(this,arguments)||this}Qk(e,c);e.prototype._renderInfoChanged=function(){var f=this;null!=this.renderInfo&&this.renderInfo.thresholds&&this.async(function(){return f.setupLinearGradient()})};e.prototype._getLastThreshold=function(){if(null!=this.renderInfo&&null!=this.renderInfo.thresholds)return this.renderInfo.thresholds[this.renderInfo.thresholds.length-
1].value};e.prototype.getOffset=function(f){var g=this.renderInfo.thresholds[0].value;return(100*(f-g)/(this.renderInfo.thresholds[this.renderInfo.thresholds.length-1].value-g)).toFixed(2)+"%"};e.prototype.setupLinearGradient=function(){var f=this,g=this.querySelector("#gradient"),h=this.querySelector("svg.gradient").clientWidth;this.querySelector("svg.gradient rect").style.width=h+"px";g.innerHTML="";this.renderInfo.thresholds.forEach(function(l){var n=document.createElementNS("http://www.w3.org/2000/svg",
"stop");n.setAttribute("offset",f.getOffset(l.value));n.setAttribute("stop-color",l.color)})};return e}(a.LegendPolymer);a.Legend=b;document.registerElement(b.prototype.is,b)})(vl||(vl={}));
</script>
</dom-module>


<dom-module id="vz-projector-data-panel">
<template>
<style include="vz-projector-styles"></style>
<style>
.container {
  padding: 5px 20px 20px 20px;
}

input[type=file] {
  display: none;
}

.file-name {
  margin-right: 10px;
}

.dirs {
  color: rgba(0, 0, 0, 0.7);
  font-size: 12px;
}

.dirs table tr {
  vertical-align: top;
}

.dirs table tr td {
  padding-bottom: 10px;
}

paper-item {
  --paper-item-disabled: {
    border-bottom: 1px solid black;
    justify-content: center;
    font-size: 12px;
    line-height: normal;
    min-height: 0px;
  };
}

.item-details {
  margin-left: 5px;
  color: gray;
  font-size: 12px;
}

paper-input {
  font-size: 15px;
  --paper-input-container: {
    padding: 5px 0;
  };
  --paper-input-container-label-floating: {
    white-space: normal;
    line-height: normal;
  };
}

paper-dropdown-menu {
  width: 100%;
  --paper-input-container: {
    padding: 5px 0;
  };
  --paper-input-container-input: {
    font-size: 15px;
  };
  --paper-input-container-label-floating: {
    white-space: normal;
    line-height: normal;
  };
}

paper-dropdown-menu paper-item {
  justify-content: space-between;
}

.title {
  align-items: center;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  color: black;
  display: flex;
  font-weight: 500;
  height: 59px;
  padding-left: 20px;
}

#normalize-data-checkbox {
  margin: 10px 0;
}

#projector-config-template {
  --paper-input-container-input: {
    line-height: 13px;
    font-family: monospace;
    font-size: 12px;
  };
}

#generate-share-url {
  padding: 16px;
  margin-left: 24px;
}

#projector-share-button-container {
  margin: 10px 0;
}

.metadata-editor, .supervise-settings, .colorlabel-container {
  display: flex;
}

#labelby {
  width: 100px;
  margin-right: 10px;
}

#colorby {
  width: calc(100% - 110px);
}

.supervise-settings paper-dropdown-menu {
  width: 100px;
  margin-right: 10px;
}

.supervise-settings paper-input {
  width: calc(100% - 110px);
}

.metadata-editor paper-dropdown-menu {
  width: 100px;
  margin-right: 10px;
}

.metadata-editor paper-input {
  width: calc(100% - 110px);
}

.config-checkbox {
  display: inline-block;
  font-size: 11px;
  margin-left: 10px;
}

.projector-config-options {
  margin-top: 12px;
}

.projector-config-dialog-container {
  padding: 24px;
}

.code {
  background-color: #f7f7f7;
  display: table;
  font-family: monospace;
  margin-top: 7px;
  padding: 15px;
}

.delimiter {
  color: #B71C1C;
}

.button-container {
  flex: 1 100%;
  margin-right: 5px;
}

.button-container paper-button {
  min-width: 50px;
  width: 100%;
}

#label-button {
  margin-right: 0px;
}

.upload-step {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
}

.upload-step paper-button {
  margin-left: 30px;
}

.step-label {
  color: rgb(38, 180, 226);
}

.scrollable-container {
  margin-top: 0;
  min-width: 400px;
}

#projectorConfigDialog p {
  margin: 8px 0 8px;
}

.data-step {
  margin-top: 40px;
}

.data-step-contents {
  display: table;
  width: 100%;
}

.data-step-contents-contents {
  display: table-cell;
  margin-top: 6px;
}

.data-step-contents-upload {
  display: table-cell;
  text-align: right;
  vertical-align: bottom;
}

#demo-data-buttons-container {
  display: none;
  margin-top: 10px;
}

</style>
<div class="title">DATA</div>
<div class="container">
  
  <template is="dom-if" if="[[_hasChoices(runNames)]]">
    <paper-dropdown-menu no-animations label="[[_getNumRunsLabel(runNames)]] found">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedRun}}" slot="dropdown-content">
        <template is="dom-repeat" items="[[runNames]]">
          <paper-item value="[[item]]" label="[[item]]">
            [[item]]
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>

  <template is="dom-if" if="[[tensorNames]]">
    
    <paper-dropdown-menu no-animations label="[[_getNumTensorsLabel(tensorNames)]] found">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedTensor}}" slot="dropdown-content">
        <template is="dom-repeat" items="[[tensorNames]]">
          <paper-item value="[[item.name]]" label="[[item.name]]">
            [[item.name]]
            <span class="item-details">
              [[item.shape.0]]x[[item.shape.1]]
            </span>
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>

  <div hidden$="[[!_hasChoices(colorOptions)]]">
    <div class="colorlabel-container">
      
      <paper-dropdown-menu id="labelby" no-animations label="Label by">
        <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedLabelOption}}" slot="dropdown-content">
          <template is="dom-repeat" items="[[labelOptions]]">
            <paper-item value="[[item]]" label="[[item]]">
              [[item]]
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      
      <paper-dropdown-menu id="colorby" no-animations label="Color by">
        <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedColorOptionName}}" slot="dropdown-content">
          <template is="dom-repeat" items="[[colorOptions]]">
            <paper-item class$="[[getSeparatorClass(item.isSeparator)]]" value="[[item.name]]" label="[[item.name]]" disabled="[[item.isSeparator]]">
              [[item.name]]
              <span class="item-details">[[item.desc]]</span>
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
    </div>
    <div hidden$="[[!showForceCategoricalColorsCheckbox]]">
      <paper-checkbox id="force-categorical-checkbox">Use categorical coloring</paper-checkbox>
      <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        For metadata fields that have many unique values we use a gradient color map
        by default. This checkbox allows you to force categorical coloring by a given
        metadata field.
      </paper-tooltip>
    </div>
    <template dom-if="[[colorLegendRenderInfo]]">
      <vz-projector-legend render-info="[[colorLegendRenderInfo]]"></vz-projector-legend>
    </template>
  </div>
  <template is="dom-if" if="[[_hasChoice(labelOptions)]]">
    
    <div hidden$="[[!showSuperviseSettings]]" class="supervise-settings">
      <paper-dropdown-menu no-animations label="Supervise with">
        <paper-listbox attr-for-selected="value" class="dropdown-content" on-selected-item-changed="superviseColumnChanged" selected="{{superviseColumn}}" slot="dropdown-content">
          <template is="dom-repeat" items="[[metadataFields]]">
            <paper-item value="[[item]]" label="[[item]]">
              [[item]]
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      <paper-input value="{{superviseInput}}" label="{{superviseInputLabel}}" on-change="superviseInputChange" on-input="superviseInputTyping">
      </paper-input>
    </div>
    
    <div class="metadata-editor">
      <paper-dropdown-menu no-animations label="Edit by">
        <paper-listbox attr-for-selected="value" class="dropdown-content" slot="dropdown-content" on-selected-item-changed="metadataEditorColumnChange" selected="{{metadataEditorColumn}}">
          <template is="dom-repeat" items="[[metadataFields]]">
            <paper-item value="[[item]]" label="[[item]]">
              [[item]]
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      <paper-input value="{{metadataEditorInput}}" label="{{metadataEditorInputLabel}}" on-input="metadataEditorInputChange" on-keydown="metadataEditorInputKeydown">
      </paper-input>
    </div>
  </template>
  <div id="demo-data-buttons-container">
    <span class="button-container">
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Load data from your computer
      </paper-tooltip>
      <paper-button id="upload" class="ink-button" onclick="dataDialog.open()">Load</paper-button>
    </span>
    <span id="publish-container" class="button-container">
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Publish your embedding visualization and data
      </paper-tooltip>
      <paper-button id="host-embedding" class="ink-button" onclick="projectorConfigDialog.open()">Publish</paper-button>
    </span>
    <span class="button-container">
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Download the metadata with applied modifications
      </paper-tooltip>
      <paper-button class="ink-button" on-click="downloadMetadataClicked">Download</paper-button>
      <a href="#" id="downloadMetadataLink" hidden></a>
    </span>
    <span id="label-button" class="button-container">
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Label selected metadata
      </paper-tooltip>
      <paper-button class="ink-button" on-click="metadataEditorButtonClicked" disabled="[[metadataEditorButtonDisabled]]">Label</paper-button>
    </span>
  </div>
  <div>
    <paper-dialog id="dataDialog" with-backdrop>
      <h2>Load data from your computer</h2>
      <paper-dialog-scrollable class="scrollable-container">
        <div class="data-step" id="upload-tensors-step-container">
          <div class="upload-step">
            <div>
                <b><span class="step-label">Step 1:</span> Load a TSV file of vectors.</b>
            </div>
          </div>
          <div class="data-step-contents">
            <div class="data-step-contents-contents">
              Example of 3 vectors with dimension 4:
              <div class="code">
                0.1<span class="delimiter">\t</span>0.2<span class="delimiter">\t</span>0.5<span class="delimiter">\t</span>0.9<br>
                0.2<span class="delimiter">\t</span>0.1<span class="delimiter">\t</span>5.0<span class="delimiter">\t</span>0.2<br>
                0.4<span class="delimiter">\t</span>0.1<span class="delimiter">\t</span>7.0<span class="delimiter">\t</span>0.8
              </div>
            </div>
            <div class="data-step-contents-upload">
              <paper-button id="upload-tensors" title="Choose a TSV tensor file">Choose file</paper-button>
              <input type="file" id="file" name="file">
            </div>
          </div>
        </div>
        <div class="data-step">
          <div class="upload-step">
            <div>
                <span class="step-label" id="upload-metadata-label"><b>Step 2</b> (optional):</span> <b>Load a TSV file of metadata.</b>
            </div>
          </div>
          <div class="data-step-contents">
            <div class="data-step-contents-contents">
              Example of 3 data points and 2 columns.<br>
              <i>Note: If there is more than one column, the first row will be parsed as column labels.</i>
              <div class="code">
                <b>PokÃ©mon<span class="delimiter">\t</span>Species</b><br>
                Wartortle<span class="delimiter">\t</span>Turtle<br>
                Venusaur<span class="delimiter">\t</span>Seed<br>
                Charmeleon<span class="delimiter">\t</span>Flame
              </div>
            </div>
            <div class="data-step-contents-upload">
              <paper-button id="upload-metadata" title="Choose a TSV metadata file" class="ink-button">Choose file</paper-button>
              <input type="file" id="file-metadata" name="file-metadata">
            </div>
          </div>
        </div>
      </paper-dialog-scrollable>
      <div class="dismiss-dialog-note">Click outside to dismiss.</div>
    </paper-dialog>
    <paper-dialog id="projectorConfigDialog" with-backdrop>
      <h2>Publish your embedding visualization and data</h2>
      <paper-dialog-scrollable class="scrollable-container">
        <div>
          <p>
            If you'd like to share your visualization with the world, follow these simple steps.
            See <a target="_blank" href="https://www.tensorflow.org/get_started/embedding_viz">this tutorial</a> for more.
          
          <h4><span class="step-label">Step 1:</span> Make data public</h4>
          <p>
            Host tensors, metadata, sprite image, and bookmarks TSV files <i>publicly</i> on the web.
          
          <p>
            One option is using a <a target="_blank" href="https://gist.github.com/">github gist</a>.
            If you choose this approach, make sure to link directly to the raw file.
          
        </div>
        <div>
          <h4><span class="step-label">Step 2:</span> Projector config</h4>
          <div class="projector-config-options">
            <i>Optional:</i>
            <div class="config-checkbox">
              <paper-checkbox id="config-metadata-checkbox" checked>Metadata</paper-checkbox>
            </div>
            <div class="config-checkbox">
              <paper-checkbox id="config-sprite-checkbox">Sprite</paper-checkbox>
            </div>
            <div class="config-checkbox">
              <paper-checkbox id="config-bookmarks-checkbox">Bookmarks</paper-checkbox>
            </div>
          </div>
        </div>
        <paper-textarea id="projector-config-template" label="template_projector_config.json"></paper-textarea>
        <div>
          <h4><span class="step-label">Step 3:</span> Host projector config</h4>
          After you have hosted the projector config JSON file you built above, paste the URL to the config below.
        </div>
        <paper-input id="projector-config-url" label="Path to projector config"></paper-input>
        <paper-input id="projector-share-url" label="Your shareable URL" readonly></paper-input>
        <div id="projector-share-button-container">
          <a target="_blank" id="projector-share-url-link">
            <paper-button title="Test your shareable URL" class="ink-button">Test your shareable URL</paper-button>
          </a>
        </div>
      </paper-dialog-scrollable>
      <div class="dismiss-dialog-note">Click outside to dismiss.</div>
    </paper-dialog>
  </div>
  <paper-checkbox id="normalize-data-checkbox" checked="{{normalizeData}}">
    Sphereize data
    <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
    <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
      The data is normalized by shifting each point by the centroid and making
      it unit norm.
    </paper-tooltip>
  </paper-checkbox>
  <div class="dirs">
    <table>
      <tr>
        <td>Checkpoint:</td>
        <td><span id="checkpoint-file"></span></td>
      </tr>
      <tr>
        <td>Metadata:</td>
        <td><span id="metadata-file"></span></td>
      </tr>
    </table>
  </div>
</div>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-data-panel.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){a.DataPanelPolymer=a.PolymerElement({is:"vz-projector-data-panel",properties:{selectedTensor:{type:String,observer:"_selectedTensorChanged"},selectedRun:String,selectedColorOptionName:{type:String,notify:!0,observer:"_selectedColorOptionNameChanged"},selectedLabelOption:{type:String,notify:!0,observer:"_selectedLabelOptionChanged"},normalizeData:Boolean,showForceCategoricalColorsCheckbox:Boolean,metadataEditorInput:{type:String},metadataEditorInputLabel:{type:String,value:"Tag selection as"},
metadataEditorInputChange:{type:Object},metadataEditorColumn:{type:String},metadataEditorColumnChange:{type:Object},metadataEditorButtonClicked:{type:Object},metadataEditorButtonDisabled:{type:Boolean},downloadMetadataClicked:{type:Boolean},superviseInput:{type:String},superviseInputTyping:{type:Object},superviseInputChange:{type:Object},superviseInputLabel:{type:String,value:"Ignored label"},superviseColumn:{type:String},superviseColumnChanged:{type:Object},showSuperviseSettings:{type:Boolean,value:!1}},
observers:["_generateUiForNewCheckpointForRun(selectedRun)"]});var b=function(c){function e(){var f=null!==c&&c.apply(this,arguments)||this;f.forceCategoricalColoring=!1;return f}Qk(e,c);e.prototype.ready=function(){this.normalizeData=!0;this.superviseInputSelected=""};e.prototype.initialize=function(f,g){var h=this;this.projector=f;this.dataProvider=g;this.setupUploadButtons();this.querySelector("#normalize-data-checkbox").addEventListener("change",function(){h.projector.setNormalizeData(h.normalizeData)});
var l=this.querySelector("#force-categorical-checkbox");l.addEventListener("change",function(){h.setForceCategoricalColoring(l.checked)});this.dataProvider.retrieveRuns(function(n){h.runNames=n;0<h.runNames.length&&(h.selectedRun!=n[0]?h.selectedRun=n[0]:h._generateUiForNewCheckpointForRun(h.selectedRun))})};e.prototype.setForceCategoricalColoring=function(f){this.forceCategoricalColoring=f;this.querySelector("#force-categorical-checkbox").checked=this.forceCategoricalColoring;this.updateMetadataUI(this.spriteAndMetadata.stats,
this.metadataFile);this._selectedColorOptionNameChanged()};e.prototype.getSeparatorClass=function(f){return f?"separator":null};e.prototype.metadataChanged=function(f,g){var h=this;this.spriteAndMetadata=f;null!=g&&(this.metadataFile=g);this.updateMetadataUI(this.spriteAndMetadata.stats,this.metadataFile);if(null==this.selectedColorOptionName||0===this.colorOptions.filter(function(n){return n.name===h.selectedColorOptionName}).length)this.selectedColorOptionName=this.colorOptions[0].name;var l=-1;
this.metadataFields=f.stats.map(function(n,m){n.isNumeric||-1!==l||(l=m);return n.name});if(null==this.metadataEditorColumn||0===this.metadataFields.filter(function(n){return n===h.metadataEditorColumn}).length)this.metadataEditorColumn=this.metadataFields[Math.max(0,l)];if(null==this.superviseColumn||0===this.metadataFields.filter(function(n){return n===h.superviseColumn}).length)this.superviseColumn=this.metadataFields[Math.max(0,l)],this.superviseInput="";this.superviseInputChange()};e.prototype.projectionChanged=
function(f){if(f)switch(f.projectionType){case "tsne":this.set("showSuperviseSettings",!0);break;default:this.set("showSuperviseSettings",!1)}};e.prototype.onProjectorSelectionChanged=function(f,g){this.selectedPointIndices=f;this.neighborsOfFirstPoint=g;this.metadataEditorInputChange()};e.prototype.addWordBreaks=function(f){return null==f?"":f.replace(/([\/=-_,])/g,"$1\x3cwbr\x3e")};e.prototype.updateMetadataUI=function(f,g){var h=this,l=this.querySelector("#metadata-file");l.innerHTML=this.addWordBreaks(g);
l.title=g;var n=-1;this.labelOptions=f.map(function(m,q){m.isNumeric||-1!==n||(n=q);return m.name});if(null==this.selectedLabelOption||0===this.labelOptions.filter(function(m){return m===h.selectedLabelOption}).length)this.selectedLabelOption=this.labelOptions[Math.max(0,n)];if(null==this.metadataEditorColumn||0===this.labelOptions.filter(function(m){return m===h.metadataEditorColumn}).length)this.metadataEditorColumn=this.labelOptions[Math.max(0,n)];g=[{name:"No color map"}];f=f.filter(function(m){return!m.tooManyUniqueValues||
m.isNumeric}).map(function(m){if(h.forceCategoricalColoring||!m.tooManyUniqueValues){var q=d3.scaleOrdinal(d3.schemeCategory10);var r=q.range();var v=r.map(function(z,A){return r[3*A%r.length]});var u=m.uniqueEntries;q.range(v).domain(u.map(function(z){return z.label}));v=m.uniqueEntries.length;v=v+" "+(v>r.length?" non-unique":"")+" colors"}else{var w=[{color:"#ffffdd",value:m.min},{color:"#1f2d86",value:m.max}];q=d3.scaleLinear().domain(w.map(function(z){return z.value})).range(w.map(function(z){return z.color}));
v="gradient"}return{name:m.name,desc:v,map:q,items:u,thresholds:w,tooManyUniqueValues:m.tooManyUniqueValues}});0<f.length&&g.push({name:"Metadata",isSeparator:!0});this.colorOptions=g.concat(f)};e.prototype.metadataEditorContext=function(f){this.metadataEditorButtonDisabled=!f;this.projector&&this.projector.metadataEditorContext(f,this.metadataEditorColumn)};e.prototype.metadataEditorInputChange=function(){var f=this.metadataEditorColumn,g=this.metadataEditorInput,h=this.selectedPointIndices.length+
this.neighborsOfFirstPoint.length;0<h?null!=g&&""!==g.trim()?this.spriteAndMetadata.stats.filter(function(l){return l.name===f})[0].isNumeric&&isNaN(+g)?(this.metadataEditorInputLabel="Label must be numeric",this.metadataEditorContext(!1)):(0===this.projector.dataSet.points.filter(function(l){return l.metadata[f].toString()===g.trim()}).length?this.metadataEditorInputLabel="Tag "+h+" with new label":this.metadataEditorInputLabel="Tag "+h+" points as",this.metadataEditorContext(!0)):(this.metadataEditorInputLabel=
"Tag selection as",this.metadataEditorContext(!1)):(this.metadataEditorContext(!1),null!=g&&""!==g.trim()?this.metadataEditorInputLabel="Select points to tag":this.metadataEditorInputLabel="Tag selection as")};e.prototype.metadataEditorInputKeydown=function(f){13===f.keyCode&&this.metadataEditorButtonClicked();f.stopPropagation()};e.prototype.metadataEditorColumnChange=function(){this.metadataEditorInputChange()};e.prototype.metadataEditorButtonClicked=function(){if(!this.metadataEditorButtonDisabled){var f=
this.metadataEditorInput.trim(),g=this.selectedPointIndices.length+this.neighborsOfFirstPoint.length;this.projector.metadataEdit(this.metadataEditorColumn,f);this.projector.metadataEditorContext(!0,this.metadataEditorColumn);this.metadataEditorInputLabel=g+" labeled as '"+f+"'"}};e.prototype.downloadMetadataClicked=function(){if(this.projector&&this.projector.dataSet&&this.projector.dataSet.spriteAndMetadataInfo){var f=this.projector.dataSet.spriteAndMetadataInfo.stats.map(function(h){return h.name}).join("\t");
this.projector.dataSet.spriteAndMetadataInfo.pointsInfo.forEach(function(h){var l=[],n;for(n in h)l.push(h[n]);f+="\n"+l.join("\t")});var g=new Blob([f],{type:"text/plain"});this.$.downloadMetadataLink.download="metadata-edited.tsv";this.$.downloadMetadataLink.href=window.URL.createObjectURL(g);this.$.downloadMetadataLink.click()}};e.prototype.superviseInputTyping=function(){var f=this,g=this.superviseInput.trim();if(null==g||""===g.trim())this.superviseInputLabel=""===this.superviseInputSelected?
"No ignored label":"Supervising without '"+this.superviseInputSelected+"'";else if(this.projector&&this.projector.dataSet){var h=this.projector.dataSet.points.filter(function(l){return l.metadata[f.superviseColumn].toString().trim()===g}).length;0===h?this.superviseInputLabel="Label not found":this.projector.dataSet.superviseInput!=g&&(this.superviseInputLabel="Supervise without '"+g+"' ["+h+" points]")}};e.prototype.superviseInputChange=function(){var f=this,g=this.superviseInput.trim();if(null==
g||""===g.trim())this.superviseInputSelected="",this.superviseInputLabel="No ignored label",this.setSupervision(this.superviseColumn,"");else if(this.projector&&this.projector.dataSet){var h=this.projector.dataSet.points.filter(function(l){return l.metadata[f.superviseColumn].toString().trim()===g}).length;0===h?this.superviseInputLabel="Supervising without '"+this.superviseInputSelected+"'":(this.superviseInputSelected=g,this.superviseInputLabel="Supervising without '"+g+"' ["+h+" points]",this.setSupervision(this.superviseColumn,
g))}};e.prototype.superviseColumnChanged=function(){this.superviseInput="";this.superviseInputChange()};e.prototype.setSupervision=function(f,g){this.projector&&this.projector.dataSet&&this.projector.dataSet.setSupervision(f,g)};e.prototype.setNormalizeData=function(f){this.normalizeData=f};e.prototype._selectedTensorChanged=function(){var f=this;this.projector.updateDataSet(null,null,null);null!=this.selectedTensor&&(this.dataProvider.retrieveTensor(this.selectedRun,this.selectedTensor,function(g){var h=
f.getEmbeddingInfoByName(f.selectedTensor).metadataPath;f.dataProvider.retrieveSpriteAndMetadata(f.selectedRun,f.selectedTensor,function(l){f.projector.updateDataSet(g,l,h)})}),this.projector.setSelectedTensor(this.selectedRun,this.getEmbeddingInfoByName(this.selectedTensor)))};e.prototype._generateUiForNewCheckpointForRun=function(f){var g=this;this.dataProvider.retrieveProjectorConfig(f,function(h){g.projectorConfig=h;h=g.projectorConfig.embeddings.map(function(m){return m.tensorName}).filter(function(m){m=
g.getEmbeddingInfoByName(m).tensorShape;return 2===m.length&&1<m[0]&&1<m[1]}).sort(function(m,q){var r=g.getEmbeddingInfoByName(m),v=g.getEmbeddingInfoByName(q);if(a.util.xor(!!r.metadataPath,!!v.metadataPath))return r.metadataPath?-1:1;var u=a.util.tensorIsGenerated(q);if(a.util.xor(a.util.tensorIsGenerated(m),u))return u?-1:1;r=r.tensorShape[0];v=v.tensorShape[0];return r!==v?v-r:m<=q?-1:1});g.tensorNames=h.map(function(m){return{name:m,shape:g.getEmbeddingInfoByName(m).tensorShape}});var l=g.addWordBreaks(g.projectorConfig.modelCheckpointPath),
n=g.querySelector("#checkpoint-file");n.innerHTML=l;n.title=g.projectorConfig.modelCheckpointPath;h="demo"===g.projector.servingMode?g.projectorConfig.embeddings[0].tensorName:h[0];g.selectedTensor===h?g._selectedTensorChanged():g.selectedTensor=h})};e.prototype._selectedLabelOptionChanged=function(){this.projector.setSelectedLabelOption(this.selectedLabelOption)};e.prototype._selectedColorOptionNameChanged=function(){for(var f,g=0;g<this.colorOptions.length;g++)if(this.colorOptions[g].name===this.selectedColorOptionName){f=
this.colorOptions[g];break}f&&(this.showForceCategoricalColorsCheckbox=!!f.tooManyUniqueValues,this.colorLegendRenderInfo=null==f.map?null:f.items?{items:f.items.map(function(h){return{color:f.map(h.label),label:h.label,count:h.count}}),thresholds:null}:{items:null,thresholds:f.thresholds},this.projector.setSelectedColorOption(f))};e.prototype.tensorWasReadFromFile=function(f,g){var h=this;a.parseRawTensors(f,function(l){var n=h.querySelector("#checkpoint-file");n.innerText=g;n.title=g;h.projector.updateDataSet(l)})};
e.prototype.metadataWasReadFromFile=function(f,g){var h=this;a.parseRawMetadata(f,function(l){h.projector.updateDataSet(h.projector.dataSet,l,g)})};e.prototype.getEmbeddingInfoByName=function(f){for(var g=0;g<this.projectorConfig.embeddings.length;g++){var h=this.projectorConfig.embeddings[g];if(h.tensorName===f)return h}};e.prototype.setupUploadButtons=function(){var f=this,g=this.querySelector("#file");g.onchange=function(){var z=g.files[0];g.value="";var A=new FileReader;A.onload=function(){f.tensorWasReadFromFile(A.result,
z.name)};A.readAsArrayBuffer(z)};this.querySelector("#upload-tensors").onclick=function(){g.click()};var h=this.querySelector("#file-metadata");h.onchange=function(){var z=h.files[0];h.value="";var A=new FileReader;A.onload=function(){f.metadataWasReadFromFile(A.result,z.name)};A.readAsArrayBuffer(z)};this.querySelector("#upload-metadata").onclick=function(){h.click()};"demo"!==this.projector.servingMode&&(this.$$("#publish-container").style.display="none",this.$$("#upload-tensors-step-container").style.display=
"none",this.$$("#upload-metadata-label").style.display="none");this.$$("#demo-data-buttons-container").style.display="flex";var l=this.$$("#projector-config-template"),n={embeddings:[{tensorName:"My tensor",tensorShape:[1E3,50],tensorPath:"https://raw.githubusercontent.com/.../tensors.tsv",metadataPath:"https://raw.githubusercontent.com/.../optional.metadata.tsv"}]};this.setProjectorConfigTemplateJson(l,n);var m=this.$$("#config-sprite-checkbox");m.onchange=function(){m.checked?n.embeddings[0].sprite=
{imagePath:"https://github.com/.../optional.sprite.png",singleImageDim:[32,32]}:delete n.embeddings[0].sprite;f.setProjectorConfigTemplateJson(l,n)};var q=this.$$("#config-bookmarks-checkbox");q.onchange=function(){q.checked?n.embeddings[0].bookmarksPath="https://raw.githubusercontent.com/.../bookmarks.txt":delete n.embeddings[0].bookmarksPath;f.setProjectorConfigTemplateJson(l,n)};var r=this.$$("#config-metadata-checkbox");r.onchange=function(){r.checked?n.embeddings[0].metadataPath="https://raw.githubusercontent.com/.../optional.metadata.tsv":
delete n.embeddings[0].metadataPath;f.setProjectorConfigTemplateJson(l,n)};var v=this.$$("#projector-config-url"),u=this.$$("#projector-share-url"),w=this.$$("#projector-share-url-link");v.onchange=function(){var z=location.protocol+"//"+location.host+location.pathname+"?config\x3d"+v.value;u.value=z;w.href=z}};e.prototype.setProjectorConfigTemplateJson=function(f,g){f.value=JSON.stringify(g,null,2)};e.prototype._getNumTensorsLabel=function(){return 1===this.tensorNames.length?"1 tensor":this.tensorNames.length+
" tensors"};e.prototype._getNumRunsLabel=function(){return 1===this.runNames.length?"1 run":this.runNames.length+" runs"};e.prototype._hasChoice=function(f){return 0<f.length};e.prototype._hasChoices=function(f){return 1<f.length};return e}(a.DataPanelPolymer);a.DataPanel=b;document.registerElement(b.prototype.is,b)})(vl||(vl={}));
</script>
</dom-module>








<dom-module id="vz-projector-input">
<template>
<style include="vz-projector-styles"></style>
<style>
.info {
  color: rgba(0, 0, 0, 0.5);
  display: block;
  font-size: 11px;
}

.toggle {
  font-size: 12px;
  height: 21px;
  margin: 0px;
  min-width: 0px;
  min-height: 0px;
  padding: 0;
  width: 17px;
}

.toggle[active] {
  background-color: #880E4F;
  color: white;
}
</style>

<paper-input label="[[label]]">
  <div class="slash" prefix slot="prefix">/</div>
  <div class="slash" suffix slot="suffix">/</div>
  <div suffix slot="suffix">
    <paper-button id="regex" toggles class="toggle">.*</paper-button>
  </div>
</paper-input>
<paper-tooltip for="regex" position="bottom" animation-delay="0" fit-to-visible-bounds>
  Enable/disable regex mode.
</paper-tooltip>
<span class="info">[[message]]</span>


</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-input.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){a.ProjectorInputPolymer=a.PolymerElement({is:"vz-projector-input",properties:{label:String,message:String}});var b=function(c){function e(){return null!==c&&c.apply(this,arguments)||this}Qk(e,c);e.prototype.registerInputChangedListener=function(f){this.textChangedListeners.push(f)};e.prototype.ready=function(){var f=this;this.inRegexMode=!1;this.textChangedListeners=[];this.paperInput=this.querySelector("paper-input");this.inRegexModeButton=this.querySelector("paper-button");this.paperInput.setAttribute("error-message",
"Invalid regex");this.paperInput.addEventListener("input",function(){f.onTextChanged()});this.paperInput.addEventListener("keydown",function(g){g.stopPropagation()});this.inRegexModeButton.addEventListener("click",function(){return f.onClickRegexModeButton()});this.updateRegexModeDisplaySlashes();this.onTextChanged()};e.prototype.onClickRegexModeButton=function(){this.inRegexMode=this.inRegexModeButton.active;this.updateRegexModeDisplaySlashes();this.onTextChanged()};e.prototype.notifyInputChanged=
function(f,g){this.textChangedListeners.forEach(function(h){return h(f,g)})};e.prototype.onTextChanged=function(){try{this.inRegexMode&&new RegExp(this.paperInput.value)}catch(f){this.paperInput.setAttribute("invalid","true");this.message="";this.notifyInputChanged(null,!0);return}this.paperInput.removeAttribute("invalid");this.notifyInputChanged(this.paperInput.value,this.inRegexMode)};e.prototype.updateRegexModeDisplaySlashes=function(){for(var f=this.paperInput.querySelectorAll(".slash"),g=this.inRegexMode?
"":"none",h=0;h<f.length;h++)f[h].style.display=g};e.prototype.getValue=function(){return this.paperInput.value};e.prototype.getInRegexMode=function(){return this.inRegexMode};e.prototype.set=function(f,g){this.inRegexModeButton.active=g;this.paperInput.value=f;this.onClickRegexModeButton()};return e}(a.ProjectorInputPolymer);a.ProjectorInput=b;document.registerElement(b.prototype.is,b)})(vl||(vl={}));
</script>
</dom-module>












<dom-module id="vz-projector-inspector-panel">
<style include="vz-projector-styles"></style>
<style>
:host {
   display: flex;
   flex-direction: column;
   /* Account for the bookmark pane at the bottom */
   height: calc(100% - 55px);
}

.container {
  display: block;
  padding: 10px 20px 0 20px;
}

.buttons {
  display: flex;
  height: 60px;
}

.button {
  margin-right: 10px;
  border: none;
  border-radius: 7px;
  font-size: 13px;
  padding: 10px;
  background: #e3e3e3;
}

.button:last-child {
  margin-right: 0;
}

.nn, .metadata-info {
  display: flex;
  flex-direction: column;
}

.nn > *, .metadata-info > * {
  padding: 0 20px;
}

.nn-list, .metadata-list {
  overflow-y: auto;
}

.nn-list .neighbor, .metadata-list .metadata {
  font-size: 12px;
  margin-bottom: 8px;
}

.nn-list .label-and-value, .metadata-list .label-and-value {
  display: flex;
  justify-content: space-between;
}

.label {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.nn-list .value, .metadata-list .value {
  color: #666;
  float: right;
  font-weight: 300;
  margin-left: 8px;
}

.nn-list .bar, .metadata-list .bar {
  position: relative;
  border-top: 1px solid rgba(0, 0, 0, 0.15);
  margin: 2px 0;
}

.nn-list .bar .fill, .metadata-list .bar .fill {
  position: absolute;
  top: -1px;
  border-top: 1px solid white;
}

.nn-list .tick, .metadata-list .tick {
  position: absolute;
  top: 0px;
  height: 3px;
  border-left: 1px solid rgba(0, 0, 0, 0.15);
}

.nn-list .neighbor-link:hover, .metadata-list .metadata-link:hover {
  cursor: pointer;
}

.search-by {
  display: flex;
}

.search-by vz-projector-input {
  width: 100%;
}

.search-by paper-dropdown-menu {
  margin-left: 10px;
  width: 100px;
}

.distance .options {
  float: right;
}

.options a {
  color: #727272;
  font-size: 13px;
  margin-left: 12px;
  text-decoration: none;
}

.options a.selected {
  color: #009EFE;
}

.neighbors {
  margin-bottom: 30px;
}

.neighbors-options {
  margin-top: 6px;
}

.neighbors-options .option-label, .distance .option-label {
  color: #727272;
  margin-right: 2px;
  width: auto;
}

.num-neighbors-container {
  display: inline-block;
}

.nn-slider {
  --paper-slider-input: {
    width: 64px;
  };
  --paper-input-container-input: {
    font-size: 14px;
  };
}

.euclidean {
  margin-right: 10px;
}

.matches-list {
  padding: 0 20px;
}

.matches-list .row {
  border-bottom: 1px solid #ddd;
  cursor: pointer;
  display: flex;
  font-size: 12px;
  margin: 5px 0;
  padding: 4px 0;
}

.results {
  display: flex;
  flex-direction: column;
}
</style>
<template>
<div class="container">
  <div class="buttons">
    <button class="button reset-filter">Show All Data</button>
    <button class="button set-filter">Isolate selection</button>
    <button class="button clear-selection">Clear selection</button>
  </div>
  <div class="search-by">
    <vz-projector-input id="search-box" label="Search"></vz-projector-input>
    <paper-dropdown-menu no-animations label="by">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedMetadataField}}" slot="dropdown-content">
        <template is="dom-repeat" items="[[metadataFields]]">
          <paper-item value="[[item]]" label="[[item]]">
            [[item]]
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </div>
</div>
<div class="results">
  <div class="nn" style="display: none">
    <div class="neighbors">
      <div class="neighbors-options">
        <div class="slider num-nn">
          <span class="option-label">neighbors</span>
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
            The number of neighbors (in the original space) to show when clicking on a point.
          </paper-tooltip>
          <paper-slider class="nn-slider" pin min="5" max="999" editable value="{{numNN}}" on-change="updateNumNN"></paper-slider>
        </div>
      </div>
      <div class="distance">
        <span class="option-label">distance</span>
        <div class="options">
          <a class="selected cosine" href="javascript:void(0);">COSINE</a>
          <a class="euclidean" href="javascript:void(0);">EUCLIDEAN</a>
        </div>
      </div>
    </div>
    <p>Nearest points in the original space:
    <div class="nn-list"></div>
  </div>
  <div class="metadata-info" style="display: none">
    <div class="neighbors-options">
      <div class="slider num-nn">
        <span class="option-label">neighbors</span>
        <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
        <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
          The number of neighbors (in the selected space) to show when clicking on a point.
        </paper-tooltip>
        <paper-slider class="nn-slider" pin min="5" max="999" editable value="{{numNN}}" on-change="updateNumNN"></paper-slider>
      </div>
    </div>
    <p>{{metadataColumn}} labels (click to apply):
    <div class="metadata-list"></div>
  </div>
  <div class="matches-list" style="display: none">
    <div class="list"></div>
    <div class="limit-msg">Showing only the first 100 results...</div>
  </div>
</div>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-inspector-panel.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){a.InspectorPanelPolymer=a.PolymerElement({is:"vz-projector-inspector-panel",properties:{selectedMetadataField:String,metadataFields:Array,metadataColumn:String,numNN:{type:Number,value:100},updateNumNN:Object}});var b=function(c){function e(){return null!==c&&c.apply(this,arguments)||this}Qk(e,c);e.prototype.ready=function(){this.resetFilterButton=this.querySelector(".reset-filter");this.setFilterButton=this.querySelector(".set-filter");this.clearSelectionButton=this.querySelector(".clear-selection");
this.limitMessage=this.querySelector(".limit-msg");this.searchBox=this.querySelector("#search-box");this.displayContexts=[];this.scopeSubtree(this,!0)};e.prototype.initialize=function(f,g){var h=this;this.projector=f;this.projectorEventContext=g;this.setupUI(f);g.registerSelectionChangedListener(function(l,n){return h.updateInspectorPane(l,n)})};e.prototype.updateInspectorPane=function(f,g){this.neighborsOfFirstPoint=g;this.selectedPointIndices=f;this.updateFilterButtons(f.length+g.length);this.updateNeighborsList(g);
0===g.length?this.updateSearchResults(f):this.updateSearchResults([])};e.prototype.enableResetFilterButton=function(f){this.resetFilterButton.disabled=!f};e.prototype.restoreUIFromBookmark=function(f){this.enableResetFilterButton(null!=f.filteredPoints)};e.prototype.metadataChanged=function(f){var g=this,h=-1;this.metadataFields=f.stats.map(function(l,n){l.isNumeric||-1!==h||(h=n);return l.name});if(null==this.selectedMetadataField||0===this.metadataFields.filter(function(l){return l===g.selectedMetadataField}).length)this.selectedMetadataField=
this.metadataFields[Math.max(0,h)];this.updateInspectorPane(this.selectedPointIndices,this.neighborsOfFirstPoint)};e.prototype.datasetChanged=function(){this.enableResetFilterButton(!1)};e.prototype.metadataEditorContext=function(f,g){var h=this;if(this.projector&&this.projector.dataSet){var l=this.projector.dataSet.spriteAndMetadataInfo.stats.filter(function(q){return q.name===g});if(!f||0===l.length||l[0].tooManyUniqueValues)this.removeContext(".metadata-info");else{this.metadataColumn=g;this.addContext(".metadata-info");
var n=this.querySelector(".metadata-list");n.innerHTML="";f=l[0].uniqueEntries.sort(function(q,r){return q.count-r.count});var m=f[f.length-1].count;f.forEach(function(q){var r=document.createElement("div");r.className="metadata";var v=document.createElement("a");v.className="metadata-link";v.title=q.label;var u=document.createElement("div");u.className="label-and-value";var w=document.createElement("div");w.className="label";w.style.color=a.dist2color(h.distFunc,m,q.count);w.innerText=q.label;var z=
document.createElement("div");z.className="value";z.innerText=q.count.toString();u.appendChild(w);u.appendChild(z);w=document.createElement("div");w.className="bar";z=document.createElement("div");z.className="fill";z.style.borderTopColor=a.dist2color(h.distFunc,m,q.count);z.style.width=100*a.normalizeDist(h.distFunc,m,q.count)+"%";w.appendChild(z);for(z=1;4>z;z++){var A=document.createElement("div");A.className="tick";A.style.left=100*z/4+"%";w.appendChild(A)}v.appendChild(u);v.appendChild(w);r.appendChild(v);
n.appendChild(r);v.onclick=function(){h.projector.metadataEdit(g,q.label)}})}}};e.prototype.addContext=function(f){var g=this;-1===this.displayContexts.indexOf(f)&&this.displayContexts.push(f);this.displayContexts.forEach(function(h){g.querySelector(h).style.display="none"});this.querySelector(f).style.display=null};e.prototype.removeContext=function(f){this.displayContexts=this.displayContexts.filter(function(g){return g!==f});this.querySelector(f).style.display="none";0<this.displayContexts.length&&
(this.querySelector(this.displayContexts[this.displayContexts.length-1]).style.display=null)};e.prototype.updateSearchResults=function(f){var g=this,h=this.querySelector(".matches-list").querySelector(".list");h.innerHTML="";if(0===f.length)this.removeContext(".matches-list");else{this.addContext(".matches-list");this.limitMessage.style.display=100>=f.length?"none":null;f=f.slice(0,100);for(var l=function(q){var r=f[q];q=document.createElement("div");q.className="row";var v=n.getLabelFromIndex(r),
u=document.createElement("a");u.className="label";u.title=v;u.innerText=v;u.onmouseenter=function(){g.projectorEventContext.notifyHoverOverPoint(r)};u.onmouseleave=function(){g.projectorEventContext.notifyHoverOverPoint(null)};u.onclick=function(){g.projectorEventContext.notifySelectionChanged([r])};q.appendChild(u);h.appendChild(q)},n=this,m=0;m<f.length;m++)l(m)}};e.prototype.getLabelFromIndex=function(f){return this.projector.dataSet.points[f].metadata[this.selectedMetadataField].toString()};e.prototype.updateNeighborsList=
function(f){var g=this,h=this.querySelector(".nn-list");h.innerHTML="";if(0===f.length)this.removeContext(".nn");else{this.addContext(".nn");this.searchBox.message="";for(var l=0<f.length?f[0].dist:0,n=function(r){var v=f[r];r=document.createElement("div");r.className="neighbor";var u=document.createElement("a");u.className="neighbor-link";u.title=m.getLabelFromIndex(v.index);var w=document.createElement("div");w.className="label-and-value";var z=document.createElement("div");z.className="label";
z.style.color=a.dist2color(m.distFunc,v.dist,l);z.innerText=m.getLabelFromIndex(v.index);var A=document.createElement("div");A.className="value";A.innerText=v.dist.toFixed(3);w.appendChild(z);w.appendChild(A);z=document.createElement("div");z.className="bar";A=document.createElement("div");A.className="fill";A.style.borderTopColor=a.dist2color(m.distFunc,v.dist,l);A.style.width=100*a.normalizeDist(m.distFunc,v.dist,l)+"%";z.appendChild(A);for(A=1;4>A;A++){var E=document.createElement("div");E.className=
"tick";E.style.left=100*A/4+"%";z.appendChild(E)}u.appendChild(w);u.appendChild(z);r.appendChild(u);h.appendChild(r);u.onmouseenter=function(){g.projectorEventContext.notifyHoverOverPoint(v.index)};u.onmouseleave=function(){g.projectorEventContext.notifyHoverOverPoint(null)};u.onclick=function(){g.projectorEventContext.notifySelectionChanged([v.index])}},m=this,q=0;q<f.length;q++)n(q)}};e.prototype.updateFilterButtons=function(f){1<f?(this.setFilterButton.innerText="Isolate "+f+" points",this.setFilterButton.disabled=
null,this.clearSelectionButton.disabled=null):(this.setFilterButton.disabled=!0,this.clearSelectionButton.disabled=!0)};e.prototype.setupUI=function(f){var g=this;this.distFunc=a.vector.cosDist;var h=this.querySelector(".distance a.euclidean");h.onclick=function(){for(var n=g.querySelectorAll(".distance a"),m=0;m<n.length;m++)a.util.classed(n[m],"selected",!1);a.util.classed(h,"selected",!0);g.distFunc=a.vector.dist;g.projectorEventContext.notifyDistanceMetricChanged(g.distFunc);n=f.dataSet.findNeighbors(g.selectedPointIndices[0],
g.distFunc,g.numNN);g.updateNeighborsList(n)};var l=this.querySelector(".distance a.cosine");l.onclick=function(){for(var n=g.querySelectorAll(".distance a"),m=0;m<n.length;m++)a.util.classed(n[m],"selected",!1);a.util.classed(l,"selected",!0);g.distFunc=a.vector.cosDist;g.projectorEventContext.notifyDistanceMetricChanged(g.distFunc);n=f.dataSet.findNeighbors(g.selectedPointIndices[0],g.distFunc,g.numNN);g.updateNeighborsList(n)};this.searchBox.registerInputChangedListener(function(n,m){null==n||
""===n.trim()?(g.searchBox.message="",g.projectorEventContext.notifySelectionChanged([])):(n=f.dataSet.query(n,m,g.selectedMetadataField),g.searchBox.message=0===n.length?"0 matches.":n.length+" matches.",g.projectorEventContext.notifySelectionChanged(n))});this.setFilterButton.onclick=function(){var n=g.selectedPointIndices.concat(g.neighborsOfFirstPoint.map(function(m){return m.index}));f.filterDataset(n);g.enableResetFilterButton(!0);g.updateFilterButtons(0)};this.resetFilterButton.onclick=function(){f.resetFilterDataset();
g.enableResetFilterButton(!1)};this.clearSelectionButton.onclick=function(){f.adjustSelectionAndHover([])};this.enableResetFilterButton(!1)};e.prototype.updateNumNN=function(){null!=this.selectedPointIndices&&this.projectorEventContext.notifySelectionChanged([this.selectedPointIndices[0]])};return e}(a.InspectorPanelPolymer);a.InspectorPanel=b;document.registerElement(b.prototype.is,b)})(vl||(vl={}));
</script>
</dom-module>






<dom-module id="vz-projector-metadata-card">
<template>
<style>
#metadata-card {
  background-color: rgba(255,255,255,0.9);
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
      0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  width: 270px;
}

#header {
  background: #e9e9e9;
}

#icon-container {
  position: absolute;
  right: 0;
  top: 4px;
}

#metadata-label {
  font-weight: 400;
  font-size: 14px;
  line-height: 24px;
  padding: 12px 12px 8px;
  width: 230px;
  overflow-wrap: break-word;
}

#metadata-table {
  display: table;
  padding: 8px 12px 4px;
}

.metadata-row {
  display: table-row;
}

.metadata-key {
  font-weight: bold;
}

.metadata-key, .metadata-value {
  display: table-cell;
  font-size: 12px;
  padding: 3px 3px;
}
    
.metadata-value {
  overflow-wrap: break-word;
}
</style>

<template is="dom-if" if="[[hasMetadata]]">
  <div id="metadata-card">
    <div id="icon-container">
      <paper-icon-button icon="[[collapseIcon]]" on-tap="_toggleMetadataContainer">
      </paper-icon-button>
    </div>
    <div id="header">
      <div id="metadata-label">[[label]]</div>
    </div>
    <iron-collapse id="metadata-container" opened>
      <div id="metadata-table">
        <template is="dom-repeat" items="[[metadata]]">
          <div class="metadata-row">
            <div class="metadata-key">[[item.key]]</div>
            <div class="metadata-value">[[item.value]]</div>
          </div>
        </template>
      </div>
    </iron-collapse>
  </div>
</template>
</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-metadata-card.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){a.MetadataCardPolymer=a.PolymerElement({is:"vz-projector-metadata-card",properties:{hasMetadata:{type:Boolean,value:!1},isCollapsed:{type:Boolean,value:!1},collapseIcon:{type:String,value:"expand-less"},metadata:{type:Array},label:String}});var b=function(c){function e(){return null!==c&&c.apply(this,arguments)||this}Qk(e,c);e.prototype._toggleMetadataContainer=function(){this.$$("#metadata-container").toggle();this.isCollapsed=!this.isCollapsed;this.set("collapseIcon",this.isCollapsed?
"expand-more":"expand-less")};e.prototype.updateMetadata=function(f){this.pointMetadata=f;this.hasMetadata=null!=f;if(f){var g=[],h;for(h in f)f.hasOwnProperty(h)&&g.push({key:h,value:f[h]});this.metadata=g;this.label=""+this.pointMetadata[this.labelOption]}};e.prototype.setLabelOption=function(f){this.labelOption=f;this.pointMetadata&&(this.label=""+this.pointMetadata[this.labelOption])};return e}(a.MetadataCardPolymer);a.MetadataCard=b;document.registerElement(b.prototype.is,b)})(vl||(vl={}));
</script>
</dom-module>



















<dom-module id="vz-projector-projections-panel">
<template>
<style include="vz-projector-styles"></style>
<style>
:host {
  transition: height 0.2s;
}

.ink-button, ::shadow .ink-button {
  border: none;
  border-radius: 2px;
  font-size: 13px;
  padding: 10px;
  min-width: 88px;
  flex-shrink: 0;
  background: #e3e3e3;
}

.ink-panel-buttons {
  margin-bottom: 10px;
}

.two-way-toggle {
  display: flex;
  flex-direction: row;
}

.two-way-toggle span {
  padding-right: 7px;
}

.has-border {
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.toggle {
  min-width: 0px;
  font-size: 12px;
  width: 17px;
  min-height: 0px;
  height: 21px;
  padding: 0;
  margin: 0px;
}

.toggle[active] {
  background-color: #880E4F;
  color: white;
}

.two-columns {
  display:flex;
  justify-content: space-between;
}

.two-columns > :first-child {
  margin-right: 15px;
}

.two-columns > div {
  width: 50%;
}

.dropdown-item {
  justify-content: space-between;
  min-height: 35px;
}

.tsne-supervise-factor {
  margin-bottom: -8px;
}

#z-container {
  display: flex;
  align-items: center;
  width: 50%;
}

#z-checkbox {
  margin: 27px 0 0 5px;
  width: 18px;
}

#z-dropdown {
  flex-grow: 1;
}

.notice {
  color: #880E4F;
}

.container {
  padding: 20px;
}

.book-icon {
  height: 20px;
  color: rgba(0, 0, 0, 0.7);
}

.item-details {
  color: gray;
  font-size: 12px;
  margin-left: 5px;
}

.pca-dropdown {
  width: 100%;
}

.pca-dropdown paper-listbox {
  width: 135px;
}

.dropdown-item.header {
  border-bottom: 1px solid #aaa;
  color: #333;
  font-weight: bold;
}

#total-variance {
  color: rgba(0, 0, 0, 0.7);
}
</style>
<div id="main">
  <div class="ink-panel-header">
    <div class="ink-tab-group">

      <div data-tab="umap" id="umap-tab" class="ink-tab projection-tab">UMAP</div>
      <paper-tooltip for="umap-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        uniform manifold approximation and projection
      </paper-tooltip>      

      <div data-tab="tsne" id="tsne-tab" class="ink-tab projection-tab">t-SNE</div>
      <paper-tooltip for="tsne-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        t-distributed stochastic neighbor embedding
      </paper-tooltip>

      <div data-tab="pca" id="pca-tab" class="ink-tab projection-tab">PCA</div>
      <paper-tooltip for="pca-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        Principal component analysis
      </paper-tooltip>

      <div data-tab="custom" id="custom-tab" class="ink-tab projection-tab" title="Linear projection of two custom vectors">Custom</div>
      <paper-tooltip for="custom-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        Search for two vectors upon which to project all points.
      </paper-tooltip>

    </div>
  </div>
  <div class="container">
     
     <div data-panel="umap" class="ink-panel-content">
      <div class="slider">
        <label>Dimension</label>
        <div class="two-way-toggle">
          <span>2D</span>
          <paper-toggle-button id="umap-toggle" checked="{{umapIs3d}}">3D</paper-toggle-button>
        </div>
      </div>
      <div class="slider umap-neighbors">
        <label>
          Neighbors
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The number of nearest neighbors used to compute the fuzzy simplicial
            set, which is used to approximate the overall shape of the manifold.
            The default value is 15.
          </paper-tooltip>
        </label>
        <paper-slider id="umap-neighbors-slider" value="{{umapNeighbors}}" pin min="5" max="50"></paper-slider>
        <span>[[umapNeighbors]]</span>
      </div>
      <p>
        <button id="run-umap" class="ink-button" title="Run UMAP" on-tap="runUmap">Run</button>
      
      <p id="umap-sampling" class="notice">
        For faster results, the data will be sampled down to [[getUmapSampleSizeText()]] points.
      
      <p>
        <iron-icon icon="book" class="book-icon"></iron-icon>
        <a target="_blank" rel="noopener" href="https://umap-learn.readthedocs.io/en/latest/how_umap_works.html">
          Learn more about UMAP.
        </a>
      
    </div>
    
    <div data-panel="tsne" class="ink-panel-content">
      <div class="slider">
        <label>Dimension</label>
        <div class="two-way-toggle">
          <span>2D</span>
          <paper-toggle-button id="tsne-toggle" checked="{{tSNEis3d}}">3D</paper-toggle-button>
        </div>
      </div>
      <div class="slider tsne-perplexity">
        <label>
          Perplexity
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The most appropriate perplexity value depends on the density of the
            data. Loosely speaking, a larger / denser dataset
            requires a larger perplexity. Typical values for perplexity range
            between 5 and 50.
          </paper-tooltip>
        </label>
        <paper-slider id="perplexity-slider" pin min="2" max="100" value="30"></paper-slider>
        <span></span>
      </div>
      <div class="slider tsne-learning-rate">
        <label>
          Learning rate
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The ideal learning rate often depends on the size of the data,
            with smaller datasets requiring smaller learning rates.
          </paper-tooltip>
        </label>
        <paper-slider id="learning-rate-slider" snaps min="-3" max="2" step="1" value="1" max-markers="6">
        </paper-slider>
        <span></span>
      </div>
      <div class="slider tsne-supervise-factor">
        <label>
          Supervise
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The label importance used for supervision, from 0 (disabled) to 100
            (full importance).
          </paper-tooltip>
        </label>
        <paper-slider id="supervise-factor-slider" min="0" max="100" pin value="{{superviseFactor}}">
        </paper-slider>
        <span></span>
      </div>
      <p>
        <button class="run-tsne ink-button" title="Re-run t-SNE">Run</button>
        <button class="pause-tsne ink-button" title="Pause t-SNE">Pause</button>
        <button class="perturb-tsne ink-button" title="Perturb t-SNE">Perturb</button>
      
      <p>Iteration: <span class="run-tsne-iter">0</span>
      <p id="tsne-sampling" class="notice">
        For faster results, the data will be sampled down to [[getTsneSampleSizeText()]] points.
      
      <p>
        <iron-icon icon="book" class="book-icon"></iron-icon>
        <a target="_blank" href="http://distill.pub/2016/misread-tsne/">
          How to use t-SNE effectively.
        </a>
      
    </div>
    
    <div data-panel="pca" class="ink-panel-content">
      <div class="two-columns">
        <div> 
          <paper-dropdown-menu class="pca-dropdown" vertical-align="bottom" no-animations label="X">
            <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{pcaX}}" slot="dropdown-content">
              <paper-item disabled class="dropdown-item header">
                  <div>#</div>
                  <div>Variance (%)</div>
              </paper-item>
              <template is="dom-repeat" items="[[pcaComponents]]">
                <paper-item class="dropdown-item" value="[[item.id]]" label="Component #[[item.componentNumber]]">
                  <div>[[item.componentNumber]]</div>
                  <div class="item-details">[[item.percVariance]]</div>
                </paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
          <paper-dropdown-menu class="pca-dropdown" no-animations vertical-align="bottom" label="Z" disabled="[[!hasPcaZ]]" id="z-dropdown">
            <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{pcaZ}}" slot="dropdown-content">
              <paper-item disabled class="dropdown-item header">
                  <div>#</div>
                  <div>Variance (%)</div>
              </paper-item>
              <template is="dom-repeat" items="[[pcaComponents]]">
                <paper-item class="dropdown-item" value="[[item.id]]" label="Component #[[item.componentNumber]]">
                  <div>[[item.componentNumber]]</div>
                  <div class="item-details">[[item.percVariance]]</div>
                </paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
        </div>
        <div> 
          <paper-dropdown-menu class="pca-dropdown" vertical-align="bottom" no-animations label="Y">
            <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{pcaY}}" slot="dropdown-content">
              <paper-item disabled class="dropdown-item header">
                  <div>#</div>
                  <div>Variance (%)</div>
              </paper-item>
              <template is="dom-repeat" items="[[pcaComponents]]">
                <paper-item class="dropdown-item" value="[[item.id]]" label="Component #[[item.componentNumber]]">
                  <div>[[item.componentNumber]]</div>
                  <div class="item-details">[[item.percVariance]]</div>
                </paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
          <paper-checkbox id="z-checkbox" checked="{{pcaIs3d}}"></paper-checkbox>
        </div>
      </div>
      <p id="pca-sampling" class="notice">
        PCA is approximate.
        <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      
      <div id="total-variance">Total variance</div>
      <paper-tooltip for="pca-sampling" position="top" animation-delay="0" fit-to-visible-bounds>
        For fast results, the data was sampled to [[getPcaSampleSizeText()]] points and randomly projected down to [[getPcaSampledDimText()]] dimensions.
      </paper-tooltip>
    </div>
    
    <div data-panel="custom" class="ink-panel-content">
      <paper-dropdown-menu style="width: 100%" no-animations label="Search by">
        <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{customSelectedSearchByMetadataOption}}" slot="dropdown-content">
          <template is="dom-repeat" items="[[searchByMetadataOptions]]">
            <paper-item class="dropdown-item" value="[[item]]" label="[[item]]">
              [[item]]
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      <div class="two-columns">
        <vz-projector-input id="xLeft" label="Left"></vz-projector-input>
        <vz-projector-input id="xRight" label="Right"></vz-projector-input>
      </div>
      <div class="two-columns">
        <vz-projector-input id="yUp" label="Up"></vz-projector-input>
        <vz-projector-input id="yDown" label="Down"></vz-projector-input>
      </div>
    </div>
  </div>
</div>
</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-projections-panel.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){a.ProjectionsPanelPolymer=a.PolymerElement({is:"vz-projector-projections-panel",properties:{pcaIs3d:{type:Boolean,value:!0,observer:"_pcaDimensionToggleObserver"},tSNEis3d:{type:Boolean,value:!0,observer:"_tsneDimensionToggleObserver"},superviseFactor:{type:Number,value:0},umapIs3d:{type:Boolean,value:!0,observer:"_umapDimensionToggleObserver"},umapNeighbors:{type:Number,value:15},pcaComponents:Array,pcaX:{type:Number,value:0,observer:"showPCAIfEnabled"},pcaY:{type:Number,value:1,observer:"showPCAIfEnabled"},
pcaZ:{type:Number,value:2,observer:"showPCAIfEnabled"},customSelectedSearchByMetadataOption:{type:String,observer:"_customSelectedSearchByMetadataOptionChanged"}}});var b=function(c){function e(){return null!==c&&c.apply(this,arguments)||this}Qk(e,c);e.prototype.initialize=function(f){this.polymerChangesTriggerReprojection=!0;this.projector=f;this.perplexity=30;this.learningRate=10;this.centroidValues={xLeft:null,xRight:null,yUp:null,yDown:null};this.clearCentroids();this.setupUIControls()};e.prototype.ready=
function(){this.zDropdown=this.querySelector("#z-dropdown");this.runTsneButton=this.querySelector(".run-tsne");this.pauseTsneButton=this.querySelector(".pause-tsne");this.perturbTsneButton=this.querySelector(".perturb-tsne");this.perplexitySlider=this.querySelector("#perplexity-slider");this.learningRateInput=this.querySelector("#learning-rate-slider");this.superviseFactorInput=this.querySelector("#supervise-factor-slider");this.iterationLabelTsne=this.querySelector(".run-tsne-iter");this.runUmapButton=
this.querySelector("#run-umap")};e.prototype.disablePolymerChangesTriggerReprojection=function(){this.polymerChangesTriggerReprojection=!1};e.prototype.enablePolymerChangesTriggerReprojection=function(){this.polymerChangesTriggerReprojection=!0};e.prototype.updateTSNEPerplexityFromSliderChange=function(){this.perplexitySlider&&(this.perplexity=+this.perplexitySlider.value);this.querySelector(".tsne-perplexity span").innerText=""+this.perplexity};e.prototype.updateTSNELearningRateFromUIChange=function(){this.learningRateInput&&
(this.learningRate=Math.pow(10,+this.learningRateInput.value));this.querySelector(".tsne-learning-rate span").innerText=""+this.learningRate};e.prototype.updateTSNESuperviseFactorFromUIChange=function(){this.querySelector(".tsne-supervise-factor span").innerText=""+this.superviseFactor;this.dataSet&&this.dataSet.setSuperviseFactor(this.superviseFactor)};e.prototype.setupUIControls=function(){for(var f=this,g=this,h=this.querySelectorAll(".ink-tab"),l=0;l<h.length;l++)h[l].addEventListener("click",
function(){var n=this.getAttribute("data-tab");g.showTab(n)});this.runTsneButton.addEventListener("click",function(){f.dataSet.hasTSNERun?f.dataSet.stopTSNE():f.runTSNE()});this.pauseTsneButton.addEventListener("click",function(){f.dataSet.tSNEShouldPause?(f.dataSet.tSNEShouldPause=!1,f.pauseTsneButton.innerText="Pause"):(f.dataSet.tSNEShouldPause=!0,f.pauseTsneButton.innerText="Resume")});this.perturbTsneButton.addEventListener("mousedown",function(){f.dataSet&&f.projector&&(f.dataSet.perturbTsne(),
f.projector.notifyProjectionPositionsUpdated(),f.perturbInterval=setInterval(function(){f.dataSet.perturbTsne();f.projector.notifyProjectionPositionsUpdated()},100))});this.perturbTsneButton.addEventListener("mouseup",function(){clearInterval(f.perturbInterval)});this.perplexitySlider.value=this.perplexity.toString();this.perplexitySlider.addEventListener("change",function(){return f.updateTSNEPerplexityFromSliderChange()});this.updateTSNEPerplexityFromSliderChange();this.learningRateInput.addEventListener("change",
function(){return f.updateTSNELearningRateFromUIChange()});this.updateTSNELearningRateFromUIChange();this.superviseFactorInput.addEventListener("change",function(){return f.updateTSNESuperviseFactorFromUIChange()});this.updateTSNESuperviseFactorFromUIChange();this.setupCustomProjectionInputFields();h=this.querySelectorAll("paper-dropdown-menu paper-input input");for(l=0;l<h.length;l++)h[l].style.fontSize="14px"};e.prototype.restoreUIFromBookmark=function(f){this.disablePolymerChangesTriggerReprojection();
this.pcaX=f.pcaComponentDimensions[0];this.pcaY=f.pcaComponentDimensions[1];3===f.pcaComponentDimensions.length&&(this.pcaZ=f.pcaComponentDimensions[2]);this.pcaIs3d=3===f.pcaComponentDimensions.length;this.perplexitySlider&&(this.perplexitySlider.value=f.tSNEPerplexity.toString());this.learningRateInput&&(this.learningRateInput.value=f.tSNELearningRate.toString());this.tSNEis3d=f.tSNEis3d;this.umapIs3d=f.umapIs3d;this.umapNeighbors=f.umapNeighbors;this.customSelectedSearchByMetadataOption=f.customSelectedSearchByMetadataOption;
this.customProjectionXLeftInput&&this.customProjectionXLeftInput.set(f.customXLeftText,f.customXLeftRegex);this.customProjectionXRightInput&&this.customProjectionXRightInput.set(f.customXRightText,f.customXRightRegex);this.customProjectionYUpInput&&this.customProjectionYUpInput.set(f.customYUpText,f.customYUpRegex);this.customProjectionYDownInput&&this.customProjectionYDownInput.set(f.customYDownText,f.customYDownRegex);this.computeAllCentroids();this.setZDropdownEnabled(this.pcaIs3d);this.updateTSNEPerplexityFromSliderChange();
this.updateTSNELearningRateFromUIChange();this.iterationLabelTsne&&(this.iterationLabelTsne.innerText=f.tSNEIteration.toString());null!=f.selectedProjection&&this.showTab(f.selectedProjection);this.enablePolymerChangesTriggerReprojection()};e.prototype.populateBookmarkFromUI=function(f){this.disablePolymerChangesTriggerReprojection();f.pcaComponentDimensions=[this.pcaX,this.pcaY];this.pcaIs3d&&f.pcaComponentDimensions.push(this.pcaZ);null!=this.perplexitySlider&&(f.tSNEPerplexity=+this.perplexitySlider.value);
null!=this.learningRateInput&&(f.tSNELearningRate=+this.learningRateInput.value);f.tSNEis3d=this.tSNEis3d;f.umapIs3d=this.umapIs3d;f.customSelectedSearchByMetadataOption=this.customSelectedSearchByMetadataOption;null!=this.customProjectionXLeftInput&&(f.customXLeftText=this.customProjectionXLeftInput.getValue(),f.customXLeftRegex=this.customProjectionXLeftInput.getInRegexMode());null!=this.customProjectionXRightInput&&(f.customXRightText=this.customProjectionXRightInput.getValue(),f.customXRightRegex=
this.customProjectionXRightInput.getInRegexMode());null!=this.customProjectionYUpInput&&(f.customYUpText=this.customProjectionYUpInput.getValue(),f.customYUpRegex=this.customProjectionYUpInput.getInRegexMode());null!=this.customProjectionYDownInput&&(f.customYDownText=this.customProjectionYDownInput.getValue(),f.customYDownRegex=this.customProjectionYDownInput.getInRegexMode());this.enablePolymerChangesTriggerReprojection()};e.prototype.setZDropdownEnabled=function(f){this.zDropdown&&(f?this.zDropdown.removeAttribute("disabled"):
this.zDropdown.setAttribute("disabled","true"))};e.prototype.dataSetUpdated=function(f,g,h){this.dataSet=f;this.originalDataSet=g;this.dim=h;g=null==f?0:f.points.length;this.perplexitySlider.value=Math.max(5,Math.ceil(Math.sqrt(g)/4)).toString();this.updateTSNEPerplexityFromSliderChange();this.clearCentroids();this.querySelector("#tsne-sampling").style.display=g>a.TSNE_SAMPLE_SIZE?null:"none";f=null==f?!1:f.dim[0]>a.PCA_SAMPLE_DIM||f.dim[1]>a.PCA_SAMPLE_DIM;this.querySelector("#pca-sampling").style.display=
f?null:"none";this.showTab("pca")};e.prototype._pcaDimensionToggleObserver=function(){this.setZDropdownEnabled(this.pcaIs3d);this.beginProjection(this.currentProjection)};e.prototype._tsneDimensionToggleObserver=function(){this.beginProjection(this.currentProjection)};e.prototype._umapDimensionToggleObserver=function(){this.beginProjection(this.currentProjection)};e.prototype.metadataChanged=function(f){var g=-1;this.searchByMetadataOptions=f.stats.map(function(h,l){h.isNumeric||-1!==g||(g=l);return h.name});
this.customSelectedSearchByMetadataOption=this.searchByMetadataOptions[Math.max(0,g)]};e.prototype.showTab=function(f){var g=this;this.currentProjection=f;for(var h=this.querySelector('.ink-tab[data-tab\x3d"'+f+'"]'),l=this.querySelectorAll(".ink-tab"),n=0;n<l.length;n++)a.util.classed(l[n],"active",!1);a.util.classed(h,"active",!0);h=this.querySelectorAll(".ink-panel-content");for(n=0;n<h.length;n++)a.util.classed(h[n],"active",!1);a.util.classed(this.querySelector('.ink-panel-content[data-panel\x3d"'+
f+'"]'),"active",!0);if(null!=this.$){var m=this.$.main;requestAnimationFrame(function(){g.style.height=m.clientHeight+"px"})}this.beginProjection(f)};e.prototype.beginProjection=function(f){!1!==this.polymerChangesTriggerReprojection&&("pca"===f?(null!=this.dataSet&&this.dataSet.stopTSNE(),this.showPCA()):"tsne"===f?this.showTSNE():"umap"===f?this.showUmap():"custom"===f&&(null!=this.dataSet&&this.dataSet.stopTSNE(),this.computeAllCentroids(),this.reprojectCustom()))};e.prototype.showTSNE=function(){var f=
this.dataSet;if(null!=f){var g=a.getProjectionComponents("tsne",[0,1,this.tSNEis3d?2:null]);f=new a.Projection("tsne",g,this.tSNEis3d?3:2,f);this.projector.setProjection(f);this.dataSet.hasTSNERun?this.projector.notifyProjectionPositionsUpdated():this.runTSNE()}};e.prototype.runTSNE=function(){var f=this,g=!1;this.runTsneButton.innerText="Stop";this.runTsneButton.disabled=!0;this.pauseTsneButton.innerText="Pause";this.pauseTsneButton.disabled=!0;this.perturbTsneButton.disabled=!1;this.dataSet.projectTSNE(this.perplexity,
this.learningRate,this.tSNEis3d?3:2,function(h){null!=h?(f.runTsneButton.disabled=!1,f.pauseTsneButton.disabled=!1,f.iterationLabelTsne.innerText=""+h,f.projector.notifyProjectionPositionsUpdated(),!g&&f.dataSet.projections.tsne&&(f.projector.onProjectionChanged(),g=!0)):(f.runTsneButton.innerText="Re-run",f.runTsneButton.disabled=!1,f.pauseTsneButton.innerText="Pause",f.pauseTsneButton.disabled=!0,f.perturbTsneButton.disabled=!0,f.projector.onProjectionChanged())})};e.prototype.showUmap=function(){var f=
this.dataSet;if(null!=f){var g=a.getProjectionComponents("umap",[0,1,this.umapIs3d?2:null]);f=new a.Projection("umap",g,this.umapIs3d?3:2,f);this.projector.setProjection(f);this.dataSet.hasUmapRun?this.projector.notifyProjectionPositionsUpdated():this.runUmap()}};e.prototype.runUmap=function(){var f=this,g=!1;this.runUmapButton.disabled=!0;this.dataSet.projectUmap(this.umapIs3d?3:2,this.umapNeighbors,function(h){null!=h?(f.runUmapButton.disabled=!1,f.projector.notifyProjectionPositionsUpdated(),!g&&
f.dataSet.projections.umap&&(f.projector.onProjectionChanged(),g=!0)):(f.runUmapButton.innerText="Re-run",f.runUmapButton.disabled=!1,f.projector.onProjectionChanged())})};e.prototype.showPCAIfEnabled=function(){this.polymerChangesTriggerReprojection&&this.showPCA()};e.prototype.updateTotalVarianceMessage=function(){var f=this.dataSet.fracVariancesExplained,g=f[this.pcaX]+f[this.pcaY];this.pcaIs3d&&(g+=f[this.pcaZ]);f="Total variance described: "+((100*g).toFixed(1)+"%.");this.querySelector("#total-variance").innerHTML=
f};e.prototype.showPCA=function(){var f=this;null!=this.dataSet&&this.dataSet.projectPCA().then(function(){var g=a.getProjectionComponents("pca",[f.pcaX,f.pcaY,f.pcaZ]);g=new a.Projection("pca",g,f.pcaIs3d?3:2,f.dataSet);f.projector.setProjection(g);g=Math.min(10,f.dataSet.dim[1]);f.updateTotalVarianceMessage();f.pcaComponents=a.util.range(g).map(function(h){return{id:h,componentNumber:h+1,percVariance:(100*f.dataSet.fracVariancesExplained[h]).toFixed(1)}})})};e.prototype.reprojectCustom=function(){if(null!=
this.centroids&&null!=this.centroids.xLeft&&null!=this.centroids.xRight&&null!=this.centroids.yUp&&null!=this.centroids.yDown){var f=a.vector.sub(this.centroids.xRight,this.centroids.xLeft);this.dataSet.projectLinear(f,"linear-x");f=a.vector.sub(this.centroids.yUp,this.centroids.yDown);this.dataSet.projectLinear(f,"linear-y");f=a.getProjectionComponents("custom",["x","y"]);f=new a.Projection("custom",f,2,this.dataSet);this.projector.setProjection(f)}};e.prototype.clearCentroids=function(){this.centroids=
{xLeft:null,xRight:null,yUp:null,yDown:null};this.allCentroid=null};e.prototype._customSelectedSearchByMetadataOptionChanged=function(){!1!==this.polymerChangesTriggerReprojection&&"custom"===this.currentProjection&&(this.computeAllCentroids(),this.reprojectCustom())};e.prototype.setupCustomProjectionInputFields=function(){this.customProjectionXLeftInput=this.setupCustomProjectionInputField("xLeft");this.customProjectionXRightInput=this.setupCustomProjectionInputField("xRight");this.customProjectionYUpInput=
this.setupCustomProjectionInputField("yUp");this.customProjectionYDownInput=this.setupCustomProjectionInputField("yDown")};e.prototype.computeAllCentroids=function(){this.computeCentroid("xLeft");this.computeCentroid("xRight");this.computeCentroid("yUp");this.computeCentroid("yDown")};e.prototype.computeCentroid=function(f){var g=this.querySelector("#"+f);if(null!=g){var h=g.getValue();if(null!=h){var l=this.getCentroid(h,g.getInRegexMode());0===l.numMatches?(g.message="0 matches. Using a random vector.",
l.centroid=a.vector.rn(this.dim)):g.message=l.numMatches+" matches.";this.centroids[f]=l.centroid;this.centroidValues[f]=h}}};e.prototype.setupCustomProjectionInputField=function(f){var g=this,h=this.querySelector("#"+f);h.registerInputChangedListener(function(){g.polymerChangesTriggerReprojection&&(g.computeCentroid(f),g.reprojectCustom())});return h};e.prototype.getCentroid=function(f,g){var h=this;if(null==f||""===f)return{numMatches:0};f=this.originalDataSet.query(f,g,this.customSelectedSearchByMetadataOption);
return{centroid:a.vector.centroid(f,function(l){return h.originalDataSet.points[l].vector}),numMatches:f.length}};e.prototype.getPcaSampledDimText=function(){return a.PCA_SAMPLE_DIM.toLocaleString()};e.prototype.getPcaSampleSizeText=function(){return a.PCA_SAMPLE_SIZE.toLocaleString()};e.prototype.getTsneSampleSizeText=function(){return a.TSNE_SAMPLE_SIZE.toLocaleString()};e.prototype.getUmapSampleSizeText=function(){return a.UMAP_SAMPLE_SIZE.toLocaleString()};return e}(a.ProjectionsPanelPolymer);
a.ProjectionsPanel=b;document.registerElement(b.prototype.is,b)})(vl||(vl={}));
</script>
</dom-module>


<dom-module id="vz-projector">
<template>
<style include="vz-projector-styles"></style>
<style>
:host {
  display: flex;
  width: 100%;
  height: 100%;
}

#container {
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.hidden {
  display: none !important;
}

/* Main */

#main {
  position: relative;
  flex-grow: 2;
}

#main .stage {
  position: relative;
  flex-grow: 2;
}

#scatter {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

#selector {
  display: none;
  height: 100%;
  position: absolute;
  width: 100%;
}

#left-pane {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-width: 312px;
  width: 312px;
  border-right: 1px solid rgba(0, 0, 0, 0.1);
  background: #fafafa;
}

#right-pane {
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  background: #fafafa;
  display: flex;
  height: 100%;
  min-width: 300px;
  width: 300px;
}

.file-name {
  margin-right: 5px;
}

.control input[type=text]:focus {
  outline: none;
  border-bottom: 1px solid rgba(0, 0, 0, 1);
}

.control {
  display: inline-block;
  width: 45%;
  vertical-align: top;
  margin-right: 10px;
  overflow-x: hidden;
}

.control.last {
  margin-right: 0;
}

#notification-dialog {
  width: 400px;
  padding-bottom: 20px;
}

#notification-dialog paper-button {
  background: none;
  text-transform: uppercase;
}

#notification-dialog .progress {
  --paper-spinner-color: #880E4F;
  --paper-spinner-stroke-width: 2px;
}

#notify-msgs {
  text-align: center;
  display: block;
}

.notify-msg {
  font-weight: 500;
  margin: 0;
  padding: 0;
}

.notify-msg.error {
  text-align: left;
}

.brush .extent {
  stroke: #fff;
  fill-opacity: .125;
  shape-rendering: crispEdges;
}

.origin text {
  font-size: 12px;
  font-weight: 500;
}

.origin line {
  stroke: black;
  stroke-opacity: 0.2;
}

/* Ink Framework */

/* - Buttons */
.ink-button, ::shadow .ink-button {
  border: none;
  border-radius: 2px;
  font-size: 13px;
  padding: 10px;
  min-width: 100px;
  flex-shrink: 0;
  background: #e3e3e3;
}

.status-bar-panel {
  display: flex;
  align-items: center;
}

.status-bar-entry {
  border-left: 1px solid rgba(0, 0, 0, 0.5);
  margin-left: 5px;
  padding-left: 5px;
}

/* - Menubar */

.ink-panel-menubar {
  align-items: center;
  position: relative;
  height: 60px;
  border-bottom: solid 1px #eee;
  padding: 0 24px;
  display: flex;
}

.ink-panel-menubar .ink-fabs {
  position: absolute;
  right: 12px;
  top: 40px;
  z-index: 1;
}

#bookmark-panel {
  bottom: 0;
  position: absolute;
  width: 300px;
}
#bookmark-panel-container {
  bottom: 60px;
  position: absolute;
}

.ink-fab {
  margin-left: 8px;
  border: 1px solid rgba(0, 0, 0, 0.02);
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

#metadata-card {
  position: absolute;
  right: 5px;
  top: 25px;
}

#help-3d-icon {
  position: absolute;
  top: 20px;
  left: 20px;
}

#help3dDialog .main {
  margin: 0;
  padding: 20px;
}

#help3dDialog h3 {
  margin-top: 20px;
  margin-bottom: 5px;
}

#help3dDialog h3:first-child {
  margin-top: 0;
}

#data-panel {
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  overflow-y: auto;
}

#toast {
  display: flex;
  align-items: center;
  --paper-toast-color: #eeff41;
}
</style>
<paper-dialog id="notification-dialog" modal>
  <h2 id="notification-title"></h2>
  <paper-dialog-scrollable>
    <div id="notify-msgs"></div>
  </paper-dialog-scrollable>
  <div style="text-align: center;"><paper-spinner-lite active class="progress"></paper-spinner-lite></div>
  <div class="buttons">
    <paper-button class="close-button" dialog-confirm autofocus>Close</paper-button>
  </div>
</paper-dialog>
<div id="container">
  <div id="left-pane" class="ink-panel">
    <vz-projector-data-panel id="data-panel"></vz-projector-data-panel>
    <vz-projector-projections-panel id="projections-panel"></vz-projector-projections-panel>
  </div>
  <div id="main" class="ink-panel">
    <div class="ink-panel-menubar">
      <paper-icon-button id="selectMode" alt="Bounding box selection" toggles icon="image:photo-size-select-small"></paper-icon-button>
      <paper-tooltip for="selectMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Bounding box selection</paper-tooltip>

      <paper-icon-button id="editMode" alt="Edit current selection" toggles icon="image:exposure"></paper-icon-button>
      <paper-tooltip for="editMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Edit current selection</paper-tooltip>

      <paper-icon-button id="nightDayMode" alt="Enable/disable night mode" toggles icon="image:brightness-2"></paper-icon-button>
      <paper-tooltip for="nightDayMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Enable/disable night mode</paper-tooltip>

      <paper-icon-button id="labels3DMode" alt="Enable/disable 3D labels mode" toggles icon="font-download"></paper-icon-button>
      <paper-tooltip for="labels3DMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Enable/disable 3D labels mode</paper-tooltip>
      <div class="status-bar-panel">
        <div class="status-bar-entry">Points: <span class="numDataPoints">Loading...</span></div>
        <div class="status-bar-entry">Dimension: <span class="dim">Loading...</span></div>
        <div id="status-bar" class="status-bar-entry" style="display: none;"></div>
      </div>
      <div class="ink-fabs">
        <paper-icon-button id="reset-zoom" class="ink-fab" alt="Reset zoom to fit all points" icon="home"></paper-icon-button>
        <paper-tooltip for="reset-zoom" position="left" animation-delay="0">Reset zoom to fit all points</paper-tooltip>
      </div>
    </div>
    <div class="stage">
      <div id="scatter">
        <svg id="selector"></svg>
      </div>
      <vz-projector-metadata-card id="metadata-card"></vz-projector-metadata-card>
      <paper-icon-button raised onclick="help3dDialog.open()" icon="help-outline" id="help-3d-icon"></paper-icon-button>
      <paper-tooltip animation-delay="0" for="help-3d-icon">Help with interaction controls.</paper-tooltip>
      <paper-dialog id="help3dDialog" with-backdrop>
        <div class="main" dialog-confirm autofocus>
          <h3>3D controls</h3>
            <b>Rotate</b> Mouse left click.<br>
            <b>Pan</b> Mouse right click.<br>
            <b>Zoom</b> Mouse wheel.<br>
            Holding <b>ctrl</b> reverses the mouse clicks.
          <h3>2D controls</h3>
            <b>Pan</b> Mouse left click.<br>
            <b>Zoom</b> Mouse wheel.
          <div class="dismiss-dialog-note"> Click anywhere to dismiss.</div>
        </div>
      </paper-dialog>
    </div>
  </div>
  <div id="right-pane" class="ink-panel">
    <div class="ink-panel-content active">
      <vz-projector-inspector-panel id="inspector-panel"></vz-projector-inspector-panel>
    </div>
    <div id="bookmark-panel-container">
      <vz-projector-bookmark-panel id="bookmark-panel"></vz-projector-bookmark-panel>
    </div>
  </div>
</div>
<paper-toast id="toast" always-on-top></paper-toast>

</template> 
<script>//~~WEBPATH~~/vz-projector/vz-projector.js
Qk=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();
(function(a){a.ProjectorPolymer=a.PolymerElement({is:"vz-projector",properties:{routePrefix:String,dataProto:{type:String,observer:"_dataProtoChanged"},servingMode:String,projectorConfigJsonPath:String,pageViewLogging:Boolean,eventLogging:Boolean}});var b=function(c){function e(){return null!==c&&c.apply(this,arguments)||this}Qk(e,c);e.prototype.ready=function(){a.logging.setDomContainer(this);this.analyticsLogger=new a.AnalyticsLogger(this.pageViewLogging,this.eventLogging);this.analyticsLogger.logPageView();
a.util.hasWebGLSupport()?(this.selectionChangedListeners=[],this.hoverListeners=[],this.projectionChangedListeners=[],this.distanceMetricChangedListeners=[],this.selectedPointIndices=[],this.neighborsOfFirstPoint=[],this.editMode=!1,this.dataPanel=this.$["data-panel"],this.inspectorPanel=this.$["inspector-panel"],this.inspectorPanel.initialize(this,this),this.projectionsPanel=this.$["projections-panel"],this.projectionsPanel.initialize(this),this.bookmarkPanel=this.$["bookmark-panel"],this.bookmarkPanel.initialize(this,
this),this.metadataCard=this.$["metadata-card"],this.statusBar=this.querySelector("#status-bar"),this.scopeSubtree(this.$$("#notification-dialog"),!0),this.setupUIControls(),this.initializeDataProvider()):(this.analyticsLogger.logWebGLDisabled(),a.logging.setErrorMessage("Your browser or device does not have WebGL enabled. Please enable hardware acceleration, or use a browser that supports WebGL."))};e.prototype.setSelectedLabelOption=function(f){this.selectedLabelOption=f;this.metadataCard.setLabelOption(this.selectedLabelOption);
this.projectorScatterPlotAdapter.setLabelPointAccessor(f);this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.projectorScatterPlotAdapter.render()};e.prototype.setSelectedColorOption=function(f){this.selectedColorOption=f;this.projectorScatterPlotAdapter.setLegendPointColorer(this.getLegendPointColorer(f));this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.projectorScatterPlotAdapter.render()};e.prototype.setNormalizeData=function(f){this.normalizeData=f;this.setCurrentDataSet(this.originalDataSet.getSubset())};
e.prototype.updateDataSet=function(f,g,h){this.dataSetFilterIndices=null;this.originalDataSet=f;if(null!=f){this.normalizeData=50<=this.originalDataSet.dim[1];g=g||{};if(null==g.pointsInfo){var l=this.makeDefaultPointsInfoAndStats(f.points),n=l[1];g.pointsInfo=l[0];g.stats=n}if(!f.mergeMetadata(g))return}null!=this.projectorScatterPlotAdapter&&(null==f?(this.projectorScatterPlotAdapter.setLabelPointAccessor(null),this.setProjection(null)):(this.projectorScatterPlotAdapter.updateScatterPlotPositions(),
this.projectorScatterPlotAdapter.updateScatterPlotAttributes(),this.projectorScatterPlotAdapter.resize(),this.projectorScatterPlotAdapter.render()));null!=f?(this.dataPanel.setNormalizeData(this.normalizeData),this.setCurrentDataSet(f.getSubset()),this.projectorScatterPlotAdapter.setLabelPointAccessor(this.selectedLabelOption),this.inspectorPanel.datasetChanged(),this.inspectorPanel.metadataChanged(g),this.projectionsPanel.metadataChanged(g),this.dataPanel.metadataChanged(g,h)):this.setCurrentDataSet(null)};
e.prototype.metadataEdit=function(f,g){var h=this;this.selectedPointIndices.forEach(function(l){return h.dataSet.points[l].metadata[f]=g});this.neighborsOfFirstPoint.forEach(function(l){return h.dataSet.points[l.index].metadata[f]=g});this.dataSet.spriteAndMetadataInfo.stats=a.analyzeMetadata(this.dataSet.spriteAndMetadataInfo.stats.map(function(l){return l.name}),this.dataSet.points.map(function(l){return l.metadata}));this.metadataChanged(this.dataSet.spriteAndMetadataInfo);this.metadataEditorContext(!0,
f)};e.prototype.metadataChanged=function(f,g){null!=g&&(this.metadataFile=g);this.dataSet.spriteAndMetadataInfo=f;this.projectionsPanel.metadataChanged(f);this.inspectorPanel.metadataChanged(f);this.dataPanel.metadataChanged(f,this.metadataFile);0<this.selectedPointIndices.length?this.metadataCard.updateMetadata(this.dataSet.points[this.selectedPointIndices[0]].metadata):this.metadataCard.updateMetadata(null);this.setSelectedLabelOption(this.selectedLabelOption)};e.prototype.metadataEditorContext=
function(f,g){this.inspectorPanel&&this.inspectorPanel.metadataEditorContext(f,g)};e.prototype.setSelectedTensor=function(f,g){this.bookmarkPanel.setSelectedTensor(f,g,this.dataProvider)};e.prototype.registerSelectionChangedListener=function(f){this.selectionChangedListeners.push(f)};e.prototype.filterDataset=function(f){var g=this.selectedPointIndices.length;null==this.dataSetBeforeFilter&&(this.dataSetBeforeFilter=this.dataSet);this.setCurrentDataSet(this.dataSet.getSubset(f));this.dataSetFilterIndices=
f;this.projectorScatterPlotAdapter.updateScatterPlotPositions();this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.adjustSelectionAndHover(a.util.range(g))};e.prototype.resetFilterDataset=function(){var f=this,g=this.selectedPointIndices.map(function(h){return f.dataSet.points[h].index});this.setCurrentDataSet(this.dataSetBeforeFilter);null!=this.projection&&(this.projection.dataSet=this.dataSetBeforeFilter);this.dataSetBeforeFilter=null;this.projectorScatterPlotAdapter.updateScatterPlotPositions();
this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.dataSetFilterIndices=[];this.adjustSelectionAndHover(g)};e.prototype.notifySelectionChanged=function(f){var g=this,h=[];if(this.editMode&&0<f.length)if(1===this.selectedPointIndices.length){var l=this.dataSet.points[this.selectedPointIndices[0]].vector;h=this.neighborsOfFirstPoint.filter(function(m){return 0==f.filter(function(q){return q==m.index}).length});f.forEach(function(m){if(m!=g.selectedPointIndices[0]&&0==g.neighborsOfFirstPoint.filter(function(v){return v.index==
m}).length){for(var q=g.inspectorPanel.distFunc(l,g.dataSet.points[m].vector),r=0;r<h.length&&h[r].dist<q;)r+=1;h.splice(r,0,{index:m,dist:q})}})}else{var n=this.selectedPointIndices.filter(function(m){return 0==f.filter(function(q){return q==m}).length});f.forEach(function(m){0==g.selectedPointIndices.filter(function(q){return q==m}).length&&n.push(m)});this.selectedPointIndices=n;0<this.selectedPointIndices.length?this.metadataCard.updateMetadata(this.dataSet.points[this.selectedPointIndices[0]].metadata):
this.metadataCard.updateMetadata(null)}else this.selectedPointIndices=f,1===f.length?(h=this.dataSet.findNeighbors(f[0],this.inspectorPanel.distFunc,this.inspectorPanel.numNN),this.metadataCard.updateMetadata(this.dataSet.points[f[0]].metadata)):this.metadataCard.updateMetadata(null);this.selectionChangedListeners.forEach(function(m){return m(g.selectedPointIndices,h)})};e.prototype.registerHoverListener=function(f){this.hoverListeners.push(f)};e.prototype.notifyHoverOverPoint=function(f){this.hoverListeners.forEach(function(g){return g(f)})};
e.prototype.registerProjectionChangedListener=function(f){this.projectionChangedListeners.push(f)};e.prototype.notifyProjectionChanged=function(f){this.projectionChangedListeners.forEach(function(g){return g(f)})};e.prototype.registerDistanceMetricChangedListener=function(f){this.distanceMetricChangedListeners.push(f)};e.prototype.notifyDistanceMetricChanged=function(f){this.distanceMetricChangedListeners.forEach(function(g){return g(f)})};e.prototype._dataProtoChanged=function(f){f=f?JSON.parse(f):
null;this.initializeDataProvider(f)};e.prototype.makeDefaultPointsInfoAndStats=function(f){var g=[];f.forEach(function(h){var l={};l.__index__=h.index;g.push(l)});return[g,[{name:"__index__",isNumeric:!1,tooManyUniqueValues:!0,min:0,max:g.length-1}]]};e.prototype.initializeDataProvider=function(f){if("demo"===this.servingMode)f=a.util.getURLParams(),this.dataProvider=new a.DemoDataProvider("config"in f?f.config:this.projectorConfigJsonPath);else if("server"===this.servingMode){if(!this.routePrefix)throw"route-prefix is a required parameter";
this.dataProvider=new a.ServerDataProvider(this.routePrefix)}else if("proto"===this.servingMode&&null!=f)this.dataProvider=new a.ProtoDataProvider(f);else return;this.dataPanel.initialize(this,this.dataProvider)};e.prototype.getLegendPointColorer=function(f){var g=this;return null==f||null==f.map?null:function(h,l){h=h.points[l].metadata[g.selectedColorOption.name];return null==h?"black":f.map(h)}};e.prototype.get3DLabelModeButton=function(){return this.querySelector("#labels3DMode")};e.prototype.get3DLabelMode=
function(){return this.get3DLabelModeButton().active};e.prototype.adjustSelectionAndHover=function(f){this.notifySelectionChanged(f);this.notifyHoverOverPoint(void 0);this.setMouseMode(a.MouseMode.CAMERA_AND_CLICK_SELECT)};e.prototype.setMouseMode=function(f){this.querySelector("#selectMode").active=f===a.MouseMode.AREA_SELECT;this.projectorScatterPlotAdapter.scatterPlot.setMouseMode(f)};e.prototype.setCurrentDataSet=function(f){this.adjustSelectionAndHover([]);null!=this.dataSet&&this.dataSet.stopTSNE();
null!=f&&this.normalizeData&&f.normalize();this.dim=null==f?0:f.dim[1];this.querySelector("span.numDataPoints").innerText=null==f?"0":""+f.dim[0];this.querySelector("span.dim").innerText=null==f?"0":""+f.dim[1];this.dataSet=f;this.projectionsPanel.dataSetUpdated(this.dataSet,this.originalDataSet,this.dim);this.projectorScatterPlotAdapter.setDataSet(this.dataSet);this.projectorScatterPlotAdapter.scatterPlot.setCameraParametersForNextCameraCreation(null,!0)};e.prototype.setupUIControls=function(){var f=
this;this.querySelector("#reset-zoom").addEventListener("click",function(){f.projectorScatterPlotAdapter.scatterPlot.resetZoom();f.projectorScatterPlotAdapter.scatterPlot.startOrbitAnimation()});var g=this.querySelector("#selectMode");g.addEventListener("click",function(){f.setMouseMode(g.active?a.MouseMode.AREA_SELECT:a.MouseMode.CAMERA_AND_CLICK_SELECT)});var h=this.querySelector("#nightDayMode");h.addEventListener("click",function(){f.projectorScatterPlotAdapter.scatterPlot.setDayNightMode(h.active)});
var l=this.querySelector("#editMode");l.addEventListener("click",function(){f.editMode=l.active});this.get3DLabelModeButton().addEventListener("click",function(){f.projectorScatterPlotAdapter.set3DLabelMode(f.get3DLabelMode())});window.addEventListener("resize",function(){f.parentNode.style.height=document.body.clientHeight+"px";f.projectorScatterPlotAdapter.resize()});this.projectorScatterPlotAdapter=new a.ProjectorScatterPlotAdapter(this.getScatterContainer(),this);this.projectorScatterPlotAdapter.setLabelPointAccessor(this.selectedLabelOption);
this.projectorScatterPlotAdapter.scatterPlot.onCameraMove(function(){return f.bookmarkPanel.clearStateSelection()});this.registerHoverListener(function(n){return f.onHover(n)});this.registerProjectionChangedListener(function(n){return f.onProjectionChanged(n)});this.registerSelectionChangedListener(function(n,m){return f.onSelectionChanged(n,m)})};e.prototype.onHover=function(f){this.hoverPointIndex=f;var g=null;null!=f&&(f=this.dataSet.points[f],f.metadata[this.selectedLabelOption]&&(g=f.metadata[this.selectedLabelOption].toString()));
0===this.selectedPointIndices.length&&(this.statusBar.style.display=g?null:"none",this.statusBar.innerText=g)};e.prototype.getScatterContainer=function(){return this.querySelector("#scatter")};e.prototype.onSelectionChanged=function(f,g){this.selectedPointIndices=f;this.neighborsOfFirstPoint=g;this.dataPanel.onProjectorSelectionChanged(f,g);f=this.selectedPointIndices.length+g.length;this.statusBar.innerText="Selected "+f+" points";this.statusBar.style.display=0<f?null:"none"};e.prototype.onProjectionChanged=
function(f){this.dataPanel.projectionChanged(f)};e.prototype.setProjection=function(f){this.projection=f;null!=f&&this.analyticsLogger.logProjectionChanged(f.projectionType);this.notifyProjectionChanged(f)};e.prototype.notifyProjectionPositionsUpdated=function(){this.projectorScatterPlotAdapter.notifyProjectionPositionsUpdated()};e.prototype.getCurrentState=function(){var f=new a.State;f.projections=[];for(var g=0;g<this.dataSet.points.length;g++){for(var h=this.dataSet.points[g],l={},n=Object.keys(h.projections),
m=0;m<n.length;++m)l[n[m]]=h.projections[n[m]];f.projections.push(l)}f.selectedProjection=this.projection.projectionType;f.dataSetDimensions=this.dataSet.dim;f.tSNEIteration=this.dataSet.tSNEIteration;f.selectedPoints=this.selectedPointIndices;f.filteredPoints=this.dataSetFilterIndices;this.projectorScatterPlotAdapter.populateBookmarkFromUI(f);f.selectedColorOptionName=this.dataPanel.selectedColorOptionName;f.forceCategoricalColoring=this.dataPanel.forceCategoricalColoring;f.selectedLabelOption=this.selectedLabelOption;
this.projectionsPanel.populateBookmarkFromUI(f);return f};e.prototype.loadState=function(f){this.setProjection(null);this.projectionsPanel.disablePolymerChangesTriggerReprojection();null!=this.dataSetBeforeFilter&&this.resetFilterDataset();null!=f.filteredPoints&&this.filterDataset(f.filteredPoints);this.projectionsPanel.enablePolymerChangesTriggerReprojection();for(var g=0;g<f.projections.length;g++)for(var h=this.dataSet.points[g],l=f.projections[g],n=Object.keys(l),m=0;m<n.length;++m)h.projections[n[m]]=
l[n[m]];this.dataSet.hasTSNERun="tsne"===f.selectedProjection;this.dataSet.tSNEIteration=f.tSNEIteration;this.projectionsPanel.restoreUIFromBookmark(f);this.inspectorPanel.restoreUIFromBookmark(f);this.dataPanel.selectedColorOptionName=f.selectedColorOptionName;this.dataPanel.setForceCategoricalColoring(!!f.forceCategoricalColoring);this.selectedLabelOption=f.selectedLabelOption;this.projectorScatterPlotAdapter.restoreUIFromBookmark(f);g=a.stateGetAccessorDimensions(f);h=a.getProjectionComponents(f.selectedProjection,
g);l=new a.Projection(f.selectedProjection,h,g.length,this.dataSet);this.setProjection(l);this.notifySelectionChanged(f.selectedPoints)};return e}(a.ProjectorPolymer);a.Projector=b;document.registerElement(b.prototype.is,b)})(vl||(vl={}));
</script>
</dom-module>


<dom-module id="vz-projector-dashboard">
<template>
  <template is="dom-if" if="[[dataNotFound]]">
    <div style="max-width: 540px; margin: 80px auto 0 auto;">
      <h3>
        No checkpoint was found.
      </h3>
      <p>Probable causes:
      <ul>
        <li>No checkpoint has been saved yet. Please refresh the page
          periodically.
        <li>You are not saving any checkpoint. To save your model,
          create a
          <a href="https://www.tensorflow.org/api_docs/python/tf/train/Saver"><code>tf.train.Saver</code></a>
          and save your model periodically
          by calling <code>saver.save(session, LOG_DIR/model.ckpt, step)</code>.
      </ul>
      <p>
      If youâre new to using TensorBoard, and want to find out how
      to add data and set up your event files, check out the
      <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
      and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
      <p>
      If you think TensorBoard is configured properly, please see
      <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
      and consider filing an issue on GitHub.
    </div>
  </template>
  <template is="dom-if" if="[[!dataNotFound]]">
    <vz-projector id="projector" route-prefix="[[_routePrefix]]" serving-mode="server" page-view-logging event-logging></vz-projector>
  </template>
</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-dashboard.html.js
Polymer({is:"vz-projector-dashboard",properties:{dataNotFound:Boolean,_routePrefix:{type:String,value:function(){return Rk.getRouter().pluginRoute("projector","")}},_initialized:Boolean},reload:function(){},attached:function(){var a=this;if(!this._initialized){var b=new XMLHttpRequest;b.open("GET",this._routePrefix+"/runs");b.onload=function(){a._initialized=!0;var c=JSON.parse(b.responseText);a.set("dataNotFound",0===c.length)};b.onerror=function(){a.set("dataNotFound",!1)};b.send()}}});
</script>
</dom-module>
























<dom-module id="tf-text-loader">
  <template>
    <tf-card-heading run="[[run]]" tag="[[tag]]" color="[[_runColor]]">
    </tf-card-heading>
    <paper-material elevation="1" id="steps-container" class="container scrollbar" style="border-color: [[_runColor]]">
      <template is="dom-repeat" items="[[_texts]]">
        <paper-material elevation="1" class="step-container">
          step <span class="step-value">[[_formatStep(item.step)]]</span>
        </paper-material>
        <paper-material elevation="1" class="text">
          <tf-markdown-view html="[[item.text]]"></tf-markdown-view>
        </paper-material>
      </template>
    </paper-material>
    <style include="scrollbar-style"></style>
    <style>
      :host {
        display: flex;
        flex-direction: column;
        width: 100%;
        height: auto;
        margin-right: 10px;
        margin-bottom: 15px;
      }
      .scrollbar {
        will-change: transform;
      }
      #steps-container {
        border-radius: 3px;
        border: 2px solid  /* color computed and set as inline style */;
        display: block;
        max-height: 500px;
        overflow: auto;
        padding: 10px;
      }
      .text {
        background-color: white;
        border-radius: 0 3px 3px 3px;
        padding: 5px;
        word-break: break-word;
      }
      .step-container {
        background-color: var(--tb-ui-light-accent);
        border-bottom: none;
        border-radius: 3px 3px 0 0;
        border: 1px solid #ccc;
        display: inline-block;
        font-size: 12px;
        font-style: italic;
        margin-left: -1px;  /* to correct for border */
        padding: 3px;
      }
      .step-container:not(:first-child) {
        margin-top: 15px;
      }

      tf-card-heading {
        margin-bottom: 10px;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-text-dashboard/tf-text-loader.html.js
Polymer({is:"tf-text-loader",properties:{run:String,tag:String,_runColor:{type:String,computed:"_computeRunColor(run)"},_texts:{type:Array,value:[]},requestManager:Object,_canceller:{type:Object,value:function(){return new Rk.Canceller}}},_computeRunColor:function(a){return Yk.runsColorScale(a)},attached:function(){this._attached=!0;this.reload()},reload:function(){var a=this;if(this._attached){this._canceller.cancelAll();var b=Rk.addParams(Rk.getRouter().pluginRoute("text","/text"),{tag:this.tag,
run:this.run}),c=this._canceller.cancellable(function(e){e.cancelled||(e=e.value.map(function(f){return{wall_time:new Date(1E3*f.wall_time),step:f.step,text:f.text}}),a.set("_texts",e.slice().reverse()))});this.requestManager.request(b).then(c)}},_formatStep:function(a){return d3.format(",")(a)}});
</script>
</dom-module>



<dom-module id="tf-text-dashboard">
  <template>
    <tf-dashboard-layout>
      <div class="sidebar">
        <div class="sidebar-section">
          <tf-runs-selector selected-runs="{{_selectedRuns}}">
          </tf-runs-selector>
        </div>
      </div>
      <div class="center">
        <template is="dom-if" if="[[_dataNotFound]]">
          <div class="no-data-warning">
            <h3>No text data was found.</h3>
            <p>Probable causes:
            <ul>
              <li>You havenât written any text data to your event files.
              <li>TensorBoard canât find your event files.
            </ul>
            <p>
            If youâre new to using TensorBoard, and want to find out how
            to add data and set up your event files, check out the
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
            and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
            <p>
            If you think TensorBoard is configured properly, please see
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
            and consider filing an issue on GitHub.
          </div>
        </template>
        <template is="dom-if" if="[[!_dataNotFound]]">
          <tf-tag-filterer tag-filter="{{_tagFilter}}"></tf-tag-filterer>
          <template is="dom-repeat" items="[[_categories]]" as="category">
            <tf-category-pane category="[[category]]" opened="[[_shouldOpen(index)]]">
              <tf-paginated-view items="[[category.items]]" pages="{{category._pages}}">
                <template is="dom-repeat" items="[[category._pages]]" as="page">
                  <template is="dom-if" if="[[page.active]]">
                    <div class="layout horizontal wrap">
                      <template is="dom-repeat" items="[[page.items]]">
                        <tf-text-loader tag="[[item.tag]]" run="[[item.run]]" request-manager="[[_requestManager]]"></tf-text-loader>
                      </template>
                    </div>
                  </template>
                </template>
              </tf-paginated-view>
            
          </tf-category-pane></template>
        </template>
      </div>
    </tf-dashboard-layout>
    <style include="dashboard-style"></style>
    <style>
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-text-dashboard/tf-text-dashboard.html.js
Polymer({is:"tf-text-dashboard",properties:{_selectedRuns:Array,_runToTag:Object,_dataNotFound:Boolean,_tagFilter:String,_categoriesDomReady:Boolean,_categories:{type:Array,computed:"_makeCategories(_runToTag, _selectedRuns, _tagFilter, _categoriesDomReady)"},_requestManager:{type:Object,value:function(){return new Rk.RequestManager}}},ready:function(){this.reload()},reload:function(){var a=this;this._fetchTags().then(function(){a._reloadTexts()})},_shouldOpen:function(a){return 2>=a},_fetchTags:function(){var a=
this,b=Rk.getRouter().pluginRoute("text","/tags");return this._requestManager.request(b).then(function(c){if(!_.isEqual(c,a._runToTag)){var e=Rk.getTags(c);a.set("_dataNotFound",0===e.length);a.set("_runToTag",c);a.async(function(){a.set("_categoriesDomReady",!0)})}})},_reloadTexts:function(){this.querySelectorAll("tf-text-loader").forEach(function(a){a.reload()})},_makeCategories:function(a,b,c){return Sk.categorizeRunTagCombinations(a,b,c)}});
</script>
</dom-module>

























<dom-module id="tf-pr-curve-card">
  <template>
    <tf-card-heading tag="[[tag]]" display-name="[[tagMetadata.displayName]]" description="[[tagMetadata.description]]"></tf-card-heading>

    <tf-line-chart-data-loader x-components-creation-method="[[_xComponentsCreationMethod]]" y-value-accessor="[[_yValueAccessor]]" tooltip-columns="[[_tooltipColumns]]" color-scale="[[_colorScaleFunction]]" default-x-range="[[_defaultXRange]]" default-y-range="[[_defaultYRange]]" smoothing-enabled="[[_smoothingEnabled]]" request-manager="[[requestManager]]" data-to-load="[[runs]]" data-series="[[runs]]" load-key="[[tag]]" get-data-load-url="[[_dataUrl]]" load-data-callback="[[_createProcessDataFunction()]]" active="[[active]]"></tf-line-chart-data-loader>

    <div id="buttons-row">
      <paper-icon-button selected$="[[_expanded]]" icon="fullscreen" on-tap="_toggleExpanded"></paper-icon-button>
      <paper-icon-button icon="settings-overscan" on-tap="_resetDomain" title="Reset axes to [0, 1]."></paper-icon-button>
    </div>

    <div id="step-legend">
      <template is="dom-repeat" items="[[_runsWithStepAvailable]]" as="run">
        <div class="legend-row">
          <div class="color-box" style="background: [[_computeRunColor(run)]];">
          </div>
          [[run]] is at
          <span class="step-label-text">
            step [[_computeCurrentStepForRun(_runToPrCurveEntry, run)]]
          </span><br>
          <span class="wall-time-label-text">
            ([[_computeCurrentWallTimeForRun(_runToPrCurveEntry, run)]])
          </span>
        </div>
      </template>
    </div>

    <style>
      :host {
        display: flex;
        flex-direction: column;
        width: 500px;
        margin-right: 10px;
        margin-bottom: 25px;
      }
      :host[_expanded] {
        width: 100%;
      }
      tf-line-chart-data-loader {
        height: 300px;
        position: relative;
      }
      :host[_expanded] tf-line-chart-data-loader {
        height: 600px;
      }
      #buttons-row {
        display: flex;
        flex-direction: row;
      }
      #buttons-row paper-icon-button {
        color: #2196F3;
        border-radius: 100%;
        width: 32px;
        height: 32px;
        padding: 4px;
      }
      #buttons-row paper-icon-button[selected] {
        background: var(--tb-ui-light-accent);
      }
      #step-legend {
        box-sizing: border-box;
        font-size: 0.8em;
        max-height: 200px;
        overflow-y: auto;
        padding: 0 0 0 10px;
        width: 100%;
      }
      .legend-row {
        margin: 5px 0 5px 0;
        width: 100%;
      }
      .color-box {
        display: inline-block;
        border-radius: 1px;
        width: 10px;
        height: 10px;
      }
      .step-label-text {
        font-weight: bold;
      }
      .wall-time-label-text {
        color: #888;
        font-size: 0.8em;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-pr-curve-dashboard/tf-pr-curve-card.html.js
Polymer({is:"tf-pr-curve-card",properties:{runs:Array,tag:String,tagMetadata:Object,runToStepCap:Object,requestManager:Object,active:Boolean,_expanded:{type:Boolean,value:!1,reflectToAttribute:!0},_runToPrCurveEntry:{type:Object,value:function(){return{}}},_previousRunToPrCurveEntry:{type:Object,value:function(){return{}}},_runsWithStepAvailable:{type:Array,computed:"_computeRunsWithStepAvailable(runs, _runToPrCurveEntry)"},_setOfRelevantRuns:{type:Object,computed:"_computeSetOfRelevantRuns(_runsWithStepAvailable)"},
_runToDataOverTime:Object,_colorScaleFunction:{type:Object,value:function(){return{scale:Yk.runsColorScale}}},_canceller:{type:Object,value:function(){return new Rk.Canceller}},_attached:Boolean,_xComponentsCreationMethod:{type:Object,readOnly:!0,value:function(){return function(){var a=new Plottable.Scales.Linear;return{scale:a,axis:new Plottable.Axes.Numeric(a,"bottom"),accessor:function(b){return b.recall}}}}},_yValueAccessor:{type:Object,readOnly:!0,value:function(){return function(a){return a.precision}}},
_tooltipColumns:{type:Array,readOnly:!0,value:function(){function a(c){return isNaN(c)?"NaN":b(c)}var b=cl.multiscaleFormatter(cl.Y_TOOLTIP_FORMATTER_PRECISION);return[{title:"Run",evaluate:function(c){return c.dataset.metadata().name}},{title:"Threshold",evaluate:function(c){return a(c.datum.thresholds)}},{title:"Precision",evaluate:function(c){return a(c.datum.precision)}},{title:"Recall",evaluate:function(c){return a(c.datum.recall)}},{title:"TP",evaluate:function(c){return c.datum.true_positives}},
{title:"FP",evaluate:function(c){return c.datum.false_positives}},{title:"TN",evaluate:function(c){return c.datum.true_negatives}},{title:"FN",evaluate:function(c){return c.datum.false_negatives}}]}},_seriesDataFields:{type:Array,value:"thresholds precision recall true_positives false_positives true_negatives false_negatives".split(" "),readOnly:!0},_defaultXRange:{type:Array,value:[-.05,1.05],readOnly:!0},_defaultYRange:{type:Array,value:[-.05,1.05],readOnly:!0},_dataUrl:{type:Function,value:function(){var a=
this;return function(b){var c=a.tag;return Rk.addParams(Rk.getRouter().pluginRoute("pr_curves","/pr_curves"),{tag:c,run:b})}}},_smoothingEnabled:{type:Boolean,value:!1,readOnly:!0}},observers:["reload(runs, tag)","_setChartData(_runToPrCurveEntry, _previousRunToPrCurveEntry, _setOfRelevantRuns)","_updateRunToPrCurveEntry(_runToDataOverTime, runToStepCap)"],_createProcessDataFunction:function(){var a=this;return function(b,c,e){a.set("_runToDataOverTime",Object.assign({},a._runToDataOverTime,e))}},
_computeRunColor:function(a){return this._colorScaleFunction.scale(a)},attached:function(){this._attached=!0;this.reload()},reload:function(){this._attached&&(0===this.runs.length?this.set("_runToDataOverTime",{}):this.$$("tf-line-chart-data-loader").reload())},_setChartData:function(a,b,c){var e=this;_.forOwn(a,function(f,g){var h=b[g];h&&a[g].step===h.step||(c[g]?e._updateSeriesDataForRun(g,f):e._clearSeriesData(g))})},_updateSeriesDataForRun:function(a,b){for(var c=_.reduce(this._seriesDataFields,
function(g,h){g[h]=b[h].slice().reverse();return g},{}),e=Array(c[this._seriesDataFields[0]].length),f={$jscomp$loop$prop$i$82:0};f.$jscomp$loop$prop$i$82<e.length;f={$jscomp$loop$prop$i$82:f.$jscomp$loop$prop$i$82},f.$jscomp$loop$prop$i$82++)e[f.$jscomp$loop$prop$i$82]=_.mapValues(c,function(g){return function(h){return h[g.$jscomp$loop$prop$i$82]}}(f));this.$$("tf-line-chart-data-loader").setSeriesData(a,e)},_clearSeriesData:function(a){this.$$("tf-line-chart-data-loader").setSeriesData(a,[])},
_updateRunToPrCurveEntry:function(a,b){var c=this,e={};_.forOwn(a,function(f,g){f&&f.length&&(e[g]=c._computeEntryClosestOrEqualToStepCap(b[g],f))});this.set("_previousRunToPrCurveEntry",this._runToPrCurveEntry);this.set("_runToPrCurveEntry",e)},_computeEntryClosestOrEqualToStepCap:function(a,b){a=Math.min(_.sortedIndex(b.map(function(c){return c.step}),a),b.length-1);return b[a]},_computeRunsWithStepAvailable:function(a,b){return _.filter(a,function(c){return b[c]}).sort()},_computeSetOfRelevantRuns:function(a){var b=
{};_.forEach(a,function(c){b[c]=!0});return b},_computeCurrentStepForRun:function(a,b){return(a=a[b])?a.step:null},_computeCurrentWallTimeForRun:function(a,b){return(a=a[b])?(new Date(1E3*a.wall_time)).toString():null},_toggleExpanded:function(){this.set("_expanded",!this._expanded);this.redraw()},_resetDomain:function(){this.$$("tf-line-chart-data-loader").resetDomain()},redraw:function(){this.$$("tf-line-chart-data-loader").redraw()}});
</script>
</dom-module>








<dom-module id="tf-pr-curve-steps-selector">
  <template>
    <template is="dom-repeat" items="[[_runsWithSliders]]" as="run">
      <div class="run-widget">
        <div class="run-display-container">
          <div class="run-color-box" style="background:[[_computeColorForRun(run)]];"></div>
          <div class="run-text">
            [[run]]
          </div>
        </div>
        <div class="step-display-container">
          [[_computeTimeTextForRun(runToAvailableTimeEntries, _runToStepIndex, run, timeDisplayType)]]
        </div>
        <paper-slider data-run$="[[run]]" step="1" type="number" min="0" max="[[_computeMaxStepIndexForRun(runToAvailableTimeEntries, run)]]"></paper-slider>
      </div>
    </template>
    <style>
      .run-widget {
        margin: 10px 0 0 0;
      }
      paper-slider {
        margin: -8px 0 0 -15px;
        width: 100%;
      }
      .step-display-container {
        font-size: 0.9em;
        margin: 0 15px 0 0;
      }
      .run-text {
        display: inline-block;
      }
      .run-color-box {
        width: 12px;
        height: 12px;
        border-radius: 3px;
        display: inline-block;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-pr-curve-dashboard/tf-pr-curve-steps-selector.html.js
Polymer({is:"tf-pr-curve-steps-selector",properties:{runs:Array,runToAvailableTimeEntries:Object,runToStep:{type:Object,notify:!0,computed:"_computeRunToStep(runToAvailableTimeEntries, _runToStepIndex)"},timeDisplayType:String,_runToStepIndex:{type:Object,value:function(){return{}}},_runsWithSliders:{type:Array,computed:"_computeRunsWithSliders(runs, runToAvailableTimeEntries)"}},listeners:{"value-change":"_sliderValueChanged","immediate-value-change":"_sliderValueChanged"},observers:["_updateStepsForNewRuns(runs, runToAvailableTimeEntries, _runToStepIndex)"],
_computeColorForRun:function(a){return Yk.runsColorScale(a)},_computeTimeTextForRun:function(a,b,c,e){b=b[c];if(!_.isNumber(b))return"";a=a[c];if(!a)return"";a=a[b][e];if("step"===e)return"step "+a;if("relative"===e)return 1>a?(1E3*a).toFixed(2)+" ms":a.toFixed(2)+" s";if("wall_time"===e)return(new Date(1E3*a)).toString();throw Error("The display type of "+e+" is not recognized.");},_sliderValueChanged:function(a){var b=a.target.dataset.run,c=_.clone(this._runToStepIndex);c[b]=a.target.immediateValue;
this.set("_runToStepIndex",c)},_computeMaxStepIndexForRun:function(a,b){return(a=a[b])&&a.length?a.length-1:0},_updateStepsForNewRuns:function(a,b,c){var e=this,f={},g=!1;_.forOwn(b,function(h,l){_.isNumber(c[l])?f[l]=c[l]:(f[l]=h.length-1,g=!0)});g&&this.set("_runToStepIndex",f);this.async(function(){e._updateSliders(f)})},_updateSliders:function(a){for(var b=this.querySelectorAll("paper-slider"),c=0;c<b.length;c++)b[c].value=a[b[c].dataset.run]},_computeRunToStep:function(a,b){var c={};_.forOwn(b,
function(e,f){var g=a[f];g&&(c[f]=g[e].step)});return c},_computeRunsWithSliders:function(a,b){return a.filter(function(c){return b[c]})}});
</script>
</dom-module>



<dom-module id="tf-pr-curve-dashboard">
  <template>
    <tf-dashboard-layout>
      <div class="sidebar">
        <div class="sidebar-section">
          <tf-option-selector id="time-type-selector" name="Time Display Type" selected-id="{{_timeDisplayType}}">
            <paper-button id="step">step</paper-button><paper-button id="relative">relative</paper-button><paper-button id="wall_time">wall</paper-button>
          </tf-option-selector>
        </div>
        <template is="dom-if" if="[[_runToAvailableTimeEntries]]">
          <div class="sidebar-section" id="steps-selector-container">
            <tf-pr-curve-steps-selector runs="[[_relevantSelectedRuns]]" run-to-step="{{_runToStep}}" run-to-available-time-entries="[[_runToAvailableTimeEntries]]" time-display-type="[[_timeDisplayType]]"></tf-pr-curve-steps-selector>
          </div>
        </template>
        <div class="sidebar-section">
          <tf-runs-selector selected-runs="{{_selectedRuns}}">
          </tf-runs-selector>
        </div>
       </div>
      
      <div class="center">
        <template is="dom-if" if="[[_dataNotFound]]">
          <div class="no-data-warning">
            <h3>No precisionârecall curve data was found.</h3>
            <p>Probable causes:
            <ul>
              <li>
                You havenât written any precisionârecall data to your event
                files.
              </li>
              <li>
                TensorBoard canât find your event files.
              </li>
            </ul>
            <p>
            If youâre new to using TensorBoard, and want to find out how
            to add data and set up your event files, check out the
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
            and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
            <p>
            If you think TensorBoard is configured properly, please see
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
            and consider filing an issue on GitHub.
          </div>
        </template>
        <template is="dom-if" if="[[!_dataNotFound]]">
          <tf-tag-filterer tag-filter="{{_tagFilter}}"></tf-tag-filterer>
          <template is="dom-repeat" items="[[_categories]]" as="category">
            <tf-category-pane category="[[category]]" opened="[[_shouldOpen(index)]]">
              <tf-paginated-view items="[[category.items]]" pages="{{category._pages}}">
                <template is="dom-repeat" items="[[category._pages]]" as="page">
                  <template is="dom-if" if="[[page.active]]">
                    <div class="layout horizontal wrap">
                      <template is="dom-repeat" items="[[page.items]]">
                        <tf-pr-curve-card runs="[[item.runs]]" tag="[[item.tag]]" tag-metadata="[[_tagMetadata(_runToTagInfo, item.runs, item.tag)]]" request-manager="[[_requestManager]]" run-to-step-cap="[[_runToStep]]" active="[[page.active]]"></tf-pr-curve-card>
                      </template>
                    </div>
                  </template>
                </template>
              </tf-paginated-view>
            </tf-category-pane>
          </template>
        </template>
      </div>
    </tf-dashboard-layout>

    <style include="dashboard-style"></style>
    <style>
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
      /** Do not let the steps selector occlude the run selector. */
      #steps-selector-container {
        max-height: 40%;
        overflow-y: auto;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-pr-curve-dashboard/tf-pr-curve-dashboard.html.js
Polymer({is:"tf-pr-curve-dashboard",properties:{_timeDisplayType:{type:String,value:"step"},_selectedRuns:Array,_runToTagInfo:Object,_runToAvailableTimeEntries:{type:Object,value:{}},_relevantSelectedRuns:{type:Array,computed:"_computeRelevantSelectedRuns(_selectedRuns, _runToTagInfo)"},_runsWithPrCurveData:Array,_runToStep:{type:Object,notify:!0},_dataNotFound:Boolean,_tagFilter:String,_categoriesDomReady:Boolean,_categories:{type:Array,computed:"_makeCategories(_runToTagInfo, _selectedRuns, _tagFilter, _categoriesDomReady)"},
_requestManager:{type:Object,value:function(){return new Rk.RequestManager}},_step:{type:Number,value:0,notify:!0}},ready:function(){this.reload()},reload:function(){var a=this;Promise.all([this._fetchTags(),this._fetchTimeEntriesPerRun()]).then(function(){a._reloadCards()})},_shouldOpen:function(a){return 2>=a},_fetchTags:function(){var a=this,b=Rk.getRouter().pluginRoute("pr_curves","/tags");return this._requestManager.request(b).then(function(c){if(!_.isEqual(c,a._runToTagInfo)){var e=_.mapValues(c,
function(f){return _.keys(f)});e=Rk.getTags(e);a.set("_dataNotFound",0===e.length);a.set("_runToTagInfo",c);a.async(function(){a.set("_categoriesDomReady",!0)})}})},_fetchTimeEntriesPerRun:function(){var a=this,b=Rk.getRouter().pluginRoute("pr_curves","/available_time_entries");return this._requestManager.request(b).then(function(c){_.forOwn(c,function(e){_.forEach(e,function(f){f.relative=f.wall_time-e[0].wall_time})});a.set("_runToAvailableTimeEntries",c);c=_.keys(c).slice().sort();_.isEqual(c,
a._runsWithPrCurveData)||a.set("_runsWithPrCurveData",c)})},_reloadCards:function(){_.forEach(this.querySelectorAll("tf-pr-curve-card"),function(a){a.reload()})},_makeCategories:function(a,b,c){a=_.mapValues(a,function(e){return Object.keys(e)});return Sk.categorizeTags(a,b,c)},_computeColorForRun:function(a){return Yk.runsColorScale(a)},_computeRelevantSelectedRuns:function(a,b){return a.filter(function(c){return b[c]})},_tagMetadata:function(a,b,c){var e={};b.forEach(function(f){e[f]=a[f][c]});
b=c.replace(/\/pr_curves$/,"");return al.aggregateTagInfo(e,b)}});
</script>
</dom-module>















<dom-module id="paper-spinner">
  <template strip-whitespace>
    <style include="paper-spinner-styles"></style>

    <div id="spinnerContainer" class-name="[[__computeContainerClasses(active, __coolingDown)]]" on-animationend="__reset" on-webkit-animation-end="__reset">
      <div class="spinner-layer layer-1">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>

      <div class="spinner-layer layer-2">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>

      <div class="spinner-layer layer-3">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>

      <div class="spinner-layer layer-4">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-spinner/paper-spinner.html.js
Polymer({is:"paper-spinner",behaviors:[Polymer.PaperSpinnerBehavior]});
</script>
</dom-module>







<dom-module id="input-pipeline-analyzer">
  <template>
    <style>
      .section-header {
        text-decoration: underline;
        font-weight: bold;
        font-size: 200%;
      }
      .sub-section-header {
        text-decoration: underline;
        font-weight: bold;
        font-size: 150%;
      }
      #summary-host {
        font-weight: bold;
      }
      .highlighted-text {
        text-decoration: underline;
        font-weight: bold;
        font-size: 120%;
      }
      .stddev-text{
        font-style: italic;
        opacity: 0.7;
      }
      .left-pane {
        width: 30%;
      }
      .right-pane {
        width: 100%;
        height: 300px;
      }
      .table-style {
        table-layout: fixed;
        width: 95%;
      }
      .performance-table {
        width: 100%;
      }
      .x-axis-title {
        text-align: center;
        text-transform: capitalize;
      }
      .y-axis-title {
        writing-mode: bt-rl;
        transform: rotate(270deg);
        text-align: center;
        white-space: nowrap;
        text-transform: capitalize;
      }
      #recommendation_details {
        color: green;
      }
      #recommendation_details a {
        color: #ff33cc;
        text-decoration: underline;
      }
      #summary_conclusion{
        font-weight:bolder;
        font-style:italic;
        color: var(--summary-color, green);
      }
      #summary_nextstep{
        font-weight:bolder;
        font-style:italic;
        color:green;
      }
      #recommendation_title{
        font-weight:bolder;
        font-style:normal;
        color:black;
      }
    </style>
    <div>
      <div id="section_summary">
        <div id="title_summary">
          <p class="section-header"> Section 1: Summary of input-pipeline analysis
        </div>
        <p><span id="summary_conclusion">[[_summary_conclusion]]</span>
        <p><span id="recommendation_title">Recommendation for next step: </span><span id="summary_nextstep">[[_summary_nextstep]]</span>
      </div>
      <div id="section_device_side_analysis" hidden="[[!_show_device_side_analysis]]">
        <div id="title_device_side_analysis">
          <p class="section-header"> Section 2: Device-side analysis details
        </div>
        <div id="section_device_step_time">
          <div id="title_device_step_time">
            <p class="sub-section-header">Section 2.1: Device step time
          </div>
          <table class="table-style">
            <tr>
              <td class="left-pane">
                <div><p class="highlighted-text">Device step-time statistics (in ms)</div>
                <p>
                  <span><b>Average:</b> </span>
                  <span>[[_steptime_ms_average]] ms </span>
                  <span class="stddev-text">(Ï = [[_steptime_ms_stddev]] ms)</span>
                
                <p>
                  <span><b>Range:</b> </span>
                  <span>[[_steptime_ms_minimum]] - [[_steptime_ms_maximum]] ms</span>
                
              </td>
              <td><div class="y-axis-title">milliseconds</div></td>
              <td class="right-pane">
                <vz-line-chart id="device_step_chart" style="height:300px;"></vz-line-chart>
                <div><p class="x-axis-title">training step number</div>
              </td>
            </tr>
          </table>
        </div>
        <div id="section_device_infeeddeq_time">
          <div id="title_device_infeeddeq_time">
            <p class="sub-section-header">
              <span>Section 2.2: Range of device time waiting for input data </span>
              <span><i style="opacity:0.5">across cores</i> at each step </span>
            
          </div>
          <table class="table-style">
            <tr>
              <td class="left-pane">
                <p>
                  <span class="highlighted-text">% of device step time waiting for input data</span>
                  <span> (average over the maximum waiting time across cores at each step)</span>
                
                <p>
                  <span><b>Average:</b> </span>
                  <span>[[_infeed_percent_average]] % </span>
                  <span class="stddev-text">(Ï = [[_infeed_percent_stddev]] %)</span>
                
                <p>
                  <span><b>Range:</b> </span>
                  <span>[[_infeed_percent_minimum]] - [[_infeed_percent_maximum]] %</span>
                
              </td>
              <td><div class="y-axis-title"><p>% of device step time</div></td>
              <td class="right-pane">
                <vz-line-chart id="device_infeed_chart" style="height:300px;"></vz-line-chart>
                <div><p class="x-axis-title">training step number</div>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div id="section_host_side_analysis">
        <div id="title_host_side_analysis">
          <p class="section-header">Section 3: Host-side analysis details
        </div>
        <div hidden$="[[!_show_host_side_chart]]">
          <div style="height:300px;" id="host_side_chart"></div>
          <p>
            <span><b>What can be done to reduce above components of the host input time:</b></span>
            <div id="recommendation_details"></div>
          <p>
        </div>
        <div hidden$="[[_show_host_side_chart]]">
          Host side analysis can not be done without instrumentation.
        </div>
        <p> Click the "Show" button below to see the source data of the breakdown.
        <button on-click="onClick">[[_toggle_button_text]]</button>
        <table class="performance-table" hidden$="[[!_show_host_side_table]]">
          <thead>
            <tr><th>Input Op</th>
            <th>Count</th>
            <th>Total Time (in ms)</th>
            <th>Total Time (as % of total input-processing time)</th>
            <th>Total Self Time (in ms)</th>
            <th>Total Self Time (as % of total input-processing time)</th>
            <th>Category</th>
          </thead>
          <tbody id="host_side_table_content">
          </tbody>
        </table>
      </div>
    </div>
  </template>

  <script>//~~WEBPATH~~/tf-input-pipeline/input-pipeline-analyzer.html.js
Polymer({is:"input-pipeline-analyzer",properties:{_data:{type:Object,observer:"_updateView"},_show_device_side_analysis:{type:Boolean,value:!0,notify:!0},_show_host_side_chart:{type:Boolean,value:!0,notify:!0},_show_host_side_table:{type:Boolean,value:!1,notify:!0},_toggle_button_text:{type:String,computed:"_getToggleButtonText(_show_host_side_table)"},_deviceJson:{type:String,notify:!0},_hostJson:{type:String,notify:!0},_recommendationJson:{type:String,notify:!0},_active:{type:Boolean,value:!1,notify:!0,
observer:"_onActiveChanged"},_summary_conclusion:{type:String,notify:!0},_summary_nextstep:{type:String,notify:!0},_infeed_percent_average:{type:String,notify:!0},_infeed_percent_stddev:{type:String,notify:!0},_infeed_percent_minimum:{type:String,notify:!0},_infeed_percent_maximum:{type:String,notify:!0},_steptime_ms_average:{type:String,notify:!0},_steptime_ms_stddev:{type:String,notify:!0},_steptime_ms_minimum:{type:String,notify:!0},_steptime_ms_maximum:{type:String,notify:!0}},observers:["_showDeviceStepChart(_deviceJson)",
"_showDeviceInfeedChart(_deviceJson)","_showHostChart(_hostJson)","_showHostTable(_hostJson)","_makeRecommendations(_recommendationJson)"],onClick:function(){this.set("_show_host_side_table",!this._show_host_side_table)},_onActiveChanged:function(a){a||(this._show_host_side_table=this._show_host_side_chart=this._show_device_side_analysis=!1)},_getToggleButtonText:function(a){return(a?"Hide":"Show")+" Input Op Statistics"},_usToMs:function(a){return Math.abs(Number(a))/1E3},_updateView:function(){if(this._data&&
this._active){var a=this._data[0];this._deviceJson=a;this._hostJson=this._data[2];this._recommendationJson=this._data[3];this._summary_conclusion=a.p.summary_conclusion;this._summary_nextstep=a.p.summary_nextstep;this._infeed_percent_average=a.p.infeed_percent_average;this._infeed_percent_stddev=a.p.infeed_percent_standard_deviation;this._infeed_percent_minimum=a.p.infeed_percent_minimum;this._infeed_percent_maximum=a.p.infeed_percent_maximum;this._steptime_ms_average=a.p.steptime_ms_average;this._steptime_ms_stddev=
a.p.steptime_ms_standard_deviation;this._steptime_ms_minimum=a.p.steptime_ms_minimum;this._steptime_ms_maximum=a.p.steptime_ms_maximum;this._summary_conclusion.includes("HIGHLY")?this.customStyle["--summary-color"]="red":this._summary_conclusion.includes("MODERATE")&&(this.customStyle["--summary-color"]="orange");this.updateStyles()}},_showDeviceStepChart:function(a){if(a&&0!=a.rows.length&&this._active){this._show_device_side_analysis=!0;var b=[],c=[],e=0,f=-1;a.rows.forEach(function(g){f=0<f?++f:
Number(g.c[0].v);b.push({scalar:g.c[1].v,step:f,tpu_step:Number(g.c[0].v),low_watermark:0});c.push({scalar:g.c[1].v+g.c[2].v,step:f,low_watermark:g.c[1].v});e=Math.max(e,g.c[1].v+g.c[2].v)});if(a=this.$.device_step_chart)a.setVisibleSeries(["device step time","compute time"]),a.setSeriesData("device step time",c),a.setSeriesData("compute time",b),a.defaultYRange=[0,1.1*e],a.smoothingEnabled=!1,a.tooltipColumns=[{title:"Name",evaluate:function(g){return g.dataset.metadata().name}},{title:"Time(ms)",
evaluate:function(g){return g.datum.scalar.toFixed(2)}},{title:"Step",evaluate:function(g){return g.datum.step}}],a.fillArea={higherAccessor:function(g){return g.scalar},lowerAccessor:function(g){return g.low_watermark}},a.xAxisFormatter=d3.format("d")}else this._show_device_side_analysis=!1},_showDeviceInfeedChart:function(a){if(a&&0!=a.rows.length){var b=[],c=-1;a.rows.forEach(function(e){c=0<c?++c:Number(e.c[0].v);b.push({step:c,tpu_step:Number(e.c[0].v),scalar:e.c[4].v,min:e.c[5].v,max:e.c[6].v})});
if(a=this.$.device_infeed_chart)a.setVisibleSeries(["input time%"]),a.setSeriesData("input time%",b),a.tooltipColumns=[{title:"Name",evaluate:function(e){return e.dataset.metadata().name}},{title:"Step",evaluate:function(e){return e.datum.tpu_step}},{title:"Average(%)",evaluate:function(e){return e.datum.scalar.toFixed(4)+"%"}},{title:"Min(%)",evaluate:function(e){return e.datum.min.toFixed(4)+"%"}},{title:"Max(%)",evaluate:function(e){return e.datum.max.toFixed(4)+"%"}}],a.fillArea={higherAccessor:function(e){return e.max},
lowerAccessor:function(e){return e.min}},a.xAxisFormatter=d3.format("d")}else this._show_device_side_analysis=!1},_showHostChart:function(a){if(a){var b=this._usToMs(a.p.unclassified_nonequeue_us),c=this._usToMs(a.p.demanded_file_read_us),e=this._usToMs(a.p.advanced_file_read_us),f=this._usToMs(a.p.preprocessing_us);a=this._usToMs(a.p.enqueue_us);var g=b+c+e+f+a;this._show_host_side_chart=0<g;0<g&&(e=[{Name:"Other data reading or processing",Total:b/g*100},{Name:"Reading data from files on demand",
Total:c/g*100},{Name:"Reading data from files in advance [including caching, prefetching, interleaving]",Total:e/g*100},{Name:"Data preprocessing",Total:f/g*100},{Name:"Enqueuing data to be transferred to device",Total:a/g*100}],f=new Plottable.Scales.Color,b=new Plottable.Components.Legend(f),c=d3.select(this.$.host_side_chart),e=(new Plottable.Plots.Pie).attr("fill",function(h){return h.Name},f).addDataset(new Plottable.Dataset(e)).sectorValue(function(h){return h.Total}).labelsEnabled(!0).labelFormatter(function(h){return Number(h).toFixed(2)+
"%"}),(new Plottable.Components.Table([[e,b]])).renderTo(c))}},_showHostTable:function(a){if(a){var b=this.$.host_side_table_content;b.innerHTML="";this._show_host_side_table=!1;0!=a.rows.length&&a.rows.forEach(function(c){var e=document.createElement("tr");Polymer.dom(b).appendChild(e);var f=[];f.push(c.c[0].v);f.push(c.c[1].v);f.push(c.c[2].v.toFixed(2));f.push((100*c.c[3].v).toFixed(2)+"%");f.push(c.c[4].v.toFixed(2));f.push((100*c.c[5].v).toFixed(2)+"%");f.push(c.c[6].v);f.forEach(function(g){var h=
document.createElement("td");Polymer.dom(e).appendChild(h);Polymer.dom(h).appendChild(document.createTextNode(g))})})}},_makeRecommendations:function(a){if(a){var b="";a.rows.forEach(function(c){b+="\x3cli\x3e"+c.c[0].v+"\x3c/li\x3e"});this.$.recommendation_details.innerHTML=b}},attached:function(){this._active=!0;this._updateView()},detached:function(){this._active=!1}});
</script>
</dom-module>









<dom-module id="iron-image">
  <template>
    <style>
      :host {
        display: inline-block;
        overflow: hidden;
        position: relative;
      }

      #sizedImgDiv {
        @apply(--layout-fit);

        display: none;
      }

      #img {
        display: block;
        width: var(--iron-image-width, auto);
        height: var(--iron-image-height, auto);
      }

      :host([sizing]) #sizedImgDiv {
        display: block;
      }

      :host([sizing]) #img {
        display: none;
      }

      #placeholder {
        @apply(--layout-fit);

        background-color: inherit;
        opacity: 1;

        @apply(--iron-image-placeholder);
      }

      #placeholder.faded-out {
        transition: opacity 0.5s linear;
        opacity: 0;
      }
    </style>

    <div id="sizedImgDiv" role="img" hidden$="[[_computeImgDivHidden(sizing)]]" aria-hidden$="[[_computeImgDivARIAHidden(alt)]]" aria-label$="[[_computeImgDivARIALabel(alt, src)]]"></div>
    <img id="img" alt$="[[alt]]" hidden$="[[_computeImgHidden(sizing)]]">
    <div id="placeholder" hidden$="[[_computePlaceholderHidden(preload, fade, loading, loaded)]]" class$="[[_computePlaceholderClassName(preload, fade, loading, loaded)]]"></div>
  </template>

  <script>//~~WEBPATH~~/iron-image/iron-image.html.js
Polymer({is:"iron-image",properties:{src:{observer:"_srcChanged",type:String,value:""},alt:{type:String,value:null},preventLoad:{type:Boolean,value:!1,observer:"_preventLoadChanged"},sizing:{type:String,value:null,reflectToAttribute:!0},position:{type:String,value:"center"},preload:{type:Boolean,value:!1},placeholder:{type:String,value:null,observer:"_placeholderChanged"},fade:{type:Boolean,value:!1},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,
value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1},width:{observer:"_widthChanged",type:Number,value:null},height:{observer:"_heightChanged",type:Number,value:null}},observers:["_transformChanged(sizing, position)"],ready:function(){var a=this.$.img;a.onload=function(){this.$.img.src===this._resolveSrc(this.src)&&(this._setLoading(!1),this._setLoaded(!0),this._setError(!1))}.bind(this);a.onerror=function(){this.$.img.src===this._resolveSrc(this.src)&&(this._reset(),this._setLoading(!1),
this._setLoaded(!1),this._setError(!0))}.bind(this);this._resolvedSrc=""},_load:function(a){a?this.$.img.src=a:this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage=a?'url("'+a+'")':"";this._setLoading(!!a);this._setLoaded(!1);this._setError(!1)},_reset:function(){this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage="";this._setLoading(!1);this._setLoaded(!1);this._setError(!1)},_computePlaceholderHidden:function(){return!this.preload||!this.fade&&!this.loading&&
this.loaded},_computePlaceholderClassName:function(){return this.preload&&this.fade&&!this.loading&&this.loaded?"faded-out":""},_computeImgDivHidden:function(){return!this.sizing},_computeImgDivARIAHidden:function(){return""===this.alt?"true":void 0},_computeImgDivARIALabel:function(){if(null!==this.alt)return this.alt;if(""===this.src)return"";var a=(new URL(this._resolveSrc(this.src))).pathname.split("/");return a[a.length-1]},_computeImgHidden:function(){return!!this.sizing},_widthChanged:function(){this.style.width=
isNaN(this.width)?this.width:this.width+"px"},_heightChanged:function(){this.style.height=isNaN(this.height)?this.height:this.height+"px"},_preventLoadChanged:function(){this.preventLoad||this.loaded||(this._reset(),this._load(this.src))},_srcChanged:function(a){var b=this._resolveSrc(a);b!==this._resolvedSrc&&(this._resolvedSrc=b,this._reset(),this.preventLoad||this._load(a))},_placeholderChanged:function(){this.$.placeholder.style.backgroundImage=this.placeholder?'url("'+this.placeholder+'")':""},
_transformChanged:function(){var a=this.$.sizedImgDiv.style,b=this.$.placeholder.style;a.backgroundSize=b.backgroundSize=this.sizing;a.backgroundPosition=b.backgroundPosition=this.sizing?this.position:"";a.backgroundRepeat=b.backgroundRepeat=this.sizing?"no-repeat":""},_resolveSrc:function(a){var b=this.ownerDocument.baseURI;return(new URL(Polymer.ResolveUrl.resolveUrl(a,b),b)).href}});
</script>
</dom-module>






<dom-module id="paper-card">
  <template>
    <style include="paper-material">
      :host {
        display: inline-block;
        position: relative;
        box-sizing: border-box;
        background-color: var(--paper-card-background-color, --primary-background-color);
        border-radius: 2px;

        @apply(--paper-font-common-base);
        @apply(--paper-card);
      }

      /* IE 10 support for HTML5 hidden attr */
      [hidden] {
        display: none !important;
      }

      .header {
        position: relative;
        border-top-left-radius: inherit;
        border-top-right-radius: inherit;
        overflow: hidden;

        @apply(--paper-card-header);
      }

      .header iron-image {
        display: block;
        width: 100%;
        --iron-image-width: 100%;
        pointer-events: none;

        @apply(--paper-card-header-image);
      }

      .header .title-text {
        padding: 16px;
        font-size: 24px;
        font-weight: 400;
        color: var(--paper-card-header-color, #000);

        @apply(--paper-card-header-text);
      }

      .header .title-text.over-image {
        position: absolute;
        bottom: 0px;

        @apply(--paper-card-header-image-text);
      }

      :host ::content .card-content {
        padding: 16px;
        position:relative;

        @apply(--paper-card-content);
      }

      :host ::content .card-actions {
        border-top: 1px solid #e8e8e8;
        padding: 5px 16px;
        position:relative;

        @apply(--paper-card-actions);
      }
    </style>

    <div class="header">
      <iron-image hidden$="[[!image]]" aria-hidden$="[[_isHidden(image)]]" src="[[image]]" alt="[[alt]]" placeholder="[[placeholderImage]]" preload="[[preloadImage]]" fade="[[fadeImage]]"></iron-image>
      <div hidden$="[[!heading]]" class$="title-text [[_computeHeadingClass(image)]]">[[heading]]</div>
    </div>

    <content></content>
  </template>

  <script>//~~WEBPATH~~/paper-card/paper-card.html.js
Polymer({is:"paper-card",properties:{heading:{type:String,value:"",observer:"_headingChanged"},image:{type:String,value:""},alt:{type:String},preloadImage:{type:Boolean,value:!1},fadeImage:{type:Boolean,value:!1},placeholderImage:{type:String,value:null},elevation:{type:Number,value:1,reflectToAttribute:!0},animatedShadow:{type:Boolean,value:!1},animated:{type:Boolean,reflectToAttribute:!0,readOnly:!0,computed:"_computeAnimated(animatedShadow)"}},_isHidden:function(a){return a?"false":"true"},_headingChanged:function(a){var b=
this.getAttribute("heading"),c=this.getAttribute("aria-label");"string"===typeof c&&c!==b||this.setAttribute("aria-label",a)},_computeHeadingClass:function(a){return a?" over-image":""},_computeAnimated:function(a){return a}});
</script>
</dom-module>


<dom-module id="overview-page">
  <template>
    <style>
     paper-card {
       margin: 5px;
       --paper-card-header-color: #F5F5F5;
       --paper-card-header: background-color: #4285F4;
     }
     .flex-horizontal {
       @apply --layout-horizontal;
     }
     .steptime-average {
       font-weight: bold;
       font-style: italic;
       color: var(--summary-color, green);
     }
     .table-style {
       table-layout: auto;
       width: 95%;
     }
     .top-ops-table {
       width: 100%;
     }
     vz-line-chart.step-graph {
       width: 860px;
       height: 200px;
     }
     .x-axis-title {
       width: 80%;
       text-align: center;
       text-transform: capitalize;
     }
     .y-axis-title {
       width: 10px;
       writing-mode: bt-rl;
       transform: rotate(270deg);
       text-align: center;
       white-space: nowrap;
       text-transform: capitalize;
     }
     div.bottleneck-statement {
       color: var(--summary-color, green);
       font-weight: bolder;
       font-style: italic;
     }
     div.errorMessage {
       color: red;
       font-size: 0.5cm;
       font-weight: bolder;
       margin-top: 0.5cm;
       margin-bottom: 0.5cm;
     }
     div.bottleneckTips {
       color: #000000;
     }
     div.bottleneckTips a{
       color: #ff33cc;
       text-decoration: underline;
     }
     div.documentationTips {
       color: #666699;
     }
     div.documentationTips a{
       color: #33cc00;
       text-decoration: underline;
     }
    </style>
    <div class="errorMessage" hidden="[[!_error_message]]">
      <span>[[_error_message]]</span>
    </div>
    <div hidden="[[_error_message]]">
      <div class="container flex-horizontal">
        <paper-card heading="Performance Summary">
          <div class="card-content">
            <p><b>Average step time</b> (lower is better): <b><span class="steptime-average">[[_steptime_ms_average]] ms</span> </b> <i style="opacity:0.7">(standard deviation = <span>[[_steptime_ms_stddev]]</span> ms)</i>
            <ul hidden$="[[!_infeed_ms_average]]">
              <li>Average infeed: <span>[[_infeed_ms_average]]</span> ms</li>
              <li>Average compute: <span>[[_compute_ms_average]]</span> ms</li>
            </ul>
            <p><b>Host idle time</b> (lower is better): <span>[[_host_idle_time_percent]]</span>
            <p><b>TPU idle time</b> (lower is better): <span>[[_device_idle_time_percent]]</span>
            <p><b>Utilization of TPU Matrix Units</b> (higher is better): <span>[[_mxu_utilization_percent]]</span>
          </div>
        </paper-card>
        <paper-card heading="Step-time Graph">
          <div class="card-content" hidden="[[!_show_step_time_graph]]">
            <table class="table-style">
              <tr>
                <td><div class="y-axis-title">milliseconds</div></td>
                <td>
                  <vz-line-chart class="step-graph" id="device_step_chart">
                  </vz-line-chart>
                  <div><p class="x-axis-title">training step number</div>
                </td>
              </tr>
            </table>
          </div>
        </paper-card>
      </div>
      <div class="container flex-horizontal">
        <paper-card heading$="[[_top_ops_heading]]">
          <div class="card-content">
            <button on-click="onClickTopOps">[[_top_ops_button_text]]</button>
            <thread>
                </thread><table class="top-ops-table" hidden$="[[!_show_top_ops_table]]">
              <tr><th>Time (%)</th>
                <th>Cumulative time (%)</th>
                <th>Category</th>
                <th>Operation</th>
                <th>GFlops/sec</th>
              
              <tbody id="top_ops_table_content">
              </tbody>
            </table>
          </div>
        </paper-card>
      </div>
      <div class="container flex-horizontal">
        <paper-card heading="Run Environment">
          <div class="card-content">
            <p><b>Number of Hosts used</b>: <span>[[_host_count]]</span>
            <p><b>TPU type</b>: Cloud TPU
            <p><b>Number of TPU cores</b>: <span> [[_tpu_core_count]]</span>
          </div>
        </paper-card>
        <paper-card heading="Recommendation for Next Steps">
          <div class="card-content">
            <div class="bottleneck-statement"> <span>[[_statement]]</span></div>
            <div id="host_side_tips"></div>
            <div id="device_side_tips"></div>
            <div id="documentation_tips"></div>
          </div>
        </paper-card>
     </div>
    </div>
  </template>

  <script>//~~WEBPATH~~/tf-overview-page/overview-page.html.js
Polymer({is:"overview-page",properties:{_data:{type:Object,observer:"_updateView"},_show_top_ops_table:{type:Boolean,value:!1},_show_step_time_graph:{type:Boolean,computed:"_shouldShowStepTimeGraph(_data, _active)"},_top_ops_button_text:{type:String,computed:"_getTopOpsButtonText(_show_top_ops_table)"},_generalAnalysisJson:{type:String},_inputAnalysisJson:{type:String},_runEnvironmentJson:{type:String},_recommendationJson:{type:String},_active:{type:Boolean,value:!1,observer:"_onActiveChanged"},_host_idle_time_percent:{type:String},
_device_idle_time_percent:{type:String},_mxu_utilization_percent:{type:String},_steptime_ms_average:{type:String},_steptime_ms_stddev:{type:String},_infeed_ms_average:{type:String,value:""},_compute_ms_average:{type:String,value:""},_top_ops_heading:{type:String},_error_message:{type:String},_host_count:{type:String},_tpu_type:{type:String},_tpu_core_count:{type:String},_batch_size:{type:String},_change_list:{type:String},_build_time:{type:String},_build_target:{type:String},_statement:{type:String}},
observers:["_showSummary(_inputAnalysisJson, _generalAnalysisJson)","_showRunEnvironment(_runEnvironmentJson)","_showDeviceStepChart(_inputAnalysisJson)","_showTopOpsTable(_generalAnalysisJson)","_showRecommendation(_recommendationJson)"],onClickTopOps:function(){this._show_top_ops_table=!this._show_top_ops_table},_getTopOpsButtonText:function(a){return(a?"Hide":"Show")+" table"},_updateView:function(){if(this._data&&this._active){this._generalAnalysisJson=this._data[0];this._inputAnalysisJson=this._data[1];
this._runEnvironmentJson=this._data[2];var a=this._data[3];this._recommendationJson=a;this._statement=a.p.statement;this._statement.includes("HIGHLY")?this.customStyle["--summary-color"]="red":this._statement.includes("MODERATE")?this.customStyle["--summary-color"]="orange":this.customStyle["--summary-color"]="green";this.updateStyles()}},_showSummary:function(a,b){a&&b&&(this._host_idle_time_percent=b.p.host_idle_time_percent,this._device_idle_time_percent=b.p.device_idle_time_percent,this._mxu_utilization_percent=
b.p.mxu_utilization_percent,this._steptime_ms_average=a.p.steptime_ms_average,this._steptime_ms_stddev=a.p.steptime_ms_standard_deviation,this._compute_ms_average=a.p.compute_ms_average,this._infeed_ms_average=a.p.infeed_ms_average)},_showRunEnvironment:function(a){a&&(this._error_message=a.p.error_message,this._host_count=a.p.host_count,this._tpu_type=a.p.tpu_type,this._tpu_core_count=a.p.tpu_core_count,this._batch_size=a.p.batch_size,this._change_list=a.p.change_list,this._build_time=a.p.build_time,
this._build_target=a.p.build_target)},_showDeviceStepChart:function(a){if(this._show_step_time_graph){var b=[],c=[],e=0,f=-1;a.rows.forEach(function(g){f=0<f?++f:Number(g.c[0].v);b.push({scalar:g.c[1].v,step:f,tpu_step:Number(g.c[0].v),low_watermark:0});c.push({scalar:g.c[1].v+g.c[2].v,step:f,low_watermark:g.c[1].v});e=Math.max(e,g.c[1].v+g.c[2].v)});if(a=this.$$("#device_step_chart"))a.setVisibleSeries(["compute-time","step-time \x3d input-time + compute-time"]),a.setSeriesData("compute-time",b),
a.setSeriesData("step-time \x3d input-time + compute-time",c),a.defaultYRange=[0,1.1*e],a.smoothingEnabled=!1,a.tooltipColumns=[{title:"Name",evaluate:function(g){return g.dataset.metadata().name}},{title:"Time(ms)",evaluate:function(g){return g.datum.scalar.toFixed(2)}},{title:"Step",evaluate:function(g){return g.datum.step}}],a.fillArea={higherAccessor:function(g){return g.scalar},lowerAccessor:function(g){return g.low_watermark}},a.xAxisFormatter=d3.format("d")}},_showTopOpsTable:function(a){if(a&&
a.rows&&a.rows.length&&this._active){var b=0,c=this.$$("#top_ops_table_content");c&&(c.innerHTML="",a.rows.forEach(function(e){var f=document.createElement("tr");Polymer.dom(c).appendChild(f);var g=[];g.push((100*e.c[0].v).toFixed(2)+"%");g.push((100*e.c[1].v).toFixed(2)+"%");g.push(e.c[2].v);g.push(e.c[3].v);g.push(e.c[4].v.toFixed(2));g.forEach(function(h){var l=document.createElement("td");Polymer.dom(f).appendChild(l);Polymer.dom(l).appendChild(document.createTextNode(h))});b+=1}),this._top_ops_heading=
"Top "+b+" TensorFlow operations executed on TPU",this._show_top_ops_table=!1)}},_generateRecommendationHtml:function(a,b,c,e){var f="\x3cp\x3e\x26nbsp;\x3c/p\x3e";f+='\x3cdiv class\x3d"'+b+'"\x3e';f+="\x3cb\x3e"+e+":\x3c/b\x3e";a.rows.forEach(function(g){g.c[0].v==c&&(f+="\x3cli\x3e"+g.c[1].v+"\x3c/li\x3e")});return f+="\x3c/div\x3e"},_showRecommendation:function(a){if(a&&this._active){var b=a.p.bottleneck,c=this.$$("#host_side_tips"),e=this.$$("#device_side_tips");c&&e&&("device"==b?(c.innerHTML=
"",e.innerHTML=this._generateRecommendationHtml(a,"bottleneckTips","device","Next tools to use for reducing the TPU time")):"host"==b?(c.innerHTML=this._generateRecommendationHtml(a,"bottleneckTips","host","Next tools to use for reducing the input time"),e.innerHTML=""):(c.innerHTML=this._generateRecommendationHtml(a,"bottleneckTips","host","Next tools to use for reducing the input time"),e.innerHTML=this._generateRecommendationHtml(a,"bottleneckTips","device","Next tools to use for reducing the TPU time")),
b=this.$$("#documentation_tips"))&&(b.innerHTML=this._generateRecommendationHtml(a,"documentationTips","doc","Other useful resources"))}},_onActiveChanged:function(a){a?this._updateView():this._show_top_ops_table=this._show_step_time_graph=!1},_shouldShowStepTimeGraph:function(a,b){return b&&a&&a[1]&&a[1].rows&&a[1].rows.length},attached:function(){this._active=!0;this._updateView()},detached:function(){this._active=!1}});
</script>
</dom-module>



<script>//~~WEBPATH~~/tf-op-profile/utils.js
var Bm;
(function(a){function b(c,e,f,g){return"rgba("+Math.round(255*c)+","+Math.round(255*e)+","+Math.round(255*f)+","+g+")"}a.flameColor=function(c,e,f,g){void 0===e&&(e=1);void 0===f&&(f=1);void 0===g&&(g=Math.sqrt);if(isNaN(c))return b(e,e,e,f);c=g(c);return.5>c?b(e,2*c*e,0,f):b(2*(1-c)*e,e,0,f)};a.utilization=function(c){return c&&c.metrics&&c.metrics.time?c.metrics.flops/c.metrics.time:0/0};a.memoryUtilization=function(c){return c&&c.metrics&&c.metrics.memoryBandwidth?c.metrics.memoryBandwidth:0/0};
a.hasMemoryUtilization=function(c){return c&&c.metrics&&c.metrics.memoryBandwidth};a.hasFlops=function(c){return c&&c.metrics&&c.metrics.time};a.percent=function(c){return isNaN(c)?"-":.995<=c?"100%":1E-5>c?"0.00%":(100*c).toPrecision(2)+"%"}})(Bm||(Bm={}));
</script>



<dom-module id="tf-op-table-styles">
  <template>
    <style>
#time, #utilization {
  width: 60px;
}
#name {
  display: inline-block;
  min-width: 40%;
}
#row, #header {
  display: flex;
  align-items: center;
}
#row > *, #header > * {
  padding: 0.5em;
  overflow: hidden;
  flex-shrink: 0;
  box-sizing: border-box;
}
#header > * {
  padding-bottom: 0;
}
#provenance {
  flex: 1 1 0 ! important;
}
#utilization {
  text-align: right;
}
    </style>
  </template>
</dom-module>


<dom-module id="tf-op-table">
  <template>
    <style include="tf-op-table-styles">
:host {
  display: block;
  background-color: white;
}
#header {
  font-size: smaller;
  font-weight: bold;
  color: #666;
  padding-bottom: 0.25em;
  border-bottom: 1px solid #666;
  text-transform: uppercase;
  white-space: nowrap;
}
/* Match indented names */
#header > #name { padding-left: 2em; }
    </style>
    <div id="header">
      <span id="time">Time</span>
      <span id="name">Name</span>
      <span id="provenance">TensorFlow Op</span>
      <span id="utilization">FLOPS</span>
    </div>
    <tf-op-table-entry node="[[rootNode]]" header-hover="[[_onHeaderHover]]" header-click="[[_onHeaderClick]]" children-count="{{childrenCount}}" show-p90="{{showP90}}" expanded="true">
    </tf-op-table-entry>
  </template>

  <script>//~~WEBPATH~~/tf-op-profile/tf-op-table.html.js
Polymer({is:"tf-op-table",properties:{rootNode:{type:Object},active:{type:Object,computed:"_active(_selected, _hover)",notify:!0},showP90:{type:Boolean,value:!1,notify:!0},childrenCount:{type:Number,value:10,notify:!0},_selected:{type:Object,value:null,notify:!0},_hover:{type:Object,value:null,notify:!0},_onHeaderHover:{type:Object,value:function(){var a=this;return function(b){return a._hover=b}}},_onHeaderClick:{type:Object,value:function(){var a=this;return function(b){a._selected&&(a._selected.selected=
!1);a._selected=b;b.selected=!0}}}},_active:function(a,b){if(b)return b.node;if(a)return a.node}});
</script>
</dom-module>


<dom-module id="tf-op-table-entry">
  <template>
    <style include="tf-op-table-styles">
#row {
  position: relative;
  box-shadow: inset 0 1px 0 0 rgba(0,0,0,0.06);
  z-index: 0;
}
#bar {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  z-index: -1;
  background-color: #cde;
}
:host {
  display: block;
}
:host.selected {
  background-color: rgba(0,0,0,0.04);
}
:host.selected > #row {
  font-weight: bold;
}
#row:hover {
  background-color: rgba(0,0,0,0.05);
}
#disclosure {
  display: inline-block;
  width: 1em;
}
#name {
  font-family: monospace;
}
#time, #utilization {
  font-size: smaller;
}
/* Utilization has a background color, so it stretches to fill the row.
   Its text is in an inner div that remains vertically centered. */
#utilization { align-self: stretch; }
#utilization div { position: relative; top: 50%; transform: translateY(-50%); }
    </style>
    <div id="row" on-click="_handleHeaderClick" on-mouseenter="_handleHeaderMouseEnter" on-mouseleave="_handleHeaderMouseLeave" hidden="[[!level]]">
      <div id="bar" style$="width:{{_barWidth(node)}}"></div>
      <span id="time">{{_percent(node)}}</span>
      <span id="name" style$="padding-left:[[level]]em;">
        <span id="disclosure">
          <span hidden="[[!node.children.length]]">
            <span hidden="[[expanded]]">â¶</span>
            <span hidden="[[!expanded]]">â¼</span>
          </span>
        </span>{{node.name}}
      </span>
      <span id="provenance">{{_provenance(node)}}&nbsp;</span>
      <span id="utilization" hidden="[[!_hasFlops(node)]]" style$="background-color:{{_flameColor(node)}}">
        {{_utilization(node)}}</span>
    </div>
    <template is="dom-if" if="[[expanded]]">
      <template is="dom-repeat" items="{{_getKChildren(node, childrenCount, showP90, level)}}">
        <tf-op-table-entry node="[[item]]" children-count="{{childrenCount}}" show-p90="{{showP90}}" level="{{_nextLevel(level)}}" header-hover="{{headerHover}}" header-click="{{headerClick}}">
        </tf-op-table-entry>
      </template>
      <template is="dom-if" if="[[_hasLeftout(node, childrenCount, level)]]">
        <span id="name" style$="padding-left:[[_getPaddingLeft(level)]]em;">
          [[_numLeftout(node, childrenCount)]] categories or ops
          have been left out.
        </span>
      </template>
    </template>
  </template>

  <script>//~~WEBPATH~~/tf-op-profile/tf-op-table.html-2.js
Polymer({is:"tf-op-table-entry",properties:{node:{type:Object},level:{type:Number,value:0},headerHover:{type:Object,value:function(){return function(){}},notify:!0},headerClick:{type:Object,value:function(){return function(){}},notify:!0},expanded:{type:Boolean,value:!1,notify:!0},selected:{type:Boolean,value:!1,observer:"_selectedChanged"}},_eq:function(a,b){return a==b},_nextLevel:function(a){return a+1},_handleHeaderClick:function(){this.expanded^=1;this.headerClick(this)},_handleHeaderMouseEnter:function(){this.headerHover(this)},
_handleHeaderMouseLeave:function(){this.headerHover(null)},_percent:function(a){return a.metrics&&a.metrics.time?Bm.percent(a.metrics.time):""},_provenance:function(a){return a.xla&&a.xla.provenance?a.xla.provenance.replace(/^.*\//,""):""},_utilization:function(a){return Bm.percent(Bm.utilization(a))},_hasFlops:Bm.hasFlops,_flameColor:function(a){return Bm.flameColor(Bm.utilization(a),1,.2)},_barWidth:function(a){return a.metrics&&a.metrics.time?Bm.percent(a.metrics.time):0},_selectedChanged:function(a){this.classList.toggle("selected",
a)},_getKChildren:function(a,b,c,e){if(c&&0<a.children.length&&a.children[0].metrics){for(var f=c=0,g=.9*a.metrics.time;f<Math.min(b,a.children.length)&&!(c>=g);f++)c+=a.children[f].metrics.time;b=f}return e?a.children.slice(0,b):a.children},_hasLeftout:function(a,b,c){return c?a.numChildren>Math.min(b,a.children.length):!1},_numLeftout:function(a,b){return a.numChildren-Math.min(b,a.children.length)},_getPaddingLeft:function(a){return a+5}});
</script>
</dom-module>





<dom-module id="tf-op-bar">
  <style>
:host {
  display: inline-block;
  height: 1.5em;
  line-height: 1.5em;
}
  </style>
  <template>
&nbsp;[[_percent(value)]]
  </template>
  <script>//~~WEBPATH~~/tf-op-profile/tf-op-details.html.js
Polymer({is:"tf-op-bar",properties:{value:{type:Number,notify:!0,observer:"_updateValue"}},_percent:Bm.percent,_updateValue:function(a){var b=Bm.flameColor(a);a=Bm.percent(a);this.style.background="linear-gradient(to right, "+b+" "+a+", #ccc "+a+")"}});
</script>
</dom-module>


<dom-module id="tf-op-details">
  <style>
paper-card {
  --paper-card-header-color: white;
  width: 100%;
}
tf-op-bar {
  width: 100%;
}
#subheader {
  padding: 0 16px 16px;
  color: rgba(255, 255, 255, 0.7);
  position: relative;
  top: -10px;
}
.card-content > div {
  margin-bottom: 1em;
}
.expression {
  display: block;
  word-wrap: break-word;
}
.unavailable {
  font-style: italic;
  color: #666;
}

.layout {
  display: table;
  width: 50%;
  border-spacing: 1em 0.3em;
}
.layout > * { display: table-row; }
.layout > * > * { display: table-cell; }
.layout .size, .layout .size-x { text-align: center; }
.layout .size-x { font-weight: bold; color: #888; }
.layout .semantics {
  font-size: smaller;
  font-weight: bold;
  color: #48c;
  text-transform: uppercase;
  vertical-align: middle;
}
.layout .alignment {
  /* Make the background extend outside the box */
  position: absolute;
  padding: 0.5em;
  margin-top: -0.5em;
  width: 50%;
  box-sizing: border-box;
}
  </style>
  <template>
    <paper-card id="card" heading="[[node.name]]" elevation="2">
      <div id="subheader">[[_subheader(node)]]</div>
      <div class="card-content">
        <div hidden="[[!_hasFlops(node)]]">
          <b>FLOPS utilization: </b>
          <tf-op-bar value="[[_utilization(node)]]"></tf-op-bar>
        </div>
        <div hidden="[[!_hasMemoryUtilization(node)]]">
          <b>Memory utilization: </b>
          <tf-op-bar value="[[_memoryUtilization(node)]]"></tf-op-bar>
        </div>
        <div hidden="[[!node.xla.expression]]">
          <b>XLA Expression: </b>
          <code class="expression">[[node.xla.expression]]</code>
        </div>
        <div hidden="[[!node.xla.provenance]]">
          <b>TensorFlow Name: </b>
          <code class="expression">[[node.xla.provenance]]</code>
        </div>
        <div class="unavailable" hidden="[[!_fused(node)]]">
          Performance information for individual fused operations is not available.
        </div>
        <div class="unavailable" hidden="[[!node.category]]">
          Select items within this category for performance details.
        </div>
        <div hidden="[[!node.xla.layout]]">
          <b>Layout: </b>
          <div class="layout" hidden="[[!node.xla.layout]]">
            <template is="dom-repeat" items="[[node.xla.layout.dimensions]]">
              <div hidden="[[!index]]"><span class="size-x">Ã</span></div>
              <div>
                <span class="size">[[item.size]]</span>
                <span class="semantics">[[item.semantics]]</span>
                <span class="alignment" style$="background-color:[[_dimensionColor(item)]]">[[_dimensionHint(item)]]</span>
              </div>
            </template>
          </div>
        </div>
      </div>
    </paper-card>
  </template>

  <script>//~~WEBPATH~~/tf-op-profile/tf-op-details.html-2.js
Polymer({is:"tf-op-details",properties:{node:{type:Object,notify:!0,observer:"_updateCard"}},_utilization:Bm.utilization,_memoryUtilization:Bm.memoryUtilization,_hasFlops:Bm.hasFlops,_hasMemoryUtilization:Bm.hasMemoryUtilization,_updateCard:function(a){a&&(a=Bm.flameColor(Bm.utilization(a),.7),this.$.card.updateStyles({"--paper-card-header":"background-color:"+a}),this.$.subheader.style.backgroundColor=a)},_subheader:function(a){return a?a.xla?a.xla.category+" operation":a.category?"Operation category":
"Unknown":null},_fused:function(a){return a&&a.xla&&!a.metrics},_dimensionColor:function(a){if(!a||!a.alignment)return null;a=a.size/a.alignment;return Bm.flameColor(a/Math.ceil(a),1,.25,function(b){return 1-Math.sqrt(1-b)})},_dimensionHint:function(a){if(!a||!a.alignment)return null;var b=Math.ceil(a.size/a.alignment),c=1==b?"":": "+b+" \u00d7 "+a.alignment;return 0==a.size%a.alignment?"Exact fit"+c:"Pad to "+b*a.alignment+c}});
</script>
</dom-module>




<dom-module id="tf-op-profile">
  <template>
    <style>
:host {
  display: block;
  margin-right: 1.5em;
}
#control {
  display: flex;
  flex-flow: row nowrap;
  justify-content: space-between;
  overflow:auto;
  text-transform:uppercase;
  padding: 0.5em;
  vertical-align: bottom;
  text-align: bottom;
}
.controlRowLeft {
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  line-height: 50px;
  text-align: bottom;
  justify-content: flex-start;
}
.controlRowRight{
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  line-height: 50px;
  text-align: bottom;
  justify-content: flex-end;
}
paper-slider {
  --paper-slider-input: {width: 100px}
  --paper-slider-height: 3px;
}
#description {
  margin-bottom: 2em;
  width: 600px;
}
    </style>
    <div class="tf-op-profile">
      <h4>Overall TPU FLOPS utilization is
        <span style$="color:[[_textColor(_root)]]">
          [[_utilizationPercent(_root)]]</span>
      </h4>
      <div id="description">
        <p>Modifying your model's architecture, data dimensions, and improving
        the efficiency of CPU operations may help reach the TPU's FLOPS
        potential.
        
        <p>"Idle" represents the portion of the total execution time on device
        that is idle.
      </div>
      <div id="control">
        <span class="controlRowLeft" hidden="[[!_hasTwoProfiles]]">By Program
          <paper-toggle-button checked="{{isByCategory}}">
          </paper-toggle-button>By Category</span>
        
        <span class="controlRowLeft">Show top
          <paper-slider min="10" max="100" snaps step="10" value="{{childrenCount}}" editable>
          </paper-slider>ops</span>
        <span class="controlRowRight">off&nbsp;
          <paper-toggle-button checked="{{showP90}}">
          </paper-toggle-button>Top 90%</span>
      </div>
      <tf-op-table root-node="[[_root]]" active="{{active}}" show-p90="{{showP90}}" children-count="{{childrenCount}}">
      </tf-op-table>
    </div>
  </template>

  <script>//~~WEBPATH~~/tf-op-profile/tf-op-profile.html.js
Polymer({is:"tf-op-profile",properties:{_data:{type:Object,notify:!0},_root:{type:Object,notify:!0},active:{type:Object,notify:!0,value:null},_hasTwoProfiles:{type:Boolean,computed:"_checkProfiles(_data)",notify:!0},isByCategory:{type:Boolean,value:!1,notify:!0},showP90:{type:Boolean,value:!1,notify:!0},childrenCount:{type:Number,value:10,notify:!0}},observers:["_getRoot(_data, isByCategory)"],_load:function(a){this._data=a},_getRoot:function(a,b){this._root=this._hasTwoProfiles?b?a.byCategory:a.byProgram:
a.byCategory||a.byProgram},_checkProfiles:function(a){return null!=a.byProgram&&null!=a.byCategory},_utilizationPercent:function(a){return Bm.percent(Bm.utilization(a))},_hasFlops:function(a){return 0<a.metrics.flops},_textColor:function(a){return Bm.flameColor(Bm.utilization(a),.7)}});
</script>
</dom-module>

<script>//~~WEBPATH~~/tf-profile-common/util.js
(function(a){(function(b){(function(c){c.time=function(e,f){var g=Date.now();f=f();console.log(e,":",Date.now()-g,"ms");return f};c.getTracker=function(e){return{setMessage:function(f){e.set("progress",{value:e.progress.value,msg:f})},updateProgress:function(f){e.set("progress",{value:e.progress.value+f,msg:e.progress.msg})},reportError:function(f,g){console.error(g.stack);e.set("progress",{value:e.progress.value,msg:f,error:!0})}}};c.runTask=function(e,f,g,h){h.setMessage(e);try{var l=a.profile.util.time(e,
g);h.updateProgress(f);return l}catch(n){h.reportError("Failed "+e,n)}}})(b.util||(b.util={}))})(a.profile||(a.profile={}))})(tf||(tf={}));
</script>

<script>//~~WEBPATH~~/memory-viewer/utils.js
var Cm;
(function(a){function b(c,e,f,g){return"rgba("+Math.round(255*c)+","+Math.round(255*e)+","+Math.round(255*f)+","+g+")"}a.bytesToMiB=function(c){return c/1048576};a.byteSizeOfPrimitiveType=function(c){switch(c){case "PRED":return 1;case "S8":return 1;case "S16":return 2;case "S32":return 4;case "S64":return 8;case "U8":return 1;case "U16":return 2;case "U32":return 4;case "U64":return 8;case "BF16":return 2;case "F16":return 2;case "F32":return 4;case "F64":return 8;case "C64":return 8;case "TOKEN":return 0;default:return console.error("Unhandled primitive type "+
c),0}};a.flameColor=function(c,e,f,g){void 0===e&&(e=1);void 0===f&&(f=1);void 0===g&&(g=function(h){return 1-Math.sqrt(1-h)});if(isNaN(c))return b(e,e,e,f);c=g(c);return.5>c?b(e,2*c*e,0,f):b(2*(1-c)*e,e,0,f)};a.percent=function(c){return isNaN(c)?"-":.995<=c?"100%":1E-5>c?"0.00%":(100*c).toPrecision(2)+"%"}})(Cm||(Cm={}));
</script>


<script>//~~WEBPATH~~/memory-viewer/shape.js
var Dm;
(function(a){var b=function(){function c(e){this.elementType=e.elementType.toString();this.dimensions=e.dimensions.map(function(f){return parseInt(f,10)});e.tupleShapes&&(this.tupleShapes=e.tupleShapes.map(function(f){return new c(f)}));this.layout=e.layout}c.prototype.resolveShapeIndex=function(e){return e.reduce(function(f,g){return f.tupleShapes[g]},this)};c.prototype.unpaddedHeapSizeBytes=function(){if("TOKEN"===this.elementType)return 0;if("TUPLE"===this.elementType)return 8*this.tupleShapes.length;var e=
0;if(this.layout&&"DENSE"!=this.layout.format)"SPARSE"==this.layout.format&&(f=parseInt(this.layout.maxSparseElements,10),e=f*Cm.byteSizeOfPrimitiveType(this.elementType),e+=f*this.dimensions.length*8);else{var f=this.dimensions.reduce(function(g,h){return g*h},1);e+=f*Cm.byteSizeOfPrimitiveType(this.elementType)}return e};c.prototype.humanStringWithLayout=function(){if("TUPLE"===this.elementType){for(var e="(",f="",g=0,h=this.tupleShapes;g<h.length;g++)e=e+f+h[g].humanStringWithLayout(),f=", ";return e+
")"}e=this.elementType.toLowerCase()+"[";e+=this.dimensions.join()+"]";"OPAQUE"!==this.elementType&&"TOKEN"!==this.elementType&&0<this.dimensions.length&&this.layout&&(e+=this.humanLayoutString(this.layout));return e};c.prototype.humanLayoutString=function(e){return"SPARSE"==e.format?"sparse{"+e.maxSparseElements+"}":"DENSE"==e.format?"{"+e.minorToMajor.join()+"}":""};return c}();a.Shape=b})(Dm||(Dm={}));
</script>
<script>//~~WEBPATH~~/memory-viewer/logical-buffer.js
var Em;(function(a){var b=function(){function c(e){this.instructionName=this.computationName="";this.shapeIndex=[];this.id=parseInt(e.id,10);this.size=parseInt(e.size,10);this.initBufferLocation_(e.definedAt)}c.prototype.initBufferLocation_=function(e){e&&(this.computationName=e.computationName,this.instructionName=e.instructionName,this.shapeIndex=e.shapeIndex.map(function(f){return parseInt(f,10)}))};return c}();a.LogicalBuffer=b})(Em||(Em={}));
</script>
<script>//~~WEBPATH~~/memory-viewer/buffer-allocation.js
var Fm;(function(a){var b=function(){function c(e){this.index=parseInt(e.index,10);this.size=parseInt(e.size,10);this.isThreadLocal=e.isThreadLocal||!1;this.assigned=e.assigned.map(function(f){return new Gm.BufferAllocationAssigned(f)});this.groupName=this.getGroupName(e)}c.prototype.getGroupName=function(e){return e.isEntryComputationParameter?"Parameter":e.maybeLiveOut?"Output":e.isThreadLocal?"Thread-local":"Temporary"};return c}();a.BufferAllocation=b})(Fm||(Fm={}));
</script>
<script>//~~WEBPATH~~/memory-viewer/buffer-allocation-assigned.js
var Gm;(function(a){a.BufferAllocationAssigned=function(){return function(b){this.logicalBufferId=parseInt(b.logicalBufferId,10);this.offset=parseInt(b.offset,10);this.size=parseInt(b.size,10)}}()})(Gm||(Gm={}));
</script>
<script>//~~WEBPATH~~/memory-viewer/hlo-instruction.js
var Hm;(function(a){a.HloInstruction=function(){return function(b){this.name=b.name?b.name:"";this.opcode=b.opcode?b.opcode:"";this.shape=b.shape?new Dm.Shape(b.shape):null;b.metadata&&(this.tfOpName=b.metadata.opName?b.metadata.opName:"")}}()})(Hm||(Hm={}));
</script>


<script>//~~WEBPATH~~/memory-viewer/memory-usage.js
var Im;
(function(a){var b=function(){function c(e){this.buffers_=[];this.idToBuffer_={};this.idToBufferAllocation_={};this.nameToHlo_={};this.unpaddedPeakHeapSizeBytes=this.peakHeapSizeBytes=this.rest_=this.nColor_=0;this.peakLogicalBuffers=[];this.indefiniteMemoryUsageBytes=this.peakHeapSizePosition=0;this.heapSizes=[];this.unpaddedHeapSizes=[];this.maxHeap=[];this.maxHeapBySize=[];this.bySizeToMaxHeap=[];this.maxHeapToBySize=[];this.logicalBufferSpans={};this.unSeenLogicalBuffers_=new Set;this.seenBufferAllocations_=new Set;
this.smallBufferSize=16384;this.initHloInstructions_(e.hloModule);this.initMemoryUsage_(e.bufferAssignment);this.initMaxHeap_()}c.prototype.initHloInstructions_=function(e){if(e){var f=0;for(e=e.computations;f<e.length;f++)for(var g=0,h=e[f].instructions;g<h.length;g++){var l=h[g];l.name&&(this.nameToHlo_[l.name]=new Hm.HloInstruction(l))}}else console.warn("Missing hloModule, skipping unpadded allocation size analysis")};c.prototype.initMemoryUsage_=function(e){e?(this.initBuffers_(e),this.initAllocations_(e),
this.findPeakMemoryUsage_(e)):console.error("No buffer assignment info")};c.prototype.initBuffers_=function(e){var f=0;for(e=e.logicalBuffers;f<e.length;f++){var g=new Em.LogicalBuffer(e[f]);this.buffers_.push(g);this.idToBuffer_[g.id]=g;this.unSeenLogicalBuffers_.add(g.id)}};c.prototype.initAllocations_=function(e){var f=0;for(e=e.bufferAllocations;f<e.length;f++){var g=e[f],h=new Fm.BufferAllocation(g),l=0;for(g=g.assigned;l<g.length;l++){var n=g[l];n.logicalBufferId&&(this.idToBufferAllocation_[n.logicalBufferId]=
h)}}};c.prototype.newHeapObject_=function(e,f,g,h,l){var n=g?Cm.bytesToMiB(g.unpaddedHeapSizeBytes()):0;return{instructionName:f.instructionName,logicalBufferId:f.id,unpaddedSizeMiB:n,tfOpName:h.tfOpName,opcode:h.opcode,sizeMiB:Cm.bytesToMiB(f.size),color:e,shape:g?g.humanStringWithLayout():"",groupName:l}};c.prototype.addHeapObject_=function(e,f,g){if(f.size<=e.smallBufferSize)e.rest_+=f.size;else if(f.instructionName){var h=e.nameToHlo_[f.instructionName];if(h){var l=h.shape.resolveShapeIndex(f.shapeIndex);
e.maxHeap.push(e.newHeapObject_(e.nColor_++,f,l,h,g))}}};c.prototype.initMaxHeap_=function(){for(var e=0,f=this.peakLogicalBuffers;e<f.length;e++){var g=f[e],h=this.idToBufferAllocation_[g];this.addHeapObject_(this,this.idToBuffer_[g],h?h.groupName:"")}0!=this.rest_&&(e="small (\x3c"+this.smallBufferSize/1024+" KiB)",this.maxHeap.push({instructionName:e,sizeMiB:Cm.bytesToMiB(this.rest_),color:0,groupName:e}));e=this.maxHeap.map(function(l,n){return{ind:n,val:l}});e.sort(function(l,n){return n.val.sizeMiB-
l.val.sizeMiB});this.maxHeapBySize=e.map(function(l){return l.val});this.bySizeToMaxHeap=e.map(function(l){return l.ind});this.maxHeapToBySize.length=this.maxHeap.length;for(e=0;e<this.bySizeToMaxHeap.length;e++)this.maxHeapToBySize[this.bySizeToMaxHeap[e]]=e};c.prototype.findPeakMemoryUsage_=function(e){function f(E){g.push(Cm.bytesToMiB(m));h.push(Cm.bytesToMiB(q));var C=parseInt(E.bufferId,10),D=w.idToBuffer_[C];w.unSeenLogicalBuffers_.delete(C);var J=w.idToBufferAllocation_[C];J&&w.seenBufferAllocations_.add(J.index);
J=null;D.instructionName&&""!=D.instructionName&&(J=w.nameToHlo_[D.instructionName].shape.resolveShapeIndex(D.shapeIndex));switch(E.kind.toString()){case "ALLOC":l.push(C);m+=D.size;J&&(q+=J.unpaddedHeapSizeBytes());w.logicalBufferSpans[C]=[g.length,-1];m>r&&(r=m,v=q,u=g.length,n=l.slice());break;case "FREE":l=l.filter(function(M){return M!==C});m-=D.size;J&&(q-=J.unpaddedHeapSizeBytes());w.logicalBufferSpans[C][1]=g.length;0>m&&console.error("heap_size_bytes \x3c 0");break;case "SHARE_WITH":w.unSeenLogicalBuffers_.delete(parseInt(E.shareWithCanonicalId,
10));break;default:console.log("ERROR: unknown heap event kind:",E)}}var g=[],h=[],l=[],n=[],m=0,q=0,r=0,v=0,u=0,w=this,z=0;for(e=e.heapSimulatorTraces[0].events;z<e.length;z++)f(e[z]);g.push(Cm.bytesToMiB(m));z=this.findIndefiniteMemoryUsage_(this.unSeenLogicalBuffers_);this.peakHeapSizeBytes=r+z;this.unpaddedPeakHeapSizeBytes=v+z;this.peakLogicalBuffers=n;this.peakHeapSizePosition=u;var A=Cm.bytesToMiB(z);this.heapSizes=g.map(function(E){return E+A});this.unpaddedHeapSizes=h.map(function(E){return E+
A})};c.prototype.findIndefiniteMemoryUsage_=function(e){var f=this,g=0;e.forEach(function(h){var l=f.idToBufferAllocation_[h];l.isThreadLocal||f.seenBufferAllocations_.has(l.index)||(f.seenBufferAllocations_.add(l.index),g+=l.size,f.addHeapObject_(f,f.idToBuffer_[h],l.groupName))});return this.indefiniteMemoryUsageBytes=g};return c}();a.MemoryUsage=b})(Im||(Im={}));
</script>





<dom-module id="mv-line-chart">
  <template>
    <div class="mv-line-chart">
      <h2>Working Space Size (MiB) vs Program Order (HLO Sequence)</h2>
      <div id="chartdiv" style="width:1200px;height:384px"></div>
      <div id="maxheap-details">
        <em>Hover over a bar for buffer details to appear on the left.</em>
      </div>
      <h3>By Program Order</h3>
      <div id="maxheapchart" style="width:1200px;height:200px"></div>
      <h3>By Size</h3>
      <div id="maxheapsizechart" style="width:1200px;height:200px"></div>
    </div>
  </template>
  <script>//~~WEBPATH~~/memory-viewer/mv-line-chart.js
var Jm;Jm||(Jm={});
Polymer({is:"mv-line-chart",properties:{data:{type:Object,notify:!0,observer:"_dataChanged"},active:{type:Object,notify:!0,observer:"_renderSpans"},bufferSizes:{type:Array,notify:!0},unpaddedBufferSizes:{type:Array,notify:!0},maxHeap:{type:Array,notify:!0},maxHeapBySize:{type:Array,notify:!0},spanPlot:{type:Object,notify:!0},colorScale:{type:Object,notify:!0},_selectedEntityInSrcChart:{type:Object,notify:!0,observer:"_selectedEntityChanged"},_selectedEntityInDstChart:{type:Object,notify:!0,observer:"_selectedEntityChanged"}},
_makeChartDataset:function(){if(this.data){this.bufferSizes=this.data.heapSizes.map(function(c,e){return[e,c]});this.unpaddedBufferSizes=this.data.unpaddedHeapSizes.map(function(c,e){return[e,c]});var a=this.data.maxHeap;this.data.maxHeap.reduce(function(c,e,f){a[f].offset=c;return c+e.sizeMiB},0);this.maxHeap=a;var b=this.data.maxHeapBySize;this.data.maxHeapBySize.reduce(function(c,e,f){b[f].offsetBySize=c;return c+e.sizeMiB},0);this.maxHeapBySize=b}},_drawProgramOrder:function(){if(this.data){var a=
new Plottable.Scales.Linear,b=new Plottable.Scales.Linear,c=new Plottable.Axes.Numeric(a,"bottom"),e=new Plottable.Axes.Numeric(b,"left"),f=new Plottable.Plots.Line;f.addDataset(new Plottable.Dataset(this.bufferSizes));f.x(function(v){return v[0]},a).y(function(v){return v[1]},b).attr("stroke","red");var g=new Plottable.Plots.Line;g.addDataset(new Plottable.Dataset(this.unpaddedBufferSizes));g.x(function(v){return v[0]},a).y(function(v){return v[1]},b).attr("stroke","grey");var h=new Plottable.Plots.Rectangle,
l=this.bufferSizes.length/40;h.addDataset(new Plottable.Dataset([this.bufferSizes[this.data.peakHeapSizePosition]]));h.x(function(v){return v[0]-l/2},a).y(function(){return 0},b).x2(function(v){return v[0]+l/2}).y2(function(v){return v[1]}).attr("fill","red").attr("opacity",.3);var n=this.colorScale,m=new Plottable.Plots.Rectangle,q=this.data.logicalBufferSpans,r=this.maxHeap.map(function(v){var u=q[v.logicalBufferId];return u?{id:v.logicalBufferId,span:u,size:v.sizeMiB,color:v.color}:null});r=r.filter(function(v){return null!==
v});m.addDataset(new Plottable.Dataset(r));m.x(function(v){return v.span[0]},a).y(function(){return 0},b).x2(function(v){return v.span[1]}).y2(function(v){return v.size}).attr("fill",function(v){return(v.color%10).toString()},n).attr("fill-opacity",0);this.spanPlot=m;n=new Plottable.Scales.Color;n.range(["red","grey"]);n.domain(["Sizes","Unpadded Sizes"]);n=new Plottable.Components.Legend(n);n.maxEntriesPerRow(2);a=new Plottable.Components.Gridlines(a,b);f=new Plottable.Components.Group([h,f,g,a,
m]);c=new Plottable.Components.Table([[null,n],[e,f],[null,c]]);e=d3.select(this.$.chartdiv);e.selectAll(".component").remove();c.renderTo(e)}},_drawMaxHeap:function(){var a=new Plottable.Scales.Linear,b=new Plottable.Scales.Linear;new Plottable.Axes.Numeric(b,"top");new Plottable.Axes.Numeric(a,"left");var c=this.colorScale;d3.select(this.$.maxheapchart).selectAll(".component").remove();d3.select(this.$.maxheapsizechart).selectAll(".component").remove();var e=new Plottable.Plots.Rectangle;e.addDataset(new Plottable.Dataset(this.maxHeap)).x(function(h){return h.offset},
b).y(function(){return 0},a).x2(function(h){return h.offset+h.sizeMiB}).y2(function(){return 12}).attr("fill",function(h){return(h.color%10).toString()},c).attr("opacity","0.6").renderTo(d3.select(this.$.maxheapchart));var f=new Plottable.Plots.Rectangle;f.addDataset(new Plottable.Dataset(this.maxHeapBySize)).x(function(h){return h.offsetBySize},b).y(function(){return 0},a).x2(function(h){return h.offsetBySize+h.sizeMiB}).y2(function(){return 12}).attr("fill",function(h){return(h.color%10).toString()},
c).attr("opacity","0.6").renderTo(d3.select(this.$.maxheapsizechart));var g=this;(new Plottable.Interactions.Pointer).attachTo(e).onPointerMove(function(h){g._onHoverInteraction(h,e,f,g.data.maxHeapToBySize)});(new Plottable.Interactions.Pointer).attachTo(f).onPointerMove(function(h){g._onHoverInteraction(h,f,e,g.data.bySizeToMaxHeap)})},_onHoverInteraction:function(a,b,c,e){a=b.entitiesAt(a);0===a.length?this.active=this._selectedEntityInDstChart=this._selectedEntityInSrcChart=null:(a=a[0],this.active=
a.datum,this._selectedEntityInSrcChart=a,this._selectedEntityInDstChart=c.entities()[e[a.index]])},_selectedEntityChanged:function(a,b){b&&b.selection.attr("opacity","0.6");a&&a.selection.attr("opacity","1.0")},_renderSpans:function(a){this.spanPlot&&(this.spanPlot.selections().attr("fill-opacity","0"),a&&this.spanPlot.entities().forEach(function(b){b.selection.attr("fill-opacity",b.datum.id===a.logicalBufferId?1:0)}))},_redraw:function(){this.data&&(this.colorScale=new Plottable.Scales.Color("Category10"),
this._makeChartDataset(),this._drawProgramOrder(),this._drawMaxHeap())},_dataChanged:function(a){a&&this._redraw()},attached:function(){this._redraw()}});
</script>
</dom-module>






<dom-module id="tf-mv-bar">
  <style>
:host {
  display: inline-block;
  height: 1.5em;
  line-height: 1.5em;
}
  </style>
</dom-module>


<dom-module id="buffer-details">
  <style>
paper-card {
  --paper-card-header-color: white;
  width: 100%;
}
tf-mv-bar {
  width: 100%;
}
#subheader {
  padding: 0 16px 16px;
  color: rgba(255, 255, 255, 0.7);
  position: relative;
  top: -10px;
}
.card-content > div {
  margin-bottom: 1em;
}
.expression {
  display: block;
  word-wrap: break-word;
}
  </style>
  <template>
    <paper-card id="card" heading="[[node.instructionName]]" hidden="[[!node]]" elevation="2">
      <div id="subheader">[[_subheader(node)]]</div>
      <div class="card-content">
        <div hidden="[[!size]]">
          <h4>Size: <span>[[size]]</span><b> MiB</b></h4>
        </div>
        <div hidden="[[!unpaddedSize]]">
          <b>Unpadded Size: </b><span>[[unpaddedSize]]</span><b> MiB</b>
        </div>
        <div hidden="[[!padding]]">
          <b>Extra memory due to padding: </b><span>[[padding]]</span><b> MiB</b>
        </div>
        <div hidden="[[!expansion]]">
          <b>Expansion: </b><span>[[expansion]]</span><b>X</b>
          <tf-mv-bar value="[[utilization]]"></tf-mv-bar>
        </div>
        <div hidden="[[!node.shape]]">
          <b>Shape (and minor-to-major order): </b>
          <code class="expression">[[node.shape]]</code>
        </div>
        <div hidden="[[!node.tfOpName]]">
          <b>Tf Op Name: </b>
          <code class="expression">[[node.tfOpName]]</code>
        </div>
        <div hidden="[[!node.groupName]]">
          <b>Allocation Type: </b><span>[[node.groupName]]</span>
        </div>
      </div>
    </paper-card>
  </template>
  <script>//~~WEBPATH~~/memory-viewer/buffer-details.js
var Km;Km||(Km={});Polymer({is:"tf-mv-bar",properties:{value:{type:Number,notify:!0,observer:"_updateValue"}},_updateValue:function(a){var b=Cm.flameColor(a);a=Cm.percent(a);this.style.background="linear-gradient(to right, "+b+" "+a+", #ccc "+a+")"}});
Polymer({is:"buffer-details",properties:{node:{type:Object,notify:!0,observer:"_updateCard"},size:{type:String,notify:!0},unpaddedSize:{type:String,notify:!0},padding:{type:String,notify:!0},expansion:{type:String,notify:!0},utilization:{type:Number,notify:!0}},_updateCard:function(a){if(a){this.size=a.sizeMiB.toFixed(1);var b="rgb(192,192,192)";a.unpaddedSizeMiB&&(this.unpaddedSize=a.unpaddedSizeMiB.toFixed(1),this.padding=(a.sizeMiB-a.unpaddedSizeMiB).toFixed(1),this.utilization=a.unpaddedSizeMiB/
a.sizeMiB,this.expansion=(1/this.utilization).toFixed(1),b=Cm.flameColor(this.utilization,.7));this.$.card.updateStyles({"--paper-card-header":"background-color:"+b});this.$.subheader.style.backgroundColor=b}},_subheader:function(a){return a&&a.opcode?a.opcode+" operation":""}});
</script>
</dom-module>


<dom-module id="memory-viewer-dashboard">
  <template>
    <style>
:host {
  overflow-x: auto;
  width: 100%;
}
#description {
  margin-bottom: 2em;
  width: 600px;
}
mv-line-chart {
  width: 100%;
  height: 100%;
}
    </style>
    <div class="memory-viewer-dashboard" style="overflow:auto">
      <h3> Module name: <span>[[moduleName_]]</span>
      </h3>
      <h3> Peak memory allocation is
        <span>{{peakHeapSizeMiB_}}</span> MiB <span style="font-size:20px" hidden="{{!unpaddedPeakHeapSizeMiB_}}">(
          {{unpaddedPeakHeapSizeMiB_}} MiB without padding)</span>
      </h3>
      <div id="description">
        <p>Modifying your model's architecture, batch size and data dimentions
           may help reduce the memory footprint.
        
      </div>
      <mv-line-chart data="{{usage}}" active="{{active}}"></mv-line-chart>
    </div>
  </template>
  <script>//~~WEBPATH~~/memory-viewer/memory-viewer-dashboard.js
var Lm;Lm||(Lm={});
Polymer({is:"memory-viewer-dashboard",properties:{_data:{type:Object,notify:!0,observer:"dataChanged_"},hloModule_:{type:Object},moduleName_:{type:String},peakHeapSizeMiB_:{type:String},unpaddedPeakHeapSizeMiB_:{type:String},usage:{type:Object,notify:!0},active:{type:Object,notify:!0,value:null}},dataChanged_:function(a){a&&a.hloModule&&a.bufferAssignment&&(this.hloModule_=a.hloModule,this.moduleName_=this.hloModule_.name?this.hloModule_.name:"",this.usage=new Im.MemoryUsage(a),this.peakHeapSizeMiB_=
Cm.bytesToMiB(this.usage.peakHeapSizeBytes).toFixed(2),this.unpaddedPeakHeapSizeMiB_=Cm.bytesToMiB(this.usage.unpaddedPeakHeapSizeBytes).toFixed(2))}});
</script>
</dom-module>





<script>//~~WEBPATH~~/pod-viewer/proto.js
</script>


<dom-module id="details-card">
  <style>
paper-card {
  max-height: 50vh;
  overflow-y: auto;
  --paper-card-header-color: white;
  --paper-card-header: {
    background-color: rgb(178,34,34);
  }
  width: 100%;
}

.card-content > div {
  margin-bottom: 1em;
  top: -5px;
}

.value {
  font-weight: normal;
  text-align: right;
}

.info {
  font-size: 20px;
  font-weight: bold;
}

.code-style {
  font-size: 14px;
  font-weight: normal;
}
  </style>
  <template>
    <paper-card id="card" heading="[[_name]]" hidden="[[!_name]]" elevation="2">
      <template is="dom-repeat" items="[[nodes]]" as="node">
        <div class="card-content info">
          <div hidden="[[_isStep(node)]]">
            <p>Data Transferred: <span class="value">[[_sizeMiB(node.dataSize)]] MiB</span>
            <p>Latency: <span class="value">[[_format(node.durationUs)]] Âµs</span>
            <p>BW: <span class="value">
                [[_bandwidth(node.dataSize, node.durationUs)]] GiB/s</span>
          </div>
          <div hidden="[[!_isChannel(node)]]">
            <p>Send Delay: <span class="value">[[_format(node.sendDelayUs)]] Âµs</span>
            <p>Hlo Names: 
            <code class="code-style">
              <template is="dom-repeat" items="[[node.hloNames]]">
                "[[item]]"
              </template>
            </code>
          </div>
          <div hidden="[[!_hasReplicaGroups(node)]]">
            <p>Replica Groups
            <code class="code-style">
              <template is="dom-repeat" items="[[node.replicaGroups]]">
                {[[item.replicaIds]]}<br>
              </template>
            </code>
          </div>
          <div hidden="[[!_isStep(node)]]">
            <template is="dom-repeat" items="[[stepBreakdownLayers]]">
              <p>[[item.label]]: <span class="value">
                  [[_getStepBreakdownValue(node, item.key)]] Âµs
                  [[_getStepBreakdownPct(node, item.key)]]</span>
            </template>
          </div>
        </div>
      </template>
    </paper-card>
  </template>
  <script>//~~WEBPATH~~/pod-viewer/details-card.js
var Mm;Mm||(Mm={});
Polymer({is:"details-card",properties:{nodes:{type:Array},_name:{type:String,computed:"_computeName(nodes)"},stepBreakdownLayers:{type:Array,value:function(){return[{key:"highFlopsComputeUs",label:"High flops compute"},{key:"lowFlopsComputeUs",label:"Low flops compute"},{key:"hostInfeedDurationUs",label:"Infeed"},{key:"hostOutfeedDurationUs",label:"Outfeed"},{key:"allReduceComputeDurationUs",label:"AllReduce compute"},{key:"allReduceSyncDurationUs",label:"AllReduce sync"},{key:"sendDurationUs",label:"Send"},
{key:"recvDurationUs",label:"Recv"}]}}},_isAllReduce:function(a){return void 0!=a.replicaGroups},_isChannel:function(a){return void 0!=a.channelId},_isStep:function(a){return void 0!=a.hostName},_hasReplicaGroups:function(a){return a.replicaGroups&&0<a.replicaGroups.length},_computeName:function(a){if(a&&0!=a.length){a=a[0];if(this._isChannel(a))return"Channel # "+a.channelId;if(this._isAllReduce(a))return a.name;if(this._isStep(a))return"Step breakdown of chip "+a.chipId+", core "+a.nodeId}},_bytesToMiB:function(a){return a/
1048576},_sizeMiB:function(a){if(a)return this._format(this._bytesToMiB(a))},_bandwidth:function(a,b){if(a&&b)return this._format(a/b/1073.74)},_chipId:function(a){return Math.floor(a/2)},_nodeId:function(a){return a&1},_format:function(a){return null==a?"":a.toFixed(2)},_getStepBreakdownValue:function(a,b){if(b&&a)return this._format(a[b]?a[b]:0)},_getStepBreakdownPct:function(a,b){if(b&&a&&a.totalDurationUs&&a[b])return(a[b]/a.totalDurationUs*100).toFixed(2)+"%"}});
</script>
</dom-module>






<dom-module id="stack-bar-chart">
  <template>
    <style>
:host {
  display: block;
  margin-right: 1.5em;
}

.axis text {
  font: 14px sans-serif;
}

.svg-container {
  display: inline-block;
  padding-bottom: 90%; /* aspect ratio */
  position: relative;
  vertical-align: top;
  width: 90%;
}

.svg-content-responsive {
  display: inline-block;
  left: 0;
  position: absolute;
  top: 10px;
}
</style>
    <div class="stack-bar-chart">
      <div id="chart"></div>
    </div>
  </template>
  <script>//~~WEBPATH~~/pod-viewer/stack-bar-chart.js
var Nm;Nm||(Nm={});
Polymer({is:"stack-bar-chart",properties:{data:{type:Array,value:function(){return[]},observer:"_dataChanged"},activeBar:{type:Object,notify:!0},xDomainFunc:{type:Object},stackLayers:{type:Array,value:function(){return[]},observer:"_onStackLayersChanged"}},stackBarChart:function(a){if(a.length&&this.isAttached&&0!=this.stackLayers.length){var b=this.stackLayers.map(function(n){return n.key}),c=this.stackLayers.map(function(n){return n.label}),e=50*a.length,f=d3.scaleBand().range([0,e]).padding(.4),
g=d3.scaleLinear().range([250,0]),h=d3.scaleOrdinal(d3.schemeCategory10).domain([0,19]),l=d3.select(this.$.chart).select("svg");l.empty()&&(l=d3.select(this.$.chart).append("svg").attr("width",Math.max(1600,e+100+20)).attr("height",300).append("g").attr("transform","translate(100,20)"),l.append("g").attr("class","x axis").style("font-size",14).attr("transform","translate(0,255)"),l.append("g").attr("class","y axis").style("font-size",14).attr("transform","translate(0,0)"));b=d3.stack().keys(b).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(a);
f.domain(a.map(this.xDomainFunc));g.domain([0,d3.max(b[b.length-1],function(n){return n[0]+n[1]})]).nice();this.drawLayers(l,b,f,g,h);this.drawAxes(l,f,g,250);a=d3.select(this.$.chart).select(".legend");a.empty()&&(a=l.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",14).attr("text-anchor","start"));this.drawLegend(a,c,h)}},drawLayers:function(a,b,c,e,f){var g=this;a=a.selectAll(".layer").data(b);b=a.enter().append("g").attr("class","layer").merge(a).style("fill",
function(h,l){return f(l)}).selectAll("rect").data(function(h){return h});b.enter().append("rect").merge(b).attr("width",c.bandwidth()).attr("y",function(h){return e(h[1])}).attr("height",function(h){return e(h[0])-e(h[1])}).attr("x",function(h){return c(g.xDomainFunc(h.data))}).on("mouseover",function(h){d3.select(this).style("opacity",.5);g.activeBar=h.data}).on("mouseout",function(){d3.select(this).style("opacity",1);g.activeBar=null}).transition().duration(1E3);a.exit().remove()},drawAxes:function(a,
b,c){a.select(".x.axis").transition().duration(1E3).call(d3.axisBottom(b));a.select(".y.axis").transition().duration(1E3).call(d3.axisLeft(c))},drawLegend:function(a,b,c){a=a.selectAll("g").data(b.slice());a.exit().remove();b=a.enter().append("g");b.append("rect").attr("x",200).attr("width",19).attr("height",19);b.append("text").attr("x",224).attr("y",9.5).attr("dy","0.32em");a=b.merge(a);a.attr("transform",function(e,f){return"translate("+(150*f-750*Math.floor(f/5))+", "+30*Math.floor(f/5)+")"});
a.select("rect").attr("fill",function(e,f){return c(f)});a.select("text").text(function(e){return e})},redraw:function(a){a&&0!=a.length&&this.stackBarChart(a)},_onStackLayersChanged:function(a){a&&0!=a.length&&this.redraw(this.data)},_dataChanged:function(a){a&&0!=a.length&&this.redraw(a)},attached:function(){this.redraw(this.data)}});
</script>
</dom-module>










<dom-module id="topology-graph">
  <template>
    <style is="custom-style">
.flex-horizontal {
  @apply --layout-horizontal;
}

.flexchild {
  @apply --layout-flex;
}

:host {
  display: block;
  margin-right: 1.5em;
}

.cells {
  fill: #aaa;
}

.label {
  font: 24px sans-serif;
  text-anchor: start;
}

/* disable text selection */
svg *::selection,
svg *::-moz-selection,
svg *::-webkit-selection {
  background : transparent;
}

rect.selection {
  fill: transparent;
  stroke: #333;
  stroke-dasharray: 4px;
  stroke-opacity: .5;
}

rect.bordered {
  stroke: #e6e6e6;
  stroke-width: 2px;
}

rect.cell-border {
  stroke: #eee;
  stroke-width: .3px;
}

rect.cell-selected {
  stroke: rgb(51,102,153);
  stroke-width: .5px;
}

rect.cell-hover {
  stroke: #f00;
  stroke-width: .3px;
}

#tooltip {
  background-color: white;
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
  -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
  box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
  height: auto;
  padding: 10px;
  pointer-events: none;
  position: absolute;
  width: 200px;
}

#tooltip.hidden {
  display: none;
}

#tooltip p {
  font: 12px sans-serif;
  margin: 0;
  line-height: 20px;
}

#overview {
  margin-left: 20px;
}

paper-item:hover.menu-option {
  background: #e0e0e0;
}

paper-slider {
  --paper-slider-input: {width: 150px}
}

.metrics-button {
  height: 60px;
  width: 60px;
}

.topo-header {
  margin-left: 16px;
}

.control-row-left {
  align-items: center;
  display: flex;
  flex-flow: row nowrap;
  justify-content: flex-start;
  line-height: 50px;
  margin-left: 16px;
  text-align: bottom;
}

.metrics-label {
  padding: 0.5em;
  text-transform: uppercase;
}

.topo-title {
  font-size: 24px;
  font-weight: bold;
  line-height: 32px;
  text-align: bottom;
  vertical-align: bottom;
}

#container {
  /* Tooltip should position relative to the container. */
  position: relative;
}
</style>
    <div class="topology-graph">
      <div class="topo-header container flex-horizontal">
        <div class="control-row-left topo-title">{{_tpuType}} {{_totalCoreCount}}</div>
        <span class="control-row-left metrics-label">
            [[_getSelectedMetricLabel(metrics, selectedMetricIdx)]]</span>
        <paper-menu-button close-on-activate="true">
          <paper-icon-button raised icon="arrow-drop-down" slot="dropdown-trigger" class="dropdown-trigger metrics-button">
          </paper-icon-button>
          <paper-listbox class="dropdown-content" slot="dropdown-content" selected="{{selectedMetricIdx}}">
            <template is="dom-repeat" items="[[metrics]]">
              <paper-item value="[[item.key]]">[[item.label]]</paper-item>
            </template>
          </paper-listbox>
        </paper-menu-button>
      </div>
      <div id="container">
        <div id="tpgraph"></div>
        <div id="tooltip" class="hidden">
          <p><span id="value"></span>
        </div>
      </div>
    </div>
  </template>
  <script>//~~WEBPATH~~/pod-viewer/topology-graph.js
var Om;
(function(){var a="#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #253494 #081d58".split(" "),b=d3.scaleQuantile().domain([0,1]).range(a);Polymer({is:"topology-graph",properties:{data:{type:Object},runEnvironment:{type:Object},metrics:{type:Array,value:function(){return[]}},activeBar:{type:Object,observer:"_activeBarChanged"},selectedMetricIdx:{type:Number,value:0,observer:"_selectedMetricIdxChanged"},_topoData:{type:Object,computed:"_computeTopoData(data, runEnvironment, metrics)"},_xDimension:{type:Number,
computed:"_computeXDimension(runEnvironment)"},_yDimension:{type:Number,computed:"_computeYDimension(runEnvironment)"},_totalCoreCount:{type:Number,computed:"_computeTotalCoreCount(_xDimension, _yDimension)"},_tpuType:{type:String,computed:"_computeTpuType(runEnvironment)"},_hostXStride:{type:Number,computed:"_computeHostXStride(_tpuType)"},_hostGridWidth:{type:Number},_hostGridHeight:{type:Number},_nodeGridHeight:{type:Number},_nodeGridWidth:{type:Number},_gSVG:{type:Object}},observers:["drawTopology(_topoData, runEnvironment)"],
_computeTopoData:function(c,e,f){if(c&&e&&e.topology&&f){var g=parseInt(e.topology.xDimension,10);return Object.keys(c.podStatsPerCore).map(function(h){var l=c.podStatsPerCore[h],n=f.map(function(m){return l[m.key]?l[m.key]:0});return{xdim:l.chipId%g,ydim:Math.floor(l.chipId/g),nid:l.nodeId,cid:l.chipId,rid:c.coreIdToReplicaIdMap[h],host:l.hostName,values:n,total:l.totalDurationUs}})}},_computeTpuType:function(c){if(c)return c.tpuType},_computeXDimension:function(c){if(c&&c.topology)return parseInt(c.topology.xDimension,
10)},_computeYDimension:function(c){if(c&&c.topology)return parseInt(c.topology.yDimension,10)},_computeTotalCoreCount:function(c,e){return c*e*2},_computeHostXStride:function(c){return"TPU v3"==c?4:2},topologyGraph:function(c){this._hostGridWidth=this.getHostGridSize(this._hostXStride);this._hostGridHeight=this.getHostGridSize(2);this._nodeGridWidth=15;this._nodeGridHeight=30;var e=this._xDimension/this._hostXStride,f=this._yDimension/2,g=Array.from(Array(this._xDimension).keys()),h=Array.from(Array(this._yDimension).keys());
this._gSVG||(this._gSVG=d3.select(this.$.tpgraph).append("svg").attr("width",1620).attr("height",f*this._hostGridHeight+150).append("g").attr("transform","translate(30,50)"),this._gSVG.append("svg:g").classed("graph",!0),this._gSVG.append("svg:g").classed("link",!0),this._gSVG.append("svg:defs").append("svg:marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").append("svg:path").style("stroke","red").style("fill","red").attr("d",
"M0,-5L10,0L0,5"));var l=this._gSVG.select(".graph");e=this.createHostData(e,f);this.drawHostCards(l,e,this._hostGridWidth,this._hostGridHeight);this.drawNodeCards(l,c,b);this.drawLabels(l,g,h);this.drawLegend(l,this._hostGridHeight*Math.ceil(this._yDimension/2)+10,b)},getHostGridSize:function(c){return 30+10*(c-1)+30*c+10},getChipXLoc:function(c,e){return c*this._hostGridWidth+15+40*e},getChipYLoc:function(c,e){return c*this._hostGridHeight+15+40*e},getNodeXLoc:function(c,e,f){return this.getChipXLoc(c,
e)+f*this._nodeGridWidth},createHostData:function(c,e){for(var f=[],g=0;g<c;g++)for(var h=0;h<e;h++)f.push({xdim:g,ydim:h});return f},drawLabels:function(c,e,f){var g=this;e=c.selectAll(".x-label").data(e);e.enter().append("text").merge(e).text(function(h){return h}).attr("x",function(h,l){return g.getChipXLoc(Math.floor(l/g._hostXStride),l%g._hostXStride)}).attr("y",0).style("text-anchor","middle").attr("transform","translate(15, -6)").attr("class","x-label").transition().duration(1E3);e.exit().remove();
c=c.selectAll(".y-label").data(f);c.enter().append("text").merge(c).text(function(h){return h}).attr("x",0).attr("y",function(h,l){return g.getChipYLoc(Math.floor(l/2),l%2)}).style("text-anchor","middle").attr("transform","translate(-12,15)").attr("class","y-label").transition().duration(1E3);c.exit().remove()},drawHostCards:function(c,e,f,g){c=c.selectAll(".host").data(e);c.enter().append("rect").merge(c).attr("x",function(h){return h.xdim*f}).attr("y",function(h){return h.ydim*g}).attr("rx",4*f/
g).attr("ry",4).attr("class","host bordered").attr("width",f-10).attr("height",g-10).attr("border",1).style("fill","F0F0F0").style("stroke","black").style("stroke-width",1).transition().duration(1E3);c.exit().remove()},drawNodeCards:function(c,e,f){var g=this;c=c.selectAll(".node").data(e);var h=this,l=Math.max(this.selectedMetricIdx,0);c.enter().append("rect").merge(c).attr("id",function(n){return"rid"+n.rid}).attr("x",function(n){return g.getNodeXLoc(Math.floor(n.xdim/g._hostXStride),n.xdim%g._hostXStride,
n.nid)}).attr("y",function(n){return g.getChipYLoc(Math.floor(n.ydim/2),n.ydim%2)}).attr("rx",2).attr("ry",4).attr("class","node bordered").attr("width",this._nodeGridWidth).attr("height",this._nodeGridHeight).attr("border",1).style("stroke","black").style("stroke-width",1).style("fill",function(n){return f(n.values[l]/n.total)}).on("mouseover",function(n){d3.select(this).classed("cell-hover",!0).style("opacity",.5);var m=this.getBoundingClientRect(),q=h.$.container.getBoundingClientRect(),r=m.x+
m.width+5-q.x;m=m.y-q.y;d3.select(h.$.tooltip).style("left",r+"px").style("top",m+"px").select("#value").text(h._getToolTipText(n));d3.select(h.$.tooltip).classed("hidden",!1)}).on("mouseout",function(){d3.select(this).classed("cell-hover",!1).style("opacity",1);d3.select(h.$.tooltip).classed("hidden",!0)}).transition().duration(1E3);c.exit().remove()},drawLinks:function(c,e){var f=this;e&&e.length&&c&&(c=c.select(".link").selectAll("path").data(e),c.enter().append("svg:path").merge(c).attr("stroke-width",
2).attr("stroke","red").attr("fill","none").attr("marker-end","url(#arrow)").attr("d",function(g){return f.linkToPath(g[0],g[1])}),c.exit().remove())},coreIdToPos:function(c){var e=Math.floor(c/2),f=e%this._xDimension;e=Math.floor(e/this._xDimension);return{x:7.5+this.getNodeXLoc(Math.floor(f/this._hostXStride),f%this._hostXStride,c&1),y:this.getChipYLoc(Math.floor(e/2),e%2)+15}},linkToPath:function(c,e){c=this.coreIdToPos(c?c:0);e=this.coreIdToPos(e?e:0);return"M "+c.x+" "+c.y+"L "+e.x+" "+e.y},
_getToolTipText:function(c){var e=0<=this.selectedMetricIdx?this.metrics[this.selectedMetricIdx].label:"",f=0<=this.selectedMetricIdx?c.values[this.selectedMetricIdx]:0,g=new Intl.NumberFormat(navigator.language,{style:"percent",minimumFractionDigits:2});return"pos: ("+c.ydim+", "+c.xdim+"),\n        host: "+c.host+",\n        chip id: "+c.cid+",\n        core id: "+c.nid+",\n        replica id: "+c.rid+"\n        "+(e?e+" spends "+f.toFixed(2)+"\u00b5s in total,\n            taking "+g.format(f/
c.total)+" of a step.":"")},drawLegend:function(c,e,f){c=c.selectAll(".legend").data([0].concat(f.quantiles()),function(g){return g});c.exit().remove();f=c.enter().append("g").attr("class","legend");f.append("rect").attr("width",60).attr("height",30).merge(c.select("rect")).attr("x",function(g,h){return 60*h}).attr("y",e).style("fill",function(g,h){return a[h]});f.append("text").merge(c.select("text")).text(function(g){return"\u2265 0."+Math.round(10*g)}).attr("x",function(g,h){return 60*h}).attr("y",
e+60)},drawTopology:function(c,e){c&&e&&this.isAttached&&this.topologyGraph(c)},attached:function(){this.drawTopology(this._topoData,this.runEnvironment)},_selectedMetricIdxChanged:function(c){0>c||d3.select(this.$.tpgraph).selectAll(".node").style("fill",function(e){return b(e.values[c]/e.total)})},_activeBarChanged:function(c){var e=d3.scaleOrdinal(d3.schemeCategory10).domain(d3.range(0,19));if(c)if(c.replicaGroups&&0<c.replicaGroups.length){for(var f=0;f<c.replicaGroups.length;f++)for(var g=c.replicaGroups[f].replicaIds,
h=0;h<g.length;h++)d3.select(this.$.tpgraph).selectAll("#rid"+g[h]).style("fill",e(f%20));this.selectedMetricIdx=-1}else c.srcCoreIds&&(e=c.srcCoreIds.map(function(l,n){return[l,c.dstCoreIds[n]]}),this.drawLinks(this._gSVG,e))},_getSelectedMetricLabel:function(c,e){return 0>e||!c||e>c.length?"Please select a metric":"Color: "+c[e].label}})})(Om||(Om={}));
</script>
</dom-module>


<dom-module id="pod-viewer-dashboard">
  <template>
<style>
:host {
  display: block;
  margin-right: 1.5em;
}

#control {
  display: flex;
  flex-flow: row nowrap;
  justify-content: space-between;
  overflow: auto;
  padding: .5em;
  text-align: bottom;
  text-transform: uppercase;
  vertical-align: bottom;
}

.control-row-left {
  align-items: center;
  display: flex;
  flex-flow: row nowrap;
  justify-content: flex-start;
  line-height: 50px;
  margin-left: 16px;
  text-align: bottom;
}

paper-slider {
  --paper-slider-input: {width: 100px}
  --paper-slider-height: 3px;
}

.step-num-text {
  font-size: 20px;
  font-weight: bold;
  padding-left: 1em;
}

.stack-title {
  font-size: 24px;
  line-height: 32px;
}

.bar-chart {
  overflow: auto;
}

#title {
  margin-left: 16px;
}

.error-message {
  color: red;
  font-size: 32px;
  font-weight: bold;
  margin-left: 16px;
  margin-top: 32px;
}

</style>
    <div class="error-message" hidden="[[!_errorMessage]]">
      <span>[[_errorMessage]]</span>
    </div>
    <div id="control" hidden="[[_errorMessage]]">
      
      <span class="control-row-left">Please select a step
        <paper-slider min="0" max="[[_maxStepId]]" snaps step="1" value="{{curStepId}}">
        </paper-slider>
        <span class="step-num-text">Step [[_getStepNum(_podStatsMap)]]</span>
      </span>
    </div>
    <div class="pod-viewer-dashboard" hidden="[[_errorMessage]]">
      <div id="topo-graph">
        <topology-graph run-environment="[[_runEnvironment]]" data="[[_podStatsMap]]" metrics="[[_stepBreakdownLayers]]" active-bar="[[activeBar]]">
        </topology-graph>
      </div>
      <div id="channel-bars" class="bar-chart" hidden="[[!_channelDb]]">
        <div id="title">
          <div class="stack-title">Latency of Send and Recv channels</div>
          <p>(x-axis: channel id, y-axis: time (Âµs))
        </div>
        <stack-bar-chart data="[[_channelDb]]" stack-layers="[[_channelLayers]]" x-domain-func="[[_channelFunc]]" active-bar="{{activeBar}}"></stack-bar-chart>
      </div>
      <div id="all-reduce-bars" class="bar-chart" hidden="[[!_allReduceDb]]">
        <div id="title">
          <div class="stack-title">
            Duration of all-reduce op or custom fusion for all-reduce
          </div>
          <p>(x-axis: short names for all-reduces ops (a#) or fusion (f#), y-axis: time (Âµs))
        </div>
        <stack-bar-chart data="[[_allReduceDb]]" stack-layers="[[_allReduceLayers]]" x-domain-func="[[_allReduceFunc]]" active-bar="{{activeBar}}"></stack-bar-chart>
      </div>
      <div id="stack-bars" class="bar-chart" hidden="[[!_stepStats]]">
        <div id="title">
          <div class="stack-title">Step breakdown</div>
          <p>(x-axis: global chip id, core id, y-axis: time (Âµs))
        </div>
        <stack-bar-chart data="[[_stepStats]]" stack-layers="[[_stepBreakdownLayers]]" x-domain-func="[[_stepBreakdownFunc]]" active-bar="{{activeBar}}"></stack-bar-chart>
      </div>
    </div>
  </template>
  <script>//~~WEBPATH~~/pod-viewer/pod-viewer-dashboard.js
var Pm;Pm||(Pm={});
Polymer({is:"pod-viewer-dashboard",properties:{data:{type:Object,observer:"_dataChanged"},activeDetails:{type:Array,notify:!0},activeBar:{type:Object,notify:!0,observer:"_activeBarChanged"},curStepId:{type:Number,value:0},_podStatsMaps:{type:Object,computed:"_computePodStatsMaps(data)"},_maxStepId:{type:Number,computed:"_computeMaxStepId(_podStatsMaps)"},_errorMessage:{type:String,computed:"_computeErrorMessage(_maxStepId)"},_runEnvironment:{type:Object,computed:"_computeRunEnvironment(data)"},_stepBreakdownLayers:{type:Object,
value:function(){return[{key:"highFlopsComputeUs",label:"High flops compute"},{key:"lowFlopsComputeUs",label:"Low flops compute"},{key:"hostInfeedDurationUs",label:"Infeed"},{key:"hostOutfeedDurationUs",label:"Outfeed"},{key:"allReduceComputeDurationUs",label:"AllReduce compute"},{key:"allReduceSyncDurationUs",label:"AllReduce sync"},{key:"sendDurationUs",label:"Send"},{key:"recvDurationUs",label:"Recv"}]}},_podStatsMap:{type:Object,computed:"_computePodStatsMap(_podStatsMaps, curStepId, _stepBreakdownLayers)"},
_stepStats:{type:Array,value:null,computed:"_computeStepStats(_podStatsMap)"},_channelDb:{type:Array,value:null,computed:"_computeChannelDb(_podStatsMap)"},_allReduceDb:{type:Array,value:null,computed:"_computeAllReduceDb(_podStatsMap)"},_channelLayers:{type:Array,value:function(){return[{key:"durationUs",label:"Duration (s)"}]}},_allReduceLayers:{type:Array,value:function(){return[{key:"durationUs",label:"Duration (\u00b5s)"}]}},_stepBreakdownFunc:{type:Object,value:function(){return function(a){return"("+
a.chipId+", "+a.nodeId+")"}}},_channelFunc:{type:Object,value:function(){return function(a){return a.channelId}}},_allReduceFunc:{type:Object,value:function(){return function(a){if(a.name)return a=a.name.replace(/ll-reduce.|usion.|ll-reduce|usion/,""),1<a.length?a:a+"0"}}}},_computePodStatsMaps:function(a){return a?a.podStatsSequence.podStatsMap:[]},_computeRunEnvironment:function(a){if(a)return a.runEnvironment},_computeMaxStepId:function(a){return a.length-1},_computeErrorMessage:function(a){return 0<=
a?"":"WARNING: No step time measured. This might happen if your profile duration is too short, try increase profile duration to cover a full step. If you have an inference job or not use TpuEstimator, please skip this tool."},_populateLowFlopsCompute:function(a,b){if(a&&b){var c=a.podStatsPerCore,e;for(e in c){var f=c[e];if(f.hasOwnProperty("lowFlopsComputeUs"))break;f.lowFlopsComputeUs=f.totalDurationUs;for(var g=0;g<b.length;g++)1!=g&&(f[b[g].key]||(f[b[g].key]=0),f.lowFlopsComputeUs-=f[b[g].key])}return a}},
_computePodStatsMap:function(a,b,c){if(!(0>b||b>=a.length)&&c)return this._populateLowFlopsCompute(a[b],c)},_computeStepStats:function(a){if(a&&a.podStatsPerCore){var b=a.podStatsPerCore;return Object.keys(b).map(function(c){return b[c]}).sort(function(c,e){return c.chipId-e.chipId})}},_computeChannelDb:function(a){if(a&&a.channelDb&&!(0>=a.channelDb.length))return a.channelDb.slice().sort(function(b,c){return c.durationUs-b.durationUs})},_computeAllReduceDb:function(a){if(a&&a.allReduceOpDb&&!(0>=
a.allReduceOpDb.length))return a.allReduceOpDb.slice().sort(function(b,c){return c.durationUs-b.durationUs})},_dataChanged:function(a){a&&(this.curStepId=0)},_activeBarChanged:function(a){a&&(this.activeDetails=[a])},_getStepNum:function(a){return a?a.stepNum:0}});
</script>
</dom-module>





<script>//~~WEBPATH~~/iron-ajax/iron-request.html.js
Polymer({is:"iron-request",hostAttributes:{hidden:!0},properties:{xhr:{type:Object,notify:!0,readOnly:!0,value:function(){return new XMLHttpRequest}},response:{type:Object,notify:!0,readOnly:!0,value:function(){return null}},status:{type:Number,notify:!0,readOnly:!0,value:0},statusText:{type:String,notify:!0,readOnly:!0,value:""},completes:{type:Object,readOnly:!0,notify:!0,value:function(){return new Promise(function(a,b){this.resolveCompletes=a;this.rejectCompletes=b}.bind(this))}},progress:{type:Object,
notify:!0,readOnly:!0,value:function(){return{}}},aborted:{type:Boolean,notify:!0,readOnly:!0,value:!1},errored:{type:Boolean,notify:!0,readOnly:!0,value:!1},timedOut:{type:Boolean,notify:!0,readOnly:!0,value:!1}},get succeeded(){if(this.errored||this.aborted||this.timedOut)return!1;var a=this.xhr.status||0;return 0===a||200<=a&&300>a},send:function(a){var b=this.xhr;if(0<b.readyState)return null;b.addEventListener("progress",function(l){this._setProgress({lengthComputable:l.lengthComputable,loaded:l.loaded,
total:l.total});this.fire("iron-request-progress-changed",{value:this.progress})}.bind(this));b.addEventListener("error",function(l){this._setErrored(!0);this._updateStatus();this.rejectCompletes(a.rejectWithRequest?{error:l,request:this}:l)}.bind(this));b.addEventListener("timeout",function(l){this._setTimedOut(!0);this._updateStatus();this.rejectCompletes(a.rejectWithRequest?{error:l,request:this}:l)}.bind(this));b.addEventListener("abort",function(){this._setAborted(!0);this._updateStatus();var l=
Error("Request aborted.");this.rejectCompletes(a.rejectWithRequest?{error:l,request:this}:l)}.bind(this));b.addEventListener("loadend",function(){this._updateStatus();this._setResponse(this.parseResponse());if(this.succeeded)this.resolveCompletes(this);else{var l=Error("The request failed with status code: "+this.xhr.status);this.rejectCompletes(a.rejectWithRequest?{error:l,request:this}:l)}}.bind(this));this.url=a.url;var c=!1!==a.async;b.open(a.method||"GET",a.url,c);var e={json:"application/json",
text:"text/plain",html:"text/html",xml:"application/xml",arraybuffer:"application/octet-stream"}[a.handleAs],f=a.headers||Object.create(null),g=Object.create(null),h;for(h in f)g[h.toLowerCase()]=f[h];f=g;e&&!f.accept&&(f.accept=e);Object.keys(f).forEach(function(l){/[A-Z]/.test(l)&&Polymer.Base._error("Headers must be lower case, got",l);b.setRequestHeader(l,f[l])},this);if(c){b.timeout=a.timeout;c=a.handleAs;if(a.jsonPrefix||!c)c="text";b.responseType=b._responseType=c;a.jsonPrefix&&(b._jsonPrefix=
a.jsonPrefix)}b.withCredentials=!!a.withCredentials;c=this._encodeBodyObject(a.body,f["content-type"]);b.send(c);return this.completes},parseResponse:function(){var a=this.xhr,b=a.responseType||a._responseType,c=!this.xhr.responseType,e=a._jsonPrefix&&a._jsonPrefix.length||0;try{switch(b){case "json":if(c||void 0===a.response)try{return JSON.parse(a.responseText)}catch(f){return console.warn("Failed to parse JSON sent from "+a.responseURL),null}return a.response;case "xml":return a.responseXML;case "blob":case "document":case "arraybuffer":return a.response;
default:if(e)try{return JSON.parse(a.responseText.substring(e))}catch(f){return console.warn("Failed to parse JSON sent from "+a.responseURL),null}return a.responseText}}catch(f){this.rejectCompletes(Error("Could not parse response. "+f.message))}},abort:function(){this._setAborted(!0);this.xhr.abort()},_encodeBodyObject:function(a,b){if("string"==typeof a)return a;switch(b){case "application/json":return JSON.stringify(a);case "application/x-www-form-urlencoded":return this._wwwFormUrlEncode(a)}return a},
_wwwFormUrlEncode:function(a){if(!a)return"";var b=[];Object.keys(a).forEach(function(c){b.push(this._wwwFormUrlEncodePiece(c)+"\x3d"+this._wwwFormUrlEncodePiece(a[c]))},this);return b.join("\x26")},_wwwFormUrlEncodePiece:function(a){return null!==a&&void 0!==a&&a.toString?encodeURIComponent(a.toString().replace(/\r?\n/g,"\r\n")).replace(/%20/g,"+"):""},_updateStatus:function(){this._setStatus(this.xhr.status);this._setStatusText(void 0===this.xhr.statusText?"":this.xhr.statusText)}});
</script>



<script>//~~WEBPATH~~/google-chart/google-chart-loader.html.js
(function(){var a={area:{ctor:"AreaChart"},bar:{ctor:"BarChart"},"md-bar":{ctor:"Bar",pkg:"bar"},bubble:{ctor:"BubbleChart"},calendar:{ctor:"Calendar",pkg:"calendar"},candlestick:{ctor:"CandlestickChart"},column:{ctor:"ColumnChart"},combo:{ctor:"ComboChart"},gauge:{ctor:"Gauge",pkg:"gauge"},geo:{ctor:"GeoChart"},histogram:{ctor:"Histogram"},line:{ctor:"LineChart"},"md-line":{ctor:"Line",pkg:"line"},org:{ctor:"OrgChart",pkg:"orgchart"},pie:{ctor:"PieChart"},sankey:{ctor:"Sankey",pkg:"sankey"},scatter:{ctor:"ScatterChart"},
"md-scatter":{ctor:"Scatter",pkg:"scatter"},"stepped-area":{ctor:"SteppedAreaChart"},table:{ctor:"Table",pkg:"table"},timeline:{ctor:"Timeline",pkg:"timeline"},treemap:{ctor:"TreeMap",pkg:"treemap"},wordtree:{ctor:"WordTree",namespace:"visualization",pkg:"wordtree"}},b={},c={},e={};Polymer({is:"google-chart-loader",properties:{packages:{type:Array,value:function(){return[]},observer:"_loadPackages"},type:{type:String,observer:"_loadPackageForType"}},get _corePackage(){return c.corechart?c.corechart:
this._loadPackages(["corechart"]).then(function(f){return f[0]})},_loadPackagesDebounce:function(){this.debounce("loadPackages",function(){var f=Object.keys(b);f.length&&(b={},google.charts.load("current",{packages:f,language:document.documentElement.lang||"en"}),google.charts.setOnLoadCallback(function(){f.forEach(function(g){this.fire("loaded",g);e[g](google.visualization)}.bind(this))}.bind(this)))},100)},_loadPackages:function(f){var g=[];f.forEach(function(h){c[h]||(b[h]=!0,c[h]=new Promise(function(l){e[h]=
l}),this._loadPackagesDebounce());g.push(c[h])}.bind(this));return Promise.all(g)},_loadPackageForType:function(f){var g=a[f];return g?this._loadPackages([g.pkg||"corechart"]).then(function(){return(google[g.namespace]||google[0===f.indexOf("md-")?"charts":"visualization"])[g.ctor]}):Promise.reject("This chart type is not yet supported: "+f)},create:function(f,g){return this._loadPackageForType(f).then(function(h){return new h(g)})},fireOnChartEvent:function(f,g,h){return this._corePackage.then(function(l){(h?
l.events.addOneTimeListener:l.events.addListener)(f,g,function(n){this.fire("google-chart-"+g,{chart:f,data:n})}.bind(this))}.bind(this))},dataTable:function(f){return this._corePackage.then(function(g){return null==f?new g.DataTable:f.getNumberOfRows?f:f.cols?new g.DataTable(f):0<f.length?g.arrayToDataTable(f):0===f.length?Promise.reject("Data was empty."):Promise.reject("Data format was not recognized.")})},dataView:function(f){return this._corePackage.then(function(g){return new g.DataView(f)})},
query:function(f,g){return this._corePackage.then(function(h){return new h.Query(f,g)})}})})();
</script>

<dom-module id="google-chart-styles">
  <template>
    <style>
      :host {
        display: -webkit-flex;
        display: -ms-flex;
        display: flex;
        margin: 0;
        padding: 0;
        width: 400px;
        height: 300px;
      }

      :host([type="gauge"]) {
        width: 300px;
        height: 300px;
      }

      #chartdiv {
        width: 100%;
      }
    </style>
  </template>
</dom-module>



<dom-module id="google-chart">
  <template>
    <style include="google-chart-styles"></style>
    <google-chart-loader id="loader" type="[[type]]"></google-chart-loader>
    <div id="chartdiv"></div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/google-chart/google-chart.html.js
Polymer({is:"google-chart",properties:{type:{type:String,value:"column",observer:"_typeChanged"},events:{type:Array,value:function(){return[]}},options:{type:Object},cols:{type:Array,observer:"_rowsOrColumnsChanged"},rows:{type:Array,observer:"_rowsOrColumnsChanged"},data:{type:String,observer:"_dataChanged"},view:{type:Object,observer:"_viewChanged"},selection:{type:Array,notify:!0,observer:"_setSelection"},drawn:{type:Boolean,readOnly:!0,value:!1}},observers:["_draw(_chart, _dataView)","_subOptionChanged(options.*)"],
listeners:{"google-chart-select":"_updateSelection","google-chart-ready":"_onChartReady"},_chart:null,_dataView:null,_selection:null,_typeChanged:function(){this.$.loader.create(this.type,this.$.chartdiv).then(function(a){var b=this.$.loader;Object.keys(this.events.concat(["select","ready"]).reduce(function(c,e){c[e]=!0;return c},{})).forEach(function(c){b.fireOnChartEvent(a,c)});this._setDrawn(!1);this._chart=a}.bind(this))},_subOptionChanged:function(a){this.options=a.base;this.debounce("optionChangeRedraw",
function(){this.redraw()},5)},_setSelection:function(){this.drawn&&this.selection&&this.selection!==this._selection&&(this._chart.setSelection&&this._chart.setSelection(this.selection),this._selection=this.selection)},_updateSelection:function(){this.selection=this._selection=this._chart.getSelection()},_onChartReady:function(){this._setDrawn(!0);this._selection=null;this._setSelection()},redraw:function(){this._chart&&this._dataView&&this._draw(this._chart,this._dataView)},_draw:function(a,b){if(null!=
a&&null!=b)try{this._setDrawn(!1),a.draw(b,this.options||{})}catch(c){this.$.chartdiv.innerHTML=c}},get imageURI(){return this._chart?this._chart.getImageURI():null},_viewChanged:function(a){a&&(this._dataView=a)},_rowsOrColumnsChanged:function(){var a=this.rows,b=this.cols;a&&b&&this.$.loader.dataTable().then(function(c){b.forEach(function(e){c.addColumn(e)});c.addRows(a);return c}.bind(this)).then(this.$.loader.dataView.bind(this.$.loader)).then(function(c){this._dataView=c}.bind(this)).catch(function(c){this.$.chartdiv.innerHTML=
c}.bind(this))},_dataChanged:function(a){if(a){var b=!1;try{a=JSON.parse(a)}catch(c){b="string"==typeof a||a instanceof String}a=b?document.createElement("iron-request").send({url:a,handleAs:"json"}).then(function(c){return c.response}):Promise.resolve(a);a.then(this.$.loader.dataTable.bind(this.$.loader)).then(this.$.loader.dataView.bind(this.$.loader)).then(function(c){this._dataView=c}.bind(this))}},attached:function(){var a=document.createElement("script");a.src="https://www.gstatic.com/charts/loader.js";
document.head.appendChild(a)}});
</script>


<dom-module id="google-chart-demo">
  <template>
    <style>
      code {
        color: #007000;
      }
      google-chart {
        height: 300px;
        width: 400px;
      }
    </style>
    <div id="demo-body">
      <p>Website traffic data by country from an external JSON resource where
         the data is in raw DataTable format.
      <google-chart type="column" options="{&quot;title&quot;: &quot;Visitors by Country&quot;, &quot;legend&quot;: &quot;none&quot;}" data="[[_data]]">
      </google-chart>
    </div>
  </template>

  <script>//~~WEBPATH~~/google-chart/google-chart-demo.html.js
Polymer({is:"google-chart-demo",properties:{_data:{type:Object,observer:"_updateView"}}});
</script>
</dom-module>






<dom-module id="tf-plugin-dialog">
  <template>
    
    <template is="dom-if" if="[[_open]]">
      <div id="dashboard-backdrop"></div>
    </template>
    <paper-dialog id="dialog" modal opened="{{_open}}" with-backdrop="[[_useNativeBackdrop]]">
      <h2 id="dialog-title">[[_title]]</h2>
      <div class="custom-message">[[_customMessage]]</div>
    </paper-dialog>
  </template>
  <style>
    /** We rely on a separate `_hidden` property instead of directly making use
        of the `_open` attribute because this CSS specification may strangely
        affect other elements throughout TensorBoard. See #899. */
    #dashboard-backdrop {
      background: rgba(0, 0, 0, 0.6);
      width: 100%;
      height: 100%;
    }

    #dialog-title {
      padding-bottom: 15px;
    }

    .custom-message {
      margin-top: 0;
      margin-bottom: 15px;
    }
  </style>
  <script>//~~WEBPATH~~/tf-tensorboard/plugin-dialog.html.js
Polymer({is:"tf-plugin-dialog",properties:{_title:{type:String,value:null},_customMessage:{type:String,value:null},_open:{type:Boolean},_hidden:{type:Boolean,computed:"_computeHidden(_open)",reflectToAttribute:!0},_useNativeBackdrop:{type:Boolean,value:!1,readOnly:!0}},openNoTensorFlowDialog:function(){this.openDialog("This plugin is disabled without TensorFlow",'To enable this plugin in TensorBoard, install TensorFlow with "pip install tensorflow" or equivalent.')},openOldTensorFlowDialog:function(a){this.openDialog("This plugin is disabled without TensorFlow "+
a,"To enable this plugin in TensorBoard, install TensorFlow "+a+' or greater with "pip install tensorflow" or equivalent.')},openDialog:function(a,b){this.set("_title",a);this.set("_customMessage",b);this.$.dialog.open()},closeDialog:function(){this.$.dialog.close()},_computeHidden:function(a){return!a}});
</script>
</dom-module>





<dom-module id="tf-profile-dashboard">
<template>
<template is="dom-if" if="[[_isState(_topLevelState, 'IN_COLAB')]]">
  <div style="max-width: 540px; margin: 80px auto 0 auto;">
    <h3>Profiling isnât supported in Colab yet.</h3>
    <p>
      Please see
      <a href="https://github.com/tensorflow/tensorboard/issues/1913" rel="noopener" target="_blank">GitHub issue #1913</a>
      for more information.
    
  </div>
</template>
<paper-toast id="toast" duration="0" text="" always-on-top>
  <paper-button onclick="toast.toggle()" class="yellow-button">Close now!</paper-button>
</paper-toast>
<tf-plugin-dialog id="initialDialog"></tf-plugin-dialog>
<paper-dialog id="captureProfileDialog" modal>
  <paper-input label="Profiler Service URL or TPU name" always-float-label placeholder="localhost:6009" value="{{_profilerServiceAddress}}" auto-validate required></paper-input>
  <label id="profiler-address-type-label">Address Type:</label>
  <paper-radio-group selected="{{_profilerServiceAddressType}}" aria-labelledby="profiler-address-type-label">
    <paper-radio-button name="ip-address">IP Address</paper-radio-button>
    <paper-radio-button name="tpu-name">TPU Name</paper-radio-button>
  </paper-radio-group>
  <paper-input label="Profiling Duration (milliseconds)" always-float-label type="number" min="1" max="600000" auto-validate pattern="[0-9]+" error-message="Input is not an integer between 1 to 600000" required value="{{_profileDuration}}"></paper-input>

  <paper-input label="Automatically retry N times when no trace event is collected" always-float-label type="number" min="0" max="100" auto-validate pattern="[0-9]+" error-message="Input is not an integer between 0 to 100" required value="{{_profileNumRetry}}"></paper-input>

  <div hidden="{{!_shouldShowTpuOptions(_profilerServiceAddressType)}}">
    <paper-checkbox checked="{{_profileIncludeDatasetOps}}">Trace dataset ops</paper-checkbox>
    <paper-input label="Subset of worker TPUs to profile (optional)" always-float-label placeholder="List of IPs, e.g. 10.4.1.2,10.4.1.3" value="{{_profileWorkerList}}"></paper-input>
  </div>
  <div class="buttons">
    <paper-button dialog-confirm raised on-tap="_captureProfile" disabled$="[[_shouldDisableCaptureProfileButton(_profilerServiceAddress, _profileDuration, _profileNumRetry)]]">
        Capture</paper-button>
    <paper-button dialog-confirm>Close</paper-button>
  </div>
</paper-dialog>
<template is="dom-if" if="[[_isState(_topLevelState, 'LOADING')]]">
  <div id="progress-bar">
    <div id="progress-msg">[[progress.msg]]</div>
    <paper-progress value="[[progress.value]]"></paper-progress>
  </div>
</template>
<template is="dom-if" if="[[_isState(_topLevelState, 'DATA_NOT_FOUND')]]">
  <div style="max-width: 540px; margin: 80px auto 0 auto;">
    <h3>No profile data was found.</h3>

    <paper-button raised on-tap="_openCaptureProfileDialog">Capture Profile</paper-button>
    <paper-spinner class="capture-spinner" active="[[_capturingProfile]]"></paper-spinner>

    <p>If you have a model running on CPU, GPU, or Google Cloud TPU, you may be
        able to use the above button to capture a profile.
    <p>If youâre a CPU or GPU user, please use the IP address option. You may want to check out the
        <a href="https://colab.research.google.com/github/tensorflow/tensorboard/blob/master/docs/r2/tensorboard_profiling_keras.ipynb" rel="noopener" target="_blank">tutorial</a> on how to
        start a TensorFlow profiler server and profile a Keras model on a GPU.
    <p>If you're a TPU user, please use the TPU name option and you may want to check out the
        <a href="https://cloud.google.com/tpu/docs/cloud-tpu-tools" rel="noopener" target="_blank">tutorial</a>
        on how to interpreting the profiling results.
    <p>If you think profiling is done properly, please see the page of
        <a href="https://cloud.google.com/tpu/docs/troubleshooting" rel="noopener" target="_blank">Google Cloud TPU Troubleshooting and FAQ</a>
        and consider filing an issue on GitHub.
  </div>
</template>
<template is="dom-if" if="[[_isState(_topLevelState, 'ACTIVE')]]">
  <tf-dashboard-layout>
  <div class="sidebar">
    <div class="allcontrols">
      <div class="sidebar-section">
        <paper-button raised on-tap="_openCaptureProfileDialog">Capture Profile</paper-button>
	<paper-spinner class="capture-spinner" active="[[_capturingProfile]]"></paper-spinner>
      </div>
      <div class="sidebar-section">
        <div class="title">Runs <span class="counter">([[_datasets.length]])</span></div>
        <paper-dropdown-menu no-label-float no-animations noink horizontal-align="left">
          <paper-listbox id="list_box_run" class="dropdown-content" selected="{{selectedDatasetIndex}}">
            <template id="run_items" is="dom-repeat" items="[[_datasets]]">
              <paper-item>[[item.name]]</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>
      </div>
      <div class="sidebar-section">
        <div class="title">Tools <span class="counter">([[_activeToolsList.length]])</span></div>
        <paper-dropdown-menu no-label-float no-animations noink horizontal-align="left">
          <paper-listbox id="list_box_tool" class="dropdown-content" selected="{{selectedToolIndex}}">
            <template id="tool_items" is="dom-repeat" items="[[_activeToolsList]]">
              <paper-item>[[item]]</paper-item>
            </template>
            <template is="dom-if" if="[[!_hasActiveTools()]]" restamp="true">
              <paper-item>None</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>
      </div>
      <div class="sidebar-section">
        <div class="title">Hosts <span class="counter">([[_activeHostsList.length]])</span></div>
        <paper-dropdown-menu no-label-float no-animations noink horizontal-align="left">
          <paper-listbox id="list_box_host" class="dropdown-content" selected="{{selectedHostIndex}}">
            <template id="host_items" is="dom-repeat" items="[[_activeHostsList]]">
              <paper-item>[[_getHostDisplayName(item)]]</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>
      </div>
      <div class="sidebar-section details-container">
        <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'op_profile')]]" restamp="true">
          <tf-op-details hidden="[[!_activeOpDetails]]" node="[[_activeOpDetails]]">
        </tf-op-details></template>
        <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'memory_viewer')]]" restamp="true">
          <buffer-details hidden="[[!_activeBufferDetails]]" node="[[_activeBufferDetails]]"></buffer-details>
        </template>
        <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'pod_viewer')]]" restamp="true">
          <details-card hidden="[[!_activePodDetails]]" nodes="[[_activePodDetails]]"></details-card>
      </template></div>
    </div>
  </div>
  <div class="center">
    <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'trace_viewer')]]" restamp="true">
      <iframe id="tv_iframe" height="100%" width="100%" src$="[[_traceDataUrl]]">
      </iframe>
    </template>
    <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'op_profile')]]" restamp="true">
      <tf-op-profile _data="[[_opProfileData]]" active="{{_activeOpDetails}}"></tf-op-profile>
    </template>
    <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'input_pipeline_analyzer')]]" restamp="true">
      <input-pipeline-analyzer _data="[[_inputPipelineData]]"></input-pipeline-analyzer>
    </template>
    <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'overview_page')]]" restamp="true">
      <overview-page _data="[[_overviewPageData]]"></overview-page>
    </template>
    <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'pod_viewer')]]" restamp="true">
      <pod-viewer-dashboard data="[[_podViewerData]]" active-details="{{_activePodDetails}}"></pod-viewer-dashboard>
    </template>
    <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'memory_viewer')]]" restamp="true">
      <memory-viewer-dashboard _data="[[_memoryViewerData]]" active="{{_activeBufferDetails}}"></memory-viewer-dashboard>
    </template>
    <template is="dom-if" if="[[_isCurrentTool(_toolInScope, 'google_chart_demo')]]" restamp="true">
      <google-chart-demo _data="[[_googleChartDemoData]]"></google-chart-demo>
    </template>
  </div>
  </tf-dashboard-layout>
</template>
<style include="dashboard-style"></style>

<style>
  .center {
    position: relative;
    height: 100%;
  }
  iframe {
    position: absolute;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
  }
  #progress-bar {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
    position: absolute;
    top: 40px;
    left: 0;
    font-size: 13px;
  }
  #progress-msg {
    width: 400px;
    margin-bottom: 5px;
  }
  paper-progress {
    width: 400px;
    --paper-progress-height: 6px;
    --paper-progress-active-color: #f3913e;
  }
  paper-dropdown-menu {
    width: 100%;
  }
  .details-container {
    padding-right: 5px;
  }
  tf-op-details,
  buffer-details,
  details-card {
    width: 100%;
    will-change: transform;
  }
  .yellow-button {
    color: #eeff41;
    text-transform: none;
  }
  .capture-spinner {
    padding-left: 5px;
    vertical-align: middle;
  }
</style>

</template>
<script>//~~WEBPATH~~/tf-profile-dashboard/tf-profile-dashboard.html.js
Polymer({is:"tf-profile-dashboard",properties:{_requestManager:{type:Object,value:function(){return new Rk.RequestManager}},_isAttached:Boolean,_isAvailable:Boolean,_initialized:Boolean,_dataNotFound:Boolean,_datasets:{type:Array,notify:!0,observer:"_datasetsChanged"},_activeToolsList:{type:Array,computed:"_getActiveToolsList(selectedDatasetIndex, _datasets)",observer:"_activeToolsChanged"},_activeHostsList:{type:Array,observer:"_activeHostsChanged"},_inColab:{type:Boolean,value:function(){return!!(window.TENSORBOARD_ENV||
{}).IN_COLAB},readOnly:!0},_topLevelState:{type:String,computed:"_computeTopLevelState(_inColab, _dataNotFound, progress)",readOnly:!0},progress:{type:Object,notify:!0},selectedDatasetIndex:{type:Number,notify:!0,value:0},selectedToolIndex:{type:Number,notify:!0,value:0},selectedHostIndex:{type:Number,notify:!0,value:0},traceViewerBaseUrl:{type:String,value:"trace_viewer_index.html"},_profilerServiceAddress:String,_profilerServiceAddressType:{type:String,value:"ip-address"},_profileDuration:{type:String,
value:"1000"},_profileNumRetry:{type:String,value:"3"},_profileWorkerList:{type:String},_profileIncludeDatasetOps:{type:Boolean,value:!0},_traceDataUrl:{type:String,value:""},_opProfileData:{type:Object},_inputPipelineData:{type:Object},_overviewPageData:{type:Object},_memoryViewerData:{type:Object},_podViewerData:{type:Object},_googleChartDemoData:{type:Object},_selectedDatasetName:{type:String,notify:!0,computed:"_getSelectedDatasetName(selectedDatasetIndex, _datasets)"},_selectedToolName:{type:String,
notify:!0,computed:"_getSelected(selectedToolIndex, _activeToolsList)"},_selectedHostName:{type:String,notify:!0,computed:"_getSelected(selectedHostIndex, _activeHostsList)"},_toolInScope:{type:String},_activeOpDetails:{type:Object,value:function(){}},_activeBufferDetails:{type:Object,value:function(){}},_activePodDetails:{type:Array},_capturingProfile:{type:Boolean,value:!1}},reload:function(){},ready:function(){},observers:["_maybeInitializeDashboard(_isAttached, _isAvailable)","_maybeUpdateData(_selectedHostName)",
"_maybeUpdateActiveHosts(_selectedDatasetName, _selectedToolName)"],attached:function(){var a=this;this.set("_isAttached",!0);this._requestManager.request(Rk.getRouter().pluginsListing()).then(function(b){"profile"in b?(a.$.initialDialog.closeDialog(),a.set("_isAvailable",!0)):(a.$.initialDialog.openOldTensorFlowDialog("1.14"),a.set("_isAvailable",!1))})},detached:function(){this.set("_isAttached",!1)},_openCaptureProfileDialog:function(){this.$.captureProfileDialog.open()},_shouldDisableCaptureProfileButton:function(a,
b,c){return!a||""===b||""===c},_shouldShowTpuOptions:function(a){return"tpu-name"==a},_captureProfile:function(){var a=this;this._capturingProfile=!0;var b=Rk.addParams(Rk.getRouter().pluginRoute("profile","/capture_profile"),{service_addr:this._profilerServiceAddress.trim(),is_tpu_name:"tpu-name"==this._profilerServiceAddressType,duration:this._profileDuration,worker_list:this._profileWorkerList,include_dataset_ops:this._profileIncludeDatasetOps,num_retry:this._profileNumRetry});this._requestManager.request(b).then(function(c){a._capturingProfile=
!1;null!=c.error?a._showToast("Failed to capture profile: "+c.error):a._showToast(c.result)}).catch(function(c){a._capturingProfile=!1;a._showToast("Failed to capture profile: "+c)})},_showToast:function(a){this.$.toast.text=a;this.$.toast.open()},_maybeInitializeDashboard:function(a,b){if(!this._initialized&&a&&b){this._initialized=!0;var c=Rk.getRouter().pluginRoute("profile","/tools");this.set("progress",{value:0,msg:""});var e=this,f=tf.profile.util.getTracker(this);tf.profile.util.runTask("Loading datasets",
20,function(){console.log("start counting");return e._requestManager.request(c)},f).then(function(g){return tf.profile.util.runTask("Processing datasets",70,function(){return new Promise(function(h){e._processRunToTool(g);h(null)})},f)}).then(function(){return tf.profile.util.runTask("Done",10,function(){return null},f)})}},_processRunToTool:function(a){a=_.map(a,function(b,c){return{name:c,activeTools:b}});a.sort(function(b,c){return 0-Pk.compareTagNames(b.name,c.name)});this.set("_dataNotFound",
0===a.length);this.set("_datasets",a)},_getSelected:function(a,b){if(null!=a)return b&&0<=a&&a<b.length?b[a]:null},_getSelectedDatasetName:function(a,b){if(null!=a)return b&&0<=a&&a<b.length?b[a].name:""},_getActiveToolsList:function(a,b){if(null!=a)return b&&0<=a&&a<b.length?(this.selectedToolIndex=0,b[a].activeTools):[]},_maybeUpdateData:function(a){if(null!=a){var b=this._selectedDatasetName,c=this._selectedToolName;if(null!=b&&null!=c)if(this._toolInScope="undefined",c.startsWith("trace_viewer")){var e=
Rk.addParams(Rk.getRouter().pluginRoute("profile","/data"),{tag:c,run:b,host:a}),f=c.endsWith("@");this._traceDataUrl=this.traceViewerBaseUrl+"?trace_data_url\x3d"+encodeURIComponent(e)+"\x26is_streaming\x3d"+f;this._toolInScope="trace_viewer"}else{this.set("progress",{value:0,msg:""});var g=this,h=tf.profile.util.getTracker(this);tf.profile.util.runTask("Reading "+c+" tool data",20,function(){return g._requestManager.request(Rk.addParams(Rk.getRouter().pluginRoute("profile","/data"),{tag:c,host:a,
run:b}))},h).catch(function(){}).then(function(l){return tf.profile.util.runTask("Done",80,function(){g._updateToolData(c,l)},h)})}}},_updateToolData:function(a,b){switch(a){case "op_profile":this._opProfileData=b;this._toolInScope="op_profile";break;case "input_pipeline_analyzer":this._inputPipelineData=b;this._toolInScope="input_pipeline_analyzer";break;case "overview_page":this._overviewPageData=b;this._toolInScope="overview_page";break;case "memory_viewer":this._memoryViewerData=b;this._toolInScope=
"memory_viewer";break;case "pod_viewer":this._podViewerData=b;this._toolInScope="pod_viewer";break;case "google_chart_demo":this._googleChartDemoData=b,this._toolInScope="google_chart_demo"}},_maybeUpdateActiveHosts:function(a,b){var c=this;if(null==a||null==b)return null;a=Rk.addParams(Rk.getRouter().pluginRoute("profile","/hosts"),{tag:b,run:a});this._requestManager.request(a).then(function(e){c.set("_activeHostsList",e.sort(function(f,g){return Pk.compareTagNames(f,g)}))})},_datasetsChanged:function(){this._datasets&&
(this.selectedDatasetIndex=0)},_activeToolsChanged:function(){this._activeToolsList&&this.async(function(){this.set("selectedToolIndex",-1);this.set("selectedToolIndex",0)}.bind(this))},_activeHostsChanged:function(){this._activeHostsList&&this.async(function(){this.set("selectedHostIndex",-1);this.set("selectedHostIndex",0)}.bind(this))},_isCurrentTool:function(a,b){return a==b},_hasActiveTools:function(){return this._activeToolsList&&0<this._activeToolsList.length?!0:!1},_getHostDisplayName:function(a){return null==
a?"":""==a?"default":a.slice(0,-1)},_computeTopLevelState:function(a,b,c){return a?"IN_COLAB":b?"DATA_NOT_FOUND":!c||100>c.value?"LOADING":"ACTIVE"},_isState:function(a,b){return a===b}});$k.registerDashboard({plugin:"profile",elementName:"tf-profile-dashboard",isReloadDisabled:!0});
</script>
</dom-module>














<dom-module id="tf-beholder-video">
  <template>

    <div id="container">
      <img id="video" src$="[[_imageURL]]">
    </div>

    <style>
      img {
        image-rendering: pixelated;
        margin-right: 10px;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-beholder-dashboard/tf-beholder-video.html.js
(function(){var a=Rk.getRouter().pluginRoute("beholder","/beholder-frame"),b=Rk.getRouter().pluginRoute("beholder","/ping");Polymer({is:"tf-beholder-video",properties:{fps:{type:Number,value:10,observer:"_fpsChanged"},pingSleep:{type:Number,value:1E3},xhrTimeout:{type:Number,value:2500},_imageURL:{type:String,value:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs\x3d"},_xhr:Object,_timer:Number,_isDead:Boolean},attached:function(){this.set("_imageURL",a);this._ping()},detached:function(){this._clear();
this.set("_imageURL","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs\x3d")},_ping:function(){this._clear();this._xhr=new XMLHttpRequest;this._xhr.open("GET",b,!0);this._xhr.timeout=this.xhrTimeout;this._xhr.onload=this._onPingLoad.bind(this);this._xhr.onerror=this._onPing.bind(this,!1,this.pingSleep);this._xhr.ontimeout=this._onPing.bind(this,!1,1);this._xhr.send(null)},_onPingLoad:function(){if(200==this._xhr.status){var c=JSON.parse(this._xhr.responseText);this._onPing("alive"==c.status,
this.pingSleep)}else this._onPing(!1,this.pingSleep)},_onPing:function(c,e){var f=this;c&&this._isDead&&this.set("_imageURL",a+"?t\x3d"+(new Date).getTime());this._isDead=!c;this._timer=window.setTimeout(function(){return f._ping()},e)},_clear:function(){this._timer&&(window.clearTimeout(this._timer),this._timer=null);this._xhr&&(this._xhr.readyState<XMLHttpRequest.DONE&&this._xhr.abort(),this._xhr=null)},_fpsChanged:function(c,e){0==c?this._clear():0==e&&this._ping()}})})();
</script>
</dom-module>




<dom-module id="tf-beholder-info">
  <template>
    <template is="dom-repeat" items="[[_items]]">
      <div class="section-info" style$="height: [[item.height]]px">
        <ul>
          <li>[[item.name]]</li>
          <li>shape: [[item.shape]]</li>
          <li>range: [ [[item.min]], [[item.max]] ] </li>
          <li>mean: [[item.mean]]</li>
        </ul>
      </div>
    </template>

    <style>
    .section-info {
      margin: 0 0 5px 0;
    }
    .section-info ul {
      list-style-type: none;
      margin: 0;
      padding-left: 10px;
    }
    </style>

  </template>

  <script>//~~WEBPATH~~/tf-beholder-dashboard/tf-beholder-info.html.js
(function(){var a=Rk.getRouter().pluginRoute("beholder","/section-info");Polymer({is:"tf-beholder-info",properties:{fps:{type:Number,value:10,observer:"_fpsChanged"},xhrTimeout:{type:Number,value:1E4},_items:{type:Array,value:function(){return[{name:"Loading..."}]}},_xhr:Object,_timer:Number},attached:function(){this._load()},detached:function(){this._clear()},_load:function(){this._clear();this._xhr=new XMLHttpRequest;this._xhr.open("GET",a,!0);this._xhr.timeout=this.xhrTimeout;this._xhr.onload=
this._onLoad.bind(this);this._xhr.onerror=this._retry.bind(this,this._getSleep());this._xhr.ontimeout=this._retry.bind(this,1);this._xhr.send(null)},_onLoad:function(){if(200==this._xhr.status){var b=JSON.parse(this._xhr.responseText);console.assert(Array.isArray(b),"Expected response to be in an array");this._items=b}this._retry(this._getSleep())},_retry:function(b){this._timer=window.setTimeout(this._load.bind(this),b)},_getSleep:function(){return 1E3/(0===this.fps?1:this.fps)},_clear:function(){this._timer&&
(window.clearTimeout(this._timer),this._timer=null);this._xhr&&(this._xhr.readyState<XMLHttpRequest.DONE&&this._xhr.abort(),this._xhr=null)},_fpsChanged:function(b,c){0==b?this._clear():0==c&&this._load()}})})();
</script>
</dom-module>


<dom-module id="tf-beholder-dashboard">
  <template>
    <tf-plugin-dialog id="initialDialog"></tf-plugin-dialog>
    <tf-dashboard-layout>
      <div class="sidebar">
        <template is="dom-if" if="[[_controls_disabled]]">
          <div class="sidebar-section">
            <p class="controls-disabled-message">
              Controls disabled: directory is not writeable.
            
            <p class="disclaimer">
              Beholder requires write access to the log directory in order
              to communicate visualization changes to the <code>Beholder</code>
              instance in your model.
            
          </div>
        </template>
        <div class="sidebar-section">
          <h3>Values</h3>
          <paper-radio-group id="valuesSelector" selected="{{_values}}">
            <paper-radio-button name="trainable_variables" disabled="[[_controls_disabled]]">
              <pre>tf.trainable_variables()</pre>
            </paper-radio-button>
            <paper-radio-button id="option-arrays" name="arrays" disabled="[[_controls_disabled]]">
              <pre>b.update(arrays=[NP_ARRAYS])</pre>
            </paper-radio-button>
            <paper-radio-button id="option-frames" name="frames" disabled="[[_controls_disabled]]">
              <pre>b.update(frame=NP_ARRAY)</pre>
            </paper-radio-button>
          </paper-radio-group>

          <template is="dom-if" if="[[_valuesNotFrame(_values)]]">
            <paper-checkbox checked="{{_showAll}}" disabled="[[_controls_disabled]]">Show all data <i>(can be resource intensive)</i></paper-checkbox>
          </template>
        </div>

        <template is="dom-if" if="[[_valuesNotFrame(_values)]]">

          <div class="sidebar-section">
            <h3>Mode</h3>
            <paper-radio-group id="modeSelector" selected="{{_mode}}">
              <paper-radio-button name="current" disabled="[[_controls_disabled]]">
                current values
              </paper-radio-button>
              <paper-radio-button name="variance" disabled="[[_controls_disabled]]">
                variance over train steps
              </paper-radio-button>
            </paper-radio-group>
            <template is="dom-if" if="[[_varianceSelected(_mode)]]">
              <h4>Variance timesteps: {{_windowSize}}</h4>
              <paper-slider id="windowSlider" value="{{_windowSize}}" type="number" step="1" min="2" max="20" pin="true" disabled="[[_controls_disabled]]">
              </paper-slider>
            </template>
          </div>

          <div class="sidebar-section">
            <h3>Image scaling</h3>
            <paper-radio-group id="scalingSelector" selected="{{_scaling}}">

              <paper-radio-button id="option-layer" name="layer" disabled="[[_controls_disabled]]">
                per section
              </paper-radio-button>
              <paper-tooltip for="option-layer" position="right">
                Black is the lowest value in that section, white is that largest value in that section.
              </paper-tooltip>

              <paper-radio-button id="option-network" name="network" disabled="[[_controls_disabled]]">
                all sections
              </paper-radio-button>
              <paper-tooltip for="option-network" position="right">
                Black is the smallest value in all sections, white is the largest value in all sections.
              </paper-tooltip>
            </paper-radio-group>

            <div id="colormap-selection">
              <div id="colormap-selection-label">Colormap:</div>
              <paper-dropdown-menu no-label-float selected-item-label="{{_colormap}}" disabled="[[_controls_disabled]]">
                <paper-menu class="dropdown-content" selected="0">
                  <paper-item>magma</paper-item>
                  <paper-item>inferno</paper-item>
                  <paper-item>plasma</paper-item>
                  <paper-item>viridis</paper-item>
                  <paper-item>grayscale</paper-item>
                </paper-menu>
              </paper-dropdown-menu>
            </div>
          </div>

        </template>

        <div class="sidebar-section">
          <h3>Updates per second: {{_FPS}}</h3>
          <paper-slider id="FPSSlider" value="{{_FPS}}" type="number" step="1" min="0" max="30" pin="true" disabled="[[_controls_disabled]]">
          </paper-slider>
        </div>

        <div class="sidebar-section">
          <div>
            <paper-button class="x-button" id="record_button" on-tap="_toggleRecord" disabled="[[_controls_disabled]]">
              [[_recordText]]
            </paper-button>
          </div>
        </div>

        <div class="sidebar-section">
          <p class="disclaimer">Note: Beholder currently only works well on local file systems.
        </div>

      </div>
      <div class="center">

        <template is="dom-if" if="[[!_is_active]]">
          <div class="no-data-warning">
            <h3>No Beholder data was found.</h3>

            <p>Probable causes:
            <ul>
              <li>Your script isn't running.</li>
              <li>You aren't calling <code>beholder.update()</code>.</li>
            </ul>

            <p>To use Beholder, import and instantiate the <code>Beholder</code>
            class, and call its <code>update</code> method with a
            <code>Session</code> argument after every train step:

            <pre>from tensorboard.plugins.beholder import Beholder
beholder = Beholder(LOG_DIRECTORY)

# inside train loop
beholder.update(
  session=sess,
  arrays=list_of_np_arrays,  # optional argument
  frame=two_dimensional_np_array,  # optional argument
)</pre>
            <p>If using <code>tf.train.MonitoredSession</code>, you can use
            <code>BeholderHook</code>:

            <pre>from tensorboard.plugins.beholder import BeholderHook
beholder_hook = BeholderHook(LOG_DIRECTORY)
with MonitoredSession(..., hooks=[beholder_hook]) as sess:
  sess.run(train_op)</pre>

            <p>If you think everything is set up properly, please see
            <a href="https://github.com/tensorflow/tensorboard/blob/master/tensorboard/plugins/beholder/README.md">the README</a>
            for more information and consider filing an issue on GitHub.

            <p class="disclaimer">Note: Beholder currently only works well on local file systems.
          </div>
        </template>

        <template is="dom-if" if="[[_is_active]]">
          <tf-beholder-video id="video" fps="[[_FPS]]"></tf-beholder-video>

          <template is="dom-if" if="[[_valuesNotFrame(_values)]]">
            <tf-beholder-info id="info" fps="[[_FPS]]">
            </tf-beholder-info>
          </template>
        </template>

      </div>
    </tf-dashboard-layout>
    <style include="dashboard-style"></style>
    <style>
      .center {
        height: 100%;
        display: flex;
        padding: 0;
      }

      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0;
      }

      paper-checkbox {
        display: block;
        padding: 4px;
      }

      paper-radio-button {
        display: flex;
        padding: 5px;

        --paper-radio-button-radio-container: {
          flex-grow: 0;
          flex-shrink: 0;
        }

        --paper-radio-button-label: {
          font-size: 13px;
          overflow: hidden;
          text-overflow: ellipsis;
        }
      }

      paper-radio-group {
        margin-top: 5px;
        width: 100%;
      }

      paper-slider {
        --paper-slider-active-color: var(--tb-orange-strong);
        --paper-slider-knob-color: var(--tb-orange-strong);
        --paper-slider-knob-start-border-color: var(--tb-orange-strong);
        --paper-slider-knob-start-color: var(--tb-orange-strong);
        --paper-slider-markers-color: var(--tb-orange-strong);
        --paper-slider-pin-color: var(--tb-orange-strong);
        --paper-slider-pin-start-color: var(--tb-orange-strong);
        flex-grow: 2;
      }

      pre {
        display: inline;
      }

      paper-button#record_button {
        color: #D32F2F;
      }

      paper-button#record_button.is-recording {
        background: #D32F2F;
        color: white;
      }

      .sidebar-section.beholder-dashboard:last-child {
        flex-grow: 0
      }

      #colormap-selection {
        display: flex;
        margin-top: 5px;
      }

      #colormap-selection-label {
        margin-top: 13px;
      }

      #colormap-selection paper-dropdown-menu {
        margin-left: 10px;
        --paper-input-container-focus-color: var(--tb-orange-strong);
        width: 105px;
      }

      h4 {
        font-size: 14px;
        font-weight: normal;
        margin: 5px 0;
      }

      p.disclaimer {
        color: #999;
        font-style: italic;
      }

      p.controls-disabled-message {
        color: #C00;
        font-weight: bold;
      }

      .sidebar {
        font-size: 14px;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-beholder-dashboard/tf-beholder-dashboard.html.js
Polymer({is:"tf-beholder-dashboard",properties:{_requestManager:{type:Object,value:function(){return new Rk.RequestManager(10,0)}},_isAvailable:Boolean,_values:{type:String,value:"trainable_variables",observer:"_configChanged"},_mode:{type:String,value:"variance",observer:"_configChanged"},_scaling:{type:String,value:"layer",observer:"_configChanged"},_windowSize:{type:Number,value:15,observer:"_configChanged"},_previousFPS:{type:Number,value:30},_FPS:{type:Number,value:10,observer:"_configChanged"},
_recordText:{type:String,value:"start recording"},_isRecording:{type:Boolean,value:!1,observer:"_configChanged"},_showAll:{type:Boolean,value:!1,observer:"_configChanged"},_colormap:{type:String,value:"magma",observer:"_configChanged"},_is_active:{type:Boolean,value:!1,observer:"_configChanged"},_controls_disabled:{type:Boolean,value:!1,observer:"_configChanged"}},_valuesNotFrame:function(a){return"frames"!==a},_varianceSelected:function(a){return"variance"===a},_configChanged:function(){if(this._is_active&&
!this._controls_disabled){for(var a=za([this._values,this._mode,this._scaling,this._windowSize,this._FPS,this._isRecording,this._showAll,this._colormap]),b=a.next();!b.done;b=a.next())if(b=b.value,"undefined"===typeof b||""===b)return;a=Rk.getRouter().pluginRoute("beholder","/change-config");this._requestManager.request(a,{values:this._values,mode:this._mode,scaling:this._scaling,window_size:this._windowSize,FPS:this._FPS,is_recording:this._isRecording,show_all:this._showAll,colormap:this._colormap})}},
_toggleRecord:function(){"start recording"==this._recordText?(this.set("_recordText","stop recording"),this.set("_isRecording",!0)):(this.set("_recordText","start recording"),this.set("_isRecording",!1));this.$.record_button.classList.toggle("is-recording")},attached:function(){var a=this;this._requestManager.request(Rk.getRouter().pluginsListing()).then(function(b){"beholder"in b?(a.$.initialDialog.closeDialog(),a.set("_isAvailable",!0)):(a.$.initialDialog.openNoTensorFlowDialog(),a.set("_isAvailable",
!1))})},ready:function(){this.reload()},reload:function(){var a=this;if(this._isAvailable){var b=Rk.getRouter().pluginRoute("beholder","/is-active");this._requestManager.request(b).then(function(c){a.set("_is_active",c.is_active);a.set("_controls_disabled",!c.is_config_writable)})}}});$k.registerDashboard({plugin:"beholder",elementName:"tf-beholder-dashboard",shouldRemoveDom:!0});
</script>
</dom-module>



<iron-iconset-svg name="av" size="24">
<svg><defs>
<g id="add-to-queue"><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12zm-5-7v2h-3v3h-2v-3H8v-2h3V7h2v3h3z" /></g>
<g id="airplay"><path d="M6 22h12l-6-6zM21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v-2H3V5h18v12h-4v2h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="album"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" /></g>
<g id="art-track"><path d="M22 13h-8v-2h8v2zm0-6h-8v2h8V7zm-8 10h8v-2h-8v2zm-2-8v6c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V9c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2zm-1.5 6l-2.25-3-1.75 2.26-1.25-1.51L3.5 15h7z" /></g>
<g id="av-timer"><path d="M11 17c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1zm0-14v4h2V5.08c3.39.49 6 3.39 6 6.92 0 3.87-3.13 7-7 7s-7-3.13-7-7c0-1.68.59-3.22 1.58-4.42L12 13l1.41-1.41-6.8-6.8v.02C4.42 6.45 3 9.05 3 12c0 4.97 4.02 9 9 9 4.97 0 9-4.03 9-9s-4.03-9-9-9h-1zm7 9c0-.55-.45-1-1-1s-1 .45-1 1 .45 1 1 1 1-.45 1-1zM6 12c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1z" /></g>
<g id="branding-watermark"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16h-9v-6h9v6z" /></g>
<g id="call-to-action"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3v-3h18v3z" /></g>
<g id="closed-caption"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z" /></g>
<g id="equalizer"><path d="M10 20h4V4h-4v16zm-6 0h4v-8H4v8zM16 9v11h4V9h-4z" /></g>
<g id="explicit"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h4v2h-4v2h4v2H9V7h6v2z" /></g>
<g id="fast-forward"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z" /></g>
<g id="fast-rewind"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z" /></g>
<g id="featured-play-list"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 8H3V9h9v2zm0-4H3V5h9v2z" /></g>
<g id="featured-video"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 9H3V5h9v7z" /></g>
<g id="fiber-dvr"><path d="M17.5 10.5h2v1h-2zm-13 0h2v3h-2zM21 3H3c-1.11 0-2 .89-2 2v14c0 1.1.89 2 2 2h18c1.11 0 2-.9 2-2V5c0-1.11-.89-2-2-2zM8 13.5c0 .85-.65 1.5-1.5 1.5H3V9h3.5c.85 0 1.5.65 1.5 1.5v3zm4.62 1.5h-1.5L9.37 9h1.5l1 3.43 1-3.43h1.5l-1.75 6zM21 11.5c0 .6-.4 1.15-.9 1.4L21 15h-1.5l-.85-2H17.5v2H16V9h3.5c.85 0 1.5.65 1.5 1.5v1z" /></g>
<g id="fiber-manual-record"><circle cx="12" cy="12" r="8" /></g>
<g id="fiber-new"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM8.5 15H7.3l-2.55-3.5V15H3.5V9h1.25l2.5 3.5V9H8.5v6zm5-4.74H11v1.12h2.5v1.26H11v1.11h2.5V15h-4V9h4v1.26zm7 3.74c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1V9h1.25v4.51h1.13V9.99h1.25v3.51h1.12V9h1.25v5z" /></g>
<g id="fiber-pin"><path d="M5.5 10.5h2v1h-2zM20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM9 11.5c0 .85-.65 1.5-1.5 1.5h-2v2H4V9h3.5c.85 0 1.5.65 1.5 1.5v1zm3.5 3.5H11V9h1.5v6zm7.5 0h-1.2l-2.55-3.5V15H15V9h1.25l2.5 3.5V9H20v6z" /></g>
<g id="fiber-smart-record"><g><circle cx="9" cy="12" r="8" /><path d="M17 4.26v2.09c2.33.82 4 3.04 4 5.65s-1.67 4.83-4 5.65v2.09c3.45-.89 6-4.01 6-7.74s-2.55-6.85-6-7.74z" /></g></g>
<g id="forward-10"><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.8 3H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.8-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" /></g>
<g id="forward-30"><path d="M9.6 13.5h.4c.2 0 .4-.1.5-.2s.2-.2.2-.4v-.2s-.1-.1-.1-.2-.1-.1-.2-.1h-.5s-.1.1-.2.1-.1.1-.1.2v.2h-1c0-.2 0-.3.1-.5s.2-.3.3-.4.3-.2.4-.2.4-.1.5-.1c.2 0 .4 0 .6.1s.3.1.5.2.2.2.3.4.1.3.1.5v.3s-.1.2-.1.3-.1.2-.2.2-.2.1-.3.2c.2.1.4.2.5.4s.2.4.2.6c0 .2 0 .4-.1.5s-.2.3-.3.4-.3.2-.5.2-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.4-.1-.6h.8v.2s.1.1.1.2.1.1.2.1h.5s.1-.1.2-.1.1-.1.1-.2v-.5s-.1-.1-.1-.2-.1-.1-.2-.1h-.6v-.7zm5.7.7c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5zM4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8z" /></g>
<g id="forward-5"><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.7.9l.2-2.2h2.4v.7h-1.7l-.1.9s.1 0 .1-.1.1 0 .1-.1.1 0 .2 0h.2c.2 0 .4 0 .5.1s.3.2.4.3.2.3.3.5.1.4.1.6c0 .2 0 .4-.1.5s-.1.3-.3.5-.3.2-.5.3-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.3-.1-.5h.8c0 .2.1.3.2.4s.2.1.4.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-.6l-.1-.2-.2-.2s-.2-.1-.3-.1h-.2s-.1 0-.2.1-.1 0-.1.1-.1.1-.1.1h-.6z" /></g>
<g id="games"><path d="M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z" /></g>
<g id="hd"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z" /></g>
<g id="hearing"><path d="M17 20c-.29 0-.56-.06-.76-.15-.71-.37-1.21-.88-1.71-2.38-.51-1.56-1.47-2.29-2.39-3-.79-.61-1.61-1.24-2.32-2.53C9.29 10.98 9 9.93 9 9c0-2.8 2.2-5 5-5s5 2.2 5 5h2c0-3.93-3.07-7-7-7S7 5.07 7 9c0 1.26.38 2.65 1.07 3.9.91 1.65 1.98 2.48 2.85 3.15.81.62 1.39 1.07 1.71 2.05.6 1.82 1.37 2.84 2.73 3.55.51.23 1.07.35 1.64.35 2.21 0 4-1.79 4-4h-2c0 1.1-.9 2-2 2zM7.64 2.64L6.22 1.22C4.23 3.21 3 5.96 3 9s1.23 5.79 3.22 7.78l1.41-1.41C6.01 13.74 5 11.49 5 9s1.01-4.74 2.64-6.36zM11.5 9c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5-1.12-2.5-2.5-2.5-2.5 1.12-2.5 2.5z" /></g>
<g id="high-quality"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 11H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm7-1c0 .55-.45 1-1 1h-.75v1.5h-1.5V15H14c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v4zm-3.5-.5h2v-3h-2v3z" /></g>
<g id="library-add"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z" /></g>
<g id="library-books"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z" /></g>
<g id="library-music"><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 5h-3v5.5c0 1.38-1.12 2.5-2.5 2.5S10 13.88 10 12.5s1.12-2.5 2.5-2.5c.57 0 1.08.19 1.5.51V5h4v2zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z" /></g>
<g id="loop"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z" /></g>
<g id="mic"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" /></g>
<g id="mic-none"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1.2-9.1c0-.66.54-1.2 1.2-1.2.66 0 1.2.54 1.2 1.2l-.01 6.2c0 .66-.53 1.2-1.19 1.2-.66 0-1.2-.54-1.2-1.2V4.9zm6.5 6.1c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" /></g>
<g id="mic-off"><path d="M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z" /></g>
<g id="movie"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z" /></g>
<g id="music-video"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03c-.02 1.64-1.35 2.97-3 2.97-1.66 0-3-1.34-3-3z" /></g>
<g id="new-releases"><path d="M23 12l-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z" /></g>
<g id="not-interested"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z" /></g>
<g id="note"><path d="M22 10l-6-6H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99l16-.01c1.1 0 2-.89 2-1.99v-8zm-7-4.5l5.5 5.5H15V5.5z" /></g>
<g id="pause"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" /></g>
<g id="pause-circle-filled"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z" /></g>
<g id="pause-circle-outline"><path d="M9 16h2V8H9v8zm3-14C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm1-4h2V8h-2v8z" /></g>
<g id="play-arrow"><path d="M8 5v14l11-7z" /></g>
<g id="play-circle-filled"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z" /></g>
<g id="play-circle-outline"><path d="M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="playlist-add"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z" /></g>
<g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z" /></g>
<g id="playlist-play"><path d="M19 9H2v2h17V9zm0-4H2v2h17V5zM2 15h13v-2H2v2zm15-2v6l5-3-5-3z" /></g>
<g id="queue"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z" /></g>
<g id="queue-music"><path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z" /></g>
<g id="queue-play-next"><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h2v-2H3V5h18v8h2V5c0-1.11-.9-2-2-2zm-8 7V7h-2v3H8v2h3v3h2v-3h3v-2h-3zm11 8l-4.5 4.5L18 21l3-3-3-3 1.5-1.5L24 18z" /></g>
<g id="radio"><path d="M3.24 6.15C2.51 6.43 2 7.17 2 8v12c0 1.1.89 2 2 2h16c1.11 0 2-.9 2-2V8c0-1.11-.89-2-2-2H8.3l8.26-3.34L15.88 1 3.24 6.15zM7 20c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm13-8h-2v-2h-2v2H4V8h16v4z" /></g>
<g id="recent-actors"><path d="M21 5v14h2V5h-2zm-4 14h2V5h-2v14zM14 5H2c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zM8 7.75c1.24 0 2.25 1.01 2.25 2.25S9.24 12.25 8 12.25 5.75 11.24 5.75 10 6.76 7.75 8 7.75zM12.5 17h-9v-.75c0-1.5 3-2.25 4.5-2.25s4.5.75 4.5 2.25V17z" /></g>
<g id="remove-from-queue"><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12zm-5-7v2H8v-2h8z" /></g>
<g id="repeat"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z" /></g>
<g id="repeat-one"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4zm-4-2V9h-1l-2 1v1h1.5v4H13z" /></g>
<g id="replay"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z" /></g>
<g id="replay-10"><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1c.2.1.3.2.5.3s.2.3.3.6.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" /></g>
<g id="replay-30"><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-2.4 8.5h.4c.2 0 .4-.1.5-.2s.2-.2.2-.4v-.2s-.1-.1-.1-.2-.1-.1-.2-.1h-.5s-.1.1-.2.1-.1.1-.1.2v.2h-1c0-.2 0-.3.1-.5s.2-.3.3-.4.3-.2.4-.2.4-.1.5-.1c.2 0 .4 0 .6.1s.3.1.5.2.2.2.3.4.1.3.1.5v.3s-.1.2-.1.3-.1.2-.2.2-.2.1-.3.2c.2.1.4.2.5.4s.2.4.2.6c0 .2 0 .4-.1.5s-.2.3-.3.4-.3.2-.5.2-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.4-.1-.6h.8v.2s.1.1.1.2.1.1.2.1h.5s.1-.1.2-.1.1-.1.1-.2v-.5s-.1-.1-.1-.2-.1-.1-.2-.1h-.6v-.7zm5.7.7c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.8-.8v-.5c0-.1-.1-.2-.1-.3s-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" /></g>
<g id="replay-5"><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.3 8.9l.2-2.2h2.4v.7h-1.7l-.1.9s.1 0 .1-.1.1 0 .1-.1.1 0 .2 0h.2c.2 0 .4 0 .5.1s.3.2.4.3.2.3.3.5.1.4.1.6c0 .2 0 .4-.1.5s-.1.3-.3.5-.3.2-.4.3-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.3-.1-.5h.8c0 .2.1.3.2.4s.2.1.4.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-.6l-.1-.2-.2-.2s-.2-.1-.3-.1h-.2s-.1 0-.2.1-.1 0-.1.1-.1.1-.1.1h-.7z" /></g>
<g id="shuffle"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z" /></g>
<g id="skip-next"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" /></g>
<g id="skip-previous"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" /></g>
<g id="slow-motion-video"><path d="M13.05 9.79L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zM11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69c1.11-.86 2.44-1.44 3.9-1.62zM5.69 7.1L4.26 5.68C3.05 7.16 2.25 8.99 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9zM4.07 13H2.05c.2 2.01 1 3.84 2.21 5.32l1.43-1.43c-.86-1.1-1.44-2.43-1.62-3.89zm1.61 6.74C7.16 20.95 9 21.75 11 21.95v-2.02c-1.46-.18-2.79-.76-3.9-1.62l-1.42 1.43zM22 12c0 5.16-3.92 9.42-8.95 9.95v-2.02C16.97 19.41 20 16.05 20 12s-3.03-7.41-6.95-7.93V2.05C18.08 2.58 22 6.84 22 12z" /></g>
<g id="snooze"><path d="M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-3-9h3.63L9 15.2V17h6v-2h-3.63L15 10.8V9H9v2z" /></g>
<g id="sort-by-alpha"><path d="M14.94 4.66h-4.72l2.36-2.36zm-4.69 14.71h4.66l-2.33 2.33zM6.1 6.27L1.6 17.73h1.84l.92-2.45h5.11l.92 2.45h1.84L7.74 6.27H6.1zm-1.13 7.37l1.94-5.18 1.94 5.18H4.97zm10.76 2.5h6.12v1.59h-8.53v-1.29l5.92-8.56h-5.88v-1.6h8.3v1.26l-5.93 8.6z" /></g>
<g id="stop"><path d="M6 6h12v12H6z" /></g>
<g id="subscriptions"><path d="M20 8H4V6h16v2zm-2-6H6v2h12V2zm4 10v8c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2v-8c0-1.1.9-2 2-2h16c1.1 0 2 .9 2 2zm-6 4l-6-3.27v6.53L16 16z" /></g>
<g id="subtitles"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z" /></g>
<g id="surround-sound"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.76 16.24l-1.41 1.41C4.78 16.1 4 14.05 4 12c0-2.05.78-4.1 2.34-5.66l1.41 1.41C6.59 8.93 6 10.46 6 12s.59 3.07 1.76 4.24zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm5.66 1.66l-1.41-1.41C17.41 15.07 18 13.54 18 12s-.59-3.07-1.76-4.24l1.41-1.41C19.22 7.9 20 9.95 20 12c0 2.05-.78 4.1-2.34 5.66zM12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="video-call"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3v2z" /></g>
<g id="video-label"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H3V5h18v11z" /></g>
<g id="video-library"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8 12.5v-9l6 4.5-6 4.5z" /></g>
<g id="videocam"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" /></g>
<g id="videocam-off"><path d="M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z" /></g>
<g id="volume-down"><path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z" /></g>
<g id="volume-mute"><path d="M7 9v6h4l5 5V4l-5 5H7z" /></g>
<g id="volume-off"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" /></g>
<g id="volume-up"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" /></g>
<g id="web"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z" /></g>
<g id="web-asset"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm0 14H5V8h14v10z" /></g>
</defs></svg>
</iron-iconset-svg>



<iron-iconset-svg name="communication" size="24">
<svg><defs>
<g id="business"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z" /></g>
<g id="call"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" /></g>
<g id="call-end"><path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z" /></g>
<g id="call-made"><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z" /></g>
<g id="call-merge"><path d="M17 20.41L18.41 19 15 15.59 13.59 17 17 20.41zM7.5 8H11v5.59L5.59 19 7 20.41l6-6V8h3.5L12 3.5 7.5 8z" /></g>
<g id="call-missed"><path d="M19.59 7L12 14.59 6.41 9H11V7H3v8h2v-4.59l7 7 9-9z" /></g>
<g id="call-missed-outgoing"><path d="M3 8.41l9 9 7-7V15h2V7h-8v2h4.59L12 14.59 4.41 7 3 8.41z" /></g>
<g id="call-received"><path d="M20 5.41L18.59 4 7 15.59V9H5v10h10v-2H8.41z" /></g>
<g id="call-split"><path d="M14 4l2.29 2.29-2.88 2.88 1.42 1.42 2.88-2.88L20 10V4zm-4 0H4v6l2.29-2.29 4.71 4.7V20h2v-8.41l-5.29-5.3z" /></g>
<g id="chat"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z" /></g>
<g id="chat-bubble"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" /></g>
<g id="chat-bubble-outline"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z" /></g>
<g id="clear-all"><path d="M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z" /></g>
<g id="comment"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z" /></g>
<g id="contact-mail"><path d="M21 8V7l-3 2-3-2v1l3 2 3-2zm1-5H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2zM8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1zm8-6h-8V6h8v6z" /></g>
<g id="contact-phone"><path d="M22 3H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2zM8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1zm3.85-4h1.64L21 16l-1.99 1.99c-1.31-.98-2.28-2.38-2.73-3.99-.18-.64-.28-1.31-.28-2s.1-1.36.28-2c.45-1.62 1.42-3.01 2.73-3.99L21 8l-1.51 2h-1.64c-.22.63-.35 1.3-.35 2s.13 1.37.35 2z" /></g>
<g id="contacts"><path d="M20 0H4v2h16V0zM4 24h16v-2H4v2zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 2.75c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25S9.75 10.24 9.75 9 10.76 6.75 12 6.75zM17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z" /></g>
<g id="dialer-sip"><path d="M17 3h-1v5h1V3zm-2 2h-2V4h2V3h-3v3h2v1h-2v1h3V5zm3-2v5h1V6h2V3h-3zm2 2h-1V4h1v1zm0 10.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.01.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.59l2.2-2.21c.27-.26.35-.65.24-1C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z" /></g>
<g id="dialpad"><path d="M12 19c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="email"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" /></g>
<g id="forum"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z" /></g>
<g id="import-contacts"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z" /></g>
<g id="import-export"><path d="M9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z" /></g>
<g id="invert-colors-off"><path d="M20.65 20.87l-2.35-2.35-6.3-6.29-3.56-3.57-1.42-1.41L4.27 4.5 3 5.77l2.78 2.78c-2.55 3.14-2.36 7.76.56 10.69C7.9 20.8 9.95 21.58 12 21.58c1.79 0 3.57-.59 5.03-1.78l2.7 2.7L21 21.23l-.35-.36zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59c0-1.32.43-2.57 1.21-3.6L12 14.77v4.82zM12 5.1v4.58l7.25 7.26c1.37-2.96.84-6.57-1.6-9.01L12 2.27l-3.7 3.7 1.41 1.41L12 5.1z" /></g>
<g id="live-help"><path d="M19 2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 16h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 11.9 13 12.5 13 14h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" /></g>
<g id="location-off"><path d="M12 6.5c1.38 0 2.5 1.12 2.5 2.5 0 .74-.33 1.39-.83 1.85l3.63 3.63c.98-1.86 1.7-3.8 1.7-5.48 0-3.87-3.13-7-7-7-1.98 0-3.76.83-5.04 2.15l3.19 3.19c.46-.52 1.11-.84 1.85-.84zm4.37 9.6l-4.63-4.63-.11-.11L3.27 3 2 4.27l3.18 3.18C5.07 7.95 5 8.47 5 9c0 5.25 7 13 7 13s1.67-1.85 3.38-4.35L18.73 21 20 19.73l-3.63-3.63z" /></g>
<g id="location-on"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" /></g>
<g id="mail-outline"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z" /></g>
<g id="message"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z" /></g>
<g id="no-sim"><path d="M18.99 5c0-1.1-.89-2-1.99-2h-7L7.66 5.34 19 16.68 18.99 5zM3.65 3.88L2.38 5.15 5 7.77V19c0 1.1.9 2 2 2h10.01c.35 0 .67-.1.96-.26l1.88 1.88 1.27-1.27L3.65 3.88z" /></g>
<g id="phone"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" /></g>
<g id="phonelink-erase"><path d="M13 8.2l-1-1-4 4-4-4-1 1 4 4-4 4 1 1 4-4 4 4 1-1-4-4 4-4zM19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2z" /></g>
<g id="phonelink-lock"><path d="M19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm-8.2 10V9.5C10.8 8.1 9.4 7 8 7S5.2 8.1 5.2 9.5V11c-.6 0-1.2.6-1.2 1.2v3.5c0 .7.6 1.3 1.2 1.3h5.5c.7 0 1.3-.6 1.3-1.2v-3.5c0-.7-.6-1.3-1.2-1.3zm-1.3 0h-3V9.5c0-.8.7-1.3 1.5-1.3s1.5.5 1.5 1.3V11z" /></g>
<g id="phonelink-ring"><path d="M20.1 7.7l-1 1c1.8 1.8 1.8 4.6 0 6.5l1 1c2.5-2.3 2.5-6.1 0-8.5zM18 9.8l-1 1c.5.7.5 1.6 0 2.3l1 1c1.2-1.2 1.2-3 0-4.3zM14 1H4c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 19H4V4h10v16z" /></g>
<g id="phonelink-setup"><path d="M11.8 12.5v-1l1.1-.8c.1-.1.1-.2.1-.3l-1-1.7c-.1-.1-.2-.2-.3-.1l-1.3.4c-.3-.2-.6-.4-.9-.5l-.2-1.3c0-.1-.1-.2-.3-.2H7c-.1 0-.2.1-.3.2l-.2 1.3c-.3.1-.6.3-.9.5l-1.3-.5c-.1 0-.2 0-.3.1l-1 1.7c-.1.1 0 .2.1.3l1.1.8v1l-1.1.8c-.1.2-.1.3-.1.4l1 1.7c.1.1.2.2.3.1l1.4-.4c.3.2.6.4.9.5l.2 1.3c-.1.1.1.2.2.2h2c.1 0 .2-.1.3-.2l.2-1.3c.3-.1.6-.3.9-.5l1.3.5c.1 0 .2 0 .3-.1l1-1.7c.1-.1 0-.2-.1-.3l-1.1-.9zM8 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2z" /></g>
<g id="portable-wifi-off"><path d="M17.56 14.24c.28-.69.44-1.45.44-2.24 0-3.31-2.69-6-6-6-.79 0-1.55.16-2.24.44l1.62 1.62c.2-.03.41-.06.62-.06 2.21 0 4 1.79 4 4 0 .21-.02.42-.05.63l1.61 1.61zM12 4c4.42 0 8 3.58 8 8 0 1.35-.35 2.62-.95 3.74l1.47 1.47C21.46 15.69 22 13.91 22 12c0-5.52-4.48-10-10-10-1.91 0-3.69.55-5.21 1.47l1.46 1.46C9.37 4.34 10.65 4 12 4zM3.27 2.5L2 3.77l2.1 2.1C2.79 7.57 2 9.69 2 12c0 3.7 2.01 6.92 4.99 8.65l1-1.73C5.61 17.53 4 14.96 4 12c0-1.76.57-3.38 1.53-4.69l1.43 1.44C6.36 9.68 6 10.8 6 12c0 2.22 1.21 4.15 3 5.19l1-1.74c-1.19-.7-2-1.97-2-3.45 0-.65.17-1.25.44-1.79l1.58 1.58L10 12c0 1.1.9 2 2 2l.21-.02.01.01 7.51 7.51L21 20.23 4.27 3.5l-1-1z" /></g>
<g id="present-to-all"><path d="M21 3H3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h18c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 16.02H3V4.98h18v14.04zM10 12H8l4-4 4 4h-2v4h-4v-4z" /></g>
<g id="ring-volume"><path d="M23.71 16.67C20.66 13.78 16.54 12 12 12 7.46 12 3.34 13.78.29 16.67c-.18.18-.29.43-.29.71 0 .28.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.66 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.27-.11-.52-.29-.7zM21.16 6.26l-1.41-1.41-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zM13 2h-2v5h2V2zM6.4 9.81L7.81 8.4 4.26 4.84 2.84 6.26c.11.03 3.56 3.55 3.56 3.55z" /></g>
<g id="rss-feed"><circle cx="6.18" cy="17.82" r="2.18" /><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z" /></g>
<g id="screen-share"><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z" /></g>
<g id="speaker-phone"><path d="M7 7.07L8.43 8.5c.91-.91 2.18-1.48 3.57-1.48s2.66.57 3.57 1.48L17 7.07C15.72 5.79 13.95 5 12 5s-3.72.79-5 2.07zM12 1C8.98 1 6.24 2.23 4.25 4.21l1.41 1.41C7.28 4 9.53 3 12 3s4.72 1 6.34 2.62l1.41-1.41C17.76 2.23 15.02 1 12 1zm2.86 9.01L9.14 10C8.51 10 8 10.51 8 11.14v9.71c0 .63.51 1.14 1.14 1.14h5.71c.63 0 1.14-.51 1.14-1.14v-9.71c.01-.63-.5-1.13-1.13-1.13zM15 20H9v-8h6v8z" /></g>
<g id="stay-current-landscape"><path d="M1.01 7L1 17c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H3c-1.1 0-1.99.9-1.99 2zM19 7v10H5V7h14z" /></g>
<g id="stay-current-portrait"><path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 1.99 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z" /></g>
<g id="stay-primary-landscape"><path d="M1.01 7L1 17c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H3c-1.1 0-1.99.9-1.99 2zM19 7v10H5V7h14z" /></g>
<g id="stay-primary-portrait"><path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 1.99 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z" /></g>
<g id="stop-screen-share"><path d="M21.22 18.02l2 2H24v-2h-2.78zm.77-2l.01-10c0-1.11-.9-2-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73L1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10c0 1.1.89 2 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z" /></g>
<g id="swap-calls"><path d="M18 4l-4 4h3v7c0 1.1-.9 2-2 2s-2-.9-2-2V8c0-2.21-1.79-4-4-4S5 5.79 5 8v7H2l4 4 4-4H7V8c0-1.1.9-2 2-2s2 .9 2 2v7c0 2.21 1.79 4 4 4s4-1.79 4-4V8h3l-4-4z" /></g>
<g id="textsms"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 11H7V9h2v2zm4 0h-2V9h2v2zm4 0h-2V9h2v2z" /></g>
<g id="voicemail"><path d="M18.5 6C15.46 6 13 8.46 13 11.5c0 1.33.47 2.55 1.26 3.5H9.74c.79-.95 1.26-2.17 1.26-3.5C11 8.46 8.54 6 5.5 6S0 8.46 0 11.5 2.46 17 5.5 17h13c3.04 0 5.5-2.46 5.5-5.5S21.54 6 18.5 6zm-13 9C3.57 15 2 13.43 2 11.5S3.57 8 5.5 8 9 9.57 9 11.5 7.43 15 5.5 15zm13 0c-1.93 0-3.5-1.57-3.5-3.5S16.57 8 18.5 8 22 9.57 22 11.5 20.43 15 18.5 15z" /></g>
<g id="vpn-key"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
</defs></svg>
</iron-iconset-svg>




<iron-iconset-svg name="editor" size="24">
<svg><defs>
<g id="attach-file"><path d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z" /></g>
<g id="attach-money"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z" /></g>
<g id="border-all"><path d="M3 3v18h18V3H3zm8 16H5v-6h6v6zm0-8H5V5h6v6zm8 8h-6v-6h6v6zm0-8h-6V5h6v6z" /></g>
<g id="border-bottom"><path d="M9 11H7v2h2v-2zm4 4h-2v2h2v-2zM9 3H7v2h2V3zm4 8h-2v2h2v-2zM5 3H3v2h2V3zm8 4h-2v2h2V7zm4 4h-2v2h2v-2zm-4-8h-2v2h2V3zm4 0h-2v2h2V3zm2 10h2v-2h-2v2zm0 4h2v-2h-2v2zM5 7H3v2h2V7zm14-4v2h2V3h-2zm0 6h2V7h-2v2zM5 11H3v2h2v-2zM3 21h18v-2H3v2zm2-6H3v2h2v-2z" /></g>
<g id="border-clear"><path d="M7 5h2V3H7v2zm0 8h2v-2H7v2zm0 8h2v-2H7v2zm4-4h2v-2h-2v2zm0 4h2v-2h-2v2zm-8 0h2v-2H3v2zm0-4h2v-2H3v2zm0-4h2v-2H3v2zm0-4h2V7H3v2zm0-4h2V3H3v2zm8 8h2v-2h-2v2zm8 4h2v-2h-2v2zm0-4h2v-2h-2v2zm0 8h2v-2h-2v2zm0-12h2V7h-2v2zm-8 0h2V7h-2v2zm8-6v2h2V3h-2zm-8 2h2V3h-2v2zm4 16h2v-2h-2v2zm0-8h2v-2h-2v2zm0-8h2V3h-2v2z" /></g>
<g id="border-color"><path d="M17.75 7L14 3.25l-10 10V17h3.75l10-10zm2.96-2.96c.39-.39.39-1.02 0-1.41L18.37.29c-.39-.39-1.02-.39-1.41 0L15 2.25 18.75 6l1.96-1.96z" /><path fill-opacity=".36" d="M0 20h24v4H0z" /></g>
<g id="border-horizontal"><path d="M3 21h2v-2H3v2zM5 7H3v2h2V7zM3 17h2v-2H3v2zm4 4h2v-2H7v2zM5 3H3v2h2V3zm4 0H7v2h2V3zm8 0h-2v2h2V3zm-4 4h-2v2h2V7zm0-4h-2v2h2V3zm6 14h2v-2h-2v2zm-8 4h2v-2h-2v2zm-8-8h18v-2H3v2zM19 3v2h2V3h-2zm0 6h2V7h-2v2zm-8 8h2v-2h-2v2zm4 4h2v-2h-2v2zm4 0h2v-2h-2v2z" /></g>
<g id="border-inner"><path d="M3 21h2v-2H3v2zm4 0h2v-2H7v2zM5 7H3v2h2V7zM3 17h2v-2H3v2zM9 3H7v2h2V3zM5 3H3v2h2V3zm12 0h-2v2h2V3zm2 6h2V7h-2v2zm0-6v2h2V3h-2zm-4 18h2v-2h-2v2zM13 3h-2v8H3v2h8v8h2v-8h8v-2h-8V3zm6 18h2v-2h-2v2zm0-4h2v-2h-2v2z" /></g>
<g id="border-left"><path d="M11 21h2v-2h-2v2zm0-4h2v-2h-2v2zm0-12h2V3h-2v2zm0 4h2V7h-2v2zm0 4h2v-2h-2v2zm-4 8h2v-2H7v2zM7 5h2V3H7v2zm0 8h2v-2H7v2zm-4 8h2V3H3v18zM19 9h2V7h-2v2zm-4 12h2v-2h-2v2zm4-4h2v-2h-2v2zm0-14v2h2V3h-2zm0 10h2v-2h-2v2zm0 8h2v-2h-2v2zm-4-8h2v-2h-2v2zm0-8h2V3h-2v2z" /></g>
<g id="border-outer"><path d="M13 7h-2v2h2V7zm0 4h-2v2h2v-2zm4 0h-2v2h2v-2zM3 3v18h18V3H3zm16 16H5V5h14v14zm-6-4h-2v2h2v-2zm-4-4H7v2h2v-2z" /></g>
<g id="border-right"><path d="M7 21h2v-2H7v2zM3 5h2V3H3v2zm4 0h2V3H7v2zm0 8h2v-2H7v2zm-4 8h2v-2H3v2zm8 0h2v-2h-2v2zm-8-8h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm8 8h2v-2h-2v2zm4-4h2v-2h-2v2zm4-10v18h2V3h-2zm-4 18h2v-2h-2v2zm0-16h2V3h-2v2zm-4 8h2v-2h-2v2zm0-8h2V3h-2v2zm0 4h2V7h-2v2z" /></g>
<g id="border-style"><path d="M15 21h2v-2h-2v2zm4 0h2v-2h-2v2zM7 21h2v-2H7v2zm4 0h2v-2h-2v2zm8-4h2v-2h-2v2zm0-4h2v-2h-2v2zM3 3v18h2V5h16V3H3zm16 6h2V7h-2v2z" /></g>
<g id="border-top"><path d="M7 21h2v-2H7v2zm0-8h2v-2H7v2zm4 0h2v-2h-2v2zm0 8h2v-2h-2v2zm-8-4h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2v-2H3v2zm0-4h2V7H3v2zm8 8h2v-2h-2v2zm8-8h2V7h-2v2zm0 4h2v-2h-2v2zM3 3v2h18V3H3zm16 14h2v-2h-2v2zm-4 4h2v-2h-2v2zM11 9h2V7h-2v2zm8 12h2v-2h-2v2zm-4-8h2v-2h-2v2z" /></g>
<g id="border-vertical"><path d="M3 9h2V7H3v2zm0-4h2V3H3v2zm4 16h2v-2H7v2zm0-8h2v-2H7v2zm-4 0h2v-2H3v2zm0 8h2v-2H3v2zm0-4h2v-2H3v2zM7 5h2V3H7v2zm12 12h2v-2h-2v2zm-8 4h2V3h-2v18zm8 0h2v-2h-2v2zm0-8h2v-2h-2v2zm0-10v2h2V3h-2zm0 6h2V7h-2v2zm-4-4h2V3h-2v2zm0 16h2v-2h-2v2zm0-8h2v-2h-2v2z" /></g>
<g id="bubble-chart"><circle cx="7.2" cy="14.4" r="3.2" /><circle cx="14.8" cy="18" r="2" /><circle cx="15.2" cy="8.8" r="4.8" /></g>
<g id="drag-handle"><path d="M20 9H4v2h16V9zM4 15h16v-2H4v2z" /></g>
<g id="format-align-center"><path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z" /></g>
<g id="format-align-justify"><path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z" /></g>
<g id="format-align-left"><path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z" /></g>
<g id="format-align-right"><path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z" /></g>
<g id="format-bold"><path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" /></g>
<g id="format-clear"><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z" /></g>
<g id="format-color-fill"><path d="M16.56 8.94L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10L10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5z" /><path fill-opacity=".36" d="M0 20h24v4H0z" /></g>
<g id="format-color-reset"><path d="M18 14c0-4-6-10.8-6-10.8s-1.33 1.51-2.73 3.52l8.59 8.59c.09-.42.14-.86.14-1.31zm-.88 3.12L12.5 12.5 5.27 5.27 4 6.55l3.32 3.32C6.55 11.32 6 12.79 6 14c0 3.31 2.69 6 6 6 1.52 0 2.9-.57 3.96-1.5l2.63 2.63 1.27-1.27-2.74-2.74z" /></g>
<g id="format-color-text"><path fill-opacity=".36" d="M0 20h24v4H0z" /><path d="M11 3L5.5 17h2.25l1.12-3h6.25l1.12 3h2.25L13 3h-2zm-1.38 9L12 5.67 14.38 12H9.62z" /></g>
<g id="format-indent-decrease"><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" /></g>
<g id="format-indent-increase"><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" /></g>
<g id="format-italic"><path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" /></g>
<g id="format-line-spacing"><path d="M6 7h2.5L5 3.5 1.5 7H4v10H1.5L5 20.5 8.5 17H6V7zm4-2v2h12V5H10zm0 14h12v-2H10v2zm0-6h12v-2H10v2z" /></g>
<g id="format-list-bulleted"><path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z" /></g>
<g id="format-list-numbered"><path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z" /></g>
<g id="format-paint"><path d="M18 4V3c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6h1v4H9v11c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-9h8V4h-3z" /></g>
<g id="format-quote"><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z" /></g>
<g id="format-shapes"><path d="M23 7V1h-6v2H7V1H1v6h2v10H1v6h6v-2h10v2h6v-6h-2V7h2zM3 3h2v2H3V3zm2 18H3v-2h2v2zm12-2H7v-2H5V7h2V5h10v2h2v10h-2v2zm4 2h-2v-2h2v2zM19 5V3h2v2h-2zm-5.27 9h-3.49l-.73 2H7.89l3.4-9h1.4l3.41 9h-1.63l-.74-2zm-3.04-1.26h2.61L12 8.91l-1.31 3.83z" /></g>
<g id="format-size"><path d="M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z" /></g>
<g id="format-strikethrough"><path d="M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z" /></g>
<g id="format-textdirection-l-to-r"><path d="M9 10v5h2V4h2v11h2V4h2V2H9C6.79 2 5 3.79 5 6s1.79 4 4 4zm12 8l-4-4v3H5v2h12v3l4-4z" /></g>
<g id="format-textdirection-r-to-l"><path d="M10 10v5h2V4h2v11h2V4h2V2h-8C7.79 2 6 3.79 6 6s1.79 4 4 4zm-2 7v-3l-4 4 4 4v-3h12v-2H8z" /></g>
<g id="format-underlined"><path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z" /></g>
<g id="functions"><path d="M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z" /></g>
<g id="highlight"><path d="M6 14l3 3v5h6v-5l3-3V9H6zm5-12h2v3h-2zM3.5 5.875L4.914 4.46l2.12 2.122L5.62 7.997zm13.46.71l2.123-2.12 1.414 1.414L18.375 8z" /></g>
<g id="insert-chart"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" /></g>
<g id="insert-comment"><path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z" /></g>
<g id="insert-drive-file"><path d="M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z" /></g>
<g id="insert-emoticon"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" /></g>
<g id="insert-invitation"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z" /></g>
<g id="insert-link"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" /></g>
<g id="insert-photo"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" /></g>
<g id="linear-scale"><path d="M19.5 9.5c-1.03 0-1.9.62-2.29 1.5h-2.92c-.39-.88-1.26-1.5-2.29-1.5s-1.9.62-2.29 1.5H6.79c-.39-.88-1.26-1.5-2.29-1.5C3.12 9.5 2 10.62 2 12s1.12 2.5 2.5 2.5c1.03 0 1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5s1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5 1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5z" /></g>
<g id="merge-type"><path d="M17 20.41L18.41 19 15 15.59 13.59 17 17 20.41zM7.5 8H11v5.59L5.59 19 7 20.41l6-6V8h3.5L12 3.5 7.5 8z" /></g>
<g id="mode-comment"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z" /></g>
<g id="mode-edit"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" /></g>
<g id="monetization-on"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z" /></g>
<g id="money-off"><path d="M12.5 6.9c1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-.53.12-1.03.3-1.48.54l1.47 1.47c.41-.17.91-.27 1.51-.27zM5.33 4.06L4.06 5.33 7.5 8.77c0 2.08 1.56 3.21 3.91 3.91l3.51 3.51c-.34.48-1.05.91-2.42.91-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c.96-.18 1.82-.55 2.45-1.12l2.22 2.22 1.27-1.27L5.33 4.06z" /></g>
<g id="multiline-chart"><path d="M22 6.92l-1.41-1.41-2.85 3.21C15.68 6.4 12.83 5 9.61 5 6.72 5 4.07 6.16 2 8l1.42 1.42C5.12 7.93 7.27 7 9.61 7c2.74 0 5.09 1.26 6.77 3.24l-2.88 3.24-4-4L2 16.99l1.5 1.5 6-6.01 4 4 4.05-4.55c.75 1.35 1.25 2.9 1.44 4.55H21c-.22-2.3-.95-4.39-2.04-6.14L22 6.92z" /></g>
<g id="pie-chart"><path d="M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10zm2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99zm0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99h-8.97z" /></g>
<g id="pie-chart-outlined"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm1 2.07c3.61.45 6.48 3.33 6.93 6.93H13V4.07zM4 12c0-4.06 3.07-7.44 7-7.93v15.87c-3.93-.5-7-3.88-7-7.94zm9 7.93V13h6.93c-.45 3.61-3.32 6.48-6.93 6.93z" /></g>
<g id="publish"><path d="M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z" /></g>
<g id="short-text"><path d="M4 9h16v2H4zm0 4h10v2H4z" /></g>
<g id="show-chart"><path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z" /></g>
<g id="space-bar"><path d="M18 9v4H6V9H4v6h16V9z" /></g>
<g id="strikethrough-s"><path d="M7.24 8.75c-.26-.48-.39-1.03-.39-1.67 0-.61.13-1.16.4-1.67.26-.5.63-.93 1.11-1.29.48-.35 1.05-.63 1.7-.83.66-.19 1.39-.29 2.18-.29.81 0 1.54.11 2.21.34.66.22 1.23.54 1.69.94.47.4.83.88 1.08 1.43.25.55.38 1.15.38 1.81h-3.01c0-.31-.05-.59-.15-.85-.09-.27-.24-.49-.44-.68-.2-.19-.45-.33-.75-.44-.3-.1-.66-.16-1.06-.16-.39 0-.74.04-1.03.13-.29.09-.53.21-.72.36-.19.16-.34.34-.44.55-.1.21-.15.43-.15.66 0 .48.25.88.74 1.21.38.25.77.48 1.41.7H7.39c-.05-.08-.11-.17-.15-.25zM21 12v-2H3v2h9.62c.18.07.4.14.55.2.37.17.66.34.87.51.21.17.35.36.43.57.07.2.11.43.11.69 0 .23-.05.45-.14.66-.09.2-.23.38-.42.53-.19.15-.42.26-.71.35-.29.08-.63.13-1.01.13-.43 0-.83-.04-1.18-.13s-.66-.23-.91-.42c-.25-.19-.45-.44-.59-.75-.14-.31-.25-.76-.25-1.21H6.4c0 .55.08 1.13.24 1.58.16.45.37.85.65 1.21.28.35.6.66.98.92.37.26.78.48 1.22.65.44.17.9.3 1.38.39.48.08.96.13 1.44.13.8 0 1.53-.09 2.18-.28s1.21-.45 1.67-.79c.46-.34.82-.77 1.07-1.27s.38-1.07.38-1.71c0-.6-.1-1.14-.31-1.61-.05-.11-.11-.23-.17-.33H21z" /></g>
<g id="text-fields"><path d="M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z" /></g>
<g id="title"><path d="M5 4v3h5.5v12h3V7H19V4z" /></g>
<g id="vertical-align-bottom"><path d="M16 13h-3V3h-2v10H8l4 4 4-4zM4 19v2h16v-2H4z" /></g>
<g id="vertical-align-center"><path d="M8 19h3v4h2v-4h3l-4-4-4 4zm8-14h-3V1h-2v4H8l4 4 4-4zM4 11v2h16v-2H4z" /></g>
<g id="vertical-align-top"><path d="M8 11h3v10h2V11h3l-4-4-4 4zM4 3v2h16V3H4z" /></g>
<g id="wrap-text"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3 3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z" /></g>
</defs></svg>
</iron-iconset-svg>



<iron-iconset-svg name="hardware" size="24">
<svg><defs>
<g id="cast"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" /></g>
<g id="cast-connected"><path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="computer"><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z" /></g>
<g id="desktop-mac"><path d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7l-2 3v1h8v-1l-2-3h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 12H3V4h18v10z" /></g>
<g id="desktop-windows"><path d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z" /></g>
<g id="developer-board"><path d="M22 9V7h-2V5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2v-2h-2V9h2zm-4 10H4V5h14v14zM6 13h5v4H6zm6-6h4v3h-4zM6 7h5v5H6zm6 4h4v6h-4z" /></g>
<g id="device-hub"><path d="M17 16l-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z" /></g>
<g id="devices-other"><path d="M3 6h18V4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v-2H3V6zm10 6H9v1.78c-.61.55-1 1.33-1 2.22s.39 1.67 1 2.22V20h4v-1.78c.61-.55 1-1.34 1-2.22s-.39-1.67-1-2.22V12zm-2 5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM22 8h-6c-.5 0-1 .5-1 1v10c0 .5.5 1 1 1h6c.5 0 1-.5 1-1V9c0-.5-.5-1-1-1zm-1 10h-4v-8h4v8z" /></g>
<g id="dock"><path d="M8 23h8v-2H8v2zm8-21.99L8 1c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM16 15H8V5h8v10z" /></g>
<g id="gamepad"><path d="M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z" /></g>
<g id="headset"><path d="M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z" /></g>
<g id="headset-mic"><path d="M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h4v1h-7v2h6c1.66 0 3-1.34 3-3V10c0-4.97-4.03-9-9-9z" /></g>
<g id="keyboard"><path d="M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z" /></g>
<g id="keyboard-arrow-down"><path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z" /></g>
<g id="keyboard-arrow-left"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z" /></g>
<g id="keyboard-arrow-right"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z" /></g>
<g id="keyboard-arrow-up"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" /></g>
<g id="keyboard-backspace"><path d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z" /></g>
<g id="keyboard-capslock"><path d="M12 8.41L16.59 13 18 11.59l-6-6-6 6L7.41 13 12 8.41zM6 18h12v-2H6v2z" /></g>
<g id="keyboard-hide"><path d="M20 3H4c-1.1 0-1.99.9-1.99 2L2 15c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 3h2v2h-2V6zm0 3h2v2h-2V9zM8 6h2v2H8V6zm0 3h2v2H8V9zm-1 2H5V9h2v2zm0-3H5V6h2v2zm9 7H8v-2h8v2zm0-4h-2V9h2v2zm0-3h-2V6h2v2zm3 3h-2V9h2v2zm0-3h-2V6h2v2zm-7 15l4-4H8l4 4z" /></g>
<g id="keyboard-return"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z" /></g>
<g id="keyboard-tab"><path d="M11.59 7.41L15.17 11H1v2h14.17l-3.59 3.59L13 18l6-6-6-6-1.41 1.41zM20 6v12h2V6h-2z" /></g>
<g id="keyboard-voice"><path d="M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" /></g>
<g id="laptop"><path d="M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z" /></g>
<g id="laptop-chromebook"><path d="M22 18V3H2v15H0v2h24v-2h-2zm-8 0h-4v-1h4v1zm6-3H4V5h16v10z" /></g>
<g id="laptop-mac"><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2H0c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2h-4zM4 5h16v11H4V5zm8 14c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" /></g>
<g id="laptop-windows"><path d="M20 18v-1c1.1 0 1.99-.9 1.99-2L22 5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2v1H0v2h24v-2h-4zM4 5h16v10H4V5z" /></g>
<g id="memory"><path d="M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z" /></g>
<g id="mouse"><path d="M13 1.07V9h7c0-4.08-3.05-7.44-7-7.93zM4 15c0 4.42 3.58 8 8 8s8-3.58 8-8v-4H4v4zm7-13.93C7.05 1.56 4 4.92 4 9h7V1.07z" /></g>
<g id="phone-android"><path d="M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3zm-2 20h-4v-1h4v1zm3.25-3H6.75V4h10.5v14z" /></g>
<g id="phone-iphone"><path d="M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z" /></g>
<g id="phonelink"><path d="M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4V6zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zm-1 9h-4v-7h4v7z" /></g>
<g id="phonelink-off"><path d="M22 6V4H6.82l2 2H22zM1.92 1.65L.65 2.92l1.82 1.82C2.18 5.08 2 5.52 2 6v11H0v3h17.73l2.35 2.35 1.27-1.27L3.89 3.62 1.92 1.65zM4 6.27L14.73 17H4V6.27zM23 8h-6c-.55 0-1 .45-1 1v4.18l2 2V10h4v7h-2.18l3 3H23c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1z" /></g>
<g id="power-input"><path d="M2 9v2h19V9H2zm0 6h5v-2H2v2zm7 0h5v-2H9v2zm7 0h5v-2h-5v2z" /></g>
<g id="router"><path d="M20.2 5.9l.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2s3 .6 4.2 1.7zm-.9.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4l.8.8c.7-.7 1.6-1 2.5-1 .9 0 1.8.3 2.5 1l.8-.8zM19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zM8 18H6v-2h2v2zm3.5 0h-2v-2h2v2zm3.5 0h-2v-2h2v2z" /></g>
<g id="scanner"><path d="M19.8 10.7L4.2 5l-.7 1.9L17.6 12H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5.5c0-.8-.5-1.6-1.2-1.8zM7 17H5v-2h2v2zm12 0H9v-2h10v2z" /></g>
<g id="security"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z" /></g>
<g id="sim-card"><path d="M19.99 4c0-1.1-.89-2-1.99-2h-8L4 8v12c0 1.1.9 2 2 2h12.01c1.1 0 1.99-.9 1.99-2l-.01-16zM9 19H7v-2h2v2zm8 0h-2v-2h2v2zm-8-4H7v-4h2v4zm4 4h-2v-4h2v4zm0-6h-2v-2h2v2zm4 2h-2v-4h2v4z" /></g>
<g id="smartphone"><path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z" /></g>
<g id="speaker"><path d="M17 2H7c-1.1 0-2 .9-2 2v16c0 1.1.9 1.99 2 1.99L17 22c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2c1.1 0 2 .9 2 2s-.9 2-2 2c-1.11 0-2-.9-2-2s.89-2 2-2zm0 16c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="speaker-group"><path d="M18.2 1H9.8C8.81 1 8 1.81 8 2.8v14.4c0 .99.81 1.79 1.8 1.79l8.4.01c.99 0 1.8-.81 1.8-1.8V2.8c0-.99-.81-1.8-1.8-1.8zM14 3c1.1 0 2 .89 2 2s-.9 2-2 2-2-.89-2-2 .9-2 2-2zm0 13.5c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /><circle cx="14" cy="12.5" r="2.5" /><path d="M6 5H4v16c0 1.1.89 2 2 2h10v-2H6V5z" /></g>
<g id="tablet"><path d="M21 4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 1.99-.9 1.99-2L23 6c0-1.1-.9-2-2-2zm-2 14H5V6h14v12z" /></g>
<g id="tablet-android"><path d="M18 0H6C4.34 0 3 1.34 3 3v18c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V3c0-1.66-1.34-3-3-3zm-4 22h-4v-1h4v1zm5.25-3H4.75V3h14.5v16z" /></g>
<g id="tablet-mac"><path d="M18.5 0h-14C3.12 0 2 1.12 2 2.5v19C2 22.88 3.12 24 4.5 24h14c1.38 0 2.5-1.12 2.5-2.5v-19C21 1.12 19.88 0 18.5 0zm-7 23c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm7.5-4H4V3h15v16z" /></g>
<g id="toys"><path d="M12 12c0-3 2.5-5.5 5.5-5.5S23 9 23 12H12zm0 0c0 3-2.5 5.5-5.5 5.5S1 15 1 12h11zm0 0c-3 0-5.5-2.5-5.5-5.5S9 1 12 1v11zm0 0c3 0 5.5 2.5 5.5 5.5S15 23 12 23V12z" /></g>
<g id="tv"><path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z" /></g>
<g id="videogame-asset"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="watch"><path d="M20 12c0-2.54-1.19-4.81-3.04-6.27L16 0H8l-.95 5.73C5.19 7.19 4 9.45 4 12s1.19 4.81 3.05 6.27L8 24h8l.96-5.73C18.81 16.81 20 14.54 20 12zM6 12c0-3.31 2.69-6 6-6s6 2.69 6 6-2.69 6-6 6-6-2.69-6-6z" /></g>
</defs></svg>
</iron-iconset-svg>








<dom-module id="iron-pages">

  <template>
    <style>
      :host {
        display: block;
      }

      :host > ::slotted(:not(slot):not(.iron-selected)) {
        display: none !important;
      }
    </style>

    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/iron-pages/iron-pages.html.js
Polymer({is:"iron-pages",behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:["_selectedPageChanged(selected)"],_selectedPageChanged:function(){this.async(this.notifyResize)}});
</script>
</dom-module>





















<dom-module id="paper-tab">
  <template>
    <style>
      :host {
        @apply --layout-inline;
        @apply --layout-center;
        @apply --layout-center-justified;
        @apply --layout-flex-auto;

        position: relative;
        padding: 0 12px;
        overflow: hidden;
        cursor: pointer;
        vertical-align: middle;

        @apply --paper-font-common-base;
        @apply --paper-tab;
      }

      :host(:focus) {
        outline: none;
      }

      :host([link]) {
        padding: 0;
      }

      .tab-content {
        height: 100%;
        transform: translateZ(0);
          -webkit-transform: translateZ(0);
        transition: opacity 0.1s cubic-bezier(0.4, 0.0, 1, 1);
        @apply --layout-horizontal;
        @apply --layout-center-center;
        @apply --layout-flex-auto;
        @apply --paper-tab-content;
      }

      :host(:not(.iron-selected)) > .tab-content {
        opacity: 0.8;

        @apply --paper-tab-content-unselected;
      }

      :host(:focus) .tab-content {
        opacity: 1;
        font-weight: 700;
      }

      paper-ripple {
        color: var(--paper-tab-ink, var(--paper-yellow-a100));
      }

      .tab-content > ::slotted(a) {
        @apply --layout-flex-auto;

        height: 100%;
      }
    </style>

    <div class="tab-content">
      <slot></slot>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-tabs/paper-tab.html.js
Polymer({is:"paper-tab",behaviors:[Polymer.IronControlState,Polymer.IronButtonState,Polymer.PaperRippleBehavior],properties:{link:{type:Boolean,value:!1,reflectToAttribute:!0}},hostAttributes:{role:"tab"},listeners:{down:"_updateNoink",tap:"_onTap"},attached:function(){this._updateNoink()},get _parentNoink(){var a=Polymer.dom(this).parentNode;return!!a&&!!a.noink},_updateNoink:function(){this.noink=!!this.noink||!!this._parentNoink},_onTap:function(a){if(this.link){var b=this.queryEffectiveChildren("a");
b&&a.target!==b&&b.click()}}});
</script>
</dom-module>










<iron-iconset-svg name="paper-tabs" size="24">
<svg><defs>
<g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" /></g>
<g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /></g>
</defs></svg>
</iron-iconset-svg>





<dom-module id="paper-tabs">
  <template>
    <style>
      :host {
        @apply --layout;
        @apply --layout-center;

        height: 48px;
        font-size: 14px;
        font-weight: 500;
        overflow: hidden;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;

        /* NOTE: Both values are needed, since some phones require the value to be `transparent`. */
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;

        @apply --paper-tabs;
      }

      :host(:dir(rtl)) {
        @apply --layout-horizontal-reverse;
      }

      #tabsContainer {
        position: relative;
        height: 100%;
        white-space: nowrap;
        overflow: hidden;
        @apply --layout-flex-auto;
        @apply --paper-tabs-container;
      }

      #tabsContent {
        height: 100%;
        -moz-flex-basis: auto;
        -ms-flex-basis: auto;
        flex-basis: auto;
        @apply --paper-tabs-content;
      }

      #tabsContent.scrollable {
        position: absolute;
        white-space: nowrap;
      }

      #tabsContent:not(.scrollable),
      #tabsContent.scrollable.fit-container {
        @apply --layout-horizontal;
      }

      #tabsContent.scrollable.fit-container {
        min-width: 100%;
      }

      #tabsContent.scrollable.fit-container > ::slotted(*) {
        /* IE - prevent tabs from compressing when they should scroll. */
        -ms-flex: 1 0 auto;
        -webkit-flex: 1 0 auto;
        flex: 1 0 auto;
      }

      .hidden {
        display: none;
      }

      .not-visible {
        opacity: 0;
        cursor: default;
      }

      paper-icon-button {
        width: 48px;
        height: 48px;
        padding: 12px;
        margin: 0 4px;
      }

      #selectionBar {
        position: absolute;
        height: 0;
        bottom: 0;
        left: 0;
        right: 0;
        border-bottom: 2px solid var(--paper-tabs-selection-bar-color, var(--paper-yellow-a100));
          -webkit-transform: scale(0);
        transform: scale(0);
          -webkit-transform-origin: left center;
        transform-origin: left center;
          transition: -webkit-transform;
        transition: transform;

        @apply --paper-tabs-selection-bar;
      }

      #selectionBar.align-bottom {
        top: 0;
        bottom: auto;
      }

      #selectionBar.expand {
        transition-duration: 0.15s;
        transition-timing-function: cubic-bezier(0.4, 0.0, 1, 1);
      }

      #selectionBar.contract {
        transition-duration: 0.18s;
        transition-timing-function: cubic-bezier(0.0, 0.0, 0.2, 1);
      }

      #tabsContent > ::slotted(:not(#selectionBar)) {
        height: 100%;
      }
    </style>

    <paper-icon-button icon="paper-tabs:chevron-left" class$="[[_computeScrollButtonClass(_leftHidden, scrollable, hideScrollButtons)]]" on-up="_onScrollButtonUp" on-down="_onLeftScrollButtonDown" tabindex="-1"></paper-icon-button>

    <div id="tabsContainer" on-track="_scroll" on-down="_down">
      <div id="tabsContent" class$="[[_computeTabsContentClass(scrollable, fitContainer)]]">
        <div id="selectionBar" class$="[[_computeSelectionBarClass(noBar, alignBottom)]]" on-transitionend="_onBarTransitionEnd"></div>
        <slot></slot>
      </div>
    </div>

    <paper-icon-button icon="paper-tabs:chevron-right" class$="[[_computeScrollButtonClass(_rightHidden, scrollable, hideScrollButtons)]]" on-up="_onScrollButtonUp" on-down="_onRightScrollButtonDown" tabindex="-1"></paper-icon-button>

  </template>

  <script>//~~WEBPATH~~/paper-tabs/paper-tabs.html.js
Polymer({is:"paper-tabs",behaviors:[Polymer.IronResizableBehavior,Polymer.IronMenubarBehavior],properties:{noink:{type:Boolean,value:!1,observer:"_noinkChanged"},noBar:{type:Boolean,value:!1},noSlide:{type:Boolean,value:!1},scrollable:{type:Boolean,value:!1},fitContainer:{type:Boolean,value:!1},disableDrag:{type:Boolean,value:!1},hideScrollButtons:{type:Boolean,value:!1},alignBottom:{type:Boolean,value:!1},selectable:{type:String,value:"paper-tab"},autoselect:{type:Boolean,value:!1},autoselectDelay:{type:Number,
value:0},_step:{type:Number,value:10},_holdDelay:{type:Number,value:1},_leftHidden:{type:Boolean,value:!1},_rightHidden:{type:Boolean,value:!1},_previousTab:{type:Object}},hostAttributes:{role:"tablist"},listeners:{"iron-resize":"_onTabSizingChanged","iron-items-changed":"_onTabSizingChanged","iron-select":"_onIronSelect","iron-deselect":"_onIronDeselect"},keyBindings:{"left:keyup right:keyup":"_onArrowKeyup"},created:function(){this._holdJob=null;this._pendingActivationTimeout=this._pendingActivationItem=
void 0;this._bindDelayedActivationHandler=this._delayedActivationHandler.bind(this);this.addEventListener("blur",this._onBlurCapture.bind(this),!0)},ready:function(){this.setScrollDirection("y",this.$.tabsContainer)},detached:function(){this._cancelPendingActivation()},_noinkChanged:function(a){Polymer.dom(this).querySelectorAll("paper-tab").forEach(a?this._setNoinkAttribute:this._removeNoinkAttribute)},_setNoinkAttribute:function(a){a.setAttribute("noink","")},_removeNoinkAttribute:function(a){a.removeAttribute("noink")},
_computeScrollButtonClass:function(a,b,c){return!b||c?"hidden":a?"not-visible":""},_computeTabsContentClass:function(a,b){return a?"scrollable"+(b?" fit-container":""):" fit-container"},_computeSelectionBarClass:function(a,b){return a?"hidden":b?"align-bottom":""},_onTabSizingChanged:function(){this.debounce("_onTabSizingChanged",function(){this._scroll();this._tabChanged(this.selectedItem)},10)},_onIronSelect:function(a){this._tabChanged(a.detail.item,this._previousTab);this._previousTab=a.detail.item;
this.cancelDebouncer("tab-changed")},_onIronDeselect:function(){this.debounce("tab-changed",function(){this._tabChanged(null,this._previousTab);this._previousTab=null},1)},_activateHandler:function(){this._cancelPendingActivation();Polymer.IronMenuBehaviorImpl._activateHandler.apply(this,arguments)},_scheduleActivation:function(a,b){this._pendingActivationItem=a;this._pendingActivationTimeout=this.async(this._bindDelayedActivationHandler,b)},_delayedActivationHandler:function(){var a=this._pendingActivationItem;
this._pendingActivationTimeout=this._pendingActivationItem=void 0;a.fire(this.activateEvent,null,{bubbles:!0,cancelable:!0})},_cancelPendingActivation:function(){void 0!==this._pendingActivationTimeout&&(this.cancelAsync(this._pendingActivationTimeout),this._pendingActivationTimeout=this._pendingActivationItem=void 0)},_onArrowKeyup:function(){this.autoselect&&this._scheduleActivation(this.focusedItem,this.autoselectDelay)},_onBlurCapture:function(a){a.target===this._pendingActivationItem&&this._cancelPendingActivation()},
get _tabContainerScrollSize(){return Math.max(0,this.$.tabsContainer.scrollWidth-this.$.tabsContainer.offsetWidth)},_scroll:function(a,b){this.scrollable&&this._affectScroll(b&&-b.ddx||0)},_down:function(){this.async(function(){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null)},1)},_affectScroll:function(a){this.$.tabsContainer.scrollLeft+=a;a=this.$.tabsContainer.scrollLeft;this._leftHidden=0===a;this._rightHidden=a===this._tabContainerScrollSize},
_onLeftScrollButtonDown:function(){this._scrollToLeft();this._holdJob=setInterval(this._scrollToLeft.bind(this),this._holdDelay)},_onRightScrollButtonDown:function(){this._scrollToRight();this._holdJob=setInterval(this._scrollToRight.bind(this),this._holdDelay)},_onScrollButtonUp:function(){clearInterval(this._holdJob);this._holdJob=null},_scrollToLeft:function(){this._affectScroll(-this._step)},_scrollToRight:function(){this._affectScroll(this._step)},_tabChanged:function(a,b){if(a){var c=this.$.tabsContent.getBoundingClientRect(),
e=c.width,f=a.getBoundingClientRect();c=f.left-c.left;this._pos={width:this._calcPercent(f.width,e),left:this._calcPercent(c,e)};if(this.noSlide||null==b)this.$.selectionBar.classList.remove("expand"),this.$.selectionBar.classList.remove("contract"),this._positionBar(this._pos.width,this._pos.left);else{var g=b.getBoundingClientRect();b=this.items.indexOf(b);a=this.items.indexOf(a);this.$.selectionBar.classList.add("expand");a=b<a;this._isRTL&&(a=!a);a?this._positionBar(this._calcPercent(f.left+f.width-
g.left,e)-5,this._left):this._positionBar(this._calcPercent(g.left+g.width-f.left,e)-5,this._calcPercent(c,e)+5);this.scrollable&&this._scrollToSelectedIfNeeded(f.width,c)}}else this.$.selectionBar.classList.remove("expand"),this.$.selectionBar.classList.remove("contract"),this._positionBar(0,0)},_scrollToSelectedIfNeeded:function(a,b){b-=this.$.tabsContainer.scrollLeft;0>b?this.$.tabsContainer.scrollLeft+=b:(b+=a-this.$.tabsContainer.offsetWidth,0<b&&(this.$.tabsContainer.scrollLeft+=b))},_calcPercent:function(a,
b){return 100*a/b},_positionBar:function(a,b){a=a||0;b=b||0;this._width=a;this._left=b;this.transform("translateX("+b+"%) scaleX("+a/100+")",this.$.selectionBar)},_onBarTransitionEnd:function(){var a=this.$.selectionBar.classList;a.contains("expand")?(a.remove("expand"),a.add("contract"),this._positionBar(this._pos.width,this._pos.left)):a.contains("contract")&&a.remove("contract")}});
</script>
</dom-module>














<dom-module id="tf-inference-panel">
  <template>
    <style id="linter-paper-button-style">
      /**
       * This style preserves the styling previous to
       * https://github.com/PolymerElements/paper-button/pull/115
       * This change can break the layout of paper-button content.
       * Remove this style to apply the change.
       */
      paper-button {
        display: inline-block;
        text-align: center;
        font-family: inherit;
      }
    </style>
    <style>
      :host {
        display: block;
        font-size: 14px;
      }
      tf-option-selector .model-type-button {
        width: auto;
      }
      .flex-holder {
        display: flex;
      }
      .title {
        font-size: 32px;
        margin-bottom: 20px;
      }
      .help-icon {
        width: 15px;
        height: 15px;
        padding: 0;
        color: #757575;
      }
      .tooltip {
        width: 500px;
      }
      .input-in-row {
        margin-right: 10px;
      }
      .flex-grow {
        flex-grow: 1;
      }
      .model-type-label {
        padding-top: 10px;
      }
      .add-model-button-holder {
        display: flex;
      }
      .checkbox {
        margin-top: 30px;
        margin-left: 10px;
      }
      .predict-checkbox {
        margin-top: 43px;
        margin-left: 10px;
      }
      paper-input {
        --paper-input-container-focus-color: #f57c00;
      }
      paper-radio-button {
        --paper-radio-button-unchecked-color: #3C4043;
        --paper-radio-button-unchecked-ink-color: #3C4043;
        --paper-radio-button-checked-color: #3C4043;
        --paper-radio-button-checked-ink-color: #3C4043;
      }
    </style>
    <div class="title">Set up your data and model</div>
    <paper-input always-float-label label="Inference address" placeholder="[[inferenceAddress1]]" value="{{inferenceAddress1}}">
    </paper-input>
    <div class="flex-holder">
      <paper-input always-float-label label="Model name" placeholder="[[modelName1]]" value="{{modelName1}}" class="input-in-row">
      </paper-input>
      <paper-input always-float-label label="Model version (optional)" placeholder="[[modelVersion1]]" value="{{modelVersion1}}" class="input-in-row">
      </paper-input>
      <paper-input always-float-label label="Model signature (optional)" placeholder="[[modelSignature1]]" value="{{modelSignature1}}" class="input-in-row">
      </paper-input>
    </div>
    <div hidden$="{{hideModelPane2}}">
      <paper-input always-float-label label="Inference address" placeholder="[[inferenceAddress2]]" value="{{inferenceAddress2}}">
      </paper-input>
      <div class="flex-holder">
        <paper-input always-float-label label="Model name" placeholder="[[modelName2]]" value="{{modelName2}}" class="input-in-row">
        </paper-input>
        <paper-input always-float-label label="Model version (optional)" placeholder="[[modelVersion2]]" value="{{modelVersion2}}" class="input-in-row">
        </paper-input>
        <paper-input always-float-label label="Model signature (optional)" placeholder="[[modelSignature2]]" value="{{modelSignature2}}" class="input-in-row">
        </paper-input>
      </div>
    </div>
    <div class="add-model-button-holder" hidden$="{{!hideModelPane2}}">
      <paper-button on-tap="addModelClicked_" class="main-button">
        Add another model for comparison
      </paper-button>
    </div>
    <div class="flex-holder">
      <div>
        <div class="model-type-label">Model Type</div>
        <paper-radio-group selected="{{modelType}}">
          <paper-radio-button name="classification">Classification</paper-radio-button>
          <paper-radio-button name="regression">Regression</paper-radio-button>
        </paper-radio-group>
      </div>
      <paper-checkbox checked="{{usePredictApi}}" class="predict-checkbox">
        Uses Predict API
      </paper-checkbox>
    </div>
    <div class="flex-holder">
      <paper-input always-float-label label="Input tensor name" placeholder="[[predictInputTensor]]" value="{{predictInputTensor}}" class="input-in-row" hidden$="[[shouldDisablePredictTensorControls_(usePredictApi)]]">
      </paper-input>
      <paper-input always-float-label label="Output tensor name" placeholder="[[predictOutputTensor]]" value="{{predictOutputTensor}}" class="input-in-row" hidden$="[[shouldDisablePredictTensorControls_(usePredictApi)]]">
      </paper-input>
    </div>
    <div class="flex-holder">
      <paper-input always-float-label label="Path to examples" value="{{examplesPath}}" class="flex-grow">
      </paper-input>
      <paper-checkbox checked="{{sequenceExamples}}" class="checkbox">
        SequenceExamples
      </paper-checkbox>
    </div>
    <div class="flex-holder">
      <paper-input always-float-label type="number" class="input-in-row flex-grow" label="Maximum number of examples to load" placeholder="[[maxExamples]]" value="{{maxExamples}}">
      </paper-input>
      <paper-input always-float-label type="number" class="input-in-row flex-grow" label="Sampling ratio (0.2 = sample ~20% of examples)" placeholder="[[samplingOdds]]" value="{{samplingOdds}}">
      </paper-input>
    </div>
    <paper-input always-float-label label="Path to label dictionary (optional)" placeholder="[[labelVocabPath]]" value="{{labelVocabPath}}" disabled="[[shouldDisableClassificationControls_(modelType)]]">
    </paper-input>
    <div class="flex-holder">
      <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      <div>Maps predicted class indices to labels from text file</div>
      <paper-tooltip class="tooltip" animation-delay="0" position="bottom" offset="0">
        An optional text file for use with the results of a classification model.
        Classification models return predicted classes as indices. If a vocab file is
        provided, each predicted class index will be mapped to a label from this file for use
        in the display. Each line in the file corresponds to a label, with the first line
        corresponding to class index 0.
      </paper-tooltip>
    </div>
    <div class="flex-holder">
      <paper-input always-float-label type="number" label="Max classes to display" placeholder="[[maxClassesToDisplay]]" value="{{maxClassesToDisplay}}" class="input-in-row" disabled="[[shouldDisableMultiClassControls_(multiClass)]]">
      </paper-input>
      <paper-checkbox disabled="[[shouldDisableClassificationControls_(modelType)]]" checked="{{multiClass}}" class="checkbox">
        Multi-class classification model
      </paper-checkbox>
    </div>
  </template>

  <script>//~~WEBPATH~~/tf-interactive-inference-dashboard/tf-inference-panel.html.js
Polymer({is:"tf-inference-panel",properties:{examplesPath:{type:String,value:Uk.getStringInitializer("examplesPath",{defaultValue:""}),observer:"examplesPathChanged_",notify:!0},hideModelPane2:{type:Boolean,value:Uk.getBooleanInitializer("hideModelPane2",{defaultValue:!0}),observer:"hideModelPane2Changed_"},modelName:{type:String,value:"",notify:!0},modelName1:{type:String,value:Uk.getStringInitializer("modelName1",{defaultValue:""}),observer:"modelName1Changed_",notify:!0},modelName2:{type:String,
value:Uk.getStringInitializer("modelName2",{defaultValue:""}),observer:"modelName2Changed_",notify:!0},inferenceAddress:{type:String,value:"",notify:!0},inferenceAddress1:{type:String,value:Uk.getStringInitializer("inferenceAddress1",{defaultValue:""}),observer:"inferenceAddress1Changed_",notify:!0},inferenceAddress2:{type:String,value:Uk.getStringInitializer("inferenceAddress2",{defaultValue:""}),observer:"inferenceAddress2Changed_",notify:!0},modelType:{type:String,value:Uk.getStringInitializer("modelType",
{defaultValue:"classification"}),observer:"modelTypeChanged_",notify:!0},modelVersion:{type:String,value:"",notify:!0},modelVersion1:{type:String,value:Uk.getStringInitializer("modelVersion1",{defaultValue:""}),observer:"modelVersion1Changed_",notify:!0},modelVersion2:{type:String,value:Uk.getStringInitializer("modelVersion2",{defaultValue:""}),observer:"modelVersion2Changed_",notify:!0},modelSignature:{type:String,value:"",notify:!0},modelSignature1:{type:String,value:Uk.getStringInitializer("modelSignature1",
{defaultValue:""}),observer:"modelSignature1Changed_",notify:!0},modelSignature2:{type:String,value:Uk.getStringInitializer("modelSignature2",{defaultValue:""}),observer:"modelSignature2Changed_",notify:!0},maxExamples:{type:Number,value:Uk.getStringInitializer("maxExamples",{defaultValue:"1000"}),observer:"maxExamplesChanged_",notify:!0},labelVocabPath:{type:String,value:Uk.getStringInitializer("labelVocabPath",{defaultValue:""}),observer:"labelVocabPathChanged_",notify:!0},multiClass:{type:Boolean,
notify:!0,value:Uk.getBooleanInitializer("multiClass",{defaultValue:!1}),observer:"multiClassChanged_"},sequenceExamples:{type:Boolean,notify:!0,value:Uk.getBooleanInitializer("sequenceExamples",{defaultValue:!1}),observer:"sequenceExamplesChanged_"},maxClassesToDisplay:{type:Number,value:Uk.getStringInitializer("maxClassesToDisplay",{defaultValue:"5"}),observer:"maxClassesToDisplayChanged_",notify:!0},samplingOdds:{type:Number,value:Uk.getStringInitializer("samplingOdds",{defaultValue:"1"}),observer:"samplingOddsChanged_",
notify:!0},usePredictApi:{type:Boolean,notify:!0,value:Uk.getBooleanInitializer("usePredictApi",{defaultValue:!1}),observer:"usePredictApiChanged_"},predictInputTensor:{type:String,value:Uk.getStringInitializer("predictInputTensor",{defaultValue:"examples"}),observer:"predictInputTensorChanged_",notify:!0},predictOutputTensor:{type:String,value:Uk.getStringInitializer("predictOutputTensor",{defaultValue:"probabilities"}),observer:"predictOutputTensorChanged_",notify:!0}},observers:["updateModelName(modelName1, modelName2)",
"updateInferenceAddress(inferenceAddress1, inferenceAddress2)","updateModelVersion(modelVersion1, modelVersion2)","updateModelSignature(modelSignature1, modelSignature2)"],updateModelName:function(a,b){this.modelName=a+","+b;this.modelName=this.modelName.replace(/(^,)|(,$)/g,"")},updateInferenceAddress:function(a,b){this.inferenceAddress=a+","+b;this.inferenceAddress=this.inferenceAddress.replace(/(^,)|(,$)/g,"")},updateModelVersion:function(a,b){this.modelVersion=a+","+b},updateModelSignature:function(a,
b){this.modelSignature=a+","+b},addModelClicked_:function(){this.hideModelPane2=!this.hideModelPane2},examplesPathChanged_:Uk.getStringObserver("examplesPath",{defaultValue:""}),modelName1Changed_:Uk.getStringObserver("modelName1",{defaultValue:""}),modelName2Changed_:Uk.getStringObserver("modelName2",{defaultValue:""}),inferenceAddress1Changed_:Uk.getStringObserver("inferenceAddress1",{defaultValue:""}),inferenceAddress2Changed_:Uk.getStringObserver("inferenceAddress2",{defaultValue:""}),modelTypeChanged_:Uk.getStringObserver("modelType",
{defaultValue:"classification"}),modelVersion1Changed_:Uk.getStringObserver("modelVersion1",{defaultValue:""}),modelVersion2Changed_:Uk.getStringObserver("modelVersion2",{defaultValue:""}),modelSignature1Changed_:Uk.getStringObserver("modelSignature1",{defaultValue:""}),modelSignature2Changed_:Uk.getStringObserver("modelSignature2",{defaultValue:""}),maxExamplesChanged_:Uk.getStringObserver("maxExamples",{defaultValue:"1000"}),labelVocabPathChanged_:Uk.getStringObserver("labelVocabPath",{defaultValue:""}),
maxClassesToDisplayChanged_:Uk.getStringObserver("maxClassesToDisplay",{defaultValue:"5"}),samplingOddsChanged_:Uk.getStringObserver("samplingOdds",{defaultValue:"1"}),multiClassChanged_:Uk.getBooleanObserver("multiClass",{defaultValue:!1}),sequenceExamplesChanged_:Uk.getBooleanObserver("sequenceExamples",{defaultValue:!1}),hideModelPane2Changed_:Uk.getBooleanObserver("hideModelPane2",{defaultValue:!0}),usePredictApiChanged_:Uk.getBooleanObserver("usePredictApi",{defaultValue:!1}),predictOutputTensorChanged_:Uk.getStringObserver("predictOutputTensor",
{defaultValue:"probabilities"}),predictInputTensorChanged_:Uk.getStringObserver("predictInputTensor",{defaultValue:"examples"}),shouldDisableClassificationControls_:function(a){return"regression"==a},shouldDisableMultiClassControls_:function(a){return!a},shouldDisablePredictTensorControls_:function(a){return!a}});
</script>
</dom-module>










<dom-module id="vz-bar-chart">
  <template>
    <div id="tooltip">
      <table>
        <thead>
          <tr id="tooltip-table-header-row"></tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    <div id="chartdiv"></div>
    <style>
      :host {
        -webkit-user-select: none;
        -moz-user-select: none;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
        flex-shrink: 1;
        position: relative;
        outline: none;
      }
      div {
        -webkit-user-select: none;
        -moz-user-select: none;
        flex-grow: 1;
        flex-shrink: 1;
      }
      td {
        padding-left: 5px;
        padding-right: 5px;
        font-size: 13px;
        opacity: 1;
      }
      #tooltip {
        pointer-events: none;
        position: absolute;
        opacity: 0;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
        font-size: 14px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        border-radius: 4px;
        line-height: 1.4em;
        padding: 8px;
        z-index: 5;
        cursor: none;
        margin-top: 10px;
      }
      .swatch {
        border-radius: 50%;
        width: 14px;
        height: 14px;
        display: block;
        border: 2px solid rgba(0, 0, 0, 0);
      }
      .closest .swatch {
        border: 2px solid white;
      }
      th {
        padding-left: 5px;
        padding-right: 5px;
        text-align: left;
      }

    </style>
  </template>
  <script>//~~WEBPATH~~/vz-bar-chart/vz-bar-chart.js
var Qm;
(function(){Polymer({is:"vz-bar-chart",properties:{data:Object,lines:{type:Object,value:function(){return{}}},colorScale:{type:Object,value:function(){return(new Plottable.Scales.Color).range(d3.schemeCategory10)}},linesColorScale:{type:Object,value:function(){return(new Plottable.Scales.Color).range(d3.schemeCategory10)}},tooltipColumns:{type:Array,value:function(){return[{title:"Name",evaluate:function(b){return b.key}},{title:"X",evaluate:function(b){return b.value.x}},{title:"Y",evaluate:function(b){return b.value.y}}]}},_attached:Boolean,
_chart:Object},observers:["_makeChart(data, lines, colorScale, linesColorScale, tooltipColumns, _attached)"],redraw:function(){this._chart&&this._chart.redraw()},attached:function(){this._attached=!0},detached:function(){this._attached=!1},ready:function(){this.scopeSubtree(this.$.tooltip,!0);this.scopeSubtree(this.$.chartdiv,!0)},_makeChart:function(){this._chart&&this._chart.destroy();var b=d3.select(this.$.tooltip);b=new a(this.data,this.lines,this.colorScale,this.linesColorScale,b,this.tooltipColumns);
var c=d3.select(this.$.chartdiv);b.renderTo(c);this._chart=b}});var a=function(){function b(c,e,f,g,h,l){f.domain(_.sortBy(_.keys(c)));this.data=c;this.lines=e;this.colorScale=f;this.linesColorScale=g;this.tooltip=h;this.outer=this.plot=null;this.buildChart(c,e,f,g);this.setupTooltips(l)}b.prototype.buildChart=function(c,e,f){var g=this;this.outer&&this.outer.destroy();var h=new Plottable.Scales.Category,l=new Plottable.Scales.Linear,n=new Plottable.Axes.Category(h,"bottom"),m=new Plottable.Axes.Numeric(l,
"left"),q=new Plottable.Plots.ClusteredBar;q.x(function(u){return u.x},h);q.y(function(u){return u.y},l);_.keys(c).forEach(function(u){return q.addDataset((new Plottable.Dataset(c[u])).metadata(u))});q.attr("fill",function(u,w,z){return f.scale(z.metadata())});this.plot=q;var r=_.keys(e);if(0<r.length){var v=new Plottable.Plots.Line;v.x(function(u){return u.x},h);v.y(function(u){return u.y},l);r.forEach(function(u){return v.addDataset((new Plottable.Dataset(e[u])).metadata(u))});v.attr("stroke",function(u,
w,z){return g.linesColorScale.scale(z.metadata())});h=new Plottable.Components.Group([q,v]);this.outer=new Plottable.Components.Table([[m,h],[null,n]])}else this.outer=new Plottable.Components.Table([[m,q],[null,n]])};b.prototype.setupTooltips=function(c){var e=this,f=this.tooltip.select("thead tr");f.selectAll("th").data(c).enter().append("th").text(function(h){return h.title});f.insert("th",":first-child");var g=this.plot;f=new Plottable.Interactions.Pointer;f.attachTo(g);f.onPointerMove(function(h){(h=
g.entityNearest(h))&&e.drawTooltips(h,c)});f.onPointerExit(function(){e.tooltip.style("opacity",0)})};b.prototype.drawTooltips=function(c,e){var f=c.datum.x,g=c.dataset.metadata(),h=_.mapValues(this.data,function(m){return _.filter(m,function(q){return q.x==f})});h=_.pickBy(h,function(m){return 0<m.length});h=_.mapValues(h,function(m){return m[0]});h=d3.entries(h);var l=this.tooltip.select("tbody").html("").selectAll("tr").data(h).enter().append("tr");l.style("white-space","nowrap");l.classed("closest",
function(m){return m.key==g});var n=this.colorScale;l.append("td").append("div").classed("swatch",!0).style("background-color",function(m){return n.scale(m.key)});_.each(e,function(m){l.append("td").text(function(q){return m.evaluate(q)})});this.tooltip.style("transform","translate("+c.position.x+"px,"+c.position.y+"px)");this.tooltip.style("opacity",1)};b.prototype.renderTo=function(c){this.targetSVG=c;this.outer.renderTo(c)};b.prototype.redraw=function(){this.outer.redraw()};b.prototype.destroy=
function(){this.outer.destroy()};return b}()})(Qm||(Qm={}));
</script>
</dom-module>





<dom-module id="tf-confusion-matrix">
  <template>
    <style>
      table {
        display: inline-block;
      }
      td {
        text-align: right;
      }
      th, td {
        font-size: 14px;
        padding: 3px;
        font-weight: normal;
      }
      .flex {
        display: flex;
        flex-direction: row-reverse;
      }
      .pred-label {
        text-align: left;
        font-size: 10px;
      }
      .total-label {
        color: #5F6368;
        font-size: 10px;
        text-align: left;
      }
      .total-cell {
        color: #5F6368;
      }
      .actual-label {
        text-align: right;
        font-size: 10px;
      }
      .n-label {
        font-size: 10px;
        vertical-align: bottom;
      }
      .value-cell {
        color: #202124;
        border: 1px solid lightgrey;
      }
      .parenthetical {
        padding-right: 5px;
        width: 50px;
      }
    </style>
    <div id="holder"></div>
  </template>

  <script>//~~WEBPATH~~/tf-interactive-inference-dashboard/tf-confusion-matrix.html.js
Polymer({is:"tf-confusion-matrix",properties:{counts:Object,allItems:{type:Array,value:function(){return[]}},label:String,background:{type:Object,value:d3.color("gray")}},observers:["drawMatrix(counts, allItems)"],ready:function(){this.scopeSubtree(this.$.holder,!0)},drawMatrix:function(a,b){var c=this;this.$.holder.innerHTML="";if(a){var e=b;if(null==e||0==e.length){b=new Set;for(var f=Object.keys(a),g=0;g<f.length;g++){b.add(f[g]);for(var h=Object.keys(a[f[g]]),l=0;l<h.length;l++)b.add(h[l])}e=
Array.from(b.values())}e=e.sort();2==e.length&&"No"==e[0]&&"Yes"==e[1]&&(e=e.reverse());var n=Array(e.length);_.fill(n,0);var m=[];for(b=0;b<e.length;b++)f=Array(e.length),_.fill(f,0),m.push(f);for(b=0;b<e.length;b++)for(f=0;f<e.length;f++)g=e[b],h=e[f],g in a&&h in a[g]&&(m[b][f]=a[g][h]);a=[];var q=0;for(b=0;b<m.length;b++)for(f=m[b].reduce(function(r,v){return r+v},0),a.push([0].concat(m[b]).concat([f])),f=0;f<m.length;f++)n[f]+=m[b][f],q+=m[b][f];b=this.getIndices(m.length+2);h=d3.select(this.$.holder).append("table");
f=h.append("thead");g=h.append("tbody");h=h.append("tfoot");f.append("tr").selectAll("th").data(b).enter().append("th").text(function(r){return 0==r?c.label:r<=m.length?"Predicted "+e[r-1]:"Total"}).attr("class",function(r){return 0==r?"n-label":r<=m.length?"pred-label":"total-label"});a=g.selectAll("tr").data(a).enter().append("tr").selectAll("td").data(function(r,v){return r.map(function(u,w){return 0==w?{value:"Actual "+e[v]}:{value:u,row:v}})}).enter().append("td").attr("class",function(r,v){return 0==
v?"actual-label":v<=m.length?"value-cell":"total-cell"}).style("background",function(r,v){if(0==v||v>m.length)return"#FFFFFF";v=c.background;v.opacity=r.value/q;return v+""}).append("div").classed("flex",!0);a.append("div").classed("parenthetical",function(r,v){return!!v}).text(function(r){return"row"in r?"("+r.value+")":""});a.append("div").text(function(r,v){return 0<v?d3.format(",.1%")(r.value/q):r.value});a=h.append("tr").selectAll("td").data(b).enter().append("td");a.classed("total-label",function(r,
v){return 0==v});a.classed("total-cell",function(r,v){return 0!=v});a=a.append("div").classed("flex",!0);a.append("div").classed("parenthetical",function(r,v){return!!v}).text(function(r){return 0==r?"Total":r<=m.length?"("+n[r-1]+")":""});a.append("div").text(function(r){return 0==r?"":r<=m.length?d3.format(",.1%")(n[r-1]/q):""})}},getIndices:function(a){return Array.apply(null,{length:a}).map(Number.call,Number)}});
</script>
</dom-module>





<dom-module id="tf-inference-viewer">
  <template>
    <style>
      :host {
        display: block;
      }
      .runs-holder {
        padding: 0;
        display: flex;
        flex-direction: column-reverse;
        overflow-y: auto;
        max-height: 200px;
      }
      .row {
        display: flex;
        color: #3C4043;
        font-size: 12px;
      }
      .header {
        color: #80868B;
        font-size: 12px;
        padding: 4px 0;
        border-bottom: solid 1px #DADCE0;
        border-top: solid 1px #DADCE0;
      }
      .dark-row-one {
        background: #cbf0f8;
      }
      .dark-row-two {
        background: #fff3e0;
      }
      .white-row {
        background: white;
      }
      .marker {
        flex: 0.5;
        margin-right: 5px;
      }
      .marker.mark-one {
        background: #007B83;
        padding-left: 1px;
      }
      .marker.mark-two {
        background: #ff9800;
        padding-left: 1px;
      }
      .run {
        flex: 10;
      }
      .multi-model {
        flex: 10;
      }
      .one-model {
        display: none;
      }
      .show-label {
        flex: 20;
        display: flex;
        overflow: hidden;
      }
      .no-label {
        display: none;
      }
      .score {
        flex: 10;
      }
      .arrow {
        flex: 2;
      }
      .delta {
        flex: 10;
      }
      .text {
        margin-top: 4px;
      }
      .green {
        color: green;
      }
      .red {
        color: red;
      }
    </style>
    <div class="row header">
      <div class="marker"></div>
      <div class="run">Run</div>
      <div class$="[[getModelHeaderClass(inferences)]]">Model</div>
      <div class$="[[getLabelHeaderClass(modelType)]]">Label</div>
      <div class="score">[[getScoreLabel(modelType)]]</div>
      <div class="arrow"></div>
      <div class="delta">Delta</div>
    </div>
    <div class="runs-holder">
      <template is="dom-repeat" items="[[inferences]]" as="modelsInference" index-as="runindex">
        <div class="rows-for-run">
          <template is="dom-repeat" items="[[modelsInference]]" as="inference" index-as="modelindex">
            <template is="dom-repeat" items="[[getInferenceList(inference, maxEntriesPerRun)]]">
              <div class$="[[getRowClass(runindex, inferences, modelindex)]]">
                <div class$="[[getMarkerClass(runindex, inferences, modelindex)]]"></div>
                <div class="run text">[[getRunNumber(runindex)]]</div>
                <div class$="[[getModelClass(inferences)]]">
                  <div>[[getModelName(modelNames, modelindex)]]</div>
                </div>
                <div class$="[[getLabelClass(modelType)]]">
                  <div>[[getLabel(item)]]</div>
                </div>
                <div class="score text">[[getPrintableScore(item.score)]]</div>
                <div class="arrow">
                  <iron-icon icon="[[getIcon(runindex, index, modelindex)]]" class$="[[getIconClass(runindex, index, modelindex)]]">
                  </iron-icon>
                </div>
                <div class="delta text">[[getPrintableDelta(runindex, index, modelindex)]]</div>
              </div>
            </template>
        </template></div>
      </template>
    </div>
  </template>

  <script>//~~WEBPATH~~/tf-interactive-inference-dashboard/tf-inference-viewer.html.js
Polymer({is:"tf-inference-viewer",properties:{inferences:Array,modelType:String,modelNames:Array,maxEntriesPerRun:{type:Number,value:5}},getLabel:function(a){var b=a.label;a.vocabLabel&&(b+=" ("+a.vocabLabel+")");return b},getLabelClass:function(a){return"classification"==a?"show-label text":"no-label"},getLabelHeaderClass:function(a){return"classification"==a?"show-label":"no-label"},getModelClass:function(a){return a&&1<a[0].length?"multi-model text":"one-model"},getModelHeaderClass:function(a){return a&&
1<a[0].length?"multi-model":"one-model"},getScoreLabel:function(a){return"classification"==a?"Score":"Value"},getIconClass:function(a,b,c){return this.getIconDecision(a,b,c,"green","red")},getIcon:function(a,b,c){return this.getIconDecision(a,b,c,"icons:arrow-upward","icons:arrow-downward")},getIconDecision:function(a,b,c,e,f){if(0==a)return"";var g=this.inferences[a][c][b].label;b=this.inferences[a][c][b].score;a=this.inferences[a-1][c];for(c=0;c<a.length;c++)if(a[c].label==g){if(a[c].score>b)return f;
if(a[c].score<b)break;return""}return e},getRunNumber:function(a){return a+1},getModelName:function(a,b){return a[b]},getMarkerClass:function(a,b,c){return"marker"+(a==b.length-1?0==c?" mark-one":" mark-two":"")},getRowClass:function(a,b,c){var e="row ";return e=a==b.length-1?e+(0==c?"dark-row-one":"dark-row-two"):e+"white-row"},getInference:function(a){return a},getPrintableScore:function(a){return a.toFixed(3)},getPrintableDelta:function(a,b,c){if(0==a)return"";var e=this.inferences[a][c][b].label;
b=this.inferences[a][c][b].score;a=this.inferences[a-1][c];for(c=0;c<a.length;c++)if(a[c].label==e)return(b-a[c].score).toFixed(6);return""},getInferenceList:function(a,b){return a.slice(0,b)}});
</script>
</dom-module>














<script>//~~WEBPATH~~/facets-dive/lib/bounded-object.js
/*

 Copyright 2017 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var Rm,Sm=Rm||(Rm={});Sm[Sm.Bottom=0]="Bottom";Sm[Sm.Left=1]="Left";Sm[Sm.Right=2]="Right";Sm[Sm.Top=3]="Top";
var Tm=function(){function a(){}a.prototype.shouldBeVisible=function(b,c,e,f){if(void 0!==this.minScale)return this.scaleDown||c>=this.minScale;if(!this.boundingBox)return!0;var g=this.boundingBox;if(g.left>e.x+f.right||g.right<e.x+f.left||g.bottom>e.y+f.top||g.top<e.y+f.bottom)return!1;f=this.elementMargin||{bottom:0,left:0,right:0,top:0};e=void 0===this.width?b.getBoundingClientRect().width+f.left+f.right:this.width;b=void 0===this.height?b.getBoundingClientRect().height+f.top+f.bottom:this.height;
f=isFinite(g.top)&&isFinite(g.bottom)?g.top-g.bottom:Infinity;return(isFinite(g.left)&&isFinite(g.right)?g.right-g.left:Infinity)*c>=e&&f*c>=b};return a}();
</script>

<script>//~~WEBPATH~~/facets-dive/lib/sorting.js
function Um(a,b){return null!==a&&void 0!==a||null!==b&&void 0!==b?null===a||void 0===a?-1:null===b||void 0===b?1:"number"===typeof a&&"number"===typeof b?isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b:"string"!==typeof a?-1:"string"!==typeof b?1:a.localeCompare(b):a===b?0:void 0===a?-1:1}
function Vm(a,b){return null!==a&&void 0!==a||null!==b&&void 0!==b?null===a||void 0===a?-1:null===b||void 0===b?1:"number"===typeof a&&"number"===typeof b?isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:b-a:"string"!==typeof a?-1:"string"!==typeof b?1:-a.localeCompare(b):a===b?0:void 0===a?-1:1}
function Wm(a,b){return null!==a&&void 0!==a||null!==b&&void 0!==b?null===a||void 0===a?-1:null===b||void 0===b?1:"string"===typeof a&&"string"===typeof b?a.localeCompare(b):"number"!==typeof a?-1:"number"!==typeof b?1:isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b:a===b?0:void 0===a?-1:1};
</script>

<script>//~~WEBPATH~~/facets-dive/lib/grid.js
function Xm(a,b,c,e){a=Math.floor(1E-6+c.minWidth/e.itemAspectRatio);return 1<a?b%a/(a-1):0}function Ym(a,b,c,e){a=Math.floor(1E-6+c.minWidth/e.itemAspectRatio);c=Math.ceil(c.items.length/a);return 1<c?Math.floor(b/a)/(c-1):0}
function Zm(a,b){var c="right"===b?1:"middle"===b?.5:0,e="top"===a?1:"middle"===a?.5:0;return function(f,g,h,l){var n=h.innerWidth-l.itemAspectRatio,m=h.innerHeight-1;return{x:Xm(f,g,h,l)/n*(h.minWidth-l.itemAspectRatio)+c*(h.innerWidth-h.minWidth)/n,y:Ym(f,g,h,l)/m*(h.minHeight-1)+e*(h.innerHeight-h.minHeight)/m}}}var $m=Zm("bottom","left"),an,bn=an||(an={});bn[bn.Tight=0]="Tight";bn[bn.Uniform=1]="Uniform";
var cn=function(){function a(b){this.items=b;this.cellMargin=this.itemAspectRatio=1;this.cellPadding={bottom:0,left:0,right:0,top:0};this.targetGridAspectRatio=1;this.minCellAspectRatio=0;this.maxCellAspectRatio=Infinity;this.verticalFacet=function(){return null};this.horizontalFacet=function(){return null};this.verticalKeyCompare=Vm;this.horizontalKeyCompare=Um;this.verticalKeys=[];this.verticalKeysHash={};this.horizontalKeys=[];this.horizontalKeysHash={};this.cells={};this.height=this.width=this.longestCellLength=
0;this.itemPositionSetter=function(c,e,f){c.x=e;c.y=f};this.computeItemPosition=$m;this.horizontalGridAlignment=this.verticalGridAlignment=an.Tight;this.cellItemComparator=null}a.prototype.clear=function(){this.verticalKeys=[];this.verticalKeysHash={};this.horizontalKeys=[];this.horizontalKeysHash={};this.cells={};this.height=this.width=this.longestCellLength=0};a.prototype.arrange=function(){var b=this;this.facetItemsIntoCells();var c=this.computeOptimalCellAspectRatio(this.targetGridAspectRatio),
e=Math.min(this.maxCellAspectRatio,Math.max(this.minCellAspectRatio,c));c=[];for(var f=[],g=0;g<this.verticalKeys.length;g++)for(var h=0;h<this.horizontalKeys.length;h++){var l=this.getOrCreateCell(this.verticalKeys[g],this.horizontalKeys[h]);var n=this.computeCellDimensions(e,l.items.length);l.minWidth=n[0];l.minHeight=n[1];c[g]=Math.max(c[g]||0,l.minHeight);f[h]=Math.max(f[h]||0,l.minWidth)}for(g=0;g<this.verticalKeys.length;g++)for(h=0;h<this.horizontalKeys.length;h++)l=this.getCell(this.verticalKeys[g],
this.horizontalKeys[h]),g<this.verticalKeys.length-1&&(l.siblings.above=this.getCell(this.verticalKeys[g+1],this.horizontalKeys[h])),0<g&&(l.siblings.below=this.getCell(this.verticalKeys[g-1],this.horizontalKeys[h])),0<h&&(l.siblings.left=this.getCell(this.verticalKeys[g],this.horizontalKeys[h-1])),h<this.horizontalKeys.length-1&&(l.siblings.right=this.getCell(this.verticalKeys[g],this.horizontalKeys[h+1]));if(this.verticalGridAlignment===an.Uniform)for(h=Math.max.apply(Math,c),g=0;g<c.length;g++)c[g]=
h;if(this.horizontalGridAlignment===an.Uniform)for(g=Math.max.apply(Math,f),h=0;h<f.length;h++)f[h]=g;for(g=0;g<this.verticalKeys.length;g++)for(h=0;h<this.horizontalKeys.length;h++)l=this.getCell(this.verticalKeys[g],this.horizontalKeys[h]),l.height=c[g],l.width=f[h],l.innerHeight=l.height-this.cellPadding.top-this.cellPadding.bottom,l.innerWidth=l.width-this.cellPadding.left-this.cellPadding.right;n=this.cellMargin*this.itemAspectRatio;for(g=0;g<this.verticalKeys.length;g++)for(h=0;h<this.horizontalKeys.length;h++)l=
this.getCell(this.verticalKeys[g],this.horizontalKeys[h]),l.y=g?this.getCell(this.verticalKeys[g-1],this.horizontalKeys[h]).y+c[g-1]+n:0,l.contentY=l.y+this.cellPadding.bottom,l.x=h?this.getCell(this.verticalKeys[g],this.horizontalKeys[h-1]).x+f[h-1]+n:0,l.contentX=l.x+this.cellPadding.left;this.eachCell(function(m){b.width=Math.max(b.width,m.x+m.width);b.height=Math.max(b.height,m.y+m.height)});this.positionItems()};a.prototype.positionItems=function(){var b=this;this.eachCell(function(c){var e=
Math.max(0,c.innerWidth-b.itemAspectRatio),f=Math.max(0,c.innerHeight-1),g=c.items.slice(0);b.cellItemComparator&&g.sort(b.cellItemComparator);for(var h=0;h<g.length;h++){var l=b.computeItemPosition(g[h],h,c,b);b.itemPositionSetter(g[h],c.contentX+(!l||isNaN(l.x)?0:Math.max(0,Math.min(1,l.x)))*e,c.contentY+(!l||isNaN(l.y)?0:Math.max(0,Math.min(1,l.y)))*f)}})};a.prototype.facetItemsIntoCells=function(){var b=this;this.clear();this.eachItem(function(e){var f=b.getOrCreateCell(b.verticalFacet(e),b.horizontalFacet(e));
f.items.push(e);b.longestCellLength=Math.max(b.longestCellLength,f.items.length)});for(var c in this.verticalKeysHash)this.verticalKeys.push(this.verticalKeysHash[c]);this.verticalKeys.sort(this.verticalKeyCompare);for(c in this.horizontalKeysHash)this.horizontalKeys.push(this.horizontalKeysHash[c]);this.horizontalKeys.sort(this.horizontalKeyCompare)};a.prototype.eachItem=function(b){if(this.items)for(var c=0;c<this.items.length;c++)b.call(this,this.items[c])};a.prototype.eachCell=function(b){for(var c in this.cells)b.call(this,
this.cells[c])};a.prototype.getCompoundKey=function(b,c){return typeof b+"\u001f"+b+"\u001e"+typeof c+"\u001f"+c};a.prototype.getCell=function(b,c){b=this.getCompoundKey(b,c);return b in this.cells?this.cells[b]:null};a.prototype.getCells=function(){var b=this;return Object.keys(this.cells).map(function(c){return b.cells[c]})};a.prototype.getOrCreateCell=function(b,c){var e=this.getCell(b,c);if(e)return e;this.addVerticalKey(b);this.addHorizontalKey(c);var f=this.getCompoundKey(b,c);e={verticalKey:b,
horizontalKey:c,compoundKey:f,items:[],siblings:{}};return this.cells[f]=e};a.prototype.getRow=function(b){for(var c=[],e=0;e<this.horizontalKeys.length;e++){var f=this.getCell(b,this.horizontalKeys[e]);f&&c.push(f)}return c};a.prototype.getColumn=function(b){for(var c=[],e=0;e<this.verticalKeys.length;e++){var f=this.getCell(this.verticalKeys[e],b);f&&c.push(f)}return c};a.prototype.addVerticalKey=function(b){var c=typeof b+"\u001f"+b;c in this.verticalKeysHash||(this.verticalKeysHash[c]=b)};a.prototype.addHorizontalKey=
function(b){var c=typeof b+"\u001f"+b;c in this.horizontalKeysHash||(this.horizontalKeysHash[c]=b)};a.prototype.computeOptimalCellAspectRatio=function(b){var c=this.verticalKeys.length,e=this.horizontalKeys.length;if(!c||!e)return 1;var f=c/e,g=f,h=Infinity,l=0,n=Infinity;c=Math.min(20,Math.max(c,e,this.longestCellLength));for(e=0;e<c;){e++;var m=this.computeGridAspectRatio(f),q=Math.abs(1-m/b);q<h&&(g=f,h=q);if(.001>q)break;m>b?(n=f,f-=(n-l)/2):(l=f,f=isFinite(n)?f+(n-l)/2:2*f)}return g};a.prototype.computeGridAspectRatio=
function(b){for(var c=this.verticalKeys.length,e=this.horizontalKeys.length,f=-Infinity,g=-Infinity,h=-Infinity,l=-Infinity,n=[],m=0;m<c;m++){n[m]=[];for(var q=0;q<e;q++){var r=n[m][q]={width:q?n[m][q-1].width:0,height:m?n[m-1][q].height:0},v=this.getCell(this.verticalKeys[m],this.horizontalKeys[q]);if(v&&v.items&&v.items.length){var u=this.computeCellDimensions(b,v.items.length);v=u[0];u=u[1];r.width+=v;r.height+=u;f=Math.max(f,r.width);g=Math.max(g,u);h=Math.max(h,v);l=Math.max(l,r.height)}}}this.verticalGridAlignment===
an.Uniform&&(l=g*c);this.horizontalGridAlignment===an.Uniform&&(f=h*e);b=this.cellMargin*this.itemAspectRatio;return(f+b*(e-1))/(l+b*(c-1))};a.prototype.computeCellDimensions=function(b,c){var e=[this.itemAspectRatio*(this.cellPadding.left+this.cellPadding.right),this.itemAspectRatio*(this.cellPadding.top+this.cellPadding.bottom)];if(!c)return e;b=Math.min(c,Math.ceil(Math.sqrt(b*c)/this.itemAspectRatio));e[0]+=this.itemAspectRatio*b;e[1]+=Math.ceil(c/b);return e};return a}();
</script>

<script>//~~WEBPATH~~/facets-dive/lib/axis.js
var dn=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),en=function(a){function b(c,e){var f=a.call(this)||this;f.side=c;f.cell=e;switch(c){case Rm.Left:f.minScale=30/e.innerHeight;for(c=e.siblings.left;!(!c||c.items.length||c.siblings.above&&
c.siblings.above.items.length);)c=c.siblings.left;c&&(f.minScale=Math.max(f.minScale,39.2/(e.contentX-(c.contentX+c.innerWidth))));break;case Rm.Bottom:f.minScale=30/e.innerWidth;for(c=e.siblings.below;!(!c||c.items.length||c.siblings.right&&c.siblings.right.items.length);)c=c.siblings.below;c&&(f.minScale=Math.max(f.minScale,39.2/(e.contentY-(c.contentY+c.innerHeight))));break;default:throw Error("Axes for specified side are not implemented.");}return f}dn(b,a);b.prototype.strokeWidth=function(c){return 1.2/
c};b.prototype.path=function(c){var e=4/c,f=6/c;if(this.side===Rm.Left){var g=this.cell.contentX-e-f;e=this.cell.contentY+.6/c;return"M "+g+","+e+" h "+f+" v "+(this.cell.innerHeight-1.2/c)+" h -"+f}return this.side===Rm.Bottom?(g=this.cell.contentX+.6/c,e=this.cell.contentY-e-f,"M "+g+","+e+" v "+f+" h "+(this.cell.innerWidth-1.2/c)+" v -"+f):""};b.prototype.key=function(){return this.cell.compoundKey+"-"+this.side};return b}(Tm);
</script>


<script>//~~WEBPATH~~/facets-dive/lib/data-example.js
</script>



<script>//~~WEBPATH~~/facets-dive/lib/label.js
</script>

<script>//~~WEBPATH~~/facets-dive/lib/layout.js
var fn=function(){function a(){this.grid={bottom:0,left:0,right:0,top:0};this.viewport={height:0,width:0};this.padding={bottom:0,left:0,right:0,top:0}}a.prototype.computeScale=function(){var b=this.viewport.width-this.padding.left-this.padding.right,c=this.viewport.height-this.padding.top-this.padding.bottom;if(isNaN(b)||0>=b||isNaN(c)||0>=c)return NaN;var e=this.grid.right-this.grid.left,f=this.grid.top-this.grid.bottom;return isNaN(e)||0>=e||isNaN(f)||0>=f?NaN:b/c>e/f?c/f:b/e};a.prototype.computeCamera=
function(){var b=this.computeScale();if(isNaN(b)||0>=b)return{position:{x:NaN,y:NaN},frustum:{bottom:NaN,left:NaN,right:NaN,top:NaN}};var c=this.viewport.width/b,e=this.viewport.height/b;return{position:{x:this.grid.left-(c-(this.padding.left+this.padding.right)/b-(this.grid.right-this.grid.left))/2-this.padding.left/b,y:this.grid.top+(e-(this.padding.top+this.padding.bottom)/b-(this.grid.top-this.grid.bottom))/2+this.padding.top/b},frustum:{bottom:-e,left:0,right:c,top:0}}};a.prototype.reducePaddingToFitWidth=
function(b){if(200>b)this.padding.left=0,this.padding.right=0;else if(this.padding.left+this.padding.right+200>b){var c=this.padding.left+this.padding.right;b-=200;this.padding.left=this.padding.left/c*b||0;this.padding.right=this.padding.right/c*b||0}};a.prototype.reducePaddingToFitHeight=function(b){if(200>b)this.padding.top=0,this.padding.bottom=0;else if(this.padding.top+this.padding.bottom+200>b){var c=this.padding.top+this.padding.bottom;b-=200;this.padding.top=this.padding.top/c*b||0;this.padding.bottom=
this.padding.bottom/c*b||0}};return a}();
</script>


<script>//~~WEBPATH~~/facets-dive/lib/text.js
var gn,hn=gn||(gn={});hn[hn.Left=0]="Left";hn[hn.Right=1]="Right";hn[hn.Center=2]="Center";var jn,kn=jn||(jn={});kn[kn.Top=0]="Top";kn[kn.Bottom=1]="Bottom";kn[kn.Middle=2]="Middle";
var ln={x:0,y:0,glyphAspectRatio:.6,lineHeight:1.1,horizontalAlign:gn.Center,verticalAlign:jn.Middle},mn=function(){function a(b){this.settings=Object.assign({},ln,b)}a.prototype.fit=function(b){b=b.trim();var c=this.split(b),e=c.segments,f=this.computeCutoff(e,b.length,c.max),g=f.height;b=f.width*this.settings.glyphAspectRatio;b=b/g>this.settings.width/this.settings.height?this.settings.width/b:this.settings.height/g;c=this.settings.horizontalAlign===gn.Left?0:this.settings.horizontalAlign===gn.Right?
1:.5;g=Math.max(0,this.settings.height-g*b)*(this.settings.verticalAlign===jn.Top?0:this.settings.verticalAlign===jn.Bottom?1:.5);f=this.wrapLines(e,f.cutoff);for(var h=[],l=0;l<f.length;l++){var n=f[l],m=n.endPos,q="";for(n=n.startPos;n<m;n++)q+=e[n].text;h.push({text:q,x:this.settings.x+c*Math.max(0,this.settings.width-q.length*this.settings.glyphAspectRatio*b),y:this.settings.y+g+l*this.settings.lineHeight*b})}return{lines:h,fontSize:b}};a.prototype.split=function(b){for(var c=[],e=1,f=/\s/.test(b.charAt(0)),
g=0,h=0;e<=b.length;){var l=b.charAt(e),n=/\s/.test(l);l.length&&f===n||(h=Math.max(h,e-g),c.push({text:b.substring(g,e),whitespace:f}),g=e);f=n;e++}return{max:h,segments:c}};a.prototype.computeTextRect=function(b,c){for(var e=0,f=0,g=0,h=1,l=0;l<b.length;l++){var n=b[l],m=n.whitespace;n=n.text.length;if(!m||e)m?e+n<=c?e+=n:(f=e=0,h+=this.settings.lineHeight):e+n<=c?f=e+=n:(f?e=f=n:(g=Math.max(g,n),e=f=0),h+=this.settings.lineHeight),g=Math.max(g,f)}return{width:g,height:h}};a.prototype.computeCutoff=
function(b,c,e){for(var f=this.settings.width/this.settings.height,g=e+(c-e)/2,h=g,l=null,n=Infinity,m=Math.min(20,(b.length+1)/2),q=0;q<m;){q++;var r=this.computeTextRect(b,g),v=r.width/r.height*this.settings.glyphAspectRatio,u=Math.abs(1-v/f);u<n&&(h=g,l=r,n=u);if(.01>u)break;v>f?c=g:e=g;g=e+(c-e)/2}return{cutoff:h,width:l.width,height:l.height}};a.prototype.wrapLines=function(b,c){for(var e=[],f=0,g=0,h=0,l=0,n=0;n<b.length;n++){var m=b[n],q=m.whitespace;m=m.text.length;q&&!h?f=g=n+1:q?h+m<=c?
h+=m:(e.push({startPos:f,endPos:g,textLength:l}),h=l=0,f=g=n+1):h+m<=c?(l=h+=m,g=n+1):l?(e.push({startPos:f,endPos:g,textLength:l}),h=l=m,f=n,g=n+1):(e.push({startPos:n,endPos:n+1,textLength:m}),h=l=0,f=g=n+1)}g>f&&e.push({startPos:f,endPos:g,textLength:l});return e};return a}();
</script>


<script>//~~WEBPATH~~/facets-dive/lib/sprite-atlas.js
var nn=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),on=function(a){function b(c,e,f){var g=Math.ceil(Math.sqrt(c)),h=Math.ceil(c/g),l=document.createElement("canvas");l.width=e*g;l.height=f*h;var n=l.getContext("2d");var m=a.call(this,
l)||this;m.capacity=c;m.imageWidth=e;m.imageHeight=f;m.spriteColumns=g;m.spriteRows=h;m.canvas=l;m.context=n;m.minFilter=THREE.LinearFilter;m.magFilter=THREE.LinearFilter;m.drawTimeout=50;m.waitTimeout=1;m.drawQueue=[];m.isDrawQueued=!1;m.lastClearTimestamp=0;m.callbackQueue=[];m.pendingImageCount=0;m.fitter=new mn({x:.125*e,y:.125*f,width:.75*e,height:.75*f});return m}nn(b,a);b.prototype.clearQueues=function(){this.drawQueue=[];this.callbackQueue=[];this.pendingImageCount=0;return this.lastClearTimestamp=
Date.now()};b.prototype.setSpriteImageData=function(c,e,f){this.drawQueue.push({spriteIndex:c,timestamp:Date.now(),imageData:e,callback:f});this.queueDraw()};b.prototype.setAtlasUrl=function(c,e,f){var g=this,h=this.clearQueues(),l=new Image;void 0!==e&&(l.crossOrigin=e);this.pendingImageCount++;l.onerror=function(){g.lastClearTimestamp>h||g.pendingImageCount--};l.onload=function(){if(!(g.lastClearTimestamp>h)&&(g.pendingImageCount--,g.updatePropertiesToMatchImageDimensions(l.width,l.height),g.context.drawImage(l,
0,0,g.canvas.width,g.canvas.height),g.needsUpdate=!0,f&&g.callbackQueue.push({callback:f,args:[l]}),g.onDrawFinished))g.onDrawFinished()};l.src=c};b.prototype.updatePropertiesToMatchImageDimensions=function(c,e){if(c!==this.imageWidth*this.spriteColumns||e!==this.imageHeight*this.spriteRows){var f=c/this.imageWidth,g=e/this.imageHeight;if(f*g<this.capacity)throw Error("Atlas image too small to accommodate atlas capacity.");if(f!==Math.round(f)||g!==Math.round(g))throw Error("Atlas image dimensions do not fit sprite image dimensions.");
this.spriteColumns=f;this.spriteRows=g;this.canvas.width=c;this.canvas.height=e}};b.prototype.postRender=function(){if(!(this.drawQueue.length||0<this.pendingImageCount))for(;this.callbackQueue.length;){var c=this.callbackQueue.shift();c.callback.apply(null,c.args)}};b.prototype.queueDraw=function(){var c=this;this.isDrawQueued||(this.isDrawQueued=!0,setTimeout(function(){c.isDrawQueued&&c.workOnDrawJobs()},this.waitTimeout))};b.prototype.workOnDrawJobs=function(){function c(){var l=h.drawQueue.shift(),
n=l.spriteIndex,m=l.timestamp,q=l.imageData,r=l.image,v=l.callback;if(r){l=h.imageWidth;var u=h.imageHeight,w=n%h.spriteColumns*l,z=u*Math.floor(n/h.spriteColumns);h.context.clearRect(w,z,l,u);h.context.drawImage(r,w,z,l,u);"function"===typeof v&&h.callbackQueue.push({callback:v,args:[n]})}else if(q&&"text"===q.type){r=n%h.spriteColumns*h.imageWidth;l=h.imageHeight*Math.floor(n/h.spriteColumns);z=r+h.imageWidth/2;var A=l+h.imageHeight/2;u=h.fitter.fit(q.data+"");w=h.context;w.clearRect(r,l,h.imageWidth,
h.imageHeight);w.save();w.translate(z,A);w.scale(h.imageWidth,h.imageHeight);w.beginPath();w.arc(0,0,.5,0,2*Math.PI);w.restore();w.fillStyle="#555555";w.fill();w.fillStyle="white";w.textBaseline="hanging";w.font=(q.special?"italic":"bold")+" "+u.fontSize+"px 'Roboto Mono', 'Consolas', 'Menlo', monospace";z=u.lines;for(A=0;A<z.length;A++){var E=z[A];w.fillText(E.text,r+E.x,l+E.y,E.text.length*h.fitter.settings.glyphAspectRatio*u.fontSize)}"function"===typeof v&&h.callbackQueue.push({callback:v,args:[n]})}else if(q){var C=
new Image;h.pendingImageCount++;C.onload=function(){f<e.lastClearTimestamp||(e.pendingImageCount--,e.drawQueue.unshift({spriteIndex:n,timestamp:m,image:C,callback:v}),e.queueDraw())};C.onerror=function(){f<e.lastClearTimestamp||(e.pendingImageCount--,e.drawQueue.push({spriteIndex:n,timestamp:m,imageData:q,callback:v}),e.queueDraw())};C.src="svg"===q.type?URL.createObjectURL(new Blob([q.data],{type:"image/svg+xml;charset\x3dutf-8"})):"data:"+q.type+";base64,"+q.data}}var e=this;this.isDrawQueued=!1;
for(var f=Date.now(),g=f+(this.drawTimeout||Infinity),h=this;this.drawQueue.length&&Date.now()<g;)c();if(this.drawQueue.length||0<this.pendingImageCount)this.queueDraw();else if(this.needsUpdate=!0,this.onDrawFinished)this.onDrawFinished()};return b}(THREE.Texture);
</script>



<script>//~~WEBPATH~~/facets-dive/lib/sprite-material.js
var pn=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),sn=function(a){function b(c,e){return a.call(this,{vertexShader:qn,fragmentShader:rn,uniforms:{time:{type:"f",value:0},defaultTexture:{type:"t",value:c},spriteAtlas:{type:"t",
value:e},spriteColumns:{type:"f",value:e?e.spriteColumns:1},spriteRows:{type:"f",value:e?e.spriteRows:1}},transparent:!0})||this}pn(b,a);Object.defineProperty(b.prototype,"time",{get:function(){return this.uniforms.time.value},set:function(c){this.uniforms.time.value=c},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"defaultTexture",{get:function(){return this.uniforms.defaultTexture.value},set:function(c){this.uniforms.defaultTexture.value=c},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"spriteAtlas",{get:function(){return this.uniforms.spriteAtlas.value},set:function(c){this.uniforms.spriteAtlas.value=c},enumerable:!0,configurable:!0});b.prototype.updateAtlasUniforms=function(){this.uniforms.spriteColumns.value=this.spriteAtlas.spriteColumns;this.uniforms.spriteRows.value=this.spriteAtlas.spriteRows};b.prototype.applyEasing=function(c){return.5>c?4*c*c*c:4*(c-1)*(c-1)*(c-1)+1};return b}(THREE.RawShaderMaterial),qn="\n\n  precision highp float;\n  precision highp int;\n\n  #define SHADER_NAME SpriteMaterial\n\n  // Standard uniforms provided by THREE.js for projecting through the camera.\n  uniform mat4 modelViewMatrix;\n  uniform mat4 projectionMatrix;\n\n  uniform float time;\n\n  uniform float spriteColumns;\n  uniform float spriteRows;\n\n  attribute vec3 position;\n  attribute vec3 basePosition;\n\n  attribute vec4 color;\n  attribute vec4 baseColor;\n\n  attribute float opacity;\n  attribute float baseOpacity;\n\n  attribute float timestamp;\n  attribute float baseTimestamp;\n\n  attribute float vertexIndex;\n\n  attribute float textureIndex;\n  attribute float baseTextureIndex;\n\n  attribute float textureTimestamp;\n  attribute float baseTextureTimestamp;\n\n  // Computed UV coordinates into the defaultTexture based on the vertexIndex.\n  varying vec2 vDefaultUv;\n\n  // Computed UV coordinates into the sprite texture atlas.\n  varying vec2 vSpriteUv;\n\n  // Interpolated color used by the fragment shader.\n  varying vec4 vColor;\n\n  // Interpolated opacity used by the fragment shader.\n  varying float vOpacity;\n\n  // Degree of mixing between base and current texture.\n  varying float vTextureMix;\n\n  float applyEasing(float t) {\n    return t \x3c 0.5 ? 4.0 * t * t * t :\n      4.0 * (t - 1.0) * (t - 1.0) * (t - 1.0) + 1.0;\n  }\n\n  void main() {\n\n    // Compute default UVs. A \x3d\x3e (0,0), B \x3d\x3e (1,0), etc.\n    vDefaultUv.x \x3d mod(floor((vertexIndex + 1.0) / 2.0), 2.0);\n    vDefaultUv.y \x3d mod(floor(vertexIndex / 2.0), 2.0);\n\n    // Determine the row and column indices for this sprite.\n    float spriteIndex \x3d floor(vertexIndex / 4.0) + 0.5;\n    float columnIndex \x3d floor(mod(spriteIndex, spriteColumns));\n    float rowIndex \x3d spriteRows - 1.0 - floor(spriteIndex / spriteColumns);\n\n    // Compute sprite UVs from row and column indices.\n    vSpriteUv.x \x3d (columnIndex + vDefaultUv.x) / spriteColumns;\n    vSpriteUv.y \x3d (rowIndex + vDefaultUv.y) / spriteRows;\n\n    float blend \x3d applyEasing(smoothstep(baseTimestamp, timestamp, time));\n\n    vTextureMix \x3d mix(baseTextureIndex, textureIndex,\n        smoothstep(baseTextureTimestamp, textureTimestamp, time));\n\n    vColor \x3d mix(baseColor, color, blend);\n\n    vOpacity \x3d mix(baseOpacity, opacity, blend);\n\n    gl_Position \x3d projectionMatrix * modelViewMatrix *\n        vec4(mix(basePosition, position, vec3(blend)), 1.0);\n\n  }\n\n",
rn="\n\n  precision highp float;\n  precision highp int;\n\n  #define SHADER_NAME SpriteMaterial\n\n  // Lightness that should ideally exactly match the vColor.\n  #define TARGET_LIGHTNESS 0.6\n\n  uniform float time;\n\n  uniform sampler2D defaultTexture;\n  uniform sampler2D spriteAtlas;\n\n  varying vec2 vDefaultUv;\n  varying vec2 vSpriteUv;\n  varying vec4 vColor;\n  varying float vOpacity;\n  varying float vTextureMix;\n\n  // Compute relative luminance from RGB.\n  float rgbToL(vec3 rgb) {\n    return dot(rgb, vec3(0.3, 0.59, 0.11));\n  }\n\n  // Apply luminance easing.\n  float easeL(float l) {\n    return 1.0 - (1.0 - l) * (1.0 - l) * (1.0 - l);\n  }\n\n  void main() {\n    if (vOpacity \x3c\x3d 0.05) {\n      discard;\n    }\n\n    // Interpolate between default texture and sprite texture.\n    vec4 defaultColor \x3d\n      vTextureMix \x3c 1.0 ? texture2D(defaultTexture, vDefaultUv) : vec4(0.0);\n    vec4 spriteColor \x3d\n      vTextureMix \x3e 0.0 ? texture2D(spriteAtlas, vSpriteUv) : vec4(0.0);\n    vec4 mixedColor \x3d mix(defaultColor, spriteColor, vTextureMix);\n\n    // Lightness of the mixed pixel.\n    float mixedL \x3d rgbToL(mixedColor.rgb);\n\n    // Using the mixed and target lightness, determine the color that's between\n    // black, vColor and white.\n    vec3 color \x3d mixedL \x3c TARGET_LIGHTNESS ?\n        mix(vec3(0.0), vColor.rgb, easeL(mixedL / TARGET_LIGHTNESS)) :\n        mix(vec3(1.0), vColor.rgb,\n            easeL((1.0 - mixedL) / (1.0 - TARGET_LIGHTNESS)));\n\n    vec3 finalColor \x3d mix(mixedColor.rgb, color, vColor.a);\n\n    // Apply opacity.\n    gl_FragColor \x3d vec4(finalColor, mixedColor.a * vOpacity);\n  }\n";
</script>


<script>//~~WEBPATH~~/facets-dive/lib/sprite-mesh.js
var tn=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),un=function(){function a(b,c){this._spriteMesh=b;this._spriteIndex=c}Object.defineProperty(a.prototype,"spriteMesh",{get:function(){return this._spriteMesh},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"spriteIndex",{get:function(){return this._spriteIndex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"x",{get:function(){return this._spriteMesh.getX(this._spriteIndex)},set:function(b){this._spriteMesh.setX(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"y",{get:function(){return this._spriteMesh.getY(this._spriteIndex)},set:function(b){this._spriteMesh.setY(this._spriteIndex,b)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"z",{get:function(){return this._spriteMesh.getZ(this._spriteIndex)},set:function(b){this._spriteMesh.setZ(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"r",{get:function(){return this._spriteMesh.getR(this._spriteIndex)},set:function(b){this._spriteMesh.setR(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"g",{get:function(){return this._spriteMesh.getG(this._spriteIndex)},set:function(b){this._spriteMesh.setG(this._spriteIndex,
b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"b",{get:function(){return this._spriteMesh.getB(this._spriteIndex)},set:function(b){this._spriteMesh.setB(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"a",{get:function(){return this._spriteMesh.getA(this._spriteIndex)},set:function(b){this._spriteMesh.setA(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"opacity",{get:function(){return this._spriteMesh.getOpacity(this._spriteIndex)},
set:function(b){this._spriteMesh.setOpacity(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"timestamp",{get:function(){return this._spriteMesh.getTimestamp(this._spriteIndex)},set:function(b){this._spriteMesh.setTimestamp(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseX",{get:function(){return this._spriteMesh.getBaseX(this._spriteIndex)},set:function(b){this._spriteMesh.setBaseX(this._spriteIndex,b)},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"baseY",{get:function(){return this._spriteMesh.getBaseY(this._spriteIndex)},set:function(b){this._spriteMesh.setBaseY(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseZ",{get:function(){return this._spriteMesh.getBaseZ(this._spriteIndex)},set:function(b){this._spriteMesh.setBaseZ(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseR",{get:function(){return this._spriteMesh.getBaseR(this._spriteIndex)},
set:function(b){this._spriteMesh.setBaseR(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseG",{get:function(){return this._spriteMesh.getBaseG(this._spriteIndex)},set:function(b){this._spriteMesh.setBaseG(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseB",{get:function(){return this._spriteMesh.getBaseB(this._spriteIndex)},set:function(b){this._spriteMesh.setBaseB(this._spriteIndex,b)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"baseA",{get:function(){return this._spriteMesh.getBaseA(this._spriteIndex)},set:function(b){this._spriteMesh.setBaseA(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseOpacity",{get:function(){return this._spriteMesh.getBaseOpacity(this._spriteIndex)},set:function(b){this._spriteMesh.setBaseOpacity(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseTimestamp",{get:function(){return this._spriteMesh.getBaseTimestamp(this._spriteIndex)},
set:function(b){this._spriteMesh.setBaseTimestamp(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureIndex",{get:function(){return this._spriteMesh.getTextureIndex(this._spriteIndex)},set:function(b){this._spriteMesh.setTextureIndex(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseTextureIndex",{get:function(){return this._spriteMesh.getBaseTextureIndex(this._spriteIndex)},set:function(b){this._spriteMesh.setBaseTextureIndex(this._spriteIndex,
b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureTimestamp",{get:function(){return this._spriteMesh.getTextureTimestamp(this._spriteIndex)},set:function(b){this._spriteMesh.setTextureTimestamp(this._spriteIndex,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseTextureTimestamp",{get:function(){return this._spriteMesh.getBaseTextureTimestamp(this._spriteIndex)},set:function(b){this._spriteMesh.setBaseTextureTimestamp(this._spriteIndex,b)},enumerable:!0,
configurable:!0});a.prototype.rebase=function(b){this._spriteMesh.rebase(this._spriteIndex,b)};a.prototype.setSpriteImageData=function(b,c){this._spriteMesh.setSpriteImageData(this._spriteIndex,b,c)};a.prototype.switchTextures=function(b,c){this._spriteMesh.switchTextures(this._spriteIndex,b,c)};return a}(),wn=function(a){function b(c,e,f){void 0===e&&(e=32);void 0===f&&(f=32);var g=a.call(this)||this;g.capacity=c;g.imageWidth=e;g.imageHeight=f;g.nextIndex=0;g.spriteWidth=g.imageWidth/g.imageHeight;
g.spriteHeight=1;g.geometry=new THREE.BufferGeometry;g.positionData=new Float32Array(12*c);g.positionAttribute=new THREE.BufferAttribute(g.positionData,3);g.positionAttribute.setDynamic(!0);g.geometry.addAttribute("position",g.positionAttribute);g.basePositionData=new Float32Array(12*c);g.basePositionAttribute=new THREE.BufferAttribute(g.basePositionData,3);g.basePositionAttribute.setDynamic(!0);g.geometry.addAttribute("basePosition",g.basePositionAttribute);g.colorData=new Uint8Array(16*c);g.colorAttribute=
new THREE.BufferAttribute(g.colorData,4);g.colorAttribute.normalized=!0;g.colorAttribute.setDynamic(!0);g.geometry.addAttribute("color",g.colorAttribute);g.baseColorData=new Uint8Array(16*c);g.baseColorAttribute=new THREE.BufferAttribute(g.baseColorData,4);g.baseColorAttribute.normalized=!0;g.baseColorAttribute.setDynamic(!0);g.geometry.addAttribute("baseColor",g.baseColorAttribute);g.opacityData=new Float32Array(4*c);g.opacityAttribute=new THREE.BufferAttribute(g.opacityData,1);g.opacityAttribute.setDynamic(!0);
g.geometry.addAttribute("opacity",g.opacityAttribute);g.baseOpacityData=new Float32Array(4*c);g.baseOpacityAttribute=new THREE.BufferAttribute(g.baseOpacityData,1);g.baseOpacityAttribute.setDynamic(!0);g.geometry.addAttribute("baseOpacity",g.baseOpacityAttribute);g.timestampData=new Float32Array(4*c);g.timestampAttribute=new THREE.BufferAttribute(g.timestampData,1);g.timestampAttribute.setDynamic(!0);g.geometry.addAttribute("timestamp",g.timestampAttribute);g.baseTimestampData=new Float32Array(4*
c);g.baseTimestampAttribute=new THREE.BufferAttribute(g.baseTimestampData,1);g.baseTimestampAttribute.setDynamic(!0);g.geometry.addAttribute("baseTimestamp",g.baseTimestampAttribute);g.faceIndexData=new Uint32Array(6*c);for(var h=0;h<c;h++){var l=6*h,n=4*h;g.faceIndexData[l+0]=n+0;g.faceIndexData[l+1]=n+1;g.faceIndexData[l+2]=n+2;g.faceIndexData[l+3]=n+0;g.faceIndexData[l+4]=n+2;g.faceIndexData[l+5]=n+3}g.faceIndexAttribute=new THREE.BufferAttribute(g.faceIndexData,1);g.geometry.setIndex(g.faceIndexAttribute);
g.textureIndexData=new Float32Array(4*c);g.textureIndexAttribute=new THREE.BufferAttribute(g.textureIndexData,1);g.textureIndexAttribute.setDynamic(!0);g.geometry.addAttribute("textureIndex",g.textureIndexAttribute);g.baseTextureIndexData=new Float32Array(4*c);g.baseTextureIndexAttribute=new THREE.BufferAttribute(g.baseTextureIndexData,1);g.baseTextureIndexAttribute.setDynamic(!0);g.geometry.addAttribute("baseTextureIndex",g.baseTextureIndexAttribute);g.textureTimestampData=new Float32Array(4*c);
g.textureTimestampAttribute=new THREE.BufferAttribute(g.textureTimestampData,1);g.textureTimestampAttribute.setDynamic(!0);g.geometry.addAttribute("textureTimestamp",g.textureTimestampAttribute);g.baseTextureTimestampData=new Float32Array(4*c);g.baseTextureTimestampAttribute=new THREE.BufferAttribute(g.baseTextureTimestampData,1);g.baseTextureTimestampAttribute.setDynamic(!0);g.geometry.addAttribute("baseTextureTimestamp",g.baseTextureTimestampAttribute);l=4*c;g.vertexIndexData=new Float32Array(l);
for(h=0;h<l;h++)g.vertexIndexData[h]=h;g.vertexIndexAttribute=new THREE.BufferAttribute(g.vertexIndexData,1);g.geometry.addAttribute("vertexIndex",g.vertexIndexAttribute);g.defaultTextureCanvas=g.createDefaultTextureCanvas();g.defaultTexture=new THREE.Texture(g.defaultTextureCanvas);g.defaultTexture.minFilter=THREE.LinearFilter;g.defaultTexture.magFilter=THREE.NearestFilter;g.defaultTexture.needsUpdate=!0;g.spriteAtlas=new on(c,e,f);g.material=new sn(g.defaultTexture,g.spriteAtlas);g.onBeforeRender=
function(){g.material.updateAtlasUniforms()};g.constructionTimestamp=Date.now();g.time=g.constructionTimestamp;g.frustumCulled=!1;return g}tn(b,a);b.prototype.createSprite=function(){return new un(this,this.nextIndex++)};Object.defineProperty(b.prototype,"time",{get:function(){return this.material.time+this.constructionTimestamp},set:function(c){this.material.time=c-this.constructionTimestamp},enumerable:!0,configurable:!0});b.prototype.createDefaultTextureCanvas=function(){var c=this,e=this.defaultTextureCanvas=
document.createElement("canvas"),f=e.width=this.imageWidth,g=e.height=this.imageHeight,h=e.getContext("2d"),l=new Image;l.onload=function(){h.drawImage(l,0,0,f,g);c.defaultTexture.needsUpdate=!0};l.src=URL.createObjectURL(new Blob([vn],{type:"image/svg+xml;charset\x3dutf-8"}));return e};b.prototype.getX=function(c){return this.positionData[12*c]};b.prototype.setX=function(c,e){c*=12;this.positionData[c+0]=e;this.positionData[c+3]=e+this.spriteWidth;this.positionData[c+6]=e+this.spriteWidth;this.positionData[c+
9]=e;this.positionAttribute.needsUpdate=!0};b.prototype.getY=function(c){return this.positionData[12*c+1]};b.prototype.setY=function(c,e){c*=12;this.positionData[c+1]=e;this.positionData[c+4]=e;this.positionData[c+7]=e+this.spriteHeight;this.positionData[c+10]=e+this.spriteHeight;this.positionAttribute.needsUpdate=!0};b.prototype.getZ=function(c){return this.positionData[12*c+2]};b.prototype.setZ=function(c,e){c*=12;this.positionData[c+2]=e;this.positionData[c+5]=e;this.positionData[c+8]=e;this.positionData[c+
11]=e;this.positionAttribute.needsUpdate=!0};b.prototype.getR=function(c){return this.colorData[16*c]};b.prototype.setR=function(c,e){c*=16;this.colorData[c+0]=e;this.colorData[c+4]=e;this.colorData[c+8]=e;this.colorData[c+12]=e;this.colorAttribute.needsUpdate=!0};b.prototype.getG=function(c){return this.colorData[16*c+1]};b.prototype.setG=function(c,e){c*=16;this.colorData[c+1]=e;this.colorData[c+5]=e;this.colorData[c+9]=e;this.colorData[c+13]=e;this.colorAttribute.needsUpdate=!0};b.prototype.getB=
function(c){return this.colorData[16*c+2]};b.prototype.setB=function(c,e){c*=16;this.colorData[c+2]=e;this.colorData[c+6]=e;this.colorData[c+10]=e;this.colorData[c+14]=e;this.colorAttribute.needsUpdate=!0};b.prototype.getA=function(c){return this.colorData[16*c+3]};b.prototype.setA=function(c,e){c*=16;this.colorData[c+3]=e;this.colorData[c+7]=e;this.colorData[c+11]=e;this.colorData[c+15]=e;this.colorAttribute.needsUpdate=!0};b.prototype.getBaseX=function(c){return this.basePositionData[12*c]};b.prototype.setBaseX=
function(c,e){c*=12;this.basePositionData[c+0]=e;this.basePositionData[c+3]=e+this.spriteWidth;this.basePositionData[c+6]=e+this.spriteWidth;this.basePositionData[c+9]=e;this.basePositionAttribute.needsUpdate=!0};b.prototype.getBaseY=function(c){return this.basePositionData[12*c+1]};b.prototype.setBaseY=function(c,e){c*=12;this.basePositionData[c+1]=e;this.basePositionData[c+4]=e;this.basePositionData[c+7]=e+this.spriteHeight;this.basePositionData[c+10]=e+this.spriteHeight;this.basePositionAttribute.needsUpdate=
!0};b.prototype.getBaseZ=function(c){return this.basePositionData[12*c+2]};b.prototype.setBaseZ=function(c,e){c*=12;this.basePositionData[c+2]=e;this.basePositionData[c+5]=e;this.basePositionData[c+8]=e;this.basePositionData[c+11]=e;this.basePositionAttribute.needsUpdate=!0};b.prototype.getBaseR=function(c){return this.baseColorData[16*c]};b.prototype.setBaseR=function(c,e){c*=16;this.baseColorData[c+0]=e;this.baseColorData[c+4]=e;this.baseColorData[c+8]=e;this.baseColorData[c+12]=e;this.baseColorAttribute.needsUpdate=
!0};b.prototype.getBaseG=function(c){return this.baseColorData[16*c+1]};b.prototype.setBaseG=function(c,e){c*=16;this.baseColorData[c+1]=e;this.baseColorData[c+5]=e;this.baseColorData[c+9]=e;this.baseColorData[c+13]=e;this.baseColorAttribute.needsUpdate=!0};b.prototype.getBaseB=function(c){return this.baseColorData[16*c+2]};b.prototype.setBaseB=function(c,e){c*=16;this.baseColorData[c+2]=e;this.baseColorData[c+6]=e;this.baseColorData[c+10]=e;this.baseColorData[c+14]=e;this.baseColorAttribute.needsUpdate=
!0};b.prototype.getBaseA=function(c){return this.baseColorData[16*c+3]};b.prototype.setBaseA=function(c,e){c*=16;this.baseColorData[c+3]=e;this.baseColorData[c+7]=e;this.baseColorData[c+11]=e;this.baseColorData[c+15]=e;this.baseColorAttribute.needsUpdate=!0};b.prototype.getOpacity=function(c){return this.opacityData[4*c]};b.prototype.setOpacity=function(c,e){c*=4;this.opacityData[c+0]=e;this.opacityData[c+1]=e;this.opacityData[c+2]=e;this.opacityData[c+3]=e;this.opacityAttribute.needsUpdate=!0};b.prototype.getBaseOpacity=
function(c){return this.baseOpacityData[4*c]};b.prototype.setBaseOpacity=function(c,e){c*=4;this.baseOpacityData[c+0]=e;this.baseOpacityData[c+1]=e;this.baseOpacityData[c+2]=e;this.baseOpacityData[c+3]=e;this.baseOpacityAttribute.needsUpdate=!0};b.prototype.getTimestamp=function(c){return this.timestampData[4*c]+this.constructionTimestamp};b.prototype.setTimestamp=function(c,e){c*=4;e-=this.constructionTimestamp;this.timestampData[c+0]=e;this.timestampData[c+1]=e;this.timestampData[c+2]=e;this.timestampData[c+
3]=e;this.timestampAttribute.needsUpdate=!0};b.prototype.getBaseTimestamp=function(c){return this.baseTimestampData[4*c]+this.constructionTimestamp};b.prototype.setBaseTimestamp=function(c,e){c*=4;e-=this.constructionTimestamp;this.baseTimestampData[c+0]=e;this.baseTimestampData[c+1]=e;this.baseTimestampData[c+2]=e;this.baseTimestampData[c+3]=e;this.baseTimestampAttribute.needsUpdate=!0};b.prototype.getTextureIndex=function(c){return this.textureIndexData[4*c]};b.prototype.setTextureIndex=function(c,
e){c*=4;this.textureIndexData[c+0]=e;this.textureIndexData[c+1]=e;this.textureIndexData[c+2]=e;this.textureIndexData[c+3]=e;this.textureIndexAttribute.needsUpdate=!0};b.prototype.getBaseTextureIndex=function(c){return this.baseTextureIndexData[4*c]};b.prototype.setBaseTextureIndex=function(c,e){c*=4;this.baseTextureIndexData[c+0]=e;this.baseTextureIndexData[c+1]=e;this.baseTextureIndexData[c+2]=e;this.baseTextureIndexData[c+3]=e;this.baseTextureIndexAttribute.needsUpdate=!0};b.prototype.getTextureTimestamp=
function(c){return this.textureTimestampData[4*c]+this.constructionTimestamp};b.prototype.setTextureTimestamp=function(c,e){c*=4;e-=this.constructionTimestamp;this.textureTimestampData[c+0]=e;this.textureTimestampData[c+1]=e;this.textureTimestampData[c+2]=e;this.textureTimestampData[c+3]=e;this.textureTimestampAttribute.needsUpdate=!0};b.prototype.getBaseTextureTimestamp=function(c){return this.baseTextureTimestampData[4*c]+this.constructionTimestamp};b.prototype.setBaseTextureTimestamp=function(c,
e){c*=4;e-=this.constructionTimestamp;this.baseTextureTimestampData[c+0]=e;this.baseTextureTimestampData[c+1]=e;this.baseTextureTimestampData[c+2]=e;this.baseTextureTimestampData[c+3]=e;this.baseTextureTimestampAttribute.needsUpdate=!0};b.prototype.rebase=function(c,e){function f(n,m){return n*l+m*(1-l)}e=void 0===e?this.time:e;var g=this.getBaseTimestamp(c),h=this.getTimestamp(c),l=e>=h?1:e<=g?0:this.material.applyEasing((e-g)/(h-g));this.setBaseX(c,f(this.getX(c),this.getBaseX(c)));this.setBaseY(c,
f(this.getY(c),this.getBaseY(c)));this.setBaseZ(c,f(this.getZ(c),this.getBaseZ(c)));this.setBaseR(c,f(this.getR(c),this.getBaseR(c)));this.setBaseG(c,f(this.getG(c),this.getBaseG(c)));this.setBaseB(c,f(this.getB(c),this.getBaseB(c)));this.setBaseA(c,f(this.getA(c),this.getBaseA(c)));this.setBaseOpacity(c,f(this.getOpacity(c),this.getBaseOpacity(c)));e=e>=h?e:f(h,g);this.setBaseTimestamp(c,e)};b.prototype.setSpriteImageData=function(c,e,f){this.spriteAtlas.setSpriteImageData(c,e,f)};b.prototype.switchTextures=
function(c,e,f){var g=this.getTextureIndex(c);this.setBaseTextureIndex(c,g);this.setTextureIndex(c,0===g?1:0);this.setBaseTextureTimestamp(c,e);this.setTextureTimestamp(c,f)};b.prototype.findSprites=function(c,e){for(var f=[],g=0;g<this.capacity;g++){var h=12*g;c>=this.positionData[h+0]&&c<=this.positionData[h+6]&&e>=this.positionData[h+1]&&e<=this.positionData[h+7]&&f.push(g)}return f};return b}(THREE.Mesh),vn='\n\x3csvg version\x3d"1.1"\n     baseProfile\x3d"full"\n     width\x3d"128" height\x3d"128"\n     xmlns\x3d"http://www.w3.org/2000/svg"\n     xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\n  \x3cdefs\x3e\n    \x3clinearGradient id\x3d"linearGradient3774"\x3e\n      \x3cstop\n         style\x3d"stop-color:#808080;stop-opacity:1;"\n         offset\x3d"0" /\x3e\n      \x3cstop\n         style\x3d"stop-color:#555555;stop-opacity:1;"\n         offset\x3d"1" /\x3e\n    \x3c/linearGradient\x3e\n    \x3cradialGradient\n       xlink:href\x3d"#linearGradient3774"\n       id\x3d"radialGradient3780"\n       cx\x3d"80"\n       cy\x3d"40"\n       fx\x3d"80"\n       fy\x3d"40"\n       r\x3d"80"\n       gradientUnits\x3d"userSpaceOnUse"\n       spreadMethod\x3d"pad" /\x3e\n  \x3c/defs\x3e\n  \x3ccircle cx\x3d"50%" cy\x3d"50%" r\x3d"50%" fill\x3d"url(#radialGradient3780)" /\x3e\n\x3c/svg\x3e\n';
</script>

<script>//~~WEBPATH~~/facets-dive/lib/wordtree.js
var xn=/\b[-'\w]+\b/g;function yn(a){return typeof a+"\u001f"+a}
function zn(a){function b(n,m){for(var q=0;q<n.length;q++)m[n[q]]=!0}if(2>a.valueCount)return null;for(var c={},e=a;e;)b(e.commonWords,c),e=e.parent;for(e=0;e<a.children.length;e++)b(a.children[e].commonWords,c);e={};for(var f in a.valueHash){var g=a.valueHash[f],h=g.count;g=g.words;for(var l in g)l in c||(e[l]=(e[l]||0)+h,e[l]===a.totalCount&&(a.commonWords.push(l),c[l]=!0,delete e[l]))}a=null;c=0;for(l in e)e[l]>c&&(a=l,c=e[l]);return a}
function An(a){function b(u){u.order=++v;for(var w=0;w<u.children.length;w++)b(u.children[w])}function c(u){return u.valueCount+u.nonValueCount}var e={parent:null,commonWords:[],level:1,order:0,totalCount:0,valueHash:{},valueCount:0,nonValueCount:0,children:[]},f={root:e,nodeHash:{},highestLevel:1,levelHash:{1:e}},g;for(g in a)if(a.hasOwnProperty(g)){var h=a[g],l=h.value,n=h.count;h=h.words;"string"===typeof l?(e.valueHash[g]={value:l,count:n,words:h},e.valueCount+=n):e.nonValueCount+=n;e.totalCount+=
n;f.nodeHash[g]=e}a=e.level;if(e.nonValueCount){a++;var m={parent:e,commonWords:[],level:a,order:0,totalCount:e.nonValueCount,valueHash:{},valueCount:0,nonValueCount:e.nonValueCount,children:[]};e.nonValueCount=0;e.children.push(m);f.highestLevel=a;f.levelHash[a]=m;for(g in f.nodeHash)g in e.valueHash||(f.nodeHash[g]=m)}for(e=[e];100>a&&e.length;){l=0;n=c(e[l]);for(h=1;h<e.length;h++)m=c(e[h]),m>n&&(l=h,n=m);var q=e[l],r=zn(q);if(r)for(g in a++,m={parent:q,commonWords:[r],level:a,order:0,totalCount:0,
valueHash:{},valueCount:0,nonValueCount:0,children:[]},q.children.push(m),e.push(m),q.valueHash)q.valueHash.hasOwnProperty(g)&&(h=q.valueHash[g],l=h.value,n=h.count,(h=h.words)&&r in h&&(m.valueHash[g]={value:l,count:n,words:h},m.valueCount+=n,m.totalCount+=n,delete q.valueHash[g],q.valueCount-=n,f.nodeHash[g]=m,f.highestLevel=a,f.levelHash[a]=m));else e.splice(l,1)}var v=0;b(f.root);return f};
</script>

<script>//~~WEBPATH~~/facets-dive/lib/stats.js
var Bn=function(){function a(){this.uniqueCount=this.totalCount=0;this.valueHash={};this.otherCount=this.stringCount=this.integerCount=this.numberCount=0;this.stringLengthsCount=this.stringMeanLength=this.stringMaxLength=this.stringMinLength=this.numberMax=this.numberMin=null;this.stringLengthsHash={};this.totalWordCount=this.multiwordCount=0;this.wordCounts={};this.uniqueWordCount=0;this.wordTree=null}a.prototype.isNumeric=function(){return 0<this.numberCount&&null!==this.numberMin&&null!==this.numberMax&&
this.numberMax>this.numberMin};a.prototype.isInteger=function(){return 0<this.numberCount&&this.integerCount===this.numberCount};a.prototype.addValue=function(b){this.totalCount++;var c=yn(b);c in this.valueHash||(this.valueHash[c]={value:b,count:0},this.uniqueCount++);this.valueHash[c].count++;switch(typeof b){case "number":this.incorporateNumberValue(b);break;case "string":this.incorporateStringValue(c,b);break;default:this.otherCount++}};a.prototype.incorporateNumberValue=function(b){this.numberCount++;
"number"===typeof b&&b>>0===b&&this.integerCount++;isNaN(b)||(this.numberMin=null===this.numberMin?b:Math.min(this.numberMin,b),this.numberMax=null===this.numberMax?b:Math.max(this.numberMax,b))};a.prototype.incorporateStringValue=function(b,c){this.stringCount++;var e=c.length;e in this.stringLengthsHash||(this.stringLengthsCount=(this.stringLengthsCount||0)+1);this.stringLengthsHash[e]=(this.stringLengthsHash[e]||0)+1;this.stringMinLength=null===this.stringMinLength?e:Math.min(this.stringMinLength,
e);this.stringMaxLength=null===this.stringMaxLength?e:Math.max(this.stringMaxLength,e);this.stringMeanLength=(this.stringMeanLength||0)*(this.stringCount-1)/this.stringCount+e/this.stringCount;if(!this.valueHash[b].words){c=c.toLowerCase().toLowerCase().match(xn)||[];1<c.length&&(this.multiwordCount++,this.totalWordCount+=c.length);e=this.valueHash[b].words={};for(var f=0;f<c.length;f++){var g=c[f];e[g]=(e[g]||0)+1;g in this.wordCounts||(this.wordCounts[g]=0,this.uniqueWordCount++)}}b=this.valueHash[b].words;
for(g in b)this.wordCounts[g]=(this.wordCounts[g]||0)+1};return a}();function Cn(a){if(!a||!a.length)return{};for(var b={},c=0;c<a.length;c++){var e=a[c];if(null!=e)for(var f=Object.keys(e),g=0;g<f.length;g++){var h=f[g],l=e[h];h in b||(b[h]=new Bn);b[h].addValue(l)}}for(var n in b)a=b[n],a.multiwordCount&&(a.wordTree=An(a.valueHash));return b};
</script>

<script>//~~WEBPATH~~/facets-dive/lib/string-format.js
function Dn(a){return 65>a.length?a:a.substr(0,30)+"..."+a.substr(-30)};
</script>




<dom-module id="facets-dive-vis">
  <template>
    <style>
      :host {
        box-sizing: border-box;
        display: block;
        height: 100%;
        width: 100%;
      }
      ::content .labels {
        @apply --paper-font-common-base;
        @apply --paper-font-headline;
      }
      ::content .rotate {
        stroke-dasharray: 1.5, 0.5;
        animation: rotate 1s linear infinite;
      }
      @keyframes rotate {
        from {
          stroke-dashoffset: 0;
        }
        to {
          stroke-dashoffset: 2;
        }
      }
    </style>
    
  </template>
</dom-module>

<script>//~~WEBPATH~~/facets-dive/components/facets-dive-vis/facets-dive-vis.js
/*

 Copyright 2018 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var En=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&(b[e]=c[e])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),Fn={bottom:6,left:6,right:6,top:6},Gn={"\ufffcOTHER\ufffc":"other","\ufffcNO_WORDS\ufffc":"non-words","\ufffcALL_WORDS\ufffc":"other"};
function Hn(a){return null!==a&&a in Gn?{label:Gn[a],special:!0}:"number"!==typeof a&&"string"!==typeof a?{label:""+a,special:!0}:{label:Dn(""+a),special:!1}}
var In="#4285F4 #DB4437 #F4B400 #0F9D58 #AB47BC #00ACC1 #FF7043 #9E9D24 #5C6BC0 #F06292 #00796B #C2185B".split(" "),Jn="#4285F4 #0F9D58 #00ACC1 #9E9D24 #5C6BC0 #00796B #607D8B".split(" "),Kn="#DB4437 #F4B400 #AB47BC #F06292 #AB47BC #795548 #FF7043 #C2185B".split(" "),Ln="#4285F4 #C53929 #F7CB4D #0B8043 #5E35B1 #80DEEA #FF7043 #C0CA33".split(" "),Mn={"alignment-baseline":"middle",fill:"#444444","font-size":18,"font-style":"normal","text-anchor":"middle",x:0,y:0},Nn=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}En(b,a);return b}(Tm),On=function(){function a(b){this.elem=b;this.endTimestamp=0;this.renderQueued=!1;this.labels=[];this.autoColorBy=!1;this.horizontalFacetInfo=this.verticalFacetInfo=null}a.prototype.ready=function(){this.layout=new fn;this.cellBackgroundSVG=d3.select(this.elem).append("svg").style("left",0).style("position","absolute").style("top",0);this.cellBackgroundSVGRoot=this.cellBackgroundSVG.append("g").attr("class","root");this.cellBackgroundLayer=this.cellBackgroundSVGRoot.append("g").attr("class",
"labels");this.scene=new THREE.Scene;this.camera=new THREE.OrthographicCamera(0,100,0,100,.1,1E3);try{this.renderer=new THREE.WebGLRenderer({alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),d3.select(this.renderer.domElement).style("left",0).style("pointer-events","none").style("position","absolute").style("top",0),this.elem.appendChild(this.renderer.domElement)}catch(b){}this.zoom=d3.zoom().scaleExtent([1,500]).on("zoom",this.zoomed.bind(this));d3.select(this.elem).call(this.zoom);
this.labelsAndAxesSVG=d3.select(this.elem).append("svg").style("left",0).style("position","absolute").style("top",0);this.labelsAndAxesSVGRoot=this.labelsAndAxesSVG.append("g").attr("class","root");this.labelsLayer=this.labelsAndAxesSVGRoot.append("g").attr("class","labels");this.axesLayer=this.labelsAndAxesSVGRoot.append("g").attr("class","axes");this.comparedLayer=this.labelsAndAxesSVGRoot.append("g").attr("class","comparedboxes");this.selectedLayer=this.labelsAndAxesSVGRoot.append("g").attr("class",
"selectedboxes");this.labelsAndAxesSVG.on("click",this.clicked.bind(this));this.renderer||(this.labelsAndAxesSVG.style("display","none"),this.cellBackgroundSVG.style("display","none"),d3.select(this.elem).append("p").attr("class","error").style("color","darkred").html('\n            \x3cstrong\x3eERROR\x3c/strong\x3e: Facets Dive requires WebGL, and it is not\n            enabled in your browser. See\n            \x3ca rel\x3d"noreferrer" href\x3d"http://webglreport.com/"\x3e\n            WebGL Report\x3c/a\x3e for details.\n          '))};
a.prototype.zoomed=function(){var b=d3.event.transform,c=b.x,e=b.y;b=b.k;var f=this.scale/b;this.camera.top*=f;this.camera.left*=f;this.camera.right*=f;this.camera.bottom*=f;this.camera.position.set(-c/b,e/b,this.camera.position.z);this.camera.updateProjectionMatrix();this.scale=b;this.transformSVG();this.updateObjectVisibility();this.queueRenderScene()};a.prototype.clicked=function(){var b=this.elem.getBoundingClientRect(),c=d3.event;b=this.spriteMesh.findSprites(this.camera.position.x+(c.clientX-
b.left)/this.scale,this.camera.position.y-(c.clientY-b.top)/this.scale);var e={};if(c.ctrlKey)for(c=0;c<this.elem.selectedIndices.length;c++)e[this.elem.selectedIndices[c]]=!0;for(c=0;c<b.length;c++)e[b[c]]=!0;this.elem.set("selectedIndices",Array.from(Object.keys(e).map(function(f){return+f})));b=[];for(c=0;c<this.elem.selectedIndices.length;c++)b.push(this.elem.data[this.elem.selectedIndices[c]]);this.elem.set("selectedData",b)};a.prototype.selectedIndicesUpdated=function(){this.spriteMesh&&this.updateSelectedBoxes()};
a.prototype.comparedIndicesUpdated=function(){if(this.spriteMesh){for(var b=[],c=0;c<this.elem.comparedIndices.length;c++)b.push(this.elem.data[this.elem.comparedIndices[c]]);this.elem.set("comparedData",b);this.updateComparedBoxes()}};a.prototype.updateSelectedBoxes=function(){var b=this,c=this.elem.selectedIndices.map(function(f){return{x:b.spriteMesh.getX(f),y:b.spriteMesh.getY(f)}});c=this.selectedLayer.selectAll(".selected").data(c);var e=c.enter().append("g").classed("selected",!0).attr("transform",
function(f){return"translate("+(.5+(f.x||0))+","+(.5+(f.y||0))+") scale(3)"}).style("opacity",0);e.append("rect").attr("x",-.5).attr("y",-.5).attr("width",1).attr("height",1).attr("stroke","#483d06").attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("stroke-opacity",0).attr("stroke-width",.3).attr("fill-opacity",0);e.append("rect").attr("x",-.5).attr("y",-.5).attr("width",1).attr("height",1).attr("stroke","#fad411").attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("stroke-opacity",
0).attr("stroke-width",.15).attr("fill-opacity",0);e=e.merge(c);e.transition().attr("transform",function(f){return"translate("+(.5+(f.x||0))+","+(.5+(f.y||0))+") scale(0.8)"}).style("opacity",1);e.selectAll("rect").classed("rotate",!0).attr("stroke-opacity",1);c.exit().transition().style("opacity",0).remove()};a.prototype.updateComparedBoxes=function(){var b=this,c=this.elem.comparedIndices.map(function(f){return{x:b.spriteMesh.getX(f),y:b.spriteMesh.getY(f)}});c=this.comparedLayer.selectAll(".compared").data(c);
var e=c.enter().append("g").classed("compared",!0).attr("transform",function(f){return"translate("+(.5+(f.x||0))+","+(.5+(f.y||0))+") scale(3)"}).style("opacity",0);e.append("rect").attr("x",-.5).attr("y",-.5).attr("width",1).attr("height",1).attr("stroke","#44ff44").attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("stroke-opacity",0).attr("stroke-width",.3).attr("fill-opacity",0);e.append("rect").attr("x",-.5).attr("y",-.5).attr("width",1).attr("height",1).attr("stroke","#1d6b1d").attr("stroke-linecap",
"round").attr("stroke-linejoin","round").attr("stroke-opacity",0).attr("stroke-width",.15).attr("fill-opacity",0);e=e.merge(c);e.transition().attr("transform",function(f){return"translate("+(.5+(f.x||0))+","+(.5+(f.y||0))+") scale(0.8)"}).style("opacity",1);e.selectAll("rect").classed("rotate",!0).attr("stroke-opacity",1);c.exit().transition().style("opacity",0).remove()};a.prototype.fitToViewport=function(){var b=this,c=this.elem.getBoundingClientRect();if(c.width&&c.height){this.layout.viewport.width=
c.width;this.layout.viewport.height=c.height;this.layout.padding.bottom=this.elem.scenePadding;this.layout.padding.left=this.elem.scenePadding;this.layout.padding.right=this.elem.scenePadding;this.layout.padding.top=this.elem.scenePadding;this.layout.grid={bottom:0,left:0,right:this.grid.width,top:this.grid.height};if(this.labels.length){var e=0,f=0,g=0,h=0;this.labelsLayer.selectAll(".label").each(function(n){var m=d3.select(this).select(".current").node().getBoundingClientRect(),q=n.elementMargin||
{bottom:0,left:0,right:0,top:0},r=m.height+q.top+q.bottom;m=m.width+q.left+q.right;switch(n.side){case Rm.Bottom:e=Math.max(e,r);break;case Rm.Top:h=Math.max(h,r);break;case Rm.Left:f=Math.max(f,m);break;case Rm.Right:g=Math.max(g,m);break;default:throw Error("Unrecognized Side.");}});this.layout.padding.bottom+=e;this.layout.padding.left+=f;this.layout.padding.right+=g;this.layout.padding.top+=h}this.layout.reducePaddingToFitWidth(c.width);this.layout.reducePaddingToFitHeight(c.height);this.scale=
this.layout.computeScale();var l=this.layout.computeCamera();c=l.position;l=l.frustum;this.camera.left=l.left;this.camera.right=l.right;this.camera.top=l.top;this.camera.bottom=l.bottom;this.camera.position.set(c.x,c.y,100);this.camera.updateProjectionMatrix();d3.select(this.elem).call(this.zoom.transform,d3.zoomIdentity.scale(this.scale).translate(-this.camera.position.x,this.camera.position.y));this.transformSVG();this.updateObjectVisibility();this.queueRenderScene()}else setTimeout(function(){return b.fitToViewport()},
100)};a.prototype.zoomIn=function(){this.zoom.scaleBy(d3.select(this.elem),1.1)};a.prototype.zoomOut=function(){this.zoom.scaleBy(d3.select(this.elem),1/1.1)};a.prototype.transformSVG=function(){var b=this,c=-this.camera.position.x*this.scale,e=this.camera.position.y*this.scale;this.cellBackgroundSVGRoot.attr("transform","translate("+c+","+e+") scale("+this.scale+","+-this.scale+")");this.labelsAndAxesSVGRoot.attr("transform","translate("+c+","+e+") scale("+this.scale+","+-this.scale+")");this.labelsAndAxesSVGRoot.selectAll(".unscale").attr("transform",
"scale("+1/this.scale+")");this.axesLayer.selectAll(".axis").select("path").attr("d",function(f){return f.path(b.scale)}).attr("stroke-width",function(f){return f.strokeWidth(b.scale)})};a.prototype.isVisible=function(b,c){return b.shouldBeVisible(c,this.scale,this.camera.position,this.camera)};a.prototype.updateObjectVisibility=function(){var b=this,c=this,e=this.labelsLayer.selectAll(".label"),f=e.filter(function(h){return(void 0===h.visible||!h.visible)&&c.isVisible(h,this)}).each(function(h){return h.visible=
!0}),g=e.filter(function(h){return(void 0===h.visible||h.visible)&&!c.isVisible(h,this)}).each(function(h){return h.visible=!1});f.selectAll(".opacity").transition().duration(this.elem.tweenDuration).attr("opacity",1);g.selectAll(".opacity").transition().duration(this.elem.tweenDuration).attr("opacity",0);e.filter(function(h){return!!h.scaleDown}).selectAll(".scale").attr("transform",function(h){return"scale("+(b.scale<h.minScale?b.scale/h.minScale:1)+")"});e=this.axesLayer.selectAll(".axis").each(function(h){h.visible=
c.isVisible(h,this)});e.filter(function(h){return!!h.visible}).select("path").transition().duration(this.elem.tweenDuration).attr("stroke-opacity",1);e.filter(function(h){return!h.visible}).select("path").transition().duration(this.elem.tweenDuration).attr("stroke-opacity",0)};a.prototype.addVerticalFacetLabels=function(b){var c=this;this.elem.verticalFacet in this.stats&&this.grid.getColumn(this.grid.horizontalKeys[this.grid.horizontalKeys.length-1]).forEach(function(e){var f=c.verticalFacetInfo.labelingFunction(e.verticalKey),
g=new Nn;g.text=f.label;g.x=e.x+e.width;g.y=e.contentY+e.innerHeight/2;g.side=Rm.Right;g.cell=e;g.attributes={"alignment-baseline":"middle",fill:"#666666","font-size":Mn["font-size"],"text-anchor":"start","font-style":f.special?"italic":"normal"};g.offsetPosition={x:8};g.minScale=Mn["font-size"]/(e.height+c.grid.cellMargin);g.scaleDown=!0;b.push(g)})};a.prototype.addHorizontalFacetLabels=function(b){var c=this;this.elem.horizontalFacet in this.stats&&this.grid.getRow(this.grid.verticalKeys[this.grid.verticalKeys.length-
1]).forEach(function(e){var f=c.horizontalFacetInfo.labelingFunction(e.horizontalKey),g=new Nn;g.text=f.label;g.x=e.contentX+e.innerWidth/2;g.y=e.y+e.height;g.side=Rm.Top;g.cell=e;g.rotate=-45;g.attributes={"alignment-baseline":"ideographic",fill:"#dd6622","font-size":Mn["font-size"],"text-anchor":"start","font-style":f.special?"italic":"normal"};g.offsetPosition={x:8,y:-8};g.minScale=Mn["font-size"]/(e.width+c.grid.cellMargin/2);g.scaleDown=!0;b.push(g)})};a.prototype.addVerticalPositioningLabels=
function(b){var c=this;if("scatter"===this.elem.positionMode&&this.elem.verticalPosition in this.stats){var e=this.stats[this.elem.verticalPosition],f=this.formatNumber(e.numberMin),g=this.formatNumber(e.numberMax),h=(f.length+3)/(f.length+g.length+6);this.grid.eachCell(function(l){if(l.items.length){for(var n=l.siblings.left;!(!n||n.items.length||n.siblings.above&&n.siblings.above.items.length);)n=n.siblings.left;n=n?n.contentX+n.innerWidth:-Infinity;var m=l.x+8,q=l.contentY,r=l.contentY+l.innerHeight,
v=new Nn;v.id=l.compoundKey+"-left-start";v.text=f;v.x=l.x+8;v.y=l.y+(c.elem.horizontalPosition?8:0);v.side=Rm.Left;v.cell=l;v.rotate=-90;v.attributes={"alignment-baseline":"ideographic",fill:"#2255aa","font-size":16,"text-anchor":"start"};v.offsetPosition={x:Fn.bottom,y:-Fn.right};v.boundingBox={bottom:q,left:n,right:m,top:q+l.innerHeight*(Math.max(h,.1)-.05)};v.elementMargin=Fn;b.push(v);v=new Nn;v.id=l.compoundKey+"-left-end";v.text=g;v.x=l.x+8;v.y=l.y+l.height;v.side=Rm.Left;v.cell=l;v.rotate=
-90;v.attributes={"alignment-baseline":"ideographic",fill:"#2255aa","font-size":16,"text-anchor":"end"};v.offsetPosition={x:-Fn.top,y:-Fn.right};v.boundingBox={bottom:q+l.innerHeight*(Math.min(h,.9)+.05),left:n,right:m,top:r};v.elementMargin=Fn;b.push(v)}})}};a.prototype.addHorizontalPositioningLabels=function(b){var c=this;if("scatter"===this.elem.positionMode&&this.elem.horizontalPosition in this.stats){var e=this.stats[this.elem.horizontalPosition],f=this.formatNumber(e.numberMin),g=this.formatNumber(e.numberMax),
h=(f.length+3)/(f.length+g.length+6);this.grid.eachCell(function(l){if(l.items.length){for(var n=l.siblings.below;!(!n||n.items.length||n.siblings.right&&n.siblings.right.items.length);)n=n.siblings.below;n=n?n.contentY+n.innerHeight:-Infinity;var m=l.contentY,q=l.contentX,r=q+l.innerWidth,v=new Nn;v.id=l.compoundKey+"-bottom-start";v.text=f;v.x=l.x+(c.elem.verticalPosition?8:0);v.y=l.y+8;v.side=Rm.Bottom;v.cell=l;v.attributes={"alignment-baseline":"hanging",fill:"#118844","font-size":16,"text-anchor":"start"};
v.offsetPosition={x:Fn.left,y:Fn.top};v.boundingBox={bottom:n,left:q,right:q+l.innerWidth*(Math.max(h,.1)-.05),top:m};v.elementMargin=Fn;b.push(v);v=new Nn;v.id=l.compoundKey+"-bottom-end";v.text=g;v.x=l.x+l.width;v.y=l.y+8;v.side=Rm.Bottom;v.cell=l;v.attributes={"alignment-baseline":"hanging",fill:"#118844","font-size":16,"text-anchor":"end"};v.offsetPosition={x:-Fn.right,y:Fn.top};v.boundingBox={bottom:n,left:q+l.innerWidth*(Math.min(h,.9)+.05),right:r,top:m};v.elementMargin=Fn;b.push(v)}})}};a.prototype.determineLabels=
function(){var b=[];this.addVerticalFacetLabels(b);this.addHorizontalFacetLabels(b);this.addVerticalPositioningLabels(b);this.addHorizontalPositioningLabels(b);return b};a.prototype.updateCellBackgrounds=function(){var b=this.grid.getCells().filter(function(c){return c.items.length});b=this.cellBackgroundLayer.selectAll(".cell").data(b,function(c){return c.compoundKey});b.enter().append("rect").attr("class","cell").attr("x",function(c){return c.contentX||0}).attr("y",function(c){return c.contentY||
0}).attr("width",function(c){return c.innerWidth||0}).attr("height",function(c){return c.innerHeight||0}).attr("fill","#f8f8f9").attr("fill-opacity",0).merge(b).transition().duration(this.elem.tweenDuration).attr("x",function(c){return c.contentX||0}).attr("y",function(c){return c.contentY||0}).attr("width",function(c){return c.innerWidth||0}).attr("height",function(c){return c.innerHeight||0}).attr("fill-opacity",1);b.exit().transition().duration(this.elem.tweenDuration).remove().attr("fill-opacity",
0)};a.prototype.updateAxes=function(){var b=this,c=[];"stacked"!==this.elem.positionMode&&this.grid.eachCell(function(g){if(g.items.length){if(b.elem.verticalPosition){var h=new en(Rm.Left,g);c.push(h)}b.elem.horizontalPosition&&(h=new en(Rm.Bottom,g),c.push(h))}});var e=this.axesLayer.selectAll(".axis").data(c,function(g){return g.key()}),f=e.enter().append("g").attr("class","axis").attr("opacity",0);f.append("path").attr("d",function(g){return g.path(b.scale)}).attr("stroke",function(g){return g.side===
Rm.Left?"#2255aa":"#118844"}).attr("stroke-width",function(g){return g.strokeWidth(b.scale)}).attr("stroke-opacity",0).attr("fill","none");f.merge(e).transition().duration(this.elem.tweenDuration).attr("opacity",1);f.merge(e).select("path").transition().duration(this.elem.tweenDuration).attr("d",function(g){return g.path(b.scale)});e.exit().transition().duration(this.elem.tweenDuration).remove().attr("opacity",0)};a.prototype.updateLabels=function(){if(this.scale){this.labels=this.determineLabels();
var b=this.labelsLayer.selectAll(".label").data(this.labels,function(l){return l.id||l.side+"-"+l.text});b.each(function(l){var n=d3.select(this),m=n.select(".current");l.text!==m.text()&&(m.attr("fill-opacity",0),n.select(".old").attr("fill-opacity",1).text(m.text()))}).select(".current").text(function(l){return l.text});var c=function(l){return function(n){return void 0===n.attributes||void 0===n.attributes[l]?Mn[l]:n.attributes[l]}},e=b.enter().append("g").attr("class","label").attr("transform",
function(l){return"translate("+l.x+","+l.y+")"}),f=e.append("g").attr("class","flip").attr("transform","scale(1,-1)").append("g").attr("class","rotate").attr("transform",function(l){return"rotate("+("rotate"in l?l.rotate:0)+")"}).append("g").attr("class","unscale").attr("transform","scale("+1/this.scale+")").append("g").attr("class","position").append("g").attr("class","opacity scale"),g=f.append("text").attr("class","old").attr("fill-opacity",0);f=f.append("text").attr("class","current").attr("fill-opacity",
0).text(function(l){return l.text});for(var h in Mn)Mn.hasOwnProperty(h)&&(g.attr(h,c(h)),f.attr(h,c(h)));g=e.merge(b).transition().duration(this.elem.tweenDuration).attr("transform",function(l){return"translate("+l.x+","+l.y+")"});g.select(".rotate").attr("transform",function(l){return"rotate("+("rotate"in l?l.rotate:0)+")"});g.filter(function(l){return!!l.offsetPosition}).select(".position").attr("transform",function(l){return"translate("+(l.offsetPosition.x||0)+","+(l.offsetPosition.y||0)+")"});
e=g.select(".old").attr("fill-opacity",0);g=g.select(".current").attr("fill-opacity",1);for(h in Mn)Mn.hasOwnProperty(h)&&(e.attr(h,c(h)),g.attr(h,c(h)));b.exit().transition().duration(this.elem.tweenDuration).remove().select(".current").attr("fill-opacity",0)}};a.prototype.dataChange=function(){var b=this.elem.data;if(b&&b.length)if(this.scene){this.resizeHandler();this.stats=Cn(b);if(this.items)if(this.items.length!==b.length)this.initializeSpriteMesh(),this.updateImageFieldName();else for(var c=
0;c<b.length;c++)this.items[c].data=b[c];else this.initializeSpriteMesh(),this.pickColorByField(),this.pickTextDrawingField();this.updateGridFaceting();this.updateGridItemPositions();this.updateColors()}else requestAnimationFrame(this.dataChange.bind(this))};a.prototype.initializeSpriteMesh=function(){var b=this;this.spriteMesh&&(this.scene.remove(this.spriteMesh),this.spriteMesh.spriteAtlas.clearQueues(),delete this.spriteMesh);var c=this.elem.data,e=c.length,f=this.elem.spriteImageWidth,g=this.elem.spriteImageHeight,
h=f/g;this.spriteMesh=new wn(e,f,g);this.scene.add(this.spriteMesh);this.spriteMesh.spriteAtlas.onDrawFinished=function(){return b.queueRenderScene()};this.items=[];f=Math.ceil(Math.sqrt(e));g=Math.ceil(e/f);for(var l=0;l<e;l++){var n=this.spriteMesh.createSprite();n.x=f/2;n.y=g/2;n.opacity=0;n.timestamp=Date.now();n.rebase(n.timestamp);this.items.push({sprite:n,data:c[l]})}this.grid=new cn(this.items);this.grid.cellMargin=1;this.grid.itemAspectRatio=h;this.grid.itemPositionSetter=function(m,q,r){var v=
Date.now();m.sprite.rebase(v);m.sprite.x=q;m.sprite.y=r;m.sprite.opacity=1;m.sprite.timestamp=v+b.elem.tweenDuration;b.renderUntil(m.sprite.timestamp)}};a.prototype.filteredDataIndicesChange=function(){var b=this.elem.filteredDataIndices;if(this.scene&&this.items){var c=[];if(b)for(var e=0;e<b.length;e++){var f=b[e];f<this.items.length&&(c[f]=!0)}f=[];var g=[],h=Date.now(),l=h+this.elem.tweenDuration;for(e=0;e<this.items.length;e++){var n=this.items[e];!b||c[e]?(f.push(n.data),g.push(n),n.sprite.opacity||
(n.sprite.rebase(h),n.sprite.timestamp=l,n.sprite.opacity=1)):0<n.sprite.opacity&&(n.sprite.rebase(h),n.sprite.timestamp=l,n.sprite.opacity=0)}this.renderUntil(l);this.stats=Cn(f);this.grid.items=g;this.updateGridFaceting();this.updateGridItemPositions()}else requestAnimationFrame(this.filteredDataIndicesChange.bind(this))};a.prototype.pickColorByField=function(){var b=null,c=Infinity,e;for(e in this.stats)if(this.stats.hasOwnProperty(e)){var f=this.stats[e],g=Math.abs(f.uniqueCount-In.length);1<
f.uniqueCount&&g<c&&(b=e,c=g)}isFinite(c)&&b in this.stats&&(this.autoColorBy=!0,this.elem.set("colorBy",b))};a.prototype.pickTextDrawingField=function(){var b="",c=-Infinity,e;for(e in this.stats)if(this.stats.hasOwnProperty(e)){var f=this.stats[e];f=f.stringCount+f.stringLengthsCount-f.totalCount;f>c&&(b=e,c=f)}isFinite(c)&&b in this.stats&&this.elem.set("imageFieldName",b)};a.prototype.queueAtlasUrlChange=function(){var b=this;this.atlasUrlChangeTimer&&clearTimeout(this.atlasUrlChangeTimer);this.atlasUrlChangeTimer=
setTimeout(function(){b.atlasUrlChangeTimer&&b.atlasUrlChange()},100)};a.prototype.atlasUrlChange=function(){var b=this;clearTimeout(this.atlasUrlChangeTimer);delete this.atlasUrlChangeTimer;if(this.spriteMesh){var c=this.elem.atlasUrl;c&&c.length&&c!==this.lastAtlasUrl&&(this.lastAtlasUrl=c,this.resetSpritesToDefaultTexture(),this.spriteMesh.spriteAtlas.setAtlasUrl(c,this.elem.crossOrigin,function(){for(var e=b.elem.data,f=Date.now(),g=f+b.elem.fadeDuration,h=0;e&&h<e.length;h++)b.spriteMesh.switchTextures(h,
f,g);b.renderUntil(g);b.ignoreChange=!0;b.elem.set("imageFieldName","");delete b.ignoreChange;b.autoColorBy&&(b.autoColorBy=!1,b.elem.set("colorBy",""))}))}else requestAnimationFrame(this.atlasUrlChange.bind(this))};a.prototype.spriteUrlChange=function(){var b=this,c=this.elem.spriteUrl;if(c)if(this.spriteMesh){var e=new Image;void 0!==this.elem.crossOrigin&&(e.crossOrigin=this.elem.crossOrigin);e.onload=function(){var f=b.spriteMesh.defaultTextureCanvas,g=f.getContext("2d");g.clearRect(0,0,f.width,
f.height);g.drawImage(e,0,0,f.width,f.height);b.spriteMesh.defaultTexture.needsUpdate=!0;b.queueRenderScene()};e.src=c}else requestAnimationFrame(this.spriteUrlChange.bind(this))};a.prototype.updateGridStacking=function(){"stacked"===this.elem.positionMode&&(this.grid.computeItemPosition=Zm(this.elem.verticalFacet?"middle":"bottom",this.elem.horizontalFacet?"middle":"right"))};a.prototype.updateGridFaceting=function(){if(this.grid){this.updateGridStacking();var b=this.verticalFacetInfo=this.generateFacetingInfo(this.elem.verticalFacet,
this.elem.verticalBuckets,this.elem.verticalBagOfWords,!0);this.grid.verticalFacet=b.facetingFunction;this.grid.verticalKeyCompare=b.keyCompareFunction;b=this.horizontalFacetInfo=this.generateFacetingInfo(this.elem.horizontalFacet,this.elem.horizontalBuckets,this.elem.horizontalBagOfWords,!1);this.grid.horizontalFacet=b.facetingFunction;this.grid.horizontalKeyCompare=b.keyCompareFunction;this.elem.fitGridAspectRatioToViewport?(b=this.elem.getBoundingClientRect(),this.grid.targetGridAspectRatio=b&&
b.width&&b.height?b.width/b.height||1:1):this.grid.targetGridAspectRatio=1;this.grid.arrange();this.updateCellBackgrounds();this.updateAxes();this.updateLabels();this.updateSelectedBoxes();this.updateComparedBoxes();this.fitToViewport()}};a.prototype.updateGridItemPositions=function(){if(this.grid){this.updateGridStacking();var b=this.grid.cellPadding,c=an.Tight,e=an.Uniform,f=!1;if("stacked"===this.elem.positionMode)f=this.grid.verticalGridAlignment!==c||this.grid.horizontalGridAlignment!==c,this.grid.verticalGridAlignment=
c,this.grid.horizontalGridAlignment=c,this.grid.cellPadding.top=0,this.grid.cellPadding.left=0,this.grid.cellPadding.right=0,this.grid.cellPadding.bottom=0,this.grid.minCellAspectRatio=0,this.grid.maxCellAspectRatio=Infinity;else{this.elem.verticalPosition?(f=this.grid.verticalGridAlignment!==e,this.grid.verticalGridAlignment=e):(f=this.grid.verticalGridAlignment!==c,this.grid.verticalGridAlignment=c);this.elem.horizontalPosition?(f=f||this.grid.horizontalGridAlignment!==e,this.grid.horizontalGridAlignment=
e):(f=f||this.grid.horizontalGridAlignment!==c,this.grid.horizontalGridAlignment=c);var g=this.generatePositionFunction(this.elem.horizontalPosition)||Xm,h=this.generatePositionFunction(this.elem.verticalPosition)||Ym;this.grid.computeItemPosition=function(l,n,m,q){return{x:g(l,n,m,q),y:h(l,n,m,q)}};c=this.elem.verticalPosition?8:0;e=this.elem.horizontalPosition?8:0;f=f||0!==b.top||c!==b.left||0!==b.right||e!==b.bottom;this.grid.cellPadding.top=0;this.grid.cellPadding.right=0;this.grid.cellPadding.left=
c;this.grid.cellPadding.bottom=e;this.grid.minCellAspectRatio=1;this.grid.maxCellAspectRatio=2}f?(this.grid.arrange(),this.updateCellBackgrounds()):this.grid.positionItems();this.updateAxes();this.updateLabels();this.updateSelectedBoxes();this.updateComparedBoxes();this.fitToViewport()}};a.prototype.getPaletteSource=function(){switch(this.elem.paletteChoice){case "warm":return Kn;case "cool":return Jn;case "assist":return Ln;default:return In}};a.prototype.updateScalarPalette=function(){var b=this.elem.colorBy,
c=this.stats[b],e=this.grid.items,f=d3.rgb("#A52714"),g=d3.scaleLinear();g.domain([c.numberMin,c.numberMax]).range(["white","#1C3AA9"]);for(var h=[],l=0;l<e.length;l++){var n=e[l];n=b in n.data?n.data[b]:NaN;n="number"!==typeof n||isNaN(n)?f:d3.rgb(g(n));h.push(n)}e=this.generateFacetingInfo(b,5,!1,!1).labelingFunction;f=d3.scaleLinear();f.domain([0,4]).range(["white","#1C3AA9"]);g=[];for(l=4;0<=l;l--)n=e(l),g.push({key:l,color:f(l),content:n});(c.otherCount||c.stringCount||c.totalCount<this.grid.items.length)&&
g.push({key:NaN,color:"#A52714",content:{label:"missing",special:!0}});this.elem.set("palette",g);this.grid.cellItemComparator=function(m,q){if(!(b in m.data||b in q.data))return 0;if(!(b in m.data))return-1;if(!(b in q.data))return 1;m=m.data[b];q=q.data[b];if(m===q)return 0;var r="number"!==typeof m||isNaN(m),v="number"!==typeof q||isNaN(q);return r&&v?0:r?-1:v?1:m-q};return h};a.prototype.updateCategoricalPalette=function(b){var c=this.elem.colorBy,e=this.stats[c],f=this.grid.items,g=Object.keys(e.valueHash);
this.elem.stableColors?g.sort():g.sort(function(w,z){return e.valueHash[z].count-e.valueHash[w].count});for(var h=Math.min(b.length,g.length),l=g.slice(0,h).reduce(function(w,z,A){w[z]=A;return w},{}),n=d3.rgb("#F0F0F0"),m=b.map(function(w){return d3.rgb(w)}),q=!1,r=[],v=0;v<f.length;v++){var u=yn(f[v].data[c]);q=q||!(u in l);r.push(m[l[u]]||n)}b=b.slice(0,h).map(function(w,z){z=e.valueHash[g[z]].value;return{key:z,color:w,content:{label:z+"",special:"number"!==typeof z&&"string"!==typeof z||z in
Gn}}});q&&b.push({key:null,color:"#F0F0F0",content:{label:"other",special:!0}});this.elem.set("palette",b);this.grid.cellItemComparator=function(w,z){if(!(c in w.data||c in z.data))return 0;if(!(c in w.data))return 1;if(!(c in z.data))return-1;w=w.data[c];z=z.data[c];if(w===z)return 0;w=yn(w);z=yn(z);return w in l||z in l?w in l?z in l?l[w]-l[z]:-1:1:0};return r};a.prototype.updateColors=function(){if(this.grid){var b=this.elem.colorBy;if(b in this.stats){b=this.stats[b];var c=this.getPaletteSource();
b=b.uniqueCount>c.length&&b.isNumeric()?this.updateScalarPalette():this.updateCategoricalPalette(c);c=this.grid.items;for(var e=Date.now(),f=e+this.elem.tweenDuration,g=0;g<c.length;g++){var h=c[g],l=b[g];h.sprite.rebase(e);h.sprite.r=l.r;h.sprite.g=l.g;h.sprite.b=l.b;h.sprite.a=180;h.sprite.timestamp=f}this.renderUntil(f);this.updateGridItemPositionsAfterColorChange()}else this.clearColors()}};a.prototype.updateGridItemPositionsAfterColorChange=function(){"stacked"!==this.elem.positionMode&&this.elem.verticalPosition&&
this.elem.horizontalPosition||this.updateGridItemPositions()};a.prototype.clearColors=function(){for(var b=this.grid.items,c=Date.now(),e=c+this.elem.tweenDuration,f=0;f<b.length;f++){var g=b[f];g.sprite.rebase(c);g.sprite.r=0;g.sprite.g=0;g.sprite.b=0;g.sprite.a=0;g.sprite.timestamp=e}this.renderUntil(e);this.elem.set("palette",[]);this.grid.cellItemComparator&&(this.grid.cellItemComparator=null,this.updateGridItemPositionsAfterColorChange())};a.prototype.resetSpritesToDefaultTexture=function(){var b=
this.grid.items;this.spriteMesh.spriteAtlas.clearQueues();for(var c=Date.now(),e=c+this.elem.fadeDuration,f=0;f<b.length;f++){var g=b[f];0<g.sprite.textureIndex&&g.sprite.switchTextures(c,e)}this.renderUntil(e)};a.prototype.updateImageFieldName=function(){var b=this;if(!this.ignoreChange&&this.grid){this.resetSpritesToDefaultTexture();var c=this.elem.imageFieldName;if(c in this.stats)for(var e=this.grid.items,f=function(h){h=e[h];var l=h.sprite;l.setSpriteImageData({type:"text",data:Hn(h.data[c]).label},
function(){var n=Date.now();l.baseTextureTimestamp=n;l.baseTextureIndex=0;l.textureTimestamp=n+b.elem.tweenDuration;l.textureIndex=1;b.renderUntil(l.textureTimestamp)})},g=0;g<e.length;g++)f(g);else delete this.lastAtlasUrl,this.queueAtlasUrlChange()}};a.prototype.generatePositionFunction=function(b){var c=this.stats[b];if(!c||!c.isNumeric())return null;var e=c.numberMax-c.numberMin;return function(f){return(f.data[b]-c.numberMin)/e}};a.prototype.generateFacetingInfo=function(b,c,e,f){if(!(b in this.stats))return{facetingFunction:function(){return null},
keyCompareFunction:function(){return 0},labelingFunction:Hn};var g=this.stats[b];if(g.wordTree&&1<g.wordTree.highestLevel&&e)return this.generateBagOfWordsFacetingInfo(b,c,f);if(g.uniqueCount<=c)return{facetingFunction:function(l){return b in l.data?l.data[b]:null},keyCompareFunction:g.isNumeric()?Wm:f?Vm:Um,labelingFunction:Hn};if(g.isNumeric()&&g.numberMax!==g.numberMin)return this.generateNumericFacetingInfo(b,c);e=Object.keys(g.valueHash);e.sort(function(l,n){return g.valueHash[n].count-g.valueHash[l].count});
var h=e.slice(0,c).reduce(function(l,n){l[n]=!0;return l},{});return{facetingFunction:function(l){if(!(b in l.data))return null;l=l.data[b];return yn(l)in h?l:"\ufffcOTHER\ufffc"},keyCompareFunction:f?Vm:Um,labelingFunction:Hn}};a.prototype.generateBagOfWordsFacetingInfo=function(b,c,e){var f=this.stats[b].wordTree,g=f.levelHash;return{facetingFunction:function(h){if(!(b in h.data))return null;for(h=f.nodeHash[yn(h.data[b])];h.parent&&h.level>c;)h=h.parent;return h.level},keyCompareFunction:function(h,
l){h=g[h];l=g[l];if(void 0===h&&void 0===l)return 0;if(void 0===h)return-1;if(void 0===l)return 1;if(h.nonValueCount&&l.nonValueCount)return 0;if(h.nonValueCount)return-1;if(l.nonValueCount)return 1;l=l.order-h.order;return e?l:-l},labelingFunction:function(h){h=g[+h];if(!h.parent&&!h.commonWords.length)return{label:"other",special:!0};if(h.nonValueCount)return{label:"non-words",special:!0};for(var l=" \u2022 "+h.commonWords.join(" "),n=0;n<h.children.length;n++)if(h.children[n].level>c){l+=" \u2026";
break}for(;h.parent;)h=h.parent,h.commonWords.length&&(l=" \u2022 "+h.commonWords.join(" ")+" "+l);return{label:l}}}};a.prototype.generateNumericFacetingInfo=function(b,c){var e=this,f=this.stats[b],g=f.numberMax-f.numberMin;return{facetingFunction:function(h){if(!(b in h.data))return null;h=h.data[b];return"number"!==typeof h?h:isNaN(h)?h:Math.min(Math.floor(c*(h-f.numberMin)/g),c-1)},keyCompareFunction:Wm,labelingFunction:function(h){if("number"!==typeof h||isNaN(+h))return Hn(h);var l=f.numberMax-
f.numberMin,n=h/c*l+f.numberMin;h=(1+h)/c*l+f.numberMin;return f.isInteger()?{label:e.formatRange(Math.ceil(n),Math.floor(h))}:{label:e.formatRange(n,h)}}}};a.prototype.formatNumber=function(b){if(null===b)return"null";b=parseFloat(b.toPrecision(3));return 1E3<=Math.abs(b)?d3.format("s")(b):""+b};a.prototype.formatRange=function(b,c){return this.formatNumber(b)+" \u2014 "+this.formatNumber(c)};a.prototype.getKeys=function(){var b;if((b=this.elem.data)&&b.length){for(var c={},e=0;e<b.length;e++)if(b[e])for(var f=
Object.keys(b[e]),g=0;g<f.length;g++)c[f[g]]=!0;b=Object.keys(c)}else b=[];return b.sort()};a.prototype.renderUntil=function(b){this.endTimestamp=Math.max(this.endTimestamp,b);this.queueRenderScene()};a.prototype.resizeHandler=function(){var b=this,c=this.elem.getBoundingClientRect();c.width&&c.height?(this.labelsAndAxesSVG.attr("width",c.width).attr("height",c.height),this.cellBackgroundSVG.attr("width",c.width).attr("height",c.height),this.renderer&&this.renderer.setSize(c.width,c.height),this.camera.right=
c.width/this.scale,this.camera.bottom=-c.height/this.scale,this.camera.updateProjectionMatrix(),this.queueRenderScene()):requestAnimationFrame(function(){return b.resizeHandler()})};a.prototype.queueRenderScene=function(){var b=this;this.renderQueued||(this.renderQueued=!0,requestAnimationFrame(function(){b.renderQueued&&b.renderScene()}))};a.prototype.renderScene=function(){this.renderQueued=!1;var b=Date.now();this.endTimestamp>b&&this.queueRenderScene();if(this.spriteMesh&&(this.spriteMesh.time=
b,81>+THREE.REVISION&&this.spriteMesh.onBeforeRender))this.spriteMesh.onBeforeRender();this.renderer&&this.renderer.render(this.scene,this.camera);this.spriteMesh&&this.spriteMesh.spriteAtlas&&this.spriteMesh.spriteAtlas.postRender()};return a}();
Polymer({is:"facets-dive-vis",behaviors:[Polymer.IronResizableBehavior],properties:{data:{type:Array,value:null,observer:"_dataChange"},filteredDataIndices:{type:Array,value:null,observer:"_filteredDataIndicesChange"},atlasUrl:{type:String,value:null,observer:"_queueAtlasUrlChange"},spriteUrl:{type:String,value:null,observer:"_spriteUrlChange"},crossOrigin:{type:String,value:null},keys:{type:Array,value:[],notify:!0,readOnly:!0},stats:{type:Object,value:{},notify:!0,readOnly:!0},scenePadding:{type:Number,
value:8},tweenDuration:{type:Number,value:600},fadeDuration:{type:Number,value:200},spriteImageWidth:{type:Number,value:64},spriteImageHeight:{type:Number,value:64},gridFacetingVerticalLabelColor:{type:String,value:"#666666"},gridFacetingHorizontalLabelColor:{type:String,value:"#dd6622"},itemPositioningVerticalLabelColor:{type:String,value:"#2255aa"},itemPositioningHorizontalLabelColor:{type:String,value:"#118844"},fitGridAspectRatioToViewport:{type:Boolean,value:!1},verticalFacet:{type:String,value:"",
observer:"_updateGridFaceting"},verticalBuckets:{type:Number,value:10,observer:"_updateGridFaceting"},verticalBagOfWords:{type:Boolean,value:!1,observer:"_updateGridFaceting"},horizontalFacet:{type:String,value:"",observer:"_updateGridFaceting"},horizontalBuckets:{type:Number,value:10,observer:"_updateGridFaceting"},horizontalBagOfWords:{type:Boolean,value:!1,observer:"_updateGridFaceting"},positionMode:{type:String,value:"",observer:"_updateGridItemPositions"},verticalPosition:{type:String,value:"",
observer:"_updateGridItemPositions"},horizontalPosition:{type:String,value:"",observer:"_updateGridItemPositions"},colorBy:{type:String,value:"",observer:"_updateColors",notify:!0},imageFieldName:{type:String,value:"",observer:"_updateImageFieldName",notify:!0},palette:{type:Array,value:[],notify:!0},paletteChoice:{type:String,value:"standard",observer:"_updateColors"},selectedData:{type:Array,value:[],notify:!0},selectedIndices:{type:Array,value:[],notify:!0,observer:"_selectedIndicesUpdated"},comparedData:{type:Array,
value:[],notify:!0},comparedIndices:{type:Array,value:[],notify:!0,observer:"_comparedIndicesUpdated"},stableColors:{type:Boolean,value:!1,observer:"_updateColors"}},listeners:{"iron-resize":"_onIronResize"},created:function(){this._backing=new On(this)},ready:function(){this._backing.ready()},_dataChange:function(){this._backing.dataChange();this._setKeys(this._backing.getKeys());this._setStats(this._backing.stats)},_filteredDataIndicesChange:function(){this._backing.filteredDataIndicesChange();
this._setKeys(this._backing.getKeys());this._setStats(this._backing.stats)},_queueAtlasUrlChange:function(){this._backing.queueAtlasUrlChange()},_spriteUrlChange:function(){this._backing.spriteUrlChange()},_updateGridFaceting:function(){this._backing.updateGridFaceting()},_updateGridItemPositions:function(){this._backing.updateGridItemPositions()},_updateColors:function(){this._backing.updateColors()},_updateImageFieldName:function(){this._backing.updateImageFieldName()},_onIronResize:function(){this._backing.resizeHandler()},
_selectedIndicesUpdated:function(){this._backing.selectedIndicesUpdated()},_comparedIndicesUpdated:function(){this._backing.comparedIndicesUpdated()},fitToViewport:function(){this._backing.fitToViewport()},zoomIn:function(){this._backing.zoomIn()},zoomOut:function(){this._backing.zoomOut()}});
</script>


<dom-module id="facets-dive-controls">
  <template>
    <style>
      :host {
        @apply --paper-font-common-base;
        display: flex;
        overflow: visible;
      }

      .main-controls {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 60px;
        display: flex;
        height: 100%;
        overflow: visible;
      }

      .overflow-holder {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 60px;
        right: 0;
        overflow: visible;
      }

      #overflowmenu {
        margin: 0 40px;
      }

      .overflow-div {
        display: flex;
        flex-direction: column;
      }

      .overflow-checkbox {
        margin: 8px 0;
        padding
      }

      .dropdown-holder {
        display: flex;
        width: 150px;
        margin: 0 10px;
      }

      .dropdown-trigger {
        margin-top: 10px;
      }

      .expand-button {
        color: #9b9b9b;
        --paper-icon-button-ink-color: #9b9b9b;
      }
      paper-menu paper-checkbox {
        display: block;
        font-weight: normal;
        font-size: 12.5px;
        text-align: center;
      }

      paper-item {
        padding: 0 14px;
        --paper-item-min-height: 36px;
      }
      paper-dropdown-menu paper-item {
        border-bottom: 1px solid #ccc;
      }

      #verticalFacet {
        --paper-input-container-input: {
          color: var(--grid-faceting-vertical-label-color);
        };
      }
      #horizontalFacet {
        --paper-input-container-input: {
          color: var(--grid-faceting-horizontal-label-color);
        };
      }
      #verticalPosition {
        --paper-input-container-input: {
          color: var(--item-positioning-vertical-label-color);
        };
      }
      #horizontalPosition {
        --paper-input-container-input: {
          color: var(--item-positioning-horizontal-label-color);
        };
      }
      .vertical-facet {
        color: var(--grid-faceting-vertical-label-color);
      }
      .horizontal-facet {
        color: var(--grid-faceting-horizontal-label-color);
      }
      .vertical-position {
        color: var(--item-positioning-vertical-label-color);
      }
      .horizontal-position {
        color: var(--item-positioning-horizontal-label-color);
      }
    </style>

    <div class="main-controls">
        <div class="dropdown-holder horizontal-facet">
            <paper-dropdown-menu id="horizontalFacet" label="Binning | X-Axis" class="facet-selector">
              <paper-listbox class="dropdown-content" selected="{{horizontalFacet}}" attr-for-selected="value" slot="dropdown-content">
                <paper-item value="">(none)</paper-item>
                <template is="dom-repeat" items="[[keys]]">
                  <paper-item value="[[item]]">[[_breakUpAndTruncate(item)]]</paper-item>
                </template>
              </paper-listbox>
            </paper-dropdown-menu>
          </div>

          <template is="dom-if" if="[[horizontalFacet]]">
          <paper-input type="number" min="1" max="[[_maxBuckets(horizontalFacet, horizontalBagOfWords)]]" value="{{horizontalBuckets}}" label="Count">
            </paper-input>
          </template>

      <div class="dropdown-holder vertical-facet">
        <paper-dropdown-menu id="verticalFacet" label="Binning | Y-Axis" class="facet-selector">
          <paper-listbox class="dropdown-content" selected="{{verticalFacet}}" attr-for-selected="value" slot="dropdown-content">
            <paper-item value="">(none)</paper-item>
            <template is="dom-repeat" items="[[keys]]">
              <paper-item value="[[item]]">[[_breakUpAndTruncate(item)]]</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>
      </div>

      <template is="dom-if" if="[[verticalFacet]]">
        <paper-input type="number" min="1" max="[[_maxBuckets(verticalFacet,verticalBagOfWords)]]" value="{{verticalBuckets}}" label="Count">
        </paper-input>
      </template>

      <div class="dropdown-holder">
        <paper-dropdown-menu id="colorBy" label="Color By">
          <paper-listbox class="dropdown-content" selected="{{colorBy}}" attr-for-selected="value" slot="dropdown-content">
            <paper-item value="">(none)</paper-item>
            <template is="dom-repeat" items="[[keys]]">
              <paper-item value="[[item]]">[[item]]</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>
      </div>

      <div class="dropdown-holder">
        <paper-dropdown-menu id="imageFieldName" label="Label By">
          <paper-listbox class="dropdown-content" selected="{{imageFieldName}}" attr-for-selected="value" slot="dropdown-content">
            <paper-item value="">
              [[_getImageFieldNameDefaultLabel(atlasUrl)]]
            </paper-item>
            <template is="dom-repeat" items="[[keys]]">
              <paper-item value="[[item]]">[[item]]</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>
      </div>

      <div class="dropdown-holder horizontal-position">
        <paper-dropdown-menu id="horizontalPosition" label="Scatter | X-Axis" class="position-selector">
          <paper-listbox class="dropdown-content" selected="{{horizontalPosition}}" attr-for-selected="value" slot="dropdown-content">
            <paper-item value="">(default)</paper-item>
            <template is="dom-repeat" items="[[keys]]" filter="_isKeyNumeric">
              <paper-item value="[[item]]">[[item]]</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>
      </div>

      <div class="dropdown-holder vertical-position">
        <paper-dropdown-menu id="verticalPosition" label="Scatter | Y-Axis" class="position-selector">
          <paper-listbox class="dropdown-content" selected="{{verticalPosition}}" attr-for-selected="value" slot="dropdown-content">
            <paper-item value="">(default)</paper-item>
            <template is="dom-repeat" items="[[keys]]" filter="_isKeyNumeric">
              <paper-item value="[[item]]">[[item]]</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>
      </div>
    </div>
    <div class="overflow-holder">
      <template is="dom-if" if="[[_shouldShowOverflowMenu(colorBy, verticalFacet, horizontalFacet)]]">
        <paper-icon-button class="dropdown-trigger" icon="more-vert" alt="more-vert" id="overflowbtn" on-click="_openOverflow">
        </paper-icon-button>
      </template>
      <paper-dialog id="overflowmenu" no-overlap horizontal-align="right" vertical-align="top">
        <div class="overflow-div">
          <template is="dom-if" if="{{_isKeyCategorical(colorBy)}}">
            <div class="dropdown-holder">
              <paper-dropdown-menu id="paletteChoice" label="Display | Color Palette">
                <paper-listbox class="dropdown-content" selected="{{paletteChoice}}" attr-for-selected="value" slot="dropdown-content">
                  <paper-item value="standard">standard</paper-item>
                  <paper-item value="warm">warm</paper-item>
                  <paper-item value="cool">cool</paper-item>
                  <paper-item value="assist">assist</paper-item>
                </paper-listbox>
              </paper-dropdown-menu>
            </div>
          </template>
          <template is="dom-if" if="[[_hasWordTree(verticalFacet)]]">
            <paper-checkbox class="overflow-checkbox" checked="{{verticalBagOfWords}}">
              X-Axis Bag of words
            </paper-checkbox>
          </template>

          <template is="dom-if" if="[[_hasWordTree(horizontalFacet)]]">
            <paper-checkbox class="overflow-checkbox" checked="{{horizontalBagOfWords}}">
              Y-Axis Bag of words
            </paper-checkbox>
          </template>
        </div>
      </paper-dialog>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/facets-dive/components/facets-dive-controls/facets-dive-controls.js
Polymer({is:"facets-dive-controls",properties:{atlasUrl:{type:String,value:""},keys:{type:Array,value:[]},stats:{type:Object,value:{}},verticalFacet:{type:String,value:"",notify:!0},verticalBuckets:{type:Number,value:10,notify:!0},verticalBagOfWords:{type:Boolean,value:!1,notify:!0},horizontalFacet:{type:String,value:"",notify:!0},horizontalBuckets:{type:Number,value:10,notify:!0},horizontalBagOfWords:{type:Boolean,value:!1,notify:!0},positionMode:{type:String,computed:"_getPositionMode(verticalPosition, horizontalPosition)",
notify:!0},verticalPosition:{type:String,value:"",notify:!0},horizontalPosition:{type:String,value:"",notify:!0},colorBy:{type:String,value:"",notify:!0},imageFieldName:{type:String,value:"",notify:!0},palette:{type:Array,value:[]},paletteChoice:{type:String,value:"standard",notify:!0},gridFacetingVerticalLabelColor:{type:String,value:"#666666",observer:"_updateCSSVars"},gridFacetingHorizontalLabelColor:{type:String,value:"#dd6622",observer:"_updateCSSVars"},itemPositioningVerticalLabelColor:{type:String,
value:"#2255aa",observer:"_updateCSSVars"},itemPositioningHorizontalLabelColor:{type:String,value:"#118844",observer:"_updateCSSVars"}},_getImageFieldNameDefaultLabel:function(a){return a?"(image)":"(default)"},_isModeScatter:function(a){return"scatter"===a},_isKeyNumeric:function(a){return this.stats&&a in this.stats&&this.stats[a].isNumeric()},_isKeyCategorical:function(a){return this.stats&&a in this.stats&&!this.stats[a].isNumeric()},_updateCSSVars:function(){this.customStyle["--grid-faceting-vertical-label-color"]=
this.gridFacetingVerticalLabelColor;this.customStyle["--grid-faceting-horizontal-label-color"]=this.gridFacetingHorizontalLabelColor;this.customStyle["--item-positioning-vertical-label-color"]=this.itemPositioningVerticalLabelColor;this.customStyle["--item-positioning-horizontal-label-color"]=this.itemPositioningHorizontalLabelColor;this.updateStyles()},_breakUpAndTruncate:function(a){return Dn(""+a).replace(/([\W_])/g,"$1\u200b")},_maxBuckets:function(a,b){var c=this.stats[a];return c?b&&this._hasWordTree(a)?
Math.min(100,c.wordTree.highestLevel):Math.min(100,c.uniqueCount+1):100},_hasWordTree:function(a){a=this.stats[a];return!!a&&!!a.wordTree&&1<a.wordTree.highestLevel},_getPositionMode:function(a,b){return""==a&&""==b?"stacked":"scatter"},_openOverflow:function(){this.$.overflowmenu.positionElement=this.$.overflowbtn;this.$.overflowmenu.open()},_shouldShowOverflowMenu:function(a,b,c){return this._isKeyCategorical(a)||this._hasWordTree(b)||this._hasWordTree(c)}});
</script>




<script>//~~WEBPATH~~/facets-dive/lib/info-renderers.js
function Pn(a,b){var c=document.createElement("dl"),e;for(e in a)if(a.hasOwnProperty(e)){var f=document.createElement("dt");f.textContent=e;c.appendChild(f);f=document.createElement("dd");f.textContent=a[e];c.appendChild(f)}b.appendChild(c)};
</script>


<dom-module id="facets-dive-info-card">
  <template>
    <style>
      :host {
        @apply --paper-font-common-base;
        box-sizing: border-box;
        max-height: 100%;
        max-width: 100%;
        overflow: auto;
        padding: 8px;
      }
      ::content dt {
        color: #9e7c65;
        font-size: 14px;
      }
      ::content dd {
        @apply --paper-font-common-code;
        color: #513726;
        margin: 0 0 16px 0;
      }
    </style>
    
  </template>
</dom-module>

<script>//~~WEBPATH~~/facets-dive/components/facets-dive-info-card/facets-dive-info-card.js
Polymer({is:"facets-dive-info-card",properties:{infoRenderer:{type:Object},selectedData:{type:Array,value:[],observer:"_updateSelected"}},_updateSelected:function(a){var b=Polymer.dom(this.root);b.innerHTML="";if(a)for(var c=this.infoRenderer||Pn,e=0;e<a.length;e++){var f=a[e],g=document.createElement("div");g.style.width="100%";b.appendChild(g);c(f,g)}}});
</script>










<dom-module id="facets-dive-legend">
  <template>
    <style>
      :host {
        @apply --paper-font-common-base;
      }

      .legend {
        border: 1px solid #a9a9a9;
        min-width: 200px;
      }

      .topbar {
        display: flex;
        justify-content: space-between;
        padding: 8px;
        background: #E6E6FA;
      }

      .expand-button {
        padding: 0;
        width: 20px;
        height: 20px;
        margin-left: 10px;
      }

      .legend-body {
        border-top: 1px solid #a9a9a9;
        padding: 8px;
        background: white;
      }

      .legend .layout-row {
        margin: 0;
      }
      .legend .layout-row span {
        margin: 2px 0 0 8px;
      }

      /**
       * Legend table shim. Polymer's dom-repeat feature has a known issue in
       * which it doesn't work with <tr> elements inside of a <table>. So
       * instead, we use CSS with classed divs to achieve table behavior.
       */
      .legend-table {
        display: table;
        margin-left: 2px;
      }
      .legend-row {
        display: table-row;
      }
      .legend-cell {
        display: table-cell;
      }

      /**
       * Color legend.
       */
      .legend .color {
        font-size: 14px;
      }
      .legend .color iron-icon {
        --iron-icon-width: 16px;
        --iron-icon-height: 16px;
        margin: 0 2px;
      }
      .legend .color iron-icon[fill="#ffffff"] {
        background: #dddddd;
      }
      .legend .color span {
        margin: 0;
      }
      .legend .special {
        font-style: italic;
      }

      .legend h2 {
        @apply --paper-font-subhead;
        color: #4f423e;
        font-weight: bold;
        line-height: 1;
        margin: 0;
      }
      .legend .color-by-field {
        color: #968e8c;
        display: block;
        font-size: 12.5px;
        font-weight: normal;
        margin: 2px 0 4px 20px;
      }
    </style>
    <template is="dom-if" if="[[_anyColor(colorBy, palette)]]">
      <div class="legend">
        <div class="topbar">
          <div class="title">Legend</div>
          <paper-icon-button class="expand-button" on-click="_toggleOpened" icon="[[_getIcon(_opened)]]">
          </paper-icon-button>
        </div>
        <iron-collapse id="collapse" opened="{{_opened}}">
          <div class="legend-body">
            <h2>Colors</h2>
            <span class="color-by-field">
              by [[_breakUpAndTruncate(colorBy)]]
              <paper-tooltip position="top">[[colorBy]]</paper-tooltip>
            </span>

            <div class="legend-table">
              <template is="dom-repeat" items="[[palette]]">
                <div class="legend-row color">
                  <div class="legend-cell">
                    <iron-icon icon="av:fiber-manual-record" fill$="[[item.color]]" style$="fill:[[item.color]]"></iron-icon>
                  </div>
                  <div class="legend-cell">
                    <span class$="[[_specialClass(item.content.special)]]">
                      [[_breakUpAndTruncate(item.content.label)]]
                    </span>
                    <paper-tooltip position="top">[[item.content.label]]</paper-tooltip>
                  </div>
                </div>
              </template>
            </div>
          </div>
        </iron-collapse>
      </div>
    </template>
  </template>
</dom-module>
<script>//~~WEBPATH~~/facets-dive/components/facets-dive-legend/facets-dive-legend.js
Polymer({is:"facets-dive-legend",properties:{colorBy:{type:String,value:"",observer:"_open"},palette:{type:Array,value:[]},_opened:{type:Boolean,value:!1}},_breakUpAndTruncate:function(a){return Dn(""+a).replace(/([\W_])/g,"$1\u200b")},_anyColor:function(){return!!(this.colorBy&&this.palette&&this.palette.length)},_specialClass:function(a){return a?"special":""},_open:function(){this._opened=!0},_toggleOpened:function(){this._opened=!this._opened},_getIcon:function(a){return a?"expand-less":"expand-more"}});
</script>



<dom-module id="facets-dive">
  <template>

    <style>
      /**
       * paper-input-container uses an element containing only &nbsp; for
       * spacing purposes. Aggressive vulcanizers sometimes remove this content.
       * This CSS rule forces the containing element to have the correct height
       * in either case.
       */
      ::content paper-input-container > .floated-label-placeholder {
        min-height: 20px;
      }

      :host {
        background: #ffffff;
        box-sizing: border-box;
        display: flex;
        flex-grow: 1;
        height: 100%;
        overflow: hidden;
        position: relative;
        width: 100%;
      }
      .fill {
        display: flex;
        flex-grow: 1;
        position: relative;
      }
      .main {
        flex-direction: column;
      }
      facets-dive-controls {
        border-bottom: 1px solid #d3d3d3;
        flex-grow: 0;
        flex-shrink: 0;
        height: 60px;
      }
      .row {
        display: flex;
        flex-direction: row;
      }
      facets-dive-legend {
        position: absolute;
        bottom: 14px;
        right: 24px;
      }
      .zoom-controls {
        bottom: 14px;
        box-sizing: border-box;
        left: 0;
        position: absolute;
      }
      .zoom-controls paper-button {
        background-color: #e7e7e7;
        clear: left;
        color: #2b2b2b;
        display: block;
        float: left;
        margin: 4px 8px;
        min-width: 0;
        padding: 8px;
      }
      facets-dive-info-card {
        background: #fff8f4;
        border-left: 1px solid #c6c6c6;
        box-sizing: border-box;
        flex-grow: 0;
        flex-shrink: 0;
        width: 240px;
      }
    </style>

    <div class="fill main">
      <facets-dive-controls id="controls" atlas-url="[[atlasUrl]]" keys="[[_keys]]" stats="[[stats]]" vertical-facet="{{verticalFacet}}" vertical-buckets="{{verticalBuckets}}" vertical-bag-of-words="{{verticalBagOfWords}}" horizontal-facet="{{horizontalFacet}}" horizontal-buckets="{{horizontalBuckets}}" horizontal-bag-of-words="{{horizontalBagOfWords}}" position-mode="{{positionMode}}" vertical-position="{{verticalPosition}}" horizontal-position="{{horizontalPosition}}" color-by="{{colorBy}}" image-field-name="{{imageFieldName}}" palette="[[_palette]]" palette-choice="{{paletteChoice}}" grid-faceting-vertical-label-color="[[gridFacetingVerticalLabelColor]]" grid-faceting-horizontal-label-color="[[gridFacetingHorizontalLabelColor]]" item-positioning-vertical-label-color="[[itemPositioningVerticalLabelColor]]" item-positioning-horizontal-label-color="[[itemPositioningHorizontalLabelColor]]"></facets-dive-controls>

      <div class="fill row">
        <div class="fill">
          <facets-dive-vis id="vis" class="fill" data="[[data]]" filtered-data-indices="[[filteredDataIndices]]" atlas-url="[[atlasUrl]]" sprite-url="[[spriteUrl]]" cross-origin="[[crossOrigin]]" keys="{{_keys}}" stats="{{stats}}" sprite-image-width="[[spriteImageWidth]]" sprite-image-height="[[spriteImageHeight]]" vertical-facet="[[verticalFacet]]" vertical-buckets="[[verticalBuckets]]" vertical-bag-of-words="[[verticalBagOfWords]]" horizontal-facet="[[horizontalFacet]]" horizontal-buckets="[[horizontalBuckets]]" horizontal-bag-of-words="[[horizontalBagOfWords]]" position-mode="[[positionMode]]" vertical-position="[[verticalPosition]]" horizontal-position="[[horizontalPosition]]" color-by="{{colorBy}}" image-field-name="{{imageFieldName}}" palette="{{_palette}}" palette-choice="[[paletteChoice]]" grid-faceting-vertical-label-color="{{gridFacetingVerticalLabelColor}}" grid-faceting-horizontal-label-color="{{gridFacetingHorizontalLabelColor}}" item-positioning-vertical-label-color="{{itemPositioningVerticalLabelColor}}" item-positioning-horizontal-label-color="{{itemPositioningHorizontalLabelColor}}" fit-grid-aspect-ratio-to-viewport="[[fitGridAspectRatioToViewport]]" selected-data="{{selectedData}}" selected-indices="{{selectedIndices}}" compared-data="{{comparedData}}" compared-indices="{{comparedIndices}}" stable-colors="[[stableColors]]"></facets-dive-vis>

          <div class="zoom-controls">
            <paper-button raised id="zoomInButton">
              <iron-icon icon="icons:add"></iron-icon>
            </paper-button>
            <paper-button raised id="zoomOutButton">
              <iron-icon icon="icons:remove"></iron-icon>
            </paper-button>
            <paper-button raised id="fitButton">
              <iron-icon icon="icons:aspect-ratio"></iron-icon>
            </paper-button>
          </div>

          <facets-dive-legend id="legend" color-by="[[colorBy]]" palette="[[_palette]]">
          </facets-dive-legend>
        </div>

        <template is="dom-if" if="[[!hideInfoCard]]">
          <facets-dive-info-card id="infoCard" selected-data="[[selectedData]]" info-renderer="[[infoRenderer]]">
          </facets-dive-info-card>
        </template>
      </div>
    </div>

  </template>
</dom-module>

<script>//~~WEBPATH~~/facets-dive/components/facets-dive/facets-dive.js
Polymer({is:"facets-dive",properties:{data:{type:Array,value:null,notify:!0},filteredDataIndices:{type:Array,value:null},_keys:{type:Array,value:[]},stats:{type:Object,value:{},notify:!0},atlasUrl:{type:String,value:null,notify:!0},spriteUrl:{type:String,value:null,notify:!0},crossOrigin:{type:String,value:null,notify:!0},spriteImageWidth:{type:Number,value:64},spriteImageHeight:{type:Number,value:64},gridFacetingVerticalLabelColor:{type:String,value:"#666666"},gridFacetingHorizontalLabelColor:{type:String,
value:"#dd6622"},itemPositioningVerticalLabelColor:{type:String,value:"#2255aa"},itemPositioningHorizontalLabelColor:{type:String,value:"#118844"},fitGridAspectRatioToViewport:{type:Boolean,value:!1},verticalFacet:{type:String,value:"",notify:!0},verticalBuckets:{type:Number,value:10,notify:!0},verticalBagOfWords:{type:Boolean,value:!1,notify:!0},horizontalFacet:{type:String,value:"",notify:!0},horizontalBuckets:{type:Number,value:10,notify:!0},horizontalBagOfWords:{type:Boolean,value:!1,notify:!0},
positionMode:{type:String,value:"stacked",notify:!0},verticalPosition:{type:String,value:"",notify:!0},horizontalPosition:{type:String,value:"",notify:!0},colorBy:{type:String,value:"",notify:!0},imageFieldName:{type:String,value:"",notify:!0},_palette:{type:Array,value:[]},paletteChoice:{type:String,value:"standard",notify:!0},selectedData:{type:Array,value:[],notify:!0},selectedIndices:{type:Array,value:[],notify:!0},comparedData:{type:Array,value:[],notify:!0},comparedIndices:{type:Array,value:[],
notify:!0},height:{type:Number,value:null,observer:"_updateHeight"},infoRenderer:{type:Object},hideInfoCard:{type:Boolean,value:!1},stableColors:{type:Boolean,value:!1}},ready:function(){var a=this.$;a.fitButton.onclick=function(){return a.vis.fitToViewport()};a.zoomInButton.onclick=function(){return a.vis.zoomIn()};a.zoomOutButton.onclick=function(){return a.vis.zoomOut()};this.hideInfoCard&&(a.vis.style.right="0");this._updateHeight()},_updateHeight:function(){null!==this.height&&(this.style.height=
"number"===typeof this.height?this.height+"px":this.height)}});
</script>









<script>//~~WEBPATH~~/facets-overview/common/feature_statistics_generator.js
function Qn(){this.vals=[];this.counts=[]}function Rn(a){var b=new uh;a.forEach(function(c){var e=Sn(c.data);e.setName(c.name);wh(b).push(e)});return b}
function Sn(a){var b={};if(null==a)return new zh;a.forEach(function(c,e){var f;if(null!=c){for(var g=Object.keys(c),h={},l=0;l<g.length;l++){var n=g[l],m=c[n];h[n]=!0;n in b||(b[n]=new Qn,b[n].missing=e,b[n].counts=[]);"number"===typeof m||"string"===typeof m?(b[n].vals.push(m),b[n].counts.push(1)):m instanceof Array&&(b[n].counts.push(m.length),(f=b[n].vals).push.apply(f,m))}Object.keys(b).forEach(function(q){q in h||(b[q].missing+=1)})}});Object.keys(b).forEach(function(c){var e=0,f=0,g=!1;b[c].vals.forEach(function(h){"string"===
typeof h?e+=1:(f+=1,g=g||!(h===+h&&h===(h|0)))});b[c].type=f>e?g?1:0:2});return Tn(b,a.length)}function Tn(a,b){var c=new zh;we(c,2,b);for(var e in a)if(a.hasOwnProperty(e)){var f=new Eh;c.getFeaturesList().push(f);var g=a[e];f.setName(e);f.setType(g.type);1===g.type||0===g.type?(g=Un(g.vals,g.counts,b,g.missing),$e(f,3,ni[0],g)):2===g.type&&(g=Vn(g.vals,g.counts,b,g.missing),$e(f,4,ni[0],g))}return c}
function Un(a,b,c,e){var f=new yi;f.setCommonStats(lp(b,c,e));var g=0,h=0,l=0;b=a.filter(function(r){return"number"===typeof r&&!isNaN(r)}).map(function(r){return+r}).sort(function(r,v){return r-v});0<b.length&&(ye(f,5,b[0]),ye(f,7,b[b.length-1]),c=Math.floor(b.length/2),f.setMedian(0!==b.length%2?b[c]:(b[c]+b[c-1])/2));b.forEach(function(r){0===r&&(l+=1);g+=r;h+=r*r});1<b.length&&f.setStdDev(Math.sqrt((h-g*g/b.length)/(b.length-1)));f.setMean(g/a.length);we(f,4,l);a=b.filter(function(r){return Infinity!==
r&&-Infinity!==r});c=b.filter(function(r){return Infinity===r}).length;e=b.filter(function(r){return-Infinity===r}).length;var n=a[0],m=a[a.length-1];n=d3.range(n,m,(m-n)/10);n=d3.histogram().thresholds(n)(a);var q=f.addHistograms();q.setType(0);n.forEach(function(r){var v=q.addBuckets();v.setSampleCount(r.length);pk(v,r.x0);qk(v,r.x1)});n=q.getBucketsList();b.length&&-Infinity===b[0]&&(pk(n[0],-Infinity),n[0].setSampleCount(n[0].getSampleCount()+e));b.length&&Infinity===b[b.length-1]&&(qk(n[n.length-
1],Infinity),n[n.length-1].setSampleCount(n[n.length-1].getSampleCount()+c));q=f.addHistograms();mp(q,a);return f}function mp(a,b){var c=[0,10,20,30,40,50,60,70,80,90,100],e=c.length-1;c=c.map(function(l){if(0===b.length)l=NaN;else{l=l/100*(b.length-1);var n=Math.floor(l);l=n===l?b[l]:b[n]+(b[n+1]-b[n])*(l-n)}return l});a.setType(1);for(var f=b.length/e,g=0;g<e;g++){var h=a.addBuckets();h.setSampleCount(f);pk(h,c[g]);qk(h,c[g+1])}}
function Vn(a,b,c,e){var f=new Ai;f.setCommonStats(lp(b,c,e));var g=0,h={};a.forEach(function(m){m=String(m);h[m]=(h[m]||0)+1;g+=m.length});0<a.length&&ye(f,4,g/a.length);a=[];for(var l in h)h.hasOwnProperty(l)&&a.push({str:l,count:h[l]});f.setUnique(a.length);a=a.sort(function(m,q){return q.count-m.count});var n=new Wi;f.setRankHistogram(n);a.length&&(l=f.addTopValues(),l.setValue(a[0].str),ye(l,3,a[0].count));a.forEach(function(m,q){var r=n.addBuckets();r.setSampleCount(m.count);we(r,1,q);we(r,
2,q);xe(r,4,m.str,"")});return f}function lp(a,b,c){var e=new Uj,f=Infinity,g=0,h=0;a.forEach(function(l){l<f&&(f=l);l>g&&(g=l);h+=l});e.setNumNonMissing(b-c);e.setNumMissing(c);we(e,3,f);we(e,4,g);0<a.length&&e.setAvgNumValues(h/a.length);b=new Ri;Ze(e,6,b);mp(b,a);return e};
</script>
<script>//~~WEBPATH~~/facets-overview/common/utils.js
function np(){}function op(a,b,c,e,f,g,h,l){var n=this;this.histMap={};this.name=a;b&&(this.histMap[pp(!1,qp)]=b);c&&(this.histMap[pp(!0,qp)]=c);e&&(this.histMap[pp(!1,rp)]=e);f&&(this.histMap[pp(!0,rp)]=f);g&&(this.histMap[pp(!1,sp)]=g);h&&(this.histMap[pp(!1,tp)]=h);l&&Object.keys(l).forEach(function(m){return n.histMap[m]=l[m]})}
var up=function(){function a(b,c,e,f){this.name=b;this.stringValue=c;this.lowNumValue=e;this.highNumValue=f}a.prototype.clear=function(){this.highNumValue=this.lowNumValue=this.stringValue=this.name=void 0};a.prototype.equals=function(b){return b?this.name===b.name&&this.stringValue===b.stringValue&&this.lowNumValue===b.lowNumValue&&this.highNumValue===b.highNumValue:!1};return a}();
function vp(a){var b=wp(a);if(0===b)return 0;var c=a.reduce(function(e,f){f=+f.getSampleCount()||0;if(0===f)return e;f/=b;return e-f*Math.log(f)},0);return 0===c?0:c/Math.log(a.length)}function xp(a,b){return isFinite(a)&&-1===a.toString().indexOf("e")?+(Math.round(Number(a+"e+"+b))+"e-"+b):a}function yp(a,b,c){return(a=a.histMap[pp(b,c)])?a.getBucketsList():[]}function pp(a,b){b=null==b?qp:b;a&&(b="weighted"+b);return b}
function wp(a){return a.map(function(b){return b.getSampleCount()}).reduce(function(b,c){return(+c||0)+b},0)}function zp(a){return a.map(function(b){return wp(yp(b,!1))})}function Ap(a){var b=[];a.forEach(function(c){c.forEach(function(e){e=Bp(e.getLabel());-1===b.indexOf(e)&&b.push(e)})});return b}function Bp(a){return null==a||""===a?"\u00a0":a}function Cp(a){return null==a?0:"inf"===a?Infinity:"-inf"===a?-Infinity:+a}
function Dp(a){for(var b=a.map(function(w){return yp(w,!1)}),c=null,e=0;e<b.length;e++)if(0<b[e].length){c=b[e][0];break}if(!c)return 0;var f=zp(a);for(e=0;e<f.length;e++)if(0===f[e])return Infinity;var g=0;if(c instanceof uk){var h=Ap(b);for(e=1;e<a.length;e++){c=b[0];for(var l=b[e],n=0,m=0;m<h.length;m++){for(var q=h[m],r=0,v=0,u=0;u<c.length;u++)if(c[u].getLabel()===q){r=c[u].getSampleCount()?c[u].getSampleCount():0;break}for(u=0;u<l.length;u++)if(l[u].getLabel()===q){v=l[u].getSampleCount()?l[u].getSampleCount():
0;break}n=Ep(n,r,f[0],v,f[e])}g=Math.max(g,n)}}else for(e=1;e<a.length;e++){c=b[0];l=b[e];n=0;h=Math.max(c.length,l.length);for(m=0;m<h;m++)r=m<c.length&&c[m].getSampleCount()?c[m].getSampleCount():0,v=m<l.length&&l[m].getSampleCount()?l[m].getSampleCount():0,n=Ep(n,r,f[0],v,f[e]);g=Math.max(g,n)}return g}function Ep(a,b,c,e,f){var g=b/c-e/f;b=b/(c*c)+e/(f*f);return a+(b?g*g/b:0)}
function Fp(a){wh(a).forEach(function(b){b.getFeaturesList().forEach(function(c){var e=[];if(qi(c)){var f=qi(c).getRankHistogram();f&&e.push(f);(c=qi(c).getTopValuesList())&&c.forEach(function(g){var h=te(g,1,0);h&&!+te(g,3,0)&&ye(g,3,h)})}else oi(c)&&(c=oi(c).getHistogramsList())&&(e=e.concat(c));e.forEach(function(g){(g=g.getBucketsList())&&g.forEach(function(h){var l=te(h,3,0);l&&!h.getSampleCount()&&h.setSampleCount(l)})})})});return a}
function Gp(a){var b=!0;wh(a).forEach(function(c){c.getFeaturesList().forEach(function(e){var f=[];if(qi(e)){var g=qi(e).getRankHistogram();g&&f.push(g);(e=qi(e).getTopValuesList())&&e.forEach(function(h){te(h,1,0)&&!+te(h,3,0)&&(b=!1)})}else oi(e)&&(e=oi(e).getHistogramsList())&&(f=f.concat(e));f.forEach(function(h){(h=h.getBucketsList())&&h.forEach(function(l){te(l,3,0)&&!l.getSampleCount()&&(b=!1)})})})});return b}
function Hp(a){if(!a)return!1;for(var b=0;b<a.length;b++)if(a[b].histMap[pp(!0,qp)])return!0;return!1}function Ip(a){return a?a.getNumNonMissing()*a.getAvgNumValues():0}
function Jp(a){switch(a){case 0:return"int";case 1:return"fixed-length ints";case 2:return"variable-length ints";case 3:return"float";case 4:return"fixed-length floats";case 5:return"variable-length floats";case 6:return"string";case 7:return"fixed-length strings";case 8:return"variable-length strings";case 9:return"bytes";case 10:return"fixed-length bytes";case 11:return"variable-length bytes";case 12:return"struct";case 13:return"fixed-length struct";case 14:return"variable-length struct";default:return"unknown"}}
function Kp(){}function Lp(){}function Mp(){}function Np(a){for(var b=0,c=0,e=0;e<a.length;e++)a[e].rawBuckets.length>b&&(b=a[e].rawBuckets.length,c=e);e=[];for(var f=0;f<b;f++){var g=new Mp;g.value=a[c].rawBuckets[f].getLabel();g.counts=[];for(var h=0;h<a.length;h++)a[h].rawBuckets.length<=f?g.counts.push(0):g.counts.push(a[h].rawBuckets[f].getSampleCount());e.push(g)}return e}
function Op(a,b){for(var c=[],e=0;e<b.length;e++){var f=new Mp,g=b[e];f.value=g;f.counts=[];for(var h=0;h<a.length;h++){for(var l=a[h].rawBuckets,n=-1,m=0;m<l.length;m++)if(l[m].getLabel()===g){n=m;break}-1===n?f.counts.push(0):f.counts.push(l[n].getSampleCount())}c.push(f)}return c}var Pp,Qp=Pp||(Pp={});Qp[Qp.HISTOGRAM=0]="HISTOGRAM";Qp[Qp.BAR_CHART=1]="BAR_CHART";Qp[Qp.CUMDIST_CHART=2]="CUMDIST_CHART";var qp="Standard",rp="Quantiles",sp="Value list length",tp="Feature list length";
function Rp(a,b,c){var e=!0,f=0;a.forEach(function(g){g.histMap[b]&&(g=g.histMap[b].getBucketsList(),f=Math.max(f,g.length),g.forEach(function(h){h.getLowValue||(e=!1)}))});return e?Pp.HISTOGRAM:f>c?Pp.CUMDIST_CHART:Pp.BAR_CHART}var Sp=function(){function a(b,c,e){this.str=b;this.cssClass=c;this.fullStr=e;this.fullStr||(this.fullStr=b)}a.prototype.append=function(b,c){c&&(this.str+=c,this.fullStr+=c);this.str+=b.str;this.fullStr+=b.fullStr;this.cssClass+=b.cssClass};return a}();
function Tp(a){var b=Math.abs(a);return(.01>b&&0<b||1E4<b)&&isFinite(a)?d3.format(".3s")(a).replace(/G$/,"B"):a.toLocaleString()}function Up(a,b){var c=Tp(xp(Cp(a),1E6<Math.abs(a)?0:2));b=Vp(a,b,void 0);return new Sp(c,b,a.toLocaleString([],{maximumFractionDigits:9}))}function Wp(a,b,c){a=Cp(a);a=null!=a&&b?a/b:0;b=.999999<a&&1>a?"~100%":1E-6>a&&0<a?"~0%":xp(100*a,2)+"%";c=Vp(a,!1,c);return new Sp(b,c,100*a+"%")}function Xp(a,b,c){var e=Tp(a);b=Vp(a,b,c);return new Sp(e,b,a.toLocaleString())}
function Yp(a,b){a=Bp(a);a=0===a.length||isNaN(+a)?a:'"'+a+'"';b=Vp(a,b,void 0);return new Sp(a,b)}function Vp(a,b,c){b=b?"data-weighted ":"";if(c&&c(a)||"number"===typeof a&&!isFinite(a))b+="data-error ";return b}function Zp(a){return a?oi(a)?Qj(oi(a)):qi(a)?Qj(qi(a)):si(a)?Qj(si(a)):Be(a,ui,7)?Qj(Be(a,ui,7)):null:null}
function $p(a){var b=[];a?(b.push(Xp(a.getNumNonMissing(),!1,function(c){return 0>=c})),b.push(Wp(a.getNumMissing(),Cp(a.getNumNonMissing())+Cp(a.getNumMissing()),function(c){return.02<c}))):(b.push(Xp(0,!1,function(c){return 0>=c})),b.push(Wp(1,1,function(c){return.02<c})));return b}
function aq(a,b,c){var e=[];if(a)(c=c?Be(a,Sj,9):null)?(e.push(Up(c.getMean(),!0)),e.push(Up(c.getStdDev(),!0))):(e.push(Up(a.getMean())),e.push(Up(a.getStdDev()))),e.push(Wp(te(a,4,0),Ip(b),function(f){return.1<f})),b=bq(a),e.push(Up(b?NaN:+te(a,5,0))),c?e.push(Up(c.getMedian(),!0)):e.push(Up(a.getMedian())),e.push(Up(b?NaN:+te(a,7,0)));else for(a=0;6>a;a++)e.push(Yp("-"));return e}
function bq(a){if(!a)return!1;a=a.getHistogramsList();for(var b=0;b<a.length;b++)if(0<te(a[b],1,0))return!0;return!1}function cq(a,b){var c=[];if(a){b=b?Be(a,bk,6):null;c.push(Xp(te(a,2,0)));var e=b?b.getTopValuesList():a.getTopValuesList();e&&0<e.length?(c.push(Yp(e[0].getValue(),!!b)),c.push(Up(+te(e[0],3,0),!!b))):(c.push(Yp("-")),c.push(Yp("-")));c.push(Up(+te(a,4,0)))}else for(a=0;4>a;a++)c.push(Yp("-"));return c}
function dq(a){var b=[];if(a)b.push(Xp(te(a,2,0))),b.push(Yp("-")),b.push(Yp("-")),b.push(Up(+te(a,3,0)));else for(a=0;4>a;a++)b.push(Yp("-"));return b}function eq(a){var b=[];if(a&&0<a.length){var c=new Sp("","data-custom ");a.forEach(function(e){if(!Be(e,Ri,4)&&!e.getRankHistogram()){var f=e.getName();""!==c.str&&(f="\n"+f);c.append(Yp(f));te(e,3,"")?c.append(Yp(te(e,3,"")),": "):c.append(Up(+te(e,2,0)),": ")}});b.push(c)}else a=new Sp("-","data-custom "),b.push(a);return b}
function fq(a){var b=a.map(function(){return 0});a.forEach(function(c,e){c.forEach(function(f){b[e]+=Cp(f.getSampleCount())})});return a.map(function(c,e){return c.map(function(f){if(f instanceof mk){var g=new mk;g.setSampleCount(f.getSampleCount()/b[e]);pk(g,f.getLowValue());qk(g,rk(f))}else{g=new uk;g.setSampleCount(f.getSampleCount()/b[e]);var h=te(f,1,0);we(g,1,h);h=te(f,2,0);we(g,2,h);f=f.getLabel();xe(g,4,f,"")}return g})})};
</script>
<script>//~~WEBPATH~~/facets-overview/common/overview_data_model.js
var gq=function(){function a(b){this.data=b;this.colorScale=new Plottable.Scales.Color;this.colorScale.domain(wh(b).map(function(c){return c.getName()}));this.colorScale.range("#4285F4 #F09300 #0F9D58 #9C27B0 #607D8B #0B8043 #757575".split(" "));if(!Gp(b))throw Error("input proto has not been cleaned");this.featuresBySpec=this.makeFeatureBySpecList()}a.prototype.makeFeatureBySpecList=function(){for(var b=this,c=[],e=0;16>e;e++)c[e]=[];this.getUniqueFeatures().forEach(function(f){var g=b.getFeatureSpecForFeature(f.getName());
c[g].push(f.getName())});return c};a.prototype.getNonEmptyFeatureSpecLists=function(){for(var b=[],c=0;16>c;c++)if(0!==this.featuresBySpec[c].length){var e=new Kp;e.features=this.featuresBySpec[c];e.spec=c;b.push(e)}return b};a.prototype.getFeatureSpecForFeature=function(b){for(var c=this.getDatasetNames(),e=15,f=0;f<c.length;f++){var g=this.getFeature(b,c[f]);if(null==g)g=15;else{g=g.getType();var h=this.getFeatureCommonStats(b,c[f]),l=15;if(null!=h&&0!==h.getNumNonMissing()){var n=l=!1;te(h,3,0)===
te(h,4,0)&&(1===te(h,3,0)?l=!0:n=!0);l=1===g?l?3:n?4:5:0===g?l?0:n?1:2:2===g?l?6:n?7:8:3===g?l?9:n?10:11:l?12:n?13:14}g=l}e=15===e?g:16<=e||15===g?e:3<=e&&5>=e&&3<=g&&5>=g||0<=e&&2>=e&&0<=g&&2>=g||6<=e&&8>=e&&6<=g&&8>=g||9<=e&&11>=e&&9<=g&&11>=g||12<=e&&14>=e&&12<=g&&14>=g?Math.max(e,g):16}16===e&&(e=15);return e};a.prototype.getDatasetFeatureStatistics=function(){return this.data};a.prototype.getColorScale=function(){return this.colorScale};a.prototype.getDatasetNames=function(){return this.data?
wh(this.data).map(function(b){return b.getName()}):[]};a.prototype.getDataset=function(b){if(!this.data)return null;for(var c=0,e=wh(this.data);c<e.length;c++){var f=e[c];if(f.getName()===b)return f}return null};a.prototype.getFeature=function(b,c){if(!b||!this.data)return null;var e=this.getDataset(c);if(!e)return null;c=0;for(e=e.getFeaturesList();c<e.length;c++){var f=e[c];if(f.getName()===b)return f}return null};a.prototype.getExtraHistogramNames=function(b){if(!this.data)return[];b=b.map(function(q){return q.getName()});
for(var c={},e=0,f=wh(this.data);e<f.length;e++)for(var g=0,h=f[e].getFeaturesList();g<h.length;g++){var l=h[g];if(-1!==b.indexOf(l.getName())&&(wi(l)&&wi(l).forEach(function(q){if(Be(q,Ri,4)||q.getRankHistogram())c[q.getName()]=!0}),oi(l)&&(l=oi(l).getHistogramsList())))for(var n=0;n<l.length;n++){var m=l[n];m.getName()&&(c[m.getName()]=!0)}}return Object.keys(c)};a.prototype.getFeatureCommonStats=function(b,c){b=this.getFeature(b,c);return null==b?null:Zp(b)};a.prototype.getFeatureNames=function(b){return b&&
this.data?(b=this.getDataset(b))?b.getFeaturesList().map(function(c){return c.getName()}):[]:null};a.prototype.getFeatureIndex=function(b,c){if(!this.data)return null;var e=this.getDataset(b);if(!e)return null;var f=b=0;for(e=e.getFeaturesList();f<e.length;f++){if(e[f].getName()===c)return b;++b}return null};a.prototype.getUniqueFeatures=function(){if(!this.data)return[];for(var b={},c=0,e=wh(this.data);c<e.length;c++)for(var f=0,g=e[c].getFeaturesList();f<g.length;f++){var h=g[f];b[h.getName()]=
h}return Object.keys(b).map(function(l){return b[l]})};a.prototype.getNumUniqueFeaturesByType=function(b){return this.getUniqueFeatures().filter(function(c){return null!=oi(c)===b}).length};a.prototype.featureHasSingleValue=function(b){if(!b)return!1;if(qi(b)){var c=te(qi(b),2,0);return 1===Cp(c)}return si(b)?(c=te(si(b),2,0),1===Cp(c)):oi(b)?(c=+te(oi(b),5,0),b=+te(oi(b),7,0),null==c&&null==b?!1:Cp(c)===Cp(b)):!1};a.prototype.featureAcrossAllDatasetsHasSingleValue=function(b){if(!b||!this.data)return!1;
for(var c=0,e=wh(this.data);c<e.length;c++)for(var f=0,g=e[c].getFeaturesList();f<g.length;f++){var h=g[f];if(b===h.getName()&&!this.featureHasSingleValue(h))return!1}return!0};a.prototype.getFeatureSingleValue=function(b){if(null==b)return"\x3cnull\x3e";if(qi(b))return b=qi(b).getTopValuesList(),null==b||0===b.length?"\x3cnull\x3e":b[0].getValue();if(si(b))return 0===te(si(b),2,0)?"\x3cnull\x3e":"\x3cbinary data\x3e";if(oi(b)){var c=+te(oi(b),5,0);if(c)return Cp(c).toString();if(b=+te(oi(b),7,0))return Cp(b).toString()}return"\x3cunknown type\x3e"};
a.prototype.getDatasetHistogramsForFeature=function(b){var c=[];if(this.data)for(var e=function(l){for(var n=l.getName(),m=null,q=null,r=null,v=null,u=null,w=null,z={},A=0,E=l.getFeaturesList();A<E.length;A++)if(l=E[A],l.getName()===b){if(A=f.getFeatureCommonStats(b,n))u=Be(A,Ri,6),w=Be(A,Ri,9);wi(l)&&wi(l).forEach(function(D){Be(D,Ri,4)?z[D.getName()]=Be(D,Ri,4):D.getRankHistogram()&&(z[D.getName()]=D.getRankHistogram())});if(oi(l)){var C=oi(l).getHistogramsList();if(C)for(A=0;A<C.length;A++)E=C[A],
E.getName()?z[E.getName()]=E:0===E.getType()?m=E:r=E;if(Be(oi(l),Sj,9)&&(l=Be(oi(l),Sj,9).getHistogramsList()))for(A=0;A<l.length;A++)E=l[A],0===E.getType()?q=E:v=E}else qi(l)&&(m=qi(l).getRankHistogram(),Be(qi(l),bk,6)&&(q=Be(qi(l),bk,6).getRankHistogram()));break}c.push(new op(n,m,q,r,v,u,w,z))},f=this,g=0,h=wh(this.data);g<h.length;g++)e(h[g]);return c};a.prototype.doesContainWeightedStats=function(){if(null==this.containsWeightedStats){a:{var b=this.data;for(var c=0;c<wh(b).length;c++)for(var e=
wh(b)[c],f=0;f<e.getFeaturesList().length;f++){var g=e.getFeaturesList()[f];if(qi(g)){if(Be(qi(g),bk,6)){b=!0;break a}}else if(oi(g)&&Be(oi(g),Sj,9)){b=!0;break a}}b=!1}this.containsWeightedStats=b}return this.containsWeightedStats};a.prototype.doesContainCustomStats=function(){if(null==this.containsCustomStats){a:{var b=this.data;for(var c=0;c<wh(b).length;c++)for(var e=wh(b)[c],f=0;f<e.getFeaturesList().length;f++){var g=wi(e.getFeaturesList()[f]);if(null!=g&&0<g.length){b=!0;break a}}b=!1}this.containsCustomStats=
b}return this.containsCustomStats};a.prototype.doesContainFeatureListLengthData=function(){if(null==this.containsFeatureListLengthData){a:{var b=this.data;for(var c=0;c<wh(b).length;c++)for(var e=wh(b)[c],f=0;f<e.getFeaturesList().length;f++){var g=e.getFeaturesList()[f];if((g=Zp(g))&&Be(g,Ri,9)){b=!0;break a}}b=!1}this.containsFeatureListLengthData=b}return this.containsFeatureListLengthData};a.prototype.getChartAlpha=function(){return 2<=this.getDatasetNames().length?.4:1};a.prototype.getChartColorString=
function(b){b=this.getColorScale().scale(this.getDatasetNames()[b]);var c=this.getChartAlpha();return b.replace("rgb","rgba").replace(")",", "+c+")")};return a}();
</script>










<dom-module id="facets-overview-row-stats">
  <template>
    <style>
      * {
        text-align: right;
        white-space: nowrap;
        overflow-x: hidden;
        text-overflow: ellipsis;
      }
      .data-error {
        color: red;
        font-weight: bold;
      }
      .data-weighted {
        font-style: italic;
      }
      .table-row {
        display: flex;
        margin-bottom: 4px;
      }
      .table-cell {
        min-width: 70px;
        max-width: 70px;
        padding-right: 4px;
        overflow: hidden;
      }
      .data-custom {
        min-width: 150px;
        max-width: 150px;
        white-space: pre;;
      }
      #legend-box {
        width: 6px;
        height: 16px;
        margin-left: 4px;
      }
    </style>
    <div class="table-row">
      <div id="legend-box"></div>
      <template is="dom-repeat" items="[[_entries]]">
        <div class$="[[item.cssClass]] table-cell" title="[[item.fullStr]]">[[item.str]]</div>
      </template>
    </div>
  </template>
</dom-module>
<script>//~~WEBPATH~~/facets-overview/components/facets-overview-row-stats/facets-overview-row-stats.js
Polymer({is:"facets-overview-row-stats",properties:{stats:Object,showWeighted:Boolean,hasCustom:Boolean,dataModel:Object,datasetIndex:Number,compareMode:Boolean,_entries:{type:Array,computed:"_getEntries(stats, showWeighted, hasCustom)"}},observers:["_colorLegendBox(dataModel, datasetIndex, compareMode)"],_getEntries:function(a,b,c){if(a){var e=Zp(a),f=$p(e);f=oi(a)?f.concat(aq(oi(a),e,b)):qi(a)?f.concat(cq(qi(a),b)):f.concat(dq(si(a)));c&&(f=f.concat(eq(wi(a))));a=f}else a=[];return a},_colorLegendBox:function(a,
b,c){var e=d3.select(this.$$("#legend-box"));2>a.getDatasetNames().length&&!c?e.style("visibility","hidden"):(e.style("visibility",null),e.style("background-color",a.getChartColorString(b)))}});
</script>




<dom-module id="facets-overview-row-legend">
  <template>
    <style>
      .table-row {
        display: flex;
        background: rgba(61,140,207,0.1);
        border-left: solid 0.5px rgba(0,0,0,0.1);
        border-bottom: solid 0.5px rgba(0,0,0,0.1);
      }
      .table-cell {
        padding: 20px 4px 8px 0;
        min-width: 69px;
        max-width: 69px;
        text-align: right;
        font-size: 14px;
        font-weight: 300;
        border-right: solid 0.5px rgba(0,0,0,0.1);
      }
      .data-weighted {
        font-style: italic;
      }
      .data-custom {
        min-width: 150px;
        max-width: 150px;
      }
      .legend-space {
        width: 6px;
        height: 8px;
        margin-left: 4px;
      }
    </style>
    <div class="table-row">
      <div class="legend-space"></div>
      <template is="dom-repeat" items="[[_entries]]">
        <div class$="[[item.cssClass]] table-cell">[[item.str]]</div>
      </template>
    </div>
  </template>
</dom-module>
<script>//~~WEBPATH~~/facets-overview/components/facets-overview-row-legend/facets-overview-row-legend.js
Polymer({is:"facets-overview-row-legend",properties:{numeric:Boolean,showWeighted:Boolean,hasCustom:Boolean,dataModel:Object,_entries:{type:Array,computed:"_getEntries(numeric, showWeighted, hasCustom)"}},_getEntries:function(a,b,c){var e=[];e.push(Yp("count"));e.push(Yp("missing"));a?(e.push(Yp("mean",b)),e.push(Yp("std dev",b)),e.push(Yp("zeros")),e.push(Yp("min")),e.push(Yp("median",b)),e.push(Yp("max"))):(e.push(Yp("unique")),e.push(Yp("top",b)),e.push(Yp("freq top",b)),e.push(Yp("avg str len")));
c&&(a=new Sp("custom","data-custom "),e.push(a));return e}});
</script>








<dom-module id="facets-overview-chart">
  
  <template>
    <style>
      .plottable.chart-small {
        height: 46px;
        width: 250px;
      }
      .plottable.xaxis-small{
        height: 30px;
        width: 250px;
      }
      .plottable.chart-big {
        height: 200px;
        width: 550px;
      }
      .plottable.xaxis-big {
        height: 50px;
        width: 550px;
      }
      #show_table_button {
        margin: 0 0 0 5px;
        padding: 0 3px;
        font-size: 7pt;
        background-color: #d3d3d3;
      }
      .dialog-row-entry {
        padding: 0 10px 0 0;
      }
      .table-header {
        border-bottom: 1px solid black;
      }
      .dialog-row, .dialog-header-row {
        display: flex;
      }
      .dialog-row.selected {
        border: 1px solid black
      }
      .dialog-row:hover {
        background-color: #D0D0D0;
        cursor: pointer;
      }
      .dialog-table {
        clear: left;
      }
      .label-cell {
        width: 90px;
        max-width: 90px;
        min-width: 90px;
        overflow-wrap: break-word;
      }
      .non-overflow-label-cell {
        width: 90px;
        max-width: 90px;
        min-width: 90px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
      .count-cell {
        width: 100px;
        max-width: 100px;
        min-width: 100px;
        overflow-wrap: break-word;
      }
      .weighted-cell {
        font-style: italic;
      }
      .data-list-small {
        height: 60px;
      }
      .data-list-big {
        height: 180px;
        width: 550px;
      }
      .hidechart {
        display: none;
      }
      .showchart {
        display: inline;
      }
      #tooltip {
        background-color: var(--paper-tooltip-background, #616161);
        opacity: 0;
        color: white;
        pointer-events:none;
        transition: opacity 0.3s;
        position: absolute;
        text-align:center;
        padding: 6px;
        border-radius: 2px;
        font-size: 12px;
        line-height: 1;
        margin-left: 50px;
        white-space: pre;
        top: 0px;
      }
      .toplevel {
        position: relative;
        text-align: left;
        padding-top: 4px;
      }
    </style>
    <div class="toplevel">
      <template is="dom-if" if="[[_isStringChart(_chartType, chartSelection)]]">
        <paper-button id="show_table_button" on-click="_toggleShowTable">[[_getShowTableButtonText(_showTable)]]</paper-button>
      </template>
      <div class$="[[_chartClass]]">
        <div id="chart" class$="[[_chartSvgClass]]"></div>
        <div id="xaxis" class$="[[_xAxisSvgClass]]"></div>
      </div>
      <template is="dom-if" if="[[_showTable]]">
        <div class="dialog-table">
          <div class="dialog-header-row">
            <div class="dialog-row-entry table-header label-cell">Value</div>
            <template is="dom-repeat" items="[[data]]" as="data">
              <div class="dialog-row-entry table-header">
                <div class="non-overflow-label-cell">[[data.name]]</div>
              </div>
            </template>
          </div>
          <iron-list items="[[_tableData]]" as="entry" class$="[[_tableDataClass]]">
            <template>
              <div class$="[[_getEntryRowClass(entry, selection)]]" on-tap="_rowClick" data-value="[[_getEntryRowValue(entry)]]">
                <div class="dialog-row-entry label-cell">[[entry.value]]</div>
                <template is="dom-repeat" items="[[entry.counts]]" as="count">
                  <div class$="[[_getCountCellClass(showWeighted)]]">[[count]]</div>
                </template>
              </div>
            </template>
          <iron-list>
        </iron-list></iron-list></div>
      </template>
      <div id="tooltip"></div>
    </div>
  </template>
</dom-module>
<script>//~~WEBPATH~~/facets-overview/components/facets-overview-chart/facets-overview-chart.js
Polymer({is:"facets-overview-chart",properties:{data:{type:Object,observer:"_updateData"},dataModel:Object,feature:String,_maxBucketsForBarChart:{type:Number,value:10,readOnly:!0},_chartAlpha:{type:Number,value:1},logScale:Boolean,showWeighted:Boolean,showPercentage:Boolean,chartSelection:{type:Number,observer:"_updateChartSelection"},selection:{type:Object,observer:"_updateSelectionVisibility",notify:!0},expandChart:Boolean,_selectionElem:Object,_minBarHeightRatio:{type:Number,value:.01,readOnly:!0},
_onClick:Object,_onClickFunction:Object,_onPointer:Object,_onPointerEnterFunction:Object,_onPointerExitFunction:Object,_tableData:Array,_showTable:{type:Boolean,value:!1},_chartType:Object,_chartClass:{type:String,computed:"_getChartClass(_showTable)"},_chartSvgClass:{type:String,computed:"_getChartSvgClass(expandChart)"},_xAxisSvgClass:{type:String,computed:"_getXAxisSvgClass(expandChart)"},_tableDataClass:{type:String,computed:"_getTableDataClass(expandChart)"}},observers:["_render(data, logScale, showWeighted, chartSelection, _showTable, expandChart, showPercentage, dataModel)"],
_updateData:function(){this._showTable=!1},_updateChartSelection:function(){this._showTable=!1},_hasWeightedHistogram:function(a){return Hp(a)},_hasQuantiles:function(a){a:{if(a)for(var b=0;b<a.length;b++)if(a[b].histMap[rp]){a=!0;break a}a=!1}return a},_isStringChart:function(a,b){return(a===Pp.CUMDIST_CHART||a===Pp.BAR_CHART)&&b!==sp&&b!==tp},_disableLogCheckbox:function(a,b){return a||b!==qp},_render:function(a,b,c,e,f,g,h,l){var n=this;this._onPointer&&(this._onPointer.offPointerMove(this._onPointerEnterFunction),
this._onPointer.offPointerMove(this._onPointerExitFunction));this._onClick&&this._onClick.offClick(this._onClickFunction);a&&(this._chartAlpha=l.getChartAlpha(),f=a.map(function(m){return n._getBuckets(m,c,e)}),this._chartType=Rp(a,e,this._maxBucketsForBarChart),a=a.map(function(m){return m.name}),e===sp||e===tp||e===rp?this._renderQuantileChart(f,a,b):this._chartType===Pp.HISTOGRAM?this._renderHistogramChart(f,a,b,h):this._chartType===Pp.CUMDIST_CHART?this._renderCdfChart(f,a,b):this._renderBarChart(f,
a,b,h))},_renderHistogramChart:function(a,b,c,e){var f=this,g=[],h=new Plottable.Plots.Rectangle,l=Infinity,n=-Infinity,m=0;e&&(a=fq(a));a.forEach(function(u,w){u.forEach(function(z){var A=Cp(z.getLowValue()),E=Cp(rk(z));z=Cp(z.getSampleCount());A<l&&(l=A);E>n&&(n=E);z>m&&(m=z);isFinite(A)&&isFinite(E)&&g.push(E-A)});h.addDataset(new Plottable.Dataset(u,{name:b[w]}))});var q=0<g.length?g.reduce(function(u,w){return u+w})/g.length:0;0===q&&(q=1);e=[];isFinite(l)&&(e.push(l),isFinite(n)&&e.push(n));
a=new Plottable.Scales.Linear;0<e.length&&a.domain(e);e=this._getScale(c).domain([0]);var r=new Plottable.Axes.Numeric(a,"bottom"),v=new Plottable.Axes.Numeric(e,"left");v.formatter(this._chartAxisScaleFormatter());r.formatter(this._chartAxisScaleFormatter());h.x(function(u){var w=Cp(u.getLowValue());if(-Infinity===w||w===rk(u))u=Cp(rk(u)),isFinite(u)?w=u-q:(w=0,-Infinity===u&&(w-=q));return w},a).x2(function(u){var w=Cp(rk(u));if(Infinity===w||w===u.getLowValue())u=Cp(u.getLowValue()),isFinite(u)?
w=u+q:(w=0,Infinity===u&&(w+=q));return w}).y(function(){return 0},e).y2(function(u){return f._getCountWithFloor(u,m,c)});h.attr("fill",function(u,w,z){return z.metadata().name},this.dataModel.getColorScale()).attr("opacity",this._chartAlpha);this._renderChart(h,r,v,null,null,function(u){return h.entitiesAt(u)},function(u){return xp(Cp(u.getLowValue()),2).toLocaleString()+"-"+xp(Cp(rk(u)),2).toLocaleString()+": "+Cp(u.getSampleCount()).toLocaleString()},function(u){return new up(f.feature,void 0,
Cp(u.getLowValue()),Cp(rk(u)))},function(u){return u.append("rect").attr("stroke","black").attr("fill","none").attr("stroke-width","1px")},function(u,w){return u.attr("x",w.position.x-w.selection._groups[0][0].width.baseVal.value/2).attr("y",w.position.y-w.selection._groups[0][0].height.baseVal.value/2).attr("width",w.selection._groups[0][0].width.baseVal.value).attr("height",w.selection._groups[0][0].height.baseVal.value)})},_renderQuantileChart:function(a,b,c){var e=this,f=new Plottable.Plots.Line,
g=new Plottable.Plots.Scatter,h=Infinity,l=-Infinity;a.forEach(function(q,r){var v=[],u=q.length;q.forEach(function(z,A){var E=Cp(z.getLowValue()),C=Cp(rk(z));E<h&&(h=E);C>l&&(l=C);E=new np;E.bucket=z;E.datasetIndex=r;E.quantile=100*A/u;v.push(E)});if(0<q.length){var w=new mk;pk(w,rk(q[q.length-1]));qk(w,rk(q[q.length-1]));w.setSampleCount(q[q.length-1].getSampleCount());q=new np;q.bucket=w;q.datasetIndex=r;q.quantile=100;v.push(q)}f.addDataset(new Plottable.Dataset(v,{name:b[r]}));g.addDataset(new Plottable.Dataset(v,
{name:b[r]}))});var n=isFinite(h)&&isFinite(l)?l===h?1:(l-h)/10:0,m=[];isFinite(h)&&(m.push(h-n),isFinite(l)&&m.push(l+n));c=this._getScale(c);0<m.length&&c.domain(m);m=this._getScale(!1).domain([-a.length+.5,1]);a=new Plottable.Axes.Numeric(c,"bottom");a.formatter(this._chartAxisScaleFormatter());f.x(function(q){return Cp(q.bucket.getLowValue())},c).y(function(q){return-1*q.datasetIndex},m);g.x(function(q){return Cp(q.bucket.getLowValue())},c).y(function(q){return-q.datasetIndex},m).size(function(q){return 50===
q.quantile?15:8}).symbol(function(){return Plottable.SymbolFactories.cross()});f.attr("stroke","gray").attr("opacity",this._chartAlpha);g.attr("fill",function(q,r,v){return v.metadata().name},this.dataModel.getColorScale()).attr("opacity",this._chartAlpha);m=new Plottable.Components.Group([f,g]);this._renderChart(m,a,null,null,null,function(q){return g.entitiesAt(q)},function(q){return q.quantile+"%: "+xp(Cp(q.bucket.getLowValue()),2).toLocaleString()},function(q){return new up(e.feature,void 0,Cp(q.bucket.getLowValue()),
Cp(rk(q.bucket)))},function(q){return q.append("circle").attr("r",3).attr("stroke","black").attr("fill","none").attr("stroke-width","1px")},function(q,r){return q.attr("cx",r.position.x).attr("cy",r.position.y)})},_renderBarChart:function(a,b,c,e){var f=this,g=Ap(a),h=new Plottable.Scales.Linear,l=new Plottable.Scales.Category,n=this._getScale(c);l.domain(g);l=new Plottable.Axes.Category(l,"bottom");var m=new Plottable.Axes.Numeric(n,"left");m.formatter(this._chartAxisScaleFormatter());e&&(a=fq(a));
var q=0;e=a.map(function(v,u){v.forEach(function(z){z=Cp(z.getSampleCount());z>q&&(q=z)});var w=new Lp;w.name=b[u];w.rawBuckets=v;return w});this._tableData=Op(e,g);var r=new Plottable.Plots.Bar;a.forEach(function(v,u){return r.addDataset(new Plottable.Dataset(v,{name:b[u]}))});r.x(function(v){return g.indexOf(Bp(v.getLabel()))},h).y(function(v){return f._getCountWithFloor(v,q,c)},n);r.attr("fill",function(v,u,w){return w.metadata().name},this.dataModel.getColorScale()).attr("opacity",this._chartAlpha);
this._renderChart(r,l,m,null,null,function(v){return r.entitiesAt(v)},function(v){return Bp(v.getLabel())+": "+Cp(v.getSampleCount()).toLocaleString()},function(v){return new up(f.feature,v.getLabel())},function(v){return v.append("rect").attr("stroke","black").attr("fill","none").attr("stroke-width","1px")},function(v,u){return v.attr("x",u.position.x-u.selection._groups[0][0].width.baseVal.value/2).attr("y",u.position.y).attr("width",u.selection._groups[0][0].width.baseVal.value).attr("height",
u.selection._groups[0][0].height.baseVal.value)})},_renderCdfChart:function(a,b,c){var e=this,f=b.map(function(u){u=e.dataModel.getFeatureCommonStats(e.feature,u);return null!=u?u.getNumNonMissing()*u.getAvgNumValues():0}),g=Ap(a),h={};g.forEach(function(u,w){h[u]=w});var l=(new Plottable.Scales.Linear).domain([0]);c=this._getScale(c).domain([0]);var n=new Plottable.Axes.Numeric(l,"bottom"),m=new Plottable.Axes.Numeric(c,"left"),q=new Plottable.Plots.Line;a=a.map(function(u,w){var z=[],A=[],E=[],
C=-1;u.forEach(function(D){D=new D.constructor(df(D.toArray()));E.push(D)});0<w&&E.sort(function(D,J){return h[Bp(D.getLabel())]-h[Bp(J.getLabel())]});E.forEach(function(D,J){for(var M=h[Bp(D.getLabel())],H=C+1;H<M;H++){var K=new uk;xe(K,4,g[H],"");we(K,1,H);we(K,2,H);0===z.length?K.setSampleCount(0):K.setSampleCount(z[z.length-1].getSampleCount());z.push(K);K=new uk;xe(K,4,g[H],"");we(K,1,H);we(K,2,H);K.setSampleCount(0);A.push(K)}C=M;H=D.clone();A.push(H);0===J?D.setSampleCount(Cp(D.getSampleCount())/
f[w]):(J=0<M?M-1:J-1,D.setSampleCount(Cp(D.getSampleCount())/f[w]+Cp(z[J].getSampleCount())));we(D,1,M);we(D,2,M);z.push(D)});u=new Lp;u.name=b[w];u.percBuckets=z;u.rawBuckets=A;return u});this._tableData=Np(a);for(var r=0;r<a.length;r++){var v=a[r];q.addDataset(new Plottable.Dataset(v.percBuckets,{name:v.name}))}q.x(function(u){return Cp(te(u,1,0))},l).y(function(u){return Cp(u.getSampleCount())},c);q.attr("stroke",function(u,w,z){return z.metadata().name},this.dataModel.getColorScale()).attr("opacity",
this._chartAlpha);this._renderChart(q,n,m,null,null,function(u){return q.entitiesAt(u)},function(u){return Bp(u.getLabel())+": "+xp(Cp(u.getSampleCount()),4).toLocaleString()},function(u){return new up(e.feature,u.getLabel())},function(u){return u.append("circle").attr("r",3).attr("stroke","black").attr("fill","none").attr("stroke-width","1px")},function(u,w){return u.attr("cx",w.position.x).attr("cy",w.position.y)})},_renderChart:function(a,b,c,e,f,g,h,l,n,m){var q=this;if(!this._showTable){var r=
new Plottable.Components.Table([[f,c,a],[null,null,null]]),v=new Plottable.Components.Table([[null,null],[null,b]]);Plottable.RenderController.renderPolicy();var u=d3.select(this.$.chart),w=d3.select(this.$.xaxis),z=d3.select(this.$.tooltip);this.async(function(){u.selectAll(".component").remove();w.selectAll(".component").remove();r.renderTo(q.$.chart);q._selectionElem=n(a.foreground());q._updateSelectionVisibility(q.selection);u.on("mouseenter",function(){q._onPointer=new Plottable.Interactions.Pointer;
q._onPointerEnterFunction=function(A){A=g(A);0<A.length&&(A=A.map(function(E){return null==E.dataset.metadata().name||1===q.dataModel.getDatasetNames().length?h(E.datum):E.dataset.metadata().name+": "+h(E.datum)}).join("\n"),z.text(A),z.style("opacity","1"))};q._onPointer.onPointerMove(q._onPointerEnterFunction);q._onPointerExitFunction=function(){z.style("opacity","0")};q._onPointer.onPointerExit(q._onPointerExitFunction);q._onPointer.attachTo(a);q.chartSelection!==sp&&(q._onClick=new Plottable.Interactions.Click,
q._onClickFunction=function(A){A=g(A);0<A.length&&(m(q._selectionElem,A[0]),A=l(A[0].datum),q._setSelection(A))},q._onClick.onClick(q._onClickFunction),q._onClick.attachTo(a))}).on("mouseleave",function(){q._onPointer.detachFrom();q._onClick.detachFrom()});null!=c&&v.columnPadding(r.componentAt(1).width()+(r.componentAt(0)?r.componentAt(0).width():0));v.renderTo(q.$.xaxis)})}},_setSelection:function(a){a.equals(this.selection)&&a.clear();this.selection=a;this.fire("feature-select",{selection:a})},
_getBuckets:function(a,b,c){return yp(a,b,c)},_getScale:function(a){return a?new Plottable.Scales.ModifiedLog:new Plottable.Scales.Linear},_chartAxisScaleFormatter:function(){var a=Plottable.Formatters.shortScale();return function(b){return 1E3>Math.abs(b)?String(b):a(b)}},_getCountWithFloor:function(a,b,c){a=Cp(a.getSampleCount());!c&&0<a&&a/b<this._minBarHeightRatio&&(a=b*this._minBarHeightRatio);return a},_updateSelectionVisibility:function(a){this._selectionElem&&this._selectionElem.style("display",
null==a||a.name!==this.feature?"none":"inline")},_toggleShowTable:function(){this._showTable=!this._showTable},_getChartClass:function(a){return a?"hidechart":"showchart"},_getShowTableButtonText:function(a){return a?"show chart":"show raw data"},_getChartSvgClass:function(a){return a?"chart-big":"chart-small"},_getXAxisSvgClass:function(a){return a?"xaxis-big":"xaxis-small"},_getTableDataClass:function(a){return a?"data-list-big":"data-list-small"},_rowClick:function(a){a=new up(this.feature,a.currentTarget.dataValue);
this._setSelection(a)},_getEntryRowValue:function(a){return a.value},_getEntryRowClass:function(a,b){var c="dialog-row";null!=b&&b.name===this.feature&&b.stringValue===a.value&&(c+=" selected");return c},_getCountCellClass:function(a){return"dailog-row-entry count-cell"+(a?" weighted-cell":"")}});
</script>


<dom-module id="facets-overview-table">
  <template>
    <style>
      .feature-name {
        font-weight: 500;
        max-width: 480px;
        word-wrap: break-word;
        margin: 0 0 4px 4px;
      }
      .table-name {
        font-weight: 500;
        word-wrap:break-word;
        padding: 4px 0 4px 8px;
        background: rgba(61,140,207,0.3);
        border: solid 0.5px rgba(0,0,0,0.1);
      }
      .feature-iron-list {
        overflow-x: hidden !important;
        height: 800px;
      }
      .chart-column {
        width: 280px;
        min-width: 280px;
        text-align: center;
      }
      .chart-column.header-cell {
        background: rgba(61,140,207,0.1);
        border-top: solid 0.5px rgba(0,0,0,0.1);
        border-bottom: solid 0.5px rgba(0,0,0,0.1);
        border-right: solid 0.5px rgba(0,0,0,0.1);
        padding-left: 8px;
      }
      .numeric-row {
        min-height: 80px;
        display: table-row;
      }
      .categorical-row {
        min-height: 98px;
        display: table-row;
      }
      .table-cell {
        display: table-cell;
        vertical-align: top;
        font-size: 14px;
        line-height: 1.2em;
      }
      .chart-column.table-cell {
        display: table-cell;
        vertical-align: top;
        padding: 10px 0 0 20px
        margin-right: 10px;
      }
      .header-cell {
        position: relative;
        min-height: 60px;
      }
      paper-checkbox {
        --paper-checkbox-size: 12px;
        --paper-checkbox-label-spacing: 2px;
      }
      .control-holder {
        position: absolute;
        bottom: 0;
        width: 100%;
      }
      .checkbox-holder {
        display: flex;
        padding-bottom: 2px;
      }
      .chart-checkbox {
        padding-right: 8px;
        font-size: 12px;
      }
      #weightbox {
        font-style: italic;
      }
      paper-dropdown-menu {
        display: block;
        width: 150px;
        --paper-input-container-label --paper-input-container-input: {
          font-size: 14px;
        }
      }
      .hidden {
        display: none;
      }
    </style>
    <div class$="[[_getTableWrapperClass(features)]]">
      <div class="header-row">
        <div class="header-cell table-cell">
          <div class="table-name">[[_getTitle(numeric)]] Features ([[_getFeatureCountText(dataModel, numeric, features)]])
          </div>
          <facets-overview-row-legend numeric="[[numeric]]" show-weighted="[[_showWeighted]]" has-custom="[[_hasCustomStats(dataModel)]]" data-model="[[dataModel]]">
          </facets-overview-row-legend>
        </div>
        <div class="table-cell chart-column header-cell">
          <div class="control-holder">
            <paper-dropdown-menu label="Chart to show">
              <paper-listbox class="dropdown-content" selected="{{_chartSelection}}" attr-for-selected="value">
                <template is="dom-repeat" items="[[_chartSelectionTypes]]">
                  <paper-item value="[[item]]">[[item]]</paper-item>
                </template>
              </paper-listbox>
            </paper-dropdown-menu>
            <div class="checkbox-holder">
              <paper-checkbox class="chart-checkbox" id="logbox" checked="{{_logScale}}">log</paper-checkbox>
              <paper-checkbox class="chart-checkbox" id="expandbox" checked="{{_expandCharts}}">expand</paper-checkbox>
              <template is="dom-if" if="[[_hasWeightedHistogram(features)]]">
                <paper-checkbox class="chart-checkbox" id="weightbox" checked="{{_showWeighted}}">weighted</paper-checkbox>
              </template>
              <template is="dom-if" if="[[_hasMultipleDatasets(dataModel)]]">
                <paper-checkbox class="chart-checkbox" id="percentbox" checked="{{_showPercentage}}" disabled="[[_chartSelectionHasQuantiles(_chartSelection)]]">percentages</paper-checkbox>
              </template>
            </div>
          </div>
        </div>
      </div>
      <iron-list items="[[features]]" as="feature" class="feature-iron-list">
        <template>
          <div class$="[[_getTableRowClass(numeric)]]">
            <div class="table-cell">
              <div class="feature-name">[[_getFeatureName(feature)]]</div>
              <template is="dom-repeat" items="[[_getDatasets(dataModel)]]" as="dataset" index-as="datasetIndex">
                <div>
                  <facets-overview-row-stats stats="[[_getStats(dataModel, dataset, feature)]]" custom-stats="[[_getAllCustomStats(dataModel, feature)]]" show-weighted="[[_showWeighted]]" has-custom="[[_hasCustomStats(dataModel)]]" data-model="[[dataModel]]" dataset-index="[[datasetIndex]]" compare-mode="[[compareMode]]">
                  </facets-overview-row-stats>
                </div>
              </template>
            </div>
            <div class$="[[_getChartClass(_expandCharts)]]">
              <facets-overview-chart data="[[_getChartData(dataModel, feature)]]" data-model="[[dataModel]]" feature="[[_getFeatureName(feature)]]" selection="{{featureSliceSelection}}" log-scale="[[_logScale]]" show-weighted="[[_showWeighted]]" show-percentage="[[_showPercentage]]" chart-selection="[[_chartSelection]]" expand-chart="[[_expandCharts]]">
              </facets-overview-chart>
            </div>
          </div>
        </template>
      </iron-list>
    </div>
  </template>
</dom-module>
<script>//~~WEBPATH~~/facets-overview/components/facets-overview-table/facets-overview-table.js
Polymer({is:"facets-overview-table",properties:{dataModel:{type:Object,observer:"_handleResize"},features:Array,featureSliceSelection:{type:Object,notify:!0},numeric:{type:Boolean,value:!1},compareMode:{type:Boolean,value:!1},_logScale:{type:Boolean,value:!1},_expandCharts:{type:Boolean,value:!1,observer:"_handleResize"},_showWeighted:{type:Boolean,value:!1},_showPercentage:{type:Boolean,value:!1},_chartSelection:{type:String,value:qp},_enableLogScale:{type:Boolean,value:!0},_chartSelectionTypes:{type:Array,
computed:"_computeChartSelectionTypes(numeric, dataModel, features)"},_maxHeight:{type:Number,value:800,readOnly:!0},_expandedRowHeight:{type:Number,value:330,readOnly:!0},_rowHeight:{type:Number,value:100,readOnly:!0}},_handleResize:function(){var a=this.$$("iron-list");a&&this._expandedRowHeight&&this._rowHeight&&this._maxHeight&&this.features&&(a.style.height=Math.min((this.features?this.features.length:0)*(this._expandCharts?this._expandedRowHeight:this._rowHeight),this._maxHeight)+"px",a.fire("iron-resize"))},
_computeChartSelectionTypes:function(a,b,c){var e=[qp];a&&e.push(rp);if(a=0!==c.length)a:{if(a=this._getChartData(b,c[0]))for(var f=0;f<a.length;f++)if(a[f].histMap[sp]){a=!0;break a}a=!1}a&&e.push(sp);b.doesContainFeatureListLengthData()&&e.push(tp);return e.concat(b.getExtraHistogramNames(c))},attached:function(){var a=this;setTimeout(function(){a._handleResize()},1E3)},_chartSelectionHasQuantiles:function(a){return a===rp||a===sp||a===tp},_getTitle:function(a){return a?"Numeric":"Categorical"},
_getFeatureName:function(a){return a.getName()},_hasCustomStats:function(a){return null==a?!1:a.doesContainCustomStats()},_hasMultipleDatasets:function(a){return null==a?!1:1<a.getDatasetNames().length},_getAllCustomStats:function(a,b){var c=[],e={};wh(a.getDatasetFeatureStatistics()).forEach(function(f){var g=a.getFeatureIndex(f.getName(),b.getName());null!=g&&(f=wi(f.getFeaturesList()[g]))&&f.forEach(function(h){e[h.getName()]||(e[h.getName()]=!0,c.push(h))})});return c},_getDatasets:function(a){return a?
wh(a.getDatasetFeatureStatistics()):null},_getStats:function(a,b,c){return a&&b&&c?a.getFeature(c.getName(),b.getName()):null},_getChartData:function(a,b){return a&&b?a.getDatasetHistogramsForFeature(b.getName()):[]},_getFeatureCountText:function(a,b,c){a=a?a.getNumUniqueFeaturesByType(b):0;c=c.length;return a===c?a.toLocaleString():c.toLocaleString()+"/"+a.toLocaleString()},_hasWeightedHistogram:function(a){return 0===a.length?!1:Hp(this._getChartData(this.dataModel,a[0]))},_getChartClass:function(a){var b=
"chart-column ";a||(b+="table-cell ");return b},_getTableWrapperClass:function(a){return a&&0!==a.length?"":"hidden"},_getTableRowClass:function(a){return a?"numeric-row":"categorical-row"}});
</script>





<script>//~~WEBPATH~~/iron-validator-behavior/iron-validator-behavior.html.js
Polymer.IronValidatorBehavior={properties:{validatorType:{type:String,value:"validator"},validatorName:{type:String,value:function(){return this.is}}},ready:function(){new Polymer.IronMeta({type:this.validatorType,key:this.validatorName,value:this})},validate:function(){}};
</script>


<script>//~~WEBPATH~~/facets-overview/components/facets-overview/facets-overview-filter-validator.html.js
Polymer({is:"facets-overview-filter-validator",behaviors:[Polymer.IronValidatorBehavior],validate:function(a){try{return new RegExp(a),!0}catch(b){return!1}}});
</script>


<dom-module id="facets-overview">
  <template>
    <style>
      :host {
        @apply(--paper-font-common-base)
        font-size: 10pt;
      }
      .controls {
        background: rgba(234,234,234,0.2);
        border-bottom: solid 0.5px rgba(0,0,0,0.2);
        display: flex;
        height: 60px;
        padding-left: 20px;

      }
      .feature-checkboxes {
        background: rgba(234,234,234,0.2);
        border-bottom: solid 0.5px rgba(0,0,0,0.2);
        display: flex;
        flex-wrap: wrap;
        padding:  8px 0 8px 20px;
      }
      .feature-checkbox {
        display: flex;
        padding: 0 0 0 16px;
      }
      paper-checkbox {
        font-size: 14px;
      }
      .input-control {
        --paper-input-container-label --paper-input-container-input: {
          font-size: 14px;
        };
      }
      .features-text {
        line-height: 1;
        padding: 1px 0 0 0;
        font-size: 14px;
      }
      .left-dropdown {
        padding: 0 10px 0 0;
      }
      .middle-checkbox {
        margin-top: 30px;
        padding: 0 10px;
      }
      .right-input {
        width: 300px;
        padding: 0 10px;
      }
      .feature-iron-list {
        max-height: 800px;
        overflow: auto;
      }
      .feature-column {
        width: 200px;
        max-width: 200px;
        overflow-wrap: break-word;
        text-align: left;
      }
      .legend-column {
        width: 120px;
      }
      .stats-column {
        width: 150px;
        max-width: 150px;
        overflow-wrap: break-word;
        text-align: right;
      }
      .chart-column {
        width: 580px;
        text-align: center;
      }
      .table-row {
        display: table-row;
      }
      .table-cell {
        display: table-cell;
        vertical-align: top;
        padding: 10px 5px 0
      }
      .chart-column.table-cell {
        display: table-cell;
        vertical-align: top;
        padding: 10px 0 0 20px
      }
      .header-row {
        clear: both;
      }
      .header-row > .table-cell {
        font-size: 14pt;
        padding: 0 5px 0;
        border-bottom: 1px solid black;
      }
      .stats-header-text {
        text-align: right;
      }
      .chart-header-text {
        text-align: center;
      }
      .table-holder {
        display: flex;
        flex-wrap: wrap;
        overflow-x: auto;
        margin-left: 30px;
      }
      .table-left {
        margin: 20px 20px 0 0;
      }
      .table-right {
        margin: 20px 0 0 0;
      }
      .hidden {
        display: none;
      }
      .legend-holder {
        display: flex;
        margin: 8px 0 0 38px;
      }
      .legend-box {
        width: 8px;
        height: 8px;
        margin-top: 6px;
      }
      .legend-row {
        display: flex;
      }
      .legend-name {
        margin: 3px 10px 0 5px;
        font-size: 12px;
      }
      /* Give min height to placeholder in paper-input to get around colab embedding
       * alignment issue.
       */
      ::content paper-input-container > .floated-label-placeholder {
        min-height: 20px;
      }
    </style>
    <template is="dom-if" if="[[_dataModel]]">
      <div class$="[[_getControlsWrapperClass(_dataModel)]]">
        <div class="controls">
          <paper-dropdown-menu class="left-dropdown input-control" label="Sort by">
            <paper-listbox class="dropdown-content" selected="{{_sortOrder}}">
              <template is="dom-repeat" items="[[_sortOptions]]" as="option">
                <paper-item>[[option.name]]</paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
          <paper-checkbox noink class="middle-checkbox" checked="{{_reverseOrder}}">
            Reverse order
          </paper-checkbox>
          <paper-input class="right-input input-control" label="Feature search" value="{{searchString}}" auto-validate="true" validator="filter-validator">
            <facets-overview-filter-validator validator-name="filter-validator">
            </facets-overview-filter-validator>
          </paper-input>
        </div>
        <div class="feature-checkboxes">
          <div class="features-text">Features: </div>
          <template is="dom-repeat" items="[[_featureSpecArray]]" as="specAndList">
          <div>
            <paper-checkbox noink checked="true" class="feature-checkbox" id="[[_getSpecCheckboxId(specAndList)]]" on-change="_featureSpecCheck">
              [[_getSpecCheckboxText(specAndList)]]
            </paper-checkbox>
          </div>
        </template>
        </div>
      </div>
      <template is="dom-if" if="[[_hasMultipleDatasets(_dataModel)]]">
        <div class="legend-holder">
          <template is="dom-repeat" items="[[_getDatasets(_dataModel)]]" as="dataset" index-as="datasetIndex">
            <div class="legend-row">
              <div class="legend-box" style="[[_getLegendBoxStyle(_dataModel, datasetIndex)]]"></div>
              <div class="legend-name">[[_getDatasetName(_dataModel, datasetIndex)]]</div>
            </div>
          </template>
        </div>
      </template>
      <div class="table-holder">
        <facets-overview-table features="[[_getNumericFeatureListItems(_dataModel, searchString, _sortOrder, _reverseOrder, _featureSpecCheckboxes)]]" data-model="[[_dataModel]]" feature-slice-selection="{{featureSliceSelection}}" numeric="true" class="table-left" compare-mode="[[compareMode]]">
        </facets-overview-table>
        <facets-overview-table features="[[_getNonNumericFeatureListItems(_dataModel, searchString, _sortOrder, _reverseOrder, _featureSpecCheckboxes)]]" data-model="[[_dataModel]]" feature-slice-selection="{{featureSliceSelection}}" class="table-right" compare-mode="[[compareMode]]">
        </facets-overview-table>
      </div>
    </template>
  </template>
</dom-module>
<script>//~~WEBPATH~~/facets-overview/components/facets-overview/facets-overview.js
Polymer({is:"facets-overview",properties:{searchString:{type:String,notify:!0},_sortOptions:Array,_reverseOrder:Boolean,_sortOrder:{type:Number,value:0},protoInput:{type:Object,observer:"_update"},featureSliceSelection:{type:Object,notify:!0},compareMode:{type:Boolean,value:!1},_dataModel:{type:Object,value:null},_featureSpecArray:{type:Array,computed:"_getFeatureSpecArray(_dataModel)"},_featureSpecCheckboxes:Array},_getFeatureSpecArray:function(a){if(!a)return[];for(var b=[],c=0;16>c;c++)b.push(!0);
this._featureSpecCheckboxes=b;return a.getNonEmptyFeatureSpecLists()},_getSpecCheckboxText:function(a){return Jp(a.spec)+"("+a.features.length+")"},_getSpecCheckboxId:function(a){return String(a.spec)},_featureSpecCheck:function(a){if(a){for(var b=[],c=+a.target.id,e=0;16>e;e++)c===e?b.push(a.target.checked):b.push(this._featureSpecCheckboxes[e]);this._featureSpecCheckboxes=b}},_convertInputToProto:function(a){if(!a||a.constructor===Object&&0===Object.keys(a).length)return null;if(a instanceof Uint8Array)return yh(a);
if("string"===typeof a||a instanceof String){a=atob(a);for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return yh(b)}return a.constructor===Object&&"function"===typeof uh.fromObject?uh.fromObject(a):a},_update:function(){var a=this;this.featureSliceSelection=null;var b=this._convertInputToProto(this.protoInput);if(b){var c=new gq(Fp(b));this.set("_sortOptions",[{name:"Feature order",map:{}},{name:"Non-uniformity",map:{}},{name:"Alphabetical",map:{}},{name:"Amount missing/zero",
map:{}}]);var e=wh(c.getDatasetFeatureStatistics()),f=1<e.length;f&&this.push("_sortOptions",{name:"Distribution distance",map:{}});c.getUniqueFeatures().forEach(function(g,h){a._sortOptions[0].map[g.getName()]=h;h=c.getDatasetHistogramsForFeature(g.getName());a._sortOptions[1].map[g.getName()]=h.reduce(function(l,n){n=n.histMap[qp]?vp(n.histMap[qp].getBucketsList()):1;return Math.min(l,n)},1);a._sortOptions[2].map[g.getName()]=g.getName();a._sortOptions[3].map[g.getName()]=e.reduce(function(l,n){var m=
a._getStats(c,n,g),q=n=0,r=Zp(m);m&&oi(m)&&(m=oi(m),n+=Cp(te(m,4,0)));r&&(q=Cp(r.getNumMissing()),n+=q,q=Cp(r.getNumNonMissing())+q);return Math.min(l,-1*(0===q?1:n/q))},0);f&&(a._sortOptions[4].map[g.getName()]=-1*Dp(h))},this);this._dataModel=c}else this._dataModel=null},_getStats:function(a,b,c){return a&&b&&c?a.getFeature(c.getName(),b.getName()):null},_getSortFunction:function(a,b){var c=this._sortOptions[a].map,e=b?-1:1;return function(f,g){f=c[f.getName()];g=c[g.getName()];return"undefined"==
typeof f||"undefined"==typeof g?0:e*(f<g?-1:1)}},_getFilter:function(a){if(a)try{var b=new RegExp(a,"i");return function(c){return b.test(c.getName())}}catch(c){return null}else return null},_getNumericFeatureListItems:function(a,b,c,e,f){return this._getFeatureListItems(a,b,c,e,f,!0)},_getNonNumericFeatureListItems:function(a,b,c,e,f){return this._getFeatureListItems(a,b,c,e,f,!1)},_getFeatureListItems:function(a,b,c,e,f,g){if(!a)return[];var h=this._getFilter(b);b=a.getUniqueFeatures();b=h?b.filter(function(l){return h(l)&&
f[a.getFeatureSpecForFeature(l.getName())]}):b.filter(function(l){return f[a.getFeatureSpecForFeature(l.getName())]});b=b.filter(function(l){return g?null!=oi(l):null==oi(l)});return b.slice().sort(this._getSortFunction(c,e))},_getControlsWrapperClass:function(a){return!a||1>=a.getUniqueFeatures().length?"hidden":""},_getDatasetName:function(a,b){return a.getDatasetNames()[b]},_getLegendBoxStyle:function(a,b){return"background-color:"+a.getChartColorString(b)},_getDatasets:function(a){return a?wh(a.getDatasetFeatureStatistics()):
null},_hasMultipleDatasets:function(a){return null==a?!1:1<a.getDatasetNames().length},getStatsProto:function(a){return Rn(a)}});
</script>















<dom-module id="vz-example-viewer">
  <template>
    <style id="linter-paper-button-style">
      /**
       * This style preserves the styling previous to
       * https://github.com/PolymerElements/paper-button/pull/115
       * This change can break the layout of paper-button content.
       * Remove this style to apply the change, more details at b/70528356.
       */
      paper-button {
        display: inline-block;
        text-align: center;
        font-family: inherit;
      }
    </style>
    <style>
      :host {
        display: flex;
        position: relative;
      }

      .seq-feat {
        margin-left: 16px;
      }

      .value-list {
        width:100%;
      }

      .slider-holder {
        display: flex;
      }

      .slider-label {
        margin-right: 10px;
        margin-top: 16px;
      }

      #saliencyLegend {
        width: 300px;
        height: 50px;
        margin-left: 8px;
        margin-right: 8px;
      }

      .saliency-controls-holder {
        display: block;
        padding: 8px;
        width: fit-content;
      }

      .hide-saliency-controls {
        display: none;
      }

      .saliency-legend-label {
        font-size: 12px;
        color: #3C4043;
      }

      .outer {
        width: 100%;
        overflow: auto;
      }

      .image {
        /* <img> elements are used to load to a canvas so they aren't displayed. */
        display: none;
      }

      .flex-controls {
        display: flex;
        flex-wrap: wrap;
        overflow: auto;
      }

      .value-pills-holder {
        flex-grow: 1;
        flex-basis: 100%;
      }

      iron-autogrow-textarea {
        border: 1px solid #FFFFFF;
        border-radius: 4px;
        font-size: 14px;
        -moz-appearance: none;
        -webkit-appearance: none;
        --iron-autogrow-textarea: {
          color: #3C4043;
        }
      }

      iron-autogrow-textarea.value-same {
        --iron-autogrow-textarea: {
          color: #5F6368;
        }
      }

      iron-autogrow-textarea.value-different {
        --iron-autogrow-textarea: {
          color: #34A853;
          font-weight: 500;
        }
      }

      .value-pill {
        text-align: left;
        margin: 4px;
        padding: 4px 8px;
        color: #3C4043;
      }

      .value-pill:hover {
        background: #f8f9fa;
      }

      .value-pill[focused] {
        border: 1px solid #ffeb3b;
        background: #f8f9fa;
      }

      .value-compare {
        text-align: left;
        padding: 4px 8px;
      }

      .value-pill-stacked {
        width: 100%;
        margin: 4px 4px 4px 0;
        padding: 2px;
      }

      .value-pill-grid {
        width: 120px;
        margin: 4px 8px 4px 0;
      }

      .feature-name {
        display: flex;
        padding-left: 4px;
        margin: 4px 20px 4px 8px;
        justify-content: space-between;
        color:#80868b;
      }

      .feature-name-text {
        width: 300px;
        max-width: 300px;
        min-width: 150px;
        font-size: 14px;
        margin-top: 4px;
        color: #3C4043;
        line-height: 1.6em;
        text-overflow: ellipsis;
        white-space: pre-wrap;
        word-wrap: break-word;
        padding-right: 8px;
      }

      .feature-name-header-text {
        width: 300px;
        max-width: 300px;
        min-width: 150px;
        color: #202124;
        font-size: 12px;
        line-height: 1.8em;
        text-overflow: ellipsis;
        white-space: pre-wrap;
        word-wrap: break-word;
      }

      .feature-name.feature-name-header {
        padding: 4px 4px 0px 4px;
        background: #f8f9fa;
        margin: 0px;
        border-bottom: 1px solid #e8eaed;
      }

      .slider {
        --paper-slider-input: {
          width: 100px
        }
      }

      .hide-controls {
        display: none;
      }

      .indent {
        margin-left: 16px;
      }

      .scale-label {
        margin-top: 10px;
        margin-right: 10px;
      }

      .windowing-label {
        width: 110px;
      }

      .control-toggle-button {
        float: left;
        max-height: 20px;
        max-width: 20px;
        padding: 0;
      }

      .expand-button-holder {
        margin-bottom: 10px;
      }

      .delete-value-button {
        position: absolute;
        background: #ffe603;
        color: #5F6368;
        border-radius: 12px;
        max-width: 24px;
        max-height: 24px;
        padding: 0;
        margin-top: 2px;
        opacity: 1;
        visibility: visible;
        transition: opacity 200ms;
      }

      .delete-value-button.delete-value-button-hidden {
        opacity: 0;
        visibility: hidden;
        transition: opacity 200ms, visibility 200ms;
      }

      .delete-feature-button {
        max-height: 20px;
        max-width: 20px;
        padding: 0;
        margin-left: 4px;
        margin-top: 0px;
      }

      .add-value-button {
        margin-top: 2px;
        max-height: 20px;
        max-width: 20px;
        min-height: 20px;
        min-width: 20px;
        padding: 0;
        color: #80868b;
      }

      .add-feature-button {
        margin-left: 0;
        margin-bottom: 10px;
      }

      .upload-image-button {
        margin: 0 0 0 5px;
        padding: 0;
        width: 16px;
        height: 16px;
        color: white;
      }

      .imagecard {
        margin: 4px;
      }

      .image-scale-button {
        margin-bottom: 5px;
      }

      .saliency-legend-label {
        margin-bottom: 5px;
      }

      .feature-dialog {
        display: flex;
        flex-direction: column;
      }

      .feature-dialog-button {
        text-transform: none;
        text-align: left;
      }

      .image-bottom-bar {
        width: 100%;
        background: #3C4043;
      }

      .image-upload-input {
        display: none;
      }

      .space-for-more-button {
        width: 20px;
      }

      .value-header-text {
        min-width: 130px;
        width: 130px;
        color: #202124;
        font-size: 12px;
        line-height: 1.8em;
      }

      paper-dialog {
        border-radius: 10px;
      }

      .control-button {
        background-color: white;
        border: 1px solid #DADCE0;
        color: var(--tb-orange-dark);
        font-size: 14px;
        font-weight: 500;
        padding: 8px 12px;
        text-transform: none;
        margin: 5px;
      }

      .control-button[disabled] {
        color: #DADCE0;
      }

      .value-text {
        border-bottom: 2px solid #ffeb3b;
      }

      .compare-value-text {
        border-bottom: 2px solid #34A853;
      }
    </style>
    <div class="outer">
      <template is="dom-if" if="[[showSearchBox]]">
        <paper-input value="{{featureSearchValue}}" label="Search" class="filter-input" no-label-float>
          <iron-icon icon="icons:search" prefix></iron-icon>
        </paper-input>
      </template>
      <div class="feature-name feature-name-header">
        <div class="feature-name-header-text">Feature</div>
        <div class="value-pills-holder flex-controls value-header-text">
          <div class="value-text">Value(s)</div>
        </div>
        <template is="dom-if" if="[[compareMode]]">
          <div class="value-pills-holder flex-controls value-header-text">
            <div class="compare-value-text">[[compareTitle]]</div>
          </div>
        </template>
        <div class="space-for-more-button"></div>
      </div>
      <template is="dom-repeat" items="[[filteredFeaturesList]]" as="feat">
        <template is="dom-if" if="[[isImage(feat.name)]]">
          <div class="feature-name">
            <div class="feature-name-text">[[feat.name]]</div>
            <div class="value-pills-holder">
              <paper-card id="[[getImageCardId(feat.name)]]" class="imagecard">
                <img class="image" src$="[[getImageSrc(feat.name)]]" id="[[getImageId(feat.name)]]">
                <canvas id="[[getCanvasId(feat.name)]]" data-feature="[[feat.name]]"></canvas>
                <template is="dom-if" if="[[shouldShowImageControls(hasImage, allowImageControls)]]">
                  <div>Image windowing (contrast)</div>
                  <div class="slider-holder indent">
                    <div class="slider-label windowing-label">Window center:</div>
                    <paper-slider class="slider" editable="true" max="255" immediate-value="{{windowCenter}}" value="[[windowCenter]]">
                    </paper-slider>
                  </div>
                  <div class="slider-holder indent">
                    <div class="slider-label windowing-label">Window width:</div>
                    <paper-slider class="slider" editable="true" max="512" min="1" immediate-value="{{windowWidth}}" value="[[windowWidth]]">
                    </paper-slider>
                  </div>
                  <div class="flex-controls">
                    <div class="scale-label">Image scale percentage:</div>
                    <paper-input no-label-float type="number" min="10" max="500" value="{{imageScalePercentage}}">
                    </paper-input>
                    <paper-button class="image-scale-button" on-click="updateImages">
                      set
                    </paper-button>
                  </div>
                </template>
                <div class="image-bottom-bar">
                  <paper-icon-button class$="[[getUploadImageClass(readonly)]]" icon="file-upload" on-click="uploadImageClicked" data-feature="[[feat.name]]" title="Upload image">
                  </paper-icon-button>
                  <paper-input class="image-upload-input" type="file" on-change="handleImageUpload" data-feature="[[feat.name]]" data-index="[[index]]">
                  </paper-input>
                </div>
              </paper-card>
            </div>
            <template is="dom-if" if="[[compareMode]]">
              <div class="value-pills-holder">
                <paper-card id="[[getCompareImageCardId(feat.name)]]" class="imagecard">
                  <img class="image" src$="[[getCompareImageSrc(feat.name)]]" id="[[getCompareImageId(feat.name)]]">
                  <canvas id="[[getCompareCanvasId(feat.name)]]" data-feature="[[feat.name]]"></canvas>
                  <div class="image-bottom-bar">
                  </div>
                </paper-card>
              </div>
            </template>
            <paper-icon-button icon="more-horiz" class$="[[getAddValueButtonClass(readonly)]]" on-click="featureMoreClicked" data-feature="[[feat.name]]"></paper-icon-button>
            <paper-dialog id="[[getFeatureDialogId(feat.name)]]" horizontal-align="right" vertical-align="bottom">
              <div class="feature-dialog">
                <paper-button data-feature="[[feat.name]]" on-click="deleteFeature" class="feature-dialog-button">
                  Delete feature
                </paper-button>
              </div>
            </paper-dialog>
          </div>
        </template>
        <template is="dom-if" if="[[!isImage(feat.name)]]">
          <div class="feature-name">
            <div class="feature-name-text">[[feat.name]]</div>
            <div class="flex-controls value-pills-holder">
              <template is="dom-if" if="[[isExpanded(feat.name, expandAllFeatures)]]">
                <template is="dom-repeat" items="[[getFeatureValues(feat.name)]]" as="value">
                  <iron-autogrow-textarea class$="[[getInputPillClass(feat.name, displayMode)]]" readonly$="[[readonly]]" on-input="onValueChanged" on-focus="onInputFocus" on-blur="onInputBlur" data-feature="[[feat.name]]" data-index="[[index]]" value="[[value]]">
                  </iron-autogrow-textarea>
                </template>
              </template>
              <template is="dom-if" if="[[!isExpanded(feat.name, expandAllFeatures)]]">
                <iron-autogrow-textarea class$="[[getInputPillClass(feat.name, displayMode)]]" readonly$="[[readonly]]" on-input="onValueChanged" on-focus="onInputFocus" on-blur="onInputBlur" data-feature="[[feat.name]]" data-index="[[zeroIndex]]" value="[[getFirstFeatureValue(feat.name)]]">
                </iron-autogrow-textarea>
                <template is="dom-if" if="[[featureHasMultipleValues(feat.name)]]">
                  <paper-button data-feature="[[feat.name]]" on-click="expandFeature" class$="[[getInputPillClass(feat.name, displayMode)]]">
                    ...
                  </paper-button>
                </template>
              </template>
            </div>
            <template is="dom-if" if="[[compareMode]]">
              <div class="flex-controls value-pills-holder">
                <template is="dom-if" if="[[isExpanded(feat.name, expandAllFeatures)]]">
                  <template is="dom-repeat" items="[[getCompareFeatureValues(feat.name)]]" as="value">
                    <iron-autogrow-textarea class$="[[getCompareInputClass(feat.name, displayMode, index)]]" readonly value="[[value]]">
                    </iron-autogrow-textarea>
                  </template>
                </template>
                <template is="dom-if" if="[[!isExpanded(feat.name, expandAllFeatures)]]">
                  <iron-autogrow-textarea class$="[[getCompareInputClass(feat.name, displayMode, zeroIndex)]]" readonly value="[[getFirstCompareFeatureValue(feat.name)]]">
                  </iron-autogrow-textarea>
                  <template is="dom-if" if="[[compareFeatureHasMultipleValues(feat.name)]]">
                    <paper-button data-feature="[[feat.name]]" on-click="expandFeature" class$="[[getCompareInputClass(feat.name, displayMode)]]">
                      ...
                    </paper-button>
                  </template>
                </template>
              </div>
            </template>

            <paper-icon-button icon="more-horiz" class$="[[getAddValueButtonClass(readonly)]]" on-click="featureMoreClicked" data-feature="[[feat.name]]"></paper-icon-button>
            <paper-dialog id="[[getFeatureDialogId(feat.name)]]" horizontal-align="right" vertical-align="bottom">
              <div class="feature-dialog">
                <paper-button data-feature="[[feat.name]]" on-click="deleteFeature" class="feature-dialog-button">
                  Delete feature
                </paper-button>
                <paper-button data-feature="[[feat.name]]" on-click="addValue" class="feature-dialog-button">
                  Add feature value
                </paper-button>
              </div>
            </paper-dialog>
          </div>
        </template>
      </template>
      <template is="dom-if" if="[[isSeqExample(maxSeqNumber)]]">
        <div class="slider-holder">
          <div class="slider-label">Sequence Number:</div>
          <paper-slider class="slider" editable="true" max="[[maxSeqNumber]]" value="{{seqNumber}}">
          </paper-slider>
        </div>
        <template is="dom-repeat" items="[[filteredSeqFeaturesList]]" as="seqfeat">
          <div class="seqfeat">
            <template is="dom-if" if="[[isImage(seqfeat.name)]]">
              <div class="feature-name">
                <div class="feature-name-text">[[seqfeat.name]]</div>
                <div class="value-pills-holder">
                  <paper-card id="[[getImageCardId(seqfeat.name)]]" class="imagecard">
                    <img class="image" src$="[[getSeqImageSrc(seqfeat.name, seqNumber)]]" id="[[getImageId(seqfeat.name)]]">
                    <canvas id="[[getCanvasId(seqfeat.name)]]" data-feature="[[seqfeat.name]]" data-seq-num="[[seqNumber]]"></canvas>
                    <template is="dom-if" if="[[shouldShowImageControls(hasImage, allowImageControls)]]">
                      <div class="image-controls">
                        <div>Image windowing (contrast)</div>
                        <div class="slider-holder indent">
                          <div class="slider-label windowing-label">Window center:</div>
                          <paper-slider class="slider" editable="true" max="255" immediate-value="{{windowCenter}}" value="[[windowCenter]]">
                          </paper-slider>
                        </div>
                        <div class="slider-holder indent">
                          <div class="slider-label windowing-label">Window width:</div>
                          <paper-slider class="slider" editable="true" max="512" min="1" immediate-value="{{windowWidth}}" value="[[windowWidth]]">
                          </paper-slider>
                        </div>
                        <div class="flex-controls">
                          <div class="scale-label">Image scale percentage:</div>
                          <paper-input no-label-float type="number" min="10" max="500" value="{{imageScalePercentage}}">
                          </paper-input>
                          <paper-button class="image-scale-button" on-click="updateImages">
                            set
                          </paper-button>
                        </div>
                      </div>
                    </template>
                    <div class="image-bottom-bar">
                      <paper-icon-button class$="[[getUploadImageClass(readonly)]]" icon="file-upload" on-click="uploadImageClicked" data-feature="[[seqfeat.name]]" title="Upload image">
                      </paper-icon-button>
                      <paper-input class="image-upload-input" type="file" on-change="handleImageUpload" data-feature="[[seqfeat.name]]" data-index="[[index]]" data-seq-num="[[seqNumber]]">
                      </paper-input>
                    </div>
                  </paper-card>
                </div>
                <template is="dom-if" if="[[compareMode]]">
                  <div class="value-pills-holder">
                    <paper-card id="[[getCompareImageCardId(seqfeat.name)]]" class="imagecard">
                      <img class="image" src$="[[getCompareSeqImageSrc(seqfeat.name, seqNumber)]]" id="[[getCompareImageId(seqfeat.name)]]">
                      <canvas id="[[getCompareCanvasId(seqfeat.name)]]" data-feature="[[seqfeat.name]]" data-seq-num="[[seqNumber]]"></canvas>
                      <div class="image-bottom-bar">
                      </div>
                    </paper-card>
                  </div>
                </template>
                <paper-icon-button icon="more-horiz" class$="[[getAddValueButtonClass(readonly)]]"></paper-icon-button>
                <paper-dialog>
                  <paper-button data-feature="[[seqfeat.name]]" on-click="deleteFeature">
                    Delete feature
                  </paper-button>
                </paper-dialog>
              </div>
            </template>
            <template is="dom-if" if="[[!isImage(seqfeat.name)]]">
              <div class="feature-name">
                <div class="feature-name-text">[[seqfeat.name]]</div>
                <div class="flex-controls value-pills-holder">
                  <template is="dom-if" if="[[isExpanded(seqfeat.name, expandAllFeatures)]]">
                    <template is="dom-repeat" items="[[getSeqFeatureValues(seqfeat.name, seqNumber)]]" as="seqvalue">
                      <iron-autogrow-textarea class$="[[getInputPillClass(seqfeat.name, displayMode)]]" readonly$="[[readonly]]" on-input="onValueChanged" on-focus="onInputFocus" on-blur="onInputBlur" data-feature="[[seqfeat.name]]" data-index="[[index]]" data-seq-num="[[seqNumber]]" value="[[seqvalue]]">
                      </iron-autogrow-textarea>
                    </template>
                  </template>
                  <template is="dom-if" if="[[!isExpanded(seqfeat.name, expandAllFeatures)]]">
                    <iron-autogrow-textarea class$="[[getInputPillClass(seqfeat.name, displayMode)]]" readonly$="[[readonly]]" on-input="onValueChanged" on-focus="onInputFocus" on-blur="onInputBlur" data-feature="[[seqfeat.name]]" data-index="[[zeroIndex]]" data-seq-num="[[seqNumber]]" value="[[getFirstSeqFeatureValue(seqfeat.name, seqNumber)]]">
                    </iron-autogrow-textarea>
                    <template is="dom-if" if="[[seqFeatureHasMultipleValues(seqfeat.name, seqNumber)]]">
                      <paper-button data-feature="[[seqfeat.name]]" on-click="expandFeature" class$="[[getInputPillClass(seqfeat.name, displayMode)]]">
                        ...
                      </paper-button>
                    </template>
                  </template>
                </div>
                <template is="dom-if" if="[[compareMode]]">
                  <div class="flex-controls value-pills-holder">
                    <template is="dom-if" if="[[isExpanded(seqfeat.name, expandAllFeatures)]]">
                      <template is="dom-repeat" items="[[getCompareSeqFeatureValues(seqfeat.name, seqNumber)]]" as="seqvalue">
                        <iron-autogrow-textarea class$="[[getSeqCompareInputClass(seqfeat.name, displayMode, seqNumber, index)]]" readonly value="[[seqvalue]]">
                        </iron-autogrow-textarea>
                      </template>
                    </template>
                    <template is="dom-if" if="[[!isExpanded(seqfeat.name, expandAllFeatures)]]">
                      <iron-autogrow-textarea class$="[[getSeqCompareInputClass(seqfeat.name, displayMode, seqNumber, zeroIndex)]]" readonly value="[[getFirstCompareSeqFeatureValue(seqfeat.name, seqNumber)]]">
                      </iron-autogrow-textarea>
                      <template is="dom-if" if="[[compareSeqFeatureHasMultipleValues(seqfeat.name, seqNumber)]]">
                        <paper-button data-feature="[[seqfeat.name]]" on-click="expandFeature" class$="[[getSeqCompareInputClass(seqfeat.name, displayMode, seqNumber)]]">
                          ...
                        </paper-button>
                      </template>
                    </template>
                  </div>
                </template>
                <paper-icon-button icon="more-horiz" class$="[[getAddValueButtonClass(readonly)]]"></paper-icon-button>
                <paper-dialog>
                  <paper-button data-feature="[[seqfeat.name]]" on-click="deleteFeature">
                    Delete feature
                  </paper-button>
                  <paper-button data-feature="[[seqfeat.name]]" data-seq-num="[[seqNumber]]" on-click="addValue" class="feature-dialog-button">
                    Add feature value
                  </paper-button>
                </paper-dialog>
              </div>
            </template>
          </div>
        </template>
      </template>
      <paper-icon-button on-click="openAddFeatureDialog" icon="add" title="Add feature" class$="[[getAddValueButtonClass(readonly)]]">
      </paper-icon-button>
      <div class$="[[getSaliencyControlsHolderClass(saliency)]]">
        <div class="saliency-legend-label">Attribution legend</div>
        <div class="flex-controls">
          <svg id="saliencyLegend"></svg>
        </div>
      </div>
    </div>
    <paper-icon-button id="deletevalue" icon="delete" class$="[[getDeleteValueButtonClass(readonly, showDeleteValueButton)]]" data-feature="[[focusedFeatureName]]" data-index="[[focusedFeatureValueIndex]]" data-seq-num="[[focusedSeqNumber]]" on-click="deleteValue" title="Delete value">
    </paper-icon-button>
    <paper-dialog id="addFeatureDialog">
      <h2>Add Feature</h2>
      <paper-input label="Feature name" value="{{newFeatureName}}"></paper-input>
      <paper-radio-group selected="{{newFeatureType}}">
        <paper-radio-button name="int">Int</paper-radio-button>
        <paper-radio-button name="float">Float</paper-radio-button>
        <paper-radio-button name="bytes">Bytes</paper-radio-button>
      </paper-radio-group>
      <paper-button dialog-dismiss class="control-button" on-click="addFeature" disabled="[[!shouldEnableAddFeature(newFeatureName)]]">
        Create
      </paper-button>
    </paper-dialog>
  </template>
  <script>//~~WEBPATH~~/vz-example-viewer/vz-example-viewer.js
var hq;
(function(){var a=d3.interpolateRgb,b=/^image\/([^\/]+\/)*encoded$/,c=[1,20];Polymer({is:"vz-example-viewer",properties:{example:{type:Object},serializedExample:{type:String,observer:"updateExample"},serializedSeqExample:{type:String,observer:"updateSeqExample"},json:{type:Object,observer:"createExamplesFromJson"},saliency:{type:Object,value:{}},saliencyJsonString:{type:String,observer:"haveSaliencyJson"},readonly:{type:Boolean,value:!1},seqNumber:{type:Number,value:0,observer:"newSeqNum"},isSequence:Boolean,
changeCallbackTimer:Number,ignoreChange:Boolean,minSal:{type:Number,value:0},maxSal:{type:Number,value:0},showSaliency:{type:Boolean,value:!0},imageInfo:{type:Object,value:{}},windowWidth:{type:Number,value:256},windowCenter:{type:Number,value:128},saliencyCutoff:{type:Number,value:0},hasImage:{type:Boolean,value:!0},allowImageControls:{type:Boolean,value:!1},imageScalePercentage:{type:Number,value:100},features:{type:Object,computed:"getFeatures(example)"},featuresList:{type:Object,computed:"getFeaturesList(features, compareFeatures)"},
seqFeatures:{type:Object,computed:"getSeqFeatures(example)"},seqFeaturesList:{type:Object,computed:"getFeaturesList(seqFeatures, compareSeqFeatures)"},maxSeqNumber:{type:Number,computed:"getMaxSeqNumber(seqFeaturesList)"},colors:{type:Object,computed:"getColors(saliency)",observer:"createLegend"},displayMode:{type:String,value:"grid"},featureSearchValue:{type:String,value:"",notify:!0},filteredFeaturesList:{type:Object},filteredSeqFeaturesList:{type:Object},focusedFeatureName:String,focusedFeatureValueIndex:Number,
focusedSeqNumber:Number,showDeleteValueButton:{type:Boolean,value:!1},expandedFeatures:{type:Object,value:{}},expandAllFeatures:{type:Boolean,value:!1},zeroIndex:{type:Number,value:0},compareJson:{type:Object,observer:"createCompareExamplesFromJson"},compareExample:{type:Object},compareFeatures:{type:Object,computed:"getFeatures(compareExample)",observer:"updateCompareMode"},compareSeqFeatures:{type:Object,computed:"getSeqFeatures(compareExample)",observer:"updateCompareMode"},compareMode:Boolean,
compareImageInfo:{type:Object,value:{}},compareTitle:String},observers:["haveSaliency(filteredFeaturesList, saliency, colors, showSaliency, saliencyCutoff)","seqSaliency(seqNumber, seqFeaturesList, saliency, colors, showSaliency, saliencyCutoff)","setFilteredFeaturesList(featuresList, featureSearchValue, saliency)","setFilteredSeqFeaturesList(seqFeaturesList, featureSearchValue, saliency)"],isExpanded:function(e){return this.expandAllFeatures||this.sanitizeFeature(e)in this.expandedFeatures},updateExample:function(){this.deserializeExample(this.serializedExample,
rh)},updateSeqExample:function(){this.deserializeExample(this.serializedSeqExample,th)},stringToUint8Array:function(e){return(new window.TextEncoder).encode(e)},deserializeExample:function(e,f){this.ignoreChange||(e=this.decodedStringToCharCodes(atob(e)),this.example=f(e))},getFeatures:function(e){this.imageInfo={};this.hasImage=!1;if(null==e)return new Map([]);if(e instanceof qh){this.isSequence=!1;if(null==ee(e,1)){var f=new mg;Ze(e,1,f)}return og(e.getFeatures())}this.isSequence=!0;null!=ee(e,
1)||e.setContext(new mg);return og(e.getContext())},getFeaturesList:function(e,f){var g=[],h={},l=e.keys();if(l)for(var n=l.next();!n.done;)g.push({name:n.value,feature:e.get(n.value)}),h[n.value]=!0,n=l.next();if(l=f.keys())for(n=l.next();!n.done;)n.value in h||(g.push({name:n.value,feature:f.get(n.value)}),h[n.value]=!0),n=l.next();return g},getSeqFeatures:function(e){null==e||e instanceof qh?e=new Map([]):(e=Be(this.example,wg,2),e=ue(e,void 0,rg));return e},setFilteredFeaturesList:function(e,
f,g){this.filteredFeaturesList=[];this.filteredFeaturesList=this.getFilteredFeaturesList(e,f,g)},setFilteredSeqFeaturesList:function(e,f,g){this.filteredSeqFeaturesList=[];this.filteredSeqFeaturesList=this.getFilteredFeaturesList(e,f,g)},getFilteredFeaturesList:function(e,f,g){var h=this,l=e,n=g&&0<Object.keys(g).length,m=n?Object.assign.apply(Object,[{}].concat(Object.keys(g).map(function(r){var v;return v={},v[r]="number"==typeof g[r]?g[r]:g[r].reduce(function(u,w){return u+w},0),v}))):{};if(""!=
f){var q=new RegExp(f,"i");l=e.filter(function(r){return q.test(r.name)})}return l.sort(function(r,v){if(h.isImage(r.name)&&!h.isImage(v.name))return-1;if(h.isImage(v.name)&&!h.isImage(r.name))return 1;if(n){if(r.name in g&&!(v.name in g))return-1;if(v.name in g&&!(r.name in g))return 1;var u=m[v.name]-m[r.name];if(0!=u)return u}return r.name.localeCompare(v.name)})},getMaxSeqNumber:function(){for(var e=-1,f=0,g=this.seqFeaturesList;f<g.length;f++){var h=g[f].feature;h&&Xe(h,fg,1).length-1>e&&(e=
Xe(h,fg,1).length-1)}return e},haveSaliencyJson:function(){this.saliency=JSON.parse(this.saliencyJsonString)},getColors:function(){var e=this.getMinMaxSaliency(this.saliency);this.minSal=e[0];this.maxSal=e[1];return d3.scaleLinear().domain([this.minSal,0,this.maxSal]).interpolate(a).clamp(!0).range(["#FF847C","#fff","#007B83"])},selectAll:function(e){return d3.selectAll(Polymer.dom(this.root).querySelectorAll(e))},haveSaliency:function(){var e=this;requestAnimationFrame(function(){return e._haveSaliencyImpl()})},
_haveSaliencyImpl:function(){var e=this;this.selectAll(".value-pill").style("background","#fff");if(this.filteredFeaturesList&&this.saliency&&0!==Object.keys(this.saliency).length&&this.colors)for(var f=function(n){var m=g.saliency[n.name];if(!m)return"continue";var q=Array.isArray(m)?function(v,u){return e.getColorForSaliency(m[u])}:function(){return e.getColorForSaliency(m)};g.selectAll("."+g.sanitizeFeature(n.name)+".value-pill").style("background",g.showSaliency?q:function(){return"#fff"});if(Array.isArray(m)){n=
g.selectAll("paper-button."+g.sanitizeFeature(n.name)+".value-pill");var r=0;for(q=1;q<m.length;q++)Math.abs(m[q])>Math.abs(r)&&(r=m[q]);n.style("background",g.showSaliency?function(){return e.getColorForSaliency(r)}:function(){return"#fff"})}},g=this,h=0,l=this.filteredFeaturesList;h<l.length;h++)f(l[h])},newSeqNum:function(){this.seqSaliency()},seqSaliency:function(){var e=this;if(this.seqFeaturesList&&this.saliency&&0!==Object.keys(this.saliency).length&&this.colors)if(this.selectAll(".value input").size()<
this.seqFeaturesList.length)requestAnimationFrame(function(){return e.seqSaliency()});else for(var f=function(n){var m=g.saliency[n.name];if(!m)return"continue";var q=m[g.seqNumber];m=Array.isArray(q)?function(r,v){return e.getColorForSaliency(q[v])}:function(){return e.getColorForSaliency(q)};g.selectAll("."+g.sanitizeFeature(n.name)+" input").style("color",g.showSaliency?m:function(){return"black"})},g=this,h=0,l=this.seqFeaturesList;h<l.length;h++)f(l[h])},getMinMaxSaliency:function(e){function f(n){if(Array.isArray(n))for(var m=
0;m<n.length;m++)f(n[m]);else n<g&&(g=n),n>h&&(h=n)}var g=Infinity,h=-Infinity,l;for(l in e)e.hasOwnProperty(l)&&f(e[l]);g=.95*Math.min(0,g);h=.95*Math.max(0,h);0>g&&h>Math.abs(g)?g=-1*h:0<h&&Math.abs(g)>h&&(h=-1*g);return[g,h]},getFeatureValues:function(e,f,g,h){var l=this;return(e=h?this.compareFeatures.get(e):this.features.get(e))?ig(e)?f?ig(e).getValueList().slice():re(ig(e).getValueList()).map(function(n){return l.decodeBytesListString(n,g)}):jg(e)?jg(e).getValueList().slice():Be(e,kf,2)?Be(e,
kf,2).getValueList().slice():[]:[]},getCompareFeatureValues:function(e,f,g){return this.getFeatureValues(e,f,g,!0)},getFirstFeatureValue:function(e){return this.getFeatureValues(e)[0]},getFirstCompareFeatureValue:function(e){return this.getCompareFeatureValues(e)[0]},featureHasMultipleValues:function(e){return 1<this.getFeatureValues(e).length},compareFeatureHasMultipleValues:function(e){return 1<this.getCompareFeatureValues(e).length},getSeqFeatureValues:function(e,f,g,h,l){var n=this;e=l?this.compareSeqFeatures.get(e):
this.seqFeatures.get(e);if(!e)return[];e=Xe(e,fg,1);return!e||e.length<=f?[]:(f=e[f])?ig(f)?g?ig(f).getValueList():re(ig(f).getValueList()).map(function(m){return n.decodeBytesListString(m,h)}):jg(f)?jg(f).getValueList():Be(f,kf,2)?Be(f,kf,2).getValueList():[]:[]},getCompareSeqFeatureValues:function(e,f,g,h){return this.getSeqFeatureValues(e,f,g,h,!0)},getFirstSeqFeatureValue:function(e,f){return this.getSeqFeatureValues(e,f)[0]},getFirstSeqCompareFeatureValue:function(e,f){return this.getCompareSeqFeatureValues(e,
f)[0]},seqFeatureHasMultipleValues:function(e,f){return 1<this.getSeqFeatureValues(e,f).length},compareSeqFeatureHasMultipleValues:function(e,f){return 1<this.getCompareSeqFeatureValues(e,f).length},decodeBytesListString:function(e,f){return 32768E3<e.length?"String too large to display":f?this.decodeBytesListToString(e):(new window.TextDecoder).decode(e)},isBytesFeature:function(e){var f=this.features.get(e);return f&&null!=ee(f,1)?!0:(e=this.seqFeatures.get(e))&&null!=ee(Xe(e,fg,1)[0],1)?!0:!1},
getJsonFeature:function(e){if(!this.json)return null;if(this.json.features&&this.json.features.feature){var f=this.json.features.feature[e];if(f)return f}return this.json.context&&this.json.context.feature&&(f=this.json.context.feature[e])?f:this.json.featureLists&&this.json.featureLists.featureList?this.json.featureLists.featureList[e]:null},getJsonValueList:function(e,f){e=this.getJsonFeature(e);if(!e)return null;isNaN(f)||(e=e.feature[f]);return(f=e.bytesList||e.int64List||e.floatList)?f.value:
null},getDataFromEvent:function(e){for(e=e.target;null==e.dataFeature;){if(!e.parentElement)throw Error("Could not find ancestor control element");e=e.parentElement}return{feature:e.dataFeature,valueIndex:e.dataIndex,seqNum:e.dataSeqNum}},getFeatureFromData:function(e){if(isNaN(e.seqNum))return this.features.get(e.feature);var f=this.seqFeatures.get(e.feature);if(f)return(f=Xe(f,fg,1))?f[e.seqNum]:void 0},getValueListFromData:function(e){return isNaN(e.seqNum)?this.getFeatureValues(e.feature,!0):
this.getSeqFeatureValues(e.feature,e.seqNum,!0)},setFeatureValues:function(e,f){var g=ig(e),h=jg(e);e=Be(e,kf,2);g?g.setValueList(f):h?h.setValueList(f):e&&e.setValueList(f)},onValueChanged:function(e){var f=e.target;e=this.getDataFromEvent(e);var g=this.getFeatureFromData(e),h=this.getValueListFromData(e);if(g){if(this.isBytesFeature(e.feature)){var l=this.stringToUint8Array(f.value);h[e.valueIndex]=l;(l=this.getJsonValueList(e.feature,e.seqNum))&&(l[e.valueIndex]=btoa(f.value))}else h[e.valueIndex]=
+f.value,(l=this.getJsonValueList(e.feature,e.seqNum))&&(l[e.valueIndex]=+f.value);this.setFeatureValues(g,h);this.exampleChanged()}},onInputFocus:function(e){var f=e.target;e=this.getDataFromEvent(e);this.focusedFeatureName=e.feature;this.focusedFeatureValueIndex=e.valueIndex;this.focusedSeqNumber=e.seqNum;this.$.deletevalue.style.top=f.getBoundingClientRect().top-this.getBoundingClientRect().top-25+"px";this.$.deletevalue.style.right=this.getBoundingClientRect().right-f.getBoundingClientRect().right+
30+"px";this.showDeleteValueButton=!0},onInputBlur:function(){this.showDeleteValueButton=!1},deleteFeature:function(e){e=this.getDataFromEvent(e);this.features.del&&this.features.del(e.feature);this.seqFeatures.del&&this.seqFeatures.del(e.feature);this.deleteJsonFeature(e.feature);this.exampleChanged();this.refreshExampleViewer()},deleteJsonFeature:function(e){this.json&&(this.json.features&&this.json.features.feature&&delete this.json.features.feature[e],this.json.context&&this.json.context.feature&&
delete this.json.context.feature[e],this.json.featureLists&&this.json.featureLists.featureList&&delete this.json.featureLists.featureList[e])},deleteValue:function(e){e=this.getDataFromEvent(e);var f=this.getFeatureFromData(e),g=this.getValueListFromData(e);if(f){if(this.isBytesFeature(e.feature)){var h=this.getJsonValueList(e.feature,e.seqNum);h&&h.splice(e.valueIndex,1)}g.splice(e.valueIndex,1);this.setFeatureValues(f,g);this.exampleChanged();this.refreshExampleViewer()}},openAddFeatureDialog:function(){this.$.addFeatureDialog.open()},
addFeature:function(){if(this.json){var e=new fg;if("int"===this.newFeatureType){var f=[];var g=new ag;g.setValueList(f);$e(e,3,gg[0],g);f={int64List:{value:f}}}else"float"===this.newFeatureType?(f=[],g=new kf,g.setValueList(f),$e(e,2,gg[0],g),f={floatList:{value:f}}):(f=[],g=new ef,g.setValueList(f),$e(e,1,gg[0],g),f={bytesList:{value:f}});this.features.set(this.newFeatureName,e);this.addJsonFeature(this.newFeatureName,f);this.newFeatureName="";this.exampleChanged();this.refreshExampleViewer()}},
addJsonFeature:function(e,f){this.json&&this.json.features&&this.json.features.feature?this.json.features.feature[e]=f:this.json&&this.json.context&&this.json.context.feature&&(this.json.context.feature[e]=f)},addValue:function(e){e=this.getDataFromEvent(e);var f=this.getFeatureFromData(e),g=this.getValueListFromData(e);f&&(this.isBytesFeature(e.feature)?g.push(""):g.push(0),this.setFeatureValues(f,g),this.exampleChanged(),this.refreshExampleViewer())},refreshExampleViewer:function(){var e=this,f=
this.example;this.ignoreChange=!0;this.example=new qh;this.ignoreChange=!1;setTimeout(function(){e.example=f;e.haveSaliency()},0)},exampleChanged:function(){this.fire("example-change",{example:this.example});clearTimeout(this.changeCallbackTimer);this.changeCallbackTimer=setTimeout(this.changeCallback.bind(this),1E3)},changeCallback:function(){this.ignoreChange=!0;this.isSequence&&this.serializedSeqExample?this.serializedSeqExample=btoa(this.decodeBytesListString(this.example.serializeBinary(),!0)):
this.serializedExample&&(this.serializedExample=btoa(this.decodeBytesListString(this.example.serializeBinary(),!0)));this.ignoreChange=!1},getInputPillClass:function(e,f){return this.sanitizeFeature(e)+" value-pill"+("grid"==f?" value-pill-grid":" value-pill-stacked")},getCompareInputClass:function(e,f,g){f="value-compare"+("grid"==f?" value-pill-grid":" value-pill-stacked");if(null!=g){var h=this.getFeatureValues(e,!0);e=this.getCompareFeatureValues(e,!0);f=g>=h.length||g>=e.length||h[g]!=e[g]?f+
" value-different":f+" value-same"}return f},getSeqCompareInputClass:function(e,f,g,h){f="value-compare"+("grid"==f?" value-pill-grid":" value-pill-stacked");if(null!=h){var l=this.getSeqFeatureValues(e,g,!0);e=this.getCompareSeqFeatureValues(e,g,!0);f=h>=l.length||h>=e.length||l[h]!=e[h]?f+" value-different":f+" value-same"}return f},sanitizeFeature:function(e){e=e.trim();e.match(/^[A-Za-z].*$/)||(e="_"+e);return e.replace(/[\/\.#]/g,"_")},isSeqExample:function(e){return 0<=e},shouldShowSaliencyLegend:function(e){return e&&
0<Object.keys(e).length},getSaliencyControlsHolderClass:function(e){return this.shouldShowSaliencyLegend(e)?"saliency-controls-holder":"hide-saliency-controls"},createLegend:function(){d3.select(this.$.saliencyLegend).selectAll("*").remove();var e=d3.select(this.$.saliencyLegend).append("g"),f=e.append("defs").append("linearGradient").attr("id","vzexampleviewergradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad"),g=[];0>this.minSal&&g.push("#FF847C");
g.push("#fff");0<this.maxSal&&g.push("#007B83");var h=function(l,n,m){for(var q=[],r=(n-l)/(m-1),v=0;v<m-1;)q.push(l+v*r),v++;q.push(n);return q}(0,100,g.length).map(function(l){return Math.round(l)+"%"});d3.zip(h,g).forEach(function(l){f.append("stop").attr("offset",l[0]).attr("stop-color",l[1]).attr("stop-opacity",1)});e.append("rect").attr("x1",0).attr("y1",0).attr("width",260).attr("height",20).style("fill","url(#vzexampleviewergradient)");g=d3.scaleLinear().domain([this.minSal,this.maxSal]).range([0,
260]);g=d3.axisBottom(g).ticks();e.append("g").attr("class","legend axis").attr("transform","translate(0,20)").call(g)},isImage:function(e){return b.test(e)},getImageSrc:function(e){this.setupOnloadCallback(e);return this.getImageSrcForData(e,this.getFeatureValues(e,!1,!0)[0])},getCompareImageSrc:function(e){this.setupOnloadCallback(e,!0);return this.getImageSrcForData(e,this.getCompareFeatureValues(e,!1,!0)[0],!0)},getSeqImageSrc:function(e,f){this.setupOnloadCallback(e);return this.getImageSrcForData(e,
this.getSeqFeatureValues(e,f,!1,!0)[0])},getCompareSeqImageSrc:function(e,f){this.setupOnloadCallback(e,!0);return this.getImageSrcForData(e,this.getCompareSeqFeatureValues(e,f,!1,!0)[0],!0)},setupOnloadCallback:function(e,f){var g=this;requestAnimationFrame(function(){var h=g.$$("#"+g.getImageId(e,f));h.onload=g.getOnLoadForImage(e,h,f)})},getImageSrcForData:function(e,f,g){e=b.exec(e);if(null==e)return null;e=e[1]||"";g=g?this.getCompareFeatureValues("image"+e+"/format",!1):this.getFeatureValues("image"+
e+"/format",!1);e="jpeg";0<g.length&&(e=g[0].toLowerCase());return"data:image/"+e+";base64,"+btoa(decodeURIComponent(encodeURIComponent(f)))},getIterLength:function(e){var f=0;if(e)for(var g=e.next();!g.done;)f++,g=e.next();return f},updateCompareMode:function(){var e=!1;if(this.compareFeatures&&0<this.getIterLength(this.compareFeatures.keys())||this.compareSeqFeatures&&0<this.getIterLength(this.compareSeqFeatures.keys()))e=!0;this.compareMode=e},createExamplesFromJson:function(e){this.example=this.createExamplesFromJsonHelper(e);
this.compareJson={}},createCompareExamplesFromJson:function(e){e&&(this.compareExample=this.createExamplesFromJsonHelper(e))},createExamplesFromJsonHelper:function(e){if(!e)return null;"string"===typeof this.json&&(e=JSON.parse(this.json));if(e.features){var f=new qh;e=this.parseFeatures(e.features);Ze(f,1,e);return f}return e.context||e.featureLists?(f=new sh,e.context&&f.setContext(this.parseFeatures(e.context)),e.featureLists&&(e=this.parseFeatureLists(e.featureLists),Ze(f,2,e)),f):new qh},parseFeatures:function(e){var f=
new mg,g;for(g in e.feature)if(e.feature.hasOwnProperty(g)){var h=e.feature[g];og(f).set(g,this.parseFeature(h,this.isImage(g)))}return f},parseFeatureLists:function(e){var f=new wg,g;for(g in e.featureList)if(e.featureList.hasOwnProperty(g)){var h=e.featureList[g],l=new rg,n=[],m;for(m in h.feature)h.feature.hasOwnProperty(m)&&n.push(this.parseFeature(h.feature[m],this.isImage(g)));af(l,1,n);ue(f,void 0,rg).set(g,l)}return f},parseFeature:function(e){var f=new fg;if(e.floatList){var g=new kf;g.setValueList(e.floatList.value);
$e(f,2,gg[0],g)}else e.bytesList?(g=new ef,e.bytesList.value&&g.setValueList(e.bytesList.value),$e(f,1,gg[0],g)):e.int64List&&(g=new ag,g.setValueList(e.int64List.value),$e(f,3,gg[0],g));return f},getImageId:function(e,f){return f?this.getCompareImageId(e):this.sanitizeFeature(e)+"_image"},getCanvasId:function(e,f){return f?this.getCompareCanvasId(e):this.sanitizeFeature(e)+"_canvas"},getImageCardId:function(e,f){return f?this.getCompareImageCardId(e):this.sanitizeFeature(e)+"_card"},getCompareImageId:function(e){return this.sanitizeFeature(e)+
"_image_compare"},getCompareCanvasId:function(e){return this.sanitizeFeature(e)+"_canvas_compare"},getCompareImageCardId:function(e){return this.sanitizeFeature(e)+"_card_compare"},getFeatureDialogId:function(e){return this.sanitizeFeature(e)+"_dialog"},featureMoreClicked:function(e){e=e.srcElement.parentElement;var f=this.$$("#"+this.sanitizeFeature(e.dataFeature)+"_dialog");f.positionTarget=e;f.open()},expandFeature:function(e){this.set("expandedFeatures."+this.sanitizeFeature(e.srcElement.dataFeature),
!0);this.refreshExampleViewer()},decodedStringToCharCodes:function(e){for(var f=new Uint8Array(e.length),g=0;g<e.length;++g)f[g]=e.charCodeAt(g);return f},handleImageUpload:function(e){this.handleFileSelect(e,this)},uploadImageClicked:function(e){e=this.getDataFromEvent(e);for(var f=Polymer.dom(this.root).querySelectorAll("paper-input"),g=null,h=0;h<f.length;h++)if(f[h].dataFeature==e.feature){g=f[h];break}g&&g.querySelector("input").click()},handleFileSelect:function(e,f){e.stopPropagation();e.preventDefault();
var g=new FileReader,h=e.dataTransfer?e.dataTransfer.files:e.target.files;0!==h.length&&(g.addEventListener("load",function(){var l=g.result.substring(+g.result.indexOf("base64,")+7),n=f.decodedStringToCharCodes(atob(l)),m=f.getDataFromEvent(e),q=f.getFeatureFromData(m),r=f.getValueListFromData(m);if(q){r[0]=n;ig(q).setValueList(r);(n=f.getJsonValueList(m.feature,m.seqNum))&&(n[0]=l);var v=new Image;f.addImageElement(m.feature,v);v.addEventListener("load",function(){f.getOnLoadForImage(m.feature,
v);var u=b.exec(m.feature)[1]||"",w="image"+u+"/width";u="image"+u+"/height";var z=f.getFeatureValues(w,!1),A=f.getFeatureValues(u,!1);0<z.length&&(z[0]=+v.width,jg(f.features.get(w)).setValueList(z));0<A.length&&(A[0]=+v.height,jg(f.features.get(u)).setValueList(A));f.exampleChanged()});v.src=g.result}},!1),g.readAsDataURL(h[0]))},addDragDropBehaviorToCanvas:function(e){function f(l){l.stopPropagation();l.preventDefault();l.dataTransfer.dropEffect="copy"}function g(l){h.handleFileSelect(l,h)}var h=
this;!this.readonly&&e&&(e.addEventListener("dragover",f,!1),e.addEventListener("drop",g,!1))},getOnLoadForImage:function(e,f,g){function h(n,m,q){var r=l.$$("#"+l.getCanvasId(n,q));q||l.addDragDropBehaviorToCanvas(r);if(m&&r){var v=r.getContext("2d"),u=l.imageScalePercentage/100;if(!l.allowImageControls){var w=l.$$("#"+l.getImageCardId(n,q)).parentElement.getBoundingClientRect().width/2;16<w&&(w-=16);w<m.width&&(u=w/m.width)}r.width=m.width*u;r.height=m.height*u;var z=function(E){v.save();v.clearRect(0,
0,r.width,r.height);v.translate(E.x,E.y);v.scale(E.k,E.k);l.renderImageOnCanvas(v,r.width,r.height,n,q);v.restore()},A=d3.zoom().scaleExtent(c).on("zoom",function(){l.addImageTransform(n,d3.event.transform,q);z(d3.event.transform)});d3.select(r).call(A).on("dblclick.zoom",function(){return d3.select(r).call(A.transform,d3.zoomIdentity)});v.save();v.scale(u,u);v.drawImage(m,0,0);v.restore();l.setImageDatum(v,r.width,r.height,n,q);l.renderImageOnCanvas(v,r.width,r.height,n,q);q?l.compareImageInfo[n].transform&&
z(l.compareImageInfo[n].transform):l.imageInfo[n].transform&&z(l.imageInfo[n].transform)}else requestAnimationFrame(function(){return h(n,m,q)})}var l=this;this.addImageElement(e,f,g);this.addImageOnLoad(e,h,g);return h.apply(this,[e,f,g])},addImageOnLoad:function(e,f,g){this.hasImage=!0;g?(this.compareImageInfo[e]||(this.compareImageInfo[e]={}),this.compareImageInfo[e].onload=f):(this.imageInfo[e]||(this.imageInfo[e]={}),this.imageInfo[e].onload=f)},addImageData:function(e,f,g){g?(this.compareImageInfo[e]||
(this.compareImageInfo[e]={}),this.compareImageInfo[e].imageData=f):(this.imageInfo[e]||(this.imageInfo[e]={}),this.imageInfo[e].imageData=f)},addImageElement:function(e,f,g){g?(this.compareImageInfo[e]||(this.compareImageInfo[e]={}),this.compareImageInfo[e].imageElement=f):(this.imageInfo[e]||(this.imageInfo[e]={}),this.imageInfo[e].imageElement=f)},addImageGrayscaleData:function(e,f){this.imageInfo[e]||(this.imageInfo[e]={});this.imageInfo[e].imageGrayscaleData=f},addImageTransform:function(e,f,
g){g?(this.compareImageInfo[e]||(this.compareImageInfo[e]={}),this.compareImageInfo[e].transform=f):(this.imageInfo[e]||(this.imageInfo[e]={}),this.imageInfo[e].transform=f)},setImageDatum:function(e,f,g,h,l){if(f&&g&&(e=e.getImageData(0,0,f,g),e=Uint8ClampedArray.from(e.data),this.addImageData(h,e,l),this.saliency&&this.showSaliency&&this.saliency[h]&&!l)){l=Uint8ClampedArray.from(e);for(f=0;f<e.length;f+=4)g=(e[f]+e[f+1]+e[f+2])/3,l[f]=g,l[f+1]=g,l[f+2]=g;this.addImageGrayscaleData(h,l)}},contrastImage:function(e,
f,g){f=d3.scaleLinear().domain([g-.5-f/2,g-.5+(f-1)/2]).clamp(!0).range([0,255]);for(g=0;g<e.length;g++)3!==g%4&&(e[g]=f(e[g]))},showSaliencyForValue:function(e){return Math.abs(e)>=Math.abs(0<=e?this.maxSal:this.minSal)*this.saliencyCutoff/100},getColorForSaliency:function(e){return this.showSaliencyForValue(e)?this.colors(e):"#fff"},addSaliencyToImage:function(e,f){Array.isArray(f)&&0<f.length&&Array.isArray(f[0])&&(f=f[this.seqNumber]);for(var g=1/Math.pow(this.imageScalePercentage/100,2),h=0;h<
e.length;h+=4){var l=Math.floor(h/4*g);var n=Array.isArray(f)?f.length>l?f[l]:0:f;l=.5*(this.showSaliencyForValue(n)?0<=n?0===this.maxSal?0:n/this.maxSal:n/this.minSal:0);n=d3.rgb(0<n?"#007B83":"#FF847C");var m=n.g,q=n.b;e[h]=e[h]*(1-l)+n.r*l;e[h+1]=e[h+1]*(1-l)+m*l;e[h+2]=e[h+2]*(1-l)+q*l}},renderImageOnCanvas:function(e,f,g,h,l){if(f&&g){var n=e.getImageData(0,0,f,g);l?n.data.set(this.compareImageInfo[h].imageData):n.data.set(this.saliency&&this.showSaliency&&this.saliency[h]?this.imageInfo[h].imageGrayscaleData:
this.imageInfo[h].imageData);256===this.windowWidth&&128===this.windowCenter||this.contrastImage(n.data,this.windowWidth,this.windowCenter);!l&&this.saliency&&this.showSaliency&&this.saliency[h]&&this.addSaliencyToImage(n.data,this.saliency[h]);h=document.createElement("canvas");h.width=f;h.height=g;h.getContext("2d").putImageData(n,0,0);e.clearRect(0,0,f,g);e.drawImage(h,0,0)}},showSalCheckboxChange:function(){this.showSaliency=this.$.salCheckbox.checked},updateImages:function(){for(var e in this.imageInfo)if(this.imageInfo.hasOwnProperty(e))this.imageInfo[e].onload(e,
this.imageInfo[e].imageElement)},shouldShowImageControls:function(e,f){return e&&f},shouldEnableAddFeature:function(e){return 0<e.length},getDeleteValueButtonClass:function(e,f){return e||!f?"delete-value-button delete-value-button-hidden":"delete-value-button"},getDeleteFeatureButtonClass:function(e){return e?"hide-controls":"delete-feature-button"},getAddValueButtonClass:function(e){return e?"hide-controls":"add-value-button"},getAddFeatureButtonClass:function(e){return e?"hide-controls":"add-feature-button"},
getUploadImageClass:function(e){return e?"hide-controls":"upload-image-button"},decodeBytesListToString:function(e){var f="",g;for(g=0;g<e.length/16384;g++)f+=String.fromCharCode.apply(null,e.slice(16384*g,16384*(g+1)));return f+=String.fromCharCode.apply(null,e.slice(16384*g))}})})(hq||(hq={}));
</script>
</dom-module>


<dom-module id="tf-interactive-inference-dashboard">
  <template>
    <style id="linter-paper-button-style">
      /**
       * This style preserves the styling previous to
       * https://github.com/PolymerElements/paper-button/pull/115
       * This change can break the layout of paper-button content.
       * Remove this style to apply the change, more details at b/70528356.
       */
      paper-button {
        display: inline-block;
        text-align: center;
        font-family: inherit;
      }
    </style>
    <style>
      :host {
        font-family: 'Roboto', 'Noto', sans-serif;
        --paper-tab-ink: var(--tb-orange-dark);
        --wit-color-gray300: #DADCE0;
      }

      #classification {
        width: 40%;
      }

      .example-holder {
        width: 100%;
      }

      .inference-section-holder {
        display: flex;
        margin-top: 6px;
        margin-right: 6px;
      }

      .inference-section {
        width: 100%;
        border: 1px solid var(--wit-color-gray300);
      }

      .inference-viewer {
        max-height: 35%;
        flex-grow: 1;
      }

      .compare-inference-viewer {
        border-left: 1px solid var(--wit-color-gray300);
      }

      .tf-option-selector-0 .content-wrapper.tf-option-selector  > * {
        width: 40%;
      }

      #spinner {
        position: absolute;
        top: 95px;
        left: 10px;
        width: 14px;
        height: 14px;
        --paper-spinner-color: var(--tb-orange-strong);
      }

      .noexamples {
        position: absolute;
        top: 75px;
        left: 30px;
      }

      .center {
        position: relative;
      }

      .info-text {
        font-size: 14px;
        color: #3C4043;
        letter-spacing: 0.25px;
        line-height: 20px;
        margin: 12px auto;
      }

      .pd-info-text {
        font-size: 18px;
        color: #3C4043;
        line-height: 24px;
        padding-top: 12px;
        padding-right: 4px;
        padding-left: 12px;
      }

      .pd-no-features-text {
        font-size: 18px;
        color: #3C4043;
        padding: 12px 48px;
      }

      .accept-button-holder {
        display: flex;
        flex-direction: row-reverse;
      }

      .settings-button {
        margin-top: 4px;
      }

      .button {
        font-size: 13px;
        margin: 10px 0 0 0;
        background-color: var(--tb-orange-strong);
        color: white;
      }

      .button[disabled] {
        background-color: #ccc;
      }

      .input-and-tooltip {
        display: flex;
      }

      .label-vocab-path-input {
        flex-grow: 1;
      }

      .threshold-dropdown {
        display: block;
        width: 150px;
        min-width: 150px;
        padding-right: 16px;
        --paper-input-container-input: {
          font-size: 14px;
          color: #3C4043;
        }
      }

      .counterfactual-dropdown {
        display: inline-block;
        width: 100px;
        min-width: 50px;
        padding-right: 5px;
        --paper-input-container-input: {
          font-size: 14px;
          color: #3C4043;
        }
      }

      .slider-label {
        margin-top: 8px;
      }

      .facet-label {
        --paper-input-container-underline: {
          display: none;
        };
        --paper-input-container-input: {
          font-weight: 500;
        };
      }

      .slider {
        width: 280px;
        --paper-slider-input: {
          width: 80px;
        }
      }

      .slider-model-one {
        --paper-slider-knob-color: #12B5CE;
        --paper-slider-active-color: #12B5CE;
      }

      .slider-model-two {
        --paper-slider-knob-color: #fa7817;
        --paper-slider-active-color: #fa7817;
      }

      .pr-line-chart {
        margin: 0;
        height: 200px;
        width: 280px;
        display: inline-block;
      }

      paper-dialog.inference-settings {
        padding: 20px;
        width: 40%;
        max-width: 40%;
        overflow-y: auto;
        border-radius: 10px;
      }

      .dashboard-layout {
        display: flex;
        height: 100%;
        background-color: white;
      }

      .center {
        width: 60%;
      }

      .side-holder {
        position: relative;
        width: 40%;
        display: flex;
      }

      .side-content {
        padding-left: 5px;
        width: calc(100% - 10px);
        display: flex;
        flex-direction: column;
      }

      .side-tabs {
        display: flex;
        height: calc(100% - 50px);
      }

      .datapoint-tab {
        display: flex;
        width: 100%;
        overflow: auto;
      }

      .config-tab {
        width: 100%;
        display: flex;
      }

      .config-side-content {
        padding-left: 5px;
        width: 30%;
        overflow-y: auto;
        border-right: 1px solid var(--wit-color-gray300);
      }

      .config-main-content {
        width: 70%;
        display: flex;
        flex-direction: column;
        background: #F8F9FA;
      }

      .stats-tab {
        width: 100%;
        display: flex;
        overflow: auto;
      }

      .pd-tab {
        width: 100%;
        padding: 5px 10px;
      }

      .pd-plots-header {
        height: 52px;
        min-height: 52px;
        max-height: 52px;
        border-bottom: solid 2px var(--wit-color-gray300);
        display: flex;
        justify-content: space-between;
      }

      .pdplots-holder {
        flex-grow: 1;
        overflow-y: overlay;
        background: #F8F9FA;
      }

      .pd-range-hyphen {
        padding-right: 6px;
        padding-top: 8px;
      }

      .pd-range-control {
        border-bottom: solid 1px #FCC934;
        border-top: none;
        border-left: none;
        border-right: none;
        height: 36px;
        width: 104px;
        margin-right: 6px;
      }

      #overview {
        max-height: 100%;
        height: 100%;
      }

      .inference-header.heading {
        background: #E4F7FB;
      }

      .right-side {
        position: absolute;
        right: 0;
        top: 0;
      }

      .right-side-performance-tab {
        margin: 4px;
      }

      tf-confusion-matrix {
        display: block;
      }

      .conf-matrix-holder {
        margin-top: 20px;
        margin-bottom: 18px;
        margin-right: 24px;
      }

      .conf-matrix {
        margin-bottom: 18px;
      }

      .datapoint-controls-holder.datapoint-control-buttons-holder {
        padding-left: 2px;
      }


      .datapoint-controls-holder.datapoint-control-search-holder {
        padding-left: 10px;
      }

      .datapoint-controls-holder {
        border-bottom: 1px solid var(--wit-color-gray300);
        display: flex;
        flex-grow: 0;
        flex-shrink: 0;
        justify-content: space-between;
        margin-left: 1px;
      }

      .datapoint-left-controls-holder {
        display: flex;
        flex-wrap: wrap;
      }

      .datapoint-right-controls-holder {
        display: flex;
        flex-direction: row-reverse;
      }

      .tf-category-pane {
        flex-grow: 1;
      }

      .tf-category-pane-content {
        flex-wrap: wrap;
        flex-grow: 1;
        padding: 12px;
        border: 1px solid var(--wit-color-gray300);
        border-top: none;
        border-bottom-left-radius: 2px;
        border-bottom-right-radius: 2px;
        background: white;
      }

      :host vz-line-chart {
        margin: 12px 12px 12px 24px;
        height: 180px;
        width: 300px;
        display: inline-block;
      }

      :host vz-bar-chart {
        margin: 12px 12px 12px 24px;
        height: 240px;
        width: 450px;
        display: inline-block;
      }

      .pd-input-container {
        display: block;
        flex-grow: 0;
        padding: 12px 48px 24px 24px;
        background: #FeF7E0;
        border: solid 1px #FDE293;
      }

      .style-input {
        width: 50px;
        text-align: right;
        background: white;
      }

      .feature-container-holder {
        position:absolute;
        top: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background: white;
        display: none;
        flex-direction: column;
      }

      .datapoint-control-filter-input {
        border-radius: 2px;
        max-width: 60%;
        --paper-input-container: { padding: 4px 6px 2px 4px; };
        --paper-input-container-input: {
          font-size: 14px;
          color: #3C4043;
        }
        --paper-input-container-label: {
          font-size: 14px;
          color: #80868B;
        }
      }

      .datapoint-control-filter-input iron-icon {
        color: #9ba0a6;
      }

      .feature-search-input {
        padding-top: 3px;
        flex-grow: 1;
        max-width: 150px;
      }

      .control-button {
        background-color: white;
        border: 1px solid var(--wit-color-gray300);
        color: var(--tb-orange-dark);
        font-size: 14px;
        font-weight: 400;
        padding: 8px 12px;
        text-transform: none;
        margin: 5px;
      }

      .control-button[disabled] {
        color: #5F6368;
        background-color: #f4f4f4;
      }

      .main-button {
        background-color: var(--tb-orange-dark);
        border: 1px solid var(--tb-orange-dark);
        color: white;
        font-size: 14px;
        font-weight: 400;
        padding: 8px 12px;
        text-transform: none;
        margin: 5px;
      }

      .main-button[disabled] {
        background-color: lightgray;
        border: 1px solid lightgray;
        color: gray;
      }

      .optimize-threshold-button {
        margin: 5px 0;
        width: 150px;
        min-width: 150px;
        margin-right: 16px;
      }

      .close-partial-deps-button {
        margin: 10px;
      }

      paper-tabs {
        flex-grow: 1;
        width: 100%;
        height: 100%;
        --paper-tabs-selection-bar-color: var(--tb-orange-dark);
      }

      paper-tab {
        font-size: 14px;
        font-weight: 400;
        padding: 0 24px;
        letter-spacing: 0.1px;
      }

      paper-tab:not(.iron-selected) {
        color: #3C4043;
      }

      paper-tab.iron-selected {
        color: #202124;
        font-weight: 500;
      }

      .curves-holder {
        display: flex;
        flex-wrap: wrap;
        margin-top: 20px;
        position: relative;
      }

      .curve-holder {
        width: 300px;
        height: 235px;
        margin-bottom: 20px;
        margin-right: 20px;
        position: relative;
      }

      .roc-x-label {
        position: absolute;
        bottom: 0;
        left: 120px;
        font-size: 12px;
        color: #5f6368;
        padding: 0px;
      }

      .roc-y-label {
        position: absolute;
        left: -36px;
        bottom: 110px;
        transform: rotate(270deg);
        font-size: 12px;
        color: #5f6368;
        padding: 0px;
      }

      .pr-x-label {
        position: absolute;
        bottom: 0;
        left: 140px;
        font-size: 12px;
        color: #5f6368;
        padding: 0px;
      }

      .pr-y-label {
        position: absolute;
        left: -14px;
        bottom: 110px;
        transform: rotate(270deg);
        font-size: 12px;
        color: #5f6368;
        padding: 0px;
      }

      .flex {
        display: flex;
      }

      .space-between {
        justify-content: space-between;
      }

       .flex-wrap {
        display: flex;
        flex-wrap: wrap;
      }

      .optimize-text {
        margin: 5px 0;
        color: grey;
        font-size: 14px;
      }

      .threshold-cost-input {
        width: 150px;
        min-width: 150px;
        margin-right: 16px;
        --paper-input-container-input: {
          font-size: 14px;
          color: #3C4043;
        }
        --paper-input-container-label: {
          font-size: 14px;
          color: #80868B;
        }
      }

      .bold {
        font-weight: 500;
      }

      .indent {
        margin-left: 10px;
      }

      .feature-breakdown {
        margin-left: 12px;
      }

      .optimize-selection-button {
        margin-left: 0;
        margin-bottom: 5px;
      }

      .reg-table-category {
        text-align: left;
      }

      .reg-table-value {
        text-align: right;
      }

      .subfeature-table {
        margin-left: 10px;
      }

      .counterfactual-button-intro {
        padding: 7px 0 0 10px;
      }

      .main-vertical {
        width: 100%;
      }

      .main-bottom-bar {
        height: 52px;
        min-height: 52px;
        flex-grow: 0;
        display: flex;
        /* box-shadow: 0 2px 5px grey;
        margin-bottom: 3px; */
        border-bottom: solid 1px #DADCE0;
        justify-content: space-between;
      }

      .main-content {
        height: 100%;
      }

      .dist-switch {
        display: flex;
        margin-top: 0;
      }

      .distance-vis-dropdown {
        margin-top: 0;
      }

      #distancedialog {
        width: 30%;
      }

      #distancedialog .buttons {
        color: #f57c00;
      }

      paper-radio-button {
        --paper-radio-button-label: {
          font-size: 14px;
          color: #3C4043;
        }
        --paper-radio-button-unchecked-color: #3C4043;
        --paper-radio-button-unchecked-ink-color: #3C4043;
        --paper-radio-button-checked-color: #3C4043;
        --paper-radio-button-checked-ink-color: #3C4043;
      }

      paper-icon-button {
        color: #5F6368;
      }

      paper-icon-button[disabled] {
        color: #9AA0A6;
      }

      .resizer {
        display: table;
        height: 100%;
        width: 8px;
        border-left: 1px solid var(--wit-color-gray300);
        border-right: 1px solid var(--wit-color-gray300);
        cursor: pointer;
      }

      .example-status {
        font-size: 12px;
        color: #5F6368;
        white-space: nowrap;
        overflow: hidden;
        padding-top: 16px;
      }

      .example-id-label {
        padding: 9px 5px 9px 0;
      }

      .example-id-input {
        width: 70px;
        padding-top: 3px;
      }

      .heading-and-card {
        border: 1px solid lightgray;
        margin-right: 5px;
        margin-top: 5px;
        padding-top: 1px;
      }

      .editor-heading-and-card {
        flex: 1;
        overflow-y: overlay;
      }

      .heading {
        color: #5F6368;
        position: relative;
        padding: 10px 8px;
        background-color: #FEF7E0;
        border-bottom: 1px solid var(--wit-color-gray300);
        border-top: none;
        border-left: none;
        border-right: none;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        width: 100%;
        text-align: left;
      }

      .card {
        padding: 0 10px 5px;
      }

      .no-padding-card {
        padding: 0;
      }

      .tooltip {
        --paper-tooltip: {
          font-size: 16px;
        }
        --paper-tooltip-delay-out: 2000ms;
      }

      .comment-icon {
        width: 30px;
        height: 30px;
        min-width: 30px;
        min-height: 30px;
        margin-top: 10px;
        color: var(--tb-orange-dark);
      }

      .arrow-icon {
        width: 50px;
        height: 50px;
        min-width: 50px;
        min-height: 50px;
        color: var(--tb-orange-dark);
      }

      .pd-arrow-icon {
        width: 40px;
        height: 40px;
        min-width: 40px;
        min-height: 40px;
        margin-top: 5px;
        color: grey;
      }

      .pd-toggle {
        margin: 0 8px 0 20px;
      }

      .pd-entry-container {
        display: flex;
        flex-direction: row-reverse;
        justify-content: space-between;
        flex-grow: 1;
      }

      .info-icon {
        width: 20px;
        height: 20px;
        min-width: 20px;
        min-height: 20px;
        margin-top: 10px;
        color: grey;
      }

      .info-icon.cf-info-icon {
        margin-top: 12px;
      }

      .info-icon.thresh-info-icon {
        margin-top: -3px;
        vertical-align: middle;
      }

      .info-icon.pd-info-icon {
        margin-top: 15px;
      }

      .info-icon.threshold-info-icon {
        margin-top: 0;
        margin-bottom: 10px;
        margin-left: 5px;
      }

      .info-icon.performance-info-icon {
        margin-top: 18px;
        margin-bottom: 10px;
        margin-left: 5px;
      }

      .no-padding {
        padding: 0;
      }

      .resize-icon {
        display: table-cell;
        vertical-align: middle;
        color: grey;
        width: 10px;
        height: 10px;
        min-width: 10px;
        min-height: 10px;
      }

      .help-text {
        color: #5F6368;
        font-size: 10px;
        max-width: 200px;
      }

      .help-title {
        color: #007B7C;
        font-size: 11px;
        font-weight: 500;
        text-transform: uppercase;
      }

      .help-title-margin {
        margin-top: 14px;
      }

      .help-title-margin-button {
        margin-top: 4px;
      }

      .help-title-margin-title {
        margin-top: 7px;
      }

      .dialog-link {
        color: #5F6368;
        font-size: 10px;
        font-style: italic;
        text-decoration: underline;
        cursor: pointer;
      }

      .roc-text {
        color: #3C4043;
        font-size: 16px;
        margin-left: 44px;
      }

      .conf-text {
        margin-bottom: 12px;
        color: #3C4043;
        font-size: 16px;
      }

      .dialog-text {
        font-style: normal;
        text-align: left;
      }

      .dialog-title {
        font-size: 14px;
        font-weight: 500;
      }

      .title-width {
        width: 250px;
        padding-right: 16px;
      }

      .datapoint-info-holder {
        margin: 24px auto;
        max-width: 380px;
        padding: 24px;
      }

      .onboarding-header {
        color: #202124;
        font-size: 22px;
        margin-bottom: 28px;
      }

      .onboarding-text {
        color: #3C4043;
        font-size: 14px;
        margin-bottom: 20px;
      }

      .control-info-header {
        color: #3C4043;
        font-size: 14px;
        font-weight: 500;
        margin-top: 10px;
        margin-bottom: 15px;
      }

      .control-info-text {
        color: #3C4043;
        font-size: 14px;
        margin-bottom: 15px;
        max-width: 460px;
      }

      .button-prefix-label {
        margin: 12px 0 0 12px;
        color: grey;
        font-size: 14px;
      }

      .border-right {
        border-right: 1px solid var(--wit-color-gray300);
      }

      paper-dialog {
        color: #3C4043;
        border-radius: 10px;
        max-width: 600px;
      }

      .main-button.run-button {
        padding: 5px;
        flex-grow: 1;
      }

      .doc-image {
        width: 128px;
        height: 96px;
        border: 1px solid var(--wit-color-gray300);
      }

      .control-divider {
        margin: 5px 0 5px 5px;
        width: 5px;
        border-left: 1px solid var(--wit-color-gray300);
      }

      .optimization-radio {
        display: block;
        padding: 7px;
      }

      .optimization-radio-group {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }

      .infer-info {
        margin-left: 30px;
      }

      .perf-table-clickable {
        cursor: pointer;
      }

      .perf-table-title-row {
        background: white;
        width: 100%;
        display: flex;
        border-bottom: 1px solid var(--wit-color-gray300);
        min-height: 52px;
        justify-content: space-between;
      }
      .perf-table-title {
        color: #3C4043;
        font-size: 18px;
        margin-left: 14px;
        margin-top: 16px;
      }
      .perf-table-sort-menu {
        margin-top: -10px;
      }
      .perf-table-header {
        background: white;
        width: 100%;
        font-weight: 500;
        color: #80868B;
        font-size: 14px;
        line-height:16px;
        letter-spacing: 0.25;
        display: flex;
        border-bottom: 1px solid var(--wit-color-gray300);
        min-height: min-content;
        padding-top: 12px;
        padding-bottom: 4px;
      }

      .perf-table-entries-holder {
        overflow-y: overlay;
        flex-grow: 1;
      }

      .perf-table-entry {
        background: white;
        color: #3C4043;
        font-size: 14px;
        border-bottom: solid 1px var(--wit-color-gray300);
      }

      .perf-table-entry-expanded {
        display: flex;
        flex-wrap: wrap;
        margin: 0 12px;
        border-left: 1px solid var(--wit-color-gray300);
        border-bottom: 1px solid var(--wit-color-gray300);
        border-right: 1px solid var(--wit-color-gray300);
        background: white;
      }

      .perf-table-row {
        width: 100%;
        display: flex;
        background: white;
        position:relative;
      }

      .perf-table-row-expanded {
        width: 100%;
        display: flex;
        border-bottom: 1px solid var(--wit-color-gray300);
        border-top: 1px solid var(--wit-color-gray300);
        border-radius: 2px;
        box-shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
        background: white;
        position: relative;
      }

      .perf-table-text-entry {
        height: 40px;
        padding-top: 16px;
      }
      .perf-table-num-entry {
        height: 40px;
        padding-top: 16px;
        text-align: right;
      }
      .perf-table-arrow {
        min-width: 40px;
        width: 40px;
        margin-top: 8px;
      }
      .perf-table-val {
        width: 30%;
      }
      .perf-table-count {
        width: 10%;
        margin-right: 20px;
        text-align: right;
      }
      .perf-table-model {
        min-width: 100px;
        width: 100px;
      }
      .perf-table-model-single {
        display: none;
      }
      .perf-table-threshold {
        width: 280px;
        min-width: 280px;
        text-align: center;
      }
      .perf-table-error {
        width: 15%;
        text-align: right;
      }
      .perf-table-sq-error {
        width: 15%;
        text-align: right;
        margin-right: 20px;
      }
      .perf-table-fp {
        width: 15%;
        text-align: right;
      }
      .perf-table-fn {
        width: 15%;
        text-align: right;
      }
      .perf-table-acc {
        width: 15%;
        text-align: right;
        margin-right: 20px;
      }
      .perf-table-f1 {
        width: 10%;
        text-align: right;
        margin-right: 20px;
      }
      .perf-button {
        margin-top: 10px;
      }

      .perf-sort-box {
        display: flex;
        flex-direction: row-reverse;
      }
      .counterfactual-toggle {
        margin: 4px 4px 4px 6px;
        --paper-toggle-button-checked-bar-color: #81C995;
      }
      .datapoint-button {
        color: #202124;
        background: #FDE293;
      }
      .infer-button {
        color: white;
        background: #128EAF;
      }
      .flex-grow {
        flex-grow: 1;
      }
      .flex-row-reverse {
        flex-direction: row-reverse;
      }
      .threshold-info-holder {
        margin-top: -2px;
      }
      .tabs {
        padding-left: 32px;
        text-transform: none;
      }
      .rotated-icon {
        transform: rotate(270deg);
      }
      .datapoint-control-button {
        width: 28px;
        height: 28px;
        padding: 4px;
        margin-top: 4px;
      }
      .pd-holder {
        position: relative;
        width: 300px;
      }
      .pd-y-label {
        color: #5f6368;
        font-size: 12px;
        left: -20px;
        padding: 0px;
        position: absolute;
        top: 80px;
        transform: rotate(270deg);
      }
      .pd-x-label {
        bottom: 0;
        color: #5f6368;
        font-size: 12px;
        overflow: hidden;
        padding: 0 0 0 40px;
        position: absolute;
        text-align: center;
        text-overflow: ellipsis;
        width: 100%;
        white-space: nowrap;
      }
      paper-toggle-button {
        font-size: 14px;
        --paper-toggle-button-checked-button-color: white;
        --paper-toggle-button-label-color: #3C4043;
      }
    </style>
    <tf-plugin-dialog id="initialDialog"></tf-plugin-dialog>
    <paper-dialog id="inferencesettings" class="inference-settings" opened="[[!local]]">
      <tf-inference-panel inference-address="{{inferenceAddress}}" model-name="{{modelName}}" examples-path="{{examplesPath}}" model-type="{{modelType}}" model-version="{{modelVersion}}" model-signature="{{modelSignature}}" max-examples="{{maxExamples}}" label-vocab-path="{{labelVocabPath}}" multi-class="{{multiClass}}" sampling-odds="{{samplingOdds}}" sequence-examples="{{sequenceExamples}}" max-classes-to-display="{{maxInferenceEntriesPerRun}}" use-predict-api="{{usePredictApi}}" predict-output-tensor="{{predictOutputTensor}}" predict-input-tensor="{{predictInputTensor}}">
      </tf-inference-panel>
      <div class="accept-button-holder">
        <paper-button on-tap="getExamplesAndCloseSettings_" class="main-button" disabled$="[[shouldDisableGetExamplesButton_(examplesPath, maxExamples)]]">
          Accept
        </paper-button>
        <paper-button dialog-dismiss class="control-button">Cancel</paper-button>
      </div>
    </paper-dialog>
    <paper-dialog id="deletedialog">
      <p>Are you sure you want to delete the selected datapoint?
      <div class="buttons">
        <paper-button dialog-dismiss class="control-button">Cancel</paper-button>
        <paper-button dialog-confirm autofocus on-tap="deleteDatapoint_" class="main-button">Delete</paper-button>
      </div>
    </paper-dialog>
    <paper-dialog id="distancedialog">
      <h2>Show similarity to selected datapoint</h2>
      <paper-input value="{{facetDistFeatureName}}" label="Metric name" class="datapoint-control-filter-input">
      </paper-input>
      <div class="radiolabel">Distance type</div>
      <paper-radio-group class="dist-switch" selected="{{facetDistSwitch}}">
        <paper-radio-button class="dist-radio" name="L1">L1</paper-radio-button>
        <paper-radio-button class="dist-radio" name="L2">L2</paper-radio-button>
      </paper-radio-group>
      <paper-dropdown-menu label="Apply to datapoints visualization" class="threshold-dropdown distance-vis-dropdown">
        <paper-listbox class="dropdown-content" selected="{{facetDistSetting}}" attr-for-selected="name">
          <paper-item name="colorBy">Color By</paper-item>
          <paper-item name="horizontalFacet">X-Axis Binning</paper-item>
          <paper-item name="verticalFacet">Y-Axis Binning</paper-item>
          <paper-item name="horizontalPosition">X-Axis Scatter</paper-item>
          <paper-item name="verticalPosition">Y-Axis Scatter</paper-item>
        </paper-listbox>
      </paper-dropdown-menu>
      <div class="buttons">
        <paper-button dialog-dismiss class="control-button">Cancel</paper-button>
        <paper-button dialog-confirm autofocus on-tap="addDistanceMetric" class="main-button">Apply</paper-button>
      </div>
    </paper-dialog>
    <div class="dashboard-layout">
      <div class="main-vertical">
        <div class="main-content">
              <div class="main-bottom-bar">
                <div class="datapoint-left-controls-holder">
                  <paper-tabs class="tabs" noink selected="{{sideTabSelected}}">
                    <paper-tab>Datapoint editor</paper-tab>
                    <paper-tab>[[getPerformanceTabTitle(modelType, multiClass)]]</paper-tab>
                    <paper-tab>Features</paper-tab>
                  </paper-tabs>
                </div>
                <div class="datapoint-right-controls-holder">
                  <a target="_blank" href="https://github.com/tensorflow/tensorboard/tree/master/tensorboard/plugins/interactive_inference/README.md">
                    <paper-icon-button icon="help-outline" class="settings-button" title="What-If Tool documentation"></paper-icon-button>
                  </a>
                  <paper-icon-button icon="settings" on-tap="settingsClicked_" class="settings-button" title="What-If Tool settings" disabled$="[[local]]"></paper-icon-button>
                  <div class="example-status">[[exampleStatusStr]]</div>
                </div>
              </div>
              <iron-pages class="side-tabs" selected="{{sideTabSelected}}">
              <div class="datapoint-tab">
                <div class="side-holder" id="side">
                  <div class="side-content">
                    <div class="heading-and-card">
                      <button class="heading" on-tap="toggleContextTools">Visualize
                        <div class="right-side right-side-performance-tab">
                          <iron-icon icon="[[getExpandCollapseIcon(openedContextTools)]]" class="expand-collapse-button"></iron-icon>
                        </div>
                      </button>
                      <iron-collapse class="no-padding-card" id="collapsecontexttools" opened="{{openedContextTools}}">
                        <paper-radio-group selected="{{visMode}}">
                          <paper-radio-button name="dive">Datapoints</paper-radio-button>
                          <paper-radio-button name="pd">Partial dependence plots</paper-radio-button>
                        </paper-radio-group>
                        <template is="dom-if" if="[[!isRegression_(modelType)]]">
                          <div class="flex">
                            <div title="Select a datapoint to use this feature">
                              <paper-toggle-button class="counterfactual-toggle" checked="{{showNearestCounterfactual}}" disabled$="[[!hasSelected(selectedExampleAndInference)]]">
                                Show nearest counterfactual datapoint
                              </paper-toggle-button>
                            </div>
                            <paper-radio-group selected="{{nearestCounterfactualDist}}">
                              <paper-radio-button name="L1">L1</paper-radio-button>
                              <paper-radio-button name="L2">L2</paper-radio-button>
                            </paper-radio-group>
                            <paper-dropdown-menu label="Model:" no-label-float class="counterfactual-dropdown" hidden$="[[shouldHideCounterfactualModelSelector_(parsedModelNames)]]">
                              <paper-listbox class="dropdown-content" selected="{{nearestCounterfactualModelIndex}}">
                                <template is="dom-repeat" items="[[parsedModelNames]]">
                                  <paper-item>[[getCounterfactualModelName_(item)]]</paper-item>
                                </template>
                              </paper-listbox>
                            </paper-dropdown-menu>
                            <paper-icon-button icon="info-outline" class="info-icon cf-info-icon no-padding" on-tap="openDialog">
                            </paper-icon-button>
                            <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="auto">
                              <div class="dialog-title">Nearest counterfactual (neighbor of different classification)</div>
                              <div>Compares the selected datapoint with its nearest neighbor from a different classification using L1 or L2 distance.</div>
                            </paper-dialog>
                          </div>
                        </template>
                        <div title="Select a datapoint to use this feature">
                          <div class="flex">
                            <paper-button class="control-button datapoint-button" disabled$="[[!hasSelected(selectedExampleAndInference)]]" on-tap="showDistanceClicked_" alt="Show similarity to selected datapoint" title="Show similarity to selected datapoint">
                                Show similarity to selected datapoint
                            </paper-button>
                            <paper-icon-button icon="info-outline" class="info-icon cf-info-icon no-padding" on-tap="openDialog">
                            </paper-icon-button>
                            <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="auto">
                              <div class="dialog-title">Show similarity to selected datapoint</div>
                              <div>
                                Calculates the distance between the selected datapoint and all other datapoints and shows this
                                in the datapoints visualization.
                              </div>
                            </paper-dialog>
                          </div>
                        </div>
                      </iron-collapse>
                    </div>
                    <div class="heading-and-card editor-heading-and-card">
                      <button class="heading">[[getDatapointEditorTitle(selectedExampleNum, comparedIndices)]]
                      </button>
                      <div class="no-padding-card">
                        <div class="datapoint-controls-holder datapoint-control-buttons-holder">
                          <div class="datapoint-left-controls-holder">
                            <paper-icon-button class="datapoint-control-button" icon="chevron-left" disabled$="[[!hasSelected(selectedExampleAndInference)]]" on-tap="selectPrevDatapoint_" alt="select previous datapoint" title="Select previous datapoint">
                            </paper-icon-button>
                            <paper-icon-button class="datapoint-control-button" icon="chevron-right" disabled$="[[!hasSelected(selectedExampleAndInference)]]" on-tap="selectNextDatapoint_" alt="select next datapoint" title="Select next datapoint">
                            </paper-icon-button>
                            <div title="Edit a datapoint to use this feature">
                              <paper-icon-button class="datapoint-control-button" icon="history" on-tap="resetDatapoint_" alt="undo changes" title="Undo changes" disabled$="[[shouldDisableReset_(selectedExampleAndInference.changed)]]">
                              </paper-icon-button>
                            </div>
                            <div title="Select a datapoint to use this feature">
                              <paper-icon-button class="datapoint-control-button" icon="content-copy" disabled$="[[!hasSelected(selectedExampleAndInference)]]" on-tap="copyDatapoint_" alt="duplicate datapoint" title="Duplicate datapoint">
                              </paper-icon-button>
                            </div>
                            <div title="Select a datapoint to use this feature">
                              <paper-icon-button class="datapoint-control-button" icon="delete" disabled$="[[!hasSelected(selectedExampleAndInference)]]" on-tap="deleteDatapointDialog_" alt="delete datapoint" title="Delete datapoint">
                              </paper-icon-button>
                            </div>
                            <div class="control-divider"></div>
                            <paper-input value="{{featureSearchValue}}" label="Search features" class="datapoint-control-filter-input feature-search-input" disabled$="[[!hasSelected(selectedExampleAndInference)]]" no-label-float>
                              <iron-icon icon="icons:search" prefix></iron-icon>
                            </paper-input>
                          </div>
                          <div class="datapoint-right-controls-holder">
                          </div>
                        </div>
                        <template is="dom-if" if="[[hasSelected(selectedExampleAndInference)]]">
                          <div class="example-and-inference-holder">
                            <vz-example-viewer class="example-holder" json="{{selectedExampleAndInference.example}}" compare-json="{{counterfactualExampleAndInference.example}}" on-example-change="exampleChange_" id="viewer" display-mode="[[exampleDisplayMode]]" feature-search-value="{{featureSearchValue}}" compare-title="[[compareTitle]]" saliency="[[attribution]]" show-saliency readonly="[[!areExamplesEditable_(modelName, inferenceAddress)]]">
                            </vz-example-viewer>
                          </div>
                        </template>
                        <template is="dom-if" if="[[!hasSelected(selectedExampleAndInference)]]">
                          <div class="datapoint-info-holder">
                            <div class="datapoint-info-content">
                              <div class="flex space-between">
                                <div class="onboarding-header">Select a datapoint to begin exploring model behavior for your selection.</div>
                              </div>
                              <div class="onboarding-text">
                                <span class="bold">Edit and Infer:</span>
                                Edit your datapoint here and run inference in the Infer table to see differences in model behavior.
                              </div>
                              <div class="onboarding-text">
                                <span class="bold">Visualize:</span>
                                Switch between visualizing datapoints and exploring partial dependence plots to gain insights into your
                                model's behavior. Explore counterfactuals or see how similar (or different) the rest of your dataset is from
                                your selection.
                              </div>
                            </div>
                          </div>
                        </template>
                      </div>
                    </div>
                    <div class="inference-section-holder">
                      <div class="inference-section">
                        <button class="inference-header heading" on-tap="toggleInferenceResults">
                          <div class="flex">
                            <div>[[getInferTitle(selectedExampleNum, comparedIndices)]]</div>
                            <div class="right-side right-side-performance-tab">
                              <iron-icon icon="[[getExpandCollapseIcon(openedInferenceResults)]]" class="expand-collapse-button"></iron-icon>
                            </div>
                          </div>
                        </button>
                        <iron-collapse class="no-padding-card" id="collapseinference" opened="{{openedInferenceResults}}">
                          <div title="Edit a datapoint to use this feature">
                            <paper-button on-tap="inferClicked_" class="control-button infer-button flex-grow" disabled$="[[shouldDisableInferButton_(examplesAndInferences, modelName, inferenceAddress, updatedExample)]]">
                              Run inference
                            </paper-button>
                          </div>
                          <div class="flex">
                            <template is="dom-if" if="[[hasSelected(selectedExampleAndInference)]]">
                              <tf-inference-viewer class="inference-viewer" inferences="[[selectedExampleAndInference.inferences]]" id$="[[getInferenceHolderId_()]]" model-type="[[modelType]]" model-names="[[parsedModelNames]]" max-entries-per-run="[[maxInferenceEntriesPerRun]]">
                              </tf-inference-viewer>
                            </template>
                            <template is="dom-if" if="[[counterfactualExampleAndInference]]">
                              <tf-inference-viewer class="inference-viewer compare-inference-viewer" inferences="[[counterfactualExampleAndInference.inferences]]" model-type="[[modelType]]" model-names="[[parsedModelNames]]" max-entries-per-run="[[maxInferenceEntriesPerRun]]">
                              </tf-inference-viewer>
                            </template>
                          </div>
                        </iron-collapse>
                      </div>
                    </div>
                    </div>
                    <div class="resizer" id="resizer">
                      <iron-icon icon="av:pause" class="resize-icon"></iron-icon>
                    </div>
                  </div>
                  <div class="center" id="center">
                    <facets-dive id="dive" data="[[visdata]]" selected-indices="[[selected]]" compared-indices="[[comparedIndices]]" on-selected-indices-changed="selectedIndicesChanged_" on-stats-changed="statsChanged_" hide-info-card="true" sprite-image-width="32" sprite-image-height="32" fit-grid-aspect-ratio-to-viewport="true" stable-colors="true">
                    </facets-dive>
                    <div id="noexamples" class="noexamples info-text">
                      Datapoints and their inference results will be displayed here.
                    </div>
                    <paper-spinner-lite id="spinner" hidden active></paper-spinner-lite>
                    <div class="feature-container-holder" id="partialplotholder">
                      <div class="pd-plots-header">
                        <div class="flex">
                          <div class="pd-info-text">Partial Dependence Plots</div>
                          <paper-icon-button icon="info-outline" class="info-icon pd-info-icon no-padding" on-tap="openDialog">
                          </paper-icon-button>
                          <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="auto">
                            <div class="dialog-title">Partial Dependence Plots</div>
                            <div>Partial dependence plots visualize the change in inference results for every feature,
                              as the value for that feature is changed to different valid values.
                            </div>
                            <div>For numeric features, you can set the minimum and maximum values to plot.</div>
                            <div>For string features, the most popular feature values are shown as alternatives to
                              the feature value for the selected datapoint.
                            </div>
                            <div>For features with multiple feature values per datapoint, a single plot is shown for for
                              each feature value in the selected datapoint. You can override which feature values have
                              plots created for them by specifying the indices to shown partial dependence plots for,
                              if the datapoint contains multiple feature values for a feature.
                            </div>
                            <div>When the global toggle is turned on, the plots show the average effect of repeatedly
                              changing a single feature across all datapoints. When it is turned off, the plots show the
                              effect of a repeatedly changing a single feature on the selected datapoint.
                            </div>
                          </paper-dialog>
                        </div>
                        <paper-toggle-button class="pd-toggle" checked="{{globalPdPlots}}" on-change="hideAllPdElements_" disabled$="[[!hasSelected(selectedExampleAndInference)]]">
                          Global partial dependence plots
                        </paper-toggle-button>
                      </div>
                      <template is="dom-if" if="[[!areTherePdPlotFeatures_(partialDepPlotEligibleFeatures)]]">
                        <div class="pd-no-features-text">The loaded dataset has no features to show partial dependence plots for.</div>
                      </template>
                      <div class="pdplots-holder">
                        <template is="dom-repeat" items="[[partialDepPlotEligibleFeatures]]">
                          <div class="feature-container" data-feature-name$="[[item.name]]">
                            <div class="perf-table-entry perf-table-row">
                              <div class="perf-table-arrow">
                                <paper-icon-button class="pd-row-arrow rotated-icon" icon="arrow-drop-down" on-tap="categoryPaneClicked"></paper-icon-button>
                              </div>
                              <div class="perf-table-val perf-table-clickable tf-category-pane perf-table-text-entry" on-tap="categoryPaneClicked">[[item.name]]
                              </div>
                            </div>
                            <div class="pd-entry-container perf-table-entry-expanded" hidden>
                              <div class="pd-input-container" hidden$="[[shouldHidePdInputContainer(item.samples, item.name, selected)]]">
                                  <div class="range-input-container" hidden$="[[item.samples]]">
                                    <div class="info-text" title="The range of values to test (default values are automatically inferred).">
                                      Set range of values to test
                                    </div>
                                    <div class="flex">
                                      <input type="number" class="style-input x-min pd-range-control" value="[[item.observedMin]]" title="The minimum value to test (default value is automatically inferred)." on-input="pdInputChanged">
                                      <div class="pd-range-hyphen">-</div>
                                      <input type="number" class="style-input x-max pd-range-control" value="[[item.observedMax]]" title="The maximum value to test (default value is automatically inferred)." on-input="pdInputChanged">
                                    </div>
                                  </div>
                                  <div class="feature-index-container" hidden$="[[shouldHideFeatureIndicesSelector(item.name, selected)]]" title="An optional printer-page-style pattern like '0,2,4-6' to select the indices of the feature values to generate plots for. Useful for features with many repeated fields.">
                                    <div class="info-text">
                                      Set feature indices <i>(optional)</i>
                                    </div>
                                    <input type="text" class="style-input feature-index-pattern pd-range-control" on-input="pdInputChanged">
                                  </div>
                              </div>
                              <div class="tf-category-pane-content"></div>
                            </div>
                          </div>
                        </template>
                      </div>
                      </div>
                    </div>
              </div>
                <div class="config-tab">
                  <div class="config-side-content">
                    <div class="heading-and-card">
                      <button class="inference-header heading" on-tap="toggleTrueLabelSetup">Configure
                        <div class="right-side right-side-performance-tab">
                          <iron-icon icon="[[getExpandCollapseIcon(openedTrueLabel)]]" class="expand-collapse-button"></iron-icon>
                        </div>
                      </button>
                      <iron-collapse class="card" id="collapsetruelabel" opened="{{openedTrueLabel}}">
                        <template is="dom-if" if="[[shouldShowLabelDropdown_(stats)]]">
                          <div class="flex">
                            <paper-dropdown-menu label="Ground Truth Feature" class="threshold-dropdown">
                              <paper-listbox class="dropdown-content" selected="{{selectedLabelFeature}}" attr-for-selected="name">
                                <template is="dom-repeat" items="[[getFeatureList_(stats)]]">
                                  <paper-item name="[[item]]">[[getFeatureName_(item)]]</paper-item>
                                </template>
                              </paper-listbox>
                            </paper-dropdown-menu>
                            <div>
                              <div class="help-title help-title-margin">What is ground truth?</div>
                              <div class="help-text">
                                <div>The feature that your model is trying to predict.
                                  <span class="dialog-link" on-tap="openDialog">More.
                                    <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="auto">
                                      <div class="dialog-title">Ground Truth Feature</div>
                                      <div>If the datapoints contain a feature that represents the ground truth for what the model is attempting
                                        to predict, then selecting that feature here allows the tool to investigate the performance of
                                        the model by comparing the model's results to the ground truth feature.
                                      </div>
                                    </paper-dialog>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                          <template is="dom-if" if="[[shouldShowCostRatio_(selectedLabelFeature, modelType, multiClass)]]">
                            <div class="flex">
                              <paper-input value="{{incorrectPredCostRatio}}" label="Cost Ratio (FP/FN)" type="number" class="threshold-cost-input">
                              </paper-input>
                              <div>
                                <div class="help-title help-title-margin">What is cost ratio?</div>
                                <div class="help-text">
                                  <div>The cost of false positives relative to false negatives. Required for optimization.
                                    <span class="dialog-link" on-tap="openDialog">More.
                                      <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="auto">
                                        <div class="dialog-title">What is cost ratio?</div>
                                        <div>This tells the tool how to optimize the classification thresholds when you use the optimization strategy controls.</div>
                                        <div>1.00 = false positives are equally as costly as false negatives.</div>
                                        <div>4.00 = false positives are 4 times more costly than false negatives</div>
                                        <div>0.25 = false negatives are 4 times more costly than false positives.</div>
                                      </paper-dialog>
                                    </span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </template>
                          <template is="dom-if" if="[[shouldShowFeatureDropdown_(stats)]]">
                            <div class="flex">
                              <paper-dropdown-menu label="Slice by" class="threshold-dropdown">
                                <paper-listbox class="dropdown-content" selected="{{selectedBreakdownFeature}}" attr-for-selected="name">
                                  <template is="dom-repeat" items="[[getFeatureList_(stats)]]">
                                    <paper-item name="[[item]]">[[getFeatureName_(item)]]</paper-item>
                                  </template>
                                </paper-listbox>
                              </paper-dropdown-menu>
                              <div>
                                <div class="help-title help-title-margin">What does slicing do?</div>
                                <div class="help-text">
                                  <div>Shows performance for each value of the selected feature.</div>
                                </div>
                              </div>
                            </div>
                            <div class="flex">
                              <template is="dom-if" if="[[shouldShowSecondFeatureDropdown_(selectedBreakdownFeature)]]">
                                <paper-dropdown-menu label="Slice by (secondary)" class="threshold-dropdown">
                                  <paper-listbox class="dropdown-content" selected="{{selectedSecondBreakdownFeature}}" attr-for-selected="name">
                                    <template is="dom-repeat" items="[[getFeatureList_(stats)]]">
                                      <paper-item name="[[item]]">[[getFeatureName_(item)]]</paper-item>
                                    </template>
                                  </paper-listbox>
                                </paper-dropdown-menu>
                              </template>
                            </div>
                          </template>
                        </template>
                      </iron-collapse>
                    </div>
                    <template is="dom-if" if="[[isBinaryClassification_(modelType, multiClass)]]">
                      <div class="heading-and-card">
                        <button class="inference-header heading" on-tap="toggleExplorerSetup">Fairness
                          <div class="right-side right-side-performance-tab">
                            <iron-icon icon="[[getExpandCollapseIcon(openedExplorer)]]" class="expand-collapse-button"></iron-icon>
                          </div>
                        </button>
                        <iron-collapse class="card" id="collapseexplorer" opened="{{openedExplorer}}">
                          <template is="dom-if" if="[[shouldShowFeatureDropdown_(stats)]]">
                            <div class="control-info-header help-title-margin-button">Apply an optimization strategy</div>
                            <div class="control-info-text">Select a strategy to set classification thresholds based on the set cost ratio and data slices.
                              Manually altering thresholds or changing cost ratio will default back to custom thresholds.
                            </div>
                            <paper-radio-group class="optimization-radio-group" selected="{{optimizationSelected}}">
                              <paper-radio-button name="custom" class="optimization-radio" id="customthresh">Custom thresholds
                                <paper-icon-button icon="info-outline" class="info-icon thresh-info-icon no-padding" on-tap="openDialog">
                                </paper-icon-button>
                                <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="bottom">
                                  <div class="dialog-title">Custom thresholds</div>
                                  <div>
                                    Set your own thresholds using the threshold sliders.
                                  </div>
                                </paper-dialog>
                              </paper-radio-button>
                              <paper-radio-button name="unaware" class="optimization-radio">Single threshold
                                <paper-icon-button icon="info-outline" class="info-icon thresh-info-icon no-padding" on-tap="openDialog">
                                </paper-icon-button>
                                <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="bottom">
                                  <div class="dialog-title">Single threshold</div>
                                  <div>
                                    Optimize a single threshold for all datapoints based on the specified cost ratio.
                                  </div>
                                </paper-dialog>
                              </paper-radio-button>
                              <paper-radio-button name="demoparity" class="optimization-radio" disabled$="[[!shouldShowFeaturePrCharts_(selectedLabelFeature, selectedBreakdownFeature, inferences)]]">Demographic parity
                                <paper-icon-button icon="info-outline" class="info-icon thresh-info-icon no-padding" on-tap="openDialog">
                                </paper-icon-button>
                                <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="bottom">
                                  <div class="dialog-title">Demographic parity</div>
                                  <div>
                                    Optimize a threshold per slice based on the specified cost ratio, ensuring the different slices achieve
                                    demographic party.
                                  </div>
                                  <div>
                                    Demographic parity means that similar percentages of datapoints from each slice are predicted as positive classifications.
                                  </div>
                                </paper-dialog>
                              </paper-radio-button>
                              <paper-radio-button name="equalopp" class="optimization-radio" disabled$="[[!shouldShowFeaturePrCharts_(selectedLabelFeature, selectedBreakdownFeature, inferences)]]">Equal opportunity
                                <paper-icon-button icon="info-outline" class="info-icon thresh-info-icon no-padding" on-tap="openDialog">
                                </paper-icon-button>
                                <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="bottom">
                                  <div class="dialog-title">Equal opportunity</div>
                                  <div>
                                    Optimize a threshold per slice based on the specified cost ratio, ensuring the different slices achieve
                                    equal opportunity.
                                  </div>
                                  <div>
                                    Equal opportunity means that among those predicted as positive classifications, there is a similar percentage of
                                    correct predictions in each slice.
                                  </div>
                                </paper-dialog>
                              </paper-radio-button>
                              <paper-radio-button name="equalacc" class="optimization-radio" disabled$="[[!shouldShowFeaturePrCharts_(selectedLabelFeature, selectedBreakdownFeature, inferences)]]">Equal accuracy
                                <paper-icon-button icon="info-outline" class="info-icon thresh-info-icon no-padding" on-tap="openDialog">
                                </paper-icon-button>
                                <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="bottom">
                                  <div class="dialog-title">Equal accuracy</div>
                                  <div>
                                    Optimize a threshold per slice based on the specified cost ratio, ensuring the different slices achieve
                                    equal accuracy.
                                  </div>
                                  <div>
                                    Equal accuracy means that there is a similar percentage of correct predictions in each slice.
                                  </div>
                                </paper-dialog>
                              </paper-radio-button>
                              <paper-radio-button name="group" class="optimization-radio" disabled$="[[!shouldShowFeaturePrCharts_(selectedLabelFeature, selectedBreakdownFeature, inferences)]]">Group thresholds
                                <paper-icon-button icon="info-outline" class="info-icon thresh-info-icon no-padding" on-tap="openDialog">
                                </paper-icon-button>
                                <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="bottom">
                                  <div class="dialog-title">Group thresholds</div>
                                  <div>
                                    Optimize a separate threshold for each slice based on the specified cost ratio.
                                  </div>
                                </paper-dialog>
                              </paper-radio-button>
                            </paper-radio-group>
                          </template>
                        </iron-collapse>
                      </div>
                    </template>
                </div>
                <div class="config-main-content">
                  <template is="dom-if" if="[[isBinaryClassification_(modelType, multiClass)]]" restamp>
                    <div class="perf-table-title-row">
                      <div class="flex">
                        <div class="perf-table-title">[[getPerfTableTitle(selectedBreakdownFeature, selectedSecondBreakdownFeature, optimizationSelected, featureValueThresholds)]]</div>
                        <paper-icon-button icon="info-outline" class="info-icon performance-info-icon no-padding" on-tap="openDialog">
                        </paper-icon-button>
                        <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="auto">
                          <div class="dialog-title">Classification Performance Table</div>
                          <div>Set the ground truth feature to explore model performance including ROC curves and confusion matrices.</div>
                          <div>Slice the dataset by features and explore model performance by slice.</div>
                          <div>Use the fairness optimization strategies and see the impact on the thresholds and performance of the individual slices.</div>
                        </paper-dialog>
                      </div>
                      <div class="perf-sort-box">
                        <div>
                          <paper-icon-button icon="unfold-more" class="perf-button" on-tap="expandAllPerformance" alt="expand all slices" title="Expand all slices">
                          </paper-icon-button>
                          <paper-icon-button icon="unfold-less" class="perf-button" on-tap="collapseAllPerformance" alt="collapse all slices" title="Collapse all slices">
                          </paper-icon-button>
                        </div>
                        <paper-dropdown-menu label="Sort by" class="threshold-dropdown perf-table-sort-menu">
                          <paper-listbox class="dropdown-content" selected="{{selectedFeatureSort}}" attr-for-selected="name">
                            <template is="dom-repeat" items="[[getFeatureSortBy(modelType, multiClass)]]">
                              <paper-item name="[[item]]">[[item]]</paper-item>
                            </template>
                          </paper-listbox>
                        </paper-dropdown-menu>
                      </div>
                    </div>
                    <div class="perf-table-header">
                      <div class="perf-table-arrow">
                        <iron-icon class="expand-collapse-button"></iron-icon>
                      </div>
                      <div class="perf-table-val">Feature Value</div>
                      <div class="perf-table-count">Count</div>
                      <div class$="[[getPerfTableModelClass(numModels)]]">Model</div>
                      <div class="perf-table-threshold flex">
                        <div>Threshold</div>
                        <div class="threshold-info-holder">
                          <paper-icon-button icon="info-outline" class="info-icon threshold-info-icon no-padding" on-tap="openDialog">
                          </paper-icon-button>
                          <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="auto">
                            <div class="dialog-title">Exploring Classification Performance</div>
                            <div>Use this slider to adjust the classification threshold for this slice. Inference values at or
                              above this threshold are considered a positive classification, while inference values below this
                              threshold are considered a negative classification.
                            </div>
                          </paper-dialog>
                        </div>
                      </div>
                      <div class="perf-table-fp">False Positives (%)</div>
                      <div class="perf-table-fn">False Negatives (%)</div>
                      <div class="perf-table-acc">Accuracy (%)</div>
                      <div class="perf-table-f1">F1</div>
                    </div>
                    <div class="perf-table-entries-holder">
                      <template is="dom-repeat" items="[[featureValueThresholds]]" as="featureValueThreshold">
                        <div class="perf-table-entry">
                            <div class$="[[getPerfTableRowClass(featureValueThreshold.opened)]]" data-index$="[[index]]">
                              <div class="perf-table-arrow">
                                <paper-icon-button class$="[[getExpandCollapsePerfIconClass(featureValueThreshold.opened)]]" icon="arrow-drop-down" on-tap="togglePerfRow"></paper-icon-button>
                              </div>
                              <div class="perf-table-val perf-table-clickable perf-table-text-entry" on-tap="togglePerfRow">[[getPrintableValue_(featureValueThreshold)]]</div>
                              <div class="perf-table-count perf-table-clickable perf-table-num-entry" on-tap="togglePerfRow">[[getFeatureValueCount(inferenceStats_, featureValueThreshold.threshold, featureValueThreshold)]]</div>
                              <div class$="[[getPerfTableModelClass(numModels)]]" on-tap="togglePerfRow">
                                <template is="dom-repeat" items="{{featureValueThreshold.threshold}}">
                                  <div class="perf-table-text-entry perf-table-clickable">[[getModelName_(index)]]</div>
                                </template>
                              </div>
                              <div class="perf-table-threshold">
                                <template is="dom-repeat" items="{{featureValueThreshold.threshold}}">
                                    <paper-slider class$="[[getSliderClass(index)]]" editable="true" min="0" max="1" step="0.01" immediate-value="{{item.threshold}}" value="[[item.threshold]]" on-value-changed="refreshInferencesNoRegen_" on-down="resetOptimizationSelected_">
                                    </paper-slider>
                                </template>
                              </div>
                              <div class="perf-table-fp perf-table-clickable" on-tap="togglePerfRow">
                                <template is="dom-repeat" items="{{featureValueThreshold.threshold}}">
                                  <div class="perf-table-num-entry">[[getFPModelIndex(inferenceStats_, featureValueThreshold.threshold, index, featureValueThreshold)]]</div>
                                </template>
                              </div>
                              <div class="perf-table-fn perf-table-clickable" on-tap="togglePerfRow">
                                <template is="dom-repeat" items="{{featureValueThreshold.threshold}}">
                                  <div class="perf-table-num-entry">[[getFNModelIndex(inferenceStats_, featureValueThreshold.threshold, index, featureValueThreshold)]]</div>
                                </template>
                              </div>
                              <div class="perf-table-acc perf-table-clickable" on-tap="togglePerfRow">
                                <template is="dom-repeat" items="{{featureValueThreshold.threshold}}">
                                  <div class="perf-table-num-entry">[[getAccuracyModelIndex(inferenceStats_, featureValueThreshold.threshold, index, featureValueThreshold)]]</div>
                                </template>
                              </div>
                              <div class="perf-table-f1 perf-table-clickable" on-tap="togglePerfRow">
                                <template is="dom-repeat" items="{{featureValueThreshold.threshold}}">
                                  <div class="perf-table-num-entry">[[getF1ModelIndex(inferenceStats_, featureValueThreshold.threshold, index, featureValueThreshold)]]</div>
                                </template>
                              </div>
                            </div>
                        </div>
                        <iron-collapse opened="{{featureValueThreshold.opened}}">
                          <div class="perf-table-entry-expanded flex-row-reverse">
                            <template is="dom-if" if="[[shouldShowFeaturePrCharts_(selectedLabelFeature, selectedBreakdownFeature, inferences)]]">
                              <div class="conf-matrix-holder">
                                <div class="conf-text">Confusion matrix</div>
                                <template is="dom-repeat" items="{{featureValueThreshold.threshold}}">
                                  <tf-confusion-matrix counts="[[getConfusionCountsModelIndex(inferenceStats_, featureValueThreshold.threshold, index, featureValueThreshold)]]" label="[[getConfusionMatrixLabel(index, numModels)]]" background="[[getConfusionMatrixColor(index)]]" all-items="[[allConfMatrixLabels]]" class="conf-matrix">
                                  </tf-confusion-matrix>
                                </template>
                              </div>
                              <div class="curves-holder">
                                <div class="curve-holder">
                                  <div class="roc-text">ROC curve
                                    <paper-icon-button icon="info-outline" class="info-icon threshold-info-icon no-padding" on-tap="openDialog">
                                    </paper-icon-button>
                                    <paper-dialog class="dialog-text" horizontal-align="right" vertical-align="bottom">
                                      <div class="dialog-title">ROC curve</div>
                                      <div>A receiver operating characteristic (ROC) curve plots the true positive rate (TPR) against the
                                        false positive rate (FPR) at various classification thresholds.
                                      </div>
                                    </paper-dialog>
                                  </div>
                                  <div class="roc-x-label">False positive rate</div>
                                  <div class="roc-y-label">True positive rate</div>
                                  <vz-line-chart id="[[getRocChartId(index)]]" class="pr-line-chart" x-axis-formatter="[[getSimpleAxisFormatter(axisPrecision)]]" y-axis-formatter="[[getSimpleAxisFormatter(axisPrecision)]]">
                                  </vz-line-chart>
                                </div>
                                <div class="curve-holder">
                                  <div class="roc-text">PR curve
                                    <paper-icon-button icon="info-outline" class="info-icon threshold-info-icon no-padding" on-tap="openDialog">
                                    </paper-icon-button>
                                    <paper-dialog class="dialog-text" horizontal-align="right" vertical-align="bottom">
                                      <div class="dialog-title">PR curve</div>
                                      <div>A precision-recall (PR) curve plots precision against
                                        recall at various classification thresholds.
                                      </div>
                                    </paper-dialog>
                                  </div>
                                  <div class="pr-x-label">Recall</div>
                                  <div class="pr-y-label">Precision</div>
                                  <vz-line-chart id="[[getPrChartId(index)]]" class="pr-line-chart" x-axis-formatter="[[getSimpleAxisFormatter(axisPrecision)]]" y-axis-formatter="[[getSimpleAxisFormatter(axisPrecision)]]">
                                  </vz-line-chart>
                                </div>
                              </div>
                            </template>
                          </div>
                        </iron-collapse>
                      </template>
                      <template is="dom-if" if="[[shouldShowOverallThresholder_(selectedBreakdownFeature)]]">
                        <div class="perf-table-entry">
                          <div class="perf-table-row-expanded">
                            <div class="perf-table-arrow">
                              <paper-icon-button icon="arrow-drop-down" on-tap="togglePerfRow" disabled></paper-icon-button>
                            </div>
                            <div class="perf-table-val perf-table-text-entry">All datapoints</div>
                            <div class="perf-table-count perf-table-num-entry">[[getFeatureValueCount(inferenceStats_, overallThresholds)]]</div>
                            <div class$="[[getPerfTableModelClass(numModels)]]">
                              <template is="dom-repeat" items="{{overallThresholds}}">
                                <div class="perf-table-text-entry">[[getModelName_(index)]]</div>
                              </template>
                            </div>
                            <div class="perf-table-threshold">
                              <template is="dom-repeat" items="{{overallThresholds}}">
                                  <paper-slider class$="[[getSliderClass(index)]]" editable="true" min="0" max="1" step="0.01" immediate-value="{{item.threshold}}" value="[[item.threshold]]" on-value-changed="refreshInferencesNoRegen_" on-down="resetOptimizationSelected_">
                                  </paper-slider>
                              </template>
                            </div>
                            <div class="perf-table-fp">
                              <template is="dom-repeat" items="{{overallThresholds}}">
                                <div class="perf-table-num-entry">[[getFPModelIndex(inferenceStats_, overallThresholds, index)]]</div>
                              </template>
                            </div>
                            <div class="perf-table-fn">
                              <template is="dom-repeat" items="{{overallThresholds}}">
                                <div class="perf-table-num-entry">[[getFNModelIndex(inferenceStats_, overallThresholds, index)]]</div>
                              </template>
                            </div>
                            <div class="perf-table-acc">
                              <template is="dom-repeat" items="{{overallThresholds}}">
                                <div class="perf-table-num-entry">[[getAccuracyModelIndex(inferenceStats_, overallThresholds, index)]]</div>
                              </template>
                            </div>
                            <div class="perf-table-f1">
                              <template is="dom-repeat" items="{{overallThresholds}}">
                                <div class="perf-table-num-entry">[[getF1ModelIndex(inferenceStats_, overallThresholds, index)]]</div>
                              </template>
                            </div>
                          </div>
                        </div>
                        <div class="perf-table-entry-expanded flex-row-reverse">
                          <template is="dom-if" if="[[shouldShowOverallPrChart_(selectedLabelFeature, selectedBreakdownFeature, inferences)]]">
                            <div class="conf-matrix-holder">
                              <div class="conf-text">Confusion matrix</div>
                              <template is="dom-repeat" items="{{overallThresholds}}">
                                <tf-confusion-matrix counts="[[getConfusionCountsModelIndex(inferenceStats_, overallThresholds, index)]]" label="[[getConfusionMatrixLabel(index, numModels)]]" background="[[getConfusionMatrixColor(index)]]" all-items="[[allConfMatrixLabels]]" class="conf-matrix">
                                </tf-confusion-matrix>
                              </template>
                            </div>
                            <div class="curves-holder">
                              <div class="curve-holder">
                                <div class="roc-text">ROC curve
                                  <paper-icon-button icon="info-outline" class="info-icon threshold-info-icon no-padding" on-tap="openDialog">
                                  </paper-icon-button>
                                  <paper-dialog class="dialog-text" horizontal-align="right" vertical-align="bottom">
                                    <div class="dialog-title">ROC curve</div>
                                    <div>A receiver operating characteristic (ROC) curve plots the true positive rate (TPR) against the
                                      false positive rate (FPR) at various classification thresholds.
                                    </div>
                                  </paper-dialog>
                                </div>
                                <div class="roc-x-label">False positive rate</div>
                                <div class="roc-y-label">True positive rate</div>
                                <vz-line-chart id="rocchart" class="pr-line-chart" x-axis-formatter="[[getSimpleAxisFormatter(axisPrecision)]]" y-axis-formatter="[[getSimpleAxisFormatter(axisPrecision)]]">
                                </vz-line-chart>
                              </div>
                              <div class="curve-holder">
                                <div class="roc-text">PR curve
                                  <paper-icon-button icon="info-outline" class="info-icon threshold-info-icon no-padding" on-tap="openDialog">
                                  </paper-icon-button>
                                  <paper-dialog class="dialog-text" horizontal-align="right" vertical-align="bottom">
                                    <div class="dialog-title">PR curve</div>
                                    <div>A precision-recall (PR) curve plots precision against
                                      recall at various classification thresholds.
                                    </div>
                                  </paper-dialog>
                                </div>
                                <div class="pr-x-label">Recall</div>
                                <div class="pr-y-label">Precision</div>
                                <vz-line-chart id="prchart" class="pr-line-chart" x-axis-formatter="[[getSimpleAxisFormatter(axisPrecision)]]" y-axis-formatter="[[getSimpleAxisFormatter(axisPrecision)]]">
                                </vz-line-chart>
                              </div>
                            </div>
                          </template>
                        </div>
                      </template>
                    </div>
                  </template>
                  <template is="dom-if" if="[[isMultiClass_(modelType, multiClass)]]" restamp>
                    <div class="perf-table-title-row">
                      <div class="flex">
                        <div class="perf-table-title">[[getNoThresholdPerfTableTitle(selectedBreakdownFeature, selectedSecondBreakdownFeature, featureValueThresholds)]]</div>
                        <paper-icon-button icon="info-outline" class="info-icon performance-info-icon no-padding" on-tap="openDialog">
                        </paper-icon-button>
                        <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="auto">
                          <div class="dialog-title">Classification Performance Table</div>
                          <div>Set the ground truth feature to explore model performance including confusion matrices.</div>
                          <div>Slice the dataset and explore model performance by slice.</div>
                        </paper-dialog>
                      </div>
                      <div class="perf-sort-box">
                        <div>
                          <paper-icon-button icon="unfold-more" class="perf-button" on-tap="expandAllPerformance" alt="expand all slices" title="Expand all slices">
                          </paper-icon-button>
                          <paper-icon-button icon="unfold-less" class="perf-button" on-tap="collapseAllPerformance" alt="collapse all slices" title="Collapse all slices">
                          </paper-icon-button>
                        </div>
                        <paper-dropdown-menu label="Sort by" class="threshold-dropdown perf-table-sort-menu">
                          <paper-listbox class="dropdown-content" selected="{{selectedFeatureSort}}" attr-for-selected="name">
                            <template is="dom-repeat" items="[[getFeatureSortBy(modelType, multiClass)]]">
                              <paper-item name="[[item]]">[[item]]</paper-item>
                            </template>
                          </paper-listbox>
                        </paper-dropdown-menu>
                      </div>
                    </div>
                    <div class="perf-table-header">
                      <div class="perf-table-arrow"></div>
                      <div class="perf-table-val">Feature Value</div>
                      <div class="perf-table-count">Count</div>
                      <div class$="[[getPerfTableModelClass(numModels)]]">Model</div>
                      <div class="perf-table-acc">Accuracy</div>
                    </div>
                    <div class="perf-table-entries-holder">
                      <template is="dom-repeat" items="[[featureValueThresholds]]" as="featureValueThreshold">
                        <div class="perf-table-entry">
                          <div class$="[[getPerfTableRowClass(featureValueThreshold.opened)]]" data-index$="[[index]]">
                            <div class="perf-table-arrow">
                              <paper-icon-button class$="[[getExpandCollapsePerfIconClass(featureValueThreshold.opened)]]" icon="arrow-drop-down" on-tap="togglePerfRow"></paper-icon-button>
                            </div>
                            <div class="perf-table-val perf-table-clickable perf-table-text-entry" on-tap="togglePerfRow">[[getPrintableValue_(featureValueThreshold)]]</div>
                            <div class="perf-table-count perf-table-num-entry perf-table-clickable perf-table-text-entry" on-tap="togglePerfRow">
                              [[getMultiClassFeatureValueCount(inferenceStats_, featureValueThreshold)]]</div>
                            <div class$="[[getPerfTableModelClass(numModels)]]" on-tap="togglePerfRow">
                              <template is="dom-repeat" items="{{featureValueThreshold.threshold}}">
                                <div class="perf-table-text-entry perf-table-clickable">[[getModelName_(index)]]</div>
                              </template>
                            </div>
                            <div class="perf-table-acc perf-table-clickable" on-tap="togglePerfRow">
                              <template is="dom-repeat" items="{{featureValueThreshold.threshold}}">
                                <div class="perf-table-text-entry perf-table-num-entry">
                                    [[getMultiClassAccuracyModelIndex(inferenceStats_, index, featureValueThreshold)]]
                                </div>
                              </template>
                            </div>
                          </div>
                        </div>
                        <iron-collapse opened="{{featureValueThreshold.opened}}">
                          <div class="perf-table-entry-expanded flex-row-reverse">
                            <div>
                              <template is="dom-if" if="[[shouldShowFeaturePrCharts_(selectedLabelFeature, selectedBreakdownFeature, inferences)]]">
                                <div class="conf-matrix-holder">
                                  <div class="conf-text">Confusion matrix</div>
                                  <template is="dom-repeat" items="[[inferenceStats_]]" as="inferenceStat">
                                    <tf-confusion-matrix counts="[[getMultiClassConfMatrix(inferenceStats_, index, featureValueThreshold)]]" label="[[getConfusionMatrixLabel(index, numModels)]]" background="[[getConfusionMatrixColor(index)]]" all-items="[[allConfMatrixLabels]]" class="conf-matrix">
                                    </tf-confusion-matrix>
                                    </template>
                                </div>
                              </template>
                            </div>
                          </div>
                        </iron-collapse>
                      </template>
                      <template is="dom-if" if="[[shouldShowOverallThresholder_(selectedBreakdownFeature)]]">
                        <div class="perf-table-entry">
                          <div class="perf-table-row-expanded">
                            <div class="perf-table-arrow">
                              <paper-icon-button icon="arrow-drop-down" on-tap="togglePerfRow" disabled></paper-icon-button>
                            </div>
                            <div class="perf-table-val perf-table-text-entry">All datapoints</div>
                            <div class="perf-table-count perf-table-num-entry">
                                [[getMultiClassFeatureValueCount(inferenceStats_)]]
                            </div>
                            <div class$="[[getPerfTableModelClass(numModels)]]">
                              <template is="dom-repeat" items="{{overallThresholds}}">
                                <div class="perf-table-text-entry">[[getModelName_(index)]]</div>
                              </template>
                            </div>
                            <div class="perf-table-acc">
                              <template is="dom-repeat" items="[[inferenceStats_]]" as="inferenceStat">
                                <div class="perf-table-text-entry perf-table-num-entry">
                                    [[getMultiClassAccuracyModelIndex(inferenceStats_, index)]]
                                </div>
                              </template>
                            </div>
                          </div>
                        </div>
                        <div class="perf-table-entry-expanded flex-row-reverse">
                          <template is="dom-if" if="[[shouldShowOverallPrChart_(selectedLabelFeature, selectedBreakdownFeature, inferences)]]">
                            <div class="conf-matrix-holder">
                              <div class="conf-text">Confusion matrix</div>
                              <template is="dom-repeat" items="[[inferenceStats_]]" as="inferenceStat">
                                <tf-confusion-matrix counts="[[getMultiClassConfMatrix(inferenceStats_, index)]]" label="[[getConfusionMatrixLabel(index, numModels)]]" background="[[getConfusionMatrixColor(index)]]" all-items="[[allConfMatrixLabels]]" class="conf-matrix">
                                </tf-confusion-matrix>
                              </template>
                            </div>
                          </template>
                        </div>
                      </template>
                    </div>
                  </template>
                  <template is="dom-if" if="[[isRegression_(modelType)]]" restamp>
                    <div class="perf-table-title-row">
                      <div class="flex">
                        <div class="perf-table-title">[[getNoThresholdPerfTableTitle(selectedBreakdownFeature, selectedSecondBreakdownFeature, featureValueThresholds)]]</div>
                        <paper-icon-button icon="info-outline" class="info-icon performance-info-icon no-padding" on-tap="openDialog">
                        </paper-icon-button>
                        <paper-dialog class="dialog-text" horizontal-align="auto" vertical-align="auto">
                          <div class="dialog-title">Regression Performance Table</div>
                          <div>Set the ground truth feature to explore model performance.</div>
                          <div>Slice the dataset and explore model performance by slice.</div>
                        </paper-dialog>
                      </div>
                        <paper-dropdown-menu label="Sort by" class="threshold-dropdown perf-table-sort-menu">
                        <paper-listbox class="dropdown-content" selected="{{selectedFeatureSort}}" attr-for-selected="name">
                          <template is="dom-repeat" items="[[getFeatureSortBy(modelType, multiClass)]]">
                            <paper-item name="[[item]]">[[item]]</paper-item>
                          </template>
                        </paper-listbox>
                      </paper-dropdown-menu>
                    </div>
                    <div class="perf-table-header">
                      <div class="perf-table-arrow"></div>
                      <div class="perf-table-val">Feature Value</div>
                      <div class="perf-table-count">Count</div>
                      <div class="perf-table-error">Mean error</div>
                      <div class="perf-table-error">Mean absolute error</div>
                      <div class="perf-table-sq-error">Mean squared error</div>
                    </div>
                    <div class="perf-table-entries-holder">
                      <template is="dom-repeat" items="[[regressionEntries_]]">
                        <div class="perf-table-entry">
                          <div class="perf-table-row">
                            <div class="perf-table-arrow"></div>
                            <div class="perf-table-val perf-table-text-entry">[[item.name]]</div>
                            <div class="perf-table-count perf-table-num-entry perf-table-text-entry">
                              [[item.count]]
                            </div>
                            <div class="perf-table-error perf-table-num-entry perf-table-text-entry">
                              [[formatError(item.meanError)]]
                            </div>
                            <div class="perf-table-error perf-table-num-entry perf-table-text-entry">
                              [[formatError(item.meanAbsError)]]
                            </div>
                            <div class="perf-table-sq-error perf-table-num-entry perf-table-text-entry">
                              [[formatError(item.meanSquaredError)]]
                            </div>
                          </div>
                        </div>
                      </template>
                    </div>
                  </template>
                </div>
              </div>
                <div class="stats-tab">
                  <facets-overview id="overview" search-string="{{featureSearchValue}}"></facets-overview>
                </div>
              </iron-pages>
            </div>
      </div>
    </div>
    <style include="dashboard-style"></style>
  </template>

  <script>//~~WEBPATH~~/tf-interactive-inference-dashboard/tf-interactive-inference-dashboard.html.js
Polymer({is:"tf-interactive-inference-dashboard",properties:{_requestManager:{type:Object,value:function(){return new Rk.RequestManager}},_canceller:{type:Object,value:function(){return new Rk.Canceller}},examplesPath:{type:String},modelName:{type:String,observer:"modelNameChanged_"},parsedModelNames:{type:String},inferenceAddress:{type:String},modelType:{type:String},modelSignature:{type:String},modelVersion:{type:String},maxExamples:{type:Number},labelVocabPath:{type:String},maxInferenceEntriesPerRun:Number,
inferences:{type:Object,observer:"newInferences_",value:function(){return{}}},attributions:{type:Object,observer:"newAttributions_"},examplesAndInferences:{type:Array,value:function(){return[]},observer:"computeSelectedExampleAndInference"},selectedExampleAndInference:{type:Object},counterfactualExampleAndInference:{type:Object},visdata:{type:Array,value:function(){return[]}},selected:{type:Array,value:function(){return[]},observer:"computeSelectedExampleAndInference"},comparedIndices:{type:Array,
value:function(){return[]}},labelVocab:{type:Array,value:function(){return[]}},updatedExample:{type:Boolean,value:!1},imageFeatureName:{type:String,value:"image/encoded",readonly:!0},stats:Object,selectedBreakdownFeature:{type:String,value:"",observer:"breakdownFeatureSelected_"},selectedSecondBreakdownFeature:{type:String,value:"",observer:"breakdownFeatureSelected_"},selectedLabelFeature:{type:String,value:"",observer:"labelFeatureSelected_"},nearestCounterfactualModelIndex:{type:Number,value:0},
inferenceStats_:{type:Array,value:function(){return[]}},featureValueThresholds:{type:Array,value:function(){return[]}},featureValueThresholdsMap:Object,defaultInferenceLabel:{type:Number,value:0,observer:"refreshInferences_"},overallThresholds:{type:Array,value:function(){return[]}},sideTabSelected:{type:Number,value:0,observer:"sideTabSelectedChanged_"},local:{type:Boolean,value:!1,observer:"localChanged_"},localAtlasUrl:String,partialDepPlotEligibleFeatures:{type:Array,value:function(){return[]},
observer:"partialDepPlotEligibleFeaturesSet"},partialDepPlotPendingFeatures:{type:Array,value:function(){return[]}},exampleDisplayMode:{type:String,value:"stacked"},featureSearchValue:String,incorrectPredCostRatio:{type:Number,value:1,observer:"costRatioChanged_"},multiClass:{type:Boolean},sequenceExamples:{type:Boolean},samplingOdds:{type:Number},usePredictApi:{type:Boolean},predictOutputTensor:{type:String},predictInputTensor:{type:String},axisPrecision:{type:Number,value:2},distanceStats_:{type:Object},
facetDistSwitch:{type:String,value:"L1"},facetDistFeatureName:{type:String},facetDistFeatureNames:{type:Array,value:function(){return[]}},facetDistSetting:{type:String,value:"colorBy"},exampleStatusStr:{type:String,value:"No datapoints loaded yet"},selectedExampleNum:{type:Number,value:"",observer:"selectedExampleInputChanged_"},selectedExampleMax:Number,openedContextTools:{type:Boolean,value:!0},openedPerformance:{type:Boolean,value:!0},openedTrueLabel:{type:Boolean,value:!0},openedExplorer:{type:Boolean,
value:!0},openedInferenceResults:{type:Boolean,value:!0},regressionEntries_:{type:Array},nearestCounterfactualDist:{type:String,value:"L1"},visMode:{type:String,value:"dive",observer:"visModeChanged_"},optimizationSelected:{type:String,value:"custom",observer:"optimizationSelectedChanged_"},compareTitle:String,attribution:{type:Object,value:function(){return{}}},globalPdPlots:{type:Boolean,value:!0},numModels:{type:Number,readOnly:!0},showNearestCounterfactual:{type:Boolean,value:!1},selectedFeatureSort:{type:String,
value:"Count",observer:"selectedFeatureSortChanged_"},pdPlotColors:{type:Array,value:function(){return[d3.color("rgb(31, 119, 180)"),d3.color("rgb(255, 127, 14)"),d3.color("rgb(44, 160, 44)"),d3.color("rgb(214, 39, 40)"),d3.color("rgb(148, 103, 189)"),d3.color("rgb(140, 86, 75)"),d3.color("rgb(227, 119, 194)"),d3.color("rgb(127, 127, 127)"),d3.color("rgb(188, 189, 34)"),d3.color("rgb(23, 190, 207)")]}},pdPlotTransparentColors:{type:Array,value:function(){return[d3.color("rgba(31, 119, 180, 0.3)"),
d3.color("rgba(255, 127, 14, 0.3)"),d3.color("rgba(44, 160, 44, 0.3)"),d3.color("rgba(214, 39, 40, 0.3)"),d3.color("rgba(148, 103, 189, 0.3)"),d3.color("rgba(140, 86, 75, 0.3)"),d3.color("rgba(227, 119, 194, 0.3)"),d3.color("rgba(127, 127, 127, 0.3)"),d3.color("rgba(188, 189, 34, 0.3)"),d3.color("rgba(23, 190, 207, 0.3)")]}},rocCurveColors:{type:Array,value:function(){return[d3.color("rgb(18, 181, 206)"),d3.color("rgb(250, 120, 23)")]}},rocCurveLineColors:{type:Array,value:function(){return[d3.color("rgba(18, 181, 206, 0.6)"),
d3.color("rgba(250, 120, 23, 0.6)")]}},confMatrixColors:{type:Array,value:function(){return[d3.color("rgb(18, 181, 206)"),d3.color("rgb(250, 120, 23)")]}},allConfMatrixLabels:{type:Array,value:function(){return[]}}},observers:["setFacetDistFeatureName(facetDistSwitch, selected)","nearestCounterfactualStatusChanged_(showNearestCounterfactual, nearestCounterfactualModelIndex, nearestCounterfactualDist)"],reload:function(){},openDialog:function(a){a.stopPropagation();a.target.parentElement.parentElement.querySelector("paper-dialog").open()},
ready:function(){var a=this,b=d3.select(this.$.side),c=d3.select(this.$.center),e=d3.select(this.$.resizer),f=this,g=d3.drag().on("drag",function(){var h=d3.mouse(a.parentNode.parentNode)[0]/a.parentNode.parentNode.offsetWidth*100;h=Math.max(h,20);c.style("width",100-h+"%");b.style("width",h+"%");f.$.dive.$.vis._updateGridFaceting();f.$.dive.$.vis._onIronResize()});e.call(g)},attached:function(){var a=this;this._requestManager.request(Rk.getRouter().pluginsListing()).then(function(b){"whatif"in b?
a.$.initialDialog.closeDialog():(a.$.inferencesettings.close(),a.$.initialDialog.openNoTensorFlowDialog())})},settingsClicked_:function(){this.$.inferencesettings.toggle()},localChanged_:function(){this.local&&this.closeSettings_()},modelNameChanged_:function(){this.parsedModelNames=this.modelName.split(",").map(function(e){return e.trim()});for(var a=0;a<this.parsedModelNames.length;a++)for(var b=this.parsedModelNames[a],c=a+1;c<this.parsedModelNames.length;c++)this.parsedModelNames[c]==b&&(this.parsedModelNames[a]=
b+" "+(a+1),this.parsedModelNames[c]=b+" "+(c+1))},closeSettings_:function(){this.$.inferencesettings.close()},showDistanceClicked_:function(){this.$.distancedialog.toggle()},addDistanceMetric:function(){this.facetDistFeatureNames.push(this.facetDistFeatureName);for(var a=this.selected[0],b="L2"==this.facetDistSwitch,c=0;c<this.visdata.length;c++){var e=this.getDist(this.visdata[a],this.visdata[c],b);this.visdata[c][this.facetDistFeatureName]=e}this.refreshDive_();"colorBy"==this.facetDistSetting?
this.$.dive.colorBy=this.facetDistFeatureName:"verticalFacet"==this.facetDistSetting?this.$.dive.verticalFacet=this.facetDistFeatureName:"horizontalFacet"==this.facetDistSetting?this.$.dive.horizontalFacet=this.facetDistFeatureName:"verticalPosition"==this.facetDistSetting?this.$.dive.verticalPosition=this.facetDistFeatureName:"horizontalPosition"==this.facetDistSetting&&(this.$.dive.horizontalPosition=this.facetDistFeatureName)},setFacetDistFeatureName:function(a,b){this.facetDistFeatureName=" "+
a+" distance to datapoint "+b[0]},nearestCounterfactualStatusChanged_:function(a){a?this.findClosestCounterfactual_():(this.comparedIndices=[],this.counterfactualExampleAndInference=null,a=this.selectedExampleAndInference,this.selectedExampleAndInference=null,this.selectedExampleAndInference=a)},findClosestCounterfactual_:function(){for(var a=this.selected[0],b=this.strWithModelName_(" Inference value",this.nearestCounterfactualModelIndex),c=Number.POSITIVE_INFINITY,e=-1,f=0;f<this.visdata.length;f++)if(this.visdata[a][b]!=
this.visdata[f][b]){var g=this.getDist(this.visdata[a],this.visdata[f],"L2"==this.nearestCounterfactualDist);g<c&&(c=g,e=f)}-1!=e&&(this.comparedIndices=[e],this.counterfactualExampleAndInference=this.examplesAndInferences[e],this.compareTitle="Counterfactual value(s)")},getDist:function(a,b,c){for(var e=0,f=[].concat(Ra(new Set([].concat(Ra(Object.keys(a)),Ra(Object.keys(b)))))),g=0;g<f.length;g++){var h=f[g];if(!this.isComputedKeyStr_(h)&&h!=this.selectedLabelFeature&&this.stats[h].uniqueCount!=
this.examplesAndInferences.length){var l=a[h],n=b[h];Array.isArray(l)||(l=[l]);Array.isArray(n)||(n=[n]);for(var m=Math.max(l.length,n.length),q=0,r=0;r<m;r++)q=null!=this.distanceStats_[h].stdDev?q+this.getNumericDist(l[r],n[r],this.distanceStats_[h]):q+this.getCategoricalDist(l[r],n[r],this.distanceStats_[h]);h=q/m;c&&(h*=h);e+=h}}return e},getNumericDist:function(a,b,c){return null==a||null==b?1:c.stdDev?Math.abs((a-b)/c.stdDev):0},getCategoricalDist:function(a,b,c){return null==a||null==b?1:a==
b?0:c.probSameValue},visModeChanged_:function(a){"dive"==a?this.hidePartialDependencePlots_():this.showPartialDependencePlots_()},hidePartialDependencePlots_:function(){this.$.partialplotholder.style.display="none"},showPartialDependencePlots_:function(){var a=this;this.$.partialplotholder.style.display="flex";requestAnimationFrame(function(){return a.populatePdTabs()})},areTherePdPlotFeatures_:function(a){return a&&0<a.length},selectedIndicesChanged_:function(a){this.selected=a.detail.value;this.setAttributions();
this.selectedDataUpdated_();this.showNearestCounterfactual&&0!=this.selected.length?this.findClosestCounterfactual_():this.comparedIndices=[]},selectNextDatapoint_:function(){this.$.dive.selectedIndices=[(this.selected[0]+1)%this.visdata.length]},selectPrevDatapoint_:function(){this.$.dive.selectedIndices=[((this.selected[0]-1)%this.visdata.length+this.visdata.length)%this.visdata.length]},selectedExampleInputChanged_:function(a){null!=a&&""!=a&&(a=+a,isNaN(a)||0>a||a>=this.visdata.length||(this.$.dive.selectedIndices=
[a]))},setExampleCollapsed_:function(){this.exampleDisplayMode="grid";this.$$("#viewer").expandedFeatures={};this.$$("#viewer").expandAllFeatures=!1;this.$$("#viewer").refreshExampleViewer()},setExampleShow_:function(){this.exampleDisplayMode="grid";this.$$("#viewer").expandAllFeatures=!0},setExampleExpanded_:function(){this.exampleDisplayMode="stacked";this.$$("#viewer").expandAllFeatures=!0},statsChanged_:function(a){this.stats=a.detail.value},isBinaryClassification_:function(a,b){return"classification"==
a&&!b},isMultiClass_:function(a,b){return"classification"==a&&b},isRegression_:function(a){return"regression"==a},shouldShowFeatureDropdown_:function(a){return a&&0<Object.keys(a).length},shouldShowSecondFeatureDropdown_:function(a){return""!=a},shouldShowLabelDropdown_:function(a){return a&&0<Object.keys(a).length},shouldHideCounterfactualModelSelector_:function(a){return!(a&&1<a.length)},shouldShowOverallPrChart_:function(a,b,c){return""!=a&&""==b&&null!=c},shouldShowFeaturePrCharts_:function(a,
b,c){return""!=a&&""!=b&&null!=c},shouldShowCostRatio_:function(a,b,c){return""!=a&&this.isBinaryClassification_(b,c)},arePartialDependencePlotsEnabled_:function(a,b,c){return this.hasSelected(a)&&this.areExamplesEditable_(b,c)},hasSelected:function(a){return null!=a},getFeatureList_:function(a){var b=this;a=Object.keys(a).filter(function(c){return!b.isComputedKeyStr_(c)}).sort();a.push("");return a},strStartsWith_:function(a,b){return 0==a.lastIndexOf(b,0)},getModelName_:function(a){return this.parsedModelNames[a]},
strWithModelName_:function(a,b){return 1<this.numModels?a+" "+this.getModelName_(b):a},updateNumberOfModels:function(){this._setNumModels(this.modelName.split(",").length);this.selectedSecondBreakdownFeature=this.selectedBreakdownFeature=this.selectedLabelFeature="";for(var a=[],b=0;b<this.numModels;b++)a.push({threshold:.5});this.set("overallThresholds",a);this.shouldDisableInferButton_(this.examplesAndInferences,this.modelName,this.inferenceAddress,this.updatedExample)||this.inferClicked_()},isComputedKeyStr_:function(a){return this.strStartsWith_(a,
" Inference value")||this.strStartsWith_(a," Inference label")||this.strStartsWith_(a," Inference correct")||this.strStartsWith_(a," Inference error")||this.strStartsWith_(a," Inference score")||this.strStartsWith_(a," Inference absolute error")||this.strStartsWith_(a," Inference squared error")||" Datapoint ID"==a||-1!=this.facetDistFeatureNames.indexOf(a)},breakdownFeatureSelected_:function(){this.resetOptimizationSelected_();var a=this.selectedBreakdownFeature;""==a&&(this.selectedSecondBreakdownFeature=
"");var b=this.selectedSecondBreakdownFeature,c=[],e={};if(0!==a.length){var f=this.stats[a].valueHash;this.stats[a].totalCount!=this.examplesAndInferences.length&&(f=Object.assign({},f,{undefined:""}));var g={undefined:""};0!=b.length&&(g=this.stats[b].valueHash,this.stats[b].totalCount!=this.examplesAndInferences.length&&(g=Object.assign({},g,{undefined:""})));for(var h in f)if(f.hasOwnProperty(h))for(var l in g)if(g.hasOwnProperty(l)){for(var n="undefined"==h?void 0:this.stats[a].valueHash[h].value,
m="undefined"==l?void 0:this.stats[b].valueHash[l].value,q=[],r=0;r<this.overallThresholds.length;r++)q.push({threshold:this.overallThresholds[r].threshold});q={value:n,value2:m,threshold:q,opened:!1};c.push(q);e[this.createCombinedValueString_(n,m)]=q}}this.set("featureValueThresholds",c);this.set("featureValueThresholdsMap",e);this.refreshInferences_(!1)},labelFeatureSelected_:function(){var a=this;requestAnimationFrame(function(){a.updateInferenceStats_(!0);a.refreshDive_()})},sideTabSelectedChanged_:function(a){var b=
this;if(1==a)requestAnimationFrame(function(){b.updateInferenceStats_(!0)});else if(2==a){a=this.$.overview.querySelectorAll("facets-overview-table");for(var c=0;c<a.length;c++)a[c]._handleResize()}},updateInferenceStats_:function(a){if(this.inferenceStats_&&this.visdata&&""!=this.selectedLabelFeature&&0!=this.examplesAndInferences.length&&null!=this.examplesAndInferences[0].inferences&&this.examplesAndInferences[0].inferences[0].length==this.numModels&&(this.inferenceStats_.length==this.numModels||
a)){if(a){for(var b=[],c=[],e=0;e<this.numModels;e++){var f={};if(this.isBinaryClassification_(this.modelType,this.multiClass)){f.thresholds=[];for(var g=0;101>g;g++)f.thresholds.push({TP:0,FP:0,FN:0,TN:0});f.faceted={};for(g=0;g<this.examplesAndInferences.length;g++){var h=this.visdata[g],l=null;if(""!=this.selectedBreakdownFeature){var n=this.createCombinedValueString_(h[this.selectedBreakdownFeature],h[this.selectedSecondBreakdownFeature]);l=f.faceted[n];if(!l){f.faceted[n]=[];for(l=0;101>l;l++)f.faceted[n].push({TP:0,
FP:0,FN:0,TN:0});l=f.faceted[n]}}n=this.getClassificationBestNonZero(g,e);for(var m=0;100>=m&&!(m>100*n.score);m++)+h[this.selectedLabelFeature]==+n.label?(f.thresholds[m].TP+=1,l&&(l[m].TP+=1)):(f.thresholds[m].FP+=1,l&&(l[m].FP+=1));for(;100>=m;m++)null==h[this.selectedLabelFeature]||0==+h[this.selectedLabelFeature]?(f.thresholds[m].TN+=1,l&&(l[m].TN+=1)):(f.thresholds[m].FN+=1,l&&(l[m].FN+=1))}this.allConfMatrixLabels=[];this.calcThresholdStats(f.thresholds);for(var q in f.faceted)f.faceted.hasOwnProperty(q)&&
this.calcThresholdStats(f.faceted[q])}else if(this.isMultiClass_(this.modelType,this.multiClass)){f.results={};f.faceted={};g=new Set;for(h=0;h<this.examplesAndInferences.length;h++){l=this.visdata[h];n=null;""!=this.selectedBreakdownFeature&&(m=this.createCombinedValueString_(l[this.selectedBreakdownFeature],l[this.selectedSecondBreakdownFeature]),n=f.faceted[m],n||(f.faceted[m]={},n=f.faceted[m]));var r=f.results[l[this.selectedLabelFeature]];r||(f.results[l[this.selectedLabelFeature]]={},r=f.results[l[this.selectedLabelFeature]]);
m=this.strWithModelName_(" Inference value",e);var v=r[l[m]];g.add(String(l[m]));g.add(String(l[this.selectedLabelFeature]));r[l[m]]=null==v?1:r[l[m]]+1;n&&(r=n[l[this.selectedLabelFeature]],r||(n[l[this.selectedLabelFeature]]={},r=n[l[this.selectedLabelFeature]]),r[l[m]]=null==r[l[m]]?1:r[l[m]]+1)}this.allConfMatrixLabels=Array.from(g.values())}else{f.results={errors:[]};f.faceted={};for(g=0;g<this.examplesAndInferences.length;g++)l=this.visdata[g],h=null,""!=this.selectedBreakdownFeature&&(n=this.createCombinedValueString_(l[this.selectedBreakdownFeature],
l[this.selectedSecondBreakdownFeature]),h=f.faceted[n],h||(f.faceted[n]={errors:[]},h=f.faceted[n])),l=l[this.strWithModelName_(" Inference value",e)]-l[this.selectedLabelFeature],f.results.errors.push(l),h&&h.errors.push(l);c.push(this.fillInRegressionStats(f.results,this.formatChartKey("All datapoints",e,this.numModels)));for(var u in f.faceted)c.push(this.fillInRegressionStats(f.faceted[u],this.formatChartKey(u,e,this.numModels)))}b.push(f)}c=this.sortRegressionEntries(c);this.regressionEntries_=
[];this.regressionEntries_=c;this.inferenceStats_=b}b=this.featureValueThresholds;this.featureValueThresholds=[];this.featureValueThresholds=this.sortFeatureValues(b);if(this.isBinaryClassification_(this.modelType,this.multiClass)){for(b=0;b<this.featureValueThresholds.length;b++){c=[];e=[];f=this.featureValueThresholds[b].threshold;for(q=0;q<f.length;q++)c.push(this.inferenceStats_[q].faceted[this.createCombinedValueString_(this.featureValueThresholds[b].value,this.featureValueThresholds[b].value2)]),
e.push(f[q].threshold);this.plotChart(this.$$("#"+this.getRocChartId(b)),c,e,a,!0);this.plotChart(this.$$("#"+this.getPrChartId(b)),c,e,a,!1)}b=[];c=[];for(e=0;e<this.inferenceStats_.length;e++)b.push(this.inferenceStats_[e].thresholds),c.push(this.overallThresholds[e].threshold);this.plotChart(this.$$("#rocchart"),b,c,a,!0);this.plotChart(this.$$("#prchart"),b,c,a,!1)}this.updateCorrectness_()}},sortFeatureValues:function(a){var b=this,c=this.inferenceStats_[0];a=a.filter(function(e){return b.isRegression_(b.modelType)?
0<b.getRegressionCount(c,e):b.isBinaryClassification_(b.modelType,b.multiClass)?0<b.getBinaryClassificationCount(c,e):0<b.getMulticlassClassificationCount(c,e)});return a.sort(function(e,f){if("Count"==b.selectedFeatureSort)return b.isRegression_(b.modelType)?b.getRegressionCount(c,f)-b.getRegressionCount(c,e):b.isBinaryClassification_(b.modelType,b.multiClass)?b.getBinaryClassificationCount(c,f)-b.getBinaryClassificationCount(c,e):b.getMulticlassClassificationCount(c,f)-b.getMulticlassClassificationCount(c,
e);if("Alphabetical"==b.selectedFeatureSort)return b.getPrintableValue_(e).localeCompare(b.getPrintableValue_(f));if("Accuracy"==b.selectedFeatureSort)return b.isBinaryClassification_(b.modelType,b.multiClass)?+b.getAccuracyModelIndex(b.inferenceStats_,f.threshold,0,f)-+b.getAccuracyModelIndex(b.inferenceStats_,e.threshold,0,e):+b.getMultiClassAccuracyModelIndex(b.inferenceStats_,0,f)-+b.getMultiClassAccuracyModelIndex(b.inferenceStats_,0,e);if("False positives"==b.selectedFeatureSort)return+b.getFPModelIndex(b.inferenceStats_,
f.threshold,0,f)-+b.getFPModelIndex(b.inferenceStats_,e.threshold,0,e);if("False negatives"==b.selectedFeatureSort)return b.getFNModelIndex(+b.inferenceStats_,f.threshold,0,f)-+b.getFNModelIndex(b.inferenceStats_,e.threshold,0,e)})},sortRegressionEntries:function(a){var b=this;return a.sort(function(c,e){if("Count"==b.selectedFeatureSort)return e.count-c.count;if("Alphabetical"==b.selectedFeatureSort)return c.name.localeCompare(e.name);if("Mean error"==b.selectedFeatureSort)return e.meanError-c.meanError;
if("Mean absolute error"==b.selectedFeatureSort)return e.meanAbsError-c.meanAbsError;if("Mean squared error"==b.selectedFeatureSort)return e.meanSquaredError-c.meanSquaredError})},fillInRegressionStats:function(a,b){function c(g){return g.reduce(function(h,l){return h+l},0)/g.length}var e=a.errors.map(function(g){return Math.abs(g)}),f=a.errors.map(function(g){return g*g});return{name:b,meanError:c(a.errors),meanAbsError:c(e),meanSquaredError:c(f),count:a.errors.length}},plotChart:function(a,b,c,
e,f){if(b&&b[0]&&a){for(var g=[],h=[],l=f?"FPR":"TPR",n=f?"TPR":"PPV",m=f?"FPR":"Recall",q=f?"TPR":"Precision",r={$jscomp$loop$prop$modelInd$84:0};r.$jscomp$loop$prop$modelInd$84<b.length;r={$jscomp$loop$prop$modelInd$84:r.$jscomp$loop$prop$modelInd$84,$jscomp$loop$prop$currentThresholdData$85:r.$jscomp$loop$prop$currentThresholdData$85},r.$jscomp$loop$prop$modelInd$84++){r.$jscomp$loop$prop$currentThresholdData$85=null;var v=b[r.$jscomp$loop$prop$modelInd$84].map(function(z){return function(A,E){.5>
E-100*c[z.$jscomp$loop$prop$modelInd$84]&&(z.$jscomp$loop$prop$currentThresholdData$85={step:A[l],scalar:A[n],threshold:E/100});return{step:A[l],scalar:A[n],threshold:E/100}}}(r)).reverse();a.setSeriesData(this.strWithModelName_("Threshold set",r.$jscomp$loop$prop$modelInd$84),[r.$jscomp$loop$prop$currentThresholdData$85]);e&&(a.setSeriesData(this.strWithModelName_("ROC",r.$jscomp$loop$prop$modelInd$84),v),g.push(this.strWithModelName_("ROC",r.$jscomp$loop$prop$modelInd$84)),g.push(this.strWithModelName_("Threshold set",
r.$jscomp$loop$prop$modelInd$84)),h.push(this.rocCurveLineColors[r.$jscomp$loop$prop$modelInd$84]),h.push(this.rocCurveColors[r.$jscomp$loop$prop$modelInd$84]))}if(e){var u=d3.format(".2f");a.xAxisFormatter=d3.format(".2f");var w=d3.format(",.1");e=[{title:"Threshold",evaluate:function(z){return u(z.datum.threshold)}},{title:q,evaluate:function(z){return f?w(z.datum.scalar):u(z.datum.scalar)}},{title:m,evaluate:function(z){return f?w(z.datum.step):u(z.datum.step)}}];1<b.length&&e.push({title:"Model",
evaluate:function(z){z=z.dataset.metadata().name.split(" ");return z[z.length-1]}});a.tooltipColumns=e;a.colorScale=(new Plottable.Scales.Color).range(h);a.colorScale.domain(g);a.setVisibleSeries(g)}}},calcThresholdStats:function(a){for(var b=0;b<a.length;b++)a[b].TPR=0<a[b].TP+a[b].FN?a[b].TP/(a[b].TP+a[b].FN):0,a[b].FPR=0<a[b].FP+a[b].TN?a[b].FP/(a[b].FP+a[b].TN):0,a[b].PPV=0<a[b].TP+a[b].FP?a[b].TP/(a[b].TP+a[b].FP):0},optimizationSelectedChanged_:function(a){"custom"!=a&&("unaware"==a?this.optimizeThresholdClicked_():
"group"==a?this.optimizeFacetedThresholdsClicked_():"demoparity"==a?this.demoParityClicked_():"equalacc"==a?this.equalAccClicked_():"equalopp"==a&&this.equalOppoClicked_())},costRatioChanged_:function(){this.resetOptimizationSelected_()},resetOptimizationSelected_:function(){var a=this.$$("#customthresh");null!=a&&a.click()},optimizeThresholdClicked_:function(){for(var a=0;a<this.inferenceStats_.length;a++){var b=this.findOptimalThreshold_(this.inferenceStats_[a].thresholds);this.set("overallThresholds."+
a+".threshold",b);if(this.featureValueThresholds)for(var c=0;c<this.featureValueThresholds.length;c++)this.set("featureValueThresholds."+c+".threshold."+a+".threshold",b)}},optimizeFacetedThresholdsClicked_:function(){for(var a=0;a<this.inferenceStats_.length;a++)for(var b=Object.keys(this.inferenceStats_[a].faceted),c=0;c<b.length;c++)this.set("featureValueThresholds."+c+".threshold."+a+".threshold",this.findOptimalThreshold_(this.inferenceStats_[a].faceted[b[c]]))},findOptimalThreshold_:function(a){for(var b=
Number.POSITIVE_INFINITY,c=0,e=0;e<a.length;e++){var f=this.getCost(a[e]);f<=b&&(b=f,c=e)}return c/100},equalOppoClicked_:function(){this.getBestThresholdsByFairnessMeasure_(function(a){return a.TP/(a.TP+a.FN)})},equalAccClicked_:function(){this.getBestThresholdsByFairnessMeasure_(function(a){return(a.TP+a.TN)/(a.TP+a.FP+a.TN+a.FN)})},demoParityClicked_:function(){this.getBestThresholdsByFairnessMeasure_(function(a){return(a.TP+a.FP)/(a.TP+a.FP+a.TN+a.FN)})},getBestThresholdsByFairnessMeasure_:function(a){for(var b=
0;b<this.inferenceStats_.length;b++){for(var c=Number.POSITIVE_INFINITY,e=null,f=this.inferenceStats_[b],g=Object.keys(f.faceted),h=f.faceted[g[0]],l=0;l<h.length;l++){for(var n=a(h[l]),m=[l],q=this.getCost(h[l]),r=1;r<g.length;r++){var v=f.faceted[g[r]],u=this.thresholdClosestToMeasure(v,n,a);m.push(u);q+=this.getCost(v[u])}q<=c&&(c=q,e=m)}for(c=0;c<g.length;c++)this.set("featureValueThresholdsMap."+g[c]+".threshold."+b+".threshold",e[c]/100);for(e=0;e<this.featureValueThresholds.length;e++)this.set("featureValueThresholds."+
e+".threshold."+b+".threshold",this.featureValueThresholds[e].threshold[b].threshold)}},getCost:function(a){return a.FP*this.incorrectPredCostRatio+a.FN},thresholdClosestToMeasure:function(a,b,c){for(var e=Number.POSITIVE_INFINITY,f=0,g=0;g<a.length;g++){var h=c(a[g]);h=Math.abs(h-b);h<=e&&(f=g,e=h)}return f},getClassificationBestNonZero:function(a,b){for(var c=0,e=this.examplesAndInferences[a].inferences.length-1,f=0;f<this.examplesAndInferences[a].inferences[e][b].length;f++)if(0!==+this.examplesAndInferences[a].inferences[e][b][f].label){c=
f;break}return this.examplesAndInferences[a].inferences[e][b][c]},getConfusionCountsModelIndex:function(a,b,c,e){return this.overallThresholds.length!=this.numModels||this.inferenceStats_.length!=this.numModels?{}:this.getConfusionCounts(this.inferenceStats_[c],b[c].threshold,e)},getTotalEntriesInConfCounts:function(a){if(null==a)return 0;for(var b=0,c=Object.keys(a),e=0;e<c.length;e++)for(var f=a[c[e]],g=Object.keys(f),h=0;h<g.length;h++)b+=f[g[h]];return b},getFPModelIndex:function(a,b,c,e){a=this.getConfusionCountsModelIndex(a,
b,c,e);if(0==Object.keys(a).length)return null;b=a.No.Yes;return d3.format(",.1f")(b/this.getTotalEntriesInConfCounts(a)*100)},getFNModelIndex:function(a,b,c,e){a=this.getConfusionCountsModelIndex(a,b,c,e);if(0==Object.keys(a).length)return 0;b=a.Yes.No;return d3.format(",.1f")(b/this.getTotalEntriesInConfCounts(a)*100)},getAccuracyModelIndex:function(a,b,c,e){a=this.getConfusionCountsModelIndex(a,b,c,e);if(0==Object.keys(a).length)return 0;b=a.Yes.Yes+a.No.No;return d3.format(",.1f")(b/this.getTotalEntriesInConfCounts(a)*
100)},getF1ModelIndex:function(a,b,c,e){var f=d3.format(",.2f");c=this.getConfusionCountsModelIndex(a,b,c,e);if(0==Object.keys(c).length)return 0;a=c.Yes.Yes;b=c.No.Yes;c=c.Yes.No;if(0==a)return 0!=b||0!=c?f(0):f(1);b=a/(a+b);a/=a+c;return f(2*b*a/(b+a))},getFeatureValueCount:function(a,b,c){return this.getTotalEntriesInConfCounts(this.getConfusionCountsModelIndex(a,b,0,c))},getConfusionMatrixLabel:function(a,b){return 2>b?"":this.getModelName_(a)},getConfusionMatrixColor:function(a){return this.confMatrixColors[a]},
getConfusionCounts:function(a,b,c){var e=null,f=null;null!=c&&(e=c.value,f=c.value2);return{No:{No:this.getConfMatrixValue(a,b,"TN",e,f),Yes:this.getConfMatrixValue(a,b,"FP",e,f)},Yes:{No:this.getConfMatrixValue(a,b,"FN",e,f),Yes:this.getConfMatrixValue(a,b,"TP",e,f)}}},getConfMatrixValue:function(a,b,c,e,f){b=Math.floor(100*b);if(!a.thresholds)return 0;if(null===e)return a.thresholds[b][c];e=this.createCombinedValueString_(e,f);return null==a.faceted[e]?0:a.faceted[e][b][c]},getMultiClassConfMatrix:function(a,
b,c){return 0==a.length?{}:null==c?a[b].results:a[b].faceted[this.getPrintableValue_(c)]},getMultiClassFeatureValueCount:function(a,b){return this.getTotalEntriesInConfCounts(this.getMultiClassConfMatrix(a,0,b))},getMultiClassAccuracyModelIndex:function(a,b,c){a=this.getMultiClassConfMatrix(a,b,c);if(null==a)return null;b=0;c=Object.keys(a);for(var e=0;e<c.length;e++)for(var f=a[c[e]],g=Object.keys(f),h=0;h<g.length;h++)c[e]==g[h]&&(b+=f[g[h]]);return d3.format(",.1f")(b/this.getTotalEntriesInConfCounts(a)*
100)},getInferenceStat:function(a,b,c,e){a=b?a.faceted[this.getPrintableValue_(b)]:a.results;if(!a)return null;c=c(a);return e?e(c):c},getRegressionMean:function(a,b){return this.getInferenceStat(a,b,function(c){return c.mean},d3.format(".3f"))},getRegressionAbsMean:function(a,b){return this.getInferenceStat(a,b,function(c){return c.absMean},d3.format(".3f"))},getRegressionSquaredMean:function(a,b){return this.getInferenceStat(a,b,function(c){return c.squaredMean},d3.format(".3f"))},getRegressionCount:function(a,
b){a=this.getInferenceStat(a,b,function(c){return c.errors.length},null);return null==a?0:a},getBinaryClassificationCount:function(a,b){return this.getInferenceStat(a,b,function(c){return Object.values(c[0]).reduce(function(e,f){return e+f})},null)},getMulticlassClassificationCount:function(a,b){return this.getInferenceStat(a,b,function(c){return Object.values(c).reduce(function(e,f){for(var g=0,h=Object.keys(f),l=0;l<h.length;l++)g+=f[h[l]];return e+g},0)},null)},getRocChartId:function(a){return"rocchart"+
a},getPrChartId:function(a){return"prchart"+a},getPrintableValue_:function(a){var b=a.value||0===a.value?String(a.value):"\x3cfeature value missing\x3e";if(""==this.selectedSecondBreakdownFeature)return b;b+="/";return b=a.value2||0===a.value2?b+a.value2:b+"\x3cfeature value missing\x3e"},getFeatureName_:function(a){return 0===a.length?"\x3cnone\x3e":a},getCounterfactualModelName_:function(a){return"Model: "+a},getClassName_:function(a){return 0===a.length?"\x3cnone\x3e":a},shouldShowOverallThresholder_:function(a){return 0===
a.length},computeSelectedExampleAndInference:function(){this.counterfactualExampleAndInference=null;this.selected&&this.examplesAndInferences?(this.selectedExampleAndInference=0<this.selected.length?this.examplesAndInferences[this.selected[0]]:null,null==this.selectedExampleAndInference?this.globalPdPlots=!0:(this.globalPdPlots=!1,"dive"!=this.visMode&&this.showPartialDependencePlots_())):this.selectedExampleAndInference=null},setAttributions:function(){var a={},b=this.visdata[this.selected[0]],c=
/attributions__(.*)/,e=/attributions__(.*)_keys/,f;for(f in b){var g=c.exec(f);if(g){g=new RegExp("^(features__)?"+g[1]+"$");for(var h in b)if(g.test(h)){a[h]=b[f];break}}if(g=e.exec(f)){g=new RegExp("^(features__)?"+g[1]+"$");for(var l in b)if(g.test(l)){g=b[f];for(var n=b[f.replace("_keys","_values")],m=Array.apply(null,Array(Array.isArray(b[l])?b[l].length:1)).map(Number.prototype.valueOf,0),q=0;q<g.length;q++){var r=b[l].indexOf(g[q]);-1!=r&&(m[r]=n[q])}a[l]=m;break}}}this.attribution=a},shouldDisableGetExamplesButton_:function(a){return 0==
a.length},shouldDisableInferButton_:function(a,b,c,e){return 0==a.length||0==b.length||0==c.length||!e},areExamplesEditable_:function(a,b){return 0!=a.length&&0!=b.length},newInferences_:function(){var a=this;this.$.spinner.hidden=!0;this.updateInferences_(!0);requestAnimationFrame(function(){return a.updateInferenceStats_(!0)})},refreshInferencesNoRegen_:function(){var a=this;this.refreshInferences_(!0);requestAnimationFrame(function(){return a.updateInferenceStats_(!0)})},refreshInferences_:function(a){var b=
this;this.updateInferences_(!1);requestAnimationFrame(function(){return b.updateInferenceStats_(!a)})},updateInferences_:function(a){if(this.examplesAndInferences&&this.inferences.indices&&0!=this.inferences.indices.length&&this.inferences.results.length==this.numModels){for(var b={},c=!!this.inferences.results[0].classificationResult,e=0;e<this.inferences.indices.length;e++)if(c){b[this.inferences.indices[e]]=[];for(var f=0;f<this.inferences.results.length;f++){for(var g=this.inferences.results[f].classificationResult,
h=0;h<g.classifications[e].classes.length;h++)""==g.classifications[e].classes[h].label&&(g.classifications[e].classes[h].label=h.toString());b[this.inferences.indices[e]][f]=g.classifications[e].classes.sort(function(m,q){return q.score-m.score})}}else for(b[this.inferences.indices[e]]=[],f=0;f<this.inferences.results.length;f++)b[this.inferences.indices[e]][f]=[{label:"",score:this.inferences.results[f].regressionResult.regressions[e].value}];this.set("examplesAndInferences",this.examplesAndInferences.map(function(m,
q){var r=m.inferences?m.inferences:[];b[q]&&a&&(r=r.concat([b[q]]));return{example:m.example,inferences:r,changed:m.changed,orig:m.orig}}));var l=this,n=!1;this.visdata.forEach(function(m,q){if(c)l.setItemInferenceValue(m,q,l.selectedBreakdownFeature,l.selectedSecondBreakdownFeature);else for(var r=0;r<l.numModels;r++)m[l.strWithModelName_(" Inference value",r)]=l.examplesAndInferences[q].inferences[l.examplesAndInferences[q].inferences.length-1][r][0].score;if(c&&0<l.labelVocab.length){for(r=0;r<
l.examplesAndInferences[q].inferences.length;r++)for(var v=0;v<l.examplesAndInferences[q].inferences[r].length;v++)for(var u=0;u<l.examplesAndInferences[q].inferences[r][v].length;u++)l.examplesAndInferences[q].inferences[r][v][u].vocabLabel=l.labelVocab[l.examplesAndInferences[q].inferences[r][v][u].label];for(q=0;q<l.numModels;q++)m[l.strWithModelName_(" Inference label",q)]=l.labelVocab[m[l.strWithModelName_(" Inference value",q)]];n=!0}});this.updateCorrectness_();this.refreshDive_();this.inferences.indices.length==
this.examplesAndInferences.length&&(this.$.dive.colorBy=n?this.strWithModelName_(" Inference label",0):this.strWithModelName_(" Inference value",0),this.isRegression_(this.modelType)?this.$.dive.horizontalPosition=this.strWithModelName_(" Inference value",0):this.isBinaryClassification_(this.modelType,this.multiClass)&&(1==this.numModels?this.$.dive.verticalPosition=this.strWithModelName_(" Inference score",0):(this.$.dive.horizontalPosition=this.strWithModelName_(" Inference score",0),this.$.dive.verticalPosition=
this.strWithModelName_(" Inference score",1))));this.updatedExample=!1}},newAttributions_:function(a){if(0!=Object.keys(a).length){for(var b=0;b<a.indices.length;b++){for(var c=a.indices[b],e=Object.assign({},this.visdata[c]),f=a.attributions[0][b],g=Object.keys(f),h=0;h<g.length;h++)Array.isArray(f[g[h]])&&2==f[g[h]].length&&Array.isArray(f[g[h]][0])?(e["attributions__"+g[h]+"_keys"]=f[g[h]][0],e["attributions__"+g[h]+"_values"]=f[g[h]][1]):e["attributions__"+g[h]]=f[g[h]];this.set("visdata."+c,
e)}this.setAttributions();this.refreshDive_()}},setItemInferenceValue:function(a,b,c,e){var f=this.examplesAndInferences[b].inferences.length-1;if(this.multiClass)for(c=0;c<this.numModels;c++)a[this.strWithModelName_(" Inference value",c)]=this.examplesAndInferences[b].inferences[f][c][0].label;else for(f=this.overallThresholds,0!==c.length&&(f=this.featureValueThresholdsMap[this.createCombinedValueString_(a[c],a[e])].threshold),c=0;c<this.numModels;c++)e=this.getClassificationBestNonZero(b,c),a[this.strWithModelName_(" Inference score",
c)]=e.score,a[this.strWithModelName_(" Inference value",c)]=e.score>=f[c].threshold?e.label:this.defaultInferenceLabel.toString()},createCombinedValueString_:function(a,b){a=null==a?"":a;return null==b||""==b?a:a+("/"+b)},updateCorrectness_:function(){if(this.selectedLabelFeature&&this.examplesAndInferences)for(var a=0;a<this.examplesAndInferences.length;a++)for(var b=this.visdata[a],c=0;c<this.numModels;c++)"classification"==this.modelType?b[this.strWithModelName_(" Inference correct",c)]=b[this.selectedLabelFeature]==
b[this.strWithModelName_(" Inference value",c)]?"correct":"incorrect":(b[this.strWithModelName_(" Inference error",c)]=b[this.strWithModelName_(" Inference value",c)]-b[this.selectedLabelFeature],b[this.strWithModelName_(" Inference absolute error",c)]=Math.abs(b[this.strWithModelName_(" Inference error",c)]),b[this.strWithModelName_(" Inference squared error",c)]=b[this.strWithModelName_(" Inference error",c)]*b[this.strWithModelName_(" Inference error",c)])},inferClicked_:function(){var a=this,
b={inference_address:this.inferenceAddress,model_name:this.modelName,model_type:this.modelType,model_version:this.modelVersion,model_signature:this.modelSignature,label_vocab_path:this.labelVocabPath,use_predict:this.usePredictApi,predict_output_tensor:this.predictOutputTensor,predict_input_tensor:this.predictInputTensor};this.$.spinner.hidden=!1;if(!this.local){var c=this.makeUrl_("/data/plugin/whatif/infer",b);this.makeAsyncRequest_(c,function(e){a.$.spinner.hidden=!0;a.labelVocab=JSON.parse(e.value.vocab);
a.inferences=JSON.parse(e.value.inferences)},null)}this.fire("infer-examples",b)},exampleChange_:function(a){var b=0==this.selected.length?0:this.selected[0];this.set("selectedExampleAndInference.changed",!0);this.updateExample_(JSON.stringify(a.target.json),b);this.$$("#"+this.getInferenceHolderId_()).inference=null;this.visdata[b]=this.exampleToDataPoint_(a.target.json,b);this.showNearestCounterfactual=!1;this.refreshDive_();this.updatedExample=!0;this.selectedDataUpdated_()},refreshDiveImpl_:function(){var a=
this.visdata;this.visdata=[];this.visdata=a;this.selectedExampleMax=this.visdata.length-1;this.$.overview.protoInput=this.$.overview.getStatsProto([{name:"",data:a}]);this.calculateDistanceStats_(this.$.overview.protoInput.toObject());a=this.$.dive.selectedData;this.$.dive.selectedData=[];this.$.dive.selectedData=a;this.updateSprite()},refreshDive_:function(){var a=this;this.debounce("refreshDiveDebounce",function(){return a.refreshDiveImpl_()},500)},calculateDistanceStats_:function(a){this.distanceStats_=
{};for(var b=0;b<a.datasetsList[0].featuresList.length;b++){var c=a.datasetsList[0].featuresList[b],e=c.name;this.distanceStats_[e]={};if(c.numStats)this.distanceStats_[e].stdDev=c.numStats.stdDev;else{for(var f=0,g=c.stringStats.rankHistogram.bucketsList,h=0;h<g.length;h++){var l=g[h].sampleCount/c.stringStats.commonStats.numNonMissing;f+=l*l}this.distanceStats_[e].probSameValue=f}}},updateExample_:function(a,b){this.fire("update-example",{example:a,index:b});if(!this.local){var c=this.makeUrl_("/data/plugin/whatif/update_example",
null);this.makeAsyncRequest_(c,null,{example:a,index:b})}},getInferenceHolderId_:function(){return"inference_"},makeUrl_:function(a,b){b&&(a+="?"+Object.keys(b).map(function(c){return c+"\x3d"+encodeURIComponent(b[c])}).join("\x26"));return a},showToast_:function(a){var b=document.createElement("paper-toast");b.duration=1E4;document.body.appendChild(b);b.text=a;b.show();console.error(a)},makeAsyncRequest_:function(a,b,c,e){var f=this;e=void 0===e?function(){}:e;var g=this._canceller.cancellable(function(h){h.cancelled||
(h.value&&h.value.error?(f.showToast_(h.value.error),f.$.spinner.hidden=!0,null!=e&&e()):b&&b(h))});this._requestManager.request(a,c).then(g).catch(function(h){f.exampleStatusStr="Request failed";f.showToast_("Request failed: "+h);f.$.spinner.hidden=!0;null!=e&&e()})},dataPointValueFromFeature_:function(a,b){var c=null;a.int64List?c=a.int64List.value:a.floatList?c=a.floatList.value:a.bytesList&&a.bytesList.value&&(c=a.bytesList.value.map(function(e){if(1E5<e.length)return"ERROR: string not decoded due to length";
try{return atob(e)}catch(f){return console.error("Error decoding string: "+f),"ERROR: error decoding string"}}));return b&&c&&1==c.length?(a=c[0],isNaN(a)?a:Number(a)):c},exampleToDataPoint_:function(a,b){var c={},e=a.features||a.context,f=e&&"feature"in e?Object.keys(e.feature):[];for(n in f){var g=f[+n];if(g!=this.imageFeatureName){var h=this.dataPointValueFromFeature_(e.feature[g],!0);null!=h&&(c[g]=h)}}e="featureLists"in a?Object.keys(a.featureLists.featureList):[];for(var l in e){f=e[+l];var n=
a.featureLists.featureList[f].feature;g=[];for(h=0;h<n.length;h++){var m=this.dataPointValueFromFeature_(n[h],!1);m&&(g=g.concat(m))}c[f]=g}c[" Datapoint ID"]=b;return c},getExamplesAndCloseSettings_:function(){this.settingsClicked_();this.updateNumberOfModels();this.getExamples_()},showModelNumbers_:function(){return 1>=this.numModels},updateExampleContents:function(a,b){this.exampleStatusStr=a.length+" datapoints loaded";this.$.noexamples.style.display="none";this.$.spinner.hidden=!0;this.examplesAndInferences=
a.map(function(e){return{example:JSON.parse(e),changed:!1,orig:JSON.parse(e)}});this.updatedExample=!0;var c=this;this.visdata=this.examplesAndInferences.map(function(e,f){return c.exampleToDataPoint_(e.example,f)});this.$.dive.atlasUrl="";this.$.dive.imageFieldName="";this.hasSprite=b;this.refreshDive_();this.shouldDisableInferButton_(this.examplesAndInferences,this.modelName,this.inferenceAddress,this.updatedExample)||this.inferClicked_();this.setInferenceFromExampleData()},setInferenceFromExampleData:function(){if(0<
this.visdata.length)if(null!=this.visdata[0].predictions__probabilities){var a={},b=Array.apply(null,{length:this.visdata.length}).map(Number.call,Number);a.indices=b;a.results=[{classificationResult:{classifications:[]}}];for(var c=0;c<b.length;c++)a.results[0].classificationResult.classifications[c]={classes:[{label:"0",score:this.visdata[c].predictions__probabilities[0]},{label:"1",score:this.visdata[c].predictions__probabilities[1]}]};this.inferences=a}else if(null!=this.visdata[0].predictions){a=
{};b=Array.apply(null,{length:this.visdata.length}).map(Number.call,Number);a.indices=b;a.results=[{regressionResult:{regressions:[]}}];for(c=0;c<b.length;c++)a.results[0].regressionResult.regressions[c]={value:this.visdata[c].predictions};this.inferences=a}},getExamples_:function(){var a=this,b=this.makeUrl_("/data/plugin/whatif/examples_from_path",{examples_path:this.examplesPath,max_examples:this.maxExamples,sampling_odds:this.samplingOdds,sequence_examples:this.sequenceExamples});this.exampleStatusStr=
"Loading datapoints...";this.makeAsyncRequest_(b,function(c){a.updateExampleContents(c.value.examples,c.value.sprite)},null);this.$.spinner.hidden=!1},updateSprite:function(){this.hasSprite&&(this.$.dive.atlasUrl=null,this.$.dive.atlasUrl=this.local?this.localAtlasUrl:this.makeUrl_("/data/plugin/whatif/sprite",{}))},selectedDataUpdated_:function(){this.selectedExampleNum=0<this.selected.length?this.selected[0]:"";this.visdata&&0<this.visdata.length&&(this.partialDepPlotPendingFeatures=[])},copyDatapoint_:function(){var a=
this,b=JSON.stringify(this.selectedExampleAndInference.example);b={example:JSON.parse(b),changed:!1,orig:JSON.parse(b)};this.examplesAndInferences.push(b);this.selectedExampleAndInference=b;this.visdata.push(this.exampleToDataPoint_(b.example,this.visdata.length));b=this.selected[0];this.showNearestCounterfactual=!1;this.selected[0]=this.visdata.length-1;this.selectedDataUpdated_();this.updatedExample=!0;this.fire("duplicate-example",{index:b});this.local?this.refreshDive_():(b=this.makeUrl_("/data/plugin/whatif/duplicate_example",
{index:b}),this.makeAsyncRequest_(b,function(){a.refreshDive_()},null))},deleteDatapointDialog_:function(){this.$.deletedialog.open()},deleteDatapoint_:function(){var a=this,b=this.selected[0];this.examplesAndInferences.splice(b,1);this.visdata.splice(b,1);for(var c=b;c<this.visdata.length;c++)this.visdata[c][" Datapoint ID"]=c;this.comparedIndices=[];this.selected=[];this.selectedDataUpdated_();this.fire("delete-example",{index:b});this.$.dive.selectedIndices=[];this.local?this.refreshDive_():(b=
this.makeUrl_("/data/plugin/whatif/delete_example",{index:b}),this.makeAsyncRequest_(b,function(){a.refreshDive_()},null))},shouldDisableReset_:function(a){return!a},resetDatapoint_:function(){var a=this;this.set("selectedExampleAndInference.example",{});requestAnimationFrame(function(){a.selectedExampleAndInference.changed=!1;var b=JSON.stringify(a.selectedExampleAndInference.orig);a.set("selectedExampleAndInference.example",JSON.parse(b));a.visdata[a.selected[0]]=a.exampleToDataPoint_(a.selectedExampleAndInference.example,
a.selected[0]);a.updatedExample=!0;a.updateExample_(b,a.selected[0]);a.refreshDive_()})},addChart:function(a,b,c){var e;"numeric"==a?e=this.makeLineChart(b,c):"categorical"==a?e=this.makeBarChart(b,c):console.error("Unknown chartType: "+a);a=this.featureContainerByName(b).querySelector(".tf-category-pane-content");Polymer.dom(a).appendChild(e);b=this.partialDepPlotPendingFeatures.indexOf(b);-1<b&&this.partialDepPlotPendingFeatures.splice(b,1)},getSimpleAxisFormatter:function(a){return Plottable.Formatters.general(a)},
makeBarChart:function(a,b){var c=this,e="",f=b[0];!this.globalPdPlots&&(a=this.createPdEntryForCurrentValue(a,f,0))&&(e=a.step);var g={},h={};_.forEach(b,function(m,q){_.forEach(m,function(r,v){h[c.formatChartKey(v,q,b.length)]=_.map(r,function(u){return{x:u.step==e?u.step+" - original value":u.step,y:u.scalar}}).sort(function(u,w){return w.y-u.y});c.isBinaryClassification_(c.modelType,c.multiClass)&&(g[c.formatChartKey(v,q,b.length)]=_.map(r,function(u){return{x:u.step==e?u.step+" - original value":
u.step,scalar:u.scalar,y:c.overallThresholds[q].threshold}}).sort(function(u,w){return w.scalar-u.scalar}))})});var l=cl.multiscaleFormatter(cl.Y_TOOLTIP_FORMATTER_PRECISION);f=[{title:"Inference value",evaluate:function(m){m=c.splitChartKey(m.key,b.length).label;if(!isNaN(m)&&0<m.length&&c.labelVocab){var q=+m;q<c.labelVocab.length&&0<=q&&(m+=" ("+c.labelVocab[q]+")")}return m}},{title:"Feature value",evaluate:function(m){return m.value.x}},{title:"Score",evaluate:function(m){return l(m.value.y)}}];
2<=b.length&&f.push({title:"Model",evaluate:function(m){return c.splitChartKey(m.key,b.length).model}});a=document.createElement("div");a.classList.add("pd-holder");var n=document.createElement("vz-bar-chart");n.colorScale=(new Plottable.Scales.Color).range(this.pdPlotColors);n.linesColorScale=(new Plottable.Scales.Color).range(this.pdPlotTransparentColors);n.data=h;n.lines=g;n.tooltipColumns=f;a.appendChild(n);f=document.createElement("div");f.classList.add("pd-y-label");f.innerText=this.isRegression_(this.modelType)?
"Inference value":"Inference score";a.appendChild(f);return a},splitChartKey:function(a,b){var c=a,e="";2<=b&&(b=a.indexOf("(model"),c=a.substring(0,b),e=a.substring(b+7,a.lastIndexOf(")")));return{label:c,model:e}},formatChartKey:function(a,b,c){return 1==c?a:a+" (model "+this.getModelName_(b)+")"},makeLineChart:function(a,b){function c(w){return Number.isNaN(w)?"NaN":n(w)}var e=this,f=document.createElement("div");f.classList.add("pd-holder");var g=document.createElement("vz-line-chart"),h=[],l=
[],n=cl.multiscaleFormatter(cl.Y_TOOLTIP_FORMATTER_PRECISION);"classification"==this.modelType&&(g.defaultYRange=[0,1]);var m=[{title:"Inference value",evaluate:function(w){w=e.splitChartKey(w.dataset.metadata().name,b.length).label;if(!isNaN(w)&&0<w.length&&e.labelVocab){var z=+w;z<e.labelVocab.length&&0<=z&&(w+=" ("+e.labelVocab[z]+")")}return w}},{title:"Feature value",evaluate:function(w){return c(w.datum.step)}},{title:"Score",evaluate:function(w){return c(w.datum.scalar)}}];2<=b.length&&m.push({title:"Model",
evaluate:function(w){return e.splitChartKey(w.dataset.metadata().name,b.length).model}});g.tooltipColumns=m;var q=[],r=0;for(m={$jscomp$loop$prop$modelInd$89:0};m.$jscomp$loop$prop$modelInd$89<b.length;m={$jscomp$loop$prop$modelInd$89:m.$jscomp$loop$prop$modelInd$89,$jscomp$loop$prop$modelData$88:m.$jscomp$loop$prop$modelData$88},m.$jscomp$loop$prop$modelInd$89++){m.$jscomp$loop$prop$modelData$88=b[m.$jscomp$loop$prop$modelInd$89];var v=_.keys(m.$jscomp$loop$prop$modelData$88);r=m.$jscomp$loop$prop$modelInd$89*
v.length;v.forEach(function(w){return function(z){h.push(e.pdPlotColors[r++]);var A=e.formatChartKey(z,w.$jscomp$loop$prop$modelInd$89,b.length);g.setSeriesData(A,w.$jscomp$loop$prop$modelData$88[z]);q.push(A)}}(m));r=m.$jscomp$loop$prop$modelInd$89*v.length;if(!this.globalPdPlots&&(v=this.createPdEntryForCurrentValue(a,m.$jscomp$loop$prop$modelData$88,m.$jscomp$loop$prop$modelInd$89))){var u=this.formatChartKey(_.keys(m.$jscomp$loop$prop$modelData$88)[0]+" - original value ",m.$jscomp$loop$prop$modelInd$89,
b.length);g.setSeriesData(u,[v]);q.push(u);h.push(this.pdPlotColors[r].brighter())}this.isBinaryClassification_(this.modelType,this.multiClass)&&(v=this.formatChartKey("classification threshold",m.$jscomp$loop$prop$modelInd$89,b.length),u=b[0][_.keys(b[0])].map(function(w){return function(z){return{step:z.step,scalar:e.overallThresholds[w.$jscomp$loop$prop$modelInd$89].threshold}}}(m)),h.push(this.pdPlotTransparentColors[r]),g.setSeriesData(v,u),l.push(v),q.push(v))}g.colorScale=(new Plottable.Scales.Color).range(h);
g.xAxisFormatter=this.getSimpleAxisFormatter(this.axisPrecision);g.yAxisFormatter=this.getSimpleAxisFormatter(this.axisPrecision);g.seriesWithoutTooltips=l;g.colorScale.domain(q);g.setVisibleSeries(q);f.appendChild(g);l=document.createElement("div");l.classList.add("pd-y-label");l.innerText=this.isRegression_(this.modelType)?"Inference value":"Inference score";f.appendChild(l);l=document.createElement("div");l.classList.add("pd-x-label");l.innerText=a;f.appendChild(l);return f},createPdEntryForCurrentValue:function(a,
b,c){var e=_.keys(b)[0],f=e.indexOf("index");b=+e;var g=0;-1<f&&(b=+e.substring(0,e.indexOf(" ")),g=+e.substring(f+6,e.indexOf(")")));a=this.visdata[this.selected[0]][a];Array.isArray(a)&&(a=a[g]);c=this.selectedExampleAndInference.inferences[this.selectedExampleAndInference.inferences.length-1][c];g=-1;for(e=0;e<c.length;e++)if(c[e].label==b.toString()||""==c[e].label){g=c[e].score;break}return-1==g?null:{step:a,scalar:g}},showToast:function(a){var b=document.createElement("paper-toast");document.body.appendChild(b);
b.text=a;b.show();console.error(a)},deletePdPlotSpinner:function(a){(a=this.featureContainerByName(a).querySelector("paper-spinner-lite"))&&a.parentElement&&a.parentElement.removeChild(a)},makeChartForFeature:function(a,b,c){var e=this;this.deletePdPlotSpinner(b);c.forEach(function(f){return e.addChart(a,b,f)})},getInferenceVisualization:function(a,b){var c=this,e=this.getUniqueByEvent(b,".x-min").value,f=this.getUniqueByEvent(b,".x-max").value;b=this.getUniqueByEvent(b,".feature-index-pattern").value;
e={feature_name:a,inference_address:this.inferenceAddress,model_name:this.modelName,model_type:this.modelType,model_version:this.modelVersion,model_signature:this.modelSignature,x_min:e,x_max:f,feature_index_pattern:b,example_index:this.globalPdPlots?-1:this.selected[0],use_predict:this.usePredictApi,predict_output_tensor:this.predictOutputTensor,predict_input_tensor:this.predictInputTensor};this.local?this.fire("infer-mutants",e):(e=Rk.addParams("/data/plugin/whatif/infer_mutants",e),this.makeAsyncRequest_(e,
function(g){return c.makeChartForFeature(g.value.chartType,a,g.value.data)}.bind(this),null,function(){return c.handleChartErrorForFeature(a)}.bind(this)));e=this.featureContainerByName(a).querySelector(".tf-category-pane-content");f=document.createElement("paper-spinner-lite");f.setAttribute("active",!0);Polymer.dom(e).appendChild(f)},handleChartErrorForFeature:function(a){var b=this.partialDepPlotPendingFeatures.indexOf(a);-1<b&&this.partialDepPlotPendingFeatures.splice(b,1);this.deletePdPlotSpinner(a)},
shouldHideFeatureIndicesSelector:function(a,b){return!b||0==b.length||!this.visdata||this.visdata.length<=b[0]?!0:!Array.isArray(this.visdata[b[0]][a])},shouldHidePdInputContainer:function(a,b,c){return this.shouldHideFeatureIndicesSelector(b,c)&&a?!0:!1},featureContainerByName:function(a){return this.$$('[data-feature-name\x3d"'+a+'"]')},featureContainerByEvent:function(a){for(a=a.target;!a.classList.contains("feature-container");)a=a.parentNode;return a},getUniqueByEvent:function(a,b){return this.featureContainerByEvent(a).querySelector(b)},
partialDepPlotEligibleFeaturesSet:function(a){var b=this;a&&0!=a.length&&setTimeout(function(){b.$$(".pd-entry-container").hidden&&b.$$(".tf-category-pane").click()},100)},categoryPaneClicked:function(a){var b=this.featureContainerByEvent(a);b.querySelector(".pd-entry-container").hasAttribute("hidden")?(this.drawPdCharts_(a),this.showPdElement_(b)):this.hidePdElement_(b)},drawPdCharts_:function(a){var b=a.model.get("item").name;-1<this.partialDepPlotPendingFeatures.indexOf(b)||(this.partialDepPlotPendingFeatures.push(b),
this.getInferenceVisualization(b,a))},clearPdElementCharts_:function(a){a.querySelectorAll(".pd-holder").forEach(function(b){b&&b.parentElement&&b.parentElement.removeChild(b)})},hidePdElement_:function(a){var b=a.querySelector(".pd-entry-container");this.clearPdElementCharts_(b);b.setAttribute("hidden",!0);b=a.querySelector(".pd-row-arrow");b.classList.remove("normal-icon");b.classList.add("rotated-icon");a=a.querySelector(".perf-table-entry");a.classList.add("perf-table-row");a.classList.remove("perf-table-row-expanded")},
showPdElement_:function(a){a.querySelector(".pd-entry-container").removeAttribute("hidden");var b=a.querySelector(".pd-row-arrow");b.classList.add("normal-icon");b.classList.remove("rotated-icon");a=a.querySelector(".perf-table-entry");a.classList.remove("perf-table-row");a.classList.add("perf-table-row-expanded")},hideAllPdElements_:function(){for(var a=Polymer.dom(this.root).querySelectorAll(".feature-container"),b=0;b<a.length;b++)this.hidePdElement_(a[b])},pdInputChanged:function(a){var b=this;
this.debounce("pdInputChangedDebounce",function(){return b.pdInputChangedImpl(a)},500)},pdInputChangedImpl:function(a){var b=this.getUniqueByEvent(a,".tf-category-pane-content");this.clearPdElementCharts_(b);this.drawPdCharts_(a)},populatePdTabs:function(){var a=this;this.hideAllPdElements_();if(this.local)this.fire("get-eligible-features");else{var b=Rk.addParams("/data/plugin/whatif/eligible_features",{});this.makeAsyncRequest_(b,function(c){a.set("partialDepPlotEligibleFeatures",c.value)},null)}},
toggleTrueLabelSetup:function(){this.$.collapsetruelabel.toggle()},toggleExplorerSetup:function(){this.$$("#collapseexplorer").toggle()},toggleContextTools:function(){this.$.collapsecontexttools.toggle()},togglePerformance:function(){this.$.collapseperformance.toggle()},toggleInferenceResults:function(){this.$$("#collapseinference").toggle()},getExpandCollapseIcon:function(a){return a?"expand-less":"expand-more"},getExpandCollapsePerfIconClass:function(a){return a?"normal-icon":"rotated-icon"},getPerfTableRowClass:function(a){return a?
"perf-table-row-expanded":"perf-table-row"},getPerfTableModelClass:function(a){return 2>a?"perf-table-model-single":"perf-table-model"},getDatapointEditorTitle:function(a,b){return this.getSectionTitle("Edit",a,b)},getInferTitle:function(a,b){return this.getSectionTitle("Infer",a,b)},getSectionTitle:function(a,b,c){null!=b&&""!==b&&(a=null!=c&&0<c.length?a+(" - Datapoints "+b+" and "+c[0]):a+(" - Datapoint "+b));return a},togglePerfRow:function(a){var b=this;for(a=a.target;null!=a&&!a.dataset.index;)a=
a.parentNode;null!=a&&(a=a.dataset.index,this.set("featureValueThresholds."+a+".opened",!this.featureValueThresholds[a].opened),this.featureValueThresholds[a].opened&&requestAnimationFrame(function(){return b.updateInferenceStats_(!0)}))},getPerformanceTabTitle:function(a,b){return this.isBinaryClassification_(a,b)?"Performance \x26 Fairness":"Performance"},getPerfTableTitle:function(a,b,c,e){var f=this.getPrintableOptimizationName(c);if(null==a||0==a.length)return"custom"==c?"Explore overall performance":
f;null!=b&&0!=b.length&&(a+="/"+b);return f+" for "+e.length+" values of "+a},getNoThresholdPerfTableTitle:function(a,b,c){if(null==a||0==a.length)return"Explore overall performance";null!=b&&0!=b.length&&(a+="/"+b);return a+" ("+c.length+" values)"},getPrintableOptimizationName:function(a){return"custom"==a?"Custom thresholds":"unaware"==a?"Optimal single threshold":"demoparity"==a?"Demographic parity thresholds":"equalopp"==a?"Equal opportunity thresholds":"equalacc"==a?"Equal accuracy thresholds":
"Optimal group thresholds"},getFeatureSortBy:function(a,b){var c=["Count","Alphabetical"];return c=this.isBinaryClassification_(a,b)?c.concat(["Accuracy","False positives","False negatives"]):this.isMultiClass_(a,b)?c.concat(["Accuracy"]):c.concat(["Mean error","Mean absolute error","Mean squared error"])},selectedFeatureSortChanged_:function(){var a=this.featureValueThresholds;this.featureValueThresholds=[];this.featureValueThresholds=this.sortFeatureValues(a);null!=this.regressionEntries_&&(a=this.regressionEntries_,
this.regressionEntries_=[],this.regressionEntries_=this.sortRegressionEntries(a))},getSliderClass:function(a){return"slider "+(0==a?"slider-model-one":"slider-model-two")},formatError:function(a){return d3.format(".3f")(a)},expandAllPerformance:function(){var a=this;if(null!=this.featureValueThresholds){for(var b=0;b<this.featureValueThresholds.length;b++)this.set("featureValueThresholds."+b+".opened",!0);requestAnimationFrame(function(){return a.updateInferenceStats_(!0)})}},collapseAllPerformance:function(){if(null!=
this.featureValueThresholds)for(var a=0;a<this.featureValueThresholds.length;a++)this.set("featureValueThresholds."+a+".opened",!1)}});$k.registerDashboard({plugin:"whatif",elementName:"tf-interactive-inference-dashboard",tabName:"What-If Tool"});
</script>
</dom-module>














<script>//~~WEBPATH~~/tf-hparams-utils/tf-hparams-utils.html.js
(function(a){(function(b){(function(c){function e(u){return""!==u.displayName&&void 0!==u.displayName?u.displayName:u.name}function f(u){if(""!==u.displayName&&void 0!==u.displayName)return u.displayName;var w=u.name.group;u=u.name.tag;void 0===w&&(w="");void 0===u&&(u="");return""===w?u:w+"."+u}function g(u){return u.hparamInfos.length}function h(u){return u.metricInfos.length}function l(u,w){return u.find(function(z){return _.isEqual(z.name,w)})}function n(u,w,z){u=l(w.metricValues,u.metricInfos[z].name);
return void 0===u?void 0:u.value}function m(u,w,z){return w.hparams[u.hparamInfos[z].name]}function q(u,w,z){return z<u.hparamInfos.length?m(u,w,z):n(u,w,z-u.hparamInfos.length)}function r(u){return _.isNumber(u)?u.toPrecision(5):void 0===u?"":u.toString()}function v(u,w){return u*u+w*w}c.hparamName=e;c.metricName=f;c.schemaColumnName=function(u,w){return w<u.hparamInfos.length?e(u.hparamInfos[w]):f(u.metricInfos[w-u.hparamInfos.length])};c.numHParams=g;c.numMetrics=h;c.numColumns=function(u){return g(u)+
h(u)};c.hparamValueByName=function(u,w){return u[w]};c.metricValueByName=l;c.metricValueByIndex=n;c.hparamValueByIndex=m;c.columnValueByIndex=q;c.numericColumnExtent=function(u,w,z){return d3.extent(w,function(A){return q(u,A,z)})};c.prettyPrintHParamValueByName=function(u,w){return r(u[w])};c.prettyPrintMetricValueByName=function(u,w){return r(l(u,w))};c.sessionGroupWithName=function(u,w){return u.find(function(z){return z.name===w})};c.prettyPrint=r;c.l2NormSquared=v;c.euclideanDist=function(u,
w,z,A){return Math.sqrt(v(u-z,w-A))};c.pointToRectangleDist=function(u,w,z,A,E,C){if(u<z&&w<A)return c.euclideanDist(u,w,z,A);if(z<=u&&u<E&&w<A)return A-w;if(E<=u&&w<A)return c.euclideanDist(u,w,E,A);if(u<z&&A<=w&&w<C)return z-u;if(z<=u&&u<E&&A<=w&&w<C)return 0;if(E<=u&&A<=w&&w<C)return u-E;if(u<z&&C<=w)return c.euclideanDist(u,w,z,C);if(z<=u&&u<E&&C<=w)return w-C;if(E<=u&&C<=w)return c.euclideanDist(u,w,E,C);throw"Point (x,y) must be in one of the regions defined above.";};c.translateStr=function(u,
w){return void 0===w?"translate("+u+")":"translate("+u+","+w+")"};c.rotateStr=function(u,w){var z="rotate(90";void 0!==u&&void 0!==w&&(z=z+","+u+","+w);return z+")"};c.isNullOrUndefined=function(u){return null===u||void 0===u};c.quadTreeVisitPointsInRect=function(u,w,z,A,E,C){u.visit(function(D,J,M,H,K){if(void 0===D.length){do J=u.x()(D.data),M=u.y()(D.data),w<=J&&J<A&&z<=M&&M<E&&C(D.data);while(D=D.next);return!0}return J>=A||H<=w||M>=E||K<=z})};c.quadTreeVisitPointsInDisk=function(u,w,z,A,E){u.visit(function(C,
D,J,M,H){if(void 0===C.length){do D=u.x()(C.data),J=u.y()(C.data),D=c.euclideanDist(w,z,D,J),D<=A&&E(C.data,D);while(C=C.next);return!0}return c.pointToRectangleDist(w,z,D,J,M,H)>A})};c.filterSet=function(u,w){var z=new Set;u.forEach(function(A){w(A)&&z.add(A)});return z};c.setArrayObservably=function(u,w){var z=u.get("sessionGroups",u);Array.isArray(z)?u.splice.apply(u,["sessionGroups",0,z.length].concat(w)):u.set("sessionGroups",w)};c.hashOfString=function(u){for(var w=0,z=0;z<u.length;++z)w=31*
w+u.charCodeAt(z)&4294967295;return w+Math.pow(2,31)}})(b.utils||(b.utils={}))})(a.hparams||(a.hparams={}))})(tf||(tf={}));
</script>





<dom-module id="vaadin-split-layout">
  <template>
    <style>
      :host {
        display: flex;
        overflow: hidden !important;
        transform: translateZ(0);
      }

      :host([vertical]) {
        flex-direction: column;
      }

      :host ::slotted(*) {
        flex: 1 1 auto;
        overflow: auto;
      }

      :host > #splitter {
        flex: none;
        position: relative;
        z-index: 1;
        overflow: visible;
        min-width: 8px;
        min-height: 8px;
        background: var(--divider-color, #ccc);
        fill: var(--primary-background-color, #fff);
        @apply --vaadin-split-layout-splitter;
      }

      :host(:not([vertical])) > #splitter {
        cursor: ew-resize;
      }

      :host([vertical]) > #splitter {
        cursor: ns-resize;
      }

      #handle,
      #splitter ::slotted([slot=handle]) {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      :host([vertical]) > #splitter #handle {
        transform: translate(-50%, -50%) rotate(90deg);
      }
    </style>
    <slot id="primary" name="primary"></slot>
    <div id="splitter" on-track="_onHandleTrack" on-down="_preventDefault">
      <slot name="handle">
        <svg id="handle" width="40" height="40">
          <rect x="19" y="8" width="2" height="24"></rect>
        </svg>
      </slot>
    </div>
    <slot id="secondary" name="secondary"></slot>
  </template>

  <script>//~~WEBPATH~~/vaadin-split-layout/vaadin-split-layout.html.js
Polymer({is:"vaadin-split-layout",behaviors:[Polymer.IronResizableBehavior],properties:{vertical:{type:Boolean,reflectToAttribute:!0,value:!1},_previousPrimaryPointerEvents:String,_previousSecondaryPointerEvents:String},attached:function(){this._observer=Polymer.dom(this).observeNodes(this._processChildren)},detached:function(){Polymer.dom(this).unobserveNodes(this._observer)},_processChildren:function(){this.getEffectiveChildren().filter(function(a){return a.classList.contains("splitter-handle")?
(Polymer.dom(a).setAttribute("slot","handle"),!1):!0}).forEach(function(a,b){0===b?(this._primaryChild=a,Polymer.dom(a).setAttribute("slot","primary")):1==b?(this._secondaryChild=a,Polymer.dom(a).setAttribute("slot","secondary")):Polymer.dom(a).removeAttribute("slot")}.bind(this))},_setFlexBasis:function(a,b,c){b=Math.max(0,Math.min(b,c));0===b&&(b=1E-6);a.style.flex="1 1 "+b+"px"},_onHandleTrack:function(a){if(this._primaryChild&&this._secondaryChild){var b=this.vertical?"height":"width";"start"===
a.detail.state?(this._startSize={container:this.getBoundingClientRect()[b]-this.$.splitter.getBoundingClientRect()[b],primary:this._primaryChild.getBoundingClientRect()[b],secondary:this._secondaryChild.getBoundingClientRect()[b]},this._previousPrimaryPointerEvents=this._primaryChild.style.pointerEvents,this._previousSecondaryPointerEvents=this._secondaryChild.style.pointerEvents,this._primaryChild.style.pointerEvents="none",this._secondaryChild.style.pointerEvents="none"):(b=this.vertical?a.detail.dy:
a.detail.dx,this._setFlexBasis(this._primaryChild,this._startSize.primary+b,this._startSize.container),this._setFlexBasis(this._secondaryChild,this._startSize.secondary-b,this._startSize.container),this.notifyResize(),"end"===a.detail.state&&(delete this._startSize,this._primaryChild.style.pointerEvents=this._previousPrimaryPointerEvents,this._secondaryChild.style.pointerEvents=this._previousSecondaryPointerEvents))}},_preventDefault:function(a){a.preventDefault()}});
</script>
</dom-module>




<dom-module id="tf-hparams-query-pane">
  <template>
    <div class="pane">
      <vaadin-split-layout vertical>
        <vaadin-split-layout vertical id="hyperparameters-metrics-statuses">
          <vaadin-split-layout vertical id="hyperparameters-metrics">
            <div class="section hyperparameters">
              <div class="section-title">Hyperparameters</div>
              <template is="dom-repeat" items="[[_hparams]]" as="hparam">
                <div class="hparam">
                  <paper-checkbox checked="{{hparam.displayed}}" on-change="_computeSchema" class="hparam-checkbox">
                    [[_hparamName(hparam.info)]]
                  </paper-checkbox>
                  
                  
                  <template is="dom-if" if="[[hparam.filter.domainDiscrete]]">
                    <template is="dom-repeat" items="[[hparam.filter.domainDiscrete]]">
                      <paper-checkbox checked="{{item.checked}}" class="discrete-value-checkbox" on-change="_queryServer">
                        [[_prettyPrint(item.value)]]
                      </paper-checkbox>
                    </template>
                  </template>
                  
                  <template is="dom-if" if="[[hparam.filter.interval]]">
                    <paper-input label="Min" value="{{hparam.filter.interval.min.value}}" allowed_pattern="[0-9.e\-]" on-value-changed="_queryServer" error-message="Invalid input" invalid="[[hparam.filter.interval.min.invalid]]" placeholder="-infinity">
                    </paper-input>
                    <paper-input label="Max" value="{{hparam.filter.interval.max.value}}" allowed_pattern="[0-9.e\-]" on-value-changed="_queryServer" error-message="Invalid input" invalid="[[hparam.filter.interval.max.invalid]]" placeholder="+infinity">
                    </paper-input>
                  </template>
                  
                  <template is="dom-if" if="[[hparam.filter.regexp]]">
                    <paper-input label="Regular expression" value="{{hparam.filter.regexp}}" on-value-changed="_queryServer">
                    </paper-input>
                  </template>
                </div>
              </template>
            </div>
            <div class="section metrics">
              <div class="section-title">Metrics</div>
              <template is="dom-repeat" items="{{_metrics}}" as="metric">
                <div class="metric">
                  
                  <paper-checkbox checked="{{metric.displayed}}" on-change="_computeSchema" class="metric-checkbox">
                    [[_metricName(metric.info)]]
                  </paper-checkbox>
                  <div class="inline-element">
                    <paper-input label="Min" value="{{metric.filter.interval.min.value}}" allowed-pattern="[0-9.e\-]" on-value-changed="_queryServer" error-message="Invalid input" invalid="{{metric.filter.interval.min.invalid}}" placeholder="-infinity">
                    </paper-input>
                  </div>
                  <div class="inline-element">
                    <paper-input label="Max" allowed-pattern="[0-9.e\-]" value="{{metric.filter.interval.max.value}}" on-value-changed="_queryServer" error-message="Invalid input" invalid="{{metric.filter.interval.max.invalid}}" placeholder="+infinity">
                    </paper-input>
                  </div>
                </div>
              </template>
            </div>
          </vaadin-split-layout>
          <div class="section status">
            <div class="section-title">Status</div>
            <template is="dom-repeat" items="[[_statuses]]" as="status">
              <paper-checkbox checked="{{status.allowed}}" on-change="_queryServer">
                [[status.displayName]]
              </paper-checkbox>
            </template>
          </div>
        </vaadin-split-layout>
        <vaadin-split-layout vertical id="sorting-paging">
          <div class="section sorting">
            <div class="section-title">Sorting</div>
            <paper-dropdown-menu label="Sort by" on-selected-item-changed="_queryServer" horizontal-align="left">
              <paper-menu class="dropdown-content" slot="dropdown-content" selected="{{_sortByIndex}}" on-selected-item-changed="_queryServer">
                <template is="dom-repeat" items="[[_hparams]]" as="hparam">
                  <paper-item>
                    [[_hparamName(hparam.info)]]
                  </paper-item>
                </template>
                <template is="dom-repeat" items="[[_metrics]]" as="metric">
                  <paper-item>
                    [[_metricName(metric.info)]]
                  </paper-item>
                </template>
              </paper-menu>
            </paper-dropdown-menu>
            <paper-dropdown-menu label="Direction" on-selected-item-changed="_queryServer" horizontal-align="left">
              <paper-menu class="dropdown-content" slot="dropdown-content" selected="{{_sortDirection}}">
                <paper-item>Ascending</paper-item>
                <paper-item>Descending</paper-item>
              </paper-menu>
            </paper-dropdown-menu>
          </div>
          <div class="section paging">
            <div class="section-title">Paging</div>
            <div>
              Number of matching session groups:
              [[_totalSessionGroupsCountStr]]
            </div>
            <div class="inline-element page-number-input">
              <paper-input label="Page #" value="{{_pageNumberInput.value}}" allowed-pattern="[0-9]" error-message="Invalid input" invalid="[[_pageNumberInput.invalid]]" on-value-changed="_queryServer">
                <div slot="suffix"> / [[_pageCountStr]]</div>
              </paper-input>
            </div>
            <div class="inline-element page-size-input">
              <paper-input label="Max # of session groups per page:" value="{{_pageSizeInput.value}}" allowed-pattern="[0-9]" error-message="Invalid input" invalid="[[_pageSizeInput.invalid]]" on-value-changed="_queryServer">
              </paper-input>
            </div>
          </div>
        </vaadin-split-layout></vaadin-split-layout></div>
      
    
    <style>
      .pane {
        display: flex;
        flex-direction: column;
        height: 100%;
      }
      .section {
        margin: 5px 10px 5px 10px;
        overflow-y: auto;
      }
      .section-title {
        display: block;
        font-weight: bold;
        text-decoration: underline;
        margin-bottom: 7px;
      }
      #hyperparameters-metrics-statuses {
        flex-basis: 70%;
        flex-shrink: 1;
        flex-grow: 1;
      }
      #hyperparameters-metrics {
        flex-basis: 90%;
        flex-shrink: 1;
        flex-grow: 1;
      }
      .hyperparameters {
        flex-basis: auto;
        flex-shrink: 1;
        flex-grow: 1;
      }
      .metrics {
        flex-basis: auto;
        flex-shrink: 1;
        flex-grow: 1;
      }
      .statuses {
        flex-basis: auto;
        flex-shrink: 0;
        flex-grow: 0;
      }
      #sorting-paging {
        flex-basis: 30%;
        flex-shrink: 0;
        flex-grow: 0;
      }
      .sorting {
        flex-basis: auto;
        flex-shrink: 0;
        flex-grow: 0;
      }
      .paging {
        flex-basis: auto;
        flex-shrink: 0;
        flex-grow: 0;
      }
      .discrete-value-checkbox, .metric-checkbox, .hparam-checkbox {
        display: block;
      }
      .discrete-value-checkbox {
        margin-left: 20px;
      }
      .hparam, .metric {
        display: block;
      }
      .inline-element {
        display: inline-block;
        width: 40%;
        margin-left: 10px;
      }
      .page-number-input {
        width: 20%;
      }
      .page-size-input {
        width: 60%;
      }
      vaadin-split-layout {
        height: 100%;
      }
      paper-menu {
        max-height: 15em;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-hparams-query-pane/tf-hparams-query-pane.html.js
Polymer({is:"tf-hparams-query-pane",properties:{backend:Object,experimentName:String,schema:{type:Object,value:function(){return{hparamInfos:[],metricInfos:[]}},readOnly:!0,notify:!0},sessionGroups:{type:Array,value:function(){return[]},readOnly:!0,notify:!0},_experiment:Object,_hparams:Array,_metrics:Array,_statuses:{type:Array,value:function(){return[{value:"STATUS_UNKNOWN",displayName:"Unknown",allowed:!0},{value:"STATUS_SUCCESS",displayName:"Success",allowed:!0},{value:"STATUS_FAILURE",displayName:"Failure",
allowed:!0},{value:"STATUS_RUNNING",displayName:"Running",allowed:!0}]}},_getExperimentResolved:{type:Object,value:function(){var a=this;return new Promise(function(b){a._resolveGetExperiment=b})}},_resolveGetExperiment:Function,_listSessionGroupsCanceller:{type:Object,value:function(){return new Rk.Canceller}},_sortByIndex:Number,_sortDirection:Number,_pageSizeInput:{type:Object,value:{value:"100",invalid:!1}},_pageNumberInput:{type:Object,value:{value:"1",invalid:!1}},_pageCountStr:{type:String,
value:"?"},_totalSessionGroupsCountStr:String},observers:["_computeExperimentAndRelatedProps(backend, experimentName)"],reload:function(){this._queryServer()},_computeExperimentAndRelatedProps:function(){var a=this,b=tf.hparams.utils;b.isNullOrUndefined(this.backend)||b.isNullOrUndefined(this.experimentName)||this.backend.getExperiment({experimentName:this.experimentName}).then(function(c){_.isEqual(c,a._experiment)||(a.set("_experiment",c),a._computeHParams(),a._computeMetrics(),a._computeSchema(),
a._queryServer(),a._resolveGetExperiment())})},_computeHParams:function(){var a=[];this._experiment.hparamInfos.forEach(function(b,c){var e={info:b,displayed:5>c,filter:{}};e.info.hasOwnProperty("domainDiscrete")?(e.filter.domainDiscrete=[],e.info.domainDiscrete.forEach(function(f){e.filter.domainDiscrete.push({value:f,checked:!0})})):"DATA_TYPE_BOOL"===e.info.type?e.filter.domainDiscrete=[{value:!1,checked:!0},{value:!0,checked:!0}]:"DATA_TYPE_FLOAT64"===e.info.type?e.filter.interval={min:{value:"",
invalid:!1},max:{value:"",invalid:!1}}:"DATA_TYPE_STRING"===e.info.type?e.filter.regexp="":console.warn("unknown hparam.info.type: %s",e.info.type);a.push(e)});this.set("_hparams",a)},_computeMetrics:function(){var a=[];this._experiment.metricInfos.forEach(function(b,c){a.push({info:b,filter:{interval:{min:{value:"",invalid:!1},max:{value:"",invalid:!1}}},displayed:5>c})});this.set("_metrics",a)},_computeSchema:function(){var a=this._hparams.filter(function(c){return c.displayed}).map(function(c){return c.info}),
b=this._metrics.filter(function(c){return c.displayed}).map(function(c){return c.info});this.splice.apply(this,["schema.hparamInfos",0,this.schema.hparamInfos.length].concat(a));this.splice.apply(this,["schema.metricInfos",0,this.schema.metricInfos.length].concat(b))},_queryServer:function(){var a=this;this.debounce("queryServer",function(){return a._queryServerNoDebounce()},100)},_queryServerNoDebounce:function(){var a=this;return this._sendListSessionGroupsRequest().then(this._listSessionGroupsCanceller.cancellable(function(b){var c=
b.value;b.cancelled||(0<=c.totalSize?(a.set("_pageCountStr",String(Math.ceil(c.totalSize/+a._pageSizeInput.value))),a.set("_totalSessionGroupsCountStr",c.totalSize)):(a.set("_pageCountStr","?"),a.set("_totalSessionGroupsCountStr","Unknown")),tf.hparams.utils.setArrayObservably(a,c.sessionGroups))}))},_sendListSessionGroupsRequest:function(){var a=this._buildListSessionGroupsRequest();if(null!==a)return this._listSessionGroupsCanceller.cancelAll(),this.backend.listSessionGroups(a)},_buildListSessionGroupsRequest:function(){function a(n){var m=
c.get(n+".min.value");console.assert(void 0!==m);m=""===m?"-Infinity":+m;c.set(n+".min.invalid",isNaN(m));e=e&&!isNaN(m);var q=c.get(n+".max.value");console.assert(void 0!==q);q=""===q?"Infinity":+q;c.set(n+".max.invalid",isNaN(q));e=e&&!isNaN(q);return isNaN(m)||isNaN(q)?null:{minValue:m,maxValue:q}}function b(n){var m=c.get(n+".value");console.assert(void 0!==m);m=+m;var q=Number.isInteger(m)&&0<m;c.set(n+".invalid",!q);e=e&&q;return q?m:null}var c=this,e=!0,f=this._statuses.filter(function(n){return n.allowed}).map(function(n){return n.value}),
g=[];this._hparams.forEach(function(n,m){var q={hparam:n.info.name};if(n.filter.domainDiscrete)q.filterDiscrete=[],n.filter.domainDiscrete.forEach(function(r){r.checked&&q.filterDiscrete.push(r.value)});else if(n.filter.interval)q.filterInterval=a("_hparams."+m+".filter.interval");else if(n.filter.regexp)q.filterRegexp=n.filter.regexp;else return console.error("hparam.filter with no domainDiscrete, interval or regexp properties set: %s",n),null;g.push(q)});this._metrics.forEach(function(n,m){n={metric:n.info.name,
filterInterval:a("_metrics."+m+".filter.interval")};g.push(n)});if(void 0!==this._sortByIndex&&void 0!==this._sortDirection){if(!(this._sortByIndex in g))return console.error("No column in colParams with index sortByIndex: %s",this._sortByIndex),null;g[this._sortByIndex].order=0===this._sortDirection?"ORDER_ASC":"ORDER_DESC"}var h=b("_pageNumberInput"),l=b("_pageSizeInput");return e?{experimentName:this.experimentName,allowedStatuses:f,colParams:g,startIndex:l*(h-1),sliceSize:l}:null},_metricSortByIndex:function(a){return a+
this._hparams.length},_hparamName:tf.hparams.utils.hparamName,_metricName:tf.hparams.utils.metricName,_prettyPrint:tf.hparams.utils.prettyPrint});
</script>
</dom-module>








<dom-module id="paper-header-panel">
  <template>
    <style>
      :host {
        @apply(--layout-vertical);

        position: relative;
        height: 100%;

        @apply(--paper-header-panel);
      }

      #mainContainer {
        @apply(--layout-flex);

        position: relative;
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
      }

      #mainPanel {
        @apply(--layout-vertical);
        @apply(--layout-flex);

        position: relative;
        min-height: 0;

        @apply(--paper-header-panel-body);
      }

      #mainContainer {
        @apply(--paper-header-panel-container);
      }

      /*
       * mode: scroll
       */
      :host([mode=scroll]) #mainContainer {
        @apply(--paper-header-panel-scroll-container);

        overflow: visible;
      }

      :host([mode=scroll]) {
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
      }

      /*
       * mode: cover
       */
      :host([mode=cover]) #mainContainer {
        @apply(--paper-header-panel-cover-container);

        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }

      :host([mode=cover]) #mainPanel {
        position: static;
      }

      /*
       * mode: standard
       */
      :host([mode=standard]) #mainContainer {
        @apply(--paper-header-panel-standard-container);
      }

      /*
       * mode: seamed
       */
      :host([mode=seamed]) #mainContainer {
        @apply(--paper-header-panel-seamed-container);
      }


      /*
       * mode: waterfall
       */
      :host([mode=waterfall]) #mainContainer {
        @apply(--paper-header-panel-waterfall-container);
      }

      /*
       * mode: waterfall-tall
       */
      :host([mode=waterfall-tall]) #mainContainer {
        @apply(--paper-header-panel-waterfall-tall-container);
      }

      #dropShadow {
        transition: opacity 0.5s;
        height: 6px;
        box-shadow: inset 0px 5px 6px -3px rgba(0, 0, 0, 0.4);

        @apply(--paper-header-panel-shadow);

        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        opacity: 0;
        pointer-events: none;
      }

      #dropShadow.has-shadow {
        opacity: 1;
      }
    </style>

    <content id="headerContent" select="paper-toolbar, .paper-header"></content>

    <div id="mainPanel">
      <div id="mainContainer" class$="[[_computeMainContainerClass(mode)]]">
        <content id="mainContent" select="*"></content>
      </div>
      <div id="dropShadow"></div>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-header-panel/paper-header-panel.html.js
(function(){var a={scroll:!0},b={standard:2,waterfall:1,"waterfall-tall":1},c={"waterfall-tall":!0};Polymer({is:"paper-header-panel",properties:{mode:{type:String,value:"standard",observer:"_modeChanged",reflectToAttribute:!0},shadow:{type:Boolean,value:!1},tallClass:{type:String,value:"tall"},atTop:{type:Boolean,value:!0,notify:!0,readOnly:!0,reflectToAttribute:!0}},observers:["_computeDropShadowHidden(atTop, mode, shadow)"],ready:function(){this.scrollHandler=this._scroll.bind(this)},attached:function(){this._addListener();
this._keepScrollingState()},detached:function(){this._removeListener()},get header(){return Polymer.dom(this.$.headerContent).getDistributedNodes()[0]},get scroller(){return this._getScrollerForMode(this.mode)},get visibleShadow(){return this.$.dropShadow.classList.contains("has-shadow")},_computeDropShadowHidden:function(e,f){f=b[f];this.shadow?this.toggleClass("has-shadow",!0,this.$.dropShadow):2===f?this.toggleClass("has-shadow",!0,this.$.dropShadow):1!==f||e?this.toggleClass("has-shadow",!1,this.$.dropShadow):
this.toggleClass("has-shadow",!0,this.$.dropShadow)},_computeMainContainerClass:function(e){var f={};f.flex="cover"!==e;return Object.keys(f).filter(function(g){return f[g]}).join(" ")},_addListener:function(){this.scroller.addEventListener("scroll",this.scrollHandler,!1)},_removeListener:function(){this.scroller.removeEventListener("scroll",this.scrollHandler)},_modeChanged:function(e,f){var g=this.header;g&&(c[f]&&!c[e]?(g.classList.remove(this.tallClass),this.async(function(){g.classList.remove("animate")},
200)):this.toggleClass("animate",c[e],g));this._keepScrollingState()},_keepScrollingState:function(){var e=this.scroller,f=this.header;this._setAtTop(0===e.scrollTop);f&&this.tallClass&&c[this.mode]&&this.toggleClass(this.tallClass,this.atTop||f.classList.contains(this.tallClass)&&e.scrollHeight<this.offsetHeight,f)},_scroll:function(){this._keepScrollingState();this.fire("content-scroll",{target:this.scroller},{bubbles:!1})},_getScrollerForMode:function(e){return a[e]?this:this.$.mainContainer}})})();
</script>
</dom-module>











<dom-module id="paper-toolbar">
  <template>
    <style>
      :host {
        --calculated-paper-toolbar-height: var(--paper-toolbar-height, 64px);
        --calculated-paper-toolbar-sm-height: var(--paper-toolbar-sm-height, 56px);
        display: block;
        position: relative;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        height: var(--calculated-paper-toolbar-height);
        background: var(--paper-toolbar-background, var(--primary-color));
        color: var(--paper-toolbar-color, var(--dark-theme-text-color));
        @apply --paper-toolbar;
      }

      :host(.animate) {
        transition: var(--paper-toolbar-transition, height 0.18s ease-in);
      }

      :host(.medium-tall) {
        height: calc(var(--calculated-paper-toolbar-height) * 2);
        @apply --paper-toolbar-medium;
      }

      :host(.tall) {
        height: calc(var(--calculated-paper-toolbar-height) * 3);
        @apply --paper-toolbar-tall;
      }

      .toolbar-tools {
        position: relative;
        height: var(--calculated-paper-toolbar-height);
        padding: 0 16px;
        pointer-events: none;
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --paper-toolbar-content;
      }

      /*
       * TODO: Where should media query breakpoints live so they can be shared between elements?
       */

      @media (max-width: 600px) {
        :host {
          height: var(--calculated-paper-toolbar-sm-height);
        }

        :host(.medium-tall) {
          height: calc(var(--calculated-paper-toolbar-sm-height) * 2);
        }

        :host(.tall) {
          height: calc(var(--calculated-paper-toolbar-sm-height) * 3);
        }

        .toolbar-tools {
          height: var(--calculated-paper-toolbar-sm-height);
        }
      }

      #topBar {
        position: relative;
      }

      /* middle bar */
      #middleBar {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
      }

      :host(.tall) #middleBar,
      :host(.medium-tall) #middleBar {
        -webkit-transform: translateY(100%);
        transform: translateY(100%);
      }

      /* bottom bar */
      #bottomBar {
        position: absolute;
        right: 0;
        bottom: 0;
        left: 0;
      }

      /*
       * make elements (e.g. buttons) respond to mouse/touch events
       *
       * `.toolbar-tools` disables touch events so multiple toolbars can stack and not
       * absorb events. All children must have pointer events re-enabled to work as
       * expected.
       */
      .toolbar-tools > ::slotted(*:not([disabled])) {
        pointer-events: auto;
      }

      .toolbar-tools > ::slotted(.title) {
        @apply --paper-font-common-base;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 20px;
        font-weight: 400;
        line-height: 1;
        pointer-events: none;
        @apply --layout-flex;
      }

      .toolbar-tools > ::slotted(.title) {
        margin-left: 56px;
      }

      .toolbar-tools > ::slotted(paper-icon-button + .title) {
        margin-left: 0;
      }

      /**
       * The --paper-toolbar-title mixin is applied here instead of above to
       * fix the issue with margin-left being ignored due to css ordering.
       */
      .toolbar-tools > ::slotted(.title) {
        @apply --paper-toolbar-title;
      }

      .toolbar-tools > ::slotted(paper-icon-button[icon=menu]) {
        margin-right: 24px;
      }

      .toolbar-tools > ::slotted(.fit) {
        position: absolute;
        top: auto;
        right: 0;
        bottom: 0;
        left: 0;
        width: auto;
        margin: 0;
      }

      /* TODO(noms): Until we have a better solution for classes that don't use
       * /deep/ create our own.
       */
      .start-justified {
        @apply --layout-start-justified;
      }

      .center-justified {
        @apply --layout-center-justified;
      }

      .end-justified {
        @apply --layout-end-justified;
      }

      .around-justified {
        @apply --layout-around-justified;
      }

      .justified {
        @apply --layout-justified;
      }
    </style>

    <div id="topBar" class$="toolbar-tools [[_computeBarExtraClasses(justify)]]">
      <slot name="top"></slot>
    </div>

    <div id="middleBar" class$="toolbar-tools [[_computeBarExtraClasses(middleJustify)]]">
      <slot name="middle"></slot>
    </div>

    <div id="bottomBar" class$="toolbar-tools [[_computeBarExtraClasses(bottomJustify)]]">
      <slot name="bottom"></slot>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-toolbar/paper-toolbar.html.js
Polymer({is:"paper-toolbar",hostAttributes:{role:"toolbar"},properties:{bottomJustify:{type:String,value:""},justify:{type:String,value:""},middleJustify:{type:String,value:""}},ready:function(){console.warn(this.is,"is deprecated. Please use app-layout instead!")},attached:function(){this._observer=this._observe(this);this._updateAriaLabelledBy()},detached:function(){this._observer&&this._observer.disconnect()},_observe:function(a){var b=new MutationObserver(function(){this._updateAriaLabelledBy()}.bind(this));
b.observe(a,{childList:!0,subtree:!0});return b},_updateAriaLabelledBy:function(){Polymer.dom.flush();for(var a=[],b=Array.prototype.slice.call(Polymer.dom(this.root).querySelectorAll("slot")).concat(Array.prototype.slice.call(Polymer.dom(this.root).querySelectorAll("content"))),c,e=0;c=b[e];e++){c=Polymer.dom(c).getDistributedNodes();for(var f,g=0;f=c[g];g++)if(f.classList&&f.classList.contains("title"))if(f.id)a.push(f.id);else{var h="paper-toolbar-label-"+Math.floor(1E4*Math.random());f.id=h;a.push(h)}}0<
a.length&&this.setAttribute("aria-labelledby",a.join(" "))},_computeBarExtraClasses:function(a){return a?a+("justified"===a?"":"-justified"):""}});
</script>
</dom-module>











<dom-module id="tf-hparams-scale-and-color-controls">
  <template>
    <div class="control-panel">
      
      <paper-dropdown-menu label="Color by" id="colorByDropDownMenu" horizontal-align="left">
        <paper-listbox class="dropdown-content" slot="dropdown-content" selected="{{options.colorByColumnIndex}}" id="colorByListBox">
          <template is="dom-repeat" items="[[options.columns]]" as="column" id="colorByColumnTemplate">
              <paper-item disabled="[[!_isNumericColumn(column.index)]]">
                [[column.name]]
              </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>

      
      <div class="columns-container">
        
        <template is="dom-repeat" items="[[options.columns]]" as="column">
          <template is="dom-if" if="[[_isNumericColumn(column.index)]]">
            <div class="column">
              <div class="column-title">
                [[column.name]]
              </div>
              <div>
                <paper-radio-group class="scale-radio-group" selected="{{column.scale}}" on-selected-changed="_notifyOptionsChanged">
                  <paper-radio-button name="LINEAR">
                    Linear
                  </paper-radio-button>
                  
                  <paper-radio-button id="logScaleButton_[[column.name]]" name="LOG" disabled="[[!_allowLogScale(column, sessionGroups.*)]]">
                    Logarithmic
                  </paper-radio-button>
                  <paper-radio-button name="QUANTILE">
                    Quantile
                  </paper-radio-button>
                </paper-radio-group>
              </div>
            </div>
          </template>
        </template>
      </div>
    </div>

    <style>
      :host {
        display: block;
      }
      .control-panel {
        overflow: auto;
      }
      .column {
        flex-grow:1;
        flex-shrink:1;
        margin-right: 5px;
        border: solid 1px darkgray;
        padding: 3px;
      }
      .column-title {
        /* Fit every title in one line so the radio boxes align vertically. */
        white-space: nowrap;
        text-decoration: underline;
      }
      .columns-container {
        display: flex;
        flex-direction: row;
      }
      .scale-radio-group paper-radio-button {
        padding: 2px;
        display: block;
      }
      paper-listbox {
        max-height: 15em;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-hparams-scale-and-color-controls/tf-hparams-scale-and-color-controls.html.js
Polymer({is:"tf-hparams-scale-and-color-controls",properties:{schema:Object,sessionGroups:Array,options:{type:Object,notify:!0,value:null}},observers:["_schemaChanged(schema.*)","_unselectDisabledLogScales(sessionGroups.*)"],_schemaChanged:function(){var a=this,b=this.schema,c={columns:b.hparamInfos.map(function(e,f){return{name:tf.hparams.utils.hparamName(e),index:f,scale:a._isNumericColumn(f)?"LINEAR":"NON_NUMERIC"}}).concat(b.metricInfos.map(function(e,f){f+=b.hparamInfos.length;return{scale:"LINEAR",
name:tf.hparams.utils.metricName(e),index:f}})),minColor:"#0000FF",maxColor:"#FF0000"};this.set("options",c);Polymer.dom.flush();this.set("options.colorByColumnIndex",this._defaultColorByColumnIndex())},_unselectDisabledLogScales:function(){var a=this;null!==this.options&&this.options.columns.forEach(function(b){var c="options.columns."+b.index;a._allowLogScale(b)||"LOG"!==b.scale||a.set(c+".scale","LINEAR")})},_allowLogScale:function(a){if(!this._isNumericColumn(a.index))return!1;var b=za(tf.hparams.utils.numericColumnExtent(this.schema,
this.sessionGroups,a.index));a=b.next().value;b=b.next().value;return 0<a||0>b},_notifyOptionsChanged:function(){var a=this.options;this.options={};this.options=a},_isNumericColumn:function(a){return a>=this.schema.hparamInfos.length||"DATA_TYPE_FLOAT64"===this.schema.hparamInfos[a].type},_defaultColorByColumnIndex:function(){if(0<this.schema.metricInfos.length)return this.schema.hparamInfos.length;var a=this.schema.hparamInfos.findIndex(function(b){return"DATA_TYPE_FLOAT64"===b.type});if(-1!==a)return a}});
</script>
</dom-module>












<dom-module id="vaadin-grid-active-item-themability-styles">
  <template>
    <style>
      vaadin-grid-table .vaadin-grid-row[active] .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content) {
        @apply(--vaadin-grid-body-row-active-cell);
      }
    </style>
  </template>
</dom-module>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-active-item-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.ActiveItemBehavior={properties:{activeItem:{type:Object,notify:!0,value:null}},listeners:{"cell-activate":"_activateItem"},observers:["_activeItemChanged(activeItem)"],_activateItem:function(a){var b=a.detail.model.item;this.activeItem=this.activeItem!==b?b:null;a.stopImmediatePropagation()},_activeItemChanged:function(){this.$.scroller._physicalItems&&this.$.scroller._physicalItems.forEach(function(a){this._updateItem(a,a.item)}.bind(this))}};
</script>



<dom-module id="vaadin-grid-table-table-scroll-styles">
  <template>
    <style>
      #table {
        position: relative;
        overflow: auto;
        -webkit-overflow-scrolling: touch;
        z-index: -2;
      }

      vaadin-grid-table[ios] #table {
        transform: none;
      }

      vaadin-grid-table[fixed-sections] #table {
        transform: none;
      }
    </style>
  </template>
</dom-module>

<dom-module id="vaadin-grid-table-scroll-styles">
  <template>
    <style>
      vaadin-grid-table {
        transform: translateZ(0);
      }

      vaadin-grid-table-header {
        position: absolute;
        top: 0;
        width: 100%;
      }

      vaadin-grid-table-footer {
        position: absolute;
        bottom: 0;
        width: 100%;
      }

      vaadin-grid-table-body {
        z-index: -1;
      }

      vaadin-grid-table[fixed-sections] {
        /* Any value other than ânoneâ for the transform results in the creation of both a stacking context and
        a containing block. The object acts as a containing block for fixed positioned descendants. */
        transform: translateZ(0);
        overflow: hidden;
      }

      vaadin-grid-table[fixed-sections] vaadin-grid-table-header,
      vaadin-grid-table[fixed-sections] vaadin-grid-table-footer {
        position: fixed;
      }

      vaadin-grid-table[fixed-sections] vaadin-grid-table-body#items {
        position: fixed;
        width: 100%;
        will-change: transform;
      }
    </style>
  </template>
</dom-module>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-table-scroll-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.TableScrollBehaviorImpl={properties:{_vidxOffset:{type:Number,value:0},ios:{type:Boolean,value:navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),reflectToAttribute:!0},fixedSections:{type:Boolean,reflectToAttribute:!0,computed:"_hasFixedSections(scrollbarWidth)"},_frozenCells:{type:Array,value:function(){return[]}},scrolling:{type:Boolean,reflectToAttribute:!0}},ready:function(){this.scrollTarget=this.$.table},attached:function(){this.listen(this.scrollTarget,"wheel",
"_onWheel")},detached:function(){this.unlisten(this.scrollTarget,"wheel","_onWheel")},scrollToScaledIndex:function(a){this._pendingScrollToScaledIndex=null;this.$.items.style.borderTopWidth||(this._pendingScrollToScaledIndex=a);a=Math.min(Math.max(a,0),this.size-1);this.$.table.scrollTop=a/this.size*this.$.table.scrollHeight;this._scrollHandler();this.scrollToIndex(a-this._vidxOffset);this._resetScrollPosition(this._scrollPosition);this._scrollHandler();this._vidxOffset+this.lastVisibleIndex===this.size-
1&&(this.$.table.scrollTop=this.$.table.scrollHeight-this.$.table.offsetHeight,this._scrollHandler())},_hasFixedSections:function(a){return navigator.userAgent.match(/Edge/)&&0===a},_onWheel:function(a){if(!a.ctrlKey&&!this._hasScrolledAncestor(a.target,a.deltaX,a.deltaY)){var b=this.$.table,c=a.deltaY;1===a.deltaMode&&(c*=grid.$.scroller._physicalAverage);var e=Math.abs(a.deltaX)+Math.abs(c);this._canScroll(b,a.deltaX,c)?(a.preventDefault(),b.scrollTop+=c,b.scrollLeft+=a.deltaX,this._scrollHandler(),
this._hasResidualMomentum=!0,this._ignoreNewWheel=this.debounce("ignore-new-wheel",function(){this._ignoreNewWheel=null},500)):this._hasResidualMomentum&&e<=this._previousMomentum||this._ignoreNewWheel?a.preventDefault():e>this._previousMomentum&&(this._hasResidualMomentum=!1);this._previousMomentum=e}},_hasScrolledAncestor:function(a,b,c){if(this._canScroll(a,b,c))return!0;if("vaadin-grid-cell-content"!==a.localName&&a!==this&&a.parentElement)return this._hasScrolledAncestor(a.parentElement,b,c)},
_canScroll:function(a,b,c){return 0<c&&a.scrollTop<a.scrollHeight-a.offsetHeight||0>c&&0<a.scrollTop||0<b&&a.scrollLeft<a.scrollWidth-a.offsetWidth||0>b&&0<a.scrollLeft},_scrollHandler:function(){var a=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),b=a-this._scrollPosition,c=this._ratio,e=0,f=this._hiddenContentSize,g=c,h=[];this._scrollPosition=a;this._lastVisibleIndexVal=this._firstVisibleIndexVal=null;var l=this._scrollBottom;var n=this._physicalBottom;if(Math.abs(b)>this._physicalSize)this._physicalTop+=
b,e=Math.round(b/this._physicalAverage);else if(0>b){var m=a-this._physicalTop;h=this._virtualStart;var q=[];var r=this._physicalEnd;for(g=m/f;g<c&&e<this._physicalCount&&0<h-e&&n-this._getPhysicalSizeIncrement(r)>l;)m=this._getPhysicalSizeIncrement(r),g+=m/f,n-=m,q.push(r),e++,r=0===r?this._physicalCount-1:r-1;h=q;e=-e}else if(0<b){var v=this._virtualEnd,u=this._virtualCount-1;q=[];r=this._physicalStart;for(g=(n-l)/f;g<c&&e<this._physicalCount&&v+e<u&&this._physicalTop+this._getPhysicalSizeIncrement(r)<
a;)m=this._getPhysicalSizeIncrement(r),g+=m/f,this._physicalTop+=m,q.push(r),e++,r=(r+1)%this._physicalCount}this._virtualCount<this.size&&this._adjustVirtualIndexOffset(b);0===e?(n<l||this._physicalTop>a)&&this._increasePoolIfNeeded():(this._virtualStart+=e,this._physicalStart+=e,this._update(q,h));this._translateStationaryElements();this.hasAttribute("reordering")||(this.scrolling=!0);this.debounce("vaadin-grid-scrolling",function(){this.scrolling=!1;this._reorderRows()},100)},_adjustVirtualIndexOffset:function(a){if(1E4<
Math.abs(a))this._noScale?this._noScale=!1:(a=Math.round(this._scrollPosition/this._scrollHeight*1E3)/1E3,this._vidxOffset=Math.round(a*this.size-a*this._virtualCount),0===this._scrollTop&&this.scrollToIndex(0));else{a=this._vidxOffset||0;0===this._scrollTop?(this._vidxOffset=0,a!==this._vidxOffset&&this.scrollToIndex(0)):1E3>this.firstVisibleIndex&&0<this._vidxOffset&&(this._vidxOffset-=Math.min(this._vidxOffset,100),this.scrollToIndex(this.firstVisibleIndex+(a-this._vidxOffset)+1),this._noScale=
!0);var b=this.size-this._virtualCount;this._scrollTop>=this._maxScrollTop?(this._vidxOffset=b,a!==this._vidxOffset&&this.scrollToIndex(this._virtualCount)):this.firstVisibleIndex>this._virtualCount-1E3&&this._vidxOffset<b&&(this._vidxOffset+=Math.min(b-this._vidxOffset,100),this.scrollToIndex(this.firstVisibleIndex-(this._vidxOffset-a)),this._noScale=!0)}},_reorderRows:function(){var a=Polymer.dom(this.$.items),b=a.querySelectorAll(".vaadin-grid-row"),c=b.length-(b[0].index-(this._virtualStart+this._vidxOffset));
if(c<b.length/2)for(var e=0;e<c;e++)a.appendChild(b[e]);else for(;c<b.length;c++)a.insertBefore(b[c],b[0])},_frozenCellsChanged:function(){this.debounce("cache-elements",function(){Polymer.dom(this.domHost.root).querySelectorAll(".vaadin-grid-cell").forEach(function(a){a.style.transform=""});this._frozenCells=Array.prototype.slice.call(Polymer.dom(this.domHost.root).querySelectorAll("[frozen]"));this._translateStationaryElements()});this._updateLastFrozen()},_updateLastFrozen:function(){if(this.columnTree){var a=
this.columnTree[this.columnTree.length-1].slice(0);a.sort(function(c,e){return c._order-e._order});var b=a.reduce(function(c,e,f){e._lastFrozen=!1;return e.frozen&&!e.hidden?f:c},void 0);void 0!==b&&(a[b]._lastFrozen=!0)}},_translateStationaryElements:function(){this.fixedSections?(this.$.items.style.transform=this._getTranslate(-this._scrollLeft||0,-this._scrollTop||0),this.$.footer.style.transform=this.$.header.style.transform=this._getTranslate(-this._scrollLeft||0,0)):this.$.footer.style.transform=
this.$.header.style.transform=this._getTranslate(0,this._scrollTop);for(var a=this._getTranslate(this._scrollLeft,0),b=0;b<this._frozenCells.length;b++)this._frozenCells[b].style.transform=a},_getTranslate:function(a,b){return"translate("+a+"px,"+b+"px)"}};vaadin.elements.grid.TableScrollBehavior=[Polymer.IronScrollTargetBehavior,vaadin.elements.grid.TableScrollBehaviorImpl];
</script>




<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-cell-click-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.CellClickBehavior={listeners:{click:"_onClick"},attached:function(){this._cellContentFocusHandler=function(a){a.target!==this._cellContent&&this.fire("cell-content-focus",{cell:this})}.bind(this);this.addEventListener("focus",this._cellContentFocusHandler,!0)},detached:function(){this.removeEventListener("focus",this._cellContentFocusHandler,!0)},_onClick:function(a){"vaadin-grid-sorter"!==this.localName&&this.fire("cell-focus",{cell:this});if(this._cellClick){var b=Polymer.dom(a).localTarget;
b.getDistributedNodes&&(b=Polymer.dom(b).getDistributedNodes()[0]);var c=Polymer.dom(a).path;c=Array.prototype.slice.call(c,0,c.indexOf(b)+1);b.contains(this.target&&this.target.root.activeElement||document.activeElement)||c.some(this._isFocusable)||this._cellClick(a)}},_isFocusable:function(a){var b=Polymer.dom(a).parentNode;b=-1!==Array.prototype.indexOf.call(Polymer.dom(b).querySelectorAll("[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]"),a);return!a.disabled&&
b}};
</script>


<dom-module id="vaadin-grid-table-cell"></dom-module>
<dom-module id="vaadin-grid-table-header-cell"></dom-module>
<dom-module id="vaadin-grid-table-footer-cell"></dom-module>
<dom-module id="vaadin-grid-sizer-cell"></dom-module>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-table-cell.html.js
(function(){var a={properties:{column:Object,expanded:Boolean,flexGrow:Number,colSpan:Number,focused:{type:Boolean,reflectToAttribute:!0},frozen:{type:Boolean,reflectToAttribute:!0},lastFrozen:{type:Boolean,reflectToAttribute:!0},hidden:{type:Boolean,reflectToAttribute:!0},instance:Object,index:Number,item:Object,selected:Boolean,template:Object,target:Object,width:String,order:Number,reorderStatus:{type:String,reflectToAttribute:!0},_childColumns:Array,_cellContent:Object,_insertionPoint:Object,
_templatizer:Object},observers:"_columnChanged(column);_cellAttached(column, isAttached);_expandedChanged(expanded, instance);_flexGrowChanged(flexGrow);_indexChanged(index, instance);_itemChanged(item, instance);_instanceChanged(instance, target);_selectedChanged(selected, instance);_toggleContent(isAttached, _cellContent, _insertionPoint);_toggleInstance(isAttached, _templatizer, instance);_widthChanged(width);_orderChanged(order);_visibleChildColumnsChanged(_visibleChildColumns);_childColumnsChanged(_childColumns)".split(";"),
ready:function(){this.classList.add("vaadin-grid-cell");!1===Polymer.Settings.useShadow&&(this.classList.add("style-scope"),this.classList.add("vaadin-grid"))},_columnChanged:function(b){this.flexGrow=b.flexGrow;this.frozen=b.frozen;this.lastFrozen=b._lastFrozen;this.headerTemplate=b.headerTemplate;this.footerTemplate=b.footerTemplate;this.template=b.template;this.width=b.width;this.hidden=b.hidden;this.resizable=b.resizable;this._childColumns=b._childColumns;this.order=b._order;b.colSpan&&(this.colSpan=
b.colSpan);this.listen(b,"property-changed","_columnPropChanged")},_cellAttached:function(b,c){void 0!==b&&void 0!==c&&(c?this.listen(b,"property-changed","_columnPropChanged"):this.async(function(){this.isAttached||this.unlisten(b,"property-changed","_columnPropChanged")}))},_columnPropChanged:function(b){b.target==this.column&&(this[b.detail.path]=b.detail.value)},_expandedChanged:function(b,c){void 0!==b&&void 0!==c&&(c.__expanded__=b,c.expanded=b)},_flexGrowChanged:function(b){this.style.flexGrow=
b},_indexChanged:function(b,c){void 0!==b&&void 0!==c&&(c.index=b)},_itemChanged:function(b,c){void 0!==b&&void 0!==c&&(c.item=b)},_selectedChanged:function(b,c){void 0!==b&&void 0!==c&&(c.__selected__=b,c.selected=b)},_childColumnsChanged:function(b){this.colSpan=b.length},_toggleContent:function(b,c,e){void 0!==b&&void 0!==c&&void 0!==e&&(b?(Polymer.dom(c).parentNode!==this.target&&Polymer.dom(this.target).appendChild(c),Polymer.dom(this).appendChild(e)):this.async(function(){this.isAttached||Polymer.dom(c).parentNode!==
this.target||Polymer.dom(this.target).removeChild(c)}))},_toggleInstance:function(b,c,e){void 0!==b&&void 0!==c&&void 0!==e&&(b?c.addInstance(e):c.removeInstance(e))},_widthChanged:function(b){this.style.width=b},_orderChanged:function(b){this.style.order=b},_templateChanged:function(b){this.instance=b.templatizer.createInstance();this._templatizer=b.templatizer},_instanceChanged:function(b,c){void 0!==b&&void 0!==c&&(this.style.height="",this._cellContent=this._cellContent||document.createElement("vaadin-grid-cell-content"),
b="vaadin-grid-cell-content-"+(vaadin.elements.grid._contentIndex=vaadin.elements.grid._contentIndex+1||0),this._cellContent.innerHTML="",Polymer.dom(this._cellContent).appendChild(this.instance.root),this._cellContent.setAttribute("id",b),Polymer.Element?(this._cellContent.setAttribute("slot",b),this._insertionPoint=this._insertionPoint||document.createElement("slot"),this._insertionPoint.setAttribute("name",b)):(this._insertionPoint=this._insertionPoint||document.createElement("content"),this._insertionPoint.setAttribute("select",
"#"+b)))}};Polymer({is:"vaadin-grid-table-cell",behaviors:[a,vaadin.elements.grid.CellClickBehavior],observers:["_templateChanged(template)"],_cellClick:function(b){b.defaultPrevented||this.fire("cell-activate",{model:this.instance})}});Polymer({is:"vaadin-grid-table-header-cell",properties:{headerTemplate:Object,resizable:Boolean,columnResizing:{type:Boolean,reflectToAttribute:!0}},behaviors:[a,vaadin.elements.grid.CellClickBehavior],observers:["_headerTemplateChanged(headerTemplate)","_isEmptyChanged(_isEmpty, isAttached)",
"_resizableChanged(resizable)"],listeners:{mousedown:"_cancelMouseDownOnResize",mousemove:"_enableDrag",mouseout:"_disableDrag",touchstart:"_onTouchStart",touchmove:"_onTouchMove",touchend:"_onTouchEnd",contextmenu:"_onContextMenu"},_onContextMenu:function(b){this._reorderGhost&&b.preventDefault()},_onTouchStart:function(b){b.target!==this._resizeHandle&&this.target.columnReorderingAllowed&&(this._startReorderTimeout=setTimeout(this._startReorder.bind(this,b),100))},_startReorder:function(b){this._reorderGhost=
this._getGhost();this._reorderGhost.style.visibility="visible";var c=new CustomEvent("dragstart",{bubbles:!0});this._cellContent.dispatchEvent(c);this._reorderXY={x:b.touches[0].clientX-this.getBoundingClientRect().left,y:b.touches[0].clientY-this.getBoundingClientRect().top};this._updateGhostPosition(b.touches[0].clientX,b.touches[0].clientY)},_onTouchMove:function(b){if(this._reorderGhost){b.preventDefault();var c=new CustomEvent("dragover",{bubbles:!0});c.clientX=b.touches[0].clientX;c.clientY=
b.touches[0].clientY;var e=this._contentFromPoint(c.clientX,c.clientY);e&&e.dispatchEvent(c);this._updateGhostPosition(b.touches[0].clientX,b.touches[0].clientY)}else clearTimeout(this._startReorderTimeout)},_updateGhostPosition:function(b,c){b-=this._reorderXY.x;c=c-this._reorderXY.y-50;var e=parseInt(this._reorderGhost.style.left||0),f=parseInt(this._reorderGhost.style.top||0),g=this._reorderGhost.getBoundingClientRect();this._reorderGhost.style.left=e-(g.left-b)+"px";this._reorderGhost.style.top=
f-(g.top-c)+"px"},_onTouchEnd:function(b){clearTimeout(this._startReorderTimeout);this._reorderGhost&&(b.preventDefault(),b=new CustomEvent("dragend",{bubbles:!0}),this.dispatchEvent(b),this._reorderGhost.style.visibility="hidden",this._reorderGhost=null)},_contentFromPoint:function(b,c){if(Polymer.Settings.useShadow){var e=this.target.$.scroller;e.toggleAttribute("no-content-pointer-events",!0);b=this.domHost.root.elementFromPoint(b,c);e.toggleAttribute("no-content-pointer-events",!1);if(b&&b.getContentChildren)return b.getContentChildren(Polymer.Element?
"slot":"content")[0]}else return document.elementFromPoint(b,c)},_getGhost:function(){var b=this.target.$.scroller.$.reorderghost;b.innerText=this._cellContent.innerText;var c=window.getComputedStyle(this._cellContent);"boxSizing display width height background alignItems padding border flex-direction overflow".split(" ").forEach(function(e){b.style[e]=c[e]},this);return b},_enableDrag:function(){this._cellContent.draggable=this.target.columnReorderingAllowed&&!window.getSelection().toString()},_disableDrag:function(){this._cellContent.draggable=
!1},_cancelMouseDownOnResize:function(b){b.target===this._resizeHandle&&b.preventDefault()},_resizableChanged:function(b){b?(this._resizeHandle=document.createElement("div"),this._resizeHandle.classList.add("vaadin-grid-column-resize-handle"),this.listen(this._resizeHandle,"track","_onTrack"),Polymer.dom(this).appendChild(this._resizeHandle)):this._resizeHandle&&(this.unlisten(this._resizeHandle,"track","_onTrack"),Polymer.dom(this).removeChild(this._resizeHandle))},_onTrack:function(b){this.columnResizing=
!0;var c=this.column;"vaadin-grid-column-group"===c.localName&&(c=Array.prototype.slice.call(c._childColumns,0).sort(function(g,h){return g._order-h._order}).filter(function(g){return!g.hidden}).pop());var e=this._getHeaderCellByColumn(c);if(e.offsetWidth){var f=window.getComputedStyle(e._cellContent);c.width=Math.max(10+parseInt(f.paddingLeft)+parseInt(f.paddingRight),e.offsetWidth+b.detail.x-e.getBoundingClientRect().right)+"px";c.flexGrow=0}Array.prototype.slice.call(Polymer.dom(this.parentElement.parentElement).querySelectorAll(".vaadin-grid-row:last-child .vaadin-grid-cell")).sort(function(g,
h){return g.column._order-h.column._order}).forEach(function(g,h,l){h<l.indexOf(e)&&(g.column.width=g.offsetWidth+"px",g.column.flexGrow=0)});this.columnResizing&&"end"===b.detail.state&&(this.columnResizing=!1);this.fire("column-resizing")},_getHeaderCellByColumn:function(b){return Array.prototype.filter.call(Polymer.dom(this.parentElement.parentElement).querySelectorAll(".vaadin-grid-row:last-child .vaadin-grid-cell"),function(c){return c.column===b})[0]},_headerTemplateChanged:function(b){void 0!==
b&&(null===b||!this._isColumnRow&&"vaadin-grid-column-group"!==this.column.localName?(this.instance={root:document.createElement("div")},this._isEmpty=!0):(this.instance=b.templatizer.createInstance(),this._templatizer=b.templatizer,this._isEmpty=!1))},_isEmptyChanged:function(b,c){c&&this.fire("cell-empty-changed")}});Polymer({is:"vaadin-grid-table-footer-cell",properties:{footerTemplate:Object},behaviors:[a,vaadin.elements.grid.CellClickBehavior],observers:["_footerTemplateChanged(footerTemplate)",
"_isEmptyChanged(_isEmpty, isAttached)"],_footerTemplateChanged:function(b){void 0!==b&&(null===b||!this._isColumnRow&&"vaadin-grid-column-group"!==this.column.localName?(this.instance={root:document.createElement("div")},this._isEmpty=!0):(this.instance=b.templatizer.createInstance(),this._templatizer=b.templatizer,this._isEmpty=!1))},_isEmptyChanged:function(b,c){c&&this.fire("cell-empty-changed")}});Polymer({is:"vaadin-grid-sizer-cell",behaviors:[a]})})();
</script>


<dom-module id="vaadin-grid-sizer">
  <template>
    <style>
      :host {
        display: flex;
        visibility: hidden;
      }

      .cell {
        display: block;
        flex-shrink: 0;
        line-height: 0;
        font-size: 1px;
        margin-top: -1em;
      }

      .cell[hidden] {
        display: none;
      }
    </style>

    <template is="dom-repeat" items="[[_columns]]" as="column">
      <vaadin-grid-sizer-cell class="cell" column="[[column]]">&nbsp;</vaadin-grid-sizer-cell>
    </template>

  </template>
  <script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-sizer.html.js
Polymer({is:"vaadin-grid-sizer",properties:{columnTree:Array,top:Number,_columns:Array},observers:["_columnTreeChanged(columnTree)","_topChanged(top)"],_columnTreeChanged:function(a){this._columns=a[a.length-1]},_topChanged:function(a){this.style.top=a+"px"}});
</script>
</dom-module>


<dom-module id="vaadin-grid-table-outer-scroller">
  <template>
    <style>
      :host {
        display: block;
        height: 100%;
        width: 100%;
        position: absolute;
        top: 0;
        box-sizing: border-box;
        overflow: auto;
      }

      :host([passthrough]) {
        pointer-events: none;
      }

      :host([ios]) {
        pointer-events: all;
        z-index: -3;
      }

      :host([ios][scrolling]) {
        z-index: 0;
      }
    </style>

    <slot></slot>

  </template>
  <script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-table-outer-scroller.html.js
Polymer({is:"vaadin-grid-table-outer-scroller",properties:{scrollTarget:{type:Object,observer:"_scrollTargetChanged"},passthrough:{type:Boolean,reflectToAttribute:!0,value:!0}},listeners:{scroll:"_syncScrollTarget"},attached:function(){this.listen(this.domHost,"mousemove","_onMouseMove");this.style.webkitOverflowScrolling="touch"},detached:function(){this.unlisten(this.domHost,"mousemove","_onMouseMove")},_scrollTargetChanged:function(a,b){b&&this.unlisten(b,"scroll","_syncOuterScroller");this.listen(a,
"scroll","_syncOuterScroller")},_onMouseMove:function(a){this.passthrough=a.offsetY<=this.clientHeight&&a.offsetX<=this.clientWidth},_syncOuterScroller:function(){this._syncingScrollTarget||(this._syncingOuterScroller=!0,this.scrollTop=this.domHost._scrollTop,this.scrollLeft=this.domHost._scrollLeft);this._syncingScrollTarget=!1},_syncScrollTarget:function(){this._syncingOuterScroller||(this._syncingScrollTarget=!0,this.scrollTarget.scrollTop=this.scrollTop,this.scrollTarget.scrollLeft=this.scrollLeft,
this.domHost._scrollHandler());this._syncingOuterScroller=!1}});
</script>
</dom-module>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-focusable-cell-container-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.FocusableCellContainerBehavior={properties:{focused:{type:Boolean,reflectToAttribute:!0},_focusedRow:Object,_focusedRowIndex:Number,_focusedCell:Object,_focusedCellIndex:Number,_lastFocusedCell:Object},observers:["_announceFocusedCell(_focusedCell, focused)","_dispatchEvents(_focusedCell, focused)","_focusedCellChanged(_focusedRowIndex, _focusedCellIndex)"],_announceFocusedCell:function(a,b){void 0!==a&&void 0!==b&&this.domHost.navigating&&b&&(b=Polymer.Element?a._cellContent.getAttribute("slot"):
a._cellContent.id,"vaadin-grid-table-body"!==this.is||a.hasAttribute("detailscell")||(a=Array.prototype.indexOf.call(Polymer.dom(a.parentElement).querySelectorAll(".vaadin-grid-cell"),a),b=this.domHost.$.header.lastElementChild.children[a]._cellContent.id+" "+b),this.domHost.$.footerFocusTrap.activeTarget=b)},_dispatchEvents:function(a,b){void 0!==a&&void 0!==b&&(this._lastFocusedCell&&(this._lastFocusedCell._cellContent.dispatchEvent(new CustomEvent("cell-focusout")),this._lastFocusedCell=void 0),
b&&(a._cellContent.dispatchEvent(new CustomEvent("cell-focusin")),this._lastFocusedCell=a))},_focusedCellChanged:function(a,b){void 0!==a&&void 0!==b&&Array.prototype.forEach.call(Polymer.dom(this).children,function(c,e){c.focused=e===a;c.focused&&(this._focusedRow=c,this._focusedCellIndex=Math.min(b,c.children.length-1),this._focusedCell=c.children[this._focusedCellIndex]);c.cells.forEach(function(f,g){f.focused=g===this._focusedCellIndex}.bind(this))}.bind(this))},focusLeft:function(){if(!this._focusedCell.hasAttribute("detailscell")){var a=
this._visibleCellIndexes();0<a.length&&(this._focusedCellIndex=a[Math.max(0,a.indexOf(this._focusedCellIndex)-1)])}},focusDown:function(){this._focusedRowIndex=Math.min(this._focusedRowIndex+1,this.children.length-1)},_visibleCellIndexes:function(){var a=[];if(this._focusedRow&&this._focusedRow.children){for(var b=this._focusedRow.children,c=0;c<b.length;c++)b[c].hidden||b[c]===this._focusedRow._rowDetailsCell||a.push(c);a.sort(function(e,f){return b[e].column._order<b[f].column._order?-1:1})}return a},
focusPageDown:function(){this._focusedRowIndex=Math.min(this._focusedRowIndex+10,this.children.length-1)},focusPageUp:function(){this._focusedRowIndex=Math.max(0,this._focusedRowIndex-10)},focusRight:function(){if(!this._focusedCell.hasAttribute("detailscell")){var a=this._visibleCellIndexes();0<a.length&&(this._focusedCellIndex=a[Math.min(a.indexOf(this._focusedCellIndex)+1,a.length-1)])}},focusUp:function(){this._focusedRowIndex=Math.max(0,this._focusedRowIndex-1)},focusHome:function(){if(!this._focusedCell.hasAttribute("detailscell")){var a=
this._visibleCellIndexes();0<a.length&&(this._focusedCellIndex=a[0])}},focusEnd:function(){if(!this._focusedCell.hasAttribute("detailscell")){var a=this._visibleCellIndexes();0<a.length&&(this._focusedCellIndex=a[a.length-1])}},focusFirst:function(){this._focusedRowIndex=0;this.focusHome()},focusLast:function(){this._focusedRowIndex=this.children.length-1;this.focusEnd()}};
</script>


<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-table-header-footer.html.js
(function(){var a={properties:{columnTree:Array,target:Object,_rows:Array},observers:["_columnTreeChanged(columnTree, target)","_rowsChanged(_rows)"],_columnTreeChanged:function(b,c){if(void 0!==b&&void 0!==c){this._rows&&this._rows.forEach(function(h){Polymer.dom(h).innerHTML=""});for(var e=[],f=0;f<b.length;f++){var g=this._createRow();g.target=c;g._isColumnRow=f==b.length-1;g.columns=b[f];e.push(g)}this._rows="vaadin-grid-table-header"===this.localName?e:e.reverse()}},_rowsChanged:function(b){Polymer.dom(this).innerHTML=
"";b.forEach(function(c){Polymer.dom(this).appendChild(c)}.bind(this))}};Polymer({is:"vaadin-grid-table-header",behaviors:[a,vaadin.elements.grid.FocusableCellContainerBehavior],_createRow:function(){return document.createElement("vaadin-grid-table-header-row")}});Polymer({is:"vaadin-grid-table-body",behaviors:[vaadin.elements.grid.FocusableCellContainerBehavior],observers:["_announceFocusedRow(_focusedRow)"],_announceFocusedRow:function(b){this.fire("iron-announce",{text:"Row "+(b.index+1)+" of "+
this.domHost.size})},_moveFocusToDetailsCell:function(){this._focusedCell.focused=!1;this._focusedRow._rowDetailsCell.focused=!0;this._focusedCell=this._focusedRow._rowDetailsCell},_focusedRowHasDetailsCell:function(){return this._focusedRow&&this._focusedRow._rowDetailsCell&&this._focusedCell!==this._focusedRow._rowDetailsCell},focusDown:function(){this._focusedRowHasDetailsCell()?this._moveFocusToDetailsCell():this._focusedRowIndex=Math.min(this._focusedRowIndex+1,this.domHost.size-1)},focusUp:function(){this._focusedRow&&
this._focusedCell===this._focusedRow._rowDetailsCell?this._focusedCellChanged(this._focusedRowIndex,this._focusedCellIndex):(this._focusedRowIndex=Math.max(0,this._focusedRowIndex-1),this._focusedRowHasDetailsCell()&&this._moveFocusToDetailsCell())},focusLast:function(){this._focusedRowIndex=this.domHost.size-1;this.focusEnd()},_focusedCellChanged:function(b,c){void 0!==b&&void 0!==c&&Array.prototype.forEach.call(Polymer.dom(this).children,function(e){e.focused=e.index===b;e.index===b&&(this._focusedRow=
e,this._focusedCell=e.children[c]);e.iterateCells(function(f,g){f.focused=g===c})}.bind(this))}});Polymer({is:"vaadin-grid-table-footer",behaviors:[a,vaadin.elements.grid.FocusableCellContainerBehavior],_createRow:function(){return document.createElement("vaadin-grid-table-footer-row")}})})();
</script>




<dom-module id="vaadin-grid-table-focus-trap">
  <template>
    <style>
     :host {
       position: absolute;
       z-index: -3;
       height: 0;
       overflow: hidden;
     }

     :host(:focus),
     .primary:focus,
     ::slotted(.primary:focus),
     .secondary:focus,
     ::slotted(.secondary:focus) {
       outline: none;
     }
    </style>

    
    <div class="primary" tabindex="0" role="gridcell" on-focus="_onBaitFocus" on-blur="_onBaitBlur"><div aria-hidden="true">&nbsp;</div></div>
    <div class="secondary" tabindex="-1" role="gridcell" on-focus="_onBaitFocus" on-blur="_onBaitBlur"><div aria-hidden="true">&nbsp;</div></div>

    <slot></slot>
  </template>
  <script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-table-focus-trap.html.js
Polymer({is:"vaadin-grid-table-focus-trap",hostAttributes:{role:"gridcell"},properties:{activeTarget:{type:String,observer:"_activeTargetChanged"}},ready:function(){this._primary=Polymer.dom(this.root).querySelector(".primary");this._secondary=Polymer.dom(this.root).querySelector(".secondary");if(Polymer.Settings.useNativeShadow||Polymer.Settings.useShadow)Polymer.dom(this).appendChild(this._secondary),Polymer.dom(this).appendChild(this._primary)},focus:function(){this._focused!==this._primary?this._primary.focus():
this._secondary.focus()},_onBaitFocus:function(a){this._focused=a.target;this._movingFocusInternally||(this.fire("focus-gained"),this._primary.tabIndex=-1)},_onBaitBlur:function(){this._movingFocusInternally||(this.fire("focus-lost"),this._primary.tabIndex=0)},_activeTargetChanged:function(a){this._movingFocusInternally=!0;this._focused===this._primary?(this._secondary.setAttribute("aria-labelledby",a),this._secondary.focus()):(this._primary.setAttribute("aria-labelledby",a),this._primary.focus());
this._movingFocusInternally=!1},_reannounce:function(){this._movingFocusInternally=!0;this._focused===this._primary?(this._secondary.setAttribute("aria-labelledby",this.activeTarget),this._secondary.focus()):(this._primary.setAttribute("aria-labelledby",this.activeTarget),this._primary.focus());this._movingFocusInternally=!1}});
</script>
</dom-module>



<dom-module id="vaadin-grid-table-row"></dom-module>
<dom-module id="vaadin-grid-table-header-row"></dom-module>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-table-row.html.js
(function(){var a={properties:{active:{type:Boolean,reflectToAttribute:!0,value:!1},columns:Array,index:Number,cells:{value:[]},target:Object,expanded:{value:!1},focused:{type:Boolean,reflectToAttribute:!0},item:Object,selected:{reflectToAttribute:!0},_rowDetailsCell:Object,rowDetailsTemplate:Object},observers:"_columnsChanged(columns, target);_indexChanged(index, cells);_itemChanged(item, cells);_itemChangedForDetails(item, _rowDetailsCell);_rowDetailsChanged(expanded, rowDetailsTemplate, target);_rowDetailsCellIndexChanged(_rowDetailsCell, index);_rowDetailsCellChanged(_rowDetailsCell, target);_selectedChanged(selected, cells);_selectedChangedForDetails(selected, _rowDetailsCell)".split(";"),
ready:function(){this.classList.add("vaadin-grid-row");!1===Polymer.Settings.useShadow&&(this.classList.add("style-scope"),this.classList.add("vaadin-grid"))},iterateCells:function(b){this.cells.forEach(b);this._rowDetailsCell&&b(this._rowDetailsCell)},_rowDetailsChanged:function(b,c,e){if(void 0!==b&&void 0!==c&&void 0!==e){if(b){var f=document.createElement("vaadin-grid-table-cell");f.setAttribute("detailscell",!0);f.frozen=!0;f.target=e;f.template=c;f.toggleAttribute("lastcolumn",!0);Polymer.dom(this.root).appendChild(f);
Polymer.dom.flush();this._rowDetailsCell=f}else this._rowDetailsCell&&(Polymer.dom(this.root).removeChild(this._rowDetailsCell),this._rowDetailsCell=null);this.iterateCells(function(g){g.expanded=b});this.target.$.scroller._frozenCellsChanged()}},_updateRowVisibility:function(){this.hidden=this.cells.every(function(b){return b._isEmpty})},_rowDetailsCellChanged:function(b,c){void 0!==b&&void 0!==c&&c.$.scroller._update()},_rowDetailsCellIndexChanged:function(b,c){void 0!==b&&void 0!==c&&(b?(b.index=
c,Polymer.dom.flush(),this.updateRowDetailsCellMetrics()):this.style.paddingBottom="")},updateRowDetailsCellMetrics:function(){this._rowDetailsCell&&(this.target&&this.target._observer&&this.target._observer.flush&&this.target._observer.flush(),this._rowDetailsCell.style.height="",this.style.paddingBottom=this._rowDetailsCell.style.height=this._rowDetailsCell.clientHeight+"px")},_columnsChanged:function(b,c){if(void 0!==b&&void 0!==c){Polymer.dom(this).innerHTML="";var e=[];b.forEach(function(f){var g=
"_"+this.is.replace(/-/g,"_")+"_cells";g=f[g]=f[g]||[];var h=g.filter(function(n){return!Polymer.dom(n).parentNode})[0];if(!h){h=this._createCell();var l=Array.prototype.some.call(this.target.querySelectorAll("dom-repeat"),function(n){return!n.restamp});(l=l||"vaadin-grid-table-header-row"===this.is||"vaadin-grid-table-footer-row"===this.is)||g.push(h)}h.index=this.index;h.target=this.target;h._isColumnRow=this._isColumnRow;h.column=f;h.expanded=this.expanded;Polymer.dom(this).appendChild(h);e.push(h)}.bind(this));
this.cells=e}},_indexChanged:function(b,c){void 0!==b&&void 0!==c&&c.forEach(function(e){e.index=b})},_itemChanged:function(b,c){void 0!==b&&void 0!==c&&c.forEach(function(e){e.item=b})},_itemChangedForDetails:function(b,c){void 0!==b&&void 0!==c&&c&&(c.item=b)},_selectedChanged:function(b,c){void 0!==b&&void 0!==c&&c.forEach(function(e){e.selected=b})},_selectedChangedForDetails:function(b,c){void 0!==b&&void 0!==c&&c&&(c.selected=b)},updateLastColumn:function(){this.cells.slice(0).sort(function(b,
c){return b.column._order-c.column._order}).forEach(function(b,c,e){b.toggleAttribute("lastcolumn",c===e.length-1)})}};Polymer({is:"vaadin-grid-table-row",behaviors:[a],_createCell:function(){return document.createElement("vaadin-grid-table-cell")}});Polymer({is:"vaadin-grid-table-header-row",behaviors:[a],observers:["_updateRowVisibility(columns)"],listeners:{"cell-empty-changed":"_updateRowVisibility"},_createCell:function(){return document.createElement("vaadin-grid-table-header-cell")}});Polymer({is:"vaadin-grid-table-footer-row",
behaviors:[a],observers:["_updateRowVisibility(columns)"],listeners:{"cell-empty-changed":"_updateRowVisibility"},_createCell:function(){return document.createElement("vaadin-grid-table-footer-cell")}})})();
</script>



<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-templatizer.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};vaadin.elements.grid.Templatizer=function(){};T=vaadin.elements.grid.Templatizer.prototype;T.ctor=function(){};T.stamp=function(){};T.templatize=function(){};T.modelForElement=function(){};T._debounceTemplate=function(){};
vaadin.elements.grid.Templatizer=Polymer({is:"vaadin-grid-templatizer",behaviors:[Polymer.Templatizer],properties:{dataHost:Object,template:Object,_templateInstances:{type:Array,value:function(){return[]}},_parentPathValues:{value:function(){return{}}}},observers:["_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)"],created:function(){this._parentModel=!0;this._instanceProps={expanded:!0,index:!0,item:!0,selected:!0}},createInstance:function(){this._ensureTemplatized();var a=this.stamp({});
this.addInstance(a);return a},addInstance:function(a){-1===this._templateInstances.indexOf(a)&&this.push("_templateInstances",a)},removeInstance:function(a){this.splice("_templateInstances",this._templateInstances.indexOf(a),1)},_ensureTemplatized:function(){this.template._templatized||(this.template._templatized=!0,this.templatize(this.template),this._parentProps=this._parentProps||{},Polymer.Element||Object.keys(this._parentProps).forEach(function(){},this))},_forwardInstanceProp:function(a,b,c){void 0!==
a["__"+b+"__"]&&a["__"+b+"__"]!==c&&this.fire("template-instance-changed",{prop:b,value:c,inst:a})},_forwardInstancePath:function(a,b,c){0!==b.indexOf("item.")||this._suppressItemChangeEvent||this.fire("item-changed",{item:a.item,path:b.substring(5),value:c})},_notifyInstancePropV2:function(a,b,c){this._forwardInstanceProp(a,b,c);this._forwardInstancePath(a,b,c)},_forwardParentProp:function(a,b){this._parentPathValues[a]=b;this._templateInstances.forEach(function(c){c.set(a,b)},this)},_forwardParentPath:function(a,
b){this.set(["_parentPathValues",a],b);this._templateInstances.forEach(function(c){c.notifyPath(a,b)},this)},_forwardHostPropV2:function(a,b){this._forwardParentProp(a,b);this._templateInstances&&this._templateInstances.forEach(function(c){c.notifyPath(a,b)},this)},_templateInstancesChanged:function(a){if("_templateInstances"===a.path){var b=0;var c=this._templateInstances.length}else if("_templateInstances.splices"===a.path)b=a.value.index,c=a.value.addedCount;else return;Object.keys(this._parentPathValues||
{}).forEach(function(e){for(var f=b;f<b+c;f++)this._templateInstances[f].set(e,this._parentPathValues[e])},this)}});
</script>


<dom-module id="vaadin-grid-row-details-styles">
  <template>
    <style>
      [detailscell] {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
      }
    </style>
  </template>
</dom-module>
<dom-module id="vaadin-grid-row-details-themability-styles">
  <template>
    <style>
      .vaadin-grid-cell[detailscell] ::slotted(vaadin-grid-cell-content) {
        background: #fff;
        @apply(--vaadin-grid-body-row-details-cell);
      }
    </style>
  </template>
</dom-module>


<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-row-details-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.RowDetailsBehavior={properties:{expandedItems:{type:Array,value:function(){return[]}}},listeners:{"template-instance-changed":"_templateInstanceChangedExpanded"},observers:["_expandedItemsChanged(expandedItems.*, dataProvider)","_rowDetailsTemplateChanged(_rowDetailsTemplate)"],_expandedItemsChanged:function(a,b){void 0!==a&&void 0!==b&&(this._flushItemsDebouncer(),this.$.scroller._physicalItems&&this.$.scroller._physicalItems.forEach(function(c){c.expanded=this._isExpanded(c.item)}.bind(this)))},
_rowDetailsTemplateChanged:function(a){var b=new vaadin.elements.grid.Templatizer;b.dataHost=this.dataHost;b._instanceProps={expanded:!0,index:!0,item:!0,selected:!0};Polymer.dom(this.root).appendChild(b);b.template=a;a.templatizer=b},_isExpanded:function(a){return this.expandedItems&&-1!==this.expandedItems.indexOf(a)},expandItem:function(a){this._isExpanded(a)||this.push("expandedItems",a)},collapseItem:function(a){this._isExpanded(a)&&this.splice("expandedItems",this.expandedItems.indexOf(a),1)},
_templateInstanceChangedExpanded:function(a){"expanded"===a.detail.prop&&(a.detail.value?this.expandItem(a.detail.inst.item):this.collapseItem(a.detail.inst.item),a.stopPropagation())}};
</script>

<dom-module id="vaadin-grid-data-provider-themability-styles">
  <template>
    <style>

      /* Anim */
      @keyframes vaadin-grid-spin-360 {
        100% {
          transform: rotate(360deg);
        }
      }
      @-webkit-keyframes vaadin-grid-spin-360 {
        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg);
        }
      }

      #spinner {
        border: 2px solid var(--primary-color, #03A9F4);
        border-radius: 50%;
        border-right-color: transparent;
        border-top-color: transparent;
        content: "";
        height: 16px;
        left: 50%;
        margin-left: -8px;
        margin-top: -8px;
        position: absolute;
        top: 50%;
        width: 16px;
        pointer-events: none;
        opacity: 0;
        @apply(--vaadin-grid-loading-spinner);
      }

      :host([loading]) #spinner {
        opacity: 1;
        -webkit-animation: vaadin-grid-spin-360 400ms linear infinite;
        animation: vaadin-grid-spin-360 400ms linear infinite;
      }

      :host([loading]) #items {
        opacity: 0.5;
      }

    </style>
  </template>
</dom-module>


<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-data-provider-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.DataProviderBehavior={listeners:{"item-changed":"_templateItemChanged"},properties:{pageSize:{type:Number,value:50,observer:"_pageSizeChanged"},dataProvider:{type:Object,notify:!0,observer:"_dataProviderChanged"},_loading:Boolean,_cache:{type:Object,value:function(){return{}}},_pendingRequests:{type:Object,value:function(){return{}}}},_templateItemChanged:function(a){var b=a.detail.item;Array.prototype.forEach.call(Polymer.dom(this.$.items).children,function(c){c.item===b&&c.iterateCells(function(e){e._templatizer._suppressItemChangeEvent=
!0;e.instance.notifyPath("item."+a.detail.path,a.detail.value);e._templatizer._suppressItemChangeEvent=!1})})},_getCachedItem:function(a){var b=this._getPageForIndex(a),c=this._cache&&this._cache[b];return c?c[a-b*this.pageSize]:null},_getItem:function(a,b){this._updateItem(b,this._getCachedItem(a));this._eagerlyLoadPages();var c=this._uncachedPagesForPhysicalItems();0<c.length&&(this._loading=!0,this.debounce("load",function(){c.forEach(function(e){this._loadPage(e)}.bind(this))},100))},_cachedPagesForPhysicalItems:function(){return this._pagesForPhysicalItems().filter(function(a){return void 0!==
this._cache&&void 0!==this._cache[a]}.bind(this))},_uncachedPagesForPhysicalItems:function(){return this._pagesForPhysicalItems().filter(function(a){return void 0!==this._cache&&void 0===this._cache[a]}.bind(this))},_eagerlyLoadPages:function(){var a=this._cachedPagesForPhysicalItems().slice(0);if(0<a.length){a.sort(function(c,e){return c>e});var b=Math.min(a[a.length-1]+1,Math.max(0,Math.floor(this.size/this.pageSize)-1));this._loadPage(Math.max(0,a[0]-1));this._loadPage(b)}},_pagesForPhysicalItems:function(){return[this._getPageForIndex(this.$.scroller.firstVisibleIndex+
this.$.scroller._vidxOffset)].concat(this.$.scroller._physicalItems.filter(function(a){return a.index}).map(function(a){return this._getPageForIndex(a.index)}.bind(this))).reduce(function(a,b){-1===a.indexOf(b)&&a.push(b);return a},[])},_updateItems:function(a,b){for(var c=0;c<this.pageSize;c++){var e=this.$.scroller._virtualIndexToItem[a*this.pageSize+c];e&&(this._updateItem(e,b[c]),this.debounce("update-heights",function(){this.$.scroller._updateMetrics();this.$.scroller._positionItems();this.$.scroller._updateScrollerSize()},
1))}},_loadPage:function(a,b){b=b||this._updateItems.bind(this);if(!this._cache[a]&&!this._pendingRequests[a]&&this.dataProvider){this._pendingRequests[a]=!0;var c={page:a,pageSize:this.pageSize,sortOrders:this._mapSorters(),filters:this._mapFilters()};this.dataProvider(c,function(e){this._cache[a]=e;delete this._pendingRequests[a];b(a,e);this._loading=0<this._pendingRequests.length;this.debounce("check-size",this._checkSize,2E3)}.bind(this))}},_getPageForIndex:function(a){return Math.floor(a/this.pageSize)},
clearCache:function(){this._cache={};this._pendingRequests={};this.$.scroller.hasData&&this.$.scroller._update();this._flushItemsDebouncer()},_flushItemsDebouncer:function(){this.flushDebouncer("load")},_pageSizeChanged:function(a,b){void 0!==b&&a!==b&&this.clearCache()},_checkSize:function(){void 0===this.size&&console.warn('The \x3cvaadin-grid\x3e needs a value for "size" property in order to display rows.')},_dataProviderChanged:function(a,b){void 0!==b&&this.clearCache();this.$.scroller.hasData||
(this._loading=!0,this._loadPage(0,function(){this.$.scroller.hasData=!0}.bind(this)))}};
</script>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-selection-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.SelectionBehavior={properties:{selectedItems:{type:Object,notify:!0,value:function(){return[]}}},observers:["_selectedItemsChanged(selectedItems.*)"],listeners:{"template-instance-changed":"_templateInstanceChangedSelection"},_templateInstanceChangedSelection:function(a){if("selected"===a.detail.prop){var b=a.detail.inst.item;(this._isSelected(b)?this.deselectItem:this.selectItem).bind(this)(b);this.fire("iron-announce",{text:(this._isSelected(b)?"Selected":"Deselected")+" Row "+
(a.detail.inst.index+1)+" of "+this.size});a.stopPropagation()}},_isSelected:function(a){return this.selectedItems&&-1<this.selectedItems.indexOf(a)},selectItem:function(a){a=this._takeItem(a);this._isSelected(a)||this.push("selectedItems",a)},deselectItem:function(a){a=this._takeItem(a);a=this.selectedItems.indexOf(a);-1<a&&this.splice("selectedItems",a,1)},_toggleItem:function(a){a=this._takeItem(a);-1===this.selectedItems.indexOf(a)?this.selectItem(a):this.deselectItem(a)},_takeItem:function(a){return"number"===
typeof a&&0<=a&&this.items&&this.items.length>a?this.items[a]:a},_selectedItemsChanged:function(a){!this.$.scroller._physicalItems||"selectedItems"!==a.path&&"selectedItems.splices"!==a.path||this.$.scroller._physicalItems.forEach(function(b){b.selected=this._isSelected(b.item)}.bind(this))}};
</script>

<dom-module id="vaadin-grid-selection-themability-styles">
  <template>
    <style>
      vaadin-grid-table .vaadin-grid-row[selected] .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content) {
        background-color: var(--paper-grey-100, rgb(243, 243, 243));
        @apply(--vaadin-grid-body-row-selected-cell);
      }
    </style>
  </template>
</dom-module>




<dom-module id="vaadin-grid-navigation-themability-styles">
  <template>
    <style>
      :host(:focus),
      #table:focus {
        outline: none;
      }

      :host([navigating]:not([interacting])) [focused] > .vaadin-grid-row[focused] > [focused] ::slotted(vaadin-grid-cell-content) {
        box-shadow: inset 0 0 0 3px rgba(0, 0, 0, 0.3);
        @apply(--vaadin-grid-focused-cell);
      }
    </style>
  </template>
</dom-module>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-keyboard-navigation-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.TableKeyboardBehaviorImpl={hostAttributes:{role:"application",tabindex:0},keyBindings:{"ctrl+home":"_onCtrlHome","ctrl+end":"_onCtrlEnd",down:"_onArrowDown",end:"_onEnd",enter:"_onEnter",esc:"_onEscape",f2:"_onF2",home:"_onHome",left:"_onArrowLeft",pagedown:"_onPageDown",pageup:"_onPageUp",right:"_onArrowRight",space:"_onSpace",tab:"_onTab",up:"_onArrowUp"},attached:function(){Polymer.IronA11yAnnouncer.requestAvailability()},properties:{_virtualFocus:{type:Object,observer:"_virtualFocusChanged"},
interacting:{type:Boolean,reflectToAttribute:!0,value:!1},navigating:{type:Boolean,reflectToAttribute:!0,value:!1}},listeners:{focus:"_onFocus","cell-focus":"_onCellFocus","cell-content-focus":"_onCellContentFocus"},ready:function(){document.addEventListener("keydown",function(a){9===a.keyCode&&(this._tabbed=!0);9===a.keyCode&&a.shiftKey&&(this._shiftTabbed=!0)}.bind(this),!0);document.addEventListener("keyup",function(a){9===a.keyCode&&(this._tabbed=!1);9===a.keyCode&&a.shiftKey&&(this._shiftTabbed=
!1)}.bind(this),!0)},_isFooterVisible:function(){return 0<this.$.footer._rows.filter(function(a){return!a.hidden}).length},_onFocus:function(){this._tabbed&&!this._shiftTabbed&&this._activateNavigation()},_activateNavigation:function(){this.$.footerFocusTrap.focus()},_onFocusout:function(){this.interacting=this.navigating=!1},_onFooterFocus:function(){this.navigating=!0;this.interacting=!1;this._virtualFocus=this._virtualFocus||(this._shiftTabbed?this._isFooterVisible()?this.$.footer:this.$.items:
this.$.header)},_virtualFocusChanged:function(a,b){b&&(b.focused=!1);a&&(a._focusedCellIndex=a._focusedCellIndex||0,a._focusedRowIndex=a._focusedRowIndex||0,a.focused=!0,a===this.$.items&&this._ensureVirtualFocusInViewport())},_onTab:function(a){if(!this.interacting&&this._virtualFocus)if(this.navigating)if(a.detail.keyboardEvent.shiftKey)switch(this._virtualFocus){case this.$.footer:this._virtualFocus=this.$.items;a.preventDefault();break;case this.$.items:this._virtualFocus=this.$.header;a.preventDefault();
break;case this.$.header:this.focus(),this._virtualFocus=null}else switch(this._virtualFocus){case this.$.header:this._virtualFocus=this.$.items;a.preventDefault();break;case this.$.items:this._isFooterVisible()?(this._virtualFocus=this.$.footer,a.preventDefault()):this.async(function(){this._virtualFocus=null},1);break;case this.$.footer:this._virtualFocus=null}else this._activateNavigation(),a.preventDefault()},_isAboveViewport:function(a){return this.firstVisibleIndex>a},_onArrowDown:function(a){this.interacting||
(a.preventDefault(),this.navigating=!0,this._virtualFocus.focusDown(),this._ensureVirtualFocusInViewport())},_scrollPageDown:function(){var a=this.$.header.getBoundingClientRect(),b=this.$.footer.getBoundingClientRect();this.$.scroller.$.table.scrollTop+=b.top-a.bottom;this.$.scroller._scrollHandler()},_onPageDown:function(a){this.interacting||(a.preventDefault(),this.navigating=!0,this._virtualFocus===this.$.items?(a=this.$.scroller.lastVisibleIndex,this._scrollPageDown(),this._virtualFocus._focusedRowIndex+=
this.$.scroller.lastVisibleIndex-a||this.$.scroller.lastVisibleIndex-this._virtualFocus._focusedRowIndex,this._ensureVirtualFocusInViewport()):this._virtualFocus.focusPageDown())},_scrollPageUp:function(){var a=this.$.header.getBoundingClientRect(),b=this.$.footer.getBoundingClientRect();this.$.scroller.$.table.scrollTop-=b.top-a.bottom;this.$.scroller._scrollHandler()},_onPageUp:function(a){this.interacting||(a.preventDefault(),this.navigating=!0,this._virtualFocus===this.$.items?(a=this.$.scroller.lastVisibleIndex,
this._scrollPageUp(),this._virtualFocus._focusedRowIndex-=a-this.$.scroller.lastVisibleIndex||this._virtualFocus._focusedRowIndex,this._ensureVirtualFocusInViewport()):this._virtualFocus.focusPageUp())},_onArrowUp:function(a){this.interacting||(a.preventDefault(),this.navigating=!0,this._virtualFocus.focusUp(),this._ensureVirtualFocusInViewport())},_onArrowRight:function(a){this.interacting||(a.preventDefault(),this.navigating=!0,this._virtualFocus.focusRight(),this._ensureVirtualFocusInViewport())},
_onArrowLeft:function(a){this.interacting||(a.preventDefault(),this.navigating=!0,this._virtualFocus.focusLeft(),this._ensureVirtualFocusInViewport())},_onHome:function(a){this.interacting||(a.preventDefault(),this.navigating=!0,this._virtualFocus.focusHome(),this._ensureVirtualFocusInViewport())},_onEnd:function(a){this.interacting||(a.preventDefault(),this.navigating=!0,this._virtualFocus.focusEnd(),this._ensureVirtualFocusInViewport())},_moveFocusToFocusTarget:function(){var a=this._virtualFocus._focusedCell._cellContent;
(a=a.querySelector("[focus-target]")||a.firstElementChild)&&a.focus()},_onEnter:function(a){this.interacting?"input"===a.detail.keyboardEvent.target.localName&&"text"===a.detail.keyboardEvent.target.type&&this.$.footerFocusTrap.focus():(a.preventDefault(),this._moveFocusToFocusTarget())},_onEscape:function(){this.interacting?this.$.footerFocusTrap.focus():this.navigating&&(this.navigating=!1)},_onF2:function(a){a.preventDefault();this.interacting?this.$.footerFocusTrap.focus():this._moveFocusToFocusTarget()},
_onCtrlHome:function(a){this.interacting||(a.preventDefault(),this.navigating=!0,this._virtualFocus.focusFirst(),this._ensureVirtualFocusInViewport())},_onCtrlEnd:function(a){this.interacting||(a.preventDefault(),this.navigating=!0,this._virtualFocus.focusLast(),this._ensureVirtualFocusInViewport())},_onSpace:function(a){if(!this.interacting){a.preventDefault();a=this._virtualFocus._focusedCell;var b=a.getContentChildren(Polymer.Element?"slot":"content")[0].firstElementChild;b?b.click():this.navigating&&
this.fire("cell-activate",{model:a.instance})}},_onCellContentFocus:function(a){this.interacting=!0;this._onCellFocus(a)},_onCellFocus:function(a){a=a.detail.cell;var b=a.parentElement,c=b.parentElement,e=Array.prototype.indexOf.call(Polymer.dom(c).children,b);c===this.$.items&&(e=b.index);c._focusedRowIndex=e;c._focusedCellIndex=Array.prototype.indexOf.call(Polymer.dom(b).children,a);this._virtualFocus=c;a.hasAttribute("detailscell")&&(c._focusedCellIndex=0,c._moveFocusToDetailsCell())},_ensureVirtualFocusInViewport:function(){var a=
this.$.scroller._vidxOffset+this.$.scroller._virtualStart,b=this._virtualFocus._focusedRowIndex;this._virtualFocus===this.$.items&&(b<a||b>a+this.$.scroller._physicalCount)&&(this.$.scroller.scrollToScaledIndex(b),this._virtualFocus._focusedCellChanged(b,this._virtualFocus._focusedCellIndex));this._ensureElementInViewport(this._virtualFocus._focusedCell)},_ensureElementInViewport:function(a){var b=a.getBoundingClientRect();if(this._virtualFocus===this.$.items){var c=this.$.footer.getBoundingClientRect().top,
e=this.$.header.getBoundingClientRect().bottom;b.bottom>c?this.$.scroller.$.table.scrollTop+=b.bottom-c:b.top<e&&(this.$.scroller.$.table.scrollTop+=b.top-e)}if(!a.hasAttribute("detailscell")){a=this.$.scroller.$.table.getBoundingClientRect().right;c=this.$.scroller.$.table.getBoundingClientRect().left;if(e=this._virtualFocus._focusedRow.querySelector("[last-frozen]"))c=e.getBoundingClientRect().right;b.right>a?this.$.scroller.$.table.scrollLeft+=b.right-a:b.left<c&&(this.$.scroller.$.table.scrollLeft+=
b.left-c)}}};vaadin.elements.grid.TableKeyboardBehavior=[vaadin.elements.grid.TableKeyboardBehaviorImpl,Polymer.IronA11yKeysBehavior];
</script>

<dom-module id="vaadin-grid-column-reordering-themability-styles">
  <template>
    <style>
      vaadin-grid-table[reordering] .vaadin-grid-cell {
        background: #000;
      }

      :host([reordering]) .vaadin-grid-cell[reorder-status="dragging"] {
        background: var(--primary-color, #000);
      }

      vaadin-grid-table[reordering] .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content) {
        transition: opacity 300ms;
        transform: translateZ(0);
        opacity: 0.8;
      }

      #scroller .vaadin-grid-cell[reorder-status="allowed"] ::slotted(vaadin-grid-cell-content) {
        opacity: 1;
      }

      #scroller .vaadin-grid-cell[reorder-status="dragging"] {
        background: var(--primary-color, #000);
      }

      #scroller .vaadin-grid-cell[reorder-status="dragging"] ::slotted(vaadin-grid-cell-content) {
        opacity: 0.95;
      }
    </style>
  </template>
</dom-module>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-column-reordering-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};vaadin.elements.grid.ColumnReorderingBehavior={properties:{columnReorderingAllowed:{type:Boolean,value:!1}}};
vaadin.elements.grid.TableColumnReorderingBehavior={properties:{_orderBaseScope:{type:Number,value:1E7}},listeners:{dragstart:"_onDragStart",dragover:"_onDragOver",dragend:"_onDragEnd"},observers:["_updateOrders(columnTree, columnTree.*)"],_updateOrders:function(a,b){void 0!==a&&void 0!==b&&a[0].forEach(function(c,e){c._order=(e+1)*this._orderBaseScope},this)},_onDragStart:function(a){if("vaadin-grid-cell-content"===a.target.localName){var b=this._getCellByCellContent(a.target);b&&(this.toggleAttribute("reordering",
!0),this._draggedColumn=b.column,this._setSiblingsReorderStatus(this._draggedColumn,"allowed"),this._draggedColumn._reorderStatus="dragging",a.dataTransfer&&(a.dataTransfer.setData("text",""),a.dataTransfer.effectAllowed="move"),this._autoScroller())}},_setSiblingsReorderStatus:function(a,b){Array.prototype.filter.call(Polymer.dom(Polymer.dom(a).parentNode).children,function(c){return/column/.test(c.localName)&&this._isSwapAllowed(c,a)},this).forEach(function(c){c._reorderStatus=b})},_onDragOver:function(a){if(this._draggedColumn){var b=
(Polymer.Element?a.composedPath():Polymer.dom(a).path).filter(function(c){return"vaadin-grid-cell-content"===c.localName})[0];b&&(a.preventDefault(),b=this._getCellByCellContent(b),(b=this._getTargetColumn(b,this._draggedColumn))&&this._isSwapAllowed(this._draggedColumn,b)&&this._isSwappableByPosition(b,a.clientX)&&this._swapColumnOrders(this._draggedColumn,b),this._lastDragClientX=a.clientX)}},_autoScroller:function(){if(this._lastDragClientX){var a=this._lastDragClientX-this.getBoundingClientRect().right+
50,b=this.getBoundingClientRect().left-this._lastDragClientX+50;0<a?this.$.table.scrollLeft+=a/10:0<b&&(this.$.table.scrollLeft-=b/10);this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)},_onDragEnd:function(){this._draggedColumn&&(this.toggleAttribute("reordering",!1),this._draggedColumn._reorderStatus="",this._setSiblingsReorderStatus(this._draggedColumn,""),this._lastDragClientX=this._draggedColumn=null)},_isSwapAllowed:function(a,b){if(a&&b){var c=a.parentElement===b.parentElement,
e=a.frozen===b.frozen;return a!==b&&c&&e}},_isSwappableByPosition:function(a,b){var c=Array.prototype.filter.call(Polymer.dom(this.$.header).querySelectorAll(".vaadin-grid-cell"),function(f){return f.column===a})[0],e=this.$.header.querySelector("[reorder-status\x3ddragging]").getBoundingClientRect();return c.getBoundingClientRect().left>e.left?b>c.getBoundingClientRect().right-e.width:b<c.getBoundingClientRect().left+e.width},_getCellByCellContent:function(a){if(Polymer.Element)return a.assignedSlot.parentNode;
a=Polymer.dom(a).getDestinationInsertionPoints()[0];return Polymer.dom(a).parentNode},_swapColumnOrders:function(a,b){var c=a._order;a._order=b._order;b._order=c;this._updateLastFrozen();this._updateLastColumn()},_getTargetColumn:function(a,b){if(a&&b){for(var c=a.column;c.parentElement!==b.parentElement&&c!==this.target;)c=c.parentElement;return c.parentElement===b.parentElement?c:a.column}}};
</script>




<script>//~~WEBPATH~~/vaadin-grid/iron-list-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.IronListBehaviorImpl=function(){var a=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),b=a&&8<=a[1];return{is:"iron-list",properties:{maxPhysicalCount:{type:Number,value:500},as:{type:String,value:"item"},indexAs:{type:String,value:"index"}},_ratio:.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_physicalIndexForKey:null,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,
_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_lastVisibleIndexVal:null,_collection:null,_itemsRendered:!1,_lastPage:null,_maxPages:3,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return this._physicalSize-this._viewportHeight},get _maxScrollTop(){return this._estScrollHeight-
this._viewportHeight+this._scrollerPaddingTop},_minVirtualStart:0,get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},_virtualStartVal:0,set _virtualStart(c){this._virtualStartVal=Math.min(this._maxVirtualStart,Math.max(this._minVirtualStart,c))},get _virtualStart(){return this._virtualStartVal||0},_physicalStartVal:0,set _physicalStart(c){this._physicalStartVal=c%this._physicalCount;0>this._physicalStartVal&&(this._physicalStartVal=this._physicalCount+this._physicalStartVal);
this._physicalEnd=(this._physicalStart+this._physicalCount-1)%this._physicalCount},get _physicalStart(){return this._physicalStartVal||0},_physicalCountVal:0,set _physicalCount(c){this._physicalCountVal=c;this._physicalEnd=(this._physicalStart+this._physicalCount-1)%this._physicalCount},get _physicalCount(){return this._physicalCountVal},_physicalEnd:0,get _optPhysicalSize(){return this._viewportHeight*this._maxPages},get _optPhysicalCount(){return this._estRowsInView*this._itemsPerRow*this._maxPages},
get _isVisible(){return this.scrollTarget&&!(!this.scrollTarget.offsetWidth&&!this.scrollTarget.offsetHeight)},get firstVisibleIndex(){if(null===this._firstVisibleIndexVal){var c=Math.floor(this._physicalTop+this._scrollerPaddingTop);this._firstVisibleIndexVal=this._iterateItems(function(e,f){c+=this._getPhysicalSizeIncrement(e);if(c>this._scrollPosition)return f})||0}return this._firstVisibleIndexVal},get lastVisibleIndex(){if(null===this._lastVisibleIndexVal){var c=this._physicalTop;this._iterateItems(function(e,
f){if(c<this._scrollBottom)this._lastVisibleIndexVal=f;else return!0;c+=this._getPhysicalSizeIncrement(e)})}return this._lastVisibleIndexVal},get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)},attached:function(){this.updateViewportBoundaries();this._render();this.listen(this,"iron-resize",
"_resizeHandler")},detached:function(){this._itemsRendered=!1;this.unlisten(this,"iron-resize","_resizeHandler")},updateViewportBoundaries:function(){this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(window.getComputedStyle(this)["padding-top"]||0,10);this._viewportHeight=this._scrollTargetHeight},_update:function(c,e){this._assignModels(c);this._updateMetrics(c);if(e)for(;e.length;)c=e.pop(),this._physicalTop-=this._getPhysicalSizeIncrement(c);this._positionItems();this._updateScrollerSize();
this._increasePoolIfNeeded()},_increasePoolIfNeeded:function(){if(0===this._viewportHeight)return!1;var c=this._physicalSizes.reduce(function(f,g){return f+(g||100)},0),e=c>this._viewportHeight;if(c>=this._optPhysicalSize&&e)return!1;c=Math.floor(this._physicalSize/this._viewportHeight);0===c?this._debounceTemplate(this._increasePool.bind(this,Math.round(.5*this._physicalCount))):this._lastPage!==c&&e?Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",this._increasePool.bind(this,this._itemsPerRow),
16)):this._debounceTemplate(this._increasePool.bind(this,Math.ceil(this._viewportHeight/(this._physicalSize/this._physicalCount)*this._maxPages-this._physicalCount)||1));this._lastPage=c;return!0},_debounceTemplate:function(c){Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",c))},_increasePool:function(c){var e=this._physicalCount;c=Math.min(this._physicalCount+c,this._virtualCount-this._virtualStart,Math.max(this.maxPhysicalCount,25))-e;0>=c||([].push.apply(this._physicalItems,this._createPool(c)),
[].push.apply(this._physicalSizes,Array(c)),this._physicalCount=e+c,this._update())},_render:function(){var c=0<this._virtualCount||0<this._physicalCount;this.isAttached&&!this._itemsRendered&&this._isVisible&&c&&(this._lastPage=0,this._update(),this._itemsRendered=!0)},_iterateItems:function(c,e){var f,g;if(2===arguments.length&&e)for(g=0;g<e.length;g++){var h=e[g];var l=this._computeVidx(h);if(null!=(f=c.call(this,h,l)))return f}else{h=this._physicalStart;for(l=this._virtualStart;h<this._physicalCount;h++,
l++)if(null!=(f=c.call(this,h,l)))return f;for(h=0;h<this._physicalStart;h++,l++)if(null!=(f=c.call(this,h,l)))return f}},_computeVidx:function(c){return c>=this._physicalStart?this._virtualStart+(c-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+c},_updateMetrics:function(c){this.scrolling&&Polymer.dom.flush();var e=0,f=0,g=this._physicalAverageCount,h=this._physicalAverage;this._iterateItems(function(l){f+=this._physicalSizes[l]||0;this._physicalSizes[l]=this._physicalItems[l].offsetHeight;
e+=this._physicalSizes[l];this._physicalAverageCount+=this._physicalSizes[l]?1:0},c);this._viewportHeight=this._scrollTargetHeight;this._physicalSize=this._physicalSize+e-f;this._physicalAverageCount!==g&&(this._physicalAverage=Math.round((h*g+e)/this._physicalAverageCount))},_positionItems:function(){this._adjustScrollPosition();var c=this._physicalTop;this._iterateItems(function(e){this._physicalItems[e].style.transform=this._getTranslate(0,c);c+=this._physicalSizes[e]})},_getPhysicalSizeIncrement:function(c){return this._physicalSizes[c]},
_shouldRenderNextRow:function(c){return c%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var c=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);c&&(this._physicalTop-=c,b||0===this._physicalTop||this._resetScrollPosition(this._scrollTop-c))},_resetScrollPosition:function(c){this.scrollTarget&&(this._scrollPosition=this._scrollTop=c)},_updateScrollerSize:function(c){this._estScrollHeight=this._physicalBottom+Math.max(this._virtualCount-
this._physicalCount-this._virtualStart,0)*this._physicalAverage;if((c=(c=c||0===this._scrollHeight)||this._scrollPosition>=this._estScrollHeight-this._physicalSize)||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight},scrollToIndex:function(c){Polymer.dom.flush();c=Math.min(Math.max(c,0),this._virtualCount-1);if(!this._isIndexRendered(c)||c>=this._maxVirtualStart)this._virtualStart=
c-1;this._assignModels();this._updateMetrics();this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var e=this._physicalStart,f=this._virtualStart,g=0,h=this._hiddenContentSize;f<c&&g<=h;)g+=this._getPhysicalSizeIncrement(e),e=(e+1)%this._physicalCount,f++;this._updateScrollerSize(!0);this._positionItems();this._resetScrollPosition(this._physicalTop+this._scrollerPaddingTop+g);this._increasePoolIfNeeded();this._lastVisibleIndexVal=this._firstVisibleIndexVal=
null},_resetAverage:function(){this._physicalAverageCount=this._physicalAverage=0},_resizeHandler:function(){Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",function(){this.updateViewportBoundaries();this._render();this._itemsRendered&&this._physicalItems&&this._isVisible&&(this._resetAverage(),this.scrollToIndex(this.firstVisibleIndex))}.bind(this),1))},updateSizeForItem:function(c){c=this._physicalIndexForKey[c];null!=c&&(this._updateMetrics([c]),this._positionItems())},_isIndexRendered:function(c){return c>=
this._virtualStart&&c<=this._virtualEnd},_isIndexVisible:function(c){return c>=this.firstVisibleIndex&&c<=this.lastVisibleIndex}}}();vaadin.elements.grid.IronListBehavior=[Polymer.Templatizer,Polymer.IronScrollTargetBehavior,vaadin.elements.grid.IronListBehaviorImpl];
</script>


<dom-module id="vaadin-grid-table-styles">
  <template>
    <style>

      @keyframes appear {
        to {
          opacity: 1;
        }
      }

      vaadin-grid-table {
        display: block;
        position: relative;
        animation: 1ms appear;
      }

      @media only screen and (-webkit-max-device-pixel-ratio: 1) {
        :host {
          will-change: transform;
        }
      }

      #items {
        position: relative;
      }

      #items {
        border-top: 0 solid transparent;
        border-bottom: 0 solid transparent;
      }

      #items > .vaadin-grid-row {
        box-sizing: border-box;
        margin: 0;
        position: absolute;
      }

      vaadin-grid-table-body {
        display: block;
      }

      vaadin-grid-table-header .vaadin-grid-cell,
      vaadin-grid-table-footer .vaadin-grid-cell {
        top: 0;
      }

      .vaadin-grid-cell {
        padding: 0;
        flex-shrink: 0;
        flex-grow: 1;
        box-sizing: border-box;
        display: flex;
      }

      .vaadin-grid-cell:not([detailscell]) {
        position: relative;
      }

      .vaadin-grid-cell ::slotted(vaadin-grid-cell-content) {
         width: 100%;
         display: inline-flex;
         justify-content: center;
         flex-direction: column;
         white-space: nowrap;
         overflow: hidden;
      }

      .vaadin-grid-column-resize-handle {
        position: absolute;
        right: 0;
        height: 100%;
        cursor: col-resize;
        z-index: 1;
      }

      .vaadin-grid-column-resize-handle::before {
        position: absolute;
        content: "";
        height: 100%;
        width: 35px;
        transform: translateX(-50%);
      }

      [lastcolumn] .vaadin-grid-column-resize-handle::before,
      [last-frozen] .vaadin-grid-column-resize-handle::before {
        width: 18px;
        transform: translateX(-100%);
      }

      vaadin-grid-table[column-reordering-allowed] #header,
      vaadin-grid-table[column-resizing] {
        -ms-user-select: none;
        -moz-user-select: none;
        -webkit-user-select: none;
        user-select: none;
      }

      vaadin-grid-table[column-resizing] {
        cursor: col-resize;
      }

      .vaadin-grid-row:not([hidden]) {
        display: flex;
        width: 100%;
      }

      [frozen] {
        z-index: 2;
      }

      [hidden] {
        display: none;
      }

      vaadin-grid-table[no-content-pointer-events] .vaadin-grid-cell ::slotted(vaadin-grid-cell-content) {
        pointer-events: none;
      }
    </style>
  </template>
</dom-module>

<dom-module id="vaadin-grid-table-table-styles">
  <template>
    <style>
      :host([ios][column-resizing]) #outerscroller {
        overflow: hidden;
      }

      #fixedsizer,
      #outersizer {
        border-top: 0 solid transparent;
        border-bottom: 0 solid transparent;
      }

      #table {
        height: 100%;
        width: 100%;
        display: block;
        overflow: auto;
        box-sizing: border-box;
      }

      #table[overflow-hidden],
      #outerscroller[overflow-hidden] {
        overflow: hidden;
      }

      vaadin-grid-sizer {
        position: relative;
        width: 100%;
      }

      #sizerwrapper {
        position: absolute;
        width: 100%;
        z-index: -100;
      }

      #reorderghost {
        visibility: hidden;
        position: fixed;
        opacity: 0.5;
        pointer-events: none;
      }

      ::slotted(vaadin-grid-column),
      ::slotted(vaadin-grid-selection-column),
      ::slotted(vaadin-grid-column-group) {
        display: none;
      }

    </style>
  </template>
</dom-module>

<dom-module id="vaadin-grid-table-themability-styles">
  <template>
    <style>

      /* Default borders */
      vaadin-grid-table-header .vaadin-grid-row:last-child .vaadin-grid-cell ::slotted(vaadin-grid-cell-content) {
        border-bottom: 1px solid var(--divider-color, rgba(0, 0, 0, 0.08));
      }

      vaadin-grid-table-footer .vaadin-grid-row:first-child .vaadin-grid-cell ::slotted(vaadin-grid-cell-content) {
        border-top: 1px solid var(--divider-color, rgba(0, 0, 0, 0.08));
      }

      vaadin-grid-table-body .vaadin-grid-row:not([lastrow]) .vaadin-grid-cell ::slotted(vaadin-grid-cell-content) {
        border-bottom: 1px solid var(--divider-color, rgba(0, 0, 0, 0.08));
      }

      [last-frozen] ::slotted(vaadin-grid-cell-content) {
        border-right: 1px solid var(--divider-color, rgba(0, 0, 0, 0.08));
      }

      /* Column resize handle */

      .vaadin-grid-column-resize-handle {
        border-right: 1px solid var(--divider-color, rgba(0, 0, 0, 0.08));
        @apply(--vaadin-grid-column-resize-handle);
      }

      /* Cells */
      vaadin-grid-table .vaadin-grid-row .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content) {
        background: #fff;
        text-align: left;
        padding: 8px;
        box-sizing: border-box;
        @apply(--vaadin-grid-cell);
      }

      vaadin-grid-table-header .vaadin-grid-row .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content) {
        font-weight: 500;
        @apply(--vaadin-grid-header-cell);
      }

      vaadin-grid-table-footer .vaadin-grid-row .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content) {
        font-weight: 500;
        @apply(--vaadin-grid-footer-cell);
      }

      vaadin-grid-table-body .vaadin-grid-row .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content) {
        @apply(--vaadin-grid-body-cell);
      }

      vaadin-grid-table-body [odd] .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content) {
        @apply(--vaadin-grid-body-row-odd-cell);
      }

      vaadin-grid-table .vaadin-grid-row .vaadin-grid-cell:not([detailscell])[last-frozen] ::slotted(vaadin-grid-cell-content) {
        @apply(--vaadin-grid-cell-last-frozen);
      }

      vaadin-grid-table:not([scrolling]) vaadin-grid-table-body .vaadin-grid-row:hover .vaadin-grid-cell ::slotted(vaadin-grid-cell-content) {
        @apply(--vaadin-grid-body-row-hover-cell);
      }

      vaadin-grid-table .vaadin-grid-row .vaadin-grid-cell.vaadin-grid-cell[lastcolumn] ::slotted(vaadin-grid-cell-content) {
        border-right: none;
      }

    </style>
  </template>
</dom-module>

<dom-module id="vaadin-grid-table">
  <template>
      <style include="vaadin-grid-table-table-scroll-styles"></style>
      <style include="vaadin-grid-table-table-styles"></style>

      <style include="vaadin-grid-data-provider-themability-styles"></style>

      <div id="spinner"></div>
      <div id="table" tabindex="-1" overflow-hidden$="[[_hideTableOverflow(scrollbarWidth, safari)]]">
        <div id="sizerwrapper">
          <vaadin-grid-sizer id="fixedsizer" top="[[_estScrollHeight]]" column-tree="[[columnTree]]"></vaadin-grid-sizer>
        </div>
        <slot name="header"></slot>
        <slot name="items"></slot>
        <slot name="footer"></slot>
      </div>

      <div id="reorderghost"></div>
      <vaadin-grid-table-outer-scroller id="outerscroller" scroll-target="[[scrollTarget]]" overflow-hidden$="[[_hideOuterScroller(scrollbarWidth, safari)]]" ios$="[[ios]]" scrolling$="[[scrolling]]">
      <vaadin-grid-sizer id="outersizer" top="[[_estScrollHeight]]" column-tree="[[columnTree]]"></vaadin-grid-sizer>
    </vaadin-grid-table-outer-scroller>
    <slot></slot>
    <slot name="footerFocusTrap"></slot>
  </template>
</dom-module>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-table.html.js
Polymer({is:"vaadin-grid-table",behaviors:[vaadin.elements.grid.IronListBehavior,vaadin.elements.grid.TableScrollBehavior,vaadin.elements.grid.TableColumnReorderingBehavior,Polymer.Templatizer],properties:{size:Number,columnTree:Array,bindData:Function,rowDetailsTemplate:Object,columnReorderingAllowed:{type:Boolean,reflectToAttribute:!0},safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},scrollbarWidth:{type:Number,value:function(){var a=document.createElement("div");
a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";a.style.top="-9999px";document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;document.body.removeChild(a);return b}},target:Object,hasData:Boolean},observers:["_columnTreeChanged(columnTree, _physicalItems, _physicalCountVal)","_sizeChanged(size, bindData, hasData)","_rowDetailsTemplateChanged(rowDetailsTemplate, _physicalItems, _physicalCountVal)"],listeners:{"property-changed":"_columnPropChanged",
animationend:"_onAnimationEnd","column-resizing":"_onColumnResize"},ready:function(){this.$=this.$||{};this.$.header=this.domHost.$.header;this.$.items=this.domHost.$.items;this.$.footer=this.domHost.$.footer},_onColumnResize:function(){this.toggleAttribute("column-resizing",this.$.header.querySelector("[column-resizing]"));this._gridResizeHandler()},_onAnimationEnd:function(a){/appear/.test(a.animationName)&&(this._render(),this._updateHeaderFooterMetrics(),a.stopPropagation())},_columnPropChanged:function(a){"headerTemplate"===
a.detail.path&&this.toggleAttribute("has-templates",!0,this.$.header);"footerTemplate"===a.detail.path&&this.toggleAttribute("has-templates",!0,this.$.footer);/frozen|hidden/.test(a.detail.path)&&this._frozenCellsChanged();"hidden"===a.detail.path&&this._gridResizeHandler()},_hideOuterScroller:function(a,b){return 0===a&&!b},_hideTableOverflow:function(a,b){return 0===a&&b},_rowDetailsTemplateChanged:function(a,b,c){void 0!==a&&b&&void 0!==c&&Array.prototype.forEach.call(b,function(e){e.rowDetailsTemplate=
a})},_columnTreeChanged:function(a,b,c){void 0!==a&&b&&void 0!==c&&(Polymer.RenderStatus.afterNextRender(this,this._update),this._frozenCellsChanged(),this._hasTemplatesChanged(a),Array.prototype.forEach.call(b,function(e){e.columns=a[a.length-1]}),this._gridResizeHandler(),Polymer.dom.flush(this),this._updateLastColumn())},_updateLastColumn:function(){Array.prototype.forEach.call(Polymer.dom(this.domHost.root).querySelectorAll(".vaadin-grid-row"),function(a){a.updateLastColumn()})},_updateHeaderFooterMetrics:function(){this._physicalSizes&&
Polymer.dom.flush();this._updateHeaderFooterMetricsSync();Polymer.RenderStatus.afterNextRender(this.$.header,function(){this._updateHeaderFooterMetricsSync();this._pendingScrollToScaledIndex&&this.scrollToScaledIndex(this._pendingScrollToScaledIndex)}.bind(this))},_updateHeaderFooterMetricsSync:function(){var a=this.$.header.clientHeight+"px",b=this.$.footer.clientHeight+"px";[this.$.outersizer,this.$.fixedsizer,this.$.items].forEach(function(c){c.style.borderTopWidth=a;c.style.borderBottomWidth=
b})},_hasTemplatesChanged:function(a){var b=!1,c=!1;a.forEach(function(e){return e.forEach(function(f){b=b||f.headerTemplate;c=c||f.footerTemplate})});this.toggleAttribute("has-templates",b,this.$.header);this.toggleAttribute("has-templates",c,this.$.footer)},_createPool:function(a){for(var b=Array(a),c=0;c<a;c++){var e=document.createElement("vaadin-grid-table-row");e.target=this.domHost;b[c]=e;e.setAttribute("hidden","");Polymer.dom(this.$.items).appendChild(e)}return b},_sizeChanged:function(a,
b,c){if(void 0!==a&&void 0!==b&&void 0!==c){var e=this._scrollTop,f=this.firstVisibleIndex+this._vidxOffset;this._virtualCount=Math.min(a,1E5);this._physicalIndexForKey={};this._lastVisibleIndexVal=this._firstVisibleIndexVal=null;this._vidxOffset=0;this._physicalItems||(this._physicalCount=Math.max(1,Math.min(25,this._virtualCount)),this._physicalItems=this._createPool(this._physicalCount),this._physicalSizes=Array(this._physicalCount));this._itemsRendered=!1;this._debounceTemplate(function(){this._render();
this._viewportHeight&&(this.scrollToScaledIndex(Math.min(f,this.size)),this._scrollTop=e,this._scrollHandler(),this.flushDebouncer("vaadin-grid-scrolling"))})}},_assignModels:function(a){this._virtualIndexToItem=this._virtualIndexToItem||{};this._iterateItems(function(b,c){b=this._physicalItems[b];b.index&&delete this._virtualIndexToItem[b.index];b.index=c+this._vidxOffset;this._virtualIndexToItem[b.index]=b;b.toggleAttribute("odd",b.index%2);b.toggleAttribute("lastrow",b.index===this.size-1);b.toggleAttribute("hidden",
b.index>=this.size);this.bindData(b.index,b)},a)},_gridResizeHandler:function(){this._updateHeaderFooterMetrics();this._physicalSizes&&(this._physicalItems.forEach(function(a){a.updateRowDetailsCellMetrics()}),this.debounce("vaadin-grid-resizing",function(){this._update()}.bind(this),1))}});
</script>




<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-column.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.ColumnBaseBehavior={properties:{resizable:{type:Boolean,value:function(){if("vaadin-grid-column-group"!==this.localName){var a=Polymer.dom(this).parentNode;return a&&"vaadin-grid-column-group"===a.localName?a.resizable||!1:!1}}},headerTemplate:{type:Object},footerTemplate:{type:Object},frozen:{type:Boolean,notify:!0,value:!1},hidden:{type:Boolean,notify:!0},_lastFrozen:{type:Boolean,notify:!0,value:!1},_order:Number,_reorderStatus:Boolean},observers:["_footerTemplateChanged(footerTemplate)",
"_headerTemplateChanged(headerTemplate)","_lastFrozenChanged(_lastFrozen)"],created:function(){function a(b){0<=b.addedNodes.length&&(this.headerTemplate=this._prepareHeaderTemplate(),this.footerTemplate=this._prepareFooterTemplate(),this.template=this._prepareBodyTemplate())}this._templateObserver=Polymer.Element?new Polymer.FlattenedNodesObserver(this,a):Polymer.dom(this).observeNodes(a)},_prepareHeaderTemplate:function(){return this._prepareTemplatizer(this._findTemplate("template.header")||null,
{})},_prepareFooterTemplate:function(){return this._prepareTemplatizer(this._findTemplate("template.footer")||null,{})},_prepareBodyTemplate:function(){return this._prepareTemplatizer(this._findTemplate("template:not(.header):not(.footer)",{}))},_prepareTemplatizer:function(a,b){if(a&&!a.templatizer){var c=new vaadin.elements.grid.Templatizer;c.dataHost=this.dataHost;c._instanceProps=b||c._instanceProps;c.template=a;a.templatizer=c}return a},_selectFirstTemplate:function(a){return Array.prototype.filter.call(Polymer.dom(this).querySelectorAll(a),
function(b){return Polymer.dom(b).parentNode===this}.bind(this))[0]},_findTemplate:function(a){(a=this._selectFirstTemplate(a))&&this.dataHost&&(a._rootDataHost=this.dataHost._rootDataHost||this.dataHost);return a},_headerTemplateChanged:function(a){this.fire("property-changed",{path:"headerTemplate",value:a})},_footerTemplateChanged:function(a){this.fire("property-changed",{path:"footerTemplate",value:a})},_flexGrowChanged:function(a){this.fire("property-changed",{path:"flexGrow",value:a})},_widthChanged:function(a){this.fire("property-changed",
{path:"width",value:a})},_lastFrozenChanged:function(a){this.fire("property-changed",{path:"lastFrozen",value:a})}};
vaadin.elements.grid.ColumnBehaviorImpl={properties:{width:{type:String,value:"100px"},flexGrow:{type:Number,value:1},template:{type:Object}},observers:"_flexGrowChanged(flexGrow);_widthChanged(width);_templateChanged(template);_frozenChanged(frozen, isAttached);_hiddenChanged(hidden);_orderChanged(_order);_reorderStatusChanged(_reorderStatus);_resizableChanged(resizable)".split(";"),_frozenChanged:function(a,b){void 0!==a&&void 0!==b&&(void 0===this._oldFrozen&&!1===a||this.fire("property-changed",
{path:"frozen",value:a}),this._oldFrozen=a)},_templateChanged:function(a){a&&a.templatizer&&Polymer.dom(this.root).appendChild(a.templatizer);this.fire("property-changed",{path:"template",value:a},{bubbles:!1})},_hiddenChanged:function(a){this.fire("property-changed",{path:"hidden",value:a})},_orderChanged:function(a){this.fire("property-changed",{path:"order",value:a})},_reorderStatusChanged:function(a){this.fire("property-changed",{path:"reorderStatus",value:a})},_resizableChanged:function(a){this.fire("property-changed",
{path:"resizable",value:a})}};vaadin.elements.grid.ColumnBehavior=[vaadin.elements.grid.ColumnBaseBehavior,vaadin.elements.grid.ColumnBehaviorImpl];
</script>

<dom-module id="vaadin-grid-column">
  <script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-column.html-2.js
Polymer({is:"vaadin-grid-column",behaviors:[vaadin.elements.grid.ColumnBehavior]});
</script>
</dom-module>




<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-array-data-provider-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.ArrayDataProviderBehavior={properties:{items:Array},observers:["_itemsChanged(items, items.*)"],_itemsChanged:function(a,b){void 0!==a&&void 0!==b&&(this.size=(a||[]).length,this.dataProvider=this.dataProvider||this._arrayDataProvider,this.clearCache())},_arrayDataProvider:function(a,b){var c=(this.items||[]).slice(0);this._checkPaths(this._filters,"filtering",c)&&(c=this._filter(c));this.size=c.length;a.sortOrders.length&&this._checkPaths(this._sorters,"sorting",c)&&(c=c.sort(this._multiSort.bind(this)));
var e=a.page*a.pageSize;b(c.slice(e,e+a.pageSize),c.length)},_checkPaths:function(a,b,c){if(!c.length)return!1;var e=!0,f;for(f in a){var g=a[f].path;if(g&&-1!==g.indexOf(".")){var h=g.replace(/\.[^\.]*$/,"");void 0===Polymer.Base.get(h,c[0])&&(console.warn('Path "'+g+'" used for '+b+" does not exist in all of the items, "+b+" is disabled."),e=!1)}}return e},_multiSort:function(a,b){return this._sorters.map(function(c){return"asc"===c.direction?this._compare(Polymer.Base.get(c.path,a),Polymer.Base.get(c.path,
b)):"desc"===c.direction?this._compare(Polymer.Base.get(c.path,b),Polymer.Base.get(c.path,a)):0},this).reduce(function(c,e){return c?c:e},0)},_normalizeEmptyValue:function(a){return 0<=[void 0,null].indexOf(a)?"":isNaN(a)?a.toString():a},_compare:function(a,b){a=this._normalizeEmptyValue(a);b=this._normalizeEmptyValue(b);return a<b?-1:a>b?1:0},_filter:function(a){return a.filter(function(b){return 0===this._filters.filter(function(c){return-1===this._normalizeEmptyValue(Polymer.Base.get(c.path,b)).toString().toLowerCase().indexOf(c.value.toString().toLowerCase())}.bind(this)).length},
this)}};
</script>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-dynamic-columns-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.DynamicColumnsBehavior={ready:function(){this._addNodeObserver()},_hasColumnGroups:function(a){for(var b=0;b<a.length;b++)if("vaadin-grid-column-group"===a[b].localName)return!0;return!1},_getChildColumns:function(a){return Polymer.dom(a).queryDistributedElements("vaadin-grid-column, vaadin-grid-column-group, vaadin-grid-selection-column")},_flattenColumnGroups:function(a){return a.map(function(b){return"vaadin-grid-column-group"===b.localName?this._getChildColumns(b):[b]},this).reduce(function(b,
c){return b.concat(c)},[])},_getColumnTree:function(){for(var a=[],b=this.queryAllEffectiveChildren("vaadin-grid-column, vaadin-grid-column-group, vaadin-grid-selection-column");;){a.push(b);if(!this._hasColumnGroups(b))break;b=this._flattenColumnGroups(b)}return a},_updateColumnTree:function(){var a=this._getColumnTree();this._arrayEquals(a,this._columnTree)||(this._columnTree=a)},_addNodeObserver:function(){this._observer=Polymer.dom(this).observeNodes(function(a){function b(c){return c.nodeType===
Node.ELEMENT_NODE&&/^vaadin-grid-(column|selection)/i.test(c.localName)}(0<a.addedNodes.filter(b).length||0<a.removedNodes.filter(b).length)&&this._updateColumnTree();(Polymer.Settings.useNativeShadow||Polymer.Settings.useShadow)&&Polymer.dom(this).appendChild(this.$.footerFocusTrap);this.debounce("check-imports",this._checkImports,2E3)}.bind(this))},_arrayEquals:function(a,b){if(!a||!b||a.length!=b.length)return!1;for(var c=0,e=a.length;c<e;c++)if(a[c]instanceof Array&&b[c]instanceof Array){if(!this._arrayEquals(a[c],
b[c]))return!1}else if(a[c]!=b[c])return!1;return!0},_checkImports:function(){["vaadin-grid-column-group","vaadin-grid-sorter","vaadin-grid-filter","vaadin-grid-selection-column"].forEach(function(a){var b=Polymer.dom(this).querySelector(a);!b||(Polymer.isInstance?Polymer.isInstance(b):b instanceof Polymer.Element)||console.warn("Make sure you have imported the required module for \x3c"+a+"\x3e element.")},this)}};
</script>


<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-sort-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};
vaadin.elements.grid.SortBehavior={properties:{multiSort:{type:Boolean,value:!1},_sorters:{type:Array,value:function(){return[]}},_previousSorters:{type:Array,value:function(){return[]}}},listeners:{"sorter-changed":"_onSorterChanged"},ready:function(){Polymer.Element&&!Polymer.Settings.useNativeShadow&&this.async(function(){var a=Polymer.dom(this).querySelectorAll("vaadin-grid-sorter");Array.prototype.forEach.call(a,function(b){b.fire&&b.fire("sorter-changed")})})},_onSorterChanged:function(a){var b=
a.target;this._removeArrayItem(this._sorters,b);b._order=null;this.multiSort?(b.direction&&this._sorters.unshift(b),this._sorters.forEach(function(c,e){c._order=1<this._sorters.length?e:null},this)):(this._sorters.forEach(function(c){c._order=null;c.direction=null}),b.direction&&(this._sorters=[b]));a.stopPropagation();this.dataProvider&&JSON.stringify(this._previousSorters)!==JSON.stringify(this._mapSorters())&&this.clearCache();this._previousSorters=this._mapSorters()},_mapSorters:function(){return this._sorters.map(function(a){return{path:a.path,
direction:a.direction}})},_removeArrayItem:function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}};
</script>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid-filter-behavior.html.js
window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};vaadin.elements.grid.FilterBehavior={properties:{_filters:{type:Array,value:function(){return[]}}},listeners:{"filter-changed":"_filterChanged"},_filterChanged:function(a){-1===this._filters.indexOf(a.target)&&this._filters.push(a.target);a.stopPropagation();this.dataProvider&&this.clearCache()},_mapFilters:function(){return this._filters.map(function(a){return{path:a.path,value:a.value}})}};
</script>



<dom-module id="vaadin-grid">
  <template>
    <style>
      :host {
        display: block;
        height: 400px;
        background: var(--primary-background-color, #fff);
        box-sizing: border-box;
        border: 1px solid var(--divider-color, rgba(0, 0, 0, 0.08));
      }

      :host(:focus) {
        -webkit-tap-highlight-color: transparent;
      }

      :host(:focus) {
        outline: none;
      }

      #scroller {
        height: 100%;
        width: 100%;
      }
    </style>

    <style include="vaadin-grid-table-scroll-styles"></style>
    <style include="vaadin-grid-row-details-styles"></style>
    <style include="vaadin-grid-table-styles"></style>

    <style include="vaadin-grid-table-themability-styles"></style>
    <style include="vaadin-grid-selection-themability-styles"></style>
    <style include="vaadin-grid-navigation-themability-styles"></style>
    <style include="vaadin-grid-active-item-themability-styles"></style>
    <style include="vaadin-grid-row-details-themability-styles"></style>
    <style include="vaadin-grid-column-reordering-themability-styles"></style>

    <vaadin-grid-table id="scroller" loading$="[[_loading]]" bind-data="[[_bindData]]" size="[[size]]" column-tree="[[_columnTree]]" row-details-template="[[_rowDetailsTemplate]]" column-reordering-allowed="[[columnReorderingAllowed]]">
      <vaadin-grid-table-header id="header" slot="header" target="[[_getContentTarget()]]" column-tree="[[_columnTree]]"></vaadin-grid-table-header>
      <vaadin-grid-table-body id="items" slot="items"></vaadin-grid-table-body>
      <vaadin-grid-table-footer id="footer" slot="footer" target="[[_getContentTarget()]]" column-tree="[[_columnTree]]"></vaadin-grid-table-footer>

      
      <slot name="footerFocusTrap"></slot>

      
      
      <slot></slot>

      <vaadin-grid-table-focus-trap id="footerFocusTrap" slot="footerFocusTrap" on-focus-gained="_onFooterFocus" on-focus-lost="_onFocusout">
      </vaadin-grid-table-focus-trap>
    </vaadin-grid-table>
  </template>
</dom-module>

<script>//~~WEBPATH~~/vaadin-grid/vaadin-grid.html.js
Polymer({is:"vaadin-grid",properties:{_columnTree:{type:Array,notify:!0},size:Number,_rowDetailsTemplate:Object,_bindData:{type:Object,value:function(){return this._getItem.bind(this)}}},behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronResizableBehavior,vaadin.elements.grid.ActiveItemBehavior,vaadin.elements.grid.RowDetailsBehavior,vaadin.elements.grid.DataProviderBehavior,vaadin.elements.grid.DynamicColumnsBehavior,vaadin.elements.grid.ArrayDataProviderBehavior,vaadin.elements.grid.SelectionBehavior,
vaadin.elements.grid.SortBehavior,vaadin.elements.grid.FilterBehavior,vaadin.elements.grid.ColumnReorderingBehavior,vaadin.elements.grid.TableKeyboardBehavior],listeners:{"property-changed":"_columnPropChanged","iron-resize":"_gridResizeHandler"},_updateItem:function(a,b){a.style.minHeight=b?"":this.$.scroller._physicalAverage+"px";a.item=b;a.selected=this._isSelected(b);a.expanded=this._isExpanded(b);a.active=null!==b&&b==this.activeItem;a.focused=a.index===this.$.items._focusedRowIndex},_getContentTarget:function(){return this},
ready:function(){this._updateColumnTree();this._rowDetailsTemplate=Polymer.dom(this).querySelector("template.row-details")||void 0;this.$.scroller.target=this;null===document.doctype&&console.warn('\x3cvaadin-grid\x3e requires the "standards mode" declaration. Please add \x3c!DOCTYPE html\x3e to the HTML document.')},_columnPropChanged:function(a){"_childColumns"===a.detail.path&&this._updateColumnTree();a.stopPropagation()},_gridResizeHandler:function(){this.$.scroller._gridResizeHandler()}});
</script>










<dom-module id="tf-hparams-session-group-details">
  <template>
    <template is="dom-if" if="[[!sessionGroup]]">
      <div>
        <h3>No session group selected</h3>
        <p>Please select a session group to see its metric-graphs here.
      </div>
    </template>
    <template is="dom-if" if="[[!_haveMetrics(schema.*)]]">
      <div>
        <h3>No metrics are enabled</h3>
        <p>Please enable some metrics to see content here.
      </div>
    </template>
    <div class="layout horizontal wrap session-group-details">
      <template is="dom-if" if="[[_haveMetricsAndSessionGroup(schema.*, sessionGroup)]]">
        <template is="dom-repeat" items="[[schema.metricInfos]]" as="metricInfo">
          
          <tf-scalar-card class="scalar-card" color-scale="[[_colorScale]]" data-to-load="[[_computeSeriesForSessionGroupMetric(sessionGroup,
                          metricInfo)]]" tag="[[metricInfo.name.tag]]" tag-metadata="[[_computeTagMetadata(metricInfo)]]" x-type="[[_xType]]" multi-experiments="[[_noMultiExperiments]]" request-data="[[_requestData]]" active>
          </tf-scalar-card>
        </template>
      </template>
    </div>
  </template>

  
  <style include="iron-flex">
    :host {
      display: block;
    }
  </style>
  <script>//~~WEBPATH~~/tf-hparams-session-group-details/tf-hparams-session-group-details.html.js
Polymer({is:"tf-hparams-session-group-details",properties:{backend:Object,experimentName:String,schema:Object,sessionGroup:Object,_xType:{type:String,value:cl.XType.STEP},_noMultiExperiments:{type:Boolean,value:!1},_indexOfSession:Object,_sessionGroupNameHash:Number,_requestData:{type:Function,value:function(){var a=this;return function(b){return a.backend.listMetricEvals({experimentName:a.experimentName,sessionName:b.run,metricName:b.tag})}}},_colorScale:{type:Object,value:function(){var a=this;
return{scale:function(b){b=JSON.parse(b)[1];b=a._indexOfSession.get(b);var c=Yk.standard;return c[(a._sessionGroupNameHash+b)%c.length]}}}}},behaviors:[Polymer.IronResizableBehavior],listeners:{"iron-resize":"redraw"},observers:["_sessionGroupChanged(sessionGroup.*)"],redraw:function(){Polymer.dom(this.root).querySelectorAll("tf-scalar-card").forEach(function(a){return a.redraw()})},_sessionGroupChanged:function(){this.sessionGroup?(this._indexOfSession=new Map(this.sessionGroup.sessions.map(function(a,
b){return[a.name,b]})),this._sessionGroupNameHash=tf.hparams.utils.hashOfString(this.sessionGroup.name)):(this._indexOfSession=new Map,this._sessionGroupNameHash=0);Polymer.dom(this.root).querySelectorAll("tf-scalar-card").forEach(function(a){var b=a.get("tag");a.set("tag","");a.set("tag",b)})},_haveMetrics:function(){return this.schema&&Array.isArray(this.schema.metricInfos)&&0<this.schema.metricInfos.length},_haveMetricsAndSessionGroup:function(){return this.sessionGroup&&this._haveMetrics()},_computeSeriesForSessionGroupMetric:function(a,
b){return null===a||null===b?[]:a.sessions.filter(function(c){return void 0!==tf.hparams.utils.metricValueByName(c.metricValues,b.name)}).map(function(c){return{tag:b.name,run:c.name}})},_computeTagMetadata:function(a){return{displayName:tf.hparams.utils.metricName(a),description:a.description||""}}});
</script>
</dom-module>



<dom-module id="tf-hparams-table-view">
  <template>
    <vaadin-grid class="session-group-table" id="sessionGroupsTable" column-reordering-allowed items="[[sessionGroups]]">
      <vaadin-grid-column flex-grow="0" width="10em" resizable>
        <template class="header">
          <div class="table-header table-cell">Session Group Name.</div>
        </template>
        <template>
          <div class="table-cell">[[item.name]]</div>
        </template>
      </vaadin-grid-column>
      <template is="dom-if" if="[[enableShowMetrics]]">
        <vaadin-grid-column flex-grow="0" width="5em" resizable>
          <template class="header">
            <div class="table-header table-cell">Show Metrics</div>
          </template>
          <template>
            <paper-checkbox class="table-cell" checked="{{expanded}}">
            </paper-checkbox>
          </template>
        </vaadin-grid-column>
      </template>
      <template is="dom-repeat" items="[[schema.hparamInfos]]" as="hparamInfo" index-as="hparamIndex">
        <vaadin-grid-column flex-grow="2" width="10em" resizable>
          <template class="header">
            <div class="table-header table-cell">
              [[_hparamName(hparamInfo)]]
            </div>
          </template>
          <template>
            <div class="table-cell">
              [[_sessionGroupHParam(item, hparamInfo.name)]]
            </div>
          </template>
        </vaadin-grid-column>
      </template>
      <template is="dom-repeat" items="{{schema.metricInfos}}" as="metricInfo" index-as="metricIndex">
        <vaadin-grid-column flex-grow="2" width="10em" resizable>
          <template class="header">
            <div class="table-header table-cell">
              [[_metricName(metricInfo)]]
            </div>
          </template>
          <template>
            <div class="table-cell">
              [[_sessionGroupMetric(item, metricInfo.name)]]
            </div>
          </template>
        </vaadin-grid-column>
      </template>
      <template class="row-details">
        <tf-hparams-session-group-details backend="[[backend]]" experiment-name="[[experimentName]]" session-group="[[item]]" schema="[[schema]]" class="session-group-details">
        </tf-hparams-session-group-details>
      </template>
    </vaadin-grid>

    <style>
      :host {
        display: block;
      }
      .table-cell {
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      .table-header {
        /* line-break overflowing column headers */
        white-space: normal;
        overflow-wrap: break-word;
      }
      .session-group-table {
        height: 100%;
      }
      .session-group-details {
        height: 360px;
        overflow-y: auto;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-hparams-table-view/tf-hparams-table-view.html.js
Polymer({is:"tf-hparams-table-view",properties:{schema:Object,sessionGroups:Array,enableShowMetrics:Boolean,backend:Object,experimentName:String},observers:["_schemaOrSessionGroupsChanged(schema.*, sessionGroups.*)"],_schemaOrSessionGroupsChanged:function(){var a=this.$.sessionGroupsTable.get("expandedItems");this.$.sessionGroupsTable.set("expandedItems",[]);Polymer.dom.flush();var b=new Map;this.sessionGroups.forEach(function(c){b.set(c.name,c)});this.$.sessionGroupsTable.set("expandedItems",a.map(function(c){return b.get(c.name)}).filter(Boolean))},
_hparamName:tf.hparams.utils.hparamName,_metricName:tf.hparams.utils.metricName,_sessionGroupHParam:function(a,b){return null!==a&&Object.prototype.hasOwnProperty.call(a.hparams,b)?tf.hparams.utils.prettyPrint(a.hparams[b]):""},_sessionGroupMetric:function(a,b){if(null==a)return null;for(var c=0;c<a.metricValues.length;++c){var e=a.metricValues[c];if(e.name.group===b.group&&e.name.tag==b.tag)return tf.hparams.utils.prettyPrint(e.value)}return""},_rowNumber:function(a){return a+1}});
</script>
</dom-module>


<dom-module id="tf-hparams-session-group-values">
  <template>
    
    <template is="dom-if" if="[[_propertiesArePopulated(schema, sessionGroup)]]">
      
      <tf-hparams-table-view schema="[[schema]]" session-groups="[[_singletonSessionGroups(sessionGroup)]]">
      </tf-hparams-table-view>
    </template>
    <template is="dom-if" if="[[!_propertiesArePopulated(schema, sessionGroup)]]">
      <div>
        Click or hover over a session group to display its values here.
      </div>
    </template>

    <style>
      :host {
        display: block;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-hparams-session-group-values/tf-hparams-session-group-values.html.js
Polymer({is:"tf-hparams-session-group-values",properties:{sessionGroup:{type:Object,value:null},schema:{type:Object,value:null}},_propertiesArePopulated:function(a,b){return void 0!==a&&null!==a&&void 0!==b&&null!==b},_singletonSessionGroups:function(a){return null===a||void 0===a?[]:[a]}});
</script>
</dom-module>




<script>//~~WEBPATH~~/tf-hparams-parallel-coords-plot/utils.html.js
(function(a){(function(b){(function(c){function e(f,g,h){if("LINEAR"===h)return d3.scaleLinear().domain(d3.extent(f)).range([g,0]);if("LOG"===h)return h=d3.extent(f),0>=h[0]&&0<=h[1]?e(f,g,"LINEAR"):d3.scaleLog().domain(h).range([g,0]);if("QUANTILE"===h)return h=d3.range(20).map(function(l){return g-l*g/19}),d3.scaleQuantile().domain(_.uniq(f)).range(h);if("NON_NUMERIC"===h)return d3.scalePoint().domain(_.uniq(f.sort())).range([g,0]).padding(.1);throw RangeError("Unknown scale: "+h);}c.findClosestPath=
function(f,g,h){if(2>g.length)return console.error("Less than two axes in parallel coordinates plot."),null;var l=h[0],n=h[1];if(l<=g[0]||l>=g[g.length-1])return null;var m=_.sortedIndex(g,l);console.assert(0<m);console.assert(m<g.length);var q=m-1,r=null,v=null;f.forEach(function(u){var w=u.controlPoints[q][0];var z=u.controlPoints[q][1],A=u.controlPoints[m][0],E=u.controlPoints[m][1],C=w-A,D=z-E;A=l-A;E=n-E;var J=(C*A+D*E)/(C*C+D*D);w=0>=J?a.hparams.utils.l2NormSquared(A,E):1<=J?a.hparams.utils.l2NormSquared(w-
l,z-n):a.hparams.utils.l2NormSquared(A-J*C,E-J*D);100<w||!(null===r||w<r)||(r=w,v=u)});return v};c.pointScaleInverseImage=function(f,g,h){return f.domain().filter(function(l){l=f(l);return g<=l&&l<=h})};c.quantileScaleInverseImage=function(f,g,h){var l=f.range(),n=l.filter(function(m){return g<=m&&m<=h}).map(function(m){var q=f.invertExtent(m);return m===l[l.length-1]?[q[0],q[1]+1]:q});return 0==n.length?[0,0]:d3.extent(d3.merge(n))};c.continuousScaleInverseImage=function(f,g,h){return[f.invert(g),
f.invert(h)].sort(function(l,n){return l-n})};c.createAxisScale=e})(b.parallel_coords_plot||(b.parallel_coords_plot={}))})(a.hparams||(a.hparams={}))})(tf||(tf={}));
</script>


<dom-module id="tf-hparams-parallel-coords-plot">
  <template>
    <div id="container">
      <svg id="svg">
      </svg>
    </div>
    <style>
      :host {
        display: block;
      }
      svg {
        font: 10px sans-serif;
      }

      .background path {
        fill: none;
        stroke: #ddd;
        shape-rendering: crispEdges;
      }

      .foreground path {
        fill: none;
        stroke-opacity: 0.7;
        stroke-width: 1;
      }

      /* Will be set on foreground paths that are not "contained" in the current
         axes brushes. If no brushes are set, no path will have this class. */
      .foreground .invisible-path {
        display: none;
      }

      /* Style for the path closest to the mouse pointer (typically will become
      the selected path when the user clicks). */
      .foreground .closest-path {
        stroke-width: 3;
      }

      /* The currently selected path class. We use !important to override the
         inline style that sets the regular color of a path. */
      .foreground .selected-path {
        stroke-width: 3 !important;
        stroke: #0f0    !important;
      }

      #container {
        height: 100%;
        width: 100%;
      }

      svg {
        width: 100%;
        height: 100%;
      }

      .axis text {
        text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;
        fill: #000;
        cursor: move;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-hparams-parallel-coords-plot/tf-hparams-parallel-coords-plot.html.js
Polymer({is:"tf-hparams-parallel-coords-plot",properties:{schema:Object,sessionGroups:Array,options:Object,selectedSessionGroup:{type:Object,value:null,readOnly:!0,notify:!0},closestSessionGroup:{type:Object,value:null,readOnly:!0,notify:!0},width:{type:Number,value:0},height:{type:Number,value:0},redrawCount:{type:Number,value:0},_validSessionGroups:Array,_svg:{type:Object,value:null},_colOfAxis:{type:Array,value:[]},_brushSelections:{type:Array,value:[]}},observers:["_sessionGroupsChanged(sessionGroups.*)",
"_schemaChanged(schema.*)","_redraw(options.*)"],ready:function(){this._svg=d3.select(this.$.svg);this._redraw()},_sessionGroupsChanged:function(){null!==this.selectedSessionGroup&&this._setSelectedSessionGroup(tf.hparams.utils.sessionGroupWithName(this.sessionGroups,this.selectedSessionGroup.name)||null);null!==this.closestSessionGroup&&this._setClosestSessionGroup(tf.hparams.utils.sessionGroupWithName(this.sessionGroups,this.closestSessionGroup.name)||null);this._redraw()},_schemaChanged:function(){this._colOfAxis=
d3.range(this._numCols());this._brushSelections=this._colOfAxis.slice().fill(null);this._redraw()},_redraw:function(){var a=this;this.debounce("_redraw",function(){a._computeValidSessionGroups();a._svg.selectAll("g").remove();a._draw()},100)},_draw:function(){function a(R){return R===z?A:w(R)}function b(R){return m._colOfAxis.map(function(Y){return[a(Y),E[Y](m._colValue(R,Y))]})}function c(R){return C(b(R))}function e(R){this.controlPoints=b(R);d3.select(this).attr("d",c(R))}function f(){M=J.filter(":not(.invisible-path)")}
function g(R,Y){var W=E[R];R=n.columns[R].scale;return"NON_NUMERIC"===R?q.pointScaleInverseImage(W,Y[0],Y[1]):"QUANTILE"===R?q.quantileScaleInverseImage(W,Y[0],Y[1]):q.continuousScaleInverseImage(W,Y[0],Y[1])}function h(R,Y){Y?(aa[R]=g(R,Y),m._brushSelections[R]=Y):(delete aa[R],m._brushSelections[R]=null);J.classed("invisible-path",function(W){return!aa.every(function(X,ja){var pa=m._colValue(W,ja);return"NON_NUMERIC"===n.columns[ja].scale?-1!==X.indexOf(pa):"QUANTILE"===n.columns[ja].scale?X[0]<=
pa&&pa<X[1]:X[0]<=pa&&pa<=X[1]})});f()}var l=this,n=this.options,m=this,q=tf.hparams.parallel_coords_plot;if(m._validSessionGroups&&0!==m._validSessionGroups.length&&!(2>m._numCols())){var r=100*this._numCols()+20;this._svg.attr("viewBox","0 0 "+r+" 240");this._svg.attr("preserveAspectRatio","xMidYMid");this._svg.style("min-width",r+"px");this._svg.style("min-height","240px");var v=r-10-10,u=this._svg.append("g").attr("transform",tf.hparams.utils.translateStr(10,30)),w=d3.scalePoint().range([1,v-
1]).padding(.5);w.domain(m._colOfAxis);var z=null,A=null,E=d3.range(this._numCols()).map(function(R){var Y=m._validSessionGroups.map(function(W){return m._colValue(W,R)});return q.createAxisScale(Y,200,l.options.columns[R].scale)}),C=d3.line().curve(d3.curveLinear),D=u.append("g").attr("class","background").selectAll("path").data(m._validSessionGroups).enter().append("path").each(e),J=u.append("g").attr("class","foreground").selectAll("path").data(m._validSessionGroups).enter().append("path").each(e),
M;f();var H=this._createColorScale();J.attr("stroke",void 0===n.colorByColumnIndex?function(){return"red"}:function(R){return H(l._colValue(R,n.colorByColumnIndex))});var K=null;null!==this.selectedSessionGroup&&(r=M.filter(function(R){return R.name===l.selectedSessionGroup.name}).classed("selected-path",!0),r.empty()?this._setSelectedSessionGroup(null):K=r.node());var L=null;this._svg.on("click",function(){if(null!==L||null!==K){var R=null;null!==L&&L!==K&&(R=L);console.assert(K!==R);null!==K&&d3.select(K).classed("selected-path",
!1);K=R;null!==K&&d3.select(K).classed("selected-path",!0);R=null===K?null:d3.select(K).datum();m._setSelectedSessionGroup(R)}}).on("mousemove mouseenter",function(){if(M.empty())L=null;else{var R=q.findClosestPath(M.nodes(),m._colOfAxis.map(a),d3.mouse(u.node()));L!==R&&(null!==L&&d3.select(L).classed("closest-path",!1),L=R,null!==L?(d3.select(L).classed("closest-path",!0),m._setClosestSessionGroup(d3.select(L).datum())):m._setClosestSessionGroup(null))}}).on("mouseleave",function(){null!==L&&(d3.select(L).classed("closest-path",
!1),L=null,m._setClosestSessionGroup(null))});var P=u.selectAll(".axis-parent").data(m._colOfAxis).enter().append("g").attr("class","axis-parent").attr("transform",function(R){return tf.hparams.utils.translateStr(a(R))});P.append("g").attr("class","axis").each(function(R){var Y=d3.axisLeft(E[R]);"QUANTILE"===n.columns[R].scale&&(Y=Y.tickValues(E[R].quantiles()).tickFormat(d3.format("-.6g")));d3.select(this).call(Y)}).append("text").attr("class","axis-title").style("cursor","move").style("text-anchor",
"middle").attr("y",-9).text(function(R){return m._colName(R)});P.call(d3.drag().on("start",function(R){A=w(R);z=R;D.attr("visibility","hidden");this.setAttribute("is-dragging","")}).on("drag",function(){A=d3.event.x;0>A&&(A=0);A>v&&(A=v);m._colOfAxis.sort(function(R,Y){return a(R)-a(Y)});w.domain(m._colOfAxis);P.attr("transform",function(R){return tf.hparams.utils.translateStr(a(R))});J.each(e)}).on("end",function(){var R=this;A=z=null;P.transition().duration(500).attr("transform",function(Y){return"translate("+
w(Y)+")"});J.transition().duration(500).attr("d",c);window.setTimeout(function(){J.each(e);R.removeAttribute("is-dragging")},500);D.attr("d",c).transition().delay(500).duration(0).attr("visibility",null)}));var S=[];for(r={$jscomp$loop$prop$i$92:0};r.$jscomp$loop$prop$i$92<m._numCols();r={$jscomp$loop$prop$i$92:r.$jscomp$loop$prop$i$92},++r.$jscomp$loop$prop$i$92)S[r.$jscomp$loop$prop$i$92]=d3.brushY().extent([[-8,0],[8,201]]).on("brush",function(R){return function(){h(R.$jscomp$loop$prop$i$92,d3.event.selection);
this.parentElement.setAttribute("is-brushing","")}}(r)).on("end",function(R){return function(){h(R.$jscomp$loop$prop$i$92,d3.event.selection);this.parentElement.removeAttribute("is-brushing")}}(r));var aa=[];P.append("g").attr("class","brush").each(function(R){d3.select(this).call(S[R]);S[R].move(d3.select(this),m._brushSelections[R])});this._svg.selectAll("*").classed("tf-hparams-parallel-coords-plot",!0);this.redrawCount++}},_colExtent:function(a){return tf.hparams.utils.numericColumnExtent(this.schema,
this._validSessionGroups,a)},_createColorScale:function(){return void 0===this.options.colorByColumnIndex?d3.scaleLinear().clamp(!0).range(this.options.minColor):d3.scaleLinear().domain(this._colExtent(this.options.colorByColumnIndex)).range([this.options.minColor,this.options.maxColor]).interpolate(d3.interpolateLab)},_numCols:function(){return tf.hparams.utils.numColumns(this.schema)},_colName:function(a){return tf.hparams.utils.schemaColumnName(this.schema,a)},_colValue:function(a,b){return tf.hparams.utils.columnValueByIndex(this.schema,
a,b)},_computeValidSessionGroups:function(){var a=this;this._validSessionGroups=void 0===this.sessionGroups?void 0:this.sessionGroups.filter(function(b){for(var c=0;c<a._numCols();++c)if(void 0===a._colValue(b,c))return!1;return!0})}});
</script>
</dom-module>





<dom-module id="tf-hparams-parallel-coords-view">
  <template>
    
    <div class="pane">
      <vaadin-split-layout vertical>
        
        <tf-hparams-scale-and-color-controls id="controls" class="section" schema="[[schema]]" session-groups="[[sessionGroups]]" options="{{_options}}">
        </tf-hparams-scale-and-color-controls>
        <vaadin-split-layout vertical>
          
          <tf-hparams-parallel-coords-plot id="plot" class="section" schema="[[schema]]" session-groups="[[sessionGroups]]" selected-session-group="{{_selectedGroup}}" closest-session-group="{{_closestGroup}}" options="[[_options]]">
          </tf-hparams-parallel-coords-plot>
          <vaadin-split-layout vertical>
            <tf-hparams-session-group-values id="values" class="section" schema="[[schema]]" session-group="[[_closestOrSelected(
                             _closestGroup, _selectedGroup)]]">
            </tf-hparams-session-group-values>
            <tf-hparams-session-group-details id="details" class="section" backend="[[backend]]" experiment-name="[[experimentName]]" session-group="[[_selectedGroup]]" schema="[[schema]]">
            </tf-hparams-session-group-details>
          </vaadin-split-layout>
        </vaadin-split-layout>
      </vaadin-split-layout>
    </div>

    <style>
      .pane {
        display: flex;
        flex-direction: column;
        height: 100%;
      }
      .section {
        margin: 10px;
      }
      #controls {
        flex-grow: 0;
        flex-shrink: 0;
        flex-basis: auto;
        height: auto;
        overflow-y:auto;
        max-height: fit-content;
      }
      #plot {
        flex-grow: 1;
        flex-shrink: 1;
        flex-basis: auto;
        height: 100%;
        overflow-y:auto;
      }
      #values {
        flex-grow: 0;
        flex-shrink: 0;
        flex-basis: auto;
        height: 95px;
        overflow-y:auto;
        max-height: fit-content;
      }
      #details {
        flex-grow: 0;
        flex-shrink: 1;
        flex-basis: auto;
        height: auto;
        overflow-y: auto;
        max-height: fit-content;
      }
      vaadin-split-layout {
        height: 100%;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-hparams-parallel-coords-view/tf-hparams-parallel-coords-view.html.js
Polymer({is:"tf-hparams-parallel-coords-view",properties:{backend:Object,experimentName:String,schema:Object,sessionGroups:Array},_closestOrSelected:function(a,b){return null!==a?a:b}});
</script>
</dom-module>








<dom-module id="tf-hparams-scatter-plot-matrix-plot">
  <template>
    <div id="container">
      <svg id="svg">
      </svg>
    </div>

    <style>
      :host {
        display: block;
      }
      svg {
        font: 10px sans-serif;
      }

      /* The closest data point marker to the mouse pointer. We use !important
         to override the inline style that sets the regular style of a marker.
      */
      .closest-marker {
        r: 6  !important;
      }

      /* The currently selected data point marker. We use !important to
         override the inline style that sets the regular style of a marker. */
      .selected-marker {
        r: 6       !important;
        fill: #0f0 !important;
      }
    </style>

  </template>

  <script>//~~WEBPATH~~/tf-hparams-scatter-plot-matrix-plot/tf-hparams-scatter-plot-matrix-plot.html.js
Polymer({is:"tf-hparams-scatter-plot-matrix-plot",properties:{schema:Object,sessionGroups:Array,options:Object,selectedSessionGroup:{type:Object,value:null,readOnly:!0,notify:!0},closestSessionGroup:{type:Object,value:null,readOnly:!0,notify:!0},_container:{type:Object,value:null},_svg:{type:Object,value:null},width:{type:Number,value:0},height:{type:Number,value:0},_brushedCellIndex:{type:Object,value:null},_brushSelection:{type:Object,value:null}},observers:["_sessionGroupsChanged(sessionGroups.*)",
"_schemaChanged(schema.*)","_redraw(options.*)"],ready:function(){this._container=this.$.container;this._svg=d3.select(this.$.svg);this._redraw()},_sessionGroupsChanged:function(){null!==this.selectedSessionGroup&&this._setSelectedSessionGroup(tf.hparams.utils.sessionGroupWithName(this.sessionGroups,this.selectedSessionGroup.name)||null);this._redraw()},_schemaChanged:function(){this._brushSelection=this._brushedCellIndex=null;this._redraw()},_redraw:function(){var a=this;this.debounce("_redraw",
function(){var b=tf.hparams.utils;a.width=Math.max(150*b.numColumns(a.schema),1200);a.height=Math.max(112.5*b.numMetrics(a.schema),480);a._container.style.width=a.width+"px";a._container.style.height=a.height+"px";a._svg.attr("width",a.width).attr("height",a.height);a._svg.selectAll("g").remove();a._draw()},100)},_draw:function(){function a(da){return"x-axis-clip-path-"+da}function b(da){return"x-label-clip-path-"+da}function c(da){return"y-axis-clip-path-"+da}function e(da){return"y-label-clip-path-"+
da}function f(da,Aa,Ca,oa,ka){Ca=Math.floor(Ca/oa);oa=Aa.scale();if("QUANTILE"===ka){var Da=oa.quantiles();Da=d3.range(0,Da.length,Math.ceil(Da.length/Ca)).map(function(Oa){return Da[Oa]});Aa.tickValues(Da).tickFormat(d3.format("-.2g"))}"LINEAR"!==ka&&"LOG"!==ka||Aa.ticks(Ca);da.call(Aa);da.selectAll(".domain").remove();da.selectAll(".tick line").attr("stroke","#ddd")}function g(da,Aa){var Ca=[];aa[da][Aa].each(function(){Ca.push(this)});return d3.quadtree().x(function(oa){return d3.select(oa).datum().x}).y(function(oa){return d3.select(oa).datum().y}).addAll(Ca)}
function h(){var da=new Set(S.nodes());!m()||u._brushSelection[0][0]===u._brushSelection[1][0]||u._brushSelection[0][1]===u._brushSelection[1][1]||(da=l(u._brushedCellIndex,u._brushSelection));d3.selectAll(Array.from(v.filterSet(da,function(Aa){return!X.has(Aa)}))).attr("fill",L);d3.selectAll(Array.from(v.filterSet(X,function(Aa){return!da.has(Aa)}))).attr("fill","#ddd");X=da}function l(da,Aa){console.assert(null!==da);console.assert(null!==Aa);var Ca=za(da);da=Ca.next().value;Ca=Ca.next().value;
var oa=new Set;v.quadTreeVisitPointsInRect(Y[da][Ca],Aa[0][0],Aa[0][1],Aa[1][0],Aa[1][1],function(ka){d3.select(ka).datum().sessionGroupMarkers.forEach(function(Da){oa.add(Da)})});return oa}function n(da){var Aa=d3.brushSelection(da);!m()&&null===Aa||m()&&da===W.node()&&_.isEqual(Aa,u._brushSelection)||(u._brushSelection=Aa,null!==Aa?(W=d3.select(da),u._brushedCellIndex=W.datum()):(W=null,u._brushedCellIndex=null),h())}function m(){return null!==u._brushedCellIndex&&null!==u._brushSelection}function q(da,
Aa,Ca,oa,ka){var Da=Infinity,Oa=null;v.quadTreeVisitPointsInDisk(Y[da][Aa],Ca,oa,ka,function(Ea,La){X.has(Ea)&&La<Da&&(Ea=d3.select(Ea).datum(),Da=La,Oa=Ea.sessionGroup)});return null===Oa?null:d3.selectAll(R.get(Oa))}var r=this,v=tf.hparams.utils,u=this;if(this.sessionGroups&&0!=this.sessionGroups.length&&this.schema&&0!=this.schema.metricInfos.length){var w=d3.range(v.numColumns(u.schema)),z=d3.range(v.numMetrics(u.schema)),A=d3.scaleBand().domain(w).range([85,this.width-1-5]).paddingInner(.1),
E=d3.scaleBand().domain(z).range([this.height-1-5-50,5]).paddingInner(.1),C=A.bandwidth(),D=E.bandwidth(),J=w.map(function(da){return u._cellScale(da,[0,C-1])}),M=z.map(function(da){return u._cellScale(da+v.numHParams(u.schema),[D-1,0])}),H=this._svg.selectAll(".x-axis").data(w).enter().append("g").classed("x-axis",!0).attr("transform",function(da){return v.translateStr(A(da),0)});H.append("clipPath").attr("id",a).append("rect").attr("x",-5).attr("y",0).attr("width",C+10).attr("height",u.height-25);
H.append("clipPath").attr("id",b).append("rect").attr("x",0).attr("y",u.height-25).attr("width",C).attr("height",25);H.append("g").attr("clip-path",function(da){return"url(#"+a(da)+")"}).each(function(da){d3.select(this).call(f,d3.axisBottom(J[da]).tickSize(u.height-50),C,40,u.options.columns[da].scale)});H.append("g").classed("x-axis-label",!0).attr("clip-path",function(da){return"url(#"+b(da)+")"}).append("text").attr("text-anchor","middle").attr("x",C/2).attr("y",u.height-1-12.5).text(function(da){return v.schemaColumnName(u.schema,
da)}).append("title").text(function(da){return v.schemaColumnName(u.schema,da)});H=this._svg.selectAll(".y-axis").data(z).enter().append("g").classed("y-axis",!0).attr("transform",function(da){return v.translateStr(u.width-1,E(da))});H.append("clipPath").attr("id",c).append("rect").attr("x",-(u.width-40-1)).attr("y",-5).attr("width",u.width-40).attr("height",D+10);H.append("clipPath").attr("id",e).append("rect").attr("x",-(u.width-1)).attr("y",0).attr("width",40).attr("height",D);H.append("g").attr("clip-path",
function(da){return"url(#"+c(da)+")"}).each(function(da){d3.select(this).call(f,d3.axisLeft(M[da]).tickSize(u.width-80),D,20,u.options.columns[da+v.numHParams(u.schema)].scale)});H.append("g").classed("y-axis-label",!0).attr("clip-path",function(da){return"url(#"+e(da)+")"}).append("text").attr("text-anchor","middle").attr("x",-(u.width-20-1)).attr("y",D/2).attr("transform",v.rotateStr(-(u.width-20-1),D/2)).text(function(da){return v.metricName(u.schema.metricInfos[da])}).append("title").text(function(da){return v.metricName(u.schema.metricInfos[da])});
H=this._svg.selectAll(".cell").data(d3.cross(w,z)).enter().append("g").classed("cell",!0).attr("transform",function(da){var Aa=za(da);da=Aa.next().value;Aa=Aa.next().value;return v.translateStr(A(da),E(Aa))});H.append("g").classed("frame",!0).append("rect").attr("x",-5).attr("y",-5).attr("width",C+10).attr("height",D+10).attr("stroke","#000").attr("fill","none").attr("shape-rendering","crispEdges");var K=null;void 0!==u.options.colorByColumnIndex&&(K=d3.scaleLinear().domain(this._colExtent(this.options.colorByColumnIndex)).range([this.options.minColor,
this.options.maxColor]).interpolate(d3.interpolateLab));var L=void 0===u.options.colorByColumnIndex?function(){return"red"}:function(da){return K(r._colValue(da.sessionGroup,u.options.colorByColumnIndex))},P=za(function(da,Aa){var Ca=da.selectAll(".data-marker").data(function(ka){ka=za(ka);var Da=ka.next().value,Oa=ka.next().value;return u.sessionGroups.filter(function(Ea){return void 0!==u._colValue(Ea,Da)&&void 0!==u._metricValue(Ea,Oa)}).map(function(Ea){return{col:Da,metric:Oa,sessionGroup:Ea,
x:J[Da](u._colValue(Ea,Da)),y:M[Oa](u._metricValue(Ea,Oa)),sessionGroupMarkers:null}})}).enter().append("circle").classed("data-marker",!0).attr("cx",function(ka){return ka.x}).attr("cy",function(ka){return ka.y}).attr("r",2).attr("fill",Aa),oa=new Map;u.sessionGroups.forEach(function(ka){oa.set(ka,[])});Ca.each(function(ka){oa.get(ka.sessionGroup).push(this)});Ca.each(function(ka){var Da=oa.get(ka.sessionGroup);ka.sessionGroupMarkers=new Set(Da)});da=w.map(function(ka){return z.map(function(Da){return Ca.filter(function(Oa){return Oa.col==
ka&&Oa.metric==Da})})});return[Ca,da,oa]}(H.append("g"),L)),S=P.next().value,aa=P.next().value,R=P.next().value,Y=w.map(function(da){return z.map(function(Aa){return g(da,Aa)})}),W=null;m()&&(W=H.filter(function(da){return _.isEqual(da,u._brushedCellIndex)}),console.assert(1==W.size(),W));var X=new Set(S.nodes());h();var ja=d3.brush().extent([[-4,-4],[C-1+5-1,D-1+5-1]]).on("start",function(da){da=za(da);da.next();da.next();m()&&W.node()!=this&&ja.move(W,null);n(this)}).on("brush",function(da){da=
za(da);da.next();da.next();n(this)}).on("end",function(da){da=za(da);da.next();da.next();n(this)});H.call(ja);m()&&ja.move(W,u._brushSelection);var pa=null,ta=null;null!==this.selectedSessionGroup&&(ta=d3.selectAll(R.get(this.selectedSessionGroup)).classed("selected-marker",!0));H.on("click",function(){var da=pa===ta?null:pa;da!==ta&&(null!==ta&&ta.classed("selected-marker",!1),ta=da,null!==ta&&ta.classed("selected-marker",!0),da=null===ta?null:ta.datum().sessionGroup,u._setSelectedSessionGroup(da))}).on("mousemove mouseenter",
function(da){var Aa=za(da);da=Aa.next().value;Aa=Aa.next().value;var Ca=za(d3.mouse(this)),oa=Ca.next().value;Ca=Ca.next().value;da=q(da,Aa,oa,Ca,20);pa!==da&&(null!==pa&&pa.classed("closest-marker",!1),pa=da,null!==pa?(pa.classed("closest-marker",!0),u._setClosestSessionGroup(pa.datum().sessionGroup)):u._setClosestSessionGroup(null))}).on("mouseleave",function(da){da=za(da);da.next();da.next();null!==pa&&(pa.classed("closest-marker",!1),pa=null,u._setClosestSessionGroup(null))});this._svg.selectAll("*").classed("tf-hparams-scatter-plot-matrix-plot",
!0)}},_cellScale:function(a,b){var c=this,e=this._colExtent(a),f=d3.scaleLinear().domain(e).range(b);if("LINEAR"===this.options.columns[a].scale)return f;if("LOG"===this.options.columns[a].scale)return 0>=e[0]&&0<=e[1]?f:d3.scaleLog().domain(e).range(b);if("QUANTILE"===this.options.columns[a].scale){var g=(b[1]-b[0])/19;e=d3.range(20).map(function(h){return b[0]+g*h});return d3.scaleQuantile().domain(_.uniq(this.sessionGroups.map(function(h){return c._colValue(h,a)}))).range(e)}if("NON_NUMERIC"===
this.options.columns[a].scale)return d3.scalePoint().domain(_.uniq(this.sessionGroups.map(function(h){return c._colValue(h,a)}).sort())).range(b).padding(.1);throw"Unknown scale for column: "+a+". options: "+this.options;},_colValue:function(a,b){return tf.hparams.utils.columnValueByIndex(this.schema,a,b)},_metricValue:function(a,b){return tf.hparams.utils.metricValueByIndex(this.schema,a,b)},_colExtent:function(a){return tf.hparams.utils.numericColumnExtent(this.schema,this.sessionGroups,a)}});
</script>
</dom-module>





<dom-module id="tf-hparams-scatter-plot-matrix-view">
  <template>
    <div class="pane">
      <vaadin-split-layout vertical>
        
        <tf-hparams-scale-and-color-controls class="section" id="controls" schema="[[schema]]" session-groups="[[sessionGroups]]" options="{{_options}}">
        </tf-hparams-scale-and-color-controls>
        <vaadin-split-layout vertical>
          
          <tf-hparams-scatter-plot-matrix-plot class="section" id="plot" schema="[[schema]]" session-groups="[[sessionGroups]]" selected-session-group="{{_selectedGroup}}" closest-session-group="{{_closestGroup}}" options="[[_options]]">
          </tf-hparams-scatter-plot-matrix-plot>
          <vaadin-split-layout vertical>
            <tf-hparams-session-group-values class="section" id="values" schema="[[schema]]" session-group="[[_closestOrSelected(
                                 _closestGroup, _selectedGroup)]]">
            </tf-hparams-session-group-values>
            
            <tf-hparams-session-group-details class="section" id="details" backend="[[backend]]" experiment-name="[[experimentName]]" session-group="[[_selectedGroup]]" schema="[[schema]]">
            </tf-hparams-session-group-details>
          </vaadin-split-layout>
        </vaadin-split-layout>
      </vaadin-split-layout>
    </div>
    <style>
      .pane {
        display: flex;
        flex-direction: column;
        height: 100%;
      }
      .section {
        margin: 10px;
      }
      #controls {
        flex-grow: 0;
        flex-shrink: 0;
        flex-basis: auto;
        height: auto;
        overflow-y:auto;
        max-height: fit-content;
      }
      #plot {
        flex-grow: 1;
        flex-shrink: 1;
        flex-basis: auto;
        height: auto;
        overflow-y:auto;
        max-height: fit-content;
      }
      #values {
        flex-grow: 0;
        flex-shrink: 0;
        flex-basis: auto;
        height: 95px;
        overflow-y:auto;
        max-height: fit-content;
      }
      #details {
        flex-grow: 0;
        flex-shrink: 1;
        flex-basis: auto;
        height: auto;
        overflow-y: auto;
        max-height: fit-content;
      }
      vaadin-split-layout {
        height: 100%;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-hparams-scatter-plot-matrix-view/tf-hparams-scatter-plot-matrix-view.html.js
Polymer({is:"tf-hparams-scatter-plot-matrix-view",properties:{backend:Object,experimentName:String,schema:Object,sessionGroups:Array},_closestOrSelected:function(a,b){return null!==a?a:b}});
</script>
</dom-module>




<dom-module id="tf-hparams-sessions-pane">
  <template>
    <paper-header-panel>
      <paper-toolbar slot="header" class="tab-bar">
        <paper-tabs selected="{{_selectedTab}}" slot="top">
          
          <paper-tab view-id="table-view">
            TABLE VIEW
          </paper-tab>
          <paper-tab view-id="parallel-coords-view">
            PARALLEL COORDINATES VIEW
          </paper-tab>
          <paper-tab view-id="scatter-plot-matrix-view">
            SCATTER PLOT MATRIX VIEW
          </paper-tab>
          <div class="help-and-feedback">
            <template is="dom-if" if="[[bugReportUrl]]">
              <a href$="[[bugReportUrl]]">
                <paper-button id="bug-report" raised title="Send a bug report or feature request">
                  Bug Report / Feature Request
                </paper-button>
              </a>
            </template>
            <template is="dom-if" if="[[helpUrl]]">
              <a href$="[[helpUrl]]">
                <paper-icon-button icon="help-outline" title="View documentation">
                </paper-icon-button>
              </a>
            </template>
          </div>
        </paper-tabs>
      </paper-toolbar>
      <iron-pages selected="[[_selectedTab]]" class="fit tab-view">
        <div id="0" class="tab">
          <tf-hparams-table-view backend="[[backend]]" experiment-name="[[experimentName]]" schema="[[schema]]" session-groups="[[sessionGroups]]" enable-show-metrics>
          </tf-hparams-table-view>
        </div>
        <div id="1" class="tab">
          <tf-hparams-parallel-coords-view backend="[[backend]]" experiment-name="[[experimentName]]" schema="[[schema]]" session-groups="[[sessionGroups]]">
          </tf-hparams-parallel-coords-view>
        </div>
        <div id="2" class="tab">
          <tf-hparams-scatter-plot-matrix-view backend="[[backend]]" experiment-name="[[experimentName]]" schema="[[schema]]" session-groups="[[sessionGroups]]">
          </tf-hparams-scatter-plot-matrix-view>
        </div>
      </iron-pages>
    </paper-header-panel>

    <style>
      .tab-view {
        height: 100%;
      }
      .tab-bar {
        overflow-y: auto;
        color: white;
        background-color: var(--tb-toolbar-background-color,
        var(--tb-orange-strong));
      }
      .tab {
        height: 100%;
      }
      paper-tabs {
        flex-grow: 1;
        width: 100%;
        height: 100%;
        --paper-tabs-selection-bar-color: white;
        --paper-tabs-content: {
          -webkit-font-smoothing: antialiased;
        }
      }
      tf-hparams-table-view {
        width: 100%;
        height: 100%;
      }
      .help-and-feedback {
        display: inline-flex;   /* Ensure that icons stay aligned */
        justify-content: flex-end;
        align-items: center;
        text-align: right;
        color: white;
      }
      #bug-report {
        border: solid black;
        background: red;
        white-space: normal;
        word-break: break-words;
        font-size: 12px;
        max-width: 150px;
        text-align: left;
      }
      .help-and-feedback a {
        color: white;
        text-decoration: none;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-hparams-sessions-pane/tf-hparams-sessions-pane.html.js
Polymer({is:"tf-hparams-sessions-pane",properties:{backend:Object,helpUrl:String,bugReportUrl:String,experimentName:String,schema:Object,sessionGroups:Array,_selectedTab:{type:Number,value:0}}});
</script>
</dom-module>




<script>//~~WEBPATH~~/tf-hparams-google-analytics-tracker/tf-hparams-google-analytics-tracker.html.js
Polymer({is:"tf-hparams-google-analytics-tracker",handleEvent:function(){}});
</script>





<dom-module id="tf-hparams-main">
  <template>
    <vaadin-split-layout>
      <div class="sidebar">
        <tf-hparams-query-pane id="query-pane" backend="[[backend]]" experiment-name="[[experimentName]]" schema="{{_schema}}" session-groups="{{_sessionGroups}}">
        </tf-hparams-query-pane>
      </div>
      <div class="center">
        <tf-hparams-sessions-pane id="sessions-pane" backend="[[backend]]" help-url="[[helpUrl]]" bug-report-url="[[bugReportUrl]]" experiment-name="[[experimentName]]" schema="[[_schema]]" session-groups="[[_sessionGroups]]">
        </tf-hparams-sessions-pane>
      </div>
    </vaadin-split-layout>
    <tf-hparams-google-analytics-tracker id="tracker" tracking-id="[[trackingId]]" name="tf_hparams">
    </tf-hparams-google-analytics-tracker>

    <style>
      vaadin-split-layout {
        width: 100%;
      }

      .sidebar {
        width: 20%;
        height: 100%;
        overflow: auto;
        flex-grow: 0;
        flex-shrink: 0;
        min-width: 10%;
      }

      .center {
        height: 100%;
        overflow-y: auto;
        flex-grow: 1;
        flex-shrink: 1;
        width: 80%;
      }

      :host {
        display: flex;
        flex-direction: row;
        height: 100%;
        width: 100%;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-hparams-main/tf-hparams-main.html.js
Polymer({is:"tf-hparams-main",properties:{backend:Object,experimentName:String,trackingId:String,helpUrl:String,bugReportUrl:String,_schema:Object,_sessionGroups:Array,_throttledSendEventToGA:{type:Function,value:function(){return _.throttle(function(){this._handleGAEvent({detail:{hitType:"event",eventCategory:"UserInteraction",eventLabel:"Experiment: "+this.experimentName}})},6E4,{leading:!0})}}},listeners:{mousemove:"_sendEventToGA",tap:"_sendEventToGA","google-analytics-tracking":"_handleGAEvent"},
attached:function(){this._handleGAEvent({detail:{hitType:"pageview"}})},reload:function(){this.$["query-pane"].reload()},_sendEventToGA:function(){this._throttledSendEventToGA(this)},_handleGAEvent:function(a){this.$.tracker.handleEvent(a)}});
</script>
</dom-module>



<script>//~~WEBPATH~~/tf-hparams-backend/tf-hparams-backend.html.js
(function(a){(function(b){function c(e,f,g){this._apiUrl=e;this._requestManager=f;this._useHttpGet=void 0===g?!0:g}c.prototype.getExperiment=function(e){return this._sendRequest("experiment",e)};c.prototype.listSessionGroups=function(e){return this._sendRequest("session_groups",e)};c.prototype.listMetricEvals=function(e){return this._sendRequest("metric_evals",e)};c.prototype._sendRequest=function(e,f){if(this._useHttpGet)return f=encodeURIComponent(JSON.stringify(f)),this._requestManager.request(this._apiUrl+
"/"+e+"?request\x3d"+f);var g=new Rk.RequestOptions;g.withCredentials=!0;g.methodType="POST";g.contentType="text/plain";g.body=JSON.stringify(f);return this._requestManager.requestWithOptions(this._apiUrl+"/"+e,g)};b.Backend=c})(a.hparams||(a.hparams={}))})(tf||(tf={}));
</script>



<dom-module id="tf-hparams-dashboard">
  <template>
    
    <tf-plugin-dialog id="initialDialog"></tf-plugin-dialog>
    <tf-hparams-main id="hparams-main" backend="[[_backend]]" experiment-name="">
    </tf-hparams-main>
  </template>
  <script>//~~WEBPATH~~/tf-hparams-dashboard/tf-hparams-dashboard.html.js
Polymer({is:"tf-hparams-dashboard",properties:{_backend:{type:Object,value:function(){return new tf.hparams.Backend(Rk.getRouter().pluginRoute("hparams",""),new Rk.RequestManager,!!(window.TENSORBOARD_ENV||{}).IN_COLAB)}},_isAvailable:Boolean},attached:function(){var a=this;this._backend._requestManager.request(Rk.getRouter().pluginsListing()).then(function(b){"hparams"in b?(a.$.initialDialog.closeDialog(),a.set("_isAvailable",!0)):(a.$.initialDialog.openNoTensorFlowDialog(),a.set("_isAvailable",
!1))})},reload:function(){this._isAvailable&&this.$["hparams-main"].reload()}});$k.registerDashboard({plugin:"hparams",elementName:"tf-hparams-dashboard"});
</script>
</dom-module>















<script>//~~WEBPATH~~/tf-imports/array-buffer-data-provider.js
var iq;
(function(a){function b(f){this._requestManager=f;this._canceller=new Rk.Canceller}a.ErrorCodes={CANCELLED:1};var c={VERTEX:1,FACE:2,COLOR:3},e={VERTEX:"float32",FACE:"int32",COLOR:"uint8"};b.prototype.reload=function(f,g,h){this._canceller.cancelAll();return this._fetchMetadata(f,g,h)};b.prototype._fetchDataByType=function(f,g,h,l,n){f=Rk.getRouter().pluginRoute("mesh","/data",new URLSearchParams({tag:g,run:f,content_type:h,sample:n}));g=this._canceller.cancellable(function(m){if(m.cancelled)return Promise.reject({code:a.ErrorCodes.CANCELLED,message:"Response was invalidated."});
m=m.value;switch(h){case "VERTEX":var q=new Float32Array(m);break;case "FACE":q=new Int32Array(m);break;case "COLOR":q=new Uint8Array(m)}m=l[0].data_shape;if(3!=m.length)throw"Data item shape expected to have 3 dimensions BxNxK";for(var r=m.slice(1).reduce(function(E,C){return E*C}),v=0;v<l.length;v++){for(var u=q.slice(r*v,(v+1)*r),w=[],z=0;z<m[1];z++){w.push([]);for(var A=0;A<m[2];A++)w[z].push(u[z*m[2]+A])}l[v].data=w}});return this._requestManager.fetch(f,null,"arraybuffer",e[h]).then(function(m){return m.arrayBuffer()}).then(g)};
b.prototype._fetchData=function(f,g,h,l){var n=this,m=[];Object.keys(c).forEach(function(q){for(var r=[],v=0;v<h.length;v++)h[v].content_type==c[q]&&r.push(h[v]);r.length&&m.push(n._fetchDataByType(f,g,q,r,l))});return Promise.all(m)};b.prototype._fetchMetadata=function(f,g,h){var l=this;this._canceller.cancelAll();var n=Rk.getRouter().pluginRoute("mesh","/meshes",new URLSearchParams({tag:g,run:f,sample:h})),m=this._canceller.cancellable(function(q){if(!q.cancelled){var r=q.value;return l._fetchData(f,
g,r,h).then(function(){return l._processMetadata(r)})}});return this._requestManager.fetch(n).then(function(q){return q.json()}).then(m)};b.prototype._processMetadata=function(f){for(var g=this,h=new Map,l=0;l<f.length;l++){var n=f[l];h.has(n.wall_time)||h.set(n.wall_time,[]);h.get(n.wall_time).push(n)}var m=[];h.forEach(function(q){var r=q.filter(function(w){return w.content_type==c.VERTEX}),v=q.filter(function(w){return w.content_type==c.FACE}),u=q.filter(function(w){return w.content_type==c.COLOR});
q=g._createStepDatum(q[0],r,v,u);m.push(q)});return m};b.prototype._createStepDatum=function(f,g,h,l){return{wall_time:new Date(1E3*f.wall_time),step:f.step,vertices:g[0]&&g[0].data,faces:h&&h[0]&&h[0].data,colors:l&&l[0]&&l[0].data,config:f.config}};a.ArrayBufferDataProvider=b})(iq||(iq={}));
</script>
<script>//~~WEBPATH~~/tf-imports/mesh-viewer.js
(function(a){function b(c){var e=THREE.EventDispatcher.call(this)||this;e._lastMesh=null;e._clock=new THREE.Clock;e._canvasSize=null;e._runColor=c;return e}Ab(b,THREE.EventDispatcher);b.prototype._isObject=function(c){return"object"==typeof c&&null!=c&&!Array.isArray(c)};b.prototype._applyDefaults=function(c,e){var f={};c=[c,e];for(e=0;e<c.length;e++){var g=c[e],h;for(h in g){var l=h in f;this._isObject(g[h])?f[h]=this._applyDefaults(f[h]||{},g[h]):l||(f[h]=g[h])}}return f};b.prototype._createWorld=
function(c,e){this.isReady()||(this._scene=new THREE.Scene,this._camera=c=new THREE[c.camera.cls](c.camera.fov,this._canvasSize.width/this._canvasSize.height,c.camera.near,c.camera.far),e=new THREE.OrbitControls(c,e),e.lookSpeed=.4,e.movementSpeed=20,e.noFly=!0,e.lookVertical=!0,e.constrainVertical=!0,e.verticalMin=1,e.verticalMax=2,e.addEventListener("change",this._onCameraPositionChange.bind(this)),this._cameraControls=e,this._renderer=new THREE.WebGLRenderer({antialias:!0}),this._renderer.setPixelRatio(window.devicePixelRatio),
this._renderer.setSize(this._canvasSize.width,this._canvasSize.height),this._renderer.setClearColor(16777215,1))};b.prototype._clearScene=function(){for(;0<this._scene.children.length;)this._scene.remove(this._scene.children[0])};b.prototype.getRenderer=function(){return this._renderer};b.prototype.getCameraControls=function(){return this._cameraControls};b.prototype.isReady=function(){return!!this._camera&&!!this._cameraControls};b.prototype.getCameraPosition=function(){return{far:this._camera.far,
position:this._camera.position.clone(),target:this._cameraControls.target.clone()}};b.prototype.setCanvasSize=function(c){this._canvasSize=c};b.prototype.draw=function(){this._animationFrameIndex&&cancelAnimationFrame(this._animationFrameIndex);this._camera.aspect=this._canvasSize.width/this._canvasSize.height;this._camera.updateProjectionMatrix();this._renderer.setSize(this._canvasSize.width,this._canvasSize.height);var c=function(){var e=this._clock.getDelta();this._cameraControls.update(e);this._animationFrameIndex=
requestAnimationFrame(c);this._renderer.render(this._scene,this._camera)}.bind(this);c()};b.prototype.updateScene=function(c,e){var f={};"config"in c&&c.config&&(f=JSON.parse(c.config));this.dispatchEvent({type:"beforeUpdateScene"});f=this._applyDefaults(f,{camera:{cls:"PerspectiveCamera",fov:75,near:.1,far:1E3},lights:[{cls:"AmbientLight",color:"#ffffff",intensity:.75},{cls:"DirectionalLight",color:"#ffffff",intensity:.75,position:[0,-1,2]}]});this._createWorld(f,e);this._clearScene();this._createLights(this._scene,
f);this._createGeometry(c,f);this.draw()};b.prototype.resetView=function(){if(this.isReady()){this._cameraControls.reset();if(!c&&this._lastMesh)var c=this._lastMesh;c&&(this._fitObjectToViewport(c),this._lastMesh=c);this._cameraControls.update()}};b.prototype._createGeometry=function(c,e){c.vertices&&c.faces?this._createMesh(c,e):this._createPointCloud(c,e)};b.prototype._createPointCloud=function(c,e){var f=c.vertices;c=c.colors;var g={material:{cls:"PointsMaterial",size:.005}};c&&c.length==f.length?
g.material.vertexColors=THREE.VertexColors:g.material.color=this._runColor;e=this._applyDefaults(e,g);var h=new THREE.Geometry;f.forEach(function(l){var n=new THREE.Vector3(l[0],l[1],l[2]);n.x=1*l[0];n.y=1*l[1];n.z=1*l[2];h.vertices.push(n)});c.forEach(function(l){l=new THREE.Color(l[0]/255,l[1]/255,l[2]/255);h.colors.push(l)});f=new THREE[e.material.cls](e.material);f=new THREE.Points(h,f);this._scene.add(f);this._lastMesh=f};b.prototype.setCameraViewpoint=function(c,e,f){this._silent=!0;this._camera.far=
e;this._camera.position.set(c.x,c.y,c.z);this._camera.lookAt(f.clone());this._camera.updateProjectionMatrix();this._cameraControls.target=f.clone();this._cameraControls.update();this._silent=!1};b.prototype._onCameraPositionChange=function(c){this._silent||this.dispatchEvent({type:"cameraPositionChange",event:c})};b.prototype._fitObjectToViewport=function(c){var e=new THREE.Box3;e.setFromObject(c);c=e.center();var f=e.size();f=1.25*Math.abs(Math.max(f.x,f.y,f.z)/(2*Math.tan(Math.PI/180*this._camera.fov/
2)));e=e.min.z;this.setCameraViewpoint({x:c.x,y:c.y,z:f},3*(0>e?-e+f:f-e),c)};b.prototype._createMesh=function(c,e){var f=c.vertices,g=c.faces,h=c.colors;c=this._applyDefaults(e,{material:{cls:"MeshStandardMaterial",color:"#a0a0a0",roughness:1,metalness:0}});var l=new THREE.Geometry;f.forEach(function(n){var m=new THREE.Vector3(n[0],n[1],n[2]);m.x=1*n[0];m.y=1*n[1];m.z=1*n[2];l.vertices.push(m)});g.forEach(function(n){var m=new THREE.Face3(n[0],n[1],n[2]);if(h){n=[h[n[0]],h[n[1]],h[n[2]]];for(var q=
0;q<n.length;q++){var r=n[q];r=new THREE.Color(r[0]/255,r[1]/255,r[2]/255);m.vertexColors.push(r)}}l.faces.push(m)});h&&(c.material=c.material||{},c.material.vertexColors=THREE.VertexColors);l.center();l.computeBoundingSphere();l.computeVertexNormals();f=new THREE[c.material.cls](c.material);f=new THREE.Mesh(l,f);f.castShadow=!0;f.receiveShadow=!0;this._scene.add(f);this._lastMesh=f};b.prototype._createLights=function(c,e){for(var f=0;f<e.lights.length;f++){var g=e.lights[f],h=new THREE[g.cls](g.color,
g.intensity);g.position&&h.position.set(g.position[0],g.position[1],g.position[2]);c.add(h)}};a.MeshViewer=b})(iq||(iq={}));
</script>



<dom-module id="tf-mesh-loader">
  <template>
    <tf-card-heading color="[[_runColor]]" class="tf-mesh-loader-header">
      <template is="dom-if" if="[[_hasMultipleSamples(ofSamples)]]">
        <div>sample: [[_getSampleText(sample)]] of [[ofSamples]]</div>
      </template>
      <template is="dom-if" if="[[_hasAtLeastOneStep(_steps)]]">
        <div class="heading-row">
          <div class="heading-label">
            step <span style="font-weight: bold">[[toLocaleString_(_stepValue)]]</span>
          </div>
          <div class="heading-label heading-right">
            <template is="dom-if" if="[[_currentWallTime]]">
              [[_currentWallTime]]
            </template>
          </div>
          <div class="label right">
            <paper-spinner-lite active hidden$="[[!_isMeshLoading]]">
            </paper-spinner-lite>
          </div>
        </div>
      </template>
      <template is="dom-if" if="[[_hasMultipleSteps(_steps)]]">
        <div>
          <paper-slider id="steps" immediate-value="{{_stepIndex}}" max="[[_getMaxStepIndex(_steps)]]" max-markers="[[_getMaxStepIndex(_steps)]]" snaps step="1" value="{{_stepIndex}}"></paper-slider>
        </div>
      </template>
    </tf-card-heading>
    <style>
      paper-slider {
        width: 100%;
        margin-left: 1px;
        margin-right: 1px;
      }
      .tf-mesh-loader-header {
        display: block;
        height: 105px;
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-mesh-dashboard/mesh-loader.js
(function(a){Polymer({is:"tf-mesh-loader",properties:{run:String,tag:String,sample:Number,ofSamples:Number,selectedView:{type:String,value:"all"},active:{type:Boolean,value:!1},requestManager:Object,_meshViewer:{type:Object},_dataProvider:{type:Object},_colorScaleFunction:{type:Object,value:function(){return Yk.runsColorScale}},_runColor:{type:String,computed:"_computeRunColor(run)"},_steps:{type:Array,value:function(){return[]},notify:!0},_stepIndex:{type:Number,notify:!0},_currentStep:{type:Object,
computed:"_computeCurrentStep(_steps, _stepIndex)"},_meshViewerAttached:{type:Boolean,value:!1},_cameraPositionInitialized:{type:Boolean,value:!1},_stepValue:{type:Number,computed:"_computeStepValue(_currentStep)"},_currentWallTime:{type:String,computed:"_computeCurrentWallTime(_currentStep)"},_isMeshLoading:{type:Boolean,value:!1}},observers:["reload(run, tag, active, _dataProvider)","_updateScene(_currentStep)","_updateView(selectedView)"],_computeRunColor:function(b){return this._colorScaleFunction(b)},
attached:function(){this._dataProvider=new a.ArrayBufferDataProvider(this.requestManager);this._meshViewer=new a.MeshViewer(this._runColor);this._meshViewer.addEventListener("beforeUpdateScene",this._updateCanvasSize.bind(this));this._meshViewer.addEventListener("cameraPositionChange",this._onCameraPositionChange.bind(this));this.reload()},reload:function(){var b=this;this.active&&this._dataProvider&&(this.set("_isMeshLoading",!0),this._dataProvider.reload(this.run,this.tag,this.sample).then(function(c){c&&
(b.set("_steps",c),b.set("_stepIndex",c.length-1),b.set("_isMeshLoading",!1),b._meshViewerAttached||(b.appendChild(b._meshViewer.getRenderer().domElement),b._meshViewerAttached=!0))}).catch(function(c){if(!c||!c.code||c.code!=a.ErrorCodes.CANCELLED)throw Error(c||"Response processing failed.");}))},_updateScene:function(b){this._meshViewer.updateScene(b,this);this._cameraPositionInitialized||(this._meshViewer.resetView(),this._cameraPositionInitialized=!0)},_onCameraPositionChange:function(){if(this._meshViewer.isReady()){var b=
new CustomEvent("camera-position-change",{detail:this._meshViewer.getCameraPosition()});this.dispatchEvent(b)}},setCameraViewpoint:function(b,c,e){this._meshViewer.setCameraViewpoint(b,c,e)},_updateCanvasSize:function(){var b=this.offsetWidth,c=this.$$(".tf-mesh-loader-header").offsetHeight;this._meshViewer.setCanvasSize({width:b,height:b-c})},redraw:function(){this._updateCanvasSize();this.isConnected&&this._meshViewer.draw()},_hasAtLeastOneStep:function(b){return!!b&&0<b.length},_hasMultipleSteps:function(b){return!!b&&
1<b.length},_computeCurrentStep:function(b,c){return b[c]||null},_computeStepValue:function(b){return b?b.step:0},_computeCurrentWallTime:function(b){return b?gl.formatDate(b.wall_time):""},_getMaxStepIndex:function(b){return b.length-1},_getSampleText:function(b){return String(b+1)},_hasMultipleSamples:function(b){return 1<b},_updateView:function(b){this._meshViewer&&"all"==b&&this._meshViewer.resetView()},toLocaleString_:function(b){return b.toLocaleString()}})})(iq||(iq={}));
</script>
</dom-module>



<dom-module id="mesh-dashboard">
  <template>
    <tf-dashboard-layout>
      <div class="sidebar all-controls">

        <div class="sidebar-section view-control">
            <h3 class="title">Point of view</h3>
            <div>
              <paper-radio-group id="view-radio-group" selected="{{_selectedView}}">
                <paper-radio-button id="all-radio-button" name="all">
                  Display all points
                </paper-radio-button>
                <paper-tooltip animation-delay="0" for="all-radio-button" position="right" offset="0">
                  Zoom and center camera to display all points at once. Note, that some points could
                  be too far (i.e. too small) to be visible.
                </paper-tooltip>
                <paper-radio-button id="user-radio-button" name="user">
                  Current view
                </paper-radio-button>
                <paper-tooltip animation-delay="0" for="user-radio-button" position="right" offset="0">
                  Keep current camera position and zoom level.
                </paper-tooltip>
                <paper-radio-button id="share-radio-button" name="share">
                  Share viewpoint
                </paper-radio-button>
                <paper-tooltip animation-delay="0" for="share-radio-button" position="right" offset="0">
                  Share viewpoint among all cameras.
                </paper-tooltip>
              </paper-radio-group>
            </div>
        </div>
        <div class="sidebar-section runs-selector">
          <tf-runs-selector selected-runs="{{_selectedRuns}}">
          </tf-runs-selector>
        </div>
      </div>
      <div class="center">
        <template is="dom-if" if="[[_dataNotFound]]">
          <div class="no-data-warning">
            <h3>No point cloud data was found.</h3>
            <p>Probable causes:
            <ul>
              <li>You havenât written any point cloud data to your event files.
              <li>TensorBoard canât find your event files.
            </ul>
            <p>
            If youâre new to using TensorBoard, and want to find out how
            to add data and set up your event files, check out the
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
            and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
            <p>
            If you think TensorBoard is configured properly, please see
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
            and consider filing an issue on GitHub.
          </div>
        </template>
        <template is="dom-if" if="[[!_dataNotFound]]">
          <tf-tag-filterer tag-filter="{{_tagFilter}}"></tf-tag-filterer>
          <template is="dom-repeat" items="[[_categories]]" as="category">
            <tf-category-pane category="[[category]]">
              <tf-paginated-view items="[[category.items]]" pages="{{category._pages}}">
                <template is="dom-repeat" items="[[category._pages]]" as="page">
                  <template is="dom-if" if="[[page.active]]">
                    <div class="layout horizontal wrap">
                      <template is="dom-repeat" items="[[page.items]]">
                        <tf-mesh-loader active selected-view="[[_selectedView]]" run="[[item.run]]" tag="[[item.tag]]" sample="[[item.sample]]" of-samples="[[item.ofSamples]]" request-manager="[[_requestManager]]" class="tf-mesh-loader-container" on-camera-position-change="_onCameraPositionChanged">
                        </tf-mesh-loader>
                      </template>
                    </div>
                  </template>
                </template>
              </tf-paginated-view>
            </tf-category-pane>
          </template>
        </template>
      </div>
    </tf-dashboard-layout>

    <style include="dashboard-style"></style>
    <style>
      .no-data-warning {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }
      paper-radio-button {
        display: block;
        padding: 5px;
      }
      .sidebar-section h3.title {
        color: var(--paper-grey-800);
        margin: 0;
        font-weight: normal;
        font-size: 14px;
        margin-bottom: 5px;
      }

      .runs-selector {
        flex-grow: 1;
      }

      tf-runs-selector {
        display: flex;
      }

      .view-control {
        display: block !important;
      }

      .view-control h3.title {
        padding-top: 16px;
        padding-bottom: 16px;
      }

      .allcontrols .view-control paper-radio-group {
        margin-top: 5px;
      }
      /* Layout must be horizontal, i.e. items arranged in a row. If items cannot fit in a row,
       * they should be moved to next line. All items must be square at all times. Minimum size of
       * the item is 480px. This means that maximum size of the item must be 480px + 479px = 959px.
       * */
      .horizontal {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
      }
      .tf-mesh-loader-container {
        width: 480px;
        flex-basis: 480px;
        flex-grow: 1;
        display: block;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/tf-mesh-dashboard/tf-mesh-dashboard.html.js
Polymer({is:"mesh-dashboard",properties:{_selectedRuns:Array,_runToTagInfo:Object,_dataNotFound:Boolean,_tagFilter:{type:String,value:".*"},_selectedView:{type:String,notify:!0,value:"all"},_categories:{type:Array,computed:"_makeCategories(_runToTagInfo, _selectedRuns, _tagFilter)"},_requestManager:{type:Object,value:function(){return new Rk.RequestManager}}},ready:function(){var a=this;window.addEventListener("resize",function(){a._handleWindowResize()},!1);this.reload()},_getAllChildren:function(){return this.querySelectorAll("tf-mesh-loader")},
_onCameraPositionChanged:function(a){"share"==this._selectedView&&this._getAllChildren().forEach(function(b){a.target!=b&&b.setCameraViewpoint(a.detail.position,a.detail.far,a.detail.target)})},reload:function(){this._fetchTags().then(this._reloadMeshes.bind(this))},_handleWindowResize:function(){this._getAllChildren().forEach(function(a){a.redraw()})},_fetchTags:function(){var a=this,b=Rk.getRouter().pluginRoute("mesh","/tags");return this._requestManager.request(b).then(function(c){if(!_.isEqual(c,
a._runToTagInfo)){var e=_.mapValues(c,function(f){return Object.keys(f)});e=Rk.getTags(e);a.set("_dataNotFound",0===e.length);a.set("_runToTagInfo",c)}})},_reloadMeshes:function(){this._getAllChildren().forEach(function(a){a.reload()})},_makeCategories:function(a,b,c){function e(g){var h=a[g.run][g.tag].samples;return _.range(h).map(function(l){return Object.assign({},g,{sample:l,ofSamples:h})})}var f=_.mapValues(a,function(g){return Object.keys(g)});return Sk.categorizeRunTagCombinations(f,b,c).map(function(g){return Object.assign({},
g,{items:[].concat.apply([],g.items.map(e))})})}});
</script>
</dom-module>




















<dom-module id="tf-tensorboard">
  <template>
    <paper-dialog with-backdrop id="settings">
      <h2>Settings</h2>
      <paper-checkbox id="auto-reload-checkbox" checked="{{autoReloadEnabled}}">
        Reload data every <span>[[autoReloadIntervalSecs]]</span>s.
      </paper-checkbox>
      <paper-input id="paginationLimitInput" label="Pagination limit" always-float-label type="number" min="1" step="1" on-change="_paginationLimitChanged"></paper-input>
    </paper-dialog>
    <paper-header-panel>
      <paper-toolbar id="toolbar" slot="header">
        <div id="toolbar-content" slot="top">
          <div class="toolbar-title">[[brand]]</div>
          <template is="dom-if" if="[[_activeDashboardsNotLoaded]]">
            <span class="toolbar-message">
              Loading active dashboardsâ¦
            </span>
          </template>
          <template is="dom-if" if="[[_activeDashboardsLoaded]]">
            <paper-tabs noink scrollable selected="{{_selectedDashboard}}" attr-for-selected="data-dashboard">
              <template is="dom-repeat" items="[[_dashboardData]]" as="dashboardDatum">
                <template is="dom-if" if="[[_isDashboardActive(disabledDashboards, _activeDashboards, dashboardDatum)]]">
                  <paper-tab data-dashboard$="[[dashboardDatum.plugin]]" title="[[dashboardDatum.tabName]]">
                    [[dashboardDatum.tabName]]
                  </paper-tab>
                </template>
              </template>
            </paper-tabs>
            <template is="dom-if" if="[[_inactiveDashboardsExist(_dashboardData, disabledDashboards, _activeDashboards)]]">
              <paper-dropdown-menu label="Inactive" no-label-float noink style="margin-left: 12px">
                <paper-menu id="inactive-dashboards-menu" class="dropdown-content" selected="{{_selectedDashboard}}" attr-for-selected="data-dashboard">
                  <template is="dom-repeat" items="[[_dashboardData]]" as="dashboardDatum">
                    <template is="dom-if" if="[[_isDashboardInactive(disabledDashboards, _activeDashboards, dashboardDatum)]]" restamp>
                      <paper-item data-dashboard$="[[dashboardDatum.plugin]]">[[dashboardDatum.tabName]]</paper-item>
                    </template>
                  </template>
                </paper-menu>
              </paper-dropdown-menu>
            </template>
          </template>
          <div class="global-actions">
            <paper-icon-button id="reload-button" class$="[[_getDataRefreshingClass(_refreshing)]]" disabled$="[[_isReloadDisabled]]" icon="refresh" on-tap="reload" title$="Last updated: [[_lastReloadTimeShort]]"></paper-icon-button>
            <paper-icon-button icon="settings" on-tap="openSettings" id="settings-button"></paper-icon-button>
            <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md" rel="noopener noreferrer" tabindex="-1" target="_blank">
              <paper-icon-button icon="help-outline"></paper-icon-button>
            </a>
          </div>
        </div>
      </paper-toolbar>

      <div id="content-pane" class="fit">
        <slot id="injected-overview"></slot>
        <div id="content">
          <template is="dom-if" if="[[_activeDashboardsFailedToLoad]]">
            <div class="warning-message">
              <h3>Failed to load the set of active dashboards.</h3>
              <p>
              This can occur if the TensorBoard backend is no longer
              running. Perhaps this page is cached?
              <p>
              If you think that youâve fixed the problem, click the reload
              button in the top-right.
              <template is="dom-if" if="[[autoReloadEnabled]]">
              Weâll try to reload every [[autoReloadIntervalSecs]]&nbsp;seconds as well.
              </template>
              <p><i>Last reload: [[_lastReloadTime]]</i>
              <template is="dom-if" if="[[_dataLocation]]">
                </template><p><i>Log directory: <span id="data_location">[[_dataLocation]]</span></i>
              
            </div>
          </template>
          <template is="dom-if" if="[[_showNoDashboardsMessage]]">
            <div class="warning-message">
              <h3>No dashboards are active for the current data set.</h3>
              <p>Probable causes:
              <ul>
                <li>You havenât written any data to your event files.
                <li>TensorBoard canât find your event files.
              </ul>
              If youâre new to using TensorBoard, and want to find out how
              to add data and set up your event files, check out the
              <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md">README</a>
              and perhaps the <a href="https://www.tensorflow.org/get_started/summaries_and_tensorboard">TensorBoard tutorial</a>.
              <p>
              If you think TensorBoard is configured properly, please see
              <a href="https://github.com/tensorflow/tensorboard/blob/master/README.md#my-tensorboard-isnt-showing-any-data-whats-wrong">the section of the README devoted to missing data problems</a>
              and consider filing an issue on GitHub.
              <p><i>Last reload: [[_lastReloadTime]]</i>
              <template is="dom-if" if="[[_dataLocation]]">
                </template><p><i>Data location: <span id="data_location">[[_dataLocation]]</span></i>
              
            </div>
          </template>
          <template is="dom-if" if="[[_showNoSuchDashboardMessage]]">
            <div class="warning-message">
              <h3>Thereâs no dashboard by the name of â<tt>[[_selectedDashboard]]</tt>.â</h3>
              <template is="dom-if" if="[[_activeDashboardsLoaded]]">
                <p>You can select a dashboard from the list above.
              
              <p><i>Last reload: [[_lastReloadTime]]</i>
              <template is="dom-if" if="[[_dataLocation]]">
                </template><p><i>Data location: <span id="data_location">[[_dataLocation]]</span></i>
              </template>
            </div>
          </template>
          <template is="dom-repeat" id="dashboards-template" items="[[_dashboardData]]" as="dashboardDatum">
            <div class="dashboard-container" data-dashboard$="[[dashboardDatum.plugin]]" data-selected$="[[_selectedStatus(_selectedDashboard, dashboardDatum.plugin)]]"></div>
          </template>
        </div>
      </div>
    </paper-header-panel>

    <style>
      :host {
        height: 100%;
        display: block;
        background-color: var(--paper-grey-100);
      }

      #toolbar {
        background-color: var(--tb-toolbar-background-color, var(--tb-orange-strong));
        -webkit-font-smoothing: antialiased;
      }

      .toolbar-title {
        font-size: 20px;
        margin-left: 10px;
        text-rendering: optimizeLegibility;
        letter-spacing: -0.025em;
        font-weight: 500;
        display: var(--tb-toolbar-title-display, block);
      }

      .toolbar-message {
        opacity: 0.7;
        -webkit-font-smoothing: antialiased;
        font-size: 14px;
        font-weight: 500;
      }

      paper-tabs {
        flex-grow: 1;
        width: 100%;
        height: 100%;
        --paper-tabs-selection-bar-color: white;
        --paper-tabs-content: {
          -webkit-font-smoothing: antialiased;
          text-transform: uppercase;
        }
      }

      paper-dropdown-menu {
        --paper-input-container-color: rgba(255, 255, 255, 0.8);
        --paper-input-container-focus-color: white;
        --paper-input-container-input-color: white;
        --paper-dropdown-menu-icon: {
          color: white;
        }
        --paper-input-container-input: {
          -webkit-font-smoothing: antialiased;
          font-size: 14px;
          font-weight: 500;
          text-transform: uppercase;
        }
        --paper-input-container-label: {
          -webkit-font-smoothing: antialiased;
          font-size: 14px;
          font-weight: 500;
          text-transform: uppercase;
        }
      }

      #inactive-dashboards-menu {
        --paper-menu-background-color: var(--tb-toolbar-background-color, var(--tb-orange-strong));
        --paper-menu-color: white;
        --paper-menu: {
          text-transform: uppercase;
        }
      }

      .global-actions {
        display: inline-flex; /* Ensure that icons stay aligned */
        justify-content: flex-end;
        text-align: right;
        color: white;
      }

      .global-actions a {
        color: white;
      }

      #toolbar-content {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }

      #content-pane {
        align-items: stretch;
        display: flex;
        flex-direction: column;
        height: 100%;
        justify-content: stretch;
        width: 100%;
      }

      #content {
        flex: 1 1;
        overflow: hidden;
      }

      .dashboard-container {
        height: 100%;
      }

      /* Hide unselected dashboards. We still display them within a container
         of height 0 since Plottable produces degenerate charts when charts are
         reloaded while not displayed. */
      .dashboard-container:not([data-selected]) {
        max-height: 0;
        overflow: hidden;
        position: relative;
        /** We further make containers invisible. Some elements may anchor to
            the viewport instead of the container, in which case setting the max
            height here to 0 will not hide them. */
        visibility: hidden;
      }

      .dashboard-container iframe {
        border: none;
        height: 100%;
        width: 100%;
      }

      .warning-message {
        max-width: 540px;
        margin: 80px auto 0 auto;
      }

      [disabled] {
        opacity: 0.2;
        color: white;
      }

      #reload-button.refreshing {
        animation: rotate 2s linear infinite;
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }
        50% {
          transform: rotate(180deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </template>
  <script>//~~WEBPATH~~/tf-tensorboard/autoReloadBehavior.js
(function(a){a.AUTORELOAD_LOCALSTORAGE_KEY="TF.TensorBoard.autoReloadEnabled";a.AutoReloadBehavior={properties:{autoReloadEnabled:{type:Boolean,observer:"_autoReloadObserver",value:function(){var b=window.localStorage.getItem(a.AUTORELOAD_LOCALSTORAGE_KEY);return"true"===b||null==b}},_autoReloadId:{type:Number},autoReloadIntervalSecs:{type:Number,value:30}},detached:function(){window.clearTimeout(this._autoReloadId)},_autoReloadObserver:function(b){var c=this;window.localStorage.setItem(a.AUTORELOAD_LOCALSTORAGE_KEY,
b);b&&!(new URLSearchParams(window.location.search)).has("_DisableAutoReload")?this._autoReloadId=window.setTimeout(function(){return c._doAutoReload()},1E3*this.autoReloadIntervalSecs):window.clearTimeout(this._autoReloadId)},_doAutoReload:function(){var b=this;if(null==this.reload)throw Error("AutoReloadBehavior requires a reload method");this.reload();this._autoReloadId=window.setTimeout(function(){return b._doAutoReload()},1E3*this.autoReloadIntervalSecs)}}})($k||($k={}));
</script>
  <script>//~~WEBPATH~~/tf-tensorboard/tf-tensorboard.html.js
Polymer({is:"tf-tensorboard",behaviors:[$k.AutoReloadBehavior],properties:{brand:{type:String,value:"TensorBoard-X"},title:{type:String,observer:"_updateTitle"},router:{type:Object,observer:"_updateRouter"},demoDir:{type:String,value:null},useHash:{type:Boolean,value:!1},disabledDashboards:{type:String,value:""},_dashboardData:{type:Array,computed:"_computeDashboardData(_dashboardRegistry)"},_dashboardRegistry:{type:Object,computed:"_computeDashboardRegistry(_pluginsListing)"},_pluginsListing:{type:Object,
value:function(){return{}}},_activeDashboards:{type:Array,computed:"_computeActiveDashboard(_dashboardData, _pluginsListing)"},_activeDashboardsLoadState:{type:String,value:$k.ActiveDashboardsLoadState.NOT_LOADED},_activeDashboardsNotLoaded:{type:Boolean,computed:"_computeActiveDashboardsNotLoaded(_activeDashboardsLoadState)"},_activeDashboardsLoaded:{type:Boolean,computed:"_computeActiveDashboardsLoaded(_activeDashboardsLoadState)"},_activeDashboardsFailedToLoad:{type:Boolean,computed:"_computeActiveDashboardsFailedToLoad(_activeDashboardsLoadState)"},
_showNoDashboardsMessage:{type:Boolean,computed:"_computeShowNoDashboardsMessage(_activeDashboardsLoaded, _activeDashboards, _selectedDashboard)"},_showNoSuchDashboardMessage:{type:Boolean,computed:"_computeShowNoSuchDashboardMessage(_activeDashboardsLoaded, _dashboardRegistry, _selectedDashboard)"},_selectedDashboard:{type:String,value:Uk.getString(Uk.TAB)||null,observer:"_selectedDashboardChanged"},_dashboardToMaybeRemove:String,_dashboardContainersStamped:{type:Object,value:function(){return{}}},
_isReloadDisabled:{type:Boolean,value:!1},_lastReloadTime:{type:String,value:"not yet loaded"},_lastReloadTimeShort:{type:String,value:"Not yet loaded"},_dataLocation:{type:String,value:null},_requestManager:{type:Object,value:function(){return new Rk.RequestManager}},_canceller:{type:Object,value:function(){return new Rk.Canceller}},_refreshing:{type:Boolean,value:!1}},observers:["_updateSelectedDashboardFromActive(_selectedDashboard, _activeDashboards)","_ensureSelectedDashboardStamped(_dashboardRegistry, _dashboardContainersStamped, _activeDashboards, _selectedDashboard)"],
_activeDashboardsUpdated:function(){},_isDashboardActive:function(a,b,c){return 0<=(a||"").split(",").indexOf(c.plugin)||!(b||[]).includes(c.plugin)?!1:!0},_isDashboardInactive:function(a,b,c){return 0<=(a||"").split(",").indexOf(c.plugin)?!1:(b||[]).includes(c.plugin)?!1:!0},_inactiveDashboardsExist:function(a,b,c){if(!c)return!1;var e=new Set;a.forEach(function(f){e.add(f.plugin)});(b||"").split(",").forEach(function(f){e.delete(f.plugin)});c.forEach(function(f){e.delete(f.plugin)});return 0<e.size},
_getDashboardFromIndex:function(a,b){return a[b]},_selectedStatus:function(a,b){return a===b},_selectedDashboardChanged:function(a){a=a||"";Uk.setString(Uk.TAB,a);ga("set","page","/"+a);ga("send","pageview")},_updateSelectedDashboardFromActive:function(a,b){b&&null==a&&(a=b[0]||null,null!=a&&(Uk.setString(Uk.TAB,a,{useLocationReplace:!0}),this._selectedDashboard=a))},_updateSelectedDashboardFromHash:function(){var a=Uk.getString(Uk.TAB);this.set("_selectedDashboard",a||null)},_ensureSelectedDashboardStamped:function(a,
b,c,e){if(c&&e&&b[e]&&(b=this._dashboardToMaybeRemove,this._dashboardToMaybeRemove=e,b&&b!=e&&a[b].removeDom&&(b=this.$$(".dashboard-container[data-dashboard\x3d"+b+"]"),b.firstChild&&b.firstChild.remove()),c=this.$$(".dashboard-container[data-dashboard\x3d"+e+"]"))){a=a[e];if(0===c.children.length)switch(b=a.loadingMechanism,b.type){case "CUSTOM_ELEMENT":e=document.createElement(b.elementName);e.id="dashboard";c.appendChild(e);break;case "IFRAME":var f=document.createElement("iframe");f.id="dashboard";
this.scopeSubtree(f);c.appendChild(f);c=f.contentDocument;e=Rk.getRouter().pluginRoute(e,"/");f=c.createElement("base");f.setAttribute("href",String(new URL(e,window.location.href)));c.head.appendChild(f);e=c.createElement("script");b=JSON.stringify(b.modulePath);e.textContent="import("+b+").then((m) \x3d\x3e void m.render());";c.body.appendChild(e);break;default:console.warn("Invariant violation:",b)}this.set("_isReloadDisabled",a.disableReload)}},_selectedDashboardComponent:function(){return this.$$(".dashboard-container[data-dashboard\x3d"+
this._selectedDashboard+"] #dashboard")},ready:function(){var a=this;Tk.setUseHash(this.useHash);this._updateSelectedDashboardFromHash();window.addEventListener("hashchange",function(){a._updateSelectedDashboardFromHash()},!1);Rk.environmentStore.addListener(function(){a._dataLocation=Rk.environmentStore.getDataLocation();var b=Rk.environmentStore.getWindowTitle();b&&(window.document.title=b)});this.$$("#dashboards-template").addEventListener("dom-change",function(){for(var b={},c=za(a.querySelectorAll(".dashboard-container")),
e=c.next();!e.done;e=c.next())b[e.value.dataset.dashboard]=!0;a._dashboardContainersStamped=b},!1);this._reloadData();this._lastReloadTime=(new Date).toString()},_computeActiveDashboard:function(){var a=this;return this._dashboardData.map(function(b){return b.plugin}).filter(function(b){b=a._pluginsListing[b];return"boolean"===typeof b?b:b&&b.enabled})},_computeDashboardRegistry:function(a){for(var b={},c=za(Object.entries($k.dashboardRegistry)),e=c.next();!e.done;e=c.next()){var f=za(e.value);e=
f.next().value;f=f.next().value;b[e]={plugin:f.plugin,loadingMechanism:{type:"CUSTOM_ELEMENT",elementName:f.elementName},tabName:f.tabName,disableReload:f.isReloadDisabled||!1,removeDom:f.removeDom||!1}}if(null!=a)for(c=za(Object.entries(a)),e=c.next();!e.done;e=c.next())if(f=za(e.value),e=f.next().value,f=f.next().value,"boolean"!==typeof f){switch(f.loading_mechanism.type){case "NONE":null==b[e]&&console.warn("Plugin has no loading mechanism and no baked-in registry entry: %s",e);continue;case "CUSTOM_ELEMENT":var g=
{type:"CUSTOM_ELEMENT",elementName:f.loading_mechanism.element_name};break;case "IFRAME":g={type:"IFRAME",modulePath:f.loading_mechanism.module_path};break;default:console.warn("Unknown loading mechanism for plugin %s: %s",e,f.loading_mechanism);continue}null==g&&console.error("Invariant violation: loadingMechanism is %s for %s",g,e);b[e]={plugin:e,loadingMechanism:g,tabName:f.tab_name,disableReload:f.disable_reload,removeDom:f.remove_dom}}c={};a=za(Object.keys(a));for(e=a.next();!e.done;e=a.next())e=
e.value,b[e]&&(c[e]=b[e]);Object.assign(c,b);return c},_computeDashboardData:function(a){return Object.values(a)},_fetchPluginsListing:function(){var a=this;this._canceller.cancelAll();var b=this._canceller.cancellable(function(c){c.cancelled||(a._pluginsListing=c.value,a._activeDashboardsLoadState=$k.ActiveDashboardsLoadState.LOADED)});return this._requestManager.request(Rk.getRouter().pluginsListing()).then(b,function(){a._activeDashboardsLoadState===$k.ActiveDashboardsLoadState.NOT_LOADED?a._activeDashboardsLoadState=
$k.ActiveDashboardsLoadState.FAILED:console.warn("Failed to reload the set of active plugins; using old value.")})},_computeActiveDashboardsNotLoaded:function(a){return a===$k.ActiveDashboardsLoadState.NOT_LOADED},_computeActiveDashboardsLoaded:function(a){return a===$k.ActiveDashboardsLoadState.LOADED},_computeActiveDashboardsFailedToLoad:function(a){return a===$k.ActiveDashboardsLoadState.FAILED},_computeShowNoDashboardsMessage:function(a,b,c){return a&&0===b.length&&null==c},_computeShowNoSuchDashboardMessage:function(a,
b,c){return a&&!!c&&null==b[c]},_updateRouter:function(a){Rk.setRouter(a)},_updateTitle:function(a){a&&this.set("brand",a)},reload:function(){var a=this;this._isReloadDisabled||(this._reloadData().then(function(){var b=a._selectedDashboardComponent();b&&b.reload&&b.reload()}),this._lastReloadTime=(new Date).toString())},_reloadData:function(){var a=this;this._refreshing=!0;return Promise.all([this._fetchPluginsListing(),Rk.environmentStore.refresh(),Rk.runsStore.refresh(),Rk.experimentsStore.refresh()]).then(function(){a._lastReloadTimeShort=
(new Date).toLocaleDateString(void 0,{month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}).finally(function(){a._refreshing=!1})},_getDataRefreshingClass:function(){return this._refreshing?"refreshing":""},openSettings:function(){this.$.settings.open();this.$.paginationLimitInput.value=Xk.getLimit()},_paginationLimitChanged:function(a){var b=a.target.valueAsNumber;b===+b&&0<b&&Xk.setLimit(a.target.valueAsNumber)}});</script>
</dom-module>

<body>
<tf-tensorboard use-hash brand="TensorBoard"></tf-tensorboard>
